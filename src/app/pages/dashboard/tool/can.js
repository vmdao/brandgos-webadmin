
    var f, ba = "undefined" != typeof window && window === this ? this : "undefined" != typeof global ? global : this,
        da = {};

    function ea(a, b) {
        (da[a] = da[a] || []).push(b);
        var c = ba;
        a = a.split(".");
        for (var d = 0; d < a.length - 1 && c; d++)
            c = c[a[d]];
        a = a[a.length - 1];
        c && c[a] instanceof Function && (c[a] = b(c[a]))
    }

    function fa() {
        fa = function () {};
        if (!ba.Symbol) {
            ba.Symbol = ha;
            var a = [],
                b = function (b) {
                    return function (d) {
                        a = [];
                        d = b(d);
                        for (var e = [], g = 0, h = d.length; g < h; g++) {
                            var k;
                            a: if (k = d[g],
                                    14 > k.length)
                                    k = !1;
                                else {
                                    for (var l = 0; 14 > l; l++)
                                        if (k[l] != "jscomp_symbol_" [l]) {
                                            k = !1;
                                            break a
                                        }
                                    k = !0
                                }
                            k ? a.push(d[g]) : e.push(d[g])
                        }
                        return e
                    }
                };
            ea("Object.keys", b);
            ea("Object.getOwnPropertyNames", b);
            ea("Object.getOwnPropertySymbols", function (c) {
                return function (d) {
                    b.S9 = Object.getOwnPropertyNames(d);
                    a.push.apply(c(d));
                    return a
                }
            })
        }
    }
    var ia = 0;

    function ha(a) {
        return "jscomp_symbol_" + a + ia++
    }

    function ja() {
        fa();
        ba.Symbol.iterator || (ba.Symbol.iterator = ba.Symbol("iterator"));
        ja = function () {}
    }

    function ka(a) {
        ja();
        fa();
        ja();
        var b = a[Symbol.iterator];
        if (b)
            return b.call(a);
        var c = 0;
        return {
            next: function () {
                return c < a.length ? {
                    done: !1,
                    value: a[c++]
                } : {
                    done: !0
                }
            }
        }
    }

    function la(a) {
        if (!(a instanceof Array)) {
            a = ka(a);
            for (var b, c = []; !(b = a.next()).done;)
                c.push(b.value);
            a = c
        }
        return a
    }

    function t(a, b) {
        function c() {}
        c.prototype = b.prototype;
        a.prototype = new c;
        a.prototype.constructor = a;
        for (var d in b)
            if (Object.defineProperties) {
                var e = Object.getOwnPropertyDescriptor(b, d);
                e && Object.defineProperty(a, d, e)
            } else
                a[d] = b[d]
    }
    var na = "function" == typeof Object.defineProperties ? Object.defineProperty : function (a, b, c) {
        if (c.get || c.set)
            throw new TypeError("ES3 does not support getters and setters.");
        a != Array.prototype && a != Object.prototype && (a[b] = c.value)
    };

    function oa(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b)
    }

    function pa(a, b) {
        if (b) {
            for (var c = ba, d = a.split("."), e = 0; e < d.length - 1; e++) {
                var g = d[e];
                g in c || (c[g] = {});
                c = c[g]
            }
            d = d[d.length - 1];
            e = c[d];
            b = b(e);
            if (b != e) {
                a = da[a] || [];
                for (e = 0; e < a.length; e++)
                    b = a[e](b);
                na(c, d, {
                    configurable: !0,
                    writable: !0,
                    value: b
                })
            }
        }
    }
    pa("WeakMap", function (a) {
        function b(a) {
            this.kz = (k += Math.random() + 1).toString();
            if (a) {
                fa();
                ja();
                a = ka(a);
                for (var b; !(b = a.next()).done;)
                    b = b.value,
                    this.set(b[0], b[1])
            }
        }

        function c(a) {
            if (!oa(a, g)) {
                var b = {};
                b[g] = h;
                na(a, g, {
                    value: b
                })
            }
        }

        function d(a) {
            return function (b) {
                var c = a(b);
                if (oa(b, g) && oa(b[g], g) && b[g][g] === h)
                    for (b = 0; b < c.length; b++)
                        if (c[b] == g) {
                            c.splice(b, 1);
                            break
                        }
                return c
            }
        }

        function e(a) {
            return function (b) {
                c(b);
                return a(b)
            }
        }
        if (function () {
                if (!a || !Object.seal)
                    return !1;
                var b = Object.seal({}),
                    c = Object.seal({}),
                    d = new a([
                        [b, 2],
                        [c, 3]
                    ]);
                if (2 != d.get(b) || 3 != d.get(c))
                    return !1;
                d.delete(b);
                d.set(c, 4);
                return !d.has(b) && 4 == d.get(c)
            }())
            return a;
        var g = "$jscomp_hidden_" + Math.random().toString().substring(2),
            h = {};
        ea("Object.getOwnPropertyNames", d);
        ea("Object.keys", d);
        ea("Reflect.enumerate", d);
        ea("Reflect.ownKeys", d);
        ea("Object.freeze", e);
        ea("Object.preventExtensions", e);
        ea("Object.seal", e);
        var k = 0;
        b.prototype.set = function (a, b) {
            c(a);
            if (!oa(a, g))
                throw Error("WeakMap key fail: " + a);
            a[g][this.kz] = b;
            return this
        };
        b.prototype.get = function (a) {
            return oa(a, g) ? a[g][this.kz] : void 0
        };
        b.prototype.has = function (a) {
            return oa(a, g) && oa(a[g], this.kz)
        };
        b.prototype.delete = function (a) {
            return oa(a, g) && oa(a[g], this.kz) ? delete a[g][this.kz] : !1
        };
        return b
    });
    pa("Map", function (a) {
        function b() {
            var a = {};
            return a.previous = a.next = a.head = a
        }

        function c(a, b) {
            var c = a.Nm,
                d = {
                    next: function () {
                        if (c) {
                            for (; c.head != a.Nm;)
                                c = c.previous;
                            for (; c.next != c.head;)
                                return c = c.next, {
                                    done: !1,
                                    value: b(c)
                                };
                            c = null
                        }
                        return {
                            done: !0,
                            value: void 0
                        }
                    }
                };
            d[Symbol.iterator] = function () {
                return d
            };
            return d
        }

        function d(a, b) {
            var c;
            c = b && typeof b;
            "object" == c || "function" == c ? g.has(b) ? c = g.get(b) : (c = "" + ++h,
                g.set(b, c)) : c = "p_" + b;
            var d = a.Xx[c];
            if (d && oa(a.Xx, c))
                for (a = 0; a < d.length; a++) {
                    var e = d[a];
                    if (b !== b && e.key !== e.key || b === e.key)
                        return {
                            id: c,
                            list: d,
                            index: a,
                            lg: e
                        }
                }
            return {
                id: c,
                list: d,
                index: -1,
                lg: void 0
            }
        }

        function e(a) {
            this.Xx = {};
            this.Nm = b();
            this.size = 0;
            if (a) {
                a = ka(a);
                for (var c; !(c = a.next()).done;)
                    c = c.value,
                    this.set(c[0], c[1])
            }
        }
        if (function () {
                if (!a || !a.prototype.entries || "function" != typeof Object.seal)
                    return !1;
                try {
                    var b = Object.seal({
                            x: 4
                        }),
                        c = new a(ka([
                            [b, "s"]
                        ]));
                    if ("s" != c.get(b) || 1 != c.size || c.get({
                            x: 4
                        }) || c.set({
                            x: 4
                        }, "t") != c || 2 != c.size)
                        return !1;
                    var d = c.entries(),
                        e = d.next();
                    if (e.done || e.value[0] != b || "s" != e.value[1])
                        return !1;
                    e = d.next();
                    return e.done || 4 != e.value[0].x || "t" != e.value[1] || !d.next().done ? !1 : !0
                } catch (g) {
                    return !1
                }
            }())
            return a;
        fa();
        ja();
        var g = new WeakMap;
        e.prototype.set = function (a, b) {
            var c = d(this, a);
            c.list || (c.list = this.Xx[c.id] = []);
            c.lg ? c.lg.value = b : (c.lg = {
                    next: this.Nm,
                    previous: this.Nm.previous,
                    head: this.Nm,
                    key: a,
                    value: b
                },
                c.list.push(c.lg),
                this.Nm.previous.next = c.lg,
                this.Nm.previous = c.lg,
                this.size++);
            return this
        };
        e.prototype.delete = function (a) {
            a = d(this, a);
            return a.lg && a.list ? (a.list.splice(a.index, 1),
                a.list.length || delete this.Xx[a.id],
                a.lg.previous.next = a.lg.next,
                a.lg.next.previous = a.lg.previous,
                a.lg.head = null,
                this.size--, !0) : !1
        };
        e.prototype.clear = function () {
            this.Xx = {};
            this.Nm = this.Nm.previous = b();
            this.size = 0
        };
        e.prototype.has = function (a) {
            return !!d(this, a).lg
        };
        e.prototype.get = function (a) {
            return (a = d(this, a).lg) && a.value
        };
        e.prototype.entries = function () {
            return c(this, function (a) {
                return [a.key, a.value]
            })
        };
        e.prototype.keys = function () {
            return c(this, function (a) {
                return a.key
            })
        };
        e.prototype.values = function () {
            return c(this, function (a) {
                return a.value
            })
        };
        e.prototype.forEach = function (a, b) {
            for (var c = this.entries(), d; !(d = c.next()).done;)
                d = d.value,
                a.call(b, d[1], d[0], this)
        };
        e.prototype[Symbol.iterator] = e.prototype.entries;
        var h = 0;
        return e
    });

    function qa(a, b) {
        ja();
        a instanceof String && (a += "");
        var c = 0,
            d = {
                next: function () {
                    if (c < a.length) {
                        var e = c++;
                        return {
                            value: b(e, a[e]),
                            done: !1
                        }
                    }
                    d.next = function () {
                        return {
                            done: !0,
                            value: void 0
                        }
                    };
                    return d.next()
                }
            };
        d[Symbol.iterator] = function () {
            return d
        };
        return d
    }
    pa("Array.prototype.keys", function (a) {
        return a ? a : function () {
            return qa(this, function (a) {
                return a
            })
        }
    });
    pa("Array.prototype.fill", function (a) {
        return a ? a : function (a, c, d) {
            var e = this.length || 0;
            0 > c && (c = Math.max(0, e + c));
            if (null == d || d > e)
                d = e;
            d = Number(d);
            0 > d && (d = Math.max(0, e + d));
            for (c = Number(c || 0); c < d; c++)
                this[c] = a;
            return this
        }
    });
    pa("Array.prototype.values", function (a) {
        return a ? a : function () {
            return qa(this, function (a, c) {
                return c
            })
        }
    });

    function sa(a, b, c) {
        a instanceof String && (a = String(a));
        for (var d = a.length, e = 0; e < d; e++) {
            var g = a[e];
            if (b.call(c, g, e, a))
                return {
                    sT: e,
                    uq: g
                }
        }
        return {
            sT: -1,
            uq: void 0
        }
    }
    pa("Array.prototype.find", function (a) {
        return a ? a : function (a, c) {
            return sa(this, a, c).uq
        }
    });
    pa("Array.prototype.entries", function (a) {
        return a ? a : function () {
            return qa(this, function (a, c) {
                return [a, c]
            })
        }
    });
    pa("Object.assign", function (a) {
        return a ? a : function (a, c) {
            for (var d = 1; d < arguments.length; d++) {
                var e = arguments[d];
                if (e)
                    for (var g in e)
                        oa(e, g) && (a[g] = e[g])
            }
            return a
        }
    });
    pa("Array.from", function (a) {
        return a ? a : function (a, c, d) {
            ja();
            c = null != c ? c : function (a) {
                return a
            };
            var e = [],
                g = a[Symbol.iterator];
            if ("function" == typeof g)
                for (a = g.call(a); !(g = a.next()).done;)
                    e.push(c.call(d, g.value));
            else
                for (var g = a.length, h = 0; h < g; h++)
                    e.push(c.call(d, a[h]));
            return e
        }
    });
    pa("Set", function (a) {
        function b(a) {
            this.Jj = new Map;
            if (a) {
                a = ka(a);
                for (var b; !(b = a.next()).done;)
                    this.add(b.value)
            }
            this.size = this.Jj.size
        }
        if (function () {
                if (!a || !a.prototype.entries || "function" != typeof Object.seal)
                    return !1;
                try {
                    var b = Object.seal({
                            x: 4
                        }),
                        d = new a(ka([b]));
                    if (!d.has(b) || 1 != d.size || d.add(b) != d || 1 != d.size || d.add({
                            x: 4
                        }) != d || 2 != d.size)
                        return !1;
                    var e = d.entries(),
                        g = e.next();
                    if (g.done || g.value[0] != b || g.value[1] != b)
                        return !1;
                    g = e.next();
                    return g.done || g.value[0] == b || 4 != g.value[0].x || g.value[1] != g.value[0] ? !1 : e.next().done
                } catch (h) {
                    return !1
                }
            }())
            return a;
        fa();
        ja();
        b.prototype.add = function (a) {
            this.Jj.set(a, a);
            this.size = this.Jj.size;
            return this
        };
        b.prototype.delete = function (a) {
            a = this.Jj.delete(a);
            this.size = this.Jj.size;
            return a
        };
        b.prototype.clear = function () {
            this.Jj.clear();
            this.size = 0
        };
        b.prototype.has = function (a) {
            return this.Jj.has(a)
        };
        b.prototype.entries = function () {
            return this.Jj.entries()
        };
        b.prototype[Symbol.iterator] = function () {
            return this.Jj.values()
        };
        b.prototype.values = function () {
            return this.Jj.values()
        };
        b.prototype.forEach = function (a, b) {
            var e = this;
            this.Jj.forEach(function (g) {
                return a.call(b, g, g, e)
            })
        };
        return b
    });

    function ta(a, b, c) {
        if (null == a)
            throw new TypeError("The 'this' value for String.prototype." + c + " must not be null or undefined");
        if (b instanceof RegExp)
            throw new TypeError("First argument to String.prototype." + c + " must not be a regular expression");
        return a + ""
    }
    pa("String.prototype.repeat", function (a) {
        return a ? a : function (a) {
            var c = ta(this, null, "repeat");
            if (0 > a || 1342177279 < a)
                throw new RangeError("Invalid count value");
            a |= 0;
            for (var d = ""; a;)
                if (a & 1 && (d += c),
                    a >>>= 1)
                    c += c;
            return d
        }
    });
    pa("Math.log10", function (a) {
        return a ? a : function (a) {
            return Math.log(a) / Math.LN10
        }
    });
    pa("String.prototype.includes", function (a) {
        return a ? a : function (a, c) {
            return -1 !== ta(this, a, "includes").indexOf(a, c || 0)
        }
    });
    pa("Math.sign", function (a) {
        return a ? a : function (a) {
            a = Number(a);
            return 0 === a || isNaN(a) ? a : 0 < a ? 1 : -1
        }
    });
    pa("Array.prototype.findIndex", function (a) {
        return a ? a : function (a, c) {
            return sa(this, a, c).sT
        }
    });

    function ua(a) {
        this.data = a
    }
    ua.prototype.get = function (a, b) {
        if (!this.data)
            throw Error("no viewConfig, unable to get: " + a);
        b = void 0 === this.data[a] ? b : this.data[a];
        if (void 0 === b)
            throw Error('Could not retrieve "' + a + '" from viewConfig');
        return b
    };
    var va = (new UAParser).getResult(),
        wa = va.browser.name,
        xa = va.browser.major,
        ya = (new ua(window.viewConfig || {})).get("magicButtonEnabled", null),
        za = /\.247$/;
    "" == window.location.pathname || "/" == window.location.pathname || "/signup" == window.location.pathname || "/login" == window.location.pathname || va.browser.version.match(za) || ("Chrome" === wa || "Chromium" == wa) && 27 <= xa || "Safari" === wa && 9 <= xa || "Firefox" === wa && 23 <= xa || ("IE" === wa || "Edge" === wa) && 11 <= xa || "undefined" != typeof window.localStorage && window.localStorage.ignore_browser_cache || (ya && ya.test(window.location.search) ? window.location.href = "/unsupported?playvideo\x3d1" : window.location.href = "/unsupported");

    function Aa() {}

    function Ba(a, b, c) {
        for (var d = [], e = 2; e < arguments.length; ++e)
            d[e - 2] = arguments[e];
        if (!a)
            throw Error(2 > arguments.length ? "invalid argument" : Ca.apply(Aa, [].concat([b], la(d))));
    }

    function Da(a, b, c) {
        for (var d = [], e = 2; e < arguments.length; ++e)
            d[e - 2] = arguments[e];
        if (!a)
            throw Error(2 > arguments.length ? "invalid state" : Ca.apply(Aa, [].concat([b], la(d))));
    }

    function w(a, b, c) {
        for (var d = [], e = 2; e < arguments.length; ++e)
            d[e - 2] = arguments[e];
        if (null == a)
            throw Error(2 > arguments.length ? "argument is null" : Ca.apply(Aa, [].concat([b], la(d))));
        return a
    }

    function Ca(a, b) {
        for (var c = [], d = 1; d < arguments.length; ++d)
            c[d - 1] = arguments[d];
        var e = 0;
        return a.replace(/\{}/g, function () {
            return e < c.length ? c[e++] : "{}"
        })
    };

    function Ea(a) {
        this.type = a
    }
    Ea.prototype.required = function (a, b) {
        b = b[a];
        if (null == b || typeof b != this.type)
            throw new TypeError("expected " + this.type + ' for property "' + a + '", found: ' + JSON.stringify(b));
        return b
    };
    Ea.prototype.optional = function (a, b) {
        b = b[a];
        if (null != b && typeof b != this.type)
            throw new TypeError("expected optional " + this.type + ' for property "' + a + '", found: ' + JSON.stringify(b));
        return b
    };
    Ea.prototype.$d = function (a, b) {
        b = b[a];
        if (null != b)
            if (Array.isArray(b))
                for (a = 0; a < b.length; a++)
                    this.required(String(a), b);
            else
                throw new TypeError("expected repeated " + this.type + ' for property "' + a + '", found: ' + JSON.stringify(b));
        return b
    };
    var Fa = new Ea("string"),
        Ga = new Ea("boolean"),
        Ha = new Ea("number"),
        Ia = new Ea("object");

    function Ja(a) {
        if (null == a || "object" != typeof a)
            throw new TypeError("expected an object, found: " + a);
        return a
    }

    function z(a, b) {
        return Ha.optional(a, b) || 0
    }

    function A(a, b) {
        return Ha.optional(a, b)
    }

    function D(a, b) {
        return Fa.required(a, b)
    }

    function F(a, b) {
        return Fa.optional(a, b)
    }

    function La(a, b) {
        return Ga.optional(a, b) || !1
    }

    function Ma(a, b) {
        return Ga.optional(a, b)
    }

    function Na(a, b, c) {
        return a(Ia.required(b, c))
    }

    function Pa(a, b, c) {
        return (b = Ia.optional(b, c)) ? a(b) : b
    }

    function Qa(a, b, c) {
        return (b = Ia.$d(b, c)) ? b.map(a) : b
    }

    function Ra(a, b, c) {
        return a(b, Fa.required(b, c))
    }

    function Sa(a, b, c) {
        c = Fa.optional(b, c);
        return null != c ? a(b, c) : c
    }

    function Ta(a, b, c) {
        c = Fa.$d(b, c);
        return null != c ? c.map(a.bind(null, b)) : c
    }

    function Ua(a, b, c, d) {
        d = d[c];
        if (null == d)
            return d;
        if ("object" !== typeof d)
            throw new TypeError('expected map for property "' + c + '", found: ' + JSON.stringify(d));
        for (var e = new Map, g = ka(Object.keys(d)), h = g.next(); !h.done; h = g.next())
            h = h.value,
            e.set(a(c, h), b(c, h, d));
        return e
    }

    function Va(a, b) {
        return b
    }

    function Wa(a, b, c) {
        b = c[b];
        if ("number" !== typeof b)
            throw new TypeError('expected number value in property "' + a + '", found: ' + JSON.stringify(b));
        return b
    }

    function Xa(a, b, c, d) {
        c = d[c];
        if (null == c || "object" !== typeof c)
            throw new TypeError('expected object value in property "' + b + '", found: ' + JSON.stringify(c));
        return a(c)
    }

    function Ya(a, b, c) {
        b = c[b];
        if ("string" !== typeof b)
            throw new TypeError('expected string value in property "' + a + '", found: ' + JSON.stringify(b));
        return b
    }

    function Za(a) {
        this.type = a
    }
    Za.prototype.required = function (a, b) {
        if (null == b || typeof b != this.type)
            throw new TypeError("expected " + this.type + ' for property "' + a + '", found: ' + JSON.stringify(b));
        return b
    };
    Za.prototype.optional = function (a, b) {
        if (null != b) {
            if (typeof b != this.type)
                throw new TypeError("expected optional " + this.type + ' for property "' + a + '", found: ' + JSON.stringify(b));
            return b
        }
    };
    Za.prototype.$d = function (a, b) {
        if (Array.isArray(b)) {
            if (0 == b.length)
                return;
            for (var c = 0; c < b.length; c++)
                this.required(a + "[" + String(c) + "]", b[c])
        } else
            throw new TypeError("expected repeated " + this.type + ' for property "' + a + '", found: ' + JSON.stringify(b));
        return b
    };
    var $a = new Za("string"),
        ab = new Za("boolean"),
        bb = new Za("number"),
        cb = new Za("object");

    function db(a, b) {
        return 0 !== b ? bb.required(a, b) : void 0
    }

    function eb(a, b) {
        return bb.optional(a, b)
    }

    function fb(a, b) {
        return !1 !== b ? ab.required(a, b) : void 0
    }

    function gb(a, b) {
        return ab.optional(a, b)
    }

    function hb(a, b) {
        return $a.required(a, b)
    }

    function ib(a, b) {
        return $a.optional(a, b)
    }

    function jb(a, b, c) {
        return cb.optional(b, c ? a(c) : null)
    }

    function kb(a, b, c) {
        return cb.$d(b, c.map(a))
    }

    function lb(a, b, c) {
        return $a.required(b, a(b, c))
    }

    function mb(a, b, c) {
        return $a.optional(b, c ? a(b, c) : null)
    }

    function nb(a, b, c) {
        return ob(pb, qb.bind(null, a), b, c)
    }

    function ob(a, b, c, d) {
        if (!(d instanceof Map))
            throw new TypeError('expected Map for property "' + c + '", found: ' + JSON.stringify(d));
        for (var e = {}, g = ka(d.keys()), h = g.next(); !h.done; h = g.next())
            h = h.value,
            e[a(c, h)] = b(c, d.get(h));
        return e
    }

    function pb(a, b) {
        if ("string" !== typeof b)
            throw new TypeError('expected string key in property "' + a + '", found: ' + JSON.stringify(b));
        return b
    }

    function rb(a, b) {
        if ("number" !== typeof b)
            throw new TypeError('expected number value in property "' + a + '", found: ' + JSON.stringify(b));
        return b
    }

    function qb(a, b, c) {
        if (null == c || "object" !== typeof c)
            throw new TypeError('expected object value in property "' + b + '", found: ' + JSON.stringify(c));
        return a(c)
    }

    function sb(a, b) {
        if ("string" !== typeof b)
            throw new TypeError('expected string value in property "' + a + '", found: ' + JSON.stringify(b));
        return b
    };
    var tb = tb || {},
        G, H, ub, vb, wb, yb, zb, Ab, Bb, Cb, Eb, Fb, Gb, Hb, Ib, Jb, Kb, Lb, I, Mb, Ob, Pb, Qb, Rb, Sb, Tb, Ub, Vb, Wb, Xb, Yb, Zb, $b, ac, bc, cc;
    var J = new function () {
            this.BY = {
                upload: "/static/r/phoenix/immovable/js/x9zITKdAvhuJA9i2mpYYlQ.js"
            };
            this.vY = !1;
            this.PH = .1;
            this.Na = {
                s_: 330,
                t_: 330,
                H8: 500,
                L8: 300,
                K8: 300,
                N8: 500,
                ZJ: 300,
                N_: 400,
                Dy: 300,
                N0: 300,
                gU: 1E3,
                hU: 1E3,
                tp: 200,
                ev: 20,
                j9: 600,
                Tz: 300,
                Pj: 500,
                X4: 2E3,
                s9: 500,
                R5: 300,
                Zp: 600,
                iV: 500,
                M8: 150
            };
            this.dt = 140;
            this.Xw = 1.2;
            this.JH = 150;
            this.FQ = .7;
            this.bC = 30;
            this.LH = "#ffffff";
            this.eC = "#222";
            this.fC = "#fff";
            this.cC = 24;
            this.qQ = 300;
            this.dC = 10;
            this.NH = this.wQ = 1.2;
            this.ZX = 42;
            this.WX = 24;
            this.Sd = 16;
            this.YX = "Abril Fatface";
            this.VX = "Trocchi";
            this.Rd = "Arimo";
            this.Qc = 20;
            this.Rc = 4;
            this.dY = 1024;
            this.OH = [6, 8, 10, 12, 14, 16, 18, 21, 24, 28, 32, 36, 42, 48, 56, 64, 72, 80, 88, 96, 104, 120, 144];
            this.uQ = "undefined" !== typeof window && 1 < window.devicePixelRatio;
            this.vQ = .33;
            this.gC = .5;
            this.jY = "undefined" !== typeof window && window.navigator.userAgent.match(/Macintosh/) ? !0 : !1;
            this.kY = 5E3;
            this.lY = 400;
            this.hC = 500;
            this.jo = 255;
            this.RH = 3;
            this.$w = 10 * this.RH;
            this.nY = 40 * this.RH;
            this.mY = 40;
            this.QH = 1;
            this.wh = 3;
            this.xh = .95;
            this.qY = 110;
            this.oY = 180;
            this.pY = 145;
            this.ax = 30;
            this.ft = 50;
            this.ko = "https://static.canva.com/static/images/placeholder.jpg";
            this.zQ = 1438;
            this.yQ = 560;
            this.oi = 230 / 24;
            this.CQ = 1E3;
            this.iC = 50;
            this.sY = {
                MAB5cDHmsFw: "0e94ff",
                MAB5cMCyv6w: "72c0ff",
                MAB5cAQJlaQ: "d0eaff",
                MAB5cEikLyU: "c0f2dc",
                MAB5cM_6xEM: "83f2d9",
                MAB5cJzamNA: "00d1c0",
                MAB5cMvV4WI: "b7ff82",
                MAB5cEhZV9o: "d3ffb3",
                MAB5cCZyCJQ: "feffcb",
                MAB5cHj48Zw: "ffef42",
                MAB5cK1JDsE: "ffa351",
                MAB5hidY3ns: "ffde7d",
                MAB5cFsTlDk: "fff6df",
                MAB5cKyqi1s: "ffd8cf",
                "MAB5hoaFM-I": "ffa3a1",
                MAB5cNEJxNs: "ff716e",
                MAB5cP9grzE: "ff6bcd",
                MAB5cMwWSfs: "ffc7ec",
                MAB5cGdDeZ4: "e4b9ff",
                MAB5cBzXdGA: "d38cff",
                MAB5cNvP7Pc: "c06af6",
                MAB5cKXAlps: "7f72ff",
                MAB5cCOTPdQ: "9c92ff",
                MAB5cDcYB4g: "c7c1ff",
                MAB5cFxeE3w: "e0daf3",
                MAB5cE5y_5k: "b9b5c7",
                MAB5cCYeclo: "9a97a5",
                MAB5cOfCuGs: "73726d",
                MAB5cPkevM0: "a3a198",
                MAB5cPNsPAA: "dddbcd",
                "MAB5cOxZt-I": "ff95db",
                MAAyKuwFB5o: "ffffff",
                MAAyKtahJms: "ffbd7e",
                MAAyKgcbIPk: "383838",
                MAAyKi3v9aM: "ababab",
                MAAyKiojphI: "3ea198",
                MAAyKgoNGiU: "f1eae2",
                MAAyKtzdfJo: "f2e6da",
                MAAyKjzFRMk: "b6b6b6",
                MAAyKl0hu7c: "3f0002",
                MAAyKrQbulQ: "aabee5",
                MAAyKjqXb3g: "1e404e",
                MAAyKpadICg: "383838",
                MAAyKriHEH4: "fce8d2",
                MAAyKvlJXOU: "86d694",
                MAAyKt_1BzE: "abddd8",
                MAAyKtiLYqQ: "ffcd54",
                MAAyKu2TdB8: "a12e38",
                MAAyKojhmk8: "9c77b8",
                MAAyKvdlAbg: "4473a7",
                MAAMxVrOHEU: "d3e460",
                MAAMxR635oY: "3589a1",
                MAAMJGCfFWw: "8bcfb1",
                MAAMxcxaYiU: "8bcfb1",
                MAAMxbOmmrM: "de5947",
                MAAMxVr6xaM: "ab7253",
                MAAMxbd7Q4o: "ee826d",
                MAAMJKph95Q: "9d427a",
                MAAMJAC_3oM: "969db1",
                MAAMJEZCTiQ: "54a4a5",
                MAAMJMQdk_o: "be842e",
                MAAMJKR_eNE: "318ba2",
                MAAMJNt_z0k: "f3bc33",
                MAAMJPRAWEw: "df5a46",
                MAAMJEguyXk: "54a4a5",
                MAAMJMMLN98: "9f437b",
                MAAMJPOvhoc: "df5a46",
                MAAMJPQVxis: "ee826c",
                MAAMJOSYm7w: "f3bc33",
                MAAMJM5OR40: "b7a77f",
                MAAMxUoD3Gw: "8cccaf",
                MAAMxdiUksM: "f3bc33",
                MAAMxRX8OJ4: "f3bc33",
                MAAMxbGelwc: "54a4a5",
                MAAMxSCeicM: "318ba2",
                MAAMxT7CVYA: "8cccaf"
            };
            this.bx = 3E4;
            this.XX = 1500;
            this.DQ = 5;
            this.zY = 190;
            this.AY = 300;
            this.eY = 88;
            this.hY = 0;
            this.jC = 88;
            this.GQ = 10;
            this.oQ = 7;
            this.cY = 0;
            this.$X = this.bY = 12;
            this.aY = 0;
            this.XH = .7;
            this.gx = 1.3;
            this.xQ = 2.5
        },
        dc = {
            TITLE: "title",
            j8: "subtitle",
            BODY: "body"
        },
        ec = {
            tY: "search",
            b8: "layout",
            TEXT: "text",
            Q7: "backgrounds",
            s8: "uploads"
        };

    function fc(a) {
        this.$el = a
    }
    fc.prototype.remove = function () {
        this.$el.remove()
    };

    function L(a) {
        this.$el = a;
        this.Wu = {}
    }
    L.prototype.remove = function () {
        this.$el.off();
        this.$el.remove()
    };
    L.prototype.on = function (a, b) {
        Ba(!this.Wu[a], "listener already registered for event {}", a);
        this.Wu[a] = b
    };
    L.prototype.off = function (a, b) {
        null == a ? this.Wu = {} : null != b && this.Wu[a] != b || delete this.Wu[a]
    };
    L.prototype.trigger = function (a, b) {
        for (var c = [], d = 1; d < arguments.length; ++d)
            c[d - 1] = arguments[d];
        (d = this.Wu[a]) && d.apply(null, [].concat(la(c)))
    };

    function O(a) {
        this.g0 = a.fallback;
        this.qU = a.localePrecedence;
        this.iM = {};
        this.u = a.messages;
        this.i5 = this.qU[0];
        this.T5 = !!a.returnKeys
    }
    O.prototype.format = function (a, b) {
        if (this.T5)
            return [].join.call(arguments, ":");
        var c = gc(this, a);
        return c.format.call(c, [].slice.call(arguments, 1))
    };
    O.prototype.Ua = function (a, b) {
        for (var c = [], d = 1; d < arguments.length; ++d)
            c[d - 1] = arguments[d];
        c = this.format.apply(this, [].concat([a], la(c.map(function (a) {
            return "number" === typeof a ? a : soydata.SanitizedHtml.from(a).getContent()
        }))));
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(c)
    };

    function gc(a, b) {
        if (a.iM.hasOwnProperty(b))
            return a.iM[b];
        var c = a.i5,
            d;
        a.qU.some(function (c) {
            d = a.u[c] && a.u[c][b];
            return void 0 !== d
        });
        d || (c = a.g0,
            d = a.u[c] && a.u[c][b]);
        if (!d)
            throw Error("Unknown message: " + b);
        c = new IntlMessageFormat(d, c, hc);
        return a.iM[b] = c
    }
    var hc = {
        number: {
            currency: {
                style: "currency",
                currency: "USD"
            },
            integer: {
                maximumFractionDigits: 0
            },
            fixed2: {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }
        }
    };

    function ic() {
        this.config = window.cmsg;
        this.MJ = this.FP = this.Dl = this.Ec = this.VM = this.Gf = this.$e = this.Oc = this.Th = this.Bi = this.Fe = this.nd = this.cs = this.Ea = this.AI = this.LP = this.Bp = this.Tx = this.bu = this.tM = this.UI = this.kf = this.cj = this.WP = this.OJ = this.ag = this.re = this.Yi = this.ek = this.fc = this.cQ = this.PN = this.Ya = this.Ja = this.Pa = this.la = this.Qd = this.ec = this.Mh = this.Cd = this.Sk = this.ih = this.Jk = this.Jf = this.Bx = this.XJ = this.WJ = this.VJ = this.lm = this.Jc = this.YJ = this.sf = this.Ug = this.JI = this.zi = this.GJ = this.da = null
    }

    function jc(a) {
        a.da || (a.da = new kc(a.config));
        return a.da
    }

    function lc(a) {
        a.GJ || (a.GJ = new mc(a.config));
        return a.GJ
    }

    function nc(a) {
        a.Sk || (a.Sk = new oc(a.config));
        return a.Sk
    }

    function pc(a) {
        a.zi || (a.zi = new sc(a.config));
        return a.zi
    }

    function tc(a) {
        a.JI || (a.JI = new uc(a.config));
        return a.JI
    }

    function vc(a) {
        a.lm || (a.lm = new wc(a.config));
        return a.lm
    }

    function xc(a) {
        a.sf || (a.sf = new yc(a.config));
        return a.sf
    }

    function zc(a) {
        a.YJ || (a.YJ = new Ac(a.config));
        return a.YJ
    }

    function Bc(a) {
        a.Jc || (a.Jc = new Cc(a.config));
        return a.Jc
    }

    function Dc(a) {
        a.VJ || (a.VJ = new Ec(a.config));
        return a.VJ
    }

    function Fc(a) {
        a.WJ || (a.WJ = new Gc(a.config));
        return a.WJ
    }

    function Hc(a) {
        a.Bx || (a.Bx = new Ic(a.config));
        return a.Bx
    }

    function Jc(a) {
        a.bu || (a.bu = new Kc(a.config));
        return a.bu
    }

    function Lc(a) {
        a.Tx || (a.Tx = new Mc(a.config));
        return a.Tx
    }

    function Nc(a) {
        a.la || (a.la = new Oc(a.config));
        return a.la
    }

    function Pc(a) {
        a.Pa || (a.Pa = new Qc(a.config));
        return a.Pa
    }

    function Rc(a) {
        a.Ja || (a.Ja = new Sc(a.config));
        return a.Ja
    }

    function Tc(a) {
        a.Ya || (a.Ya = new Uc(a.config));
        return a.Ya
    }

    function Vc(a) {
        a.PN || (a.PN = new Wc(a.config));
        return a.PN
    }

    function Xc(a) {
        a.Mh || (a.Mh = new Yc(a.config));
        return a.Mh
    }

    function Zc(a) {
        a.ec || (a.ec = new $c(a.config));
        return a.ec
    }

    function ad(a) {
        a.Yi || (a.Yi = new bd(a.config));
        return a.Yi
    }

    function cd(a) {
        a.re || (a.re = new dd(a.config));
        return a.re
    }

    function ed(a) {
        a.WP || (a.WP = new fd(a.config));
        return a.WP
    }

    function gd(a) {
        a.cj || (a.cj = new hd(a.config));
        return a.cj
    }

    function id(a) {
        a.kf || (a.kf = new jd(a.config));
        return a.kf
    }

    function kd(a) {
        a.UI || (a.UI = new ld(a.config));
        return a.UI
    }

    function md(a) {
        a.tM || (a.tM = new nd(a.config));
        return a.tM
    }

    function od(a) {
        a.Bp || (a.Bp = new pd(a.config));
        return a.Bp
    }

    function qd(a) {
        a.Fe || (a.Fe = new rd(a.config));
        return a.Fe
    }

    function sd(a) {
        a.Ea || (a.Ea = new td(a.config));
        return a.Ea
    }

    function ud(a) {
        a.$e || (a.$e = new vd(a.config));
        return a.$e
    }

    function wd(a) {
        a.Gf || (a.Gf = new xd(a.config));
        return a.Gf
    }

    function zd(a) {
        a.VM || (a.VM = new Ad(a.config));
        return a.VM
    }

    function Bd(a) {
        a.Ec || (a.Ec = new Cd(a.config));
        return a.Ec
    }

    function Dd(a) {
        a.Dl || (a.Dl = new Ed(a.config));
        return a.Dl
    }

    function Fd(a) {
        a.FP || (a.FP = new Gd(a.config));
        return a.FP
    }

    function kc(a) {
        O.apply(this, arguments)
    }
    t(kc, O);

    function Hd(a) {
        return a.format("objectPanelInfoClose")
    }

    function Id(a) {
        return a.format("objectPanelInfoCloseThisInfoPanel")
    }

    function Jd(a) {
        return a.format("objectPanelInfoUntitledImage")
    }
    kc.prototype.Pc = function () {
        return this.format("objectPanelInfoRoyaltyFree")
    };
    kc.prototype.Fd = function () {
        return this.format("objectPanelInfoExtended")
    };

    function Kd(a, b) {
        return a.format("objectPanelInfoLayouts", b)
    }

    function Ld(a) {
        return a.format("objectPanelUploadsPanelWriteOpsDisabledLabel")
    }

    function Md(a) {
        return a.format("objectPanelUploadsPanelDefaultFolderName")
    }

    function Nd(a, b) {
        return a.format("objectPanelUploadsPanelSharePopOverPrivateLabelOtherOwner", b)
    }

    function Od(a) {
        return a.format("objectPanelUploadsPanelUnlimitedUseFolder")
    }

    function Pd(a) {
        return a.format("objectPanelTextPanelAddHeading")
    }

    function Qd(a) {
        return a.format("objectPanelTextPanelAddSubHeading")
    }

    function Rd(a) {
        return a.format("objectPanelLayoutsPanelYourDesignsTabLabel")
    }

    function Sd(a) {
        return a.format("objectPanelLayoutsPanelLayoutsTabTitle")
    }

    function Td(a) {
        return a.format("objectPanelLayoutsPanelTeamTemplates")
    }

    function Ud(a) {
        return a.format("objectPanelMediaItemCostFree")
    }
    kc.prototype.vp = function (a) {
        return this.format("objectPanelLicense", a)
    };

    function Yc(a) {
        O.apply(this, arguments)
    }
    t(Yc, O);

    function $c(a) {
        O.apply(this, arguments)
    }
    t($c, O);
    f = $c.prototype;
    f.tk = function () {
        return this.format("creditCardCardNumberPlaceholder")
    };
    f.ol = function () {
        return this.format("creditCardMonthPlaceholder")
    };
    f.Pl = function () {
        return this.format("creditCardYearPlaceholder")
    };
    f.Ck = function () {
        return this.format("creditCardCvcPlaceholder")
    };
    f.save = function () {
        return this.format("creditCardSave")
    };
    f.oO = function () {
        return this.format("creditCardSavingTeamCard")
    };

    function mc(a) {
        O.apply(this, arguments)
    }
    t(mc, O);
    mc.prototype.nh = function () {
        return this.format("documentPlaceholderText")
    };

    function Cc(a) {
        O.apply(this, arguments)
    }
    t(Cc, O);
    Cc.prototype.oH = function () {
        return this.format("editorControlsUpgrade")
    };
    Cc.prototype.cw = function () {
        return this.format("editorControlsShare")
    };
    Cc.prototype.download = function () {
        return this.format("editorControlsDownload")
    };
    Cc.prototype.print = function () {
        return this.format("editorControlsPrint")
    };

    function Vd(a) {
        return a.format("editorControlsUnsavedChanges")
    }

    function oc(a) {
        O.apply(this, arguments)
    }
    t(oc, O);
    oc.prototype.error = function () {
        return this.format("findUserInputError")
    };

    function sc(a) {
        O.apply(this, arguments)
    }
    t(sc, O);
    sc.prototype.ro = function () {
        return this.format("colorPaletteApplyToAll")
    };

    function uc(a) {
        O.apply(this, arguments)
    }
    t(uc, O);
    uc.prototype.Yb = function (a) {
        return this.format("colorPickerBrandColor", a)
    };
    uc.prototype.ro = function () {
        return this.format("colorPickerApplyToAll")
    };

    function Wd(a) {
        O.apply(this, arguments)
    }
    t(Wd, O);
    Wd.prototype.save = function () {
        return this.format("editorFileMenuPaneSave")
    };
    Wd.prototype.N5 = function () {
        return this.format("editorFileMenuPaneResizeUpgradePrompt")
    };
    Wd.prototype.TL = function () {
        return this.format("editorFileMenuPaneLearnMoreButtonLabel")
    };
    Wd.prototype.Z0 = function (a) {
        return this.format("editorFileMenuPaneLastSavedLabel", a)
    };

    function wc(a) {
        O.apply(this, arguments)
    }
    t(wc, O);
    wc.prototype.GY = function () {
        return this.format("customDimensionsPaneActionResize")
    };
    wc.prototype.times = function () {
        return this.format("customDimensionsPaneTimes")
    };
    wc.prototype.a5 = function () {
        return this.format("customDimensionsPanePixelsUnit")
    };

    function Xd(a) {
        O.apply(this, arguments)
    }
    t(Xd, O);
    Xd.prototype.H7 = function () {
        return this.format("documentResizePaneUseCustomDimensions")
    };
    Xd.prototype.WI = function () {
        return this.format("documentResizePaneCouldNotBeLoaded")
    };
    Xd.prototype.BP = function () {
        return this.format("documentResizePaneTryLoadingAgain")
    };
    Xd.prototype.rK = function () {
        return this.format("documentResizePaneFetchingDesignTypes")
    };

    function Yd(a) {
        O.apply(this, arguments)
    }
    t(Yd, O);
    f = Yd.prototype;
    f.$Z = function () {
        return this.format("magicResizePaneCopyAndResize")
    };
    f.WI = function () {
        return this.format("magicResizePaneCouldNotBeLoaded")
    };
    f.BP = function () {
        return this.format("magicResizePaneTryLoadingAgain")
    };
    f.rK = function () {
        return this.format("magicResizePaneFetchingDesignTypes")
    };
    f.m_ = function () {
        return this.format("magicResizePaneCurrentDesignSize")
    };
    f.CY = function () {
        return this.format("magicResizePaneAbracadabraResize")
    };
    f.J1 = function () {
        return this.format("magicResizePaneOhSnap")
    };
    f.D1 = function () {
        return this.format("magicResizePaneMultipleTabs")
    };

    function Ec(a) {
        O.apply(this, arguments)
    }
    t(Ec, O);
    Ec.prototype.Tl = function () {
        return this.format("editorPageControlActionMoveUp")
    };
    Ec.prototype.Sl = function () {
        return this.format("editorPageControlActionMoveDown")
    };
    Ec.prototype.Ql = function () {
        return this.format("editorPageControlActionCopy")
    };
    Ec.prototype.Rl = function () {
        return this.format("editorPageControlActionDelete")
    };

    function Gc(a) {
        O.apply(this, arguments)
    }
    t(Gc, O);

    function Zd(a) {
        O.apply(this, arguments)
    }
    t(Zd, O);
    f = Zd.prototype;
    f.bQ = function () {
        return this.format("editorReplaceContentWarningTitle")
    };
    f.aQ = function () {
        return this.format("editorReplaceContentWarningText")
    };
    f.vk = function () {
        return this.format("editorReplaceContentConfirmButtonText")
    };
    f.Bh = function () {
        return this.format("editorReplaceContentCancelButtonText")
    };
    f.tF = function () {
        return this.format("editorReplaceContentNeverShowAgain")
    };

    function yc(a) {
        O.apply(this, arguments)
    }
    t(yc, O);

    function $d(a) {
        return a.format("editorToolbarFilterOptionAdvanced")
    }

    function ae(a, b) {
        return a.format("editorToolbarFilter" + b.replace(/\s*/g, ""))
    }

    function be(a, b) {
        b = b.replace(/(^[a-z])|(\-[a-z])/g, function (a) {
            return (a[1] || a[0]).toUpperCase()
        });
        return a.format("editorToolbarFilterRange" + b)
    }

    function ce(a) {
        return a.format("editorToolbarElementDelete")
    }
    f = yc.prototype;
    f.Gd = function () {
        return this.format("editorToolbarFontSizeAuto")
    };
    f.textAlign = function () {
        return this.format("editorToolbarTextAlign")
    };

    function de(a) {
        return a.format("editorToolbarElementTransparency")
    }

    function ee(a) {
        return a.format("editorToolbarElementHorizontalAlignLeft")
    }

    function fe(a) {
        return a.format("editorToolbarElementHorizontalAlignRight")
    }

    function ge(a) {
        return a.format("editorToolbarElementHorizontalAlignCenter")
    }

    function he(a) {
        return a.format("editorToolbarElementVerticalAlignTop")
    }

    function je(a) {
        return a.format("editorToolbarElementVerticalAlignBottom")
    }

    function ke(a) {
        return a.format("editorToolbarElementVerticalAlignCenter")
    }

    function le(a) {
        return a.format("editorToolbarElementHorizontalDistribute")
    }

    function me(a) {
        return a.format("editorToolbarElementVerticalDistribute")
    }

    function ne(a) {
        return a.format("editorToolbarElementPickAColor")
    }

    function oe(a) {
        return a.format("editorToolbarDeleteMenuDeleteElement")
    }

    function pe() {
        return xc(Kb).format("editorToolbarImagePickAColor")
    }
    f.TL = function () {
        return this.format("editorToolbarLearnMoreButtonLabel")
    };
    f.Ob = function () {
        return this.format("editorToolbarTransparency")
    };
    f.lineHeight = function () {
        return this.format("editorToolbarLineHeight")
    };
    f.letterSpacing = function () {
        return this.format("editorToolbarLetterSpacing")
    };

    function qe(a, b) {
        return a.format("editorToolbarTableItem", b)
    }

    function Ac(a) {
        O.apply(this, arguments)
    }
    t(Ac, O);
    Ac.prototype.resize = function () {
        return this.format("editorSelectionBoxResize")
    };
    Ac.prototype.stretch = function () {
        return this.format("editorSelectionBoxStretch")
    };
    Ac.prototype.rotate = function () {
        return this.format("editorSelectionBoxRotate")
    };
    Ac.prototype.D5 = function () {
        return this.format("editorSelectionBoxRemoveWatermark")
    };

    function Ic(a) {
        O.apply(this, arguments)
    }
    t(Ic, O);

    function re(a) {
        return a.format("canvaForWorkUpgradeTeamBrandKitsTitle")
    }

    function se(a) {
        return a.format("canvaForWorkUpgradeLayoutCreatorsTitle")
    }

    function te(a) {
        return a.format("canvaForWorkUpgradeMagicallyResizeTitle")
    }

    function ue(a) {
        return a.format("canvaForWorkUpgradePhotoFoldersTitle")
    }
    Ic.prototype.Zu = function () {
        return this.format("canvaForWorkUpgradeMemberLabel")
    };

    function ve(a) {
        return a.format("canvaForWorkFeatureUpgradePlusIncreaseProductivity")
    }

    function we(a) {
        return a.format("canvaForWorkFeatureUpgradeTemplatesBenefit")
    }

    function xe(a) {
        return a.format("canvaForWorkFeatureUpgradeResizeBenefit")
    }

    function ye(a) {
        return a.format("canvaForWorkFeatureUpgradeBrandKitBenefit")
    }

    function ze(a) {
        return a.format("canvaForWorkFeatureUpgradeFoldersBenefit")
    }

    function Ae(a) {
        return a.format("canvaForWorkFeatureUpgradeFreeContentBenefit", 3E5)
    }

    function Be(a) {
        O.apply(this, arguments)
    }
    t(Be, O);
    Be.prototype.post = function () {
        return this.format("shareViewPost")
    };
    Be.prototype.email = function () {
        return this.format("shareViewEmail")
    };
    Be.prototype.send = function () {
        return this.format("shareViewSend")
    };
    Be.prototype.Vg = function () {
        return this.format("shareViewEmailInputPlaceholder")
    };

    function Ce(a) {
        O.apply(this, arguments)
    }
    t(Ce, O);
    f = Ce.prototype;
    f.Se = function () {
        return this.format("exportPopOverFileType")
    };
    f.Kt = function () {
        return this.format("exportPopOverCropMarksAndBleed")
    };
    f.Hw = function () {
        return this.format("exportPopOverTransparentBackground")
    };
    f.ot = function () {
        return this.format("exportPopOverAllPagesLabel")
    };
    f.download = function () {
        return this.format("exportPopOverDownload")
    };
    f.title = function () {
        return this.format("exportPopOverTitle")
    };
    f.uA = function () {
        return this.format("exportPopOverPng")
    };
    f.Bz = function () {
        return this.format("exportPopOverJpg")
    };
    f.au = function () {
        return this.format("exportPopOverFileTypeInfoLinkTitle")
    };
    f.Jt = function () {
        return this.format("exportPopOverCropAndBleedInfoLinkTitle")
    };

    function De(a, b) {
        return a.format("exportPopOverMultiPageZipWarning", b)
    }

    function Kc(a) {
        O.apply(this, arguments)
    }
    t(Kc, O);
    f = Kc.prototype;
    f.title = function () {
        return this.format("fileTypesDialogTitle")
    };
    f.uA = function () {
        return this.format("fileTypesDialogPng")
    };
    f.c5 = function () {
        return this.format("fileTypesDialogPngDescription")
    };
    f.Bz = function () {
        return this.format("fileTypesDialogJpg")
    };
    f.X0 = function () {
        return this.format("fileTypesDialogJpgDescription")
    };
    f.U4 = function () {
        return this.format("fileTypesDialogPdfStandard")
    };
    f.V4 = function () {
        return this.format("fileTypesDialogPdfStandardDescription")
    };
    f.S4 = function () {
        return this.format("fileTypesDialogPdfPrint")
    };
    f.T4 = function () {
        return this.format("fileTypesDialogPdfPrintDescription")
    };
    f.ZK = function () {
        return this.format("fileTypesDialogGotIt")
    };

    function Mc(a) {
        O.apply(this, arguments)
    }
    t(Mc, O);
    f = Mc.prototype;
    f.title = function () {
        return this.format("cropAndBleedDialogTitle")
    };
    f.Xn = function () {
        return this.format("cropAndBleedDialogSubtitle")
    };
    f.l_ = function () {
        return this.format("cropAndBleedDialogCropMarksDescription")
    };
    f.ZY = function () {
        return this.format("cropAndBleedDialogBleedAreaDescription")
    };
    f.ZK = function () {
        return this.format("cropAndBleedDialogGotIt")
    };

    function Oc(a) {
        O.apply(this, arguments)
    }
    t(Oc, O);
    f = Oc.prototype;
    f.title = function () {
        return this.format("shareDesignDialogTitle")
    };
    f.I6 = function () {
        return this.format("shareDesignDialogSocial")
    };
    f.link = function () {
        return this.format("shareDesignDialogLink")
    };
    f.Rm = function () {
        return this.format("shareDesignDialogInviteLabel")
    };
    f.Qm = function () {
        return this.format("shareDesignDialogInviteButton")
    };
    f.On = function () {
        return this.format("shareDesignDialogShareLabel")
    };
    f.cn = function () {
        return this.format("shareDesignDialogMessagePlaceholder")
    };
    f.Mn = function () {
        return this.format("shareDesignDialogShareButton")
    };
    f.If = function () {
        return this.format("shareDesignDialogPurchaseButton")
    };
    f.Bg = function () {
        return this.format("shareDesignDialogRestrictedOverlayMessage")
    };

    function Ee(a) {
        return a.format("shareDesignDialogViewOnFacebook")
    }

    function Fe(a) {
        return a.format("shareDesignDialogViewOnTwitter")
    }
    f.Gp = function () {
        return this.format("shareDesignDialogOkButton")
    };

    function Ge(a) {
        return a.format("shareDesignDialogSharingErrorTitle")
    }

    function He(a, b) {
        return a.format("shareDesignDialogSharingError", b)
    }

    function Ie(a) {
        return a.format("shareDesignDialogBackToSharingButton")
    }

    function Je(a) {
        return a.format("shareDesignDialogEditRole")
    }

    function Ke(a) {
        return a.format("shareDesignDialogEditRoleShort")
    }

    function Le(a) {
        return a.format("shareDesignDialogViewRole")
    }

    function Me(a) {
        return a.format("shareDesignDialogViewRoleShort")
    }
    f.ld = function (a) {
        return this.format("shareDesignDialogFolders", a)
    };
    f.Ym = function () {
        return this.format("shareDesignDialogLinkLabel")
    };
    f.Og = function () {
        return this.format("shareDesignDialogCopyButton")
    };
    f.um = function () {
        return this.format("shareDesignDialogEmbedPublic")
    };
    f.tm = function () {
        return this.format("shareDesignDialogEmbedMakePublic")
    };
    f.rm = function () {
        return this.format("shareDesignDialogEmbedLabelHTML")
    };
    f.sm = function () {
        return this.format("shareDesignDialogEmbedLabeloEmbed")
    };
    f.nj = function () {
        return this.Ua("shareDesignDialogEmbedDescriptionHtml")
    };
    f.Br = function (a, b) {
        return this.format("shareDesignDialogInviteMembersHtml", a, b)
    };
    f.Eu = function () {
        return this.format("shareDesignDialogInviteMemberButton")
    };
    f.Fu = function () {
        return this.format("shareDesignDialogInviteMemberError")
    };
    f.bX = function () {
        return this.format("shareDesignDialogTeamInvitesTitle")
    };
    f.dH = function () {
        return this.format("shareDesignDialogTeamInvitesEmailPlaceholder")
    };
    f.sP = function () {
        return this.format("shareDesignDialogTeamInvitesSubmitButtonLabel")
    };
    f.tP = function () {
        return this.format("shareDesignDialogTeamInvitesUpgradeMessage")
    };

    function Qc(a) {
        O.apply(this, arguments)
    }
    t(Qc, O);
    f = Qc.prototype;
    f.Jg = function () {
        return this.format("publishViewActionClose")
    };
    f.lo = function () {
        return this.format("publishViewActionCloseHint")
    };
    f.ht = function () {
        return this.format("publishViewActionOK")
    };
    f.it = function () {
        return this.format("publishViewActionRetry")
    };

    function Ne(a, b) {
        return a.format("publishViewUnlimitedUseHint", b)
    }
    f.Au = function () {
        return this.format("publishViewHintSeeAllDesigns")
    };

    function Sc(a) {
        O.apply(this, arguments)
    }
    t(Sc, O);

    function Oe(a) {
        return a.Ua("paymentPageErrorGenericHtml", "https://support.canva.com/troubleshooting")
    }
    f = Sc.prototype;
    f.rt = function () {
        return this.format("paymentPageApplyCouponButtonText")
    };
    f.Ft = function () {
        return this.format("paymentPageCouponCodeInputPlaceholder")
    };

    function Pe(a) {
        return a.Ua("paymentPageLicensingIntroMore")
    }
    f.il = function (a) {
        return this.format("paymentPageLicensePrice", a)
    };

    function Qe(a, b) {
        return a.format("paymentPageLicenseRemainingMinutes", b)
    }
    f.fm = function (a) {
        return this.format("paymentPageCreditAvailable", a)
    };
    f.total = function (a) {
        return this.format("paymentPageTotal", a)
    };
    f.Pp = function (a) {
        return this.format("paymentPagePayOption", a)
    };
    f.Pq = function (a) {
        return this.format("paymentPageContributedBy", a)
    };
    f.hs = function () {
        return this.format("paymentPagePurchased")
    };
    f.Hd = function () {
        return this.format("paymentPageFree")
    };
    f.Pu = function () {
        return this.format("paymentPageLayoutTitle")
    };
    f.If = function () {
        return this.format("paymentPagePurchaseButton")
    };
    f.oO = function () {
        return this.format("paymentPageSavingTeamCard")
    };

    function Re(a) {
        return a.format("paymentPageLicensesDetailsConfirm")
    }
    f.En = function () {
        return this.format("paymentPageRestrictedOverlayHeading")
    };
    f.Bg = function () {
        return this.format("paymentPageRestrictedOverlayMessage")
    };
    f.Dn = function () {
        return this.format("paymentPageRestrictedOverlayDraftButton")
    };
    f.Cn = function () {
        return this.format("paymentPageRestrictedOverlayCancelButton")
    };

    function Uc(a) {
        O.apply(this, arguments)
    }
    t(Uc, O);
    f = Uc.prototype;
    f.wd = function () {
        return this.format("licenseOneTimeUse")
    };
    f.Vc = function () {
        return this.format("licenseOneTimeUseDescription")
    };
    f.Pc = function () {
        return this.format("licenseRoyaltyFree")
    };
    f.Xc = function () {
        return this.format("licenseRoyaltyFreeDescription")
    };
    f.Fd = function () {
        return this.format("licenseExtended")
    };
    f.Ud = function () {
        return this.format("licenseExtendedDescription")
    };
    f.Xd = function () {
        return this.format("licenseNoLicenseOptionDescription")
    };

    function Se(a, b) {
        return a.Ua("licenseLicensesDetailsFullInformation", b)
    }

    function Wc(a) {
        O.apply(this, arguments)
    }
    t(Wc, O);

    function Te(a) {
        O.apply(this, arguments)
    }
    t(Te, O);
    Te.prototype.If = function () {
        return this.format("watermarkRemovalDialogPurchaseButton")
    };
    Te.prototype.title = function () {
        return this.format("watermarkRemovalDialogTitle")
    };

    function Ue(a) {
        O.apply(this, arguments)
    }
    t(Ue, O);

    function Ve(a) {
        return a.format("twentyThreeSecondOnboardingSearchText")
    }

    function We(a) {
        return a.format("twentyThreeSecondOnboardingDragText")
    }

    function Xe(a) {
        return a.format("twentyThreeSecondOnboardingPublishText")
    }

    function Ye(a) {
        return a.format("twentyThreeSecondOnboardingYumText")
    }

    function Ze(a) {
        O.apply(this, arguments)
    }
    t(Ze, O);
    Ze.prototype.i_ = function (a) {
        return this.format("teamUpgradeCreateTeamWelcomeTitleHtml", a)
    };
    Ze.prototype.j_ = function () {
        return this.format("teamUpgradeCreateYourTeam")
    };
    Ze.prototype.h_ = function (a) {
        return this.format("teamUpgradeCreateTeamWelcomeDescription", a)
    };

    function $e(a) {
        return a.format("teamUpgradeCreateTrialPeriodPoint1V")
    }

    function af(a, b) {
        return a.format("teamUpgradeCreateTrialPeriodPoint2V", b)
    }

    function bf(a) {
        return a.format("teamUpgradeCreateTrialPeriodPoint3V")
    }

    function bd(a) {
        O.apply(this, arguments)
    }
    t(bd, O);
    f = bd.prototype;
    f.oH = function (a) {
        return this.format("teamBillingSignupUpgrade", a)
    };
    f.Q6 = function () {
        return this.format("teamBillingSignupStartTrial")
    };
    f.U5 = function () {
        return this.format("teamBillingSignupRevertCard")
    };
    f.W0 = function () {
        return this.format("teamBillingSignupItemsTitle")
    };
    f.YY = function () {
        return this.format("teamBillingSignupBillingError")
    };
    f.r7 = function () {
        return this.format("teamBillingSignupTryAgain")
    };
    f.U_ = function () {
        return this.format("teamBillingSignupEncryption")
    };
    f.Ml = function (a, b) {
        return this.format("teamBillingSignupTotalPrice", a, b)
    };

    function dd(a) {
        O.apply(this, arguments)
    }
    t(dd, O);

    function cf(a) {
        return a.format("starOnboardingActionStayAndPlay")
    }

    function df(a) {
        return a.format("starOnboardingActionKeepExploring")
    }
    dd.prototype.q5 = function () {
        return this.format("starOnboardingProgressTitle")
    };
    dd.prototype.L6 = function () {
        return this.format("starOnboardingSpecialInstructionsTitle")
    };
    dd.prototype.J6 = function () {
        return this.format("starOnboardingSpecialInstructionsHtml")
    };
    dd.prototype.K6 = function () {
        return this.format("starOnboardingSpecialInstructionsQuestionText")
    };

    function ff(a) {
        O.apply(this, arguments)
    }
    t(ff, O);

    function fd(a) {
        O.apply(this, arguments)
    }
    t(fd, O);
    fd.prototype.pN = function () {
        return this.format("viewDesignsPopOverTitle")
    };
    fd.prototype.nN = function () {
        return this.format("viewDesignsPopOverMessage")
    };
    fd.prototype.mN = function () {
        return this.format("viewDesignsPopOverDone")
    };

    function gf(a) {
        O.apply(this, arguments)
    }
    t(gf, O);
    gf.prototype.pN = function () {
        return this.format("downloadPopOverTitle")
    };
    gf.prototype.nN = function () {
        return this.format("downloadPopOverMessage")
    };
    gf.prototype.mN = function () {
        return this.format("downloadPopOverDone")
    };

    function hd(a) {
        O.apply(this, arguments)
    }
    t(hd, O);
    hd.prototype.Ww = function (a) {
        return this.format("zoomToolbarZoomPercentage", a)
    };
    hd.prototype.Vf = function () {
        return this.format("zoomToolbarFullscreenMode")
    };
    hd.prototype.fill = function () {
        return this.format("zoomToolbarFill")
    };

    function jd(a) {
        O.apply(this, arguments)
    }
    t(jd, O);

    function ld(a) {
        O.apply(this, arguments)
    }
    t(ld, O);

    function nd(a) {
        O.apply(this, arguments)
    }
    t(nd, O);
    nd.prototype.hB = function () {
        return this.format("newLightboxShareLink")
    };

    function hf(a, b, c, d, e) {
        return a.format("newLightboxEmbedCodeBy", c, b, d, e)
    }

    function pd(a) {
        O.apply(this, arguments)
    }
    t(pd, O);
    pd.prototype.dn = function () {
        return this.format("newFeatureNewLabel")
    };

    function jf(a) {
        O.apply(this, arguments)
    }
    t(jf, O);

    function kf(a) {
        O.apply(this, arguments)
    }
    t(kf, O);
    kf.prototype.dZ = function (a) {
        return this.format("chartElementCardinalNumber", a)
    };

    function td(a) {
        O.apply(this, arguments)
    }
    t(td, O);
    f = td.prototype;
    f.heading = function () {
        return this.format("printOrderSummaryHeading")
    };
    f.uv = function () {
        return this.format("printOrderSummaryPremiumImagesPriceLabel")
    };
    f.Us = function () {
        return this.Ua("printOrderSummaryTotalLabelHtml")
    };
    f.Za = function (a) {
        return this.format("printOrderSummaryPrice", a)
    };
    f.fv = function (a) {
        return this.format("printOrderSummaryNumberOfCopies", a)
    };
    f.hw = function () {
        return this.format("printOrderSummaryShippingPriceLabel")
    };
    f.ab = function (a) {
        return this.format("printOrderSummaryDiscount", a)
    };
    f.Wj = function () {
        return this.format("printOrderSummarySelectYourPrintOptions")
    };
    f.Kw = function (a) {
        return this.format("printOrderSummaryTypeOfPaper", a)
    };
    f.Jw = function (a) {
        return this.format("printOrderSummaryTypeOfFinish", a)
    };
    f.lj = function (a) {
        return this.format("printOrderSummaryCreditUsed", a)
    };

    function lf(a, b) {
        return a.format("printOrderSummaryCreditUsedAndAvailableLabel", b)
    }
    f.Gv = function () {
        return this.format("printOrderSummaryRemoveCouponText")
    };

    function mf(a) {
        O.apply(this, arguments)
    }
    t(mf, O);
    f = mf.prototype;
    f.heading = function () {
        return this.format("printOrderReceivedHeading")
    };
    f.YP = function () {
        return this.format("printOrderReceivedViewPrintOrdersButtonText")
    };
    f.XP = function () {
        return this.format("printOrderReceivedViewHomepageButtonText")
    };
    f.WZ = function (a) {
        return this.Ua("printOrderReceivedConfirmationEmailMessageHtml", a)
    };
    f.x4 = function (a) {
        return this.Ua("printOrderReceivedMessageHtml", a, "printOrderReceived__orderNumber")
    };

    function rd(a) {
        O.apply(this, arguments)
    }
    t(rd, O);
    rd.prototype.Wb = function (a, b) {
        return this.format("printFlowPageNumberOfTotal", a, b)
    };

    function nf(a) {
        O.apply(this, arguments)
    }
    t(nf, O);
    f = nf.prototype;
    f.Ax = function () {
        return this.format("addressDetailsCannotShipToPostOfficeBoxMessage")
    };
    f.aI = function () {
        return this.format("addressDetailsAddAdditionalAddressFieldButtonText")
    };
    f.FI = function () {
        return this.format("addressDetailsCityLabel")
    };
    f.SI = function () {
        return this.format("addressDetailsContactNumberLabel")
    };
    f.XI = function () {
        return this.format("addressDetailsCountryLabel")
    };
    f.DK = function () {
        return this.format("addressDetailsFullNameLabel")
    };
    f.iP = function () {
        return this.format("addressDetailsStateLabel")
    };
    f.kP = function () {
        return this.format("addressDetailsStreetAddressLabel")
    };
    f.lQ = function () {
        return this.format("addressDetailsZipcodeLabel")
    };
    f.heading = function () {
        return this.format("addressDetailsHeading")
    };
    f.nO = function () {
        return this.format("addressDetailsSaveAddressLabel")
    };
    f.Qv = function () {
        return this.format("addressDetailsSelectSubdivisionText")
    };

    function pf(a) {
        O.apply(this, arguments)
    }
    t(pf, O);
    f = pf.prototype;
    f.heading = function () {
        return this.format("designProofReviewHeading")
    };
    f.description = function () {
        return this.format("designProofReviewDescription")
    };
    f.zt = function () {
        return this.format("designProofReviewCheckImagesAndText")
    };
    f.Iq = function (a) {
        return this.Ua("designProofReviewCheckTermsOfUseHtml", a)
    };
    f.iu = function () {
        return this.format("designProofReviewGeneratingPdfText")
    };
    f.Pv = function () {
        return this.format("designProofReviewSeeUnfixableProblemButtonText")
    };
    f.Et = function () {
        return this.format("designProofReviewContinueToCheckoutButtonText")
    };

    function qf(a) {
        O.apply(this, arguments)
    }
    t(qf, O);
    qf.prototype.Gt = function () {
        return this.format("printPaymentAndConfirmationCouponCodeLabel")
    };
    qf.prototype.heading = function () {
        return this.format("printPaymentAndConfirmationHeading")
    };
    qf.prototype.fN = function () {
        return this.format("printPaymentAndConfirmationPaymentDetailsHeading")
    };

    function rf(a) {
        O.apply(this, arguments)
    }
    t(rf, O);
    f = rf.prototype;
    f.gw = function () {
        return this.format("printOrderFormShippingAddressHeading")
    };
    f.od = function () {
        return this.format("printOrderFormBackButtonText")
    };
    f.Ai = function () {
        return this.format("printOrderFormContinueButtonText")
    };
    f.P4 = function () {
        return this.format("printOrderFormPayNowButtonText")
    };
    f.YM = function () {
        return this.format("printOrderFormOrderErrorHeading")
    };

    function vd(a) {
        O.apply(this, arguments)
    }
    t(vd, O);
    f = vd.prototype;
    f.BC = function () {
        return this.format("printEditorFormBeginOrderButtonText")
    };
    f.MC = function () {
        return this.format("printEditorFormCancelOrderButtonText")
    };
    f.Ai = function () {
        return this.format("printEditorFormContinueButtonText")
    };
    f.od = function () {
        return this.format("printEditorFormBackButtonText")
    };
    f.Pi = function () {
        return this.format("printEditorFormNextButtonText")
    };

    function xd(a) {
        O.apply(this, arguments)
    }
    t(xd, O);
    xd.prototype.th = function () {
        return this.format("printProofingWhyIsThisImportant")
    };

    function Ad(a) {
        O.apply(this, arguments)
    }
    t(Ad, O);
    Ad.prototype.bX = function () {
        return this.format("onboardingWizardTeamInvitesTitle")
    };
    Ad.prototype.dH = function () {
        return this.format("onboardingWizardTeamInvitesEmailPlaceholder")
    };
    Ad.prototype.sP = function () {
        return this.format("onboardingWizardTeamInvitesSubmitButtonLabel")
    };
    Ad.prototype.tP = function () {
        return this.format("onboardingWizardTeamInvitesUpgradeMessage")
    };

    function Cd(a) {
        O.apply(this, arguments)
    }
    t(Cd, O);

    function Ed(a) {
        O.apply(this, arguments)
    }
    t(Ed, O);
    Ed.prototype.$g = function () {
        return this.format("searchMenuFreeOnly")
    };

    function Gd(a) {
        O.apply(this, arguments)
    }
    t(Gd, O);
    Gd.prototype.Bh = function () {
        return this.format("updateDoctypeCancelButtonText")
    };
    Gd.prototype.title = function () {
        return this.format("updateDoctypeTitle")
    };

    function sf(a) {
        return a.Ua("updateDoctypeSaveACopyMessageHtml")
    }
    Gd.prototype.Lj = function () {
        return this.format("updateDoctypeMoreInfoLinkText")
    };

    function tf(a) {
        O.apply(this, arguments)
    }
    t(tf, O);
    f = tf.prototype;
    f.Db = function () {
        return this.format("downloadIphoneDialogHeadingHtml")
    };
    f.Oj = function () {
        return this.format("downloadIphoneDialogOverviewSubheading")
    };
    f.Bj = function () {
        return this.format("downloadIphoneDialogIphoneLabel")
    };
    f.ej = function () {
        return this.format("downloadIphoneDialogAndroidLabel")
    };
    f.Gu = function () {
        return this.format("downloadIphoneDialogIphoneSubheading")
    };
    f.Tv = function () {
        return this.format("downloadIphoneDialogSendButtonLabel")
    };
    f.Ti = function () {
        return this.format("downloadIphoneDialogPhoneInputPlaceholder")
    };
    f.qt = function () {
        return this.format("downloadIphoneDialogAndroidSubheading")
    };
    f.Ev = function () {
        return this.format("downloadIphoneDialogRegisterButtonLabel")
    };

    function uf(a) {
        return a.format("downloadIphoneDialogInvalidNumber")
    };

    function vf(a) {
        0 < a.length && (a = window.getComputedStyle(a.get(0))) && a.getPropertyValue("left")
    };

    function wf(a) {
        return new P(function (b) {
            function c(e) {
                e.target === a && (d.off("transitionend", c),
                    b())
            }
            var d = $(a);
            d.on("transitionend", c)
        })
    };

    function R(a, b) {
        if (!a)
            throw new TypeError("Cannot adopt constructor " + a);
        if ("object" !== typeof b)
            throw new TypeError("Cannot adopt non-object value " + b);
        if (null === b)
            throw new TypeError("Cannot adopt null value");
        return Object.create(a.prototype, xf(b))
    }

    function xf(a) {
        var b = Object.create(null);
        Object.keys(a).forEach(function (c) {
            b[c] = {
                value: a[c],
                writable: !0,
                enumerable: !0,
                configurable: !0
            }
        });
        return b
    };

    function yf(a, b) {
        this.name = a;
        this.defaultValue = b
    };

    function zf(a) {
        this.values = a || {}
    }
    zf.prototype.get = function (a) {
        var b;
        if ({}.hasOwnProperty.call(this.values, a.name)) {
            b = this.values[a.name];
            var c = typeof b;
            a = typeof a.defaultValue;
            Ba(c === a, "Type mismatch: Configured value ({}) deviates from default value type ({})", c, a)
        } else
            b = a.defaultValue;
        return b
    };

    function Af(a) {
        this.ba = a
    }
    var Bf = new yf("ad", !1),
        Cf = new yf("ag", !0),
        Df = new yf("aj", !1),
        Ef = new yf("au", !1),
        Ff = new yf("ay", !1),
        Gf = new yf("av", !1),
        Hf = new yf("aw", !1),
        If = new yf("az", !1),
        Jf = new yf("bf", !1),
        Kf = new yf("bg", !1),
        Lf = new yf("bk", !1),
        Mf = new yf("bw", !1),
        Nf = new yf("by", !1),
        Of = new yf("cf", 10),
        Pf = new yf("cn", !1),
        Qf = new yf("cv", !1),
        Rf = new yf("de", !1),
        Sf = new yf("dg", 1),
        Tf = new yf("dh", 3),
        Uf = new yf("dn", !1),
        Vf = new yf("dr", !1),
        Wf = new yf("ex", !1),
        Xf = new yf("ee", !1),
        Yf = new yf("ek", !1),
        Zf = new yf("em", "NONE"),
        $f = new yf("en", !1),
        ag = new yf("ep", !0),
        bg = new yf("ey", !0),
        cg = new yf("ez", !1),
        dg = new yf("fd", !1),
        eg = new yf("ff", !1),
        fg = new yf("fl", !1),
        gg = new yf("fo", !1),
        hg = new yf("fq", !1),
        ig = new yf("fx", !1),
        jg = new yf("fz", !0),
        kg = new yf("gn", !1),
        lg = new yf("go", !1),
        mg = new yf("hn", !1),
        ng = new yf("hz", !1),
        og = new yf("ib", !1),
        pg = new yf("id", !1);
    f = Af.prototype;
    f.Zx = function () {
        return this.ba.get(Ef)
    };
    f.bM = function () {
        return this.ba.get(Lf)
    };
    f.He = function () {
        return this.ba.get(Xf)
    };
    f.EJ = function () {
        return this.ba.get(Zf)
    };
    f.kr = function () {
        return this.ba.get(og)
    };
    var S = "undefined" !== typeof _ && "undefined" !== typeof Backbone && _.extend({}, Backbone.Events),
        T = null,
        qg = null;

    function rg(a) {
        this.Nb = a.Nb;
        this.Ed = a.Ed;
        this.uc = a.uc;
        this.Ze = a.Ze;
        this.pc = a.pc;
        this.eH = a.eH;
        this.Qx = a.Qx
    }

    function sg(a, b, c, d) {
        b = tg(b);
        if (!b)
            return null;
        var e = a.Nb.Oa();
        a = ug(a, b.Ba());
        isNaN(parseFloat(c * d)) ? (b.yd(a),
            b.Lk(e)) : (a.wb(c || 0),
            a.rb(d || 0),
            b.yd(a),
            b.appendTo(e));
        vg(b);
        wg(b);
        return b
    }
    rg.prototype.RQ = function (a, b, c) {
        var d;
        d = {
            height: a.sj().F(),
            isCutout: !1,
            mediaId: a.G(),
            mediaVersion: 0,
            type: "image",
            width: a.sj().D()
        };
        b = sg(this, d, b, c);
        xg(this.eH, yg(a), b)
    };
    rg.prototype.SQ = function (a, b, c, d) {
        switch (a.Ab()) {
            case zg:
                a = Ag(a, "image", d);
                sg(this, a, b, c);
                break;
            case Bg:
                a = a.Va().Ty() ? Ag(a, "graphic") : Ag(a, "svg");
                sg(this, a, b, c);
                break;
            default:
                throw Error("Bad media. Composer unable to add media of type: " + a.Ab());
        }
    };
    rg.prototype.TQ = function (a, b, c, d) {
        (a = a.Y6 ? Cg(a, "svg") : Cg(a, "image", d)) && sg(this, a, b, c)
    };

    function yg(a) {
        var b = a.sj(),
            c = a.Vd();
        return Dg({
            files_: [{
                page: 0,
                quality: "THUMBNAIL",
                height: c.F(),
                url: c.Aa(),
                width: c.D()
            }, {
                page: 0,
                quality: "SCREEN",
                height: b.F(),
                url: b.Aa(),
                width: b.D()
            }],
            id: a.G(),
            origin: Eg,
            title: a.getName()
        })
    }

    function Ag(a, b, c) {
        var d = a.Va().Dc()[Fg];
        b = {
            height: d.F(),
            isCutout: !!c,
            mediaId: a.G(),
            mediaVersion: a.Va().getVersion(),
            type: b,
            width: d.D()
        };
        a = a.Va().Ty();
        null != a && (b.spritesheetMetadata = Gg(a));
        return b
    }

    function Cg(a, b, c) {
        if (a.ac())
            return {
                height: a.tb.height,
                isCutout: !!c,
                mediaId: a.ac().G(),
                mediaVersion: 1,
                type: b,
                width: a.tb.width
            }
    }

    function Hg(a, b) {
        b.forEach(function (a) {
            a = yg(a);
            Ig(this.eH, a)
        }, a)
    }

    function Jg(a, b) {
        b.forEach(function (a) {
            Kg(this.Ze, a.G(), a.Va().getVersion(), a.Va().Dc())
        }, a)
    }

    function ug(a, b) {
        var c = b.clone(),
            d = Lg(a.Nb.pb().tb);
        (function () {
            var a = c.D() / c.F();
            c.oa(Math.min(c.F(), d.F() * J.xh));
            c.za(a * c.F())
        })();
        (function () {
            var a = c.F() / c.D();
            c.za(Math.min(c.D(), d.D() * J.xh));
            c.oa(a * c.D())
        })();
        return c
    }
    rg.prototype.pH = function (a, b, c) {
        0 < b.length && this.Qx(a, c).upload(b, Mg(a))
    };

    function Ng(a, b) {
        a.cS = b
    }

    function Og(a, b, c, d, e, g) {
        function h() {
            var a = b.getFile(Fg);
            return new U(0, 0, a.D() * Q, a.F() * Q)
        }

        function k(a) {
            var b, d, g;
            b = a.clientX - e.Y() + c.Y();
            d = a.clientY - e.N() + c.N();
            g = Math.max(Math.min((a.clientX - C) / N, 1), 0);
            g = 1 > q ? Math.min(Math.max(q, 1 + g * (q - 1)), 1) : Math.min(Math.max(1, 1 + g * (q - 1)), q);
            a.clientX > K ? (u = !0,
                g = q) : u = !1;
            m(b, d, g)
        }

        function l(a) {
            var b, c = !1,
                e, h;
            b = d.get(0).getBoundingClientRect();
            b = Pg(x.Ed, Qg(b));
            c = $(a.target).is(".hotspot");
            a = Rg(V);
            e = (b.Y() - a.Y()) / Q;
            h = (b.N() - a.N()) / Q;
            $(document).off("mouseup", l);
            $(document).off("mousemove", k);
            !y && c ? p() : u && Sg(b, a) ? (g(e, h, y),
                p()) : setTimeout(r, 50);
            $("#hotspots").remove();
            Tg().write(function () {
                $("#overlays .align").removeClass("on")
            })
        }

        function m(a, b, c) {
            Ug(d[0], {
                Gn: c,
                Yp: c,
                hi: a,
                ii: b
            });
            a = Rg(V);
            b = Pg(x.Ed, Qg(d.get(0).getBoundingClientRect()));
            u && Vg(a, b) && (null === ca && (ca = new Wg(d, ra, {
                    left: E,
                    top: B
                })),
                a = Xg(),
                Yg(ca, M, a))
        }

        function n() {
            window.setTimeout(function () {
                d.remove()
            }, 650)
        }

        function p() {
            m(c.Y(), c.N(), 1);
            d.css("left", c.Y()).css("top", c.N()).css("opacity", 0).addClass("draggedMediaPlacing");
            n()
        }

        function r() {
            var a = "",
                b = "",
                e = d.get(0).getBoundingClientRect(),
                g = x.cS || c,
                h = e.left - g.Y(),
                e = e.top - g.N();
            100 < h ? a = "draggedMediaReturningLeft" : -100 > h && (a = "draggedMediaReturningRight");
            100 < e ? b = "draggedMediaReturningUp" : -100 > e && (b = "draggedMediaReturningDown");
            d.addClass(a).addClass(b).addClass("draggedMediaReturning");
            0 > g.N() && d.addClass("draggedMediaReturningFading").css("opacity", 0);
            m(g.Y(), g.N(), 1);
            x.cS = void 0;
            n()
        }
        var u = !1,
            v, y = !1,
            q, x = a,
            E, B, K, C, N, Q = W,
            M = {},
            ca = null;
        0 < d.find("img").length && (y = Zg(d.find("img").get(0)) > J.PH);
        v = $g(h(), function () {
            var a = Lg(x.Nb.pb().tb),
                b = J.xh * Q;
            return new U(0, 0, a.D() * b, a.F() * b)
        }());
        q = Math.min(h().D(), v.D()) / c.D();
        E = e.Y() - c.Y();
        B = e.N() - c.N();
        var V = ah(a.Ed),
            ra = V.$el.find(".page__content").get(0).getBoundingClientRect();
        K = $("#objectPanel").get(0).getBoundingClientRect().right;
        C = K - $(".uploadsLayoutColumn").outerWidth() / 2 + 20;
        N = K - C;
        bh();
        d.on("dragstart", function (a) {
            a.preventDefault();
            return !1
        });
        d.css("width", c.D());
        d.css("height", c.F());
        d.css("transform-origin", E + "px " + B + "px");
        m(c.Y(), c.N(), 1);
        d.attr("class", "draggedMedia");
        $("#content").append(d);
        (function () {
            var a = d.find("img"),
                c = $("\x3cli\x3e\x3c/li\x3e");
            d.toggleClass("cutout", y);
            c.data("result", b).append(a.clone());
            d.data("li", c);
            a.data("screenWidth", v.D());
            a.data("screenHeight", v.F());
            ch(d, x.Nb.Oa(), !1)
        })();
        $(document).on("mousemove", k);
        $(document).on("mouseup", l)
    };

    function dh(a) {
        this.hg = new ua(a)
    }
    var eh = ["PUBLIC_STREAM", "TEAM_STREAM", "TEAM_TEMPLATE", "MARKETPLACE_LAYOUT", "MARKETPLACE_TEXT"],
        fh = ["DESIGN_TUTORIAL", "FREE_NEW_USER", "C4W_INVITED_NEW_USER", "C4W_NEW_USER"];
    dh.prototype = Object.create(ua.prototype);
    dh.prototype.Qo = function () {
        var a = this.hg.get("brandColor", null);
        return a && gh(a)
    };
    dh.prototype.kh = function () {
        return this.hg.get("onboardingMode", null)
    };

    function hh(a) {
        return a.hg.get("enabledPublicationContexts", [])
    }

    function ih(a) {
        return (a = a.hg.get("layoutSearchRequest", null)) && new jh({
            Di: F("docId", a),
            query: D("query", a),
            bn: Ta(kh, "mediaTypes", a),
            fl: Ua(Va, Ya, "includeFilters", a),
            Pk: Ua(Va, Ya, "excludeFilters", a),
            filters: Fa.$d("filters", a),
            hj: Ua(Va, Wa, "boosts", a),
            elevation: F("elevation", a),
            JD: Fa.$d("elevateIds", a),
            jy: Ma("elevatedOnly", a),
            sort: Qa(lh, "sort", a),
            ND: Ma("enableSuggest", a),
            lq: z("skip", a),
            limit: z("limit", a),
            gk: Ma("translatable", a),
            locale: F("locale", a),
            Cg: F("rootSearchId", a),
            bg: Ma("organic", a),
            $g: Ma("freeOnly", a)
        })
    }

    function mh(a) {
        var b = a.hg.get("recaptchaConfig", {});
        a = F("siteKey", b) || null;
        b = F("impl", b) || null;
        return {
            $O: a,
            T8: b
        }
    }
    dh.prototype.Ey = function () {
        var a = this.hg.get("account", null);
        return null != a ? nh(a) : null
    };

    function oh(a, b) {
        switch (b) {
            case "PACK_10":
                return "PACK_10";
            case "PACK_20":
                return "PACK_20";
            case "PACK_50":
                return "PACK_50";
            case "PACK_100":
                return "PACK_100";
            default:
                throw new TypeError('expected CreditPack for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function ph(a) {
        switch (a) {
            case "PACK_10":
                return "PACK_10";
            case "PACK_20":
                return "PACK_20";
            case "PACK_50":
                return "PACK_50";
            case "PACK_100":
                return "PACK_100";
            default:
                throw new TypeError('expected CreditPack for property "creditPack", found: ' + JSON.stringify(a));
        }
    }

    function qh(a, b) {
        switch (b) {
            case "PAY_SYNCHRONOUS":
                return "PAY_SYNCHRONOUS";
            case "CANCEL":
                return "CANCEL";
            default:
                throw new TypeError('expected UpdateInvoiceAction for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function rh(a, b) {
        switch (b) {
            case "C4W_FREE_MEDIA":
                return "C4W_FREE_MEDIA";
            default:
                throw new TypeError('expected MediaLicenseDiscount for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function sh(a, b) {
        switch (b) {
            case "C4W_FREE_MEDIA":
                return "C4W_FREE_MEDIA";
            default:
                throw new TypeError('expected MediaLicenseDiscount for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function th(a) {
        this.id = a.id;
        this.kA = a.kA;
        this.oR = a.oR;
        this.Dz = a.Dz;
        this.ig = a.ig;
        this.SD = a.SD;
        this.Yt = a.Yt
    }
    th.prototype.G = function () {
        return this.id
    };
    th.prototype.oE = function () {
        return this.ig
    };

    function uh(a) {
        return new th({
            id: F("id", a),
            kA: F("owningBrand", a),
            oR: D("cardBrand", a),
            Dz: D("last4", a),
            ig: F("country", a),
            SD: z("expMonth", a),
            Yt: z("expYear", a)
        })
    }

    function vh(a) {
        this.ie = a.ie;
        this.UQ = a.UQ;
        this.PR = a.PR
    }

    function wh(a) {
        return new vh({
            ie: Na(uh, "card", a),
            UQ: A("addedDate", a),
            PR: A("deletedDate", a)
        })
    }

    function xh(a) {
        this.id = a.id;
        this.Z = a.Z;
        this.Kf = a.Kf;
        this.XW = a.XW;
        this.Xu = a.Xu;
        this.Gh = a.Gh;
        this.QR = a.QR;
        this.aR = a.aR || [];
        this.MN = a.MN || []
    }
    xh.prototype.G = function () {
        return this.id
    };
    xh.prototype.wa = function () {
        return this.Z
    };

    function nh(a) {
        return new xh({
            id: D("id", a),
            Z: D("brand", a),
            Kf: La("stripe", a),
            XW: F("stripeKey", a),
            Xu: z("marketplaceCreditBalance", a),
            Gh: Pa(uh, "defaultCreditCard", a),
            QR: La("delinquent", a),
            aR: Qa(wh, "archivedCards", a),
            MN: Ta(yh, "purchaseRoles", a)
        })
    }

    function zh(a) {
        this.Z = a.Z;
        this.items = a.items || [];
        this.currency = a.currency;
        this.wA = a.wA
    }
    zh.prototype.wa = function () {
        return this.Z
    };
    zh.prototype.uf = function () {
        return this.items
    };

    function Ah(a) {
        return {
            brand: hb("brand", a.Z),
            items: kb(Bh, "items", a.items),
            currency: hb("currency", a.currency),
            priceConfig: jb(Ch, "priceConfig", a.wA)
        }
    }

    function Dh(a) {
        this.message = a.message
    }

    function Eh(a) {
        return new Dh({
            message: D("message", a)
        })
    }

    function Fh(a) {
        this.yf = a.yf;
        this.error = a.error
    }
    Fh.prototype.getError = function () {
        return this.error
    };

    function Gh(a) {
        return new Fh({
            yf: F("invoice", a),
            error: Pa(Eh, "error", a)
        })
    }

    function Hh(a) {
        this.media = a.media;
        this.version = a.version;
        this.document = a.document;
        this.Hj = a.Hj;
        this.ab = a.ab
    }
    Hh.prototype.ac = function () {
        return this.media
    };
    Hh.prototype.getVersion = function () {
        return this.version
    };
    Hh.prototype.getDocument = function () {
        return this.document
    };

    function Ih(a) {
        return {
            media: hb("media", a.media),
            version: db("version", a.version),
            document: ib("document", a.document),
            licenseType: lb(Jh, "licenseType", a.Hj),
            discount: mb(rh, "discount", a.ab)
        }
    }

    function Kh(a) {
        this.order = a.order
    }
    Kh.prototype.Yo = function () {
        return this.order
    };

    function Lh(a) {
        return {
            order: hb("order", a.order)
        }
    }

    function Mh(a) {
        this.order = a.order
    }
    Mh.prototype.Yo = function () {
        return this.order
    };

    function Nh(a) {
        return {
            order: hb("order", a.order)
        }
    }

    function Oh(a) {
        this.vp = a.vp;
        this.gJ = a.gJ;
        this.BN = a.BN;
        this.DN = a.DN;
        this.sS = a.sS
    }
    Oh.prototype.XS = function () {
        return this.vp
    };

    function Bh(a) {
        return {
            license: jb(Ih, "license", a.vp),
            credit: mb(oh, "credit", a.gJ),
            printProduct: jb(Lh, "printProduct", a.BN),
            printShipping: jb(Nh, "printShipping", a.DN),
            expectedPurchasePrice: eb("expectedPurchasePrice", a.sS)
        }
    }

    function Ph(a) {
        this.yf = a.yf;
        this.items = a.items || [];
        this.action = a.action;
        this.ab = a.ab;
        this.Hv = a.Hv;
        this.tS = a.tS;
        this.wA = a.wA
    }
    Ph.prototype.uf = function () {
        return this.items
    };

    function Qh(a) {
        return {
            invoice: hb("invoice", a.yf),
            items: kb(Bh, "items", a.items),
            action: mb(qh, "action", a.action),
            discount: ib("discount", a.ab),
            removeDiscount: gb("removeDiscount", a.Hv),
            expectedTotal: eb("expectedTotal", a.tS),
            priceConfig: jb(Ch, "priceConfig", a.wA)
        }
    }

    function Rh(a) {
        this.message = a.message
    }

    function Sh(a) {
        return new Rh({
            message: D("message", a)
        })
    }

    function Th(a) {
        this.error = a.error
    }
    Th.prototype.getError = function () {
        return this.error
    };

    function Uh(a) {
        return new Th({
            error: Pa(Sh, "error", a)
        })
    }

    function Vh(a, b) {
        switch (b) {
            case "CREDIT":
                return "CREDIT";
            case "LICENSE":
                return "LICENSE";
            case "PRINT_PRODUCT":
                return "PRINT_PRODUCT";
            case "PRINT_SHIPPING":
                return "PRINT_SHIPPING";
            case "SUBSCRIPTION_PRORATION":
                return "SUBSCRIPTION_PRORATION";
            default:
                throw new TypeError('expected InvoiceItemType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Wh(a) {
        this.media = a.media;
        this.version = a.version;
        this.title = a.title;
        this.Z = a.Z;
        this.ta = a.ta;
        this.b1 = a.b1;
        this.Ng = a.Ng;
        this.HB = a.HB;
        this.Za = a.Za;
        this.n6 = a.n6;
        this.Hj = a.Hj;
        this.document = a.document;
        this.om = a.om;
        this.user = a.user
    }
    f = Wh.prototype;
    f.ac = function () {
        return this.media
    };
    f.getVersion = function () {
        return this.version
    };
    f.Jb = function () {
        return this.title
    };
    f.wa = function () {
        return this.Z
    };
    f.ur = function () {
        return this.Za
    };
    f.getDocument = function () {
        return this.document
    };
    f.LK = function () {
        return this.om
    };
    f.Qa = function () {
        return this.user
    };

    function Xh(a) {
        this.$l = a.$l || [];
        this.na = a.na;
        this.limit = a.limit
    }
    Xh.prototype.TS = function () {
        return this.$l
    };
    Xh.prototype.dc = function () {
        return this.na
    };
    Xh.prototype.Kd = function () {
        return this.limit
    };

    function Yh(a) {
        this.gt = a.gt || [];
        this.na = a.na
    }
    Yh.prototype.dc = function () {
        return this.na
    };

    function Zh(a) {
        return new Yh({
            gt: Qa(nh, "accounts", a),
            na: F("continuation", a)
        })
    }

    function $h(a) {
        this.type = a.type;
        this.media = a.media
    }
    $h.prototype.Ab = function () {
        return this.type
    };
    $h.prototype.ac = function () {
        return this.media
    };

    function ai(a) {
        return new $h({
            type: Ra(bi, "type", a),
            media: Pa(ci, "media", a)
        })
    }

    function bi(a, b) {
        switch (b) {
            case "MEDIA":
                return "MEDIA";
            default:
                throw new TypeError('expected ProductType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function di(a) {
        this.type = a.type;
        this.Za = a.Za;
        this.gF = a.gF
    }
    di.prototype.Ab = function () {
        return this.type
    };
    di.prototype.ur = function () {
        return this.Za
    };

    function ei(a) {
        return new di({
            type: Ra(fi, "type", a),
            Za: z("price", a),
            gF: z("markedPrice", a)
        })
    }

    function gi(a) {
        this.type = a.type;
        this.lM = a.lM
    }
    gi.prototype.Ab = function () {
        return this.type
    };

    function hi(a) {
        return new gi({
            type: Ra(fi, "type", a),
            lM: A("minutesToExpiry", a)
        })
    }

    function ii(a) {
        this.ua = a.ua;
        this.va = a.va;
        this.Ng = a.Ng;
        this.hM = a.hM;
        this.fg = a.fg;
        this.xv = a.xv || [];
        this.WL = a.WL;
        this.Kc = a.Kc || [];
        this.ab = a.ab
    }
    ii.prototype.Ky = function () {
        return this.ua
    };
    ii.prototype.Ly = function () {
        return this.va
    };
    ii.prototype.Hm = function () {
        return this.fg
    };

    function ci(a) {
        return new ii({
            ua: D("mediaId", a),
            va: z("mediaVersion", a),
            Ng: D("contributorName", a),
            hM: F("mediaTitle", a),
            fg: D("thumbnailUrl", a),
            xv: Qa(ei, "pricingOptions", a),
            WL: Ra(ji, "licensing", a),
            Kc: Qa(hi, "licenses", a),
            ab: Sa(sh, "discount", a)
        })
    }

    function ki(a) {
        this.Hf = a.Hf;
        this.document = a.document;
        this.lc = a.lc;
        this.ia = a.ia || []
    }
    ki.prototype.getDocument = function () {
        return this.document
    };
    ki.prototype.Rb = function () {
        return this.ia
    };

    function li(a) {
        this.mode = a.mode;
        this.xe = a.xe;
        this.media = a.media;
        this.na = a.na;
        this.limit = a.limit
    }
    li.prototype.ac = function () {
        return this.media
    };
    li.prototype.dc = function () {
        return this.na
    };
    li.prototype.Kd = function () {
        return this.limit
    };

    function mi(a) {
        this.nG = a.nG || [];
        this.na = a.na
    }
    mi.prototype.dc = function () {
        return this.na
    };

    function ni(a) {
        return new mi({
            nG: Qa(ai, "products", a),
            na: F("continuation", a)
        })
    }

    function oi(a) {
        this.value = a.value;
        this.currency = a.currency
    }
    oi.prototype.oc = function () {
        return this.value
    };

    function pi(a) {
        return new oi({
            value: z("value", a),
            currency: D("currency", a)
        })
    }

    function qi(a) {
        this.id = a.id;
        this.type = a.type;
        this.mh = a.mh;
        this.po = a.po;
        this.sC = a.sC || [];
        this.Pg = a.Pg
    }
    qi.prototype.G = function () {
        return this.id
    };
    qi.prototype.Ab = function () {
        return this.type
    };
    qi.prototype.Hy = function () {
        return this.Pg
    };

    function ri(a) {
        return new qi({
            id: D("id", a),
            type: Ra(si, "type", a),
            mh: A("percentage", a),
            po: Pa(pi, "amount", a),
            sC: Ta(Vh, "applicableInvoiceItemTypes", a),
            Pg: D("couponCode", a)
        })
    }

    function si(a, b) {
        switch (b) {
            case "PERCENTAGE":
                return "PERCENTAGE";
            case "AMOUNT":
                return "AMOUNT";
            default:
                throw new TypeError('expected DiscountType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function ti(a) {
        this.Z = a.Z;
        this.user = a.user;
        this.Pg = a.Pg
    }
    ti.prototype.wa = function () {
        return this.Z
    };
    ti.prototype.Qa = function () {
        return this.user
    };
    ti.prototype.Hy = function () {
        return this.Pg
    };

    function ui(a) {
        this.ab = a.ab
    }

    function vi(a) {
        return new ui({
            ab: Na(ri, "discount", a)
        })
    }

    function wi(a) {
        this.Z = a.Z;
        this.user = a.user;
        this.Pg = a.Pg;
        this.na = a.na;
        this.limit = a.limit
    }
    f = wi.prototype;
    f.wa = function () {
        return this.Z
    };
    f.Qa = function () {
        return this.user
    };
    f.Hy = function () {
        return this.Pg
    };
    f.dc = function () {
        return this.na
    };
    f.Kd = function () {
        return this.limit
    };

    function xi(a) {
        this.xJ = a.xJ || [];
        this.na = a.na
    }
    xi.prototype.dc = function () {
        return this.na
    };

    function yi(a) {
        return new xi({
            xJ: Qa(ri, "discounts", a),
            na: F("continuation", a)
        })
    }

    function Ch(a) {
        return {
            currency: hb("currency", a.currency),
            creditExchangeRate: db("creditExchangeRate", a.D8),
            expiryDate: db("expiryDate", a.py),
            mediaPriceModel: cb.required("mediaPriceModel", zi(a.i9)),
            creditPackPriceModel: cb.required("creditPackPriceModel", {
                prices: kb(Ai, "prices", a.F8.Ff)
            }),
            token: hb("token", a.bo)
        }
    }

    function zi(a) {
        return {
            licensingPriceModels: kb(Bi, "licensingPriceModels", a.d1),
            discountPriceModels: kb(Ci, "discountPriceModels", a.J8)
        }
    }

    function Ci(a) {
        return {
            discount: lb(rh, "discount", a.ab),
            licensingPriceModels: kb(Bi, "licensingPriceModels", a.d1)
        }
    }

    function Bi(a) {
        return {
            licensing: lb(Di, "licensing", a.WL),
            licenseTypePrices: kb(Ei, "licenseTypePrices", a.f9)
        }
    }

    function Ei(a) {
        return {
            licenseType: lb(Jh, "licenseType", a.Hj),
            markedPrice: db("markedPrice", a.gF)
        }
    }

    function Ai(a) {
        return {
            creditPack: lb(oh, "creditPack", a.E8),
            credits: db("credits", a.Rq),
            markedPrice: db("markedPrice", a.gF)
        }
    };

    function Fi(a) {
        this.fa = a
    }
    f = Fi.prototype;
    f.Lm = function (a) {
        throw Gi(a.response.errorKey);
    };
    f.vz = function (a) {
        return a instanceof Hi && "CreditCardInvalid" === a.response.errorType
    };
    f.Ey = function (a) {
        return Ii(this.fa, "/billing/brands/" + encodeURIComponent(a) + "/account").catch(Ji).get(0).then(Ja).then(nh)
    };

    function Ki(a, b) {
        var c = b.na,
            d = b.limit;
        b = [].concat(la(b.$l.map(function (a) {
            return "brands\x3d" + encodeURIComponent(a)
        })), [c && "continuation\x3d" + encodeURIComponent(c), "limit\x3d" + encodeURIComponent(String(d))]);
        return Ii(a.fa, "/billing/paymentaccounts?" + b.filter(function (a) {
            return !!a
        }).join("\x26")).catch(Ji).get(0).then(Ja).then(Zh)
    }

    function Li(a, b) {
        var c = "/billing/designs/" + encodeURIComponent(b.document) + "/" + encodeURIComponent(b.lc.toString()) + "/licenses";
        0 !== b.ia.length && (c += "?pages\x3d" + b.ia.join(","));
        return Ii(a.fa, c).catch(Ji).get(0).then(Ja).then(Mi)
    }

    function Ni(a, b) {
        var c;
        switch (b.mode) {
            case "DESIGN":
                c = "/billing/products/design";
                b = [].concat(["productType\x3d" + encodeURIComponent(b.xe.Hf), "document\x3d" + encodeURIComponent(b.xe.document), "documentVersion\x3d" + encodeURIComponent(String(b.xe.lc))], la(b.xe.ia.map(function (a) {
                    return "pages\x3d" + encodeURIComponent(String(a))
                })), [b.na && "continuation\x3d" + encodeURIComponent(b.na), "limit\x3d" + encodeURIComponent(String(b.limit))]);
                break;
            case "MEDIA":
                c = "/billing/products/media";
                b = [].concat(la(b.media.h9.map(function (a) {
                    return "media\x3d" + encodeURIComponent(a)
                })));
                break;
            default:
                throw Error("Unknown Mode");
        }
        return Ii(a.fa, c + "?" + b.filter(function (a) {
            return !!a
        }).join("\x26")).catch(Ji).get(0).then(Ja).then(ni)
    }
    f.getSubscription = function (a) {
        return Ii(this.fa, a.brand ? "/billing/brands/" + a.brand + "/subscription" + (null != a.excludeStandard ? "?excludeStandard\x3d" + (a.excludeStandard ? "true" : "false") : "") : "/billing/subscriptions/" + a.id).catch(Ji).get(0).then(Oi)
    };

    function Pi(a, b) {
        Ba(b.brand, "brand required");
        return Qi(a.fa, "/billing/brands/" + b.brand + "/subscription", b).catch(Ji).get(0).then(Ri).catch(a.vz, a.Lm)
    }
    f.$C = function (a) {
        return Qi(this.fa, "/billing/invoice", Ah(a)).catch(Ji).get(0).then(Ja).then(Gh).catch(this.vz, this.Lm)
    };

    function Si(a, b) {
        return Qi(a.fa, "/billing/invoice/" + encodeURIComponent(b.yf), Qh(b)).catch(Ji).get(0).then(Ja).then(Uh).catch(a.vz, a.Lm)
    }
    f.bG = function (a) {
        return Qi(this.fa, "/billing/invoices/" + encodeURIComponent(a.S8()) + "?pay", a).catch(Ji).get(0).then(Ti).catch(this.vz, this.Lm)
    };

    function Ui(a, b) {
        return Ii(a.fa, "/billing/discounts?" + ["brand\x3d" + encodeURIComponent(b.Z), "user\x3d" + encodeURIComponent(b.user), "couponCode\x3d" + encodeURIComponent(b.Pg), null != b.na ? "continuation\x3d" + encodeURIComponent(b.na) : null, "limit\x3d" + encodeURIComponent(String(b.limit))].filter(function (a) {
            return !!a
        }).join("\x26")).catch(Ji).get(0).then(Ja).then(yi)
    };

    function Vi() {}
    Vi.prototype.getSubscription = function () {
        return this.subscription
    };

    function Oi(a) {
        a = R(Vi, a);
        a.subscription = Wi(a.subscription);
        return a
    }

    function Xi() {}
    Xi.prototype.G = function () {
        return this.id
    };
    Xi.prototype.wa = function () {
        return this.brand
    };
    Xi.prototype.Oh = function () {
        return this.status
    };

    function Wi(a) {
        a = R(Xi, a);
        a.plan = Object.freeze(R(Yi, a.plan));
        null != a.trialEnd && (a.trialEnd = new Date(a.trialEnd));
        null != a.paidUntil && (a.paidUntil = new Date(a.paidUntil));
        null != a.periodEnd && (a.periodEnd = new Date(a.periodEnd));
        return a
    }

    function Yi() {}
    Yi.prototype.G = function () {
        return this.id
    };
    Yi.prototype.Tb = function () {
        return this.displayName
    };

    function Zi(a) {
        return a.trialPeriodDays
    }

    function $i(a) {
        return a.billingInterval
    }
    Yi.prototype.ur = function () {
        return this.price
    };

    function aj(a) {
        return ("YEARLY" === $i(a) ? 1 : 12) * a.ur()
    }

    function bj() {}
    bj.prototype.Hg = function (a) {
        this.brand = a;
        return this
    };

    function cj(a, b) {
        a.plan = b;
        return a
    }

    function dj(a, b) {
        a.trialPeriodDays = b;
        return a
    }

    function ej(a) {
        a.unbilled = !1;
        return a
    }

    function fj() {}
    fj.prototype.getSubscription = function () {
        return this.subscription
    };

    function Ri(a) {
        a = R(fj, a);
        a.subscription = Wi(a.subscription);
        return a
    }

    function gj(a) {
        this.media = a.media;
        this.va = a.va;
        this.document = a.document;
        this.Z = a.Z;
        this.Za = a.Za;
        this.type = a.type;
        this.pf = a.pf;
        this.oK = a.oK || null;
        this.jW = a.jW;
        this.ta = a.ta
    }

    function hj(a) {
        return new gj({
            media: D("media", a),
            va: z("mediaVersion", a),
            document: F("document", a),
            Z: D("brand", a),
            Za: z("price", a),
            type: Ra(fi, "type", a),
            pf: z("creationDate", a),
            oK: A("expirationDate", a),
            jW: La("revoked", a),
            ta: F("layout", a)
        })
    }

    function ij(a) {
        this.media = a.media;
        this.Ng = a.Ng;
        this.Kc = a.Kc || []
    }

    function jj(a) {
        return new ij({
            media: Na(kj, "media", a),
            Ng: D("contributorName", a),
            Kc: Qa(hj, "licenses", a)
        })
    }

    function lj(a) {
        this.document = a.document;
        this.lc = a.lc;
        this.ia = a.ia;
        this.NE = a.NE;
        this.PE = a.PE
    }
    lj.prototype.serialize = function () {
        return {
            document: this.document,
            documentVersion: this.lc,
            pages: this.ia,
            includeContributorNames: this.NE,
            includeThumbnailUrls: this.PE
        }
    };

    function mj(a) {
        this.NA = a.NA;
        this.Al = null != a.Al ? a.Al : null;
        this.lc = a.lc;
        this.items = a.items || []
    }

    function Mi(a) {
        return new mj({
            NA: La("requiresLicenses", a),
            lc: z("documentVersion", a),
            Al: A("responseTimestamp", a),
            items: Qa(jj, "items", a)
        })
    }

    function nj() {}

    function Ti(a) {
        a = R(nj, a);
        return Object.freeze(a)
    }

    function oj(a) {
        Wh.call(this, a);
        this.Kc = []
    }
    oj.prototype = Object.create(Wh.prototype);
    oj.prototype.constructor = oj;

    function pj(a) {
        this.fa = a;
        this.url = "/folders"
    }
    pj.prototype.$I = P.method(function (a) {
        return Qi(this.fa, this.url + "/~", a).get(0).then(qj)
    });
    pj.prototype.ES = P.method(function (a) {
        a = this.url + "/~?" + a.yP();
        return Ii(this.fa, a).get(0).then(rj)
    });
    pj.prototype.Gc = P.method(function (a) {
        var b = a.yP();
        a = "" + this.Aa(a.Gc()) + (b ? "?" + b : "");
        return Ii(this.fa, a).get(0).then(sj)
    });
    pj.prototype.Aa = function (a) {
        var b = a.me();
        return b ? [this.url, "~/system", b.Qa(), b.Ab()].join("/") : [this.url, a.G()].join("/")
    };
    P.method(function (a) {
        var b = this.Aa(a.Gc()) + "?removeItems";
        return Qi(this.fa, b, a).return()
    });
    pj.prototype.Kz = P.method(function (a) {
        a = this.Aa(a.Gc()) + "?list\x26" + a.$n();
        return Ii(this.fa, a).get(0).then(tj)
    });
    pj.prototype.t1 = P.method(function (a) {
        var b = this.Aa(a.Yk()) + "?moveItems";
        return Qi(this.fa, b, a).return()
    });
    pj.prototype.GP = P.method(function (a) {
        var b;
        if (a.Gc().me())
            throw Error("System folders cannot be updated");
        b = this.url + "/" + a.Gc().G();
        return Qi(this.fa, b, a).get(0).then(uj)
    });

    function vj() {}
    vj.prototype.$n = function () {
        var a = this;
        return Object.keys(a).map(function (b) {
            if ("object" !== typeof a[b])
                return b + "\x3d" + encodeURIComponent(a[b])
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };

    function wj(a, b) {
        a.to = b;
        return a
    }
    vj.prototype.MX = function (a) {
        this.items = a;
        return this
    };

    function xj(a, b) {
        a.from = b;
        return a
    }
    vj.prototype.uf = function () {
        return this.items
    };
    vj.prototype.Yk = function () {
        if (this.from)
            return yj(this.from)
    };

    function zj(a) {
        this.id = a.id || null;
        this.systemFolder = a.a7;
        return this
    }

    function yj(a) {
        return Object.freeze(R(zj, a))
    }
    zj.prototype.G = function () {
        return this.id
    };
    zj.prototype.me = function () {
        if (this.systemFolder)
            return Object.freeze(R(Aj, this.systemFolder))
    };

    function Mg(a) {
        return a.me() ? yj({
            systemFolder: Object.freeze(R(Aj, {
                brand: a.wa(),
                type: a.me(),
                user: a.Qa()
            }))
        }) : yj({
            id: a.G()
        })
    }

    function Aj() {}
    Aj.prototype.wa = function () {
        return this.brand
    };
    Aj.prototype.Ab = function () {
        return this.type
    };
    Aj.prototype.Qa = function () {
        return this.user
    };

    function Bj() {}

    function uj(a) {
        return Object.freeze(R(Bj, a))
    }
    Bj.prototype.Gc = function () {
        if (this.folder)
            return Cj(this.folder)
    };
    Bj.prototype.Cm = function () {
        return this.access
    };

    function Dj(a) {
        a = void 0 === a ? {} : a;
        this.id = a.id || "";
        this.thumbnail = a.bd;
        this.systemFolder = a.a7 || null;
        this.acl = a.Rf;
        this.access = a.EY;
        this.name = a.name || null;
        this.description = a.description || null;
        this.brand = a.Z || "";
        this.itemCount = a.b9 || 0;
        this.user = a.user || "";
        this.modifiedDate = a.mM || 0;
        this.shared = a.D9 || !1;
        this.type = a.type || Ej;
        this.userSettings = a.T9 || null
    }
    var Ej = "DESIGN";

    function Cj(a) {
        return Object.freeze(R(Dj, a))
    }
    f = Dj.prototype;
    f.G = function () {
        return this.id
    };
    f.Vd = function () {
        if (this.thumbnail)
            return Object.freeze(R(Fj, this.thumbnail))
    };
    f.me = function () {
        return this.systemFolder
    };
    f.Wf = function () {
        if (this.acl)
            return Object.freeze(R(Gj, this.acl))
    };
    f.Cm = function () {
        if (this.access)
            return this.access
    };
    f.getName = function () {
        return this.name
    };
    f.pg = function () {
        return this.description
    };
    f.wa = function () {
        return this.brand
    };
    f.Qa = function () {
        return this.user
    };
    f.Ab = function () {
        return this.type
    };
    f.fp = function () {
        if (this.userSettings)
            return Object.freeze(R(Hj, this.userSettings))
    };
    f.Fx = function (a) {
        a = _.extend(_.pick(this, Object.keys(this)), a);
        return Cj(a)
    };
    var Ij = Cj({
            brand: "",
            id: "FACEBOOK",
            itemCount: 0,
            modifiedDate: 0,
            name: "Facebook",
            systemFolder: null,
            thumbnail: {
                height: 200,
                url: "https://static.canva.com/static/images/upload_folder_facebook.png",
                width: 200
            },
            user: ""
        }),
        Jj = Cj({
            brand: "",
            id: "UPLOADED_MEDIA",
            itemCount: 0,
            modifiedDate: 0,
            name: null,
            systemFolder: null,
            thumbnail: {
                height: 200,
                url: "https://static.canva.com/static/images/default_folder_thumbnail_grey_bg.png",
                width: 200
            },
            user: ""
        }),
        Kj = Cj({
            brand: "",
            id: "UNLIMITED_USE",
            itemCount: 0,
            modifiedDate: 0,
            name: null,
            systemFolder: null,
            thumbnail: {
                height: 200,
                url: "https://static.canva.com/static/images/purchased_folder_thumbnail.png",
                width: 200
            },
            user: ""
        }),
        Lj = {
            V7: Ij,
            r8: Jj,
            q8: Kj
        };

    function Fj() {}
    Fj.prototype.F = function () {
        return this.height
    };
    Fj.prototype.D = function () {
        return this.width
    };
    Fj.prototype.Aa = function () {
        return this.url
    };

    function Gj(a) {
        a = void 0 === a ? {} : a;
        this.entries = a.entries
    }
    Gj.prototype.Fx = function (a) {
        a = _.extend(_.pick(this, Object.keys(this)), a);
        return Object.freeze(R(Gj, a))
    };
    Gj.prototype.getEntries = function () {
        if (this.entries)
            return this.entries.filter(function (a) {
                return !!a
            }).map(function (a) {
                return Object.freeze(R(Mj, a))
            })
    };

    function Mj(a) {
        a = void 0 === a ? {} : a;
        this.user = a.user;
        this.brand = a.Z;
        this.access = a.EY
    }
    Mj.prototype.Fx = function (a) {
        a = _.extend(_.pick(this, Object.keys(this)), a);
        return Object.freeze(R(Mj, a))
    };
    Mj.prototype.wa = function () {
        return this.brand
    };
    Mj.prototype.Cm = function () {
        return this.access
    };
    Mj.prototype.Qa = function () {
        return this.user
    };

    function Nj() {}
    f = Nj.prototype;
    f.$n = function () {
        var a = this;
        return Object.keys(a).map(function (b) {
            if ("object" !== typeof a[b])
                return b + "\x3d" + encodeURIComponent(a[b])
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };
    f.ik = function (a) {
        this.folder = a;
        return this
    };

    function Oj(a, b) {
        a.acl = b;
        return a
    }
    f.$s = function (a) {
        this.name = a;
        return this
    };
    f.HX = function (a) {
        this.description = a;
        return this
    };

    function Pj(a) {
        a.trash = !0;
        return a
    }
    f.iQ = function (a) {
        this.userSettings = a;
        return this
    };
    f.Gc = function () {
        if (this.folder)
            return yj(this.folder)
    };
    f.Wf = function () {
        if (this.acl)
            return Object.freeze(R(Gj, this.acl))
    };
    f.getName = function () {
        return this.name
    };
    f.pg = function () {
        return this.description
    };
    f.fp = function () {
        if (this.userSettings)
            return Object.freeze(R(Hj, this.userSettings))
    };

    function Qj(a, b, c) {
        var d;
        d = function () {
            var c = [];
            a.Wf() && a.Wf().getEntries() && a.Wf().getEntries().forEach(function (a) {
                a.wa() !== b && c.push({
                    brand: a.wa(),
                    access: a.Cm()
                })
            });
            return c
        }();
        c && d.push({
            brand: b,
            access: c
        });
        c = Object.freeze(R(Gj, {
            entries: d
        }));
        return Oj((new Nj).ik(Mg(a)), c)
    }

    function Rj(a) {
        this.gR = a.gR;
        this.MV = a.MV;
        this.JU = a.JU;
        this.VV = a.VV;
        this.kU = a.kU;
        this.DR = a.DR;
        this.jU = a.jU;
        this.mn = a.mn
    }

    function Sj() {}

    function tj(a) {
        return Object.freeze(R(Sj, a))
    }
    Sj.prototype.uf = function () {
        if (this.items)
            return this.items.filter(function (a) {
                return !!a
            }).map(function (a) {
                return Tj(a)
            })
    };
    Sj.prototype.dc = function () {
        return this.continuation
    };
    Sj.prototype.Gc = function () {
        if (this.folder)
            return Cj(this.folder)
    };
    Sj.prototype.Cm = function () {
        return this.access
    };

    function Uj() {}
    f = Uj.prototype;
    f.$n = function () {
        var a = this;
        return Object.keys(a).map(function (b) {
            if ("object" !== typeof a[b] || Array.isArray(a[b]))
                return b + "\x3d" + encodeURIComponent(a[b])
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };
    f.Ig = function (a) {
        this.limit = a;
        return this
    };
    f.ik = function (a) {
        this.folder = a;
        return this
    };

    function Vj(a) {
        a.includeMetadata = !0;
        return a
    }
    f.aj = function (a) {
        this.continuation = a;
        return this
    };
    f.Kd = function () {
        return this.limit
    };
    f.Gc = function () {
        if (this.folder)
            return yj(this.folder)
    };
    f.JK = function () {
        return this.decorations
    };
    f.dc = function () {
        return this.continuation
    };

    function Wj() {}

    function sj(a) {
        return Object.freeze(R(Wj, a))
    }
    Wj.prototype.Gc = function () {
        if (this.folder)
            return Cj(this.folder)
    };

    function Xj() {}
    f = Xj.prototype;
    f.$n = function () {
        var a = this;
        return Object.keys(a).map(function (b) {
            if ("object" !== typeof a[b])
                return b + "\x3d" + encodeURIComponent(a[b])
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };
    f.yP = function () {
        return Object.keys(this).map(function (a) {
            var b = this[a];
            if (Array.isArray(b))
                return a + "\x3d" + b.map(encodeURIComponent).join(",");
            if ("object" !== typeof b)
                return a + "\x3d" + encodeURIComponent(b)
        }, this).filter(Boolean).join("\x26")
    };
    f.ik = function (a) {
        this.folder = a;
        return this
    };
    f.Gc = function () {
        if (this.folder)
            return yj(this.folder)
    };
    f.JK = function () {
        return this.decorations
    };

    function Yj() {}

    function rj(a) {
        return Object.freeze(R(Yj, a))
    }
    Yj.prototype.To = function () {
        if (this.folders)
            return this.folders.filter(function (a) {
                return !!a
            }).map(function (a) {
                return Cj(a)
            })
    };
    Yj.prototype.dc = function () {
        return this.continuation
    };

    function Zj() {}
    f = Zj.prototype;
    f.$n = function () {
        var a = this;
        return Object.keys(a).map(function (b) {
            if ("object" !== typeof a[b])
                return b + "\x3d" + encodeURIComponent(a[b])
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };
    f.Ig = function (a) {
        this.limit = a;
        return this
    };
    f.Hg = function (a) {
        this.brand = a;
        return this
    };
    f.ct = function (a) {
        this.user = a;
        return this
    };

    function ak(a, b) {
        a.folderTypes = b;
        return a
    }
    f.aj = function (a) {
        this.continuation = a;
        return this
    };
    f.MX = function (a) {
        this.items = a;
        return this
    };
    f.iQ = function () {
        this.projections || (this.projections = []);
        this.projections.push("USER_SETTINGS");
        return this
    };
    f.Kd = function () {
        return this.limit
    };
    f.wa = function () {
        return this.brand
    };
    f.Qa = function () {
        return this.user
    };
    f.dc = function () {
        return this.continuation
    };
    f.yP = function () {
        return Object.keys(this).map(function (a) {
            var b = this[a];
            if (Array.isArray(b))
                return a + "\x3d" + b.map(encodeURIComponent).join(",");
            if ("object" !== typeof b)
                return a + "\x3d" + encodeURIComponent(b)
        }, this).filter(Boolean).join("\x26")
    };

    function bk() {}

    function qj(a) {
        return Object.freeze(R(bk, a))
    }
    bk.prototype.Cm = function () {
        return this.access
    };
    bk.prototype.Gc = function () {
        if (this.folder)
            return Cj(this.folder)
    };

    function ck() {}
    f = ck.prototype;
    f.$n = function () {
        var a = this;
        return Object.keys(a).map(function (b) {
            if ("object" !== typeof a[b])
                return b + "\x3d" + encodeURIComponent(a[b])
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };
    f.$s = function (a) {
        this.name = a;
        return this
    };
    f.Hg = function (a) {
        this.brand = a;
        return this
    };
    f.ct = function (a) {
        this.user = a;
        return this
    };
    f.iQ = function (a) {
        this.userSettings = a;
        return this
    };
    f.getName = function () {
        return this.name
    };
    f.wa = function () {
        return this.brand
    };
    f.Qa = function () {
        return this.user
    };
    f.Ab = function () {
        return this.type
    };
    f.fp = function () {
        return this.userSettings
    };

    function dk() {
        this.width = this.height = 0;
        this.url = "";
        this.version = 0
    }
    dk.prototype.D = function () {
        return this.width
    };
    dk.prototype.F = function () {
        return this.height
    };
    dk.prototype.getVersion = function () {
        return this.version
    };
    dk.prototype.Aa = function () {
        return this.url
    };

    function ek() {
        this.type = fk;
        this.name = this.id = "";
        this.timestamp = this.version = 0;
        this.trashedTimestamp = null;
        this.thumbnail = new dk;
        this.tags = [];
        this.document = this.socialMetadata = this.folders = this.owner = this.marketplaceStatus = null
    }
    var fk = "DESIGN";

    function Tj(a) {
        a = $.extend(new ek, a);
        a.owner && (a.owner = Object.freeze(R(gk, a.owner)));
        if (a.thumbnail) {
            var b;
            b = (b = a.thumbnail) ? $.extend(new dk, b) : null;
            a.thumbnail = b
        }
        a.socialMetadata && (b = a.socialMetadata,
            b = new Rj({
                gR: Ma("brandPublik", b),
                MV: Ma("publik", b),
                JU: Sa(hk, "myRole", b),
                VV: z("remixCount", b),
                kU: z("likerCount", b),
                DR: z("commentCount", b),
                jU: La("likedByMe", b),
                mn: Pa(ik, "owner", b)
            }),
            a.socialMetadata = b);
        a.document && (a.document = jk(a.document));
        return a
    }
    f = ek.prototype;
    f.Fx = function (a) {
        a = _.extend(_.pick(this, Object.keys(this)), a);
        return Tj(a)
    };
    f.Ab = function () {
        return this.type
    };
    f.G = function () {
        return this.id
    };
    f.getName = function () {
        return this.name
    };
    f.getVersion = function () {
        return this.version
    };
    f.xr = function () {
        return this.timestamp
    };
    f.Vd = function () {
        return this.thumbnail
    };
    f.wu = function () {
        return this.tags
    };
    f.To = function () {
        return this.folders
    };
    f.ac = function () {
        return this.media ? kj(this.media) : null
    };
    f.XS = function () {
        return this.license ? hj(this.license) : null
    };
    f.getDocument = function () {
        return this.document
    };

    function gk() {}
    gk.prototype.Qa = function () {
        return this.user
    };
    gk.prototype.wa = function () {
        return this.brand
    };

    function Hj(a) {
        this.starred = a.H9
    };

    function kk() {
        this.xhr = null
    }
    kk.prototype.cancel = function () {
        this.xhr && (this.xhr.abort(),
            this.xhr = null)
    };
    kk.prototype.finish = function () {
        this.xhr = null
    };

    function lk(a) {
        this.WQ = a && a.analyticsContext || null;
        this.iI = a && a.authToken || null;
        this.jI = a && a.authzToken || null;
        this.hR = a && a.brandRestriction || null;
        this.jR = a && a.buildName || null;
        this.kR = a && a.buildSha || null;
        this.Lt = a && a.csrfTokens || {};
        this.AO = a && a.serverRoot || null;
        this.sW = !!this.AO;
        this.m6 = this.AO ? this.AO + "/_ajax" : "/_ajax"
    }

    function mk(a) {
        var b = a.indexOf("/", 1);
        return -1 == b ? a : a.substring(0, b)
    }

    function nk(a) {
        return 200 <= a && 300 > a
    }
    lk.prototype.get = function (a, b) {
        var c = new kk;
        this.send("GET", a, null, !0, null, c, b);
        return c
    };

    function Ii(a, b) {
        var c;
        return (new P(function (d, e) {
            c = a.get(b, function (a, b) {
                nk(a) ? d([b, a]) : e([b, a])
            })
        })).cancellable().catch(P.CancellationError, function (a) {
            c.cancel();
            throw a;
        })
    }
    lk.prototype.post = function (a, b, c) {
        var d = new kk;
        ok(this, "POST", a, b, !0, 0, d, c);
        return d
    };

    function Qi(a, b, c) {
        var d;
        return (new P(function (e, g) {
            d = a.post(b, c, function (a, b) {
                nk(a) ? e([b, a]) : g([b, a])
            })
        })).cancellable().catch(P.CancellationError, function (a) {
            d.cancel();
            throw a;
        })
    }

    function pk(a, b, c, d) {
        if (a.sW)
            throw Error("synchronous XHRs cannot be made with withCredentials");
        a.send("POST", b, d, !1, c, new kk, function () {})
    }

    function qk(a, b, c) {
        var d = new kk;
        ok(a, "DELETE", b, null, !0, 0, d, c);
        return d
    }

    function rk(a, b) {
        var c;
        return (new P(function (d, e) {
            c = qk(a, b, function (a, b) {
                nk(a) ? d([b, a]) : e([b, a])
            })
        })).cancellable().catch(P.CancellationError, function (a) {
            c.cancel();
            throw a;
        })
    }

    function Ji(a) {
        var b = Array.isArray(a) && 2 === a.length && "number" === typeof a[1];
        if (a instanceof Error)
            throw a;
        if (b && Array.isArray(a))
            throw b = ka(a),
                a = b.next().value,
                b = b.next().value,
                a = sk(a, b),
                a.VG = b,
                a;
        throw Error("unable to parse error or response tuple. HttpServiceError or [?, statusCode] required.");
    }

    function ok(a, b, c, d, e, g, h, k) {
        var l = mk(c);
        if (l in a.Lt) {
            var m = a.Lt[l];
            a.send(b, c, d, e, m, h, function (n, p) {
                418 == n && 1 > g ? (a.Lt[l] == m && delete a.Lt[l],
                    ok(a, b, c, d, e, g + 1, h, k)) : (k && k(n, p),
                    h.finish())
            })
        } else
            a.send("GET", "/csrf" + l, null, e, null, h, function (m, p) {
                200 == m ? (l in a.Lt || (a.Lt[l] = String(p)),
                    ok(a, b, c, d, e, g, h, k)) : (k(m, null),
                    h.finish())
            })
    }
    lk.prototype.send = function (a, b, c, d, e, g, h) {
        function k() {
            4 == m.readyState && l()
        }

        function l() {
            var a, b, c;
            try {
                a = m.status;
                var d, e;
                try {
                    d = m.getResponseHeader("X-Canva-Auth")
                } catch (k) {}
                try {
                    e = m.getResponseHeader("X-Canva-Authz")
                } catch (k) {}
                d && (n.iI = "!" != d ? d : null);
                e && (n.jI = "!" != e ? e : null);
                b = m.responseText
            } catch (k) {
                if (k.message && k.message.match(/c00c023f/))
                    a = 0,
                    b = "";
                else
                    throw g.finish(),
                        k;
            }
            b = b && b.trim ? b.trim() : "";
            d = b.substring(0, 20);
            if (0 < d.length) {
                if ("'\"])}while(1);\x3c/x\x3e//" != d) {
                    h(500, null);
                    g.finish();
                    return
                }
                b = b.substring(20);
                try {
                    c = JSON.parse(b)
                } catch (k) {
                    h(500, null);
                    g.finish();
                    return
                }
            } else
                c = null;
            h(a, c);
            g.finish()
        }
        b = this.m6 + b;
        var m = g.xhr = new XMLHttpRequest,
            n = this;
        m.open(a, b, d);
        this.sW && (m.withCredentials = !0);
        "GET" != a && e && m.setRequestHeader("X-Csrf-Token", e);
        this.WQ && m.setRequestHeader("X-Canva-Analytics", this.WQ);
        this.iI && m.setRequestHeader("X-Canva-Auth", this.iI);
        this.jI && m.setRequestHeader("X-Canva-Authz", this.jI);
        this.hR && m.setRequestHeader("X-Canva-Brand", this.hR);
        this.jR && m.setRequestHeader("X-Canva-Build-Name", this.jR);
        this.kR && m.setRequestHeader("X-Canva-Build-Sha", this.kR);
        null === c || void 0 === c ? a = null : (m.setRequestHeader("Content-Type", "application/json;charset\x3dUTF-8"),
            a = JSON.stringify(c));
        d ? (m.onreadystatechange = k,
            m.send(a)) : (m.send(a),
            l())
    };

    function Hi(a) {
        this.message = a || "HTTP error encountered";
        this.response = a;
        this.VG = null
    }
    t(Hi, Error);

    function tk(a) {
        if (null === a.VG)
            throw Error("HttpServiceError not initialized correctly");
        return a.VG
    }

    function sk(a, b) {
        switch (b) {
            case 400:
                return new uk(a);
            case 403:
                return new vk(a);
            case 404:
                return new wk(a);
            case 409:
                return new xk(a);
            case 418:
                return new yk;
            case 429:
                return new zk(a);
            case 500:
                return new Ak(a);
            default:
                return new Bk(a)
        }
    }

    function Ck(a) {
        Hi.apply(this, arguments)
    }
    t(Ck, Hi);

    function Dk(a) {
        Hi.apply(this, arguments)
    }
    t(Dk, Hi);

    function uk(a) {
        Ck.apply(this, arguments)
    }
    t(uk, Ck);

    function vk(a) {
        Ck.apply(this, arguments)
    }
    t(vk, Ck);

    function wk(a) {
        Ck.apply(this, arguments)
    }
    t(wk, Ck);

    function xk(a) {
        Ck.apply(this, arguments)
    }
    t(xk, Ck);

    function zk(a) {
        Ck.apply(this, arguments)
    }
    t(zk, Ck);

    function Ak(a) {
        Dk.apply(this, arguments)
    }
    t(Ak, Dk);

    function yk() {
        Ck.call(this, "CSRF token expired")
    }
    t(yk, Ck);

    function Bk(a) {
        Hi.apply(this, arguments)
    }
    t(Bk, Hi);

    function Ek(a) {
        this.fa = a;
        this.url = "/metrics"
    }

    function Fk(a, b) {
        return Qi(a.fa, a.url, Gk(b)).get(0).then(Ja).then(Hk)
    }

    function Ik(a, b) {
        return Qi(a.fa, a.url, Jk(b)).get(0).then(Ja).then(Hk)
    };

    function Kk(a, b) {
        switch (b) {
            case "HISTOGRAM":
                return "HISTOGRAM";
            case "TIMELINE":
                return "TIMELINE";
            default:
                throw new TypeError('expected MetricType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Lk(a) {
        this.Lr = a.Lr;
        this.name = a.name;
        this.value = a.value
    }
    Lk.prototype.getName = function () {
        return this.name
    };
    Lk.prototype.oc = function () {
        return this.value
    };

    function Gk(a) {
        return {
            metricType: lb(Kk, "metricType", a.Lr),
            name: hb("name", a.name),
            value: db("value", a.value)
        }
    }

    function Mk(a) {
        this.Lr = a.Lr;
        this.name = a.name;
        this.events = a.events || new Map
    }
    Mk.prototype.getName = function () {
        return this.name
    };

    function Jk(a) {
        return {
            metricType: lb(Kk, "metricType", a.Lr),
            name: hb("name", a.name),
            events: ob(pb, rb, "events", a.events)
        }
    }

    function Nk() {}

    function Hk() {
        return new Nk
    };

    function Ok() {}
    Ok.prototype.now = function () {
        return Date.now()
    };
    var Pk = new Ok;
    var Rk = new Qk;

    function Qk() {}
    f = Qk.prototype;
    f.setInterval = function (a, b) {
        return window.setInterval(a, b)
    };
    f.clearInterval = function (a) {
        window.clearInterval(a)
    };
    f.setTimeout = function (a, b) {
        return window.setTimeout(a, b)
    };
    f.clearTimeout = function (a) {
        window.clearTimeout(a)
    };
    f.requestAnimationFrame = function (a) {
        return window.requestAnimationFrame(a)
    };
    f.cancelAnimationFrame = function (a) {
        window.cancelAnimationFrame(a)
    };

    function Sk(a) {
        window.requestAnimationFrame(function () {
            window.requestAnimationFrame(a)
        })
    };

    function Tk(a, b, c, d) {
        this.name = a;
        this.Dh = b;
        this.Mr = c;
        this.startTime = d;
        this.events = new Map
    }
    Tk.prototype.Ga = function (a) {
        this.events.set(a, this.Dh.now() - this.startTime)
    };
    Tk.prototype.done = function () {
        this.events.size && Uk(this.Mr, this.name, this.events)
    };

    function Vk(a, b) {
        this.name = a;
        this.Mr = b
    }
    Vk.prototype.update = function (a) {
        Wk(this.Mr, this.name, a)
    };

    function Xk(a, b, c) {
        this.tW = a;
        this.Dh = b;
        this.E4 = c
    }

    function Yk(a) {
        var b = window.cstart;
        if (void 0 === b)
            throw Error("cstart undefined");
        return new Xk(a, Pk, b)
    }
    Xk.prototype.iL = function (a) {
        return new Vk(a, this)
    };

    function Uk(a, b, c) {
        b = new Mk({
            Lr: "TIMELINE",
            name: b,
            events: c
        });
        Ik(a.tW, b).catch(function () {})
    }

    function Wk(a, b, c) {
        Fk(a.tW, new Lk({
            Lr: "HISTOGRAM",
            name: b,
            value: c
        })).catch(function () {})
    };

    function Zk() {
        this.hO = []
    }
    Zk.prototype.update = function (a) {
        this.hO.push(a)
    };
    Zk.prototype.serialize = function () {
        if (0 == this.hO.length)
            return null;
        var a = Infinity,
            b = -Infinity,
            c = 0,
            d = 0;
        this.hO.forEach(function (e) {
            a = Math.min(a, e);
            b = Math.max(b, e);
            c += e;
            d++
        });
        return {
            min: a,
            max: b,
            sum: c,
            count: d,
            mean: c / d
        }
    };

    function $k(a) {
        this.qd = a;
        this.GD = a.Y();
        this.ID = a.N();
        if (a.yk) {
            var b = a.Lw;
            this.GD = b.Y();
            this.ID = b.N();
            b.Y();
            a.Y();
            b.N();
            a.N()
        }
    }
    f = $k.prototype;
    f.Y = function () {
        return this.qd.sd().Y() + this.GD
    };
    f.nc = $k.prototype.Y;
    f.N = function () {
        return this.qd.sd().N() + this.ID
    };
    f.xc = $k.prototype.N;
    f.D = function () {
        return this.qd.sd().D()
    };
    f.eh = $k.prototype.D;
    f.F = function () {
        return this.qd.sd().F()
    };
    f.dh = $k.prototype.F;
    f.kb = function () {
        return this.Y() + this.D()
    };
    f.Ld = $k.prototype.kb;
    f.Ha = function () {
        return this.N() + this.F()
    };
    f.ud = $k.prototype.Ha;
    f.eb = function () {
        return 0
    };
    f.setSize = function (a, b) {
        var c = this.qd.sd();
        c.za(a);
        c.oa(b);
        al(this.qd, c)
    };
    f.za = function (a) {
        var b = this.qd.sd();
        b.za(a);
        al(this.qd, b)
    };
    f.oa = function (a) {
        var b = this.qd.sd();
        b.oa(a);
        al(this.qd, b)
    };
    f.wb = function (a) {
        var b = this.qd.sd();
        b.wb(a - this.GD);
        al(this.qd, b)
    };
    f.rb = function (a) {
        var b = this.qd.sd();
        b.rb(a - this.ID);
        al(this.qd, b)
    };
    f.setPosition = function (a, b) {
        var c = this.qd.sd();
        c.setPosition(a - this.GD, b - this.ID);
        al(this.qd, c)
    };

    function bl(a) {
        this.sk = a;
        a = cl(this.sk.map(function (a) {
            return a.nc()
        }));
        var b = dl(this.sk.map(function (a) {
                return a.Ld()
            })),
            c = cl(this.sk.map(function (a) {
                return a.xc()
            })),
            d = dl(this.sk.map(function (a) {
                return a.ud()
            }));
        this.width = b - a;
        this.height = d - c
    }
    f = bl.prototype;
    f.Y = function () {
        return cl(this.sk.map(function (a) {
            return a.nc()
        }))
    };
    f.nc = bl.prototype.Y;
    f.N = function () {
        return cl(this.sk.map(function (a) {
            return a.xc()
        }))
    };
    f.xc = bl.prototype.N;
    f.D = function () {
        return this.width
    };
    f.eh = bl.prototype.D;
    f.F = function () {
        return this.height
    };
    f.dh = bl.prototype.F;
    f.kb = function () {
        return this.Y() + this.D()
    };
    f.Ld = bl.prototype.kb;
    f.Ha = function () {
        return this.N() + this.F()
    };
    f.ud = bl.prototype.Ha;
    f.eb = function () {
        return 0
    };
    f.ha = function () {
        return this.sk[0].ha()
    };
    f.Ba = function () {
        return new U(this.Y(), this.N(), this.D(), this.F())
    };
    f.Ou = function (a) {
        return a ? Sg(this.Ba(), a.Ba()) : !1
    };
    f.setSize = function () {};
    f.za = function () {};
    f.oa = function () {};
    f.wb = function (a) {
        var b = a - this.Y();
        this.sk.forEach(function (a) {
            a.wb(a.Y() + b)
        })
    };
    f.rb = function (a) {
        var b = a - this.N();
        this.sk.forEach(function (a) {
            a.rb(a.N() + b)
        })
    };
    f.setPosition = function (a, b) {
        var c = a - this.Y(),
            d = b - this.N();
        this.sk.forEach(function (a) {
            a.setPosition(a.Y() + c, a.N() + d)
        })
    };

    function Wg(a, b, c) {
        this.elem = a;
        this.ul = b;
        this.height = a.height();
        this.width = a.width();
        this.PP = void 0 !== c;
        this.origin = c
    }
    f = Wg.prototype;
    f.Y = function () {
        return (this.elem[0].getBoundingClientRect().left - this.ul.left) / W
    };
    f.nc = Wg.prototype.Y;
    f.N = function () {
        return (this.elem[0].getBoundingClientRect().top - this.ul.top) / W
    };
    f.xc = Wg.prototype.N;
    f.D = function () {
        return this.elem[0].getBoundingClientRect().width / W
    };
    f.eh = Wg.prototype.D;
    f.F = function () {
        return this.elem[0].getBoundingClientRect().height / W
    };
    f.dh = Wg.prototype.F;
    f.kb = function () {
        return this.Y() + this.D()
    };
    f.Ld = Wg.prototype.kb;
    f.Ha = function () {
        return this.N() + this.F()
    };
    f.ud = Wg.prototype.Ha;
    f.eb = function () {
        return 0
    };
    f.setSize = function () {};
    f.za = function () {};
    f.oa = function () {};
    f.wb = function (a) {
        var b;
        this.PP ? (b = el(this.elem[0]).Gn,
            a = a * W + this.ul.left + (b - 1) * this.origin.left,
            Ug(this.elem[0], {
                hi: a
            })) : this.elem.css("left", a * W + this.ul.left)
    };
    f.rb = function (a) {
        var b;
        this.PP ? (b = el(this.elem[0]).Yp,
            a = a * W + this.ul.top + (b - 1) * this.origin.top,
            Ug(this.elem[0], {
                ii: a
            })) : this.elem.css("top", a * W + this.ul.top)
    };
    f.setPosition = function (a, b) {
        var c;
        this.PP ? (c = el(this.elem[0]),
            a = a * W + this.ul.left + (c.Gn - 1) * this.origin.left,
            b = b * W + this.ul.top + (c.Yp - 1) * this.origin.top,
            Ug(this.elem[0], {
                hi: a,
                ii: b
            })) : this.elem.css("left", a * W + this.ul.left).css("top", b * W + this.ul.top)
    };

    function fl(a) {
        this.ny = a.ny;
        this.Mo = a.Mo;
        this.user = a.user;
        this.Z = a.Z;
        this.Zr = a.Zr;
        this.Mq = a.Mq;
        this.Fw = a.Fw;
        this.Sc = a.Sc
    }

    function gl(a) {
        return new fl({
            ny: D("experience", a),
            Mo: Ua(Va, Ya, "experiments", a) || new Map,
            user: F("user", a) || null,
            Z: F("brand", a) || null,
            Zr: Ma("personal", a) || null,
            Mq: A("cohort", a) || null,
            Fw: F("tier", a) || null,
            Sc: F("countryCode", a) || null
        })
    };

    function hl(a) {
        fl.call(this, a)
    }
    t(hl, fl);

    function il(a) {
        fl.call(this, a);
        this.bo = a.bo
    }
    t(il, fl);

    function jl(a) {
        var b = gl(a);
        return new il({
            ny: b.ny,
            Mo: b.Mo,
            user: b.user,
            Z: b.Z,
            Zr: b.Zr,
            Mq: b.Mq,
            Fw: b.Fw,
            bo: D("segmentWriteKey", a),
            Sc: b.Sc
        })
    };

    function kl(a, b) {
        this.config = a;
        this.Ci = this.xe = null;
        this.GF = [];
        this.ready = !1;
        this.ga = b
    }

    function ll(a, b) {
        b = ml(ml(ml(ml(ml(ml(new nl, "id", b.G()), "username", b.rg()), "personalBrand", b.Py()), "displayName", b.Tb()), "largeAvatarUrl", b.SS("200")), "roles", b.vr() && b.vr().join(", "));
        return ml(ml(b, "user_cohort", a.config.Mq), "country_code", a.config.Sc)
    }

    function ol(a, b) {
        var c = Object.assign({}, b);
        a.xe && (c.design = a.xe);
        c.experience = a.config.ny;
        a.config.Mo.forEach(function (a, b) {
            c["Experiment:" + b] = a
        });
        a.config.Z && (c.brand = a.config.Z);
        null != a.config.Zr && (c.personal = a.config.Zr);
        null != a.config.Mq && (c.cohort = a.config.Mq);
        a.config.Fw && (c.tier = a.config.Fw);
        null != a.config.Sc && (c.country_code = a.config.Sc);
        pl(c);
        return c
    }

    function pl(a) {
        try {
            var b = window.crypto || window.msCrypto,
                c = new Uint8Array(16);
            b.getRandomValues(c);
            a.insert_id = btoa(String.fromCharCode.apply(null, c))
        } catch (d) {}
    }
    kl.prototype.Cr = function () {
        return this.ready
    };

    function ql(a, b) {
        var c = window.lastUserTraits || (new nl).qk(),
            d = ml(new nl, "__user", a);
        a = a !== c.get("__user");
        if (b && rl(b)) {
            for (var e = ka(b), g = e.next(); !g.done; g = e.next()) {
                var h = ka(g.value),
                    g = h.next().value,
                    h = h.next().value;
                a = a || h !== c.get(g)
            }
            c = ka(b.keys());
            for (e = c.next(); !e.done; e = c.next())
                e = e.value,
                ml(d, e, b.get(e))
        }
        a && (window.lastUserTraits = d.qk());
        return a
    }

    function sl(a, b) {
        var c = window.lastUserTraits || (new nl).qk();
        a = ml(new nl, "__user", a);
        if (c && rl(c))
            for (var d = ka(c.keys()), e = d.next(); !e.done; e = d.next())
                e = e.value,
                "__user" !== e && ml(a, e, c.get(e));
        if (b && rl(b))
            for (c = ka(b.keys()),
                e = c.next(); !e.done; e = c.next())
                d = e.value,
                ml(a, d, b.get(d));
        window.lastUserTraits = a.qk()
    }

    function rl(a) {
        Ba(a instanceof Map, "Could not convert traits to an object; traits value not considered a Map instance");
        return !0
    }

    function tl(a, b, c, d, e, g) {
        var h = {};
        h.type = b;
        h.section = c;
        h.subsection = d;
        h.location = e;
        g && Object.assign(h, g);
        a.track("button_click", h)
    }

    function ul(a, b, c) {
        a.track("tab_clicked", {
            type: b,
            location: c
        })
    }

    function vl(a, b) {
        var c = T;
        c.xe = a;
        c.Ci = b;
        c.track("design_open", {
            design: c.xe,
            source: "editor",
            template: c.Ci
        })
    }

    function wl(a) {
        a.track("design_shared", {
            design: a.xe,
            template: a.Ci,
            medium: "email",
            location: "publish",
            edit_access: void 0
        })
    }

    function xl(a, b) {
        a.Ci ? a.Ga(X(b, "template", a.Ci)) : a.Ga(b)
    }

    function yl(a, b, c, d) {
        a.track("link_click", {
            type: b,
            section: "editor",
            subsection: c,
            location: d
        })
    }

    function zl(a, b, c, d) {
        a.track("dialog_close", {
            type: b,
            section: "editor",
            subsection: c,
            location: d
        })
    }

    function Al(a, b, c, d) {
        b = {
            type: b,
            category: "Saving Error Notified",
            action: b,
            age: c
        };
        d && (b.label = d);
        a.track("design_save_error", b)
    }

    function Bl(a, b) {
        a.track("broken_layout_used", {
            id: b || "unknown"
        })
    }

    function Cl(a) {
        T.track(a, {
            design: ub.Fc(),
            section: "editor",
            subsection: "toolbar",
            location: "top"
        })
    }

    function Dl(a) {
        T.track("chart_insert", {
            chart_type: a
        })
    }

    function El(a, b, c) {
        var d = T;
        a = {
            element_type: a
        };
        b && (a.media_id = b);
        c && (a.media_type = c);
        d.track("element_used", a)
    }

    function Fl(a, b, c, d) {
        T.track("design_renderability_check", {
            design: a,
            renderable: b,
            warnings: c,
            error: d
        })
    }

    function Gl(a, b, c, d, e, g) {
        a.track(b, {
            type: c,
            section: d,
            subsection: e,
            location: g
        })
    }
    kl.prototype.zoom = function (a, b, c, d, e) {
        this.track("zoom", {
            type: a,
            section: b,
            subsection: c,
            location: d,
            value: e
        })
    };
    kl.prototype.Ga = function (a) {
        return this.track(a.name, a.IN)
    };

    function Hl(a) {
        this.name = a;
        this.IN = {}
    }

    function X(a, b, c) {
        if (a.IN[b])
            throw Error("duplicated property");
        a.IN[b] = c;
        return a
    }

    function nl() {
        this.items = []
    }

    function ml(a, b, c) {
        a.items.push({
            key: b,
            value: c
        });
        return a
    }
    nl.prototype.qk = function () {
        return new Map(this.items.map(function (a) {
            return [a.key, a.value]
        }))
    };

    function Il(a, b) {
        kl.call(this, a, b);
        this.ya = null
    }
    t(Il, kl);

    function Jl(a) {
        return new Il(a, function (a, c, d) {
            window.console.log("Google track: ", a, c, d)
        })
    }
    f = Il.prototype;
    f.track = function (a, b) {
        window.console.log("analytics:track", this.ya, a, ol(this, b));
        return P.resolve()
    };
    f.identify = function (a, b, c) {
        this.ya = a;
        ql(a, b) && (sl(a, b),
            window.console.log("analytics:identify", a, b, c));
        return P.resolve()
    };
    f.alias = function (a) {
        window.console.log("analytics:alias", this.ya, a);
        this.ya = a
    };
    f.set = function (a) {
        window.console.log("analytics:set", this.ya, a);
        return P.resolve()
    };
    f.union = function (a) {
        window.console.log("analytics:union", this.ya, a)
    };

    function Kl(a, b, c) {
        kl.call(this, a, c);
        this.aa = b;
        this.readyState = "PENDING";
        this.y5 = 3E4;
        this.Du = this.LE = null
    }
    t(Kl, kl);

    function Ll(a, b) {
        var c = Nl(),
            d = new Kl(a, Rk, b);
        Ol(d).then(function () {
            for (d.ready = !0; d.GF && 0 < d.GF.length;)
                d.GF.shift()();
            d.GF = null
        }).catch(function () {});
        window.segmentAnalyticsLoaded || (window.segmentAnalyticsLoaded = !0,
            Ol(d).then(function () {
                var b = {
                    path: location.pathname,
                    url: location.href
                };
                Nl().page(b, {
                    integrations: {
                        Leanplum: !1
                    }
                });
                a.user || (b = window.Appcues || null) && b.anonymous();
                b = (new UAParser).getResult();
                ml(ml(new nl, "Most recent browser", b.browser.name + " " + b.browser.version), "timezone", (new Date).getTimezoneOffset() / -60).qk()
            }).catch(function () {}),
            c.load(a.bo));
        return d
    }

    function Nl() {
        Da("undefined" !== typeof window.analytics, "SegmentAnalytics: window['analytics'] not available");
        return window.analytics
    }
    f = Kl.prototype;
    f.track = function (a, b) {
        var c = this;
        return Ol(this).then(function (d) {
            return new P(function (e) {
                d.track(a, ol(c, b), {
                    integrations: {
                        Leanplum: !1
                    }
                }, e)
            })
        }).catch(function () {})
    };
    f.identify = function (a, b, c) {
        var d = this;
        return Ol(this).then(function (e) {
            if (!ql(a, b))
                return d.LE || P.resolve();
            d.LE = new P(function (g) {
                sl(a, b);
                e.identify(a, Pl(b), c, function () {
                    d.LE = null;
                    g()
                })
            });
            return d.LE
        }).catch(function () {})
    };
    f.alias = function (a) {
        Ol(this).then(function (b) {
            return b.alias(a)
        }).catch(function () {})
    };
    f.set = function (a) {
        return Ol(this).then(function (b) {
            return new P(function (c) {
                return b.identify(Pl(a), c)
            })
        }).catch(function () {})
    };
    f.union = function () {};

    function Pl(a) {
        var b = {};
        if (a && rl(a)) {
            a = ka(a);
            for (var c = a.next(); !c.done; c = a.next()) {
                var d = ka(c.value),
                    c = d.next().value,
                    d = d.next().value;
                b[c] = d
            }
        }
        return b
    }

    function Ol(a) {
        var b = Nl();
        if (null !== a.Du)
            return a.Du;
        if ("SUCCESS" === a.readyState)
            return P.resolve(b);
        if ("FAILURE" === a.readyState)
            return P.reject(Error("Segment initialization failed"));
        a.Du = new P(function (c, d) {
            var e = a.aa.setTimeout(function () {
                a.readyState = "FAILURE";
                a.Du = null;
                d(Error("Segment initialization failed"))
            }, a.y5);
            b.ready(function () {
                "FAILURE" !== a.readyState && (a.aa.clearTimeout(e),
                    a.readyState = "SUCCESS",
                    a.Du = null,
                    c(Nl()))
            })
        });
        return a.Du
    };

    function Ql(a, b) {
        Nl();
        if (a instanceof hl)
            b = Jl(a);
        else if (a instanceof il)
            b = Ll(a, b);
        else
            throw Error("Invalid analytics config");
        a.user && b.identify(a.user, null);
        return b
    }

    function Rl() {
        var a = Ja(window.analyticsConfig),
            b = D("impl", a),
            c = window.ga || function () {};
        switch (b) {
            case "console":
                return Ql(new hl(gl(a)), c);
            case "segment":
                return Ql(jl(a), c);
            default:
                throw Error('No such analytics type: "' + b + '"');
        }
    };

    function Sl() {
        return Tl("file_menu", "resize_button", "document_resize")
    }

    function Tl(a, b, c) {
        a = X(X(X(new Hl("upgrade_cta_clicked"), "section", "editor"), "subsection", a), "location", b);
        c && X(a, "variant", c);
        return a
    }

    function Ul(a) {
        return X(X(X(new Hl("upgrade_dialog_cta_clicked"), "section", a), "subsection", "upgrade_dialog"), "location", "bottom")
    }

    function Vl(a, b) {
        return X(X(X(new Hl("upgrade_dialog_loaded"), "section", a), "subsection", "upgrade_dialog"), "can_upgrade", b)
    };

    function Wl(a, b) {
        var c = Xl;
        return X(X(X(new Hl("team_member_invited"), "email_invited", a), "role_invited", c), "location", b)
    };

    function Yl() {}
    Yl.prototype.load = function () {
        window.console.log("fullstory:load");
        return P.resolve()
    };
    Yl.prototype.identify = function (a, b) {
        window.console.log("fullstory:identify", a, b)
    };

    function Zl() {}
    Zl.prototype.load = function () {
        if (window.fullstoryLoadPromise)
            return window.fullstoryLoadPromise;
        window.fullstoryLoadPromise = new P(function (a) {
            window._fs_ready = function () {
                FS.disableConsole();
                delete window._fs_ready;
                a()
            }
        });
        $("\n\x3cscript\x3e\nwindow['_fs_debug'] \x3d false;\nwindow['_fs_host'] \x3d 'fullstory.com';\nwindow['_fs_org'] \x3d '6497R';\nwindow['_fs_namespace'] \x3d 'FS';\n(function(m,n,e,t,l,o,g,y){\n    if (e in m \x26\x26 m.console \x26\x26 m.console.log) { m.console.log('FullStory namespace conflict. Please set window[\"_fs_namespace\"].'); return;}\n    g\x3dm[e]\x3dfunction(a,b){g.q?g.q.push([a,b]):g._api(a,b);};g.q\x3d[];\n    o\x3dn.createElement(t);o.async\x3d1;o.src\x3d'https://'+_fs_host+'/s/fs.js';\n    y\x3dn.getElementsByTagName(t)[0];y.parentNode.insertBefore(o,y);\n    g.identify\x3dfunction(i,v){g(l,{uid:i});if(v)g(l,v)};g.setUserVars\x3dfunction(v){g(l,v)};\n    g.identifyAccount\x3dfunction(i,v){o\x3d'account';v\x3dv||{};v.acctId\x3di;g(o,v)};\n    g.clearUserCookie\x3dfunction(c,d,i){if(!c || document.cookie.match('fs_uid\x3d[`;`]*`[`;`]*`[`;`]*`')){\n    d\x3dn.domain;while(1){n.cookie\x3d'fs_uid\x3d;domain\x3d'+d+\n    ';path\x3d/;expires\x3d'+new Date(0).toUTCString();i\x3dd.indexOf('.');if(i\x3c0)break;d\x3dd.slice(i+1)}}};\n})(window,document,window['_fs_namespace'],'script','user');\n\x3c/script\x3e\n").appendTo("head");
        return window.fullstoryLoadPromise
    };
    Zl.prototype.identify = function (a, b) {
        FS.identify(a, {
            displayName: b.displayName,
            email: b.email
        })
    };

    function $l() {
        var a = Ja(window.analyticsConfig),
            a = D("fullstoryImpl", a);
        switch (a) {
            case "console":
                return new Yl;
            case "http":
                return new Zl;
            default:
                throw Error('No such fullstory api type: "' + a + '"');
        }
    };

    function am() {
        return {
            UG: function (a) {
                return new P(function (b) {
                    function c(b) {
                        P.resolve(a(d)).then(function () {
                            e || P.delay(b).then(function () {
                                c(Math.min(1.6 * b, 3E4))
                            })
                        })
                    }

                    function d(a) {
                        b(a);
                        e = !0
                    }
                    Ba(!0, "initialInterval must be positive");
                    Ba(!0, "maxInterval must be greater than initialInterval");
                    Ba(!0, "increaseFactor must not be less than 1");
                    var e = !1;
                    c(1E3)
                })
            }
        }
    };

    function bm() {
        return "/brand/members"
    };

    function U(a, b, c, d) {
        this.left = a;
        this.top = b;
        this.width = c;
        this.height = d
    }

    function cm(a) {
        return a ? new U(a.left || 0, a.top || 0, a.width || 0, a.height || 0) : dm.clone()
    }

    function Qg(a) {
        return cm({
            left: a.left,
            top: a.top,
            width: a.width,
            height: a.height
        })
    }

    function em(a, b) {
        a = a || null;
        b = b || null;
        return null === a && null === b ? !0 : null === a || null === b ? !1 : a.height === b.height && a.left === b.left && a.top === b.top && a.width === b.width
    }
    var dm = new U(0, 0, 0, 0);
    f = U.prototype;
    f.serialize = function () {
        return {
            left: this.left,
            top: this.top,
            width: this.width,
            height: this.height
        }
    };
    f.clone = function () {
        return new U(this.left, this.top, this.width, this.height)
    };

    function fm(a) {
        var b = isFinite(a.left) && isFinite(a.top) && isFinite(a.width) && isFinite(a.height);
        return !(isNaN(a.left) || isNaN(a.top) || isNaN(a.width) || isNaN(a.height)) && b
    }
    f.Y = function () {
        return this.left
    };
    f.nc = U.prototype.Y;
    f.N = function () {
        return this.top
    };
    f.xc = U.prototype.N;
    f.kb = function () {
        return this.left + this.width
    };
    f.Ld = U.prototype.kb;
    f.Ha = function () {
        return this.top + this.height
    };
    f.ud = U.prototype.Ha;
    f.D = function () {
        return this.width
    };
    f.eh = U.prototype.D;
    f.F = function () {
        return this.height
    };
    f.dh = U.prototype.F;
    f.cp = function () {
        return {
            width: this.width,
            height: this.height
        }
    };

    function gm(a) {
        return {
            x: a.Vk(),
            y: a.Wk()
        }
    }
    f.Vk = function () {
        return this.left + this.width / 2
    };
    f.Wk = function () {
        return this.top + this.height / 2
    };
    f.wb = function (a) {
        this.left = a;
        return this
    };
    f.rb = function (a) {
        this.top = a;
        return this
    };
    f.setPosition = function (a, b) {
        this.left = a;
        this.top = b;
        return this
    };
    f.za = function (a) {
        this.width = a;
        return this
    };
    f.oa = function (a) {
        this.height = a;
        return this
    };
    f.setSize = function (a, b) {
        this.width = a;
        this.height = b;
        return this
    };

    function hm(a) {
        return a.width / a.height
    }
    f.translate = function (a, b) {
        this.left += a;
        this.top += b;
        return this
    };
    f.scale = function (a, b) {
        void 0 === b && (b = a);
        this.left *= a;
        this.top *= b;
        this.width *= a;
        this.height *= b;
        return this
    };

    function im(a, b, c, d, e) {
        a.translate(-b, -c);
        a.scale(d, e);
        a.translate(b, c)
    }

    function jm(a, b) {
        a.left -= b;
        a.top -= b;
        a.width += 2 * b;
        a.height += 2 * b
    }

    function km(a, b, c) {
        a.width += b;
        a.height += c;
        return a
    }

    function om(a, b) {
        a.left = b.left - (a.width - b.width) / 2;
        a.top = b.top - (a.height - b.height) / 2;
        return a
    }

    function pm(a, b) {
        var c = hm(a);
        hm(a) > hm(b) ? (a.height = b.height,
            a.width = c * a.height) : (a.width = b.width,
            a.height = a.width / c);
        om(a, b);
        return a
    }

    function $g(a, b) {
        var c = hm(a);
        hm(a) < hm(b) ? (a.height = b.height,
            a.width = c * a.height) : (a.width = b.width,
            a.height = a.width / c);
        om(a, b);
        return a
    }
    f.round = function () {
        this.left = Math.round(this.left);
        this.top = Math.round(this.top);
        this.width = Math.round(this.width);
        this.height = Math.round(this.height);
        return this
    };

    function Sg(a, b) {
        return a.kb() <= b.Y() || a.Ha() <= b.N() || a.Y() >= b.kb() || a.N() >= b.Ha() ? !1 : !0
    }
    f.touches = function (a) {
        return .25 > Math.abs(this.N() - a.Ha()) || .25 > Math.abs(this.Ha() - a.N()) ? this.Y() <= a.kb() && this.kb() >= a.Y() : .25 > Math.abs(this.kb() - a.Y()) || .25 > Math.abs(this.Y() - a.kb()) ? this.N() <= a.Ha() && this.Ha() >= a.N() : !1
    };

    function qm(a, b) {
        return a.Y() <= b.Y() && a.N() <= b.N() && a.kb() >= b.kb() && a.Ha() >= b.Ha()
    }

    function rm(a, b) {
        a.kb() > b.kb() && a.translate(b.kb() - a.kb(), 0);
        a.Y() < b.Y() && a.translate(b.Y() - a.Y(), 0);
        a.Ha() > b.Ha() && a.translate(0, b.Ha() - a.Ha());
        a.N() < b.N() && a.translate(0, b.N() - a.N())
    }

    function sm(a, b, c) {
        0 != (c & 1) && a.wb(b.D() - a.kb());
        0 != (c & 2) && a.rb(b.F() - a.Ha());
        return a
    }

    function tm(a, b, c) {
        c = um(c);
        a.clone();
        var d, e;
        if (em(a, b))
            return 0;
        if (0 <= c && 90 > c) {
            var g = c * Math.PI / 180;
            c = a.clone();
            d = b.Ha() - c.N();
            e = d * Math.tan(g);
            c.translate(e, d);
            if (c.touches(b))
                return -(d / Math.cos(g));
            c = a.clone();
            e = b.Y() - c.kb();
            d = e / Math.tan(g);
            c.translate(e, d);
            if (c.touches(b))
                return d / Math.cos(g)
        } else if (90 <= c && 180 > c) {
            g = (c - 90) * Math.PI / 180;
            c = a.clone();
            d = b.Y() - c.kb();
            e = d * Math.tan(g);
            c.translate(d, e);
            if (c.touches(b))
                return d / Math.cos(g);
            c = a.clone();
            e = b.N() - c.Ha();
            d = e / Math.tan(g);
            c.translate(d, e);
            if (c.touches(b))
                return d / Math.cos(g)
        } else if (180 <= c && 270 > c) {
            g = (c - 180) * Math.PI / 180;
            c = a.clone();
            d = b.N() - c.Ha();
            e = d * Math.tan(g);
            c.translate(e, d);
            if (c.touches(b))
                return d / Math.cos(g);
            c = a.clone();
            e = b.kb() - c.Y();
            d = e / Math.tan(g);
            c.translate(e, d);
            if (c.touches(b))
                return -(d / Math.cos(g))
        } else if (270 <= c && 360 > c) {
            g = (c - 270) * Math.PI / 180;
            c = a.clone();
            d = b.kb() - c.Y();
            e = d * Math.tan(g);
            c.translate(d, e);
            if (c.touches(b))
                return -(d / Math.cos(g));
            c = a.clone();
            e = b.Ha() - c.N();
            d = e / Math.tan(g);
            c.translate(d, e);
            if (c.touches(b))
                return -(d / Math.cos(g))
        }
        return Infinity
    };
    var vm = {
        Page1: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }]
            }]
        },
        Page2: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page3: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page4: {
            items: [{
                type: "item"
            }, {
                type: "item"
            }]
        },
        Page5: {
            items: [{
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }]
        },
        Page6: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page7: {
            items: [{
                type: "item",
                height: 60
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page8: {
            items: [{
                type: "item",
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "item"
                }]
            }]
        },
        Page8_1: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page8_2: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }]
            }]
        },
        Page9: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page10: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 50
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page11: {
            items: [{
                type: "item",
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page12: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "item"
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "item"
                }]
            }]
        },
        Page13: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page14: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }],
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page15: {
            items: [{
                type: "item",
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page16: {
            items: [{
                type: "item",
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }],
                    width: 33.33
                }, {
                    type: "item"
                }]
            }]
        },
        Page17: {
            items: [{
                type: "item",
                height: 40
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page18: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page19: {
            items: [{
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }]
        },
        Page20: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page21: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page22: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "item"
                    }],
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page23: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "item"
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page24: {
            items: [{
                type: "item",
                height: 75
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page25: {
            items: [{
                type: "item"
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "item"
                }]
            }]
        },
        Page27: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page28: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page29: {
            items: [{
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }]
        },
        Page30: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page31: {
            items: [{
                type: "item",
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page32: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }]
                }, {
                    type: "item"
                }]
            }]
        },
        Page33: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "item"
                }]
            }]
        },
        Page34: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }],
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "item"
                    }],
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page35: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page36: {
            items: [{
                type: "item"
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page37: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 75
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page38: {
            items: [{
                type: "item"
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page39: {
            items: [{
                type: "item",
                height: 80
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page40: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page41: {
            items: [{
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }, {
                type: "item"
            }]
        },
        Page42: {
            items: [{
                type: "item"
            }, {
                type: "item"
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page43: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }, {
                        type: "item"
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }]
                }]
            }]
        },
        Page44: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page45: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page46: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page47: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page48: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page49: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 25
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }]
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 25
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page50: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 75
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page51: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "item"
            }]
        },
        Page52: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page53: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page54: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "item",
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page55: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page56: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 40
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 20
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 20
                }, {
                    type: "item",
                    width: 60
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page57: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page58: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }]
            }]
        },
        Page59: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }],
                height: 60
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page60: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 33.33
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 25
                    }, {
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "item",
                        height: 25
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page61: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 16.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page62: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page63: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 80
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 80
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page64: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 20
            }, {
                type: "item",
                height: 60
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page65: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page66: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 40
                }, {
                    type: "item",
                    width: 20
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }],
                    width: 20
                }, {
                    type: "item",
                    width: 60
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }]
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 40
                }, {
                    type: "item",
                    width: 20
                }, {
                    type: "item"
                }]
            }]
        },
        Page67: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page68: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 16.67
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 75
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page69: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 75
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 40
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 40
                }, {
                    type: "item",
                    width: 40
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page70: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page71: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 20
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 75
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 60
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page72: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 33.33
                    }, {
                        type: "item"
                    }],
                    width: 50
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page73: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page74: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page75: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page76: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page77: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 16.67
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page78: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 30
                }, {
                    type: "item",
                    width: 45
                }, {
                    type: "item"
                }],
                height: 30
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 15
                }, {
                    type: "item",
                    width: 70
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 45
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 30
                }, {
                    type: "item",
                    width: 45
                }, {
                    type: "item"
                }]
            }]
        },
        Page79: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page80: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page81: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }, {
                        type: "item"
                    }],
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "columns",
                        children: [{
                            type: "item",
                            width: 50
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 33.33
                }, {
                    type: "item"
                }],
                height: 40
            }, {
                type: "item",
                height: 40
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 16.67
                }, {
                    type: "item",
                    width: 16.67
                }, {
                    type: "item",
                    width: 16.67
                }, {
                    type: "item",
                    width: 16.67
                }, {
                    type: "item",
                    width: 16.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page82: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item",
                            width: 50
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }],
                            width: 25
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }]
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item",
                            width: 50
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }],
                            width: 25
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }]
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page83: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 20
                }, {
                    type: "item",
                    width: 60
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page84: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page86: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 16.67
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page87: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "columns",
                        children: [{
                            type: "item",
                            width: 50
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }],
                            width: 25
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }]
                        }]
                    }]
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }],
                height: 75
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 25
                }, {
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page88: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 12.5
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 12.5
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 12.5
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 12.5
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 25
                    }, {
                        type: "item",
                        height: 50
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page89: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page90: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page91: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 33.33
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 75
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }],
                            width: 33.33
                        }, {
                            type: "item"
                        }]
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page92: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 66.67
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 33.33
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 33.33
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page93: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 20
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 20
                }, {
                    type: "item",
                    width: 60
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }],
                height: 60
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page94: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }],
                height: 16.67
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 25
                    }, {
                        type: "item",
                        height: 25
                    }, {
                        type: "item",
                        height: 25
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item",
                    width: 66.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 25
                    }, {
                        type: "item",
                        height: 25
                    }, {
                        type: "item",
                        height: 25
                    }, {
                        type: "item"
                    }]
                }],
                height: 66.67
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page95: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 16.67
                }, {
                    type: "item"
                }]
            }]
        },
        Page96: {
            items: [{
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }]
                        }]
                    }, {
                        type: "item"
                    }]
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "rows",
                            children: [{
                                type: "item"
                            }, {
                                type: "item"
                            }]
                        }]
                    }]
                }],
                height: 33.33
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "columns",
                        children: [{
                            type: "rows",
                            children: [{
                                type: "columns",
                                children: [{
                                    type: "rows",
                                    children: [{
                                        type: "item"
                                    }, {
                                        type: "item"
                                    }]
                                }, {
                                    type: "item"
                                }]
                            }, {
                                type: "item"
                            }]
                        }, {
                            type: "item"
                        }]
                    }]
                }, {
                    type: "item"
                }]
            }]
        },
        Page97: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page98: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }],
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page99: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }]
                }]
            }]
        },
        Page100: {
            items: [{
                type: "columns",
                children: [{
                    type: "item",
                    width: 50
                }, {
                    type: "rows",
                    children: [{
                        type: "item",
                        height: 50
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }]
                    }],
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "columns",
                        children: [{
                            type: "item"
                        }, {
                            type: "item"
                        }],
                        height: 25
                    }, {
                        type: "item"
                    }]
                }],
                height: 50
            }, {
                type: "columns",
                children: [{
                    type: "item",
                    width: 25
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }],
                height: 25
            }, {
                type: "columns",
                children: [{
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "rows",
                    children: [{
                        type: "item"
                    }, {
                        type: "item"
                    }],
                    width: 12.5
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item",
                    width: 25
                }, {
                    type: "item"
                }]
            }]
        },
        Page101: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page102: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page103: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        },
        Page104: {
            items: [{
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }, {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }, {
                    type: "item"
                }]
            }]
        }
    };
    var wm = {
        BARCHART1: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "BAR",
                bar: {
                    spacing: .2
                },
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 20, 30, 40, 50]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#2de6d5",
                    to: "#0094eb",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        BARCHART2: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "BAR",
                bar: {
                    spacing: .45
                },
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 20, 30, 40, 50]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#fff753",
                    to: "#00cea4",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        BARCHART3: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "BAR",
                bar: {
                    spacing: .7
                },
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 20, 30, 40, 50]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#ff9173",
                    to: "#a149a6",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        BARCHART4: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "BAR",
                bar: {
                    spacing: .2
                },
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 20, 30, 40, 50]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#0094eb",
                    to: "#0094eb",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        BARCHART5: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "BAR",
                bar: {
                    spacing: .45
                },
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 20, 30, 40, 50]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#00cea4",
                    to: "#00cea4",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        BARCHART6: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "BAR",
                bar: {
                    spacing: .7
                },
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 20, 30, 40, 50]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#c94f98",
                    to: "#c94f98",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        LINECHART1: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "LINE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 22, 23, 40, 45]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#2de6d5",
                    to: "#0094eb",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        LINECHART2: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "LINE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 22, 23, 40, 45]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#fff753",
                    to: "#00cea4",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        LINECHART3: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "LINE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 22, 23, 40, 45]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#ff9173",
                    to: "#a149a6",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        LINECHART4: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "LINE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 22, 23, 40, 45]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#0094eb",
                    to: "#0094eb",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        LINECHART5: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "LINE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 22, 23, 40, 45]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#00cea4",
                    to: "#00cea4",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        LINECHART6: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "LINE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 22, 23, 40, 45]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#c94f98",
                    to: "#c94f98",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        PIECHART1: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "PIE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 10, 10, 10, 10]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#2de6d5",
                    to: "#596cb3",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        PIECHART2: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "PIE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 10, 10, 10, 10]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#fff753",
                    to: "#00ada9",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        PIECHART3: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "PIE",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 10, 10, 10, 10]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#ff9173",
                    to: "#684092",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        DONUTCHART1: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "DONUT",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 10, 10, 10, 10]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#2de6d5",
                    to: "#596cb3",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        DONUTCHART2: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "DONUT",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 10, 10, 10, 10]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#fff753",
                    to: "#00ada9",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        },
        DONUTCHART3: {
            left: 0,
            top: 0,
            width: 640,
            height: 480,
            type: "group",
            generatorType: "CHART",
            chart: {
                chartType: "DONUT",
                data: {
                    columns: [{
                        cells: ["Item 1", "Item 2", "Item 3", "Item 4", "Item 5"]
                    }, {
                        cells: [10, 10, 10, 10, 10]
                    }]
                },
                labelColumn: 0,
                coloringType: "INTERPOLATE",
                interpolation: {
                    from: "#ff9173",
                    to: "#684092",
                    colorSpace: "HCL"
                },
                labelTextStyle: {
                    fontFamily: J.Rd,
                    fontSize: J.Sd
                }
            }
        }
    };

    function xm(a) {
        a && a.id && null != a.version && (this.id = a.id,
            this.version = a.version)
    }

    function ym(a) {
        return zm(new xm(a.layout), a)
    }

    function zm(a, b) {
        $.extend(!0, a, _.omit(b, "layout"));
        return a
    }

    function Am(a, b) {
        $.extend(!0, a, _.omit(b.content.pages[0], "layout"));
        return a
    }

    function Bm(a, b, c) {
        if (a = a.elements && a.elements[0]) {
            var d = a.spacing;
            void 0 === d && (d = J.dC);
            _.extend(a, Cm(b, c, d, !1).serialize())
        }
    }
    f = xm.prototype;
    f.getName = function () {
        return this.name
    };
    f.xg = function () {
        var a = {
                elements: this.elements,
                width: this.width,
                height: this.height,
                dpi: this.dpi
            },
            b = this.serialize();
        if (b && a.elements) {
            var c = (new Dm(b)).st().serialize();
            a.elements.forEach(function (a) {
                a.origin = c;
                a.contents && a.contents.forEach(function (a) {
                    a.origin = c
                })
            })
        }
        return a
    };
    f.clone = function () {
        return zm(new xm(this.serialize()), this.xg())
    };
    f.serialize = function () {
        return this.id && this.version ? {
            id: this.id,
            version: this.version
        } : null
    };
    f.za = function (a) {
        this.width = a
    };
    f.oa = function (a) {
        this.height = a
    };
    f.D = function () {
        return this.width
    };
    f.F = function () {
        return this.height
    };

    function Em(a) {
        function b(a) {
            a.mediaId && c.push(new Fm({
                id: a.mediaId,
                version: a.mediaVersion
            }));
            a.fontMedia && c.push(Gm(a.fontMedia));
            Array.isArray(a.htmlFontMedia) && (c = c.concat(a.htmlFontMedia.map(Gm)))
        }
        var c = [];
        a.elements && a.elements.length && a.elements.forEach(function (a) {
            b(a);
            a.contents && a.contents.length && a.contents.forEach(b)
        });
        return c
    };

    function Hm(a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        b.length || (b = [1, 0, 0, 0, 1, 0, 0, 0, 1]);
        this.m = new Float32Array(b)
    }

    function Im(a) {
        var b = new Hm;
        b.m[2] = a[0];
        b.m[5] = a[1];
        return b
    }

    function Jm(a) {
        return [a.m[2], a.m[5]]
    }
    f = Hm.prototype;
    f.multiply = function (a) {
        var b = new Hm;
        b.m[0] = this.m[0] * a.m[0] + this.m[1] * a.m[3] + this.m[2] * a.m[6];
        b.m[1] = this.m[0] * a.m[1] + this.m[1] * a.m[4] + this.m[2] * a.m[7];
        b.m[2] = this.m[0] * a.m[2] + this.m[1] * a.m[5] + this.m[2] * a.m[8];
        b.m[3] = this.m[3] * a.m[0] + this.m[4] * a.m[3] + this.m[5] * a.m[6];
        b.m[4] = this.m[3] * a.m[1] + this.m[4] * a.m[4] + this.m[5] * a.m[7];
        b.m[5] = this.m[3] * a.m[2] + this.m[4] * a.m[5] + this.m[5] * a.m[8];
        b.m[6] = this.m[6] * a.m[0] + this.m[7] * a.m[3] + this.m[8] * a.m[6];
        b.m[7] = this.m[6] * a.m[1] + this.m[7] * a.m[4] + this.m[8] * a.m[7];
        b.m[8] = this.m[6] * a.m[2] + this.m[7] * a.m[5] + this.m[8] * a.m[8];
        this.m = b.m;
        return this
    };
    f.transform = function (a) {
        var b = new Hm;
        b.m = this.m;
        this.m = a.m;
        return this.multiply(b)
    };
    f.translate = function (a, b) {
        var c = new Hm;
        c.m[2] = a;
        c.m[5] = b;
        return this.transform(c)
    };
    f.reflect = function () {
        var a = new Hm;
        a.m[0] = -1;
        a.m[4] = -1;
        return this.transform(a)
    };
    f.scale = function (a, b) {
        var c = new Hm;
        c.m[0] = a;
        c.m[4] = void 0 === b ? a : b;
        return this.transform(c)
    };

    function Km(a, b) {
        var c = new Hm,
            d = b * Math.PI / 180;
        b = Math.cos(d);
        d = Math.sin(d);
        c.m[0] = b;
        c.m[1] = d;
        c.m[2] = -0 * b - 0 * d;
        c.m[3] = -1 * d;
        c.m[4] = b;
        c.m[5] = -0 * b + 0 * d;
        return a.transform(c)
    }
    f.rotate = function (a) {
        if (0 === a || 360 === Math.abs(a))
            return this;
        var b = new Hm,
            c = a * Math.PI / 180;
        a = Math.cos(c);
        c = Math.sin(c);
        b.m[0] = a;
        b.m[1] = c;
        b.m[3] = -1 * c;
        b.m[4] = a;
        return this.transform(b)
    };
    f.toArray = function () {
        return Array.prototype.slice.call(this.m)
    };

    function Lm(a, b, c) {
        return Math.min(Math.max(a, b || 0), c || 1)
    }

    function Mm(a, b, c) {
        c = Lm(c);
        var d = a + c * (b - a);
        a = Nm(a, b, c);
        0 < a && 21 > a && (d = parseFloat(d.toPrecision(a)));
        return d
    }

    function Nm(a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = 0;
        b.forEach(function (a) {
            a = a.toString().split(".");
            d += a[0].length;
            2 === a.length && (d += a[1].length)
        });
        return d
    };

    function Om() {
        this.yb = [255, 0, 255];
        this.Li = [300, 100, 50]
    }

    function Pm(a, b, c, d) {
        a.Li = [b, c, d];
        var e;
        e = b / 60;
        c /= 100;
        d /= 100;
        b = Math.floor(e);
        var g = e - b;
        e = d * (1 - c);
        var h = d * (1 - g * c);
        c = d * (1 - (1 - g) * c);
        b %= 6;
        a.yb = [Math.round(255 * [d, h, e, e, c, d][b]), Math.round(255 * [c, d, d, h, e, e][b]), Math.round(255 * [e, e, c, d, d, h][b])];
        return a
    }
    f = Om.prototype;
    f.$S = function () {
        return this.Li[1]
    };
    f.oc = function () {
        return this.Li[2]
    };
    f.ak = function (a) {
        return Pm(this, this.Li[0], this.Li[1], a)
    };

    function Qm(a, b, c, d) {
        a.yb = [b, c, d];
        a.Li = Rm(b, c, d);
        return a
    }

    function Sm(a, b, c) {
        var d = new Om;
        a = a * Math.PI / 180;
        b = [c, Math.cos(a) * b, Math.sin(a) * b];
        b = Tm(b[0], b[1], b[2]);
        d.yb = Um(b[0], b[1], b[2]);
        d.Li = Rm(d.yb[0], d.yb[1], d.yb[2]);
        return d
    }

    function Vm(a) {
        var b = new Om;
        if (!/^#?[0-9a-f]{1,6}$/i.test(a))
            throw new SyntaxError('Invalid hexadecimal color: "' + a + '"');
        "#" == a.charAt(0) && (a = a.slice(1));
        var c = Math.ceil(a.length / 3);
        return Qm(b, Wm(a, 0 * c, c), Wm(a, 1 * c, c), Wm(a, 2 * c, c))
    }

    function Xm(a) {
        return 0 == (a.yb[0] & -256 | a.yb[1] & -256 | a.yb[2] & -256)
    }
    f.Ca = function () {
        return "#" + (256 + this.yb[0]).toString(16).slice(-2) + (256 + this.yb[1]).toString(16).slice(-2) + (256 + this.yb[2]).toString(16).slice(-2)
    };

    function Ym(a) {
        a = Zm(a.yb[0], a.yb[1], a.yb[2]);
        a = $m(a[0], a[1], a[2]);
        var b = a[1],
            c = a[2],
            d = Math.sqrt(b * b + c * c),
            b = (180 * Math.atan2(c, b) / Math.PI + 360) % 360,
            b = 0 === Math.round(1E4 * d) ? NaN : b;
        return [b, d, a[0]]
    }
    f.clone = function () {
        var a = new Om;
        a.yb = this.yb;
        a.Li = this.Li;
        return a
    };
    f.ku = function () {
        return Math.round(Math.sqrt(.241 * this.yb[0] * this.yb[0] + .691 * this.yb[1] * this.yb[1] + .068 * this.yb[2] * this.yb[2]))
    };

    function an(a) {
        return Pm(new Om, a.Li[0], a.Li[1], 100)
    }

    function bn(a, b, c) {
        return Qm(new Om, Math.round(a.yb[0] + (b.yb[0] - a.yb[0]) * c), Math.round(a.yb[1] + (b.yb[1] - a.yb[1]) * c), Math.round(a.yb[2] + (b.yb[2] - a.yb[2]) * c))
    }

    function cn(a, b, c) {
        b = Ym(b);
        a = Ym(a);
        var d;
        180 < Math.abs(b[0] - a[0]) ? (d = 360 - Math.abs(b[0] - a[0]),
            d = b[0] > a[0] ? a[0] - c * d : a[0] + c * d) : d = Mm(a[0], b[0], c);
        d = (0 > d ? 360 + d : d) % 360;
        var e = Mm(a[1], b[1], c);
        c = Mm(a[2], b[2], c);
        return Sm(d, e, c)
    }

    function dn(a, b, c, d, e) {
        function g(a, b, c) {
            return Mm(a + c, a - c, Lm((a - (b - 5)) / 10))
        }
        b = void 0 === b ? 1 : b;
        e = void 0 === e ? 36 : e;
        c = (void 0 === c ? 110 : c) * b;
        d = (void 0 === d ? 10 : d) * b;
        b *= e;
        var h = Ym(a),
            k = h[0],
            l = h[1],
            h = h[2];
        switch (!0) {
            case 55 < k && 65 > k:
                k = g(k, 60, -c);
                break;
            case 0 < k && 60 > k:
                k -= c;
                break;
            case 295 < k && 305 > k:
                k = g(k, 300, c);
                break;
            case 240 < k && 300 > k:
                k += c;
                break;
            default:
                k = 360 >= k + c ? k + c : k - c
        }
        var l = l + d,
            h = g(h, 93 - e, b),
            m = Sm(k, l, h);
        return function (b, c) {
            var d = a.Ca();
            return "#ffffff" === d && 0 === b ? d : cn(a, m, b / Math.max(c - 1, 1)).Ca()
        }
    }
    f.equals = function (a) {
        return null != a && a.serialize() === this.serialize()
    };

    function en(a) {
        var b = gh(a.from),
            c = gh(a.to);
        return b instanceof Om && c instanceof Om ? function (a, e) {
                return cn(b, c, a / Math.max(e - 1, 1)).Ca()
            } :
            null
    }

    function gh(a) {
        try {
            return fn(a)
        } catch (b) {}
        return null
    }

    function fn(a) {
        var b = String(a);
        if ("#" === b.slice(0, 1))
            return Vm(b);
        if ("hsl(" === b.slice(0, 4)) {
            a = new Om;
            var c = /^hsl\((\d*(?:\.\d+)?),\s*(\d*(?:\.\d+)?)%,\s*(\d*(?:\.\d+)?)%\)$/.exec(b);
            if (!c)
                throw new SyntaxError('Invalid HSL color: "' + b + '"');
            var b = +c[2],
                d = +c[3],
                b = b / 100,
                d = d / 100,
                e = b * (.5 > d ? d : 1 - d),
                g = d + e,
                c = [+c[1], 100 * (0 < d ? 2 * e / g : b), 100 * g];
            return Pm(a, c[0], c[1], c[2])
        }
        if ("rgb(" === b.slice(0, 4)) {
            a = new Om;
            c = /^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(b);
            if (!c)
                throw new SyntaxError('Invalid RGB color: "' + b + '"');
            return Qm(a, +c[1], +c[2], +c[3])
        }
        if (6 >= b.length)
            return Vm(b);
        throw Error("could not parse color: " + a);
    }

    function gn(a, b, c) {
        0 > c && (c += 1);
        1 < c && --c;
        return c < 1 / 6 ? a + 6 * (b - a) * c : .5 > c ? b : c < 2 / 3 ? a + (b - a) * (2 / 3 - c) * 6 : a
    }

    function Rm(a, b, c) {
        a /= 255;
        b /= 255;
        c /= 255;
        var d = Math.max(a, b, c),
            e = Math.min(a, b, c),
            g;
        if (d == e)
            g = e = 0;
        else {
            var h = d - e,
                e = h / d;
            switch (d) {
                case a:
                    g = (b - c) / h + (b < c ? 6 : 0);
                    break;
                case b:
                    g = (c - a) / h + 2;
                    break;
                case c:
                    g = (a - b) / h + 4
            }
            g /= 6
        }
        return [360 * g, 100 * e, 100 * d]
    }

    function Um(a, b, c) {
        a = [a, b, c];
        a = a.map(function (a) {
            return Lm(a / 100)
        });
        b = [];
        b[0] = 3.2404542 * a[0] - 1.5371385 * a[1] - .4985314 * a[2];
        b[1] = -.969266 * a[0] + 1.8760108 * a[1] + .041556 * a[2];
        b[2] = .0556434 * a[0] - .2040259 * a[1] + 1.0572252 * a[2];
        b = b.map(function (a) {
            return .00304 >= a ? 12.92 * a : 1.055 * Math.pow(a, 1 / 2.4) - .055
        });
        return b = b.map(function (a) {
            return Lm(Math.round(255 * a), 0, 255)
        })
    }

    function Zm(a, b, c) {
        a = [a, b, c];
        a = a.map(function (a) {
            return Lm(a / 255)
        });
        a = a.map(function (a) {
            return .04045 >= a ? a / 12.92 : Math.pow((a + .055) / 1.055, 2.4)
        });
        b = [];
        b[0] = .4124564 * a[0] + .3575761 * a[1] + .1804375 * a[2];
        b[1] = .2126729 * a[0] + .7151522 * a[1] + .072175 * a[2];
        b[2] = .0193339 * a[0] + .119192 * a[1] + .9503041 * a[2];
        return b = b.map(function (a) {
            return 100 * a
        })
    }

    function $m(a, b, c) {
        function d(a) {
            return .008856452 < a ? Math.pow(a, 1 / 3) : a / .12841855 + .137931034
        }
        a = [a / 95.047, b / 100, c / 108.883];
        b = [];
        b[0] = 116 * d(a[1]) - 16;
        b[1] = 500 * (d(a[0]) - d(a[1]));
        b[2] = 200 * (d(a[1]) - d(a[2]));
        return b
    }

    function Tm(a, b, c) {
        function d(a) {
            return .206896552 < a ? a * a * a : .12841855 * (a - .137931034)
        }
        a = (a + 16) / 116;
        return [95.047 * d(isNaN(b) ? a : a + b / 500), 100 * d(a), 108.883 * d(isNaN(c) ? a : a - c / 200)]
    }

    function Wm(a, b, c) {
        var d = parseInt(a.charAt(b), 16) | 0;
        return 16 * d + (1 == c ? d : parseInt(a.charAt(b + 1), 16) | 0)
    }

    function hn(a, b, c) {
        return Qm(new Om, a.yb[0] + Math.round(c * (b.yb[0] - a.yb[0])), a.yb[1] + Math.round(c * (b.yb[1] - a.yb[1])), a.yb[2] + Math.round(c * (b.yb[2] - a.yb[2])))
    }
    f.serialize = Om.prototype.Ca;
    f.toString = Om.prototype.Ca;

    function jn() {}
    jn = Backbone.View.extend({
        className: "colorPicker showColorCode"
    });
    f = jn.prototype;
    f.initialize = function (a) {
        this.kl = a.kl;
        this.Dg = !!a.Dg;
        this.Xb = (a.Xb || jn.pQ).clone();
        this.Zz = this.Zz.bind(this);
        this.aA = this.aA.bind(this);
        this.$z = this.$z.bind(this);
        this.bA = this.bA.bind(this)
    };
    f.events = function () {
        return {
            "mousedown .colorPickerSpectrum": this.y3,
            "mousedown .colorPickerValue": this.z3,
            "keydown .colorPickerHexCode": this.p3,
            "input .colorPickerHexCode": this.f3,
            "change .colorPickerApplyAllCheckbox": this.P1
        }
    };
    f.ap = function () {
        return this.Xb.clone()
    };
    f.gB = function (a) {
        a.equals(this.Xb) || (this.Xb = a.clone(),
            kn(this),
            ln(this),
            mn(this),
            this.trigger("preview", this.ap()))
    };

    function nn(a, b) {
        a.$(".colorPickerApplyAllCheckbox").prop("checked", b)
    }
    f.render = function () {
        this.$el.addClass("on");
        this.$el.toggleClass("showApplyAll", this.Dg);
        this.$el.html(on({
            SC: this.kl.format("colorPickerColorCode"),
            Dg: this.Dg,
            tC: this.kl.ro()
        }).toString());
        kn(this);
        ln(this);
        mn(this);
        return this
    };
    f.remove = function () {
        var a = this;
        this.$el.removeClass("on");
        this.$el.one("animationend", function () {
            $(document).off("mousemove", a.Zz);
            $(document).off("mouseup", a.aA);
            $(document).off("mousemove", a.$z);
            $(document).off("mouseup", a.bA);
            Backbone.View.prototype.remove.call(a)
        });
        return this
    };

    function kn(a) {
        var b = pn(a.Xb.Li[0]),
            c = (jn.EQ - jn.Yw) * a.Xb.$S() / 100,
            d = c * Math.cos(b),
            b = c * Math.sin(b);
        a.$(".colorPickerSpectrum \x3e .marker").css("transform", "translate(" + d + "px, " + b + "px)");
        a.$(".colorPickerValue").css("background-color", an(a.Xb).Ca())
    }

    function ln(a) {
        var b = a.Xb.oc(),
            b = (jn.JQ - 2 * jn.Yw) * (100 - b) / 100;
        a.$(".colorPickerValue \x3e .marker").css("transform", "translateX(" + b + "px)")
    }

    function mn(a) {
        var b = a.$(".colorPickerHexCode");
        b.blur();
        b.val(a.Xb.Ca().slice(1))
    }

    function qn(a, b) {
        var c = b.clientX,
            d = b.clientY;
        b = a.$(".colorPickerSpectrum").get(0).getBoundingClientRect();
        var e = b.left + b.width / 2,
            g = b.top + b.height / 2;
        b = rn(e, g, c, d);
        c = 100 * Math.min(sn(e, g, c, d) / (jn.EQ - jn.Yw), 1);
        d = a.Xb.oc();
        Pm(a.Xb, b, c, d);
        kn(a);
        mn(a);
        a.trigger("preview", a.ap())
    }

    function tn(a, b) {
        b = b.clientX;
        var c = a.$(".colorPickerValue").get(0).getBoundingClientRect();
        a.Xb.ak(100 - 100 * Math.max(0, Math.min((b - c.left - jn.Yw) / (jn.JQ - 2 * jn.Yw), 1)));
        ln(a);
        mn(a);
        a.trigger("preview", a.ap())
    }
    f.y3 = function (a) {
        0 === a.button && (a.preventDefault(),
            qn(this, a),
            this.undelegateEvents(),
            this.$(".colorPickerSpectrum").addClass("mousedown"),
            $(document).on("mousemove", this.Zz),
            $(document).on("mouseup", this.aA))
    };
    f.Zz = function (a) {
        qn(this, a)
    };
    f.aA = function (a) {
        $(document).off("mousemove", this.Zz);
        $(document).off("mouseup", this.aA);
        this.$(".colorPickerSpectrum").removeClass("mousedown");
        this.delegateEvents();
        qn(this, a)
    };
    f.z3 = function (a) {
        0 === a.button && (a.preventDefault(),
            tn(this, a),
            this.undelegateEvents(),
            this.$(".colorPickerValue").addClass("mousedown"),
            $(document).on("mousemove", this.$z),
            $(document).on("mouseup", this.bA))
    };
    f.$z = function (a) {
        tn(this, a)
    };
    f.bA = function (a) {
        $(document).off("mousemove", this.$z);
        $(document).off("mouseup", this.bA);
        this.$(".colorPickerValue").removeClass("mousedown");
        this.delegateEvents();
        tn(this, a)
    };
    f.p3 = function (a) {
        if (13 === a.which || 27 === a.which)
            a.preventDefault(),
            this.trigger("confirm")
    };
    f.f3 = function () {
        var a = this.$(".colorPickerHexCode"),
            b = a.val(),
            c = b.replace(/\W+/g, "").replace(/[^0-9a-f]/gi, ""),
            b = b.length - c.length,
            c = c.slice(0, 6),
            d = gh(c);
        this.Xb = d ? d : jn.pQ.clone();
        b = a[0].selectionStart - b;
        a.val(c);
        a[0].setSelectionRange(b, b);
        kn(this);
        ln(this);
        this.trigger("preview", this.ap())
    };
    f.P1 = function () {
        var a = this.$(".colorPickerApplyAllCheckbox").prop("checked");
        this.trigger("applyAll", a)
    };
    jn.pQ = Qm(new Om, 255, 255, 255);
    jn.EQ = 100;
    jn.Yw = 10;
    jn.JQ = 200;

    function on(a) {
        soy.asserts.assertType(goog.isString(a.SC) || a.SC instanceof goog.soy.data.SanitizedContent, "colorCodeLabel", a.SC, "string|goog.soy.data.SanitizedContent");
        var b = a.SC;
        soy.asserts.assertType(goog.isBoolean(a.Dg) || 1 === a.Dg || 0 === a.Dg, "showApplyAll", a.Dg, "boolean");
        var c = !!a.Dg;
        soy.asserts.assertType(goog.isString(a.tC) || a.tC instanceof goog.soy.data.SanitizedContent, "applyAllLabel", a.tC, "string|goog.soy.data.SanitizedContent");
        a = a.tC;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"colorPickerSpectrum"\x3e\x3cdiv class\x3d"marker"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"colorPickerValue"\x3e\x3cdiv class\x3d"marker"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"colorPickerColorCode"\x3e' + soy.$$escapeHtml(b) + ' #\x3cinput class\x3d"colorPickerHexCode" spellcheck\x3d"false"\x3e\x3c/div\x3e' + (c ? '\x3cdiv class\x3d"colorPickerApplyAll"\x3e\x3clabel class\x3d"colorPickerApplyAllLabel"\x3e\x3cinput type\x3d"checkbox" class\x3d"colorPickerApplyAllCheckbox" /\x3e' + soy.$$escapeHtml(a) + "\x3c/label\x3e\x3c/div\x3e" : ""))
    };

    function un(a) {
        var b = goog.asserts.assertArray(a.rd, "expected parameter 'colors' of type list\x3c[hexString: string]\x3e.");
        soy.asserts.assertType(null == a.label || a.label instanceof goog.soy.data.SanitizedContent || goog.isString(a.label), "label", a.label, "null|string|undefined");
        var c = a.label;
        soy.asserts.assertType(null == a.Vw || goog.isBoolean(a.Vw) || 1 === a.Vw || 0 === a.Vw, "workingPalette", a.Vw, "boolean|null|undefined");
        a = a.Vw;
        var d = '\x3cdiv class\x3d"' + (a ? "workingPalette" : "pinnedPalette") + '"\x3e' + (c ? '\x3ch3 class\x3d"colorPaletteLabel"\x3e' + soy.$$escapeHtml(c) + "\x3c/h3\x3e" : "") + '\x3cmenu class\x3d"colorPaletteGroup"\x3e' + (a ? '\x3cli class\x3d"colorPaletteAdd"\x3e\x3c/li\x3e' : ""),
            c = b.length;
        for (a = 0; a < c; a++) {
            var e, g = b[a];
            e = (e = void 0, {});
            soy.asserts.assertType(goog.isString(g.sg) || g.sg instanceof goog.soy.data.SanitizedContent, "hexString", g.sg, "string|goog.soy.data.SanitizedContent");
            g = g.sg;
            e = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"colorPaletteEntry" data-color\x3d"#' + soy.$$escapeHtmlAttribute(g) + '" title\x3d"#' + soy.$$escapeHtmlAttribute(g) + '" style\x3d"' + (e.kc ? "/*" + e.kc + "*/" : "") + "color: #" + soy.$$escapeHtmlAttribute(soy.$$filterCssValue(g)) + ';" \x3e\x3c/li\x3e');
            d += e
        }
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(d + "\x3c/menu\x3e\x3c/div\x3e")
    }

    function vn(a) {
        soy.asserts.assertType(goog.isString(a.label) || a.label instanceof goog.soy.data.SanitizedContent, "label", a.label, "string|goog.soy.data.SanitizedContent");
        var b = a.label;
        soy.asserts.assertType(null == a.title || a.title instanceof goog.soy.data.SanitizedContent || goog.isString(a.title), "title", a.title, "null|string|undefined");
        var c = a.title;
        soy.asserts.assertType(goog.isString(a.url) || a.url instanceof goog.soy.data.SanitizedContent, "url", a.url, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca class\x3d"colorPaletteCta" href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(a.url)) + '" ' + (c ? 'title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"' : "") + ' target\x3d"_blank"\x3e+ ' + soy.$$escapeHtml(b) + "\x3c/a\x3e")
    }

    function wn(a) {
        var b;
        b = b || {};
        soy.asserts.assertType(goog.isString(a.ro) || a.ro instanceof goog.soy.data.SanitizedContent, "applyToAll", a.ro, "string|goog.soy.data.SanitizedContent");
        var c = a.ro;
        soy.asserts.assertType(null == a.qx || a.qx instanceof goog.soy.data.SanitizedContent || goog.isString(a.qx), "applyToAllColor", a.qx, "null|string|undefined");
        var d = a.qx;
        soy.asserts.assertType(null == a.sx || a.sx instanceof goog.soy.data.SanitizedContent || goog.isString(a.sx), "applyToAllResult", a.sx, "null|string|undefined");
        a = a.sx;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"colorPaletteApplyAll"\x3e\x3clabel class\x3d"colorPaletteApplyAllLabel"\x3e\x3cinput type\x3d"checkbox" class\x3d"colorPaletteApplyAllCheckbox"\x3e' + soy.$$escapeHtml(c) + (d ? '\x3cspan class\x3d"colorPaletteApplyAllColor" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + "background: " + soy.$$escapeHtmlAttribute(soy.$$filterCssValue(d)) + '"\x3e\x3c/span\x3e\x3cspan class\x3d"colorPaletteApplyAllArrow"\x3e\x26#9654;\x3c/span\x3e\x3cspan class\x3d"colorPaletteApplyAllResult" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + "background: " + soy.$$escapeHtmlAttribute(soy.$$filterCssValue(a)) + '"\x3e\x3c/span\x3e' : "") + "\x3c/label\x3e\x3c/div\x3e")
    };

    function xn() {}
    xn = Backbone.View.extend({
        className: "colorPalette"
    });
    f = xn.prototype;
    f.initialize = function (a) {
        this.kl = a.kl;
        this.si = !1;
        this.zi = a.zi;
        this.Hx = a.Hx;
        this.vl = a.vl;
        this.xt = yn({
            mV: a.xt,
            vU: a.ja.ba.get(Sf),
            uU: a.ja.ba.get(Tf)
        });
        this.Lx = (this.Xb = a.Xb) && this.Xb.clone();
        this.xN = !1;
        this.Me = null;
        this.UA = a.UA;
        this.qC = !!a.qC;
        this.Dg = !!a.Dg;
        this.px = a.px;
        this.kT = !1;
        this.Cl = null;
        this.H = a.H;
        this.ja = a.ja;
        (this.window = a.window || null) && $(this.window).on("resize.colorPaletteView", _.throttle(this.pB.bind(this), 50))
    };
    f.events = function () {
        return {
            "click .colorPaletteAdd": this.C2,
            "click .colorPaletteEntry": this.b2,
            "click .colorPaletteCta": this.a2,
            "change .colorPaletteApplyAllCheckbox": this.Q1,
            mousedown: this.x3,
            "mousedown .colorPaletteEntry": this.w3
        }
    };

    function yn(a) {
        var b = -1 === a.vU ? a.mV : a.mV.slice(0, a.vU);
        return -1 === a.uU ? b : b.map(function (b) {
            return new zn({
                rd: b.og().slice(0, a.uU),
                name: b.getName()
            })
        })
    }

    function An(a) {
        function b(a) {
            return new Bn({
                name: null,
                sg: a
            })
        }
        return [new zn({
            name: a.zi.format("colorPaletteDefaultColors"),
            rd: "ff5c5c ffbd4a fff952 99e265 35b729 44d9e6 2eb2ff 5271ff b760e6 ff63b1".split(" ").map(b)
        }), new zn({
            name: "",
            rd: ["000000", "666666", "a8a8a8", "d9d9d9", "ffffff"].map(b)
        })]
    }
    f.render = function () {
        var a = {},
            b = $("\x3cdiv\x3e").appendTo(this.$el);
        this.$el.addClass("on");
        for (var c = [].concat(la(this.xt), la(An(this))).filter(function (a) {
                return 0 < a.og().length
            }), c = ka(c), d = c.next(); !d.done; d = c.next()) {
            d = d.value;
            b.append(un({
                rd: d.og().map(function (a) {
                    return {
                        sg: a.sg
                    }
                }),
                label: d.getName()
            }).toString());
            for (var d = ka(d.og()), e = d.next(); !e.done; e = d.next())
                a["#" + e.value.sg] = !0
        }
        this.qC && this.ja.ba.get(eg) && b.prepend(vn({
            label: this.zi.format("colorPaletteAddPaletteCta"),
            url: "/brand"
        }).toString());
        c = Cn(this.vl.Hi()).filter(function (b) {
            return a[b] ? !1 : a[b] = !0
        });
        b.prepend(un({
            Vw: !0,
            rd: c.map(function (a) {
                return {
                    sg: a.replace("#", "")
                }
            }),
            label: this.zi.format("colorPaletteDocumentColors")
        }).toString());
        this.UA && (this.$el.addClass("colorPaletteScrollable"),
            b.addClass("disableAncestorScroll"),
            this.Cl = new Dn(b),
            this.Cl.render());
        this.listenTo(this.vl, "paletteEntry:add", this.K1);
        this.listenTo(this.vl, "paletteEntry:remove", this.O3);
        this.listenTo(this.vl, "paletteEntry:sync", this.pB);
        return this
    };
    f.appendTo = function (a) {
        this.render().$el.appendTo(a);
        this.pB()
    };
    f.pB = function () {
        if (this.$el.width()) {
            var a = Math.floor(this.$el.width() / 40);
            this.$el.find(".colorPaletteGroup").each(function (b, c) {
                c = $(c);
                b = $(c).find("li");
                for (var d = []; 0 < b.length;)
                    d.push(b.splice(0, a));
                c.children().detach();
                d.forEach(function (a) {
                    var b = $("\x3cdiv\x3e").addClass("colorPalette__row");
                    a.forEach(function (a) {
                        b.append(a)
                    });
                    b.appendTo(c)
                });
                d.length && d[d.length - 1].length < a && c.find(".colorPalette__row:nth-last-child(2)").addClass("colorPalette__row--roundSecondLast")
            })
        }
    };
    f.ap = function () {
        return this.Xb && this.Xb.clone()
    };
    f.gB = function (a) {
        null === a && null !== this.Xb ? (this.Xb = null,
            this.trigger("preview", a, this.si)) : a.equals(this.Xb) || (this.Xb = a.clone(),
            this.trigger("preview", a, this.si),
            this.Dg && (this.kT || (this.kT = !0,
                    this.$el.append(wn({
                        ro: this.zi.ro(),
                        qx: this.px ? this.px.Ca() : null,
                        sx: this.Xb ? this.Xb.Ca() : null
                    }).toString())),
                this.$(".colorPaletteApplyAllResult").css("background", a.Ca())));
        a && this.Me && (this.Me.gB(a),
            this.$(".colorPaletteAdd").css("color", a.Ca()));
        return this
    };
    f.confirm = function () {
        (null === this.Xb && null !== this.Lx || this.Xb && !this.Xb.equals(this.Lx)) && En(this);
        return this
    };

    function Fn(a) {
        a.Me && (a.Me.remove(),
            a.Me = null,
            a.trigger("hideColorPicker"));
        a.xN && (Gn(a),
            a.xN = !1);
        a.$(".colorPaletteAdd").css("color", "transparent")
    }
    f.remove = function () {
        Fn(this);
        this.Cl && (this.Cl.remove(),
            this.Cl = null);
        this.$el.hasClass("on") && (this.$el.removeClass("on"),
            this.$el.one("animationend", Backbone.View.prototype.remove.bind(this)),
            this.Lx && Hn(this, this.Lx) && this.H.track("brand_color_used"));
        this.window && $(this.window).off("resize.colorPaletteView");
        return this
    };

    function En(a) {
        a.Lx = a.ap();
        a.trigger("confirm", a.si)
    }

    function Gn(a) {
        if (a.Xb) {
            var b = a.Xb.Ca();
            a.$(".colorPaletteEntry").toArray().some(function (a) {
                return $(a).data("color") === b
            }) || (In(a.vl, a.Xb),
                En(a))
        }
    }
    f.b2 = function (a) {
        a.preventDefault();
        a = $(a.currentTarget).data("color");
        if (a = gh(a))
            this.gB(a),
            this.Me || this.confirm()
    };
    f.C2 = function (a) {
        a.preventDefault();
        this.Me ? Fn(this) : (this.Me || (this.Me = new jn({
                    kl: this.kl,
                    Xb: this.Xb,
                    Dg: !1
                }),
                this.listenTo(this.Me, "preview", this.N3),
                this.listenTo(this.Me, "confirm", this.E2),
                this.listenTo(this.Me, "applyAll", this.L1),
                this.Me.render(),
                this.Hx.Nl(this.Me.$el, this.$(".colorPaletteAdd")),
                this.trigger("showColorPicker")),
            nn(this.Me, this.si))
    };
    f.Q1 = function (a) {
        a = !0 === $(a.target).prop("checked");
        this.si !== a && (this.si = a,
            this.trigger("changeApplyAll", this.si),
            this.Me && nn(this.Me, this.si))
    };
    f.a2 = function () {
        tl(this.H, "add_another_palette", "editor", "toolbar", "color_palette")
    };
    f.x3 = function (a) {
        0 === a.button && (0 < $(a.target).closest(".colorPaletteAdd, .colorPaletteEntry").length ? a.preventDefault() : Fn(this))
    };
    f.w3 = function (a) {
        if (0 === a.button && (a.preventDefault(), !$(a.currentTarget).parents(".pinnedPalette").length)) {
            var b = $(a.currentTarget).data("color"),
                c = (new Jn({
                    target: a.currentTarget
                })).hI(a.clientX, a.clientY);
            this.listenTo(c, "end", function (a) {
                var e = gh(b);
                !e || this.$el.is(a) || this.$el.get(0).contains(a) || (Kn(this.vl, e),
                    En(this));
                this.stopListening(c)
            })
        }
    };
    f.K1 = function (a) {
        if (!Hn(this, a) && !Ln(this, a)) {
            a = a.Ca();
            var b = $("\x3cli\x3e");
            b.addClass("colorPaletteEntry");
            b.data("color", a);
            b.attr("data-color", a);
            b.css("color", a);
            b.insertAfter(this.$(".colorPaletteAdd"))
        }
    };

    function Hn(a, b) {
        var c = b.Ca().substr(1);
        return a.xt.some(function (a) {
            return a.rd.some(function (a) {
                return a.sg === c
            })
        })
    }

    function Ln(a, b) {
        var c = b.Ca().substr(1);
        return An(a).some(function (a) {
            return a.rd.some(function (a) {
                return a.sg === c
            })
        })
    }
    f.O3 = function (a) {
        var b = a.Ca();
        this.$(".workingPalette .colorPaletteEntry").filter(function () {
            return $(this).data("color") === b
        }).remove()
    };
    f.N3 = function (a) {
        this.Me && (this.xN = !0,
            this.gB(a))
    };
    f.E2 = function () {
        Fn(this);
        this.confirm()
    };
    f.L1 = function (a) {
        this.si !== a && (this.si = a,
            this.trigger("changeApplyAll", this.si),
            this.$(".colorPaletteApplyAllCheckbox").prop("checked", this.si))
    };

    function Jn(a) {
        this.target = a.target;
        this.pm = null;
        this.xD = {
            x: 0,
            y: 0
        };
        this.yD = void 0 !== a.yD ? a.yD : 5;
        this.hS = !1;
        this.zB = null;
        this.FU = this.u0.bind(this);
        this.GU = this.v0.bind(this)
    }
    f = Jn.prototype;
    f.trigger = Backbone.Events.trigger;
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.listenTo = Backbone.Events.listenTo;
    f.hI = function (a, b) {
        this.xD.x = a;
        this.xD.y = b;
        this.pm = this.target.cloneNode(!0);
        document.addEventListener("mousemove", this.FU);
        document.addEventListener("mouseup", this.GU);
        return this
    };
    f.release = function (a) {
        document.removeEventListener("mousemove", this.FU);
        document.removeEventListener("mouseup", this.GU);
        $(this.target).removeClass("fauxDraggerTarget");
        this.pm && this.pm.parentNode && this.pm.parentNode.removeChild(this.pm);
        this.pm = null;
        this.trigger("end", a);
        this.off()
    };
    f.u0 = function (a) {
        var b = a.pageX - this.xD.x;
        a = a.pageY - this.xD.y;
        this.hS ? $(this.pm).css("top", this.zB.top + a + "px").css("left", this.zB.left + b + "px") : (Math.abs(b) > this.yD || Math.abs(a) > this.yD) && this.PJ()
    };
    f.v0 = function (a) {
        a.preventDefault();
        a.target instanceof Element && this.release(a.target)
    };
    f.PJ = function () {
        this.zB = this.target.getBoundingClientRect();
        $(this.pm).css("top", this.zB.top + "px").css("left", this.zB.left + "px").addClass("fauxDraggerClone");
        $(this.target).addClass("fauxDraggerTarget");
        document.body.appendChild(this.pm);
        this.trigger("start");
        this.hS = !0
    };

    function Mn(a, b) {
        this.item = {
            Mu: !1,
            elements: [],
            tv: null,
            timestamp: 0,
            Ul: null,
            Wl: null
        };
        this.tB = a;
        this.VW = (b || "anonymous") + "-copybuffer"
    }

    function Nn(a) {
        var b = JSON.stringify({
            elements: a.item.elements.map(function (a) {
                return a.serialize()
            }),
            timestamp: a.item.timestamp,
            activeFilterable: a.item.Ul,
            activeText: a.item.Wl
        });
        try {
            a.tB.setItem(a.VW, b)
        } catch (c) {}
    }

    function On(a) {
        var b;
        return a.tB && (b = a.tB.getItem(a.VW)) && (b = JSON.parse(b),
            b.timestamp > a.item.timestamp) ? {
            elements: (b.elements || []).map(function (a) {
                return tg(a)
            }),
            tv: null,
            timestamp: b.timestamp,
            Ul: b.activeFilterable,
            Wl: b.activeText
        } : null
    }

    function Pn(a, b) {
        a.item.timestamp = Date.now();
        a.item.Mu = !0;
        a.item.elements = [b];
        a.item.Ul = null;
        b.gp() && -1 !== b.Fy() && (a.item.Ul = {
            elementIndex: 0,
            filterableIndex: b.Fy()
        });
        a.item.Wl = null;
        b.ne() && -1 !== b.Ib() && (a.item.Wl = {
            elementIndex: 0,
            textIndex: b.Ib()
        });
        a.item.tv = null;
        a.tB && Nn(a)
    }

    function Qn(a, b) {
        var c = bc;
        c.item.timestamp = Date.now();
        c.item.Mu = !1;
        c.item.elements = a;
        c.item.tv = b ? b : null;
        c.tB && Nn(c)
    }

    function Rn() {
        var a = bc,
            b = On(a);
        return b ? b : {
            Mu: a.item.Mu,
            elements: a.item.elements,
            tv: a.item.tv,
            timestamp: a.item.timestamp,
            Ul: a.item.Ul,
            Wl: a.item.Wl
        }
    };

    function Sn(a, b) {
        this.aa = a;
        this.gX = b || null;
        this.CH = this.qG = null
    }
    Sn.prototype.read = function (a) {
        this.qG || (Tn++,
            Un.splice(Tn, 0, this));
        this.qG = a;
        if (Vn == Wn || Vn == Xn)
            this.aa.requestAnimationFrame(Yn),
            Vn = Zn;
        return this
    };
    Sn.prototype.write = function (a) {
        this.CH || ($n++,
            ao.splice($n, 0, this));
        this.CH = a;
        Vn == Wn && (this.aa.requestAnimationFrame(Yn),
            Vn = Zn);
        return this
    };

    function Tg(a) {
        return new Sn(Rk, a)
    }
    var Wn = 0,
        Zn = 1,
        Xn = 3,
        Vn = Wn,
        Un = [],
        ao = [],
        Tn = 0,
        $n = 0;

    function Yn() {
        var a, b;
        Vn = 2;
        $n = -1;
        for (a = 0; a < Un.length; a++) {
            Tn = a;
            b = Un[a];
            var c = b.qG;
            b.qG = null;
            c && c.call(b.gX, b)
        }
        Un.length = 0;
        Tn = -1;
        Vn = Xn;
        for (a = 0; a < ao.length; a++)
            $n = a,
            b = ao[a],
            c = b.CH,
            b.CH = null,
            c && c.call(b.gX, b);
        ao.length = 0;
        $n = -1;
        Vn != Zn && (Vn = Wn)
    };

    function bo() {
        this.fa = Hb;
        this.url = "/designschool"
    };

    function co() {}

    function eo(a) {
        return Object.freeze(R(co, a))
    };
    var fo = new yf("fg", !1),
        go = new yf("fj", !1);

    function ho(a) {
        this.Fa = a.Fa;
        this.ba = a.ba
    }

    function io(a) {
        var b = ["featureOnboardingManager", a.Bk.G()].join("."),
            c = null;
        try {
            c = jo(b)
        } catch (d) {}
        return new ho({
            ba: a.ba,
            Fa: c
        })
    }

    function ko(a) {
        return a.Fa && a.ba.get(fo)
    }

    function lo(a) {
        return ko(a) && !!mo(a.Fa, no)
    }
    var no = "magicResize";

    function oo(a) {
        this.gI = a.gI
    };

    function po(a) {
        this.H = a.H;
        this.ja = a.ja;
        this.eJ = a.eJ;
        this.mg = a.mg;
        this.Fa = a.Fa;
        this.YO = !1
    }

    function qo(a, b) {
        if (a.YO ? 0 : b === ro ? !so(a) : 1) {
            var c = a.eJ(),
                d = c.dG;
            c.on("signup", function () {
                $(window).off("beforeunload");
                var c = b === to,
                    g = ko(a.mg);
                c && g ? (c = a.mg,
                    ko(c) && uo(c.Fa, no),
                    c = a.mg,
                    ko(c) && uo(c.Fa, "onboardingPending"),
                    window.location.reload()) : window.location = d
            });
            c.on("hide", function () {
                a.YO = !1
            });
            c.show(b);
            a.YO = !0;
            b === ro && vo(a)
        }
    }

    function so(a) {
        var b = wo;
        return a.Fa ? !!mo(a.Fa, b) : !0
    }

    function vo(a) {
        var b = wo;
        a.Fa && uo(a.Fa, b)
    }

    function xo(a) {
        a = [yo, a.G()].join(".");
        var b = null;
        try {
            b = jo(a)
        } catch (c) {}
        return b
    }
    var yo = "EditorCtaHandler",
        wo = "ExclusiveMediaUpgradeDialogShown";

    function zo(a, b) {
        this.action = a;
        this.param = b
    }
    var Ao = {
        l8: "tab",
        tY: "search",
        Z7: "folder"
    };

    function Bo() {
        var a = window.location.hash;
        if (!a)
            return null;
        a = a.slice(1).split("\x3d");
        if (2 !== a.length)
            return null;
        var b;
        b = a[0];
        var c = _.values(Ao);
        b = b && -1 < c.indexOf(b) ? b : null;
        if (!b)
            return null;
        var d;
        try {
            d = decodeURIComponent(a[1])
        } catch (e) {
            d = a[1]
        }
        a = d;
        c = _.values(ec);
        return "tab" === b && -1 === c.indexOf(a) || !/^[\w ]+$/.test(d) ? null : new zo(b, d || null)
    };

    function Co(a) {
        this.rd = Do(a);
        this.TC = null
    }

    function Do(a) {
        if (a) {
            var b = {};
            return a.filter(function (a) {
                a = a.Ca();
                return b[a] ? !1 : b[a] = !0
            })
        }
        return []
    }

    function Eo(a, b) {
        return 0 <= Cn(a).indexOf(b.Ca())
    }
    Co.prototype.we = function () {
        this.TC = null
    };

    function Fo(a, b) {
        Xm(b) && !Eo(a, b) && (a.rd.push(b),
            a.we())
    }

    function Go(a, b) {
        Xm(b) && Eo(a, b) && (a.rd = a.rd.filter(function (a) {
                return !a.equals(b)
            }),
            a.we())
    }
    Co.prototype.unshift = function (a) {
        Xm(a) && !Eo(this, a) && (this.rd.unshift(a),
            this.we())
    };

    function Ho() {
        var a = new Co;
        a.rd = [];
        a.we();
        return a
    }
    Co.prototype.og = function () {
        return this.rd
    };

    function Cn(a) {
        a.TC || (a.TC = a.rd.map(function (a) {
            return a.Ca()
        }));
        return a.TC
    }
    Co.prototype.serialize = function () {
        this.we();
        return this.rd.map(function (a) {
            return a.serialize()
        })
    };

    function Io(a) {
        function b(a) {
            var b = m + rn(h, k, void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX, void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY) - n;
            $("#overlays .rotation.align").addClass("on");
            var c = b % 45;
            0 > c && (c += 45);
            var d = b > l.eb(),
                e = d && 42 < c,
                d = !d && 3 > c,
                g = 3 > c || 42 < c;
            if (a.shiftKey)
                q = !1,
                $("#overlays .rotationGuide").removeClass("willSnap"),
                g || (p = !1);
            else {
                g ? $("#overlays .rotationGuide").addClass("willSnap") : (q = !1,
                    $("#overlays .rotationGuide").removeClass("willSnap"));
                if (q)
                    return !1;
                e ? (b = b + 45 - c,
                    q = !0) : d && ($("#overlays .rotationGuide").addClass("willSnap"),
                    b -= c,
                    q = !0)
            }
            a = b;
            $("#overlays .rotationGuide").css("transform", Jo({
                Mv: a
            }));
            c = a = b;
            0 > c && (c = 360 + c);
            v.html(Math.round(c) + "\x26deg;").css("transform", Jo({
                Mv: 360 - a
            }));
            l.Hl(b);
            l instanceof Ko && Lo(l);
            return !1
        }

        function c() {
            l.gg = !1;
            y.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            d.removeClass("on");
            l.Ij && l.Ij();
            $(".cornerHandles .rotate").empty();
            $("#overlays .align").removeClass("on");
            $("#overlays .rotationGuide").removeClass("willSnap");
            $(document).off("keydown", r);
            $(document).off("keydown", u);
            if (m != l.eb()) {
                var a = {
                    elementIndex: l.ea(),
                    pageIndex: Mo(G, l.ha()),
                    "new": {
                        rotation: l.eb()
                    },
                    old: {
                        rotation: m
                    }
                };
                I.register(new Y(No, a))
            }
        }
        S.trigger("hideContextualControlsRequested");
        Oo();
        var d = $(this),
            e = $(this).parents(".selectionBox").data("element");
        if (e) {
            var g = e.offset(),
                h = g.left + e.width() / 2,
                k = g.top + e.height() / 2,
                l = e.data("canvaElement");
            if (l) {
                var m = l.eb(),
                    n = rn(h, k, void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX, void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY),
                    p = !1,
                    r = function (a) {
                        a.shiftKey && $("#overlays .rotationGuide").hasClass("willSnap") && (p = !0,
                            $("#overlays .rotationGuide").removeClass("willSnap"))
                    },
                    u = function () {
                        p && (p = !1,
                            $("#overlays .rotationGuide").addClass("willSnap"))
                    },
                    v = $('\x3cspan class\x3d"degrees"\x3e\x3c/span\x3e');
                $(".cornerHandles .rotate").append(v);
                d.addClass("on");
                $(document).on("keydown", r);
                $(document).on("keyup", u);
                var y = new Po($(document));
                l.gg = !0;
                y.on("mousemove|touchmove", b).on("mouseup|touchend", c);
                a = Qo(l);
                var q = !1,
                    e = $("#overlays").get(0).getBoundingClientRect();
                $("#overlays .rotation.align").first().css("left", a.x - e.left + "px").css("top", a.y - e.top + "px");
                $("#overlays .rotationGuide").first().css("left", a.x - e.left + "px").css("top", a.y - e.top + "px").css("margin-top", -1 * Ro(l) / 2 + "px").css("height", Ro(l) + "px");
                return !1
            }
        }
    };

    function So(a, b) {
        this.mI = a;
        this.namespace = void 0 === b ? null : b
    }

    function jo(a) {
        if (window.localStorage)
            return new So(window.localStorage, a);
        throw Error("ClientStore: localStorage is not defined on window, likely an unsupported browser");
    }
    So.prototype.setItem = function (a, b) {
        try {
            return this.mI.setItem(null == this.namespace ? a : this.namespace + "." + a, b), !0
        } catch (c) {
            return !1
        }
    };
    So.prototype.getItem = function (a) {
        return this.mI.getItem(null == this.namespace ? a : this.namespace + "." + a)
    };

    function mo(a, b) {
        try {
            var c = a.getItem(b);
            return null !== c ? JSON.parse(c) : null
        } catch (d) {
            return null
        }
    }

    function uo(a, b) {
        try {
            var c = JSON.stringify(!0);
            a.setItem(b, c)
        } catch (d) {}
    }
    So.prototype.removeItem = function (a) {
        this.mI.removeItem(null == this.namespace ? a : this.namespace + "." + a)
    };

    function To(a) {
        this.type = a.type;
        this.Fa = a.Fa;
        this.aa = a.aa;
        this.u = a.u
    }
    To.prototype.show = function () {
        var a = this,
            b = Uo,
            c;
        a: switch (this.type) {
            case Vo:
                c = {
                    Ux: "upgraderWelcomeDialog--freeMedia",
                    Ae: "https://static.canva.com/static/images/free_media_dialog_header.png",
                    title: this.u.format("upgraderWelcomeDialogFreeMediaTitle", 3E5),
                    xx: this.u.Ua("upgraderWelcomeDialogFreeMediaBodyHtml"),
                    button: this.u.format("upgraderWelcomeDialogFreeMediaButton")
                };
                break a;
            default:
                throw Error("Could not get model for unknown UpgraderWelcomeDialog.Type: " + this.type);
        }
        b = new b({
            content: Wo(c).$el,
            cf: this.type !== Vo,
            aa: this.aa
        });
        b.$el.addClass("upgraderWelcomeDialog");
        return Xo(b).tap(function () {
            uo(a.Fa, "" + a.type)
        })
    };

    function Yo(a) {
        a.aa.setTimeout(function () {
            return a.show()
        }, 1500)
    }
    var Vo = "FREE_MEDIA",
        Zo = new yf("ga", !1);

    function $o(a) {
        this.$el = a
    }
    t($o, fc);

    function Wo(a) {
        var b = $,
            c;
        soy.asserts.assertType(a.xx instanceof soydata.SanitizedHtml || a.xx instanceof soydata.UnsanitizedText || goog.isString(a.xx), "bodyHtml", a.xx, "soydata.SanitizedHtml");
        c = a.xx;
        soy.asserts.assertType(goog.isString(a.button) || a.button instanceof goog.soy.data.SanitizedContent, "button", a.button, "string|goog.soy.data.SanitizedContent");
        var d = a.button;
        soy.asserts.assertType(goog.isString(a.title) || a.title instanceof goog.soy.data.SanitizedContent, "title", a.title, "string|goog.soy.data.SanitizedContent");
        var e = a.title;
        soy.asserts.assertType(goog.isString(a.Ae) || a.Ae instanceof goog.soy.data.SanitizedContent, "imageUrl", a.Ae, "string|goog.soy.data.SanitizedContent");
        var g = a.Ae;
        soy.asserts.assertType(null == a.Ux || a.Ux instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ux), "cssClasses", a.Ux, "null|string|undefined");
        a = a.Ux;
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cimg class\x3d"upgraderWelcomeDialog__headerImage" src\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(g)) + '"\x3e\x3csection class\x3d"upgraderWelcomeDialog__content' + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e\x3cheader class\x3d"upgraderWelcomeDialog__header"\x3e\x3ch2\x3e' + soy.$$escapeHtml(e) + '\x3c/h2\x3e\x3c/header\x3e\x3cdiv class\x3d"upgraderWelcomeDialog__body"\x3e' + soy.$$escapeHtml(c) + '\x3c/div\x3e\x3cfooter class\x3d"upgraderWelcomeDialog__footer"\x3e\x3cbutton class\x3d"button done upgraderWelcomeDialog__button"\x3e\x3cdiv class\x3d"upgraderWelcomeDialog__buttonContent"\x3e' + ap({
            Ma: "upgraderWelcomeDialog__buttonIcon",
            color: "#FFF"
        }) + soy.$$escapeHtml(d) + "\x3c/div\x3e\x3c/button\x3e\x3c/footer\x3e\x3c/section\x3e");
        b = b(c.toString());
        return new $o(b)
    };

    function bp(a) {
        this.ja = a.ja;
        this.ba = a.ba;
        this.gd = a.gd;
        this.mg = a.mg;
        this.jc = a.jc;
        this.Ho = a.Ho;
        this.ka = a.ka;
        this.u = a.u;
        this.H = a.H;
        this.Ge = a.Ge;
        this.Fa = a.Fa;
        this.Bk = a.Bk;
        this.Ht = a.Ht;
        this.Ta = a.Ta;
        this.sb = a.sb;
        this.Eb = a.Eb;
        this.sa = a.sa
    }
    bp.prototype.go = function (a, b, c, d, e, g) {
        a = a && a.content;
        b = new cp(b);
        if (!a)
            throw Error("Malformed document. Missing content.");
        dp(this, a, b, c, d, e, g);
        d = this.ba.get(Zo) ? Vo : null;
        var h;
        try {
            h = jo("upgraderWelcomeDialog." + this.Bk.G())
        } catch (k) {
            h = null
        }
        d && h && !lo(this.mg) && !c.kh() && (c = this.u,
            c.LP || (c.LP = new jf(c.config)),
            h = new To({
                u: c.LP,
                aa: Rk,
                Fa: h,
                type: d
            }),
            mo(h.Fa, "" + h.type) || Yo(h))
    };

    function dp(a, b, c, d, e, g, h) {
        a.H.identify(a.Bk.G(), ll(a.H, a.Bk).qk());
        b = {
            content: b,
            Cc: c,
            T_: !(-1 == fh.indexOf(d.kh()) && !d.kh()),
            gd: a.gd,
            Ho: a.Ho,
            jc: a.jc,
            Ei: d,
            HY: g,
            g7: h,
            u: a.u,
            jj: e,
            ja: a.ja,
            ba: a.ba,
            Ht: a.Ht,
            H: a.H,
            Eb: a.Eb,
            sa: a.sa,
            Ta: a.Ta,
            sb: a.sb,
            yS: function () {
                var b = ["C4W_UPGRADED_USER", "C4W_INVITED_EXISTING_USER"],
                    c = d.kh(),
                    e;
                if (G) {
                    if (-1 != fh.indexOf(d.kh())) {
                        var g = a.u;
                        g.ag || (g.ag = new ff(g.config));
                        (new ep(G, d, g.ag)).go()
                    }
                    g = new fp(a.ka, d, a.u, a.ja);
                    if (!c && a.Fa && "1" == a.Fa.getItem("onboardingPhase")) {
                        if (a.ja.ba.get(Qf)) {
                            var h, r;
                            r = a.u;
                            r.OJ || (r.OJ = new gf(r.config));
                            r = r.OJ;
                            h = _.defaults({}, h, {
                                H: a.H,
                                mf: "download_hint",
                                Ge: a.Ge,
                                AB: 5,
                                title: r.pN(),
                                content: r.nN(),
                                Qe: r.mN(),
                                anchor: $("button.editorActionExport"),
                                rC: "download",
                                position: gp
                            });
                            new hp(h)
                        }
                        a.Fa.setItem("onboardingPhase", "2");
                        h = "first_design";
                        a.ja.ba.get(jg) && (h = "appcues_first_design_1");
                        a.H.identify(a.Bk.G(), ml(new nl, "onboarding", h).qk())
                    }
                    "FREE_NEW_USER" === c ? (g.go(),
                        ip(a),
                        e = "regular") : jp() ? (g.go(),
                        ip(a),
                        new hp({
                            H: a.H,
                            mf: "five_saves_view_designs",
                            Ge: a.Ge,
                            AB: 5,
                            title: ed(a.u).pN(),
                            content: $('\x3cp class\x3d"viewYourDesigns"\x3e\x3c/p\x3e').text(ed(a.u).nN()),
                            Qe: ed(a.u).mN(),
                            anchor: $("#editorLogo"),
                            rC: "homepage"
                        }),
                        e = "layouts") : -1 < b.indexOf(c) && (kp({
                            kh: c,
                            Zx: a.ja.Zx(),
                            v5: 0 <= hh(d).indexOf("TEAM_TEMPLATE"),
                            re: cd(a.u)
                        }).start(),
                        e = "c4w");
                    e && a.H.identify(a.Bk.G(), ml(new nl, "onboarding", e).qk())
                }
            }
        };
        lp(b)
    }

    function ip(a) {
        a.Fa && a.Fa.setItem("onboardingPhase", "1")
    };

    function mp(a, b, c) {
        var d = this;
        this.dD = Date.now();
        this.Cc = b;
        this.Hk = a.doctype ? np(a.doctype) : null;
        this.cX = a.pages || [];
        this.Be = a.keywords || [];
        this.locale = a.locale || null;
        this.Ri = Ho();
        this.fonts = [];
        this.Xt = Ho();
        this.wl = Ho();
        new Map;
        a.palette && a.palette.forEach(function (a) {
            var b = "!" === a.charAt(0);
            if (a = gh(b ? a.slice(1) : a))
                b ? Fo(this.Xt, a) : (Fo(this.Ri, a),
                    Fo(this.wl, a))
        }, this);
        0 === this.Ri.og().length && (this.Ri = new Co,
            this.wl = new Co,
            this.Xt.og().forEach(function (a) {
                Go(this.Ri, a);
                Go(this.wl, a)
            }, this));
        this.ia = [];
        this.yC = null;
        this.title = new op(c, a.title, this.pb().getName());
        this.title.on("change", this.z0.bind(this));
        this.qH = {
            title: {},
            subtitle: {},
            body: {}
        };
        $.extend(this.qH, a.defaultFonts);
        this.Hq = {
            title: {
                fontSize: J.ZX,
                fontFamily: J.YX
            },
            subtitle: {
                fontSize: J.WX,
                fontFamily: J.VX
            },
            body: {
                fontSize: J.Sd,
                fontFamily: J.Rd
            }
        };
        $.extend(this.Hq, a.canvaDefaultFonts);
        a = pp(this, a);
        a.pages ? a.pages.forEach(function (a) {
            d.ia.push(new qp(d, a))
        }) : this.ia.push(new qp(this, this.xg()));
        rp(this, 0);
        this.qL = !1
    }

    function sp() {
        var a = G;
        return Math.floor((Date.now() - a.dD) / 1E3)
    }
    f = mp.prototype;
    f.pb = function () {
        return this.Cc
    };
    f.xg = function () {
        return this.Cc.xg()
    };
    f.trigger = Backbone.Events.trigger;
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    _.extend(mp.prototype, Backbone.Events);
    f = mp.prototype;
    f.Hi = function () {
        return this.wl
    };

    function tp(a) {
        var b = [];
        G.xa().forEach(function (c) {
            0 < c.O().parents(".group.chart").length || (c.wr && c.wr().forEach(function (d, e) {
                    d instanceof Om && a.equals(d) && b.push({
                        element: c,
                        index: e,
                        type: "TEXT"
                    })
                }),
                c.ob && c.ob().forEach(function (d, e) {
                    d instanceof Om && a.equals(d) && b.push({
                        element: c,
                        index: e,
                        type: "FILL"
                    })
                }))
        });
        return b
    }
    f.rG = function () {
        var a = this,
            b = this.wl,
            c = Ho();
        this.Ri.og().forEach(function (a) {
            Fo(c, a)
        });
        this.ia.forEach(function (b) {
            b.Hi().og().forEach(function (b) {
                Eo(a.Xt, b) || Fo(c, b)
            })
        });
        for (var b = b.og(), d = c.og(), e = b.length - 1, g = d.length - 1; 0 <= e;)
            0 > g || b[e].Ca() !== d[g].Ca() ? this.trigger("paletteEntry:remove", b[e]) : g--,
            e--;
        for (; 0 <= g;)
            this.trigger("paletteEntry:add", d[g]),
            g--;
        this.trigger("paletteEntry:sync");
        this.wl = c
    };
    f.CA = function () {
        var a = [];
        this.ia.forEach(function (b) {
            b.xa().forEach(function (b) {
                (b instanceof up || b instanceof Ko) && b.ou().forEach(function (b) {
                    -1 == a.indexOf(b) && a.push(b)
                })
            })
        });
        this.fonts = a
    };

    function In(a, b) {
        if (Xm(b)) {
            var c = Cn(a.wl);
            0 < c.length && c[0] === b.Ca() || (Kn(a, b),
                Go(a.Xt, b),
                a.Ri.unshift(b),
                a.wl.unshift(b),
                a.trigger("paletteEntry:add", b),
                a.trigger("paletteEntry:sync"))
        }
    }

    function Kn(a, b) {
        Xm(b) && Eo(a.wl, b) && (Fo(a.Xt, b),
            Go(a.Ri, b),
            Go(a.wl, b),
            a.trigger("paletteEntry:remove", b),
            a.trigger("paletteEntry:sync"))
    }

    function vp(a) {
        return Cn(a.Ri).concat(a.Xt.og().map(function (a) {
            return "!" + a.Ca()
        }))
    }
    f.serialize = function () {
        var a;
        a = this.ia.reduce(function (a, c) {
            c.rh || a.push(c.serialize());
            return a
        }, []);
        a = {
            canvaDefaultFonts: this.Hq,
            defaultFonts: this.qH,
            layout: this.pb().G(),
            doctype: this.Hk ? wp(this.Hk) : null,
            pages: a,
            palette: vp(this),
            title: this.title.ep()
        };
        this.Be && 0 < this.Be.length && (a.keywords = this.Be);
        return a
    };
    f.Jb = function () {
        return this.title
    };
    f.Zk = function () {
        return this.Be
    };

    function xp(a, b) {
        a.Be = b;
        "" !== a.Be.join("") && (a.trigger("change:keywords", a),
            a.trigger("change", a))
    }
    f.qg = function () {
        return this.locale
    };
    f.setLocale = function (a) {
        var b = this.locale;
        this.locale = a;
        this.locale !== b && (this.trigger("change:locale", this),
            this.trigger("change", this))
    };

    function yp(a) {
        return Lg(a.Cc.tb).F() || (a.cX[0] || {}).height || 0
    }

    function zp(a) {
        return Lg(a.Cc.tb).D() || (a.cX[0] || {}).width || 0
    }
    f.wj = function () {
        return this.Cc.tb.wj()
    };
    f.Oa = function () {
        for (var a = 0; a < this.ia.length; a++)
            if (this.ia[a].zf())
                return this.ia[a];
        return this.ia[0]
    };

    function Ap(a) {
        var b = a.Oa();
        return Mo(a, b)
    }
    f.Rb = function () {
        return this.ia
    };
    f.wc = function () {
        return this.ia.length
    };

    function Bp(a) {
        return a.ia.filter(function (a) {
            return !a.rh
        })
    }

    function rp(a, b) {
        b = Math.min(Math.max(0, b), a.ia.length - 1);
        b = a.ia[b];
        var c = b.zf();
        b.$j(!0);
        var d = b.zf();
        c !== d && a.trigger("page:change:selected", a, b)
    }

    function Mo(a, b) {
        return b ? a.ia.indexOf(b) : -1
    }

    function Cp(a) {
        var b = new qp(a, a.xg());
        if (0 < a.ia.length) {
            var c = Dp(a.ia[a.ia.length - 1]);
            0 < c.length && (c = c[c.length - 1].clone(),
                c.appendTo(b),
                c.Ac() && Ep(c))
        }
        a.ia.push(b);
        a.trigger("page:add", a, b);
        b.xa().forEach(function (a) {
            b.trigger("element:add", b, a)
        });
        return b
    }

    function Fp(a, b, c, d) {
        var e = a.ia.indexOf(b),
            g = !0;
        !1 === d && (g = !1);
        Gp(b, a); -
        1 == e ? (a.ia.splice(c, 0, b),
            a.trigger("page:add", a, b, c, g)) : (a.ia.splice(c, 0, a.ia.splice(e, 1)[0]),
            a.trigger("page:move", a, b, e, c)); -
        1 == e && b.xa().forEach(function (a) {
            b.trigger("element:add", b, a)
        })
    }

    function Hp(a, b) {
        var c = Ap(a),
            d = a.ia.indexOf(b); -
        1 < d && (a.ia.splice(d, 1),
            b.remove(),
            c > d && c--,
            rp(a, Math.max(0, Math.min(a.ia.length - 1, c))),
            a.trigger("page:remove", a, b, d))
    }
    f.hb = function () {
        var a = [],
            b = this.ia.map(function (a) {
                return a.hb()
            });
        return a.concat.apply(a, b)
    };

    function Ip() {
        return G.ia.some(function (a) {
            return 0 < a.hb().length
        })
    }
    f.xa = function () {
        var a = [],
            b = this.ia.map(function (a) {
                return a.xa()
            });
        return a.concat.apply(a, b)
    };

    function Jp(a) {
        a = a.xa();
        var b = a.filter(function (a) {
            return a.Cj()
        });
        a.filter(function (a) {
            return a.Ju()
        }).forEach(function (a) {
            a.Jy().forEach(function (a) {
                b.push(a)
            })
        });
        return b
    }

    function Kp(a) {
        var b = {};
        Jp(a).filter(function (a) {
            return a.Ub()
        }).map(function (a) {
            return a.Ub()
        }).forEach(function (a) {
            Lp(vb, a) && (b[a.G()] = a)
        });
        return _.values(b)
    }

    function Mp(a) {
        return Jp(a).some(function (a) {
            return (a = a.Ub()) && !Lp(vb, a) ? !0 : !1
        })
    }
    f.mr = function (a) {
        return $.extend(!0, {}, this.Hq[a], this.qH[a])
    };

    function pp(a, b) {
        b = $.extend(!0, {}, b);
        (function (a) {
            var b = [];
            (a.pages || []).forEach(function (a) {
                (a.elements || []).forEach(function (a) {
                    "text" === a.type ? b.push(a) : "svg" === a.type && a.contents && a.contents.forEach(function (a) {
                        "text" === a.type && b.push(a)
                    })
                })
            });
            return b
        })(b).forEach(function (b) {
            var d = Object.keys(dc).map(function (a) {
                    return dc[a]
                }),
                e = b.style; -
            1 < d.indexOf(e) && (d = a.mr(e),
                void 0 === b.fontFamily && (b.fontFamily = d.fontFamily),
                void 0 === b.fontSize && (b.fontSize = d.fontSize))
        });
        return b
    }

    function Np(a) {
        function b(a, h) {
            if (Array.isArray(h))
                h.forEach(function (e) {
                    d = d && c(a, e);
                    "object" == typeof e && b(a, e)
                });
            else
                for (var k in h)
                    if (h.hasOwnProperty(k)) {
                        var l = h[k];
                        "invalid" === k && l ? (e = "Invalid " + (h.type || a),
                            d = !1) : "childRange" !== k || Op(l) || (e = "Invalid group childRange",
                            d = !1);
                        d = d && c(k, l);
                        "object" == typeof l && b(k, l)
                    }
        }

        function c(a, b) {
            return "number" === typeof b && isNaN(b) ? (e = "Invalid value NaN for " + a, !1) : !0
        }
        var d = !0,
            e = "";
        b("document", a);
        return {
            result: d,
            description: e
        }
    }

    function Op(a) {
        return !!(a && 2 === a.length && 0 < a[0] && a[1] >= a[0])
    }
    f.isEmpty = function () {
        return 0 < this.xa().length ? this.xa().every(function (a) {
            return a.rh
        }) : !0
    };
    f.z0 = function () {
        this.trigger("change:title", this);
        this.trigger("change", this)
    };
    f.resize = function (a, b) {
        this.Cc = a;
        this.Hk = b;
        this.ia.forEach(function (b) {
            b.resize(a)
        });
        this.trigger("resize");
        this.trigger("change")
    };
    f.CP = function (a, b, c) {
        this.Cc = b;
        this.Hk = c;
        this.ia.forEach(function (b, c) {
            b.CP(a.pages[c])
        });
        this.trigger("resize");
        this.trigger("change")
    };

    function Pp() {
        return G.ia.some(function (a) {
            return a.Iu()
        })
    };

    function Qp() {
        Error.captureStackTrace && Error.captureStackTrace(this, Qp)
    }
    Qp.prototype = Object.create(Error.prototype);

    function Rp() {
        Qp.call(this)
    }
    Rp.prototype = Object.create(Qp.prototype);

    function Sp() {
        Qp.call(this)
    }
    Sp.prototype = Object.create(Qp.prototype);

    function Tp() {
        Qp.call(this)
    }
    Tp.prototype = Object.create(Qp.prototype);

    function Up(a, b, c) {
        this.fa = a;
        this.EJ = b;
        this.X5 = c;
        this.path = "/documents"
    }

    function Vp(a) {
        var b = Hb,
            c;
        a: switch (c = Ib.EJ(),
            c) {
            case "NONE":
                c = "NONE";
                break a;
            case "LOG":
                c = "LOG";
                break a;
            case "THROW":
                c = "THROW";
                break a;
            default:
                throw Error("unknown DocumentDeserializationMode: " + c);
        }
        return new Up(b, c, a)
    }
    f = Up.prototype;
    f.duplicate = function (a) {
        return Qi(this.fa, this.path + "?duplicate\x3d" + encodeURIComponent(a.id), a).get(0).tap(Wp(this, "CreateDocumentResponseProto (duplicate)", Xp)).then(Yp)
    };
    f.delete = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?delete", null).return()
    };
    f.move = function (a, b, c) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?move", {
            owner: {
                user: b,
                brand: c
            }
        }).get(0).get("doc")
    };
    f.es = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?publicify", null).return()
    };
    f.Mw = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?unpublicify", null).return()
    };
    f.tI = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?brandPublicify", null).return()
    };
    f.uI = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?brandUnpublicify", null).return()
    };
    f.DB = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?templatify", null).return()
    };
    f.OB = function (a) {
        return Qi(this.fa, this.path + "/" + encodeURIComponent(a) + "?untemplatify", null).return()
    };
    f.getDocument = function (a) {
        a = [this.path, null != a.Fk ? "/" + encodeURIComponent(a.Fk) : "", "?includePages\x3d" + encodeURIComponent(String(!!a.OE))].join("");
        return Ii(this.fa, a).get(0).tap(Wp(this, "GetDocumentResponseProto", Zp)).then($p)
    };

    function aq(a, b) {
        b = [a.path + "?", null != b.na ? "\x26continuation\x3d" + encodeURIComponent(b.na) : "", null != b.ta ? "\x26designType\x3d" + encodeURIComponent(b.ta) : "", b.fr ? "\x26excludeApiDocuments" : "", b.lK ? "\x26excludeEmpty" : "", 0 < b.Aj.length ? "\x26ids\x3d" + encodeURIComponent(b.Aj.join(",")) : "", null != b.limit ? "\x26limit\x3d" + encodeURIComponent(b.limit.toString()) : "", null != b.oh ? "\x26brand\x3d" + encodeURIComponent(b.oh.Z) : "", null != b.oh && null != b.oh.user ? "\x26user\x3d" + encodeURIComponent(b.oh.user) : "", 0 < b.gG.length ? "\x26principalRoles\x3d" + encodeURIComponent(b.gG.join(",")) : "", b.JV ? "\x26public" : "", 0 < b.jQ.length ? "\x26withoutTags\x3d" + encodeURIComponent(b.jQ.join(",")) : ""].join("").replace("?\x26", "?");
        return Ii(a.fa, b).get(0).tap(Wp(a, "FindDocumentsResponseProto", bq)).then(function (a) {
            return {
                documents: a.documents.map(jk),
                continuation: a.continuation
            }
        })
    }

    function cq(a, b) {
        return Ii(a.fa, a.path + "/" + encodeURIComponent(b) + "/acl").get(0).tap(Wp(a, "GetDocumentAclResponseProto", dq)).then(eq)
    }

    function fq(a, b) {
        return Qi(a.fa, a.path + "/" + encodeURIComponent(b.document) + "/acl", b).get(0).tap(Wp(a, "UpdateDocumentAclResponseProto", gq)).then(hq)
    }
    f.search = function (a) {
        return Ii(this.fa, this.path + "/search?query\x3d" + encodeURIComponent(a.query)).get(0).tap(Wp(this, "SearchDocumentsResponseProto", iq)).then(jq)
    };

    function kq(a) {
        var b = yb;
        return Ii(b.fa, b.path + "/" + encodeURIComponent(a) + "/media").get(0).then(lq)
    }

    function Wp(a, b, c) {
        return function (d) {
            try {
                c(Ja(d))
            } catch (e) {
                switch (a.EJ) {
                    case "THROW":
                        throw e;
                    case "LOG":
                        a.X5.log("Failed deserialization of " + b, {
                            error: e
                        })
                }
            }
        }
    };

    function mq() {
        this.remix = this.edit = this.view = this["default"] = null
    }
    mq.prototype.US = function () {
        return this["default"]
    };
    mq.prototype.cl = function () {
        return this.view
    };
    mq.prototype.VS = function () {
        return this.edit
    };

    function nq(a) {
        var b = new mq;
        a && $.extend(b, a);
        return b
    }

    function oq(a) {
        this.width = a.width;
        this.height = a.height;
        this.url = a.url
    }

    function pq() {}

    function Yp(a) {
        return Object.freeze(R(pq, a))
    }
    pq.prototype.getDocument = function () {
        return jk(this.document)
    };
    pq.prototype.getSession = function () {
        return this.session
    };
    pq.prototype.Ab = function () {
        if (this.type)
            return qq(this.type)
    };

    function rq() {}

    function $p(a) {
        return Object.freeze(R(rq, a))
    }
    rq.prototype.getDocument = function () {
        return jk(this.document)
    };

    function sq() {}

    function eq(a) {
        return Object.freeze(R(sq, a))
    }
    sq.prototype.Wf = function () {
        return Object.freeze(R(tq, this.acl))
    };

    function vq() {}

    function wq(a) {
        var b = new vq;
        b.document = a;
        return b
    }

    function xq(a, b) {
        a.principalRoleChanges = b;
        return a
    }

    function yq() {}

    function hq(a) {
        return Object.freeze(R(yq, a))
    }
    yq.prototype.Wf = function () {
        return Object.freeze(R(tq, this.acl))
    };

    function zq() {}
    zq.prototype.F = function () {
        return this.height
    };
    zq.prototype.OK = function () {
        return this.images
    };
    zq.prototype.getVersion = function () {
        return this.version
    };
    zq.prototype.D = function () {
        return this.width
    };

    function Aq(a) {
        if (!a)
            return null;
        a = $.extend(new zq, a);
        if (a.images) {
            var b;
            b = (b = a.images) ? b.map(Bq) : null;
            a.images = b
        }
        return a
    }

    function Cq() {}
    Cq.prototype.ha = function () {
        return this.page
    };
    Cq.prototype.Aa = function () {
        return this.url
    };
    Cq.prototype.getKey = function () {
        return this.key
    };

    function Bq(a) {
        return a ? $.extend(new Cq, a) : null
    }

    function Dq() {}
    Dq.prototype.G = function () {
        return this.id
    };
    Dq.prototype.getVersion = function () {
        return this.version
    };
    Dq.prototype.OK = function () {
        return this.images
    };

    function Eq(a) {
        a = R(Dq, a);
        var b = a.images;
        if (b)
            for (var c in b)
                b[c] = Fq(b[c]);
        return a
    }

    function lq(a) {
        return a.map(Eq)
    }

    function Gq() {}

    function jq(a) {
        return Object.freeze(R(Gq, a))
    }
    Gq.prototype.Ry = function () {
        return this.results ? this.results.map(Hq) : []
    };

    function Iq() {}

    function Hq(a) {
        return Object.freeze(R(Iq, a))
    }
    Iq.prototype.Jb = function () {
        return this.title
    };
    Iq.prototype.G = function () {
        return this.id
    };
    Iq.prototype.Vd = function () {
        var a = this.thumbnail;
        return new oq({
            width: A("width", a),
            height: A("height", a),
            url: D("url", a)
        })
    };

    function tq() {}
    tq.prototype.Sy = function () {
        return this.rules.map(Jq)
    };

    function Kq() {}
    Kq.prototype.Ab = function () {
        return this.type
    };
    Kq.prototype.tj = function () {
        var a = this.Ab();
        Da("USER" == a || "BRAND" == a, "only USER or BRAND assignments have principals");
        return Object.freeze(R(Lq, this.principal))
    };
    Kq.prototype.Ii = function () {
        return this.role
    };
    Kq.prototype.Ve = function () {
        return this.origin ? Object.freeze(R(Mq, this.origin)) : null
    };

    function Jq(a) {
        return Object.freeze(R(Kq, a))
    }

    function Lq() {}
    Lq.prototype.wa = function () {
        return this.brand
    };
    Lq.prototype.Qa = function () {
        return this.user
    };

    function Mq() {}
    Mq.prototype.Ab = function () {
        return this.type
    };
    Mq.prototype.G = function () {
        return this.id
    };

    function Nq(a) {
        this.principal = a.oh;
        this.roleChange = a.V5;
        this.origin = a.origin
    }

    function Oq(a, b, c) {
        return new Nq({
            oh: {
                user: a,
                brand: b
            },
            V5: {
                op: "SET",
                role: c.toString()
            },
            origin: {
                type: "MANUAL"
            }
        })
    }

    function Pq() {}
    f = Pq.prototype;
    f.nu = function () {
        return this.extensions
    };
    f.G = function () {
        return this.id
    };
    f.Ue = function () {
        return this.draft
    };
    f.wu = function () {
        return this.tags
    };

    function Qq(a, b) {
        if ((a = a.draft) && a.imageSets && a.imageSets.thumbnail) {
            a = a.imageSets.thumbnail.images;
            for (var c = 0; c < a.length; c++)
                if (a[c].page == b + 1)
                    return a[c].url
        }
        return null
    }
    f.Jb = function () {
        try {
            return this.draft.content.title.trim() || null
        } catch (a) {
            return null
        }
    };
    f.getVersion = function () {
        var a = this.draft;
        return a ? a.version : -1
    };

    function hk(a, b) {
        switch (b) {
            case "NONE":
                return "NONE";
            case "EDITOR":
                return "EDITOR";
            case "OWNER":
                return "OWNER";
            case "REMIXER":
                return "REMIXER";
            case "VIEWER":
                return "VIEWER";
            default:
                throw Error('unexpected accessRole type for property "' + a + '": ' + b);
        }
    }
    var Rq = {
        NONE: 0,
        VIEWER: 1,
        REMIXER: 2,
        EDITOR: 3,
        OWNER: 4
    };

    function jk(a) {
        var b = new Pq;
        $.extend(b, a);
        b.extensions = nq(a.extensions);
        return b
    };

    function Sq(a, b) {
        switch (b) {
            case "MINIMIZE_HEIGHT":
                return "MINIMIZE_HEIGHT";
            case "MAXIMIZE_FONT_SIZE":
                return "MAXIMIZE_FONT_SIZE";
            default:
                throw new TypeError('expected ReflowMode for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Tq(a, b) {
        switch (b) {
            case "rows":
                return "rows";
            case "columns":
                return "columns";
            case "item":
                return "item";
            default:
                throw new TypeError('expected GridStructureType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Uq(a, b) {
        switch (b) {
            case "NON_ZERO":
                return "NON_ZERO";
            case "EVEN_ODD":
                return "EVEN_ODD";
            default:
                throw new TypeError('expected ShapeElementPathFillRule for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Wq(a, b) {
        switch (b) {
            case "CHART":
                return "CHART";
            default:
                throw new TypeError('expected GroupGeneratorType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Xq(a, b) {
        switch (b) {
            case "BAR":
                return "BAR";
            case "PIE":
                return "PIE";
            case "LINE":
                return "LINE";
            case "DONUT":
                return "DONUT";
            default:
                throw new TypeError('expected ChartType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Yq(a, b) {
        switch (b) {
            case "INTERPOLATE":
                return "INTERPOLATE";
            case "PALETTE":
                return "PALETTE";
            default:
                throw new TypeError('expected ColoringType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Zq(a, b) {
        switch (b) {
            case "RGB":
                return "RGB";
            case "HSV":
                return "HSV";
            case "HSL":
                return "HSL";
            case "LAB":
                return "LAB";
            case "HCL":
                return "HCL";
            default:
                throw new TypeError('expected ColorSpace for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function $q(a) {
        this.fontFamily = a.fontFamily;
        this.fontSize = a.fontSize;
        this.bold = a.bold;
        this.v = a.v;
        this.Fj = a.Fj;
        this.letterSpacing = a.letterSpacing;
        this.lineHeight = a.lineHeight;
        this.color = a.color
    }
    f = $q.prototype;
    f.dd = function () {
        return this.fontSize
    };
    f.Iy = function () {
        return this.Fj
    };
    f.rr = function () {
        return this.letterSpacing
    };
    f.$k = function () {
        return this.lineHeight
    };
    f.$b = function () {
        return this.color
    };

    function ar(a) {
        return new $q({
            fontFamily: F("fontFamily", a),
            fontSize: A("fontSize", a),
            bold: Ma("bold", a),
            v: Ma("italic", a),
            Fj: F("justification", a),
            letterSpacing: A("letterSpacing", a),
            lineHeight: A("lineHeight", a),
            color: F("color", a)
        })
    }

    function br(a) {
        this.title = a.title;
        this.Xn = a.Xn;
        this.body = a.body
    }
    br.prototype.Jb = function () {
        return this.title
    };

    function cr(a) {
        return new br({
            title: Pa(ar, "title", a),
            Xn: Pa(ar, "subtitle", a),
            body: Pa(ar, "body", a)
        })
    }

    function dr(a) {
        this.ta = a.ta;
        this.title = a.title;
        this.description = a.description;
        this.Be = a.Be || [];
        this.Hq = a.Hq;
        this.OR = a.OR;
        this.ia = a.ia || [];
        this.doctype = a.doctype
    }
    dr.prototype.Jb = function () {
        return this.title
    };
    dr.prototype.pg = function () {
        return this.description
    };
    dr.prototype.Zk = function () {
        return this.Be
    };
    dr.prototype.Rb = function () {
        return this.ia
    };

    function er(a) {
        return new dr({
            ta: D("layout", a),
            title: F("title", a),
            description: F("description", a),
            Be: Fa.$d("keywords", a),
            Hq: Pa(cr, "canvaDefaultFonts", a),
            OR: Pa(cr, "defaultFonts", a),
            ia: Qa(fr, "pages", a),
            doctype: Pa(np, "doctype", a)
        })
    }

    function gr(a) {
        this.height = a.height;
        this.width = a.width;
        this.cd = a.cd;
        this.elements = a.elements || [];
        this.type = a.type
    }
    f = gr.prototype;
    f.F = function () {
        return this.height
    };
    f.D = function () {
        return this.width
    };
    f.xa = function () {
        return this.elements
    };
    f.Ab = function () {
        return this.type
    };

    function fr(a) {
        return new gr({
            height: z("height", a),
            width: z("width", a),
            cd: A("dpi", a),
            elements: Qa(hr, "elements", a),
            type: F("type", a)
        })
    }
    f.addElement = function (a) {
        this.elements.push(a)
    };

    function ir(a) {
        this.type = a.type;
        this.top = a.top;
        this.left = a.left;
        this.height = a.height;
        this.width = a.width;
        this.Ob = a.Ob;
        this.rotation = a.rotation;
        this.mc = a.mc;
        this.Ac = a.Ac;
        this.vd = a.vd;
        this.gh = a.gh;
        this.ug = a.ug;
        this.backgroundColor = a.backgroundColor;
        this.Ra = a.Ra;
        this.ua = a.ua;
        this.va = a.va;
        this.Hc = a.Hc;
        this.filter = a.filter;
        this.style = a.style;
        this.html = a.html;
        this.fontFamily = a.fontFamily;
        this.fontSize = a.fontSize;
        this.color = a.color;
        this.bold = a.bold;
        this.v = a.v;
        this.eu = a.eu;
        this.Fj = a.Fj;
        this.letterSpacing = a.letterSpacing;
        this.lineHeight = a.lineHeight;
        this.Uu = a.Uu || [];
        this.padding = a.padding;
        this.textTransform = a.textTransform;
        this.border = a.border;
        this.ZT = a.ZT || [];
        this.PV = a.PV;
        this.link = a.link;
        this.spacing = a.spacing;
        this.items = a.items || [];
        this.contents = a.contents || [];
        this.scale = a.scale;
        this.wm = a.wm || [];
        this.dk = a.dk;
        this.index = a.index;
        this.viewBox = a.viewBox;
        this.xl = a.xl || [];
        this.tR = a.tR || [];
        this.NS = a.NS;
        this.Pb = a.Pb
    }
    f = ir.prototype;
    f.Ab = function () {
        return this.type
    };
    f.N = function () {
        return this.top
    };
    f.Y = function () {
        return this.left
    };
    f.F = function () {
        return this.height
    };
    f.D = function () {
        return this.width
    };
    f.wE = function () {
        return this.Ob
    };
    f.eb = function () {
        return this.rotation
    };
    f.PK = function () {
        return this.ug
    };
    f.ah = function () {
        return this.backgroundColor
    };
    f.Em = function () {
        return this.Ra
    };
    f.Ky = function () {
        return this.ua
    };
    f.Ly = function () {
        return this.va
    };
    f.NK = function () {
        return this.filter
    };
    f.dd = function () {
        return this.fontSize
    };
    f.$b = function () {
        return this.color
    };
    f.Iy = function () {
        return this.Fj
    };
    f.rr = function () {
        return this.letterSpacing
    };
    f.$k = function () {
        return this.lineHeight
    };
    f.sr = function () {
        return this.padding
    };
    f.Fm = function () {
        return this.link
    };
    f.le = function () {
        return this.spacing
    };
    f.uf = function () {
        return this.items
    };
    f.ea = function () {
        return this.index
    };

    function hr(a) {
        return new ir({
            type: D("type", a),
            top: z("top", a),
            left: z("left", a),
            height: z("height", a),
            width: z("width", a),
            Ob: A("transparency", a),
            rotation: A("rotation", a),
            mc: A("flipOrientation", a),
            Ac: Ma("isBackground", a),
            vd: Ma("isRecolorable", a),
            gh: Ma("isCutout", a),
            ug: Ma("isDark", a),
            backgroundColor: F("backgroundColor", a),
            Ra: Pa(jr, "imageBox", a),
            ua: F("mediaId", a),
            va: A("mediaVersion", a),
            Hc: Ma("mediaApproved", a),
            filter: Pa(kr, "filter", a),
            style: F("style", a),
            html: F("html", a),
            fontFamily: F("fontFamily", a),
            fontSize: A("fontSize", a),
            color: F("color", a),
            bold: Ma("bold", a),
            v: Ma("italic", a),
            eu: Pa(Gm, "fontMedia", a),
            Fj: F("justification", a),
            letterSpacing: A("letterSpacing", a),
            lineHeight: A("lineHeight", a),
            Uu: Ha.$d("lineLengths", a),
            padding: A("padding", a),
            textTransform: F("textTransform", a),
            border: Pa(lr, "border", a),
            ZT: Qa(mr, "kerning", a),
            PV: Sa(Sq, "reflowMode", a),
            link: F("link", a),
            spacing: A("spacing", a),
            items: Qa(nr, "items", a),
            contents: Qa(or, "contents", a),
            scale: A("scale", a),
            wm: Qa(pr, "fillColors", a),
            dk: Pa(qr, "svgMetadata", a),
            index: A("index", a),
            viewBox: Pa(jr, "viewBox", a),
            xl: Qa(rr, "paths", a),
            tR: Ha.$d("childRange", a),
            NS: Sa(Wq, "generatorType", a),
            Pb: Pa(sr, "chart", a)
        })
    }

    function tr(a) {
        this.type = a.type;
        this.top = a.top;
        this.left = a.left;
        this.height = a.height;
        this.width = a.width;
        this.mc = a.mc;
        this.backgroundColor = a.backgroundColor;
        this.Ra = a.Ra;
        this.ua = a.ua;
        this.va = a.va;
        this.Hc = a.Hc;
        this.filter = a.filter;
        this.html = a.html;
        this.fontFamily = a.fontFamily;
        this.fontSize = a.fontSize;
        this.color = a.color;
        this.bold = a.bold;
        this.v = a.v;
        this.eu = a.eu;
        this.Fj = a.Fj;
        this.letterSpacing = a.letterSpacing;
        this.lineHeight = a.lineHeight;
        this.Uu = a.Uu || [];
        this.textTransform = a.textTransform;
        this.index = a.index
    }
    f = tr.prototype;
    f.Ab = function () {
        return this.type
    };
    f.N = function () {
        return this.top
    };
    f.Y = function () {
        return this.left
    };
    f.F = function () {
        return this.height
    };
    f.D = function () {
        return this.width
    };
    f.ah = function () {
        return this.backgroundColor
    };
    f.Em = function () {
        return this.Ra
    };
    f.Ky = function () {
        return this.ua
    };
    f.Ly = function () {
        return this.va
    };
    f.NK = function () {
        return this.filter
    };
    f.dd = function () {
        return this.fontSize
    };
    f.$b = function () {
        return this.color
    };
    f.Iy = function () {
        return this.Fj
    };
    f.rr = function () {
        return this.letterSpacing
    };
    f.$k = function () {
        return this.lineHeight
    };
    f.ea = function () {
        return this.index
    };

    function or(a) {
        return new tr({
            type: D("type", a),
            top: A("top", a),
            left: A("left", a),
            height: A("height", a),
            width: A("width", a),
            mc: A("flipOrientation", a),
            backgroundColor: F("backgroundColor", a),
            Ra: Pa(jr, "imageBox", a),
            ua: F("mediaId", a),
            va: A("mediaVersion", a),
            Hc: Ma("mediaApproved", a),
            filter: Pa(kr, "filter", a),
            html: F("html", a),
            fontFamily: F("fontFamily", a),
            fontSize: A("fontSize", a),
            color: F("color", a),
            bold: Ma("bold", a),
            v: Ma("italic", a),
            eu: Pa(Gm, "fontMedia", a),
            Fj: F("justification", a),
            letterSpacing: A("letterSpacing", a),
            lineHeight: A("lineHeight", a),
            Uu: Ha.$d("lineLengths", a),
            textTransform: F("textTransform", a),
            index: z("index", a)
        })
    }

    function ur(a) {
        this.width = a.width
    }
    ur.prototype.D = function () {
        return this.width
    };

    function lr(a) {
        return new ur({
            width: z("width", a)
        })
    }

    function vr(a) {
        this.lV = a.lV;
        this.mt = a.mt
    }

    function mr(a) {
        return new vr({
            lV: D("pair", a),
            mt: z("adjustment", a)
        })
    }

    function wr(a) {
        this.type = a.type;
        this.width = a.width;
        this.height = a.height;
        this.children = a.children || []
    }
    wr.prototype.Ab = function () {
        return this.type
    };
    wr.prototype.D = function () {
        return this.width
    };
    wr.prototype.F = function () {
        return this.height
    };
    wr.prototype.getChildren = function () {
        return this.children
    };

    function nr(a) {
        return new wr({
            type: Sa(Tq, "type", a),
            width: A("width", a),
            height: A("height", a),
            children: Qa(nr, "children", a)
        })
    }

    function xr(a) {
        this.top = a.top;
        this.left = a.left;
        this.width = a.width;
        this.height = a.height
    }
    xr.prototype.N = function () {
        return this.top
    };
    xr.prototype.Y = function () {
        return this.left
    };
    xr.prototype.D = function () {
        return this.width
    };
    xr.prototype.F = function () {
        return this.height
    };

    function jr(a) {
        return new xr({
            top: z("top", a),
            left: z("left", a),
            width: z("width", a),
            height: z("height", a)
        })
    }

    function yr(a) {
        this.index = a.index;
        this.color = a.color
    }
    yr.prototype.ea = function () {
        return this.index
    };
    yr.prototype.$b = function () {
        return this.color
    };

    function pr(a) {
        return new yr({
            index: z("index", a),
            color: D("color", a)
        })
    }

    function zr(a) {
        this.viewBox = a.viewBox;
        this.fX = a.fX || [];
        this.uV = a.uV || [];
        this.rR = a.rR;
        this.jX = a.jX
    }

    function qr(a) {
        return new zr({
            viewBox: Na(jr, "viewBox", a),
            fX: Qa(jr, "textHolderBoxes", a),
            uV: Qa(jr, "photoHolderBoxes", a),
            rR: Pa(jr, "centerBox", a),
            jX: Ma("tile", a)
        })
    }

    function Ar(a) {
        this.blur = a.blur;
        this.brightness = a.brightness;
        this.contrast = a.contrast;
        this.saturation = a.saturation;
        this.jf = a.jf;
        this.vignette = a.vignette;
        this.Qf = a.Qf;
        this.qh = a.qh
    }
    Ar.prototype.ku = function () {
        return this.brightness
    };
    Ar.prototype.$S = function () {
        return this.saturation
    };

    function kr(a) {
        return new Ar({
            blur: A("blur", a),
            brightness: A("brightness", a),
            contrast: A("contrast", a),
            saturation: A("saturation", a),
            jf: A("tint", a),
            vignette: A("vignette", a),
            Qf: A("xpro", a),
            qh: A("tintAmount", a)
        })
    }

    function Br(a) {
        this.fill = a.fill;
        this.Rk = a.Rk;
        this.d = a.d
    }

    function rr(a) {
        return new Br({
            fill: D("fill", a),
            Rk: Sa(Uq, "fillRule", a),
            d: D("d", a)
        })
    }

    function Cr(a) {
        this.name = a.name;
        this.cells = a.cells || []
    }
    Cr.prototype.getName = function () {
        return this.name
    };

    function Dr(a) {
        return new Cr({
            name: F("name", a),
            cells: Fa.$d("cells", a)
        })
    }

    function Er(a) {
        this.Da = a.Da || []
    }

    function Fr(a) {
        return new Er({
            Da: Qa(Dr, "columns", a)
        })
    }

    function Gr(a) {
        this.data = a.data;
        this.$T = a.$T;
        this.ed = a.ed;
        this.Cz = a.Cz;
        this.AR = a.AR;
        this.Ar = a.Ar;
        this.Ri = a.Ri;
        this.wi = a.wi;
        this.xV = a.xV;
        this.eR = a.eR;
        this.lU = a.lU;
        this.bS = a.bS
    }
    Gr.prototype.getData = function () {
        return this.data
    };
    Gr.prototype.qr = function () {
        return this.ed
    };
    Gr.prototype.QK = function () {
        return this.Cz
    };
    Gr.prototype.Hi = function () {
        return this.Ri
    };

    function sr(a) {
        return new Gr({
            data: Na(Fr, "data", a),
            $T: A("labelColumn", a),
            ed: Na(ar, "labelTextStyle", a),
            Cz: Pa(Gm, "labelFontMedia", a),
            AR: Ra(Yq, "coloringType", a),
            Ar: Pa(Hr, "interpolation", a),
            Ri: Pa(Ir, "palette", a),
            wi: Ra(Xq, "chartType", a),
            xV: Pa(Jr, "pie", a),
            eR: Pa(Kr, "bar", a),
            lU: Pa(Lr, "line", a),
            bS: Pa(Mr, "donut", a)
        })
    }

    function Nr(a) {
        this.spacing = a.spacing;
        this.padding = a.padding
    }
    Nr.prototype.le = function () {
        return this.spacing
    };
    Nr.prototype.sr = function () {
        return this.padding
    };

    function Jr(a) {
        return new Nr({
            spacing: A("spacing", a),
            padding: A("padding", a)
        })
    }

    function Or(a) {
        this.spacing = a.spacing;
        this.padding = a.padding
    }
    Or.prototype.le = function () {
        return this.spacing
    };
    Or.prototype.sr = function () {
        return this.padding
    };

    function Kr(a) {
        return new Or({
            spacing: A("spacing", a),
            padding: A("padding", a)
        })
    }

    function Pr(a) {
        this.spacing = a.spacing;
        this.padding = a.padding
    }
    Pr.prototype.le = function () {
        return this.spacing
    };
    Pr.prototype.sr = function () {
        return this.padding
    };

    function Lr(a) {
        return new Pr({
            spacing: A("spacing", a),
            padding: A("padding", a)
        })
    }

    function Qr(a) {
        this.spacing = a.spacing;
        this.padding = a.padding
    }
    Qr.prototype.le = function () {
        return this.spacing
    };
    Qr.prototype.sr = function () {
        return this.padding
    };

    function Mr(a) {
        return new Qr({
            spacing: A("spacing", a),
            padding: A("padding", a)
        })
    }

    function Rr(a) {
        this.zR = a.zR;
        this.from = a.from;
        this.to = a.to
    }
    Rr.prototype.Yk = function () {
        return this.from
    };

    function Hr(a) {
        return new Rr({
            zR: Ra(Zq, "colorSpace", a),
            from: D("from", a),
            to: D("to", a)
        })
    }

    function Sr(a) {
        this.rd = a.rd || []
    }
    Sr.prototype.og = function () {
        return this.rd
    };

    function Ir(a) {
        return new Sr({
            rd: Fa.$d("colors", a)
        })
    };

    function Tr(a, b) {
        switch (b) {
            case "USER":
                return "USER";
            case "BRAND":
                return "BRAND";
            case "EXTENSION":
                return "EXTENSION";
            case "DEFAULT":
                return "DEFAULT";
            default:
                throw new TypeError('expected AccessControlListActorType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Ur(a, b) {
        switch (b) {
            case "NONE":
                return "NONE";
            case "OWNER":
                return "OWNER";
            case "VIEWER":
                return "VIEWER";
            case "REMIXER":
                return "REMIXER";
            case "EDITOR":
                return "EDITOR";
            default:
                throw new TypeError('expected AccessControlListRole for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Vr(a, b) {
        switch (b) {
            case "MANUAL":
                return "MANUAL";
            case "FOLDER":
                return "FOLDER";
            default:
                throw new TypeError('expected AccessControlListOriginType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Wr(a, b) {
        switch (b) {
            case "CENTIMETERS":
                return "CENTIMETERS";
            case "INCHES":
                return "INCHES";
            case "MILLIMETERS":
                return "MILLIMETERS";
            case "PIXELS":
                return "PIXELS";
            default:
                throw new TypeError('expected Units for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Xr(a, b) {
        switch (b) {
            case "CENTIMETERS":
                return "CENTIMETERS";
            case "INCHES":
                return "INCHES";
            case "MILLIMETERS":
                return "MILLIMETERS";
            case "PIXELS":
                return "PIXELS";
            default:
                throw new TypeError('expected Units for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Yr(a, b) {
        switch (b) {
            case "web-1":
                return "web-1";
            case "web-2":
                return "web-2";
            case "android-1":
                return "android-1";
            default:
                throw new TypeError('expected SchemaVersion for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Zr(a, b) {
        switch (b) {
            case "EDITING_AFFECTED":
                return "EDITING_AFFECTED";
            case "RENDERING_AFFECTED":
                return "RENDERING_AFFECTED";
            case "UNREPRESENTABLE":
                return "UNREPRESENTABLE";
            default:
                throw new TypeError('expected ConversionLoss for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function $r(a) {
        this.rules = a.rules || [];
        this.version = a.version;
        this.mn = a.mn
    }
    $r.prototype.Sy = function () {
        return this.rules
    };
    $r.prototype.getVersion = function () {
        return this.version
    };

    function as(a) {
        return new $r({
            rules: Qa(bs, "rules", a),
            version: z("version", a),
            mn: Na(cs, "owner", a)
        })
    }

    function ds(a) {
        this.type = a.type;
        this.oh = a.oh;
        this.Fn = a.Fn;
        this.origin = a.origin;
        this.timestamp = a.timestamp
    }
    f = ds.prototype;
    f.Ab = function () {
        return this.type
    };
    f.tj = function () {
        return this.oh
    };
    f.Ii = function () {
        return this.Fn
    };
    f.Ve = function () {
        return this.origin
    };
    f.xr = function () {
        return this.timestamp
    };

    function bs(a) {
        return new ds({
            type: Ra(Tr, "type", a),
            oh: Pa(cs, "principal", a),
            Fn: Ra(Ur, "role", a),
            origin: Pa(es, "origin", a),
            timestamp: A("timestamp", a)
        })
    }

    function fs(a) {
        this.Z = a.Z;
        this.user = a.user
    }
    fs.prototype.wa = function () {
        return this.Z
    };
    fs.prototype.Qa = function () {
        return this.user
    };

    function cs(a) {
        return new fs({
            Z: D("brand", a),
            user: F("user", a)
        })
    }

    function gs(a) {
        this.type = a.type;
        this.id = a.id
    }
    gs.prototype.Ab = function () {
        return this.type
    };
    gs.prototype.G = function () {
        return this.id
    };

    function es(a) {
        return new gs({
            type: Ra(Vr, "type", a),
            id: F("id", a)
        })
    }

    function hs(a) {
        this.default = a.default;
        this.view = a.view;
        this.UV = a.UV;
        this.TJ = a.TJ
    }
    hs.prototype.US = function () {
        return this.default
    };
    hs.prototype.cl = function () {
        return this.view
    };
    hs.prototype.VS = function () {
        return this.TJ
    };

    function is(a) {
        return new hs({
            default: F("default", a),
            view: F("view", a),
            UV: F("remix", a),
            TJ: F("edit", a)
        })
    }

    function js(a) {
        this.type = a.type
    }

    function wp(a) {
        switch (a.type) {
            case "REFERENCE":
                return {
                    type: "REFERENCE",
                    id: hb("id", a.id),
                    version: db("version", a.version)
                };
            case "INLINE":
                return {
                    type: "INLINE",
                    width: db("width", a.width),
                    height: db("height", a.height),
                    units: lb(Wr, "units", a.units)
                };
            default:
                throw Error();
        }
    }

    function np(a) {
        switch (a.type) {
            case "REFERENCE":
                return Ba("REFERENCE" === a.type),
                    new ks({
                        id: D("id", a),
                        version: z("version", a)
                    });
            case "INLINE":
                return Ba("INLINE" === a.type),
                    new ls({
                        width: z("width", a),
                        height: z("height", a),
                        units: Ra(Xr, "units", a)
                    });
            default:
                throw Error("unknown case: " + a.type);
        }
    }

    function ks(a) {
        this.type = "REFERENCE";
        this.id = a.id;
        this.version = a.version
    }
    t(ks, js);
    ks.prototype.G = function () {
        return this.id
    };
    ks.prototype.getVersion = function () {
        return this.version
    };

    function ls(a) {
        this.type = "INLINE";
        this.width = a.width;
        this.height = a.height;
        this.units = a.units
    }
    t(ls, js);
    ls.prototype.D = function () {
        return this.width
    };
    ls.prototype.F = function () {
        return this.height
    };
    ls.prototype.wj = function () {
        return this.units
    };

    function ms(a) {
        this.id = a.id;
        this.pf = a.pf;
        this.vm = a.vm;
        this.tags = a.tags || [];
        this.Rf = a.Rf;
        this.ar = a.ar;
        this.version = a.version;
        this.timestamp = a.timestamp
    }
    f = ms.prototype;
    f.G = function () {
        return this.id
    };
    f.nu = function () {
        return this.vm
    };
    f.wu = function () {
        return this.tags
    };
    f.Wf = function () {
        return this.Rf
    };
    f.Ue = function () {
        return this.ar
    };
    f.getVersion = function () {
        return this.version
    };
    f.xr = function () {
        return this.timestamp
    };

    function ns(a) {
        return new ms({
            id: D("id", a),
            pf: z("creationDate", a),
            vm: Na(is, "extensions", a),
            tags: Fa.$d("tags", a),
            Rf: Pa(as, "acl", a),
            ar: Na(os, "draft", a),
            version: z("version", a),
            timestamp: A("timestamp", a)
        })
    }

    function ps(a) {
        this.content = a.content;
        this.version = a.version;
        this.timestamp = a.timestamp;
        this.Bd = a.Bd;
        this.mz = a.mz
    }
    ps.prototype.getContent = function () {
        return this.content
    };
    ps.prototype.getVersion = function () {
        return this.version
    };
    ps.prototype.xr = function () {
        return this.timestamp
    };
    ps.prototype.wc = function () {
        return this.Bd
    };

    function os(a) {
        return new ps({
            content: Na(qs, "content", a),
            version: z("version", a),
            timestamp: z("timestamp", a),
            Bd: z("pageCount", a),
            mz: Na(rs, "imageSets", a)
        })
    }

    function ss(a) {
        this.ta = a.ta;
        this.title = a.title;
        this.description = a.description;
        this.Be = a.Be || [];
        this.doctype = a.doctype
    }
    ss.prototype.Jb = function () {
        return this.title
    };
    ss.prototype.pg = function () {
        return this.description
    };
    ss.prototype.Zk = function () {
        return this.Be
    };

    function qs(a) {
        return new ss({
            ta: D("layout", a),
            title: F("title", a),
            description: F("description", a),
            Be: Fa.$d("keywords", a),
            doctype: Pa(np, "doctype", a)
        })
    }

    function ts(a) {
        this.bd = a.bd;
        this.wv = a.wv
    }
    ts.prototype.Vd = function () {
        return this.bd
    };

    function rs(a) {
        return new ts({
            bd: Na(us, "thumbnail", a),
            wv: Pa(us, "preview", a)
        })
    }

    function vs(a) {
        this.height = a.height;
        this.width = a.width;
        this.version = a.version;
        this.images = a.images || []
    }
    vs.prototype.F = function () {
        return this.height
    };
    vs.prototype.D = function () {
        return this.width
    };
    vs.prototype.getVersion = function () {
        return this.version
    };
    vs.prototype.OK = function () {
        return this.images
    };

    function us(a) {
        return new vs({
            height: z("height", a),
            width: z("width", a),
            version: z("version", a),
            images: Qa(ws, "images", a)
        })
    }

    function xs(a) {
        this.bucket = a.bucket;
        this.key = a.key;
        this.page = a.page;
        this.url = a.url
    }
    xs.prototype.getKey = function () {
        return this.key
    };
    xs.prototype.ha = function () {
        return this.page
    };
    xs.prototype.Aa = function () {
        return this.url
    };

    function ws(a) {
        return new xs({
            bucket: D("bucket", a),
            key: D("key", a),
            page: z("page", a),
            url: F("url", a)
        })
    }

    function ys(a) {
        this.width = a.width;
        this.height = a.height;
        this.url = a.url
    }
    ys.prototype.D = function () {
        return this.width
    };
    ys.prototype.F = function () {
        return this.height
    };
    ys.prototype.Aa = function () {
        return this.url
    };

    function zs(a) {
        return new ys({
            width: A("width", a),
            height: A("height", a),
            url: D("url", a)
        })
    }

    function As(a) {
        this.id = a.id;
        this.title = a.title;
        this.TZ = a.TZ || new Map
    }
    As.prototype.G = function () {
        return this.id
    };
    As.prototype.Jb = function () {
        return this.title
    };

    function Bs(a) {
        this.Fk = a.Fk;
        this.La = a.La;
        this.Zg = a.Zg;
        this.OE = a.OE;
        this.M0 = a.M0;
        this.SZ = a.SZ || new Map;
        this.us = a.us
    }
    Bs.prototype.getSession = function () {
        return this.La
    };
    Bs.prototype.getExtension = function () {
        return this.Zg
    };

    function Cs(a) {
        this.type = a.type;
        this.id = a.id;
        this.version = a.version
    }
    Cs.prototype.G = function () {
        return this.id
    };
    Cs.prototype.getVersion = function () {
        return this.version
    };

    function Ds(a) {
        switch (a.type) {
            case "RASTER":
                return Ba("RASTER" === a.type),
                    new Es({
                        id: D("id", a),
                        version: z("version", a),
                        files: Qa(Fs, "files", a)
                    });
            case "VECTOR":
                return Ba("VECTOR" === a.type),
                    new Gs({
                        id: D("id", a),
                        version: z("version", a),
                        files: Qa(Fs, "files", a)
                    });
            case "DESIGN":
                return Ba("DESIGN" === a.type),
                    new Hs({
                        id: D("id", a),
                        version: z("version", a),
                        files: Qa(Fs, "files", a)
                    });
            case "FONT":
                return Ba("FONT" === a.type),
                    new Is({
                        id: D("id", a),
                        version: z("version", a),
                        files: Qa(Js, "files", a)
                    });
            case "ELEMENT_GROUP":
                return Ba("ELEMENT_GROUP" === a.type),
                    new Ks({
                        id: D("id", a),
                        version: z("version", a),
                        files: Qa(Fs, "files", a)
                    });
            case "UNKNOWN":
                return Ba("UNKNOWN" === a.type),
                    new Ls({
                        id: D("id", a),
                        version: z("version", a),
                        files: Qa(Ms, "files", a)
                    });
            default:
                throw Error("unknown case: " + a.type);
        }
    }

    function Es(a) {
        Cs.call(this, {
            type: "RASTER",
            id: a.id,
            version: a.version,
            files: a.files
        });
        this.files = a.files || []
    }
    t(Es, Cs);
    Es.prototype.Dc = function () {
        return this.files
    };

    function Gs(a) {
        Cs.call(this, {
            type: "VECTOR",
            id: a.id,
            version: a.version,
            files: a.files
        });
        this.files = a.files || []
    }
    t(Gs, Cs);
    Gs.prototype.Dc = function () {
        return this.files
    };

    function Hs(a) {
        Cs.call(this, {
            type: "DESIGN",
            id: a.id,
            version: a.version,
            files: a.files
        });
        this.files = a.files || []
    }
    t(Hs, Cs);
    Hs.prototype.Dc = function () {
        return this.files
    };

    function Is(a) {
        Cs.call(this, {
            type: "FONT",
            id: a.id,
            version: a.version,
            files: a.files
        });
        this.files = a.files || []
    }
    t(Is, Cs);
    Is.prototype.Dc = function () {
        return this.files
    };

    function Ks(a) {
        Cs.call(this, {
            type: "ELEMENT_GROUP",
            id: a.id,
            version: a.version,
            files: a.files
        });
        this.files = a.files || []
    }
    t(Ks, Cs);
    Ks.prototype.Dc = function () {
        return this.files
    };

    function Ls(a) {
        Cs.call(this, {
            type: "UNKNOWN",
            id: a.id,
            version: a.version,
            files: a.files
        });
        this.files = a.files || []
    }
    t(Ls, Cs);
    Ls.prototype.Dc = function () {
        return this.files
    };

    function Ns(a) {
        this.url = a.url;
        this.width = a.width;
        this.height = a.height;
        this.Rw = a.Rw;
        this.Wh = a.Wh
    }
    Ns.prototype.Aa = function () {
        return this.url
    };
    Ns.prototype.D = function () {
        return this.width
    };
    Ns.prototype.F = function () {
        return this.height
    };
    Ns.prototype.uE = function () {
        return this.Wh
    };

    function Fs(a) {
        return new Ns({
            url: D("url", a),
            width: z("width", a),
            height: z("height", a),
            Rw: La("watermarked", a),
            Wh: Sa(Os, "quality", a)
        })
    }

    function Ps(a) {
        this.url = a.url
    }
    Ps.prototype.Aa = function () {
        return this.url
    };

    function Js(a) {
        return new Ps({
            url: D("url", a)
        })
    }

    function Qs(a) {
        this.url = a.url;
        this.width = a.width;
        this.height = a.height;
        this.Rw = a.Rw;
        this.Wh = a.Wh
    }
    Qs.prototype.Aa = function () {
        return this.url
    };
    Qs.prototype.D = function () {
        return this.width
    };
    Qs.prototype.F = function () {
        return this.height
    };
    Qs.prototype.uE = function () {
        return this.Wh
    };

    function Ms(a) {
        return new Qs({
            url: D("url", a),
            width: A("width", a),
            height: A("height", a),
            Rw: Ma("watermarked", a),
            Wh: Sa(Os, "quality", a)
        })
    }

    function Rs(a) {
        this.Rf = a.Rf
    }
    Rs.prototype.Wf = function () {
        return this.Rf
    };

    function dq(a) {
        return new Rs({
            Rf: Na(as, "acl", a)
        })
    }

    function Ss(a) {
        this.Aj = a.Aj || [];
        this.oh = a.oh;
        this.gG = a.gG || [];
        this.lK = a.lK;
        this.JV = a.JV;
        this.jQ = a.jQ || [];
        this.ta = a.ta;
        this.fr = a.fr;
        this.na = a.na;
        this.limit = a.limit
    }
    Ss.prototype.tj = function () {
        return this.oh
    };
    Ss.prototype.dc = function () {
        return this.na
    };
    Ss.prototype.Kd = function () {
        return this.limit
    };

    function Ts(a) {
        this.aS = a.aS || [];
        this.na = a.na
    }
    Ts.prototype.dc = function () {
        return this.na
    };

    function bq(a) {
        return new Ts({
            aS: Qa(ns, "documents", a),
            na: F("continuation", a)
        })
    }

    function Us(a) {
        this.id = a.id;
        this.nX = a.nX;
        this.Kv = a.Kv || [];
        this.na = a.na
    }
    Us.prototype.G = function () {
        return this.id
    };
    Us.prototype.Ry = function () {
        return this.Kv
    };
    Us.prototype.dc = function () {
        return this.na
    };

    function iq(a) {
        return new Us({
            id: D("id", a),
            nX: z("totalHits", a),
            Kv: Qa(Vs, "results", a),
            na: F("continuation", a)
        })
    }

    function Ws(a) {
        this.ws = a.ws;
        this.ks = a.ks;
        this.id = a.id;
        this.title = a.title;
        this.description = a.description;
        this.ta = a.ta;
        this.kA = a.kA;
        this.pf = a.pf;
        this.pX = a.pX;
        this.bd = a.bd;
        this.Qt = a.Qt
    }
    f = Ws.prototype;
    f.aT = function () {
        return this.ws
    };
    f.ZS = function () {
        return this.ks
    };
    f.G = function () {
        return this.id
    };
    f.Jb = function () {
        return this.title
    };
    f.pg = function () {
        return this.description
    };
    f.Vd = function () {
        return this.bd
    };

    function Vs(a) {
        return new Ws({
            ws: D("searchId", a),
            ks: z("rank", a),
            id: D("id", a),
            title: D("title", a),
            description: F("description", a),
            ta: D("layout", a),
            kA: D("owningBrand", a),
            pf: z("creationDate", a),
            pX: La("trashed", a),
            bd: Na(zs, "thumbnail", a),
            Qt: D("designTypeDisplayName", a)
        })
    }

    function Xs(a) {
        this.Rf = a.Rf
    }
    Xs.prototype.Wf = function () {
        return this.Rf
    };

    function gq(a) {
        return new Xs({
            Rf: Na(as, "acl", a)
        })
    };

    function Ys(a) {
        this.id = a.id;
        this.pf = a.pf;
        this.vm = a.vm;
        this.tags = a.tags || [];
        this.Rf = a.Rf;
        this.ar = a.ar;
        this.version = a.version;
        this.timestamp = a.timestamp
    }
    f = Ys.prototype;
    f.G = function () {
        return this.id
    };
    f.nu = function () {
        return this.vm
    };
    f.wu = function () {
        return this.tags
    };
    f.Wf = function () {
        return this.Rf
    };
    f.Ue = function () {
        return this.ar
    };
    f.getVersion = function () {
        return this.version
    };
    f.xr = function () {
        return this.timestamp
    };

    function Zs(a) {
        return new Ys({
            id: D("id", a),
            pf: z("creationDate", a),
            vm: Na(is, "extensions", a),
            tags: Fa.$d("tags", a),
            Rf: Pa(as, "acl", a),
            ar: Na($s, "draft", a),
            version: z("version", a),
            timestamp: A("timestamp", a)
        })
    }

    function at(a) {
        this.content = a.content;
        this.version = a.version;
        this.timestamp = a.timestamp;
        this.Bd = a.Bd;
        this.mz = a.mz
    }
    at.prototype.getContent = function () {
        return this.content
    };
    at.prototype.getVersion = function () {
        return this.version
    };
    at.prototype.xr = function () {
        return this.timestamp
    };
    at.prototype.wc = function () {
        return this.Bd
    };

    function $s(a) {
        return new at({
            content: Na(er, "content", a),
            version: z("version", a),
            timestamp: z("timestamp", a),
            Bd: z("pageCount", a),
            mz: Na(rs, "imageSets", a)
        })
    }

    function bt(a) {
        this.document = a.document;
        this.La = a.La
    }
    bt.prototype.getDocument = function () {
        return this.document
    };
    bt.prototype.getSession = function () {
        return this.La
    };

    function Xp(a) {
        return new bt({
            document: Na(Zs, "document", a),
            La: z("session", a)
        })
    }

    function ct(a) {
        this.document = a.document;
        this.Ze = a.Ze || [];
        this.La = a.La;
        this.MQ = a.MQ;
        this.VI = a.VI
    }
    ct.prototype.getDocument = function () {
        return this.document
    };
    ct.prototype.getSession = function () {
        return this.La
    };

    function Zp(a) {
        return new ct({
            document: Na(Zs, "document", a),
            Ze: Qa(Ds, "mediaMap", a),
            La: A("session", a),
            MQ: Ra(Ur, "accessRole", a),
            VI: Sa(Zr, "conversionLoss", a)
        })
    };

    function dt(a, b, c, d, e) {
        this.nb = a;
        this.fa = b;
        this.context = c;
        this.oq = null;
        this.aX = d;
        this.mp = !1;
        this.az = this.rV = this.jt = this.pv = this.Vl = null;
        this.H = e
    }
    f = dt.prototype;
    f.start = function () {
        null != this.context.id && (et(this, 6666),
            ft(this))
    };

    function et(a, b) {
        b != a.jt && (null != a.Vl && window.clearInterval(a.Vl),
            a.jt = b,
            a.Vl = null != b ? window.setInterval(function () {
                a.save()
            }, b) : null)
    }

    function ft(a) {
        12E5 != a.rV && (null != a.pv && window.clearInterval(a.pv),
            a.rV = 12E5,
            a.pv = window.setInterval(function () {
                a.sync()
            }, 12E5))
    }
    f.save = function () {
        this.context.Ji() && this.sync()
    };
    f.sync = function () {
        function a(a) {
            var e = b.jt;
            a = a.throttle;
            if (b.oq == c) {
                b.oq = null;
                var g = e;
                !0 === a ? g = Math.min(2 * b.jt, 6E5) : !1 === a && (g = Math.max(b.jt - 1E3, 6666));
                g != b.jt && et(b, g)
            }
            return e
        }
        if (this.mp && null != this.context.id && !this.oq) {
            var b = this,
                c = new gt(b.fa, b.context, b.H);
            b.oq = c;
            b.oq.sync().then(a).then(function (a) {
                b.aX.update(a)
            })
        }
    };
    f.close = function () {
        this.mp = !1;
        this.oq && (this.oq.stop(),
            this.oq = null);
        this.Vl && (window.clearInterval(this.Vl),
            this.Vl = null);
        this.pv && (window.clearInterval(this.pv),
            this.pv = null)
    };
    f.MO = function (a) {
        this.context.MO(a)
    };
    f.post = function (a, b) {
        var c = this.context,
            d = null;
        3 != c.gf && (c.uk != a ? (c.gf = 3,
            c.state = null) : (c.gf = 0,
            c.state = b,
            c.uk++,
            d = c.uk));
        ht(c);
        a = d;
        null != a && (this.az = b);
        return a
    };
    f.Yu = function (a) {
        this.az || (this.az = a)
    };

    function it(a, b) {
        return !(!a.az || _.isEqual(a.az, b))
    }
    f.es = function (a) {
        var b = this.context.G();
        if (this.context.Ji())
            return P.reject(new Sp);
        if (!this.context.Uy())
            return P.reject(new Rp);
        if (!b)
            return P.reject(new Tp);
        switch (a) {
            case "BRAND":
                return this.nb.tI(b);
            case "GLOBAL":
                return this.nb.es(b)
        }
        return P.reject(new Qp)
    };
    f.Mw = function (a) {
        var b = this.context.G();
        if (!b)
            return P.reject(new Tp);
        switch (a) {
            case "BRAND":
                return this.nb.uI(b);
            case "GLOBAL":
                return this.nb.Mw(b)
        }
        return P.reject(new Qp)
    };
    f.DB = function () {
        var a = this.context.G();
        return a ? this.nb.DB(a) : P.reject(Error("synced context has no id"))
    };
    f.OB = function () {
        var a = this.context.G();
        return a ? this.nb.OB(a) : P.reject(Error("synced context has no id"))
    };
    f.Fc = function () {
        return this.context.G()
    };

    function jt(a) {
        return a.context.nu().US()
    }
    f.timestamp = function () {
        return this.context.xr()
    };
    f.version = function () {
        return this.context.uk
    };
    f.be = function () {
        return this.context.be
    };
    f.Ji = function () {
        return this.context.Ji()
    };
    f.Nu = function () {
        return this.context.Nu()
    };
    f.state = function () {
        return this.context.Uy()
    };

    function kt(a, b, c, d, e, g, h, k, l, m) {
        this.id = a;
        this.uk = c;
        this.Ex = d;
        this.be = e;
        this.ZA = g;
        this.state = k;
        this.dU = null;
        this.timestamp = h;
        this.vm = l;
        this.VI = m;
        this.bU = this.gf = b;
        this.bH = null
    }
    f = kt.prototype;
    f.G = function () {
        return this.id
    };
    f.nu = function () {
        return this.vm
    };
    f.xr = function () {
        return this.timestamp
    };
    f.Ji = function () {
        return 0 == this.gf || 1 == this.gf
    };
    f.Nu = function () {
        return 3 != this.gf
    };
    f.Uy = function () {
        return this.state
    };
    f.MO = function (a) {
        if (this.bH)
            throw Error("Cannot overwrite DocumentContext sync listener");
        this.bH = a
    };

    function lt(a, b, c) {
        b == a.uk && c == a.be && 0 == a.gf && (a.gf = 1,
            ht(a))
    }

    function mt(a, b, c) {
        3 != a.gf && a.be == b && (b = c.document.draft,
            b.version <= a.be || (a.timestamp = b.timestamp,
                a.be = b.version,
                a.ZA = b.session,
                a.ZA != a.Ex && (a.uk++,
                    a.gf = 3,
                    a.state = null),
                ht(a)))
    }

    function nt(a, b, c, d, e) {
        3 != a.gf && (e = e.document.draft,
            a.be == d && (a.dU = b,
                a.uk == c && (a.gf = 2),
                a.timestamp = e.timestamp,
                a.be = e.version,
                a.ZA = e.session,
                a.Ex = e.session,
                ht(a)))
    }

    function ot(a, b, c, d) {
        3 == a.gf || a.be > c || (a.timestamp = d.timestamp,
            a.be = d.version,
            a.ZA = d.session,
            a.ZA != a.Ex ? (a.uk++,
                a.gf = 3,
                a.state = null) : a.uk == b && (a.gf = 2),
            ht(a))
    }

    function ht(a) {
        a.gf != a.bU && null != a.id && (a.bU = a.gf,
            a.bH && a.bH(a.gf))
    }

    function gt(a, b, c) {
        this.fa = a;
        this.context = b;
        this.pq = this.request = this.callback = null;
        this.H = c
    }

    function pt(a) {
        var b = .2 * Math.random() - .1;
        return null == a ? 5E3 : 6E5 < a ? 6E5 : a * (1.6 + b)
    }
    gt.prototype.stop = function () {
        this.callback = null;
        this.request && (this.request.cancel(),
            this.request = null);
        null != this.pq && (window.clearTimeout(this.pq),
            this.pq = null)
    };
    gt.prototype.sync = function () {
        if (this.callback)
            throw Error("already syncing");
        return new P(function (a) {
                this.callback = a;
                qt(this, pt(null), 1)
            }
            .bind(this))
    };
    gt.prototype.finish = function (a, b, c, d) {
        var e = this.callback;
        e && (this.callback = null,
            e({
                success: a,
                throttle: b
            }));
        this.H && this.H.track("sync_attempts", {
            status: c,
            attempts: d
        })
    };

    function rt(a, b) {
        var c = null,
            d = !1,
            e = b;
        if (null != a) {
            var g = [],
                h;
            for (h in b)
                "pages" === h || _.isEqual(b[h], a[h]) || g.push(h);
            a = a.pages;
            h = b.pages;
            if (a && h) {
                var k = a.length == h.length,
                    l = !_.isEqual(a, h);
                if (0 == g.length && k && l) {
                    for (b = 0; b < a.length; b++)
                        if (!_.isEqual(a[b], h[b]))
                            if (null == c)
                                c = b;
                            else {
                                c = null;
                                break
                            }
                    null != c && (e = h[c])
                } else
                    l || 1 != g.length || "title" != g[0] || (e = {
                            title: b.title
                        },
                        d = !0)
            }
        }
        return {
            h7: d,
            Xr: c,
            h5: e
        }
    }

    function qt(a, b, c) {
        function d(d, g) {
            window.clearTimeout(a.pq);
            a.request = null;
            a.pq = null;
            var h = g && null != g.throttle ? !!g.throttle : null,
                m = !1;
            p && 200 == d ? nt(e, n, k, l, g) : p && 409 == d ? ot(e, k, l, g) : p || 200 != d ? 0 != d && (m = !0) : mt(e, l, g);
            m ? a.pq = window.setTimeout(function () {
                qt(a, pt(b), c + 1)
            }, b) : a.finish(200 == d, h, d, c)
        }
        var e = a.context,
            g = e.G(),
            h = e.Ex,
            k = e.uk,
            l = e.be,
            m, n = e.Uy(),
            p = e.Ji();
        if (p && n)
            m = rt(e.dU, n),
            g = "/documents" + (null == g ? "" : "/" + encodeURIComponent(g) + "/content"),
            m.h7 ? g += "/title" : null != m.Xr && (g += "/pages/" + m.Xr),
            g += "?version\x3d" + encodeURIComponent(l.toString()) + (null == h ? "" : "\x26session\x3d" + encodeURIComponent(h.toString())) + "";
        else {
            if (null == g)
                return;
            g = "/documents/" + encodeURIComponent(g) + "?includePages\x3dfalse" + (null == h ? "" : "\x26session\x3d" + encodeURIComponent(h.toString()))
        }
        a.pq = window.setTimeout(function () {
            var d = a.callback;
            a.callback = null;
            a.request && a.request.cancel();
            a.request = null;
            a.pq = null;
            a.callback = d;
            qt(a, pt(b), c + 1)
        }, b);
        p ? (a.request = a.fa.post(g, m.h5, d),
            lt(e, k, l)) : a.request = a.fa.get(g, d)
    };

    function st() {
        this.fa = Hb
    };

    function tt(a) {
        this.fg = a.fg;
        this.iX = a.iX;
        this.hX = a.hX;
        this.jS = a.jS;
        this.displayName = a.displayName;
        this.vJ = a.vJ;
        this.HW = a.HW;
        this.Fo = a.Fo;
        this.nm = a.nm;
        this.qR = a.qR
    }
    tt.prototype.Hm = function () {
        return this.fg
    };
    tt.prototype.Tb = function () {
        return this.displayName
    };

    function ut(a) {
        return new tt({
            fg: D("thumbnailUrl", a),
            iX: z("thumbnailWidth", a),
            hX: z("thumbnailHeight", a),
            jS: D("editorPath", a),
            displayName: D("displayName", a),
            vJ: D("dimensionsLabel", a),
            HW: La("showNewBadge", a),
            Fo: F("doctypeId", a),
            nm: F("doctypeName", a),
            qR: F("categoryId", a)
        })
    }

    function vt(a) {
        this.yE = a.yE;
        this.options = a.options || []
    }
    vt.prototype.rj = function () {
        return this.options
    };

    function wt(a) {
        return new vt({
            yE: D("groupingDisplayName", a),
            options: Qa(ut, "options", a)
        })
    }

    function xt() {
        this.k_ = "DOCTYPES_AND_CATEGORIES"
    }

    function yt(a) {
        this.AE = a.AE || []
    }

    function zt(a) {
        return new yt({
            AE: Qa(wt, "groups", a)
        })
    };

    function At(a) {
        this.fa = a;
        this.BJ = "/doctypes"
    }
    At.prototype.pb = function (a) {
        a = this.BJ + "/" + encodeURIComponent(a.id) + "?" + a.$n();
        return Ii(this.fa, a).get(0).then(Ja).then(Bt)
    };
    At.prototype.createDocumentType = function (a) {
        return Qi(this.fa, this.BJ, Ct(a)).get(0).then(Ja).then(Dt)
    };

    function Et(a, b) {
        b = [a.BJ + "?", null != b.limit ? "\x26limit\x3d" + encodeURIComponent(b.limit.toString()) : "", null != b.visible ? "\x26visible\x3d" + encodeURIComponent(String(b.visible)) : "", null != b.ip ? "\x26includeAllDescriptions\x3d" + encodeURIComponent(String(b.ip)) : "", 0 < b.Aj.length ? "\x26ids\x3d" + encodeURIComponent(b.Aj.join(",")) : ""].join("").replace("?\x26", "?");
        return Ii(a.fa, b).get(0).then(Ja).then(Ft)
    };

    function Gt(a, b) {
        switch (b) {
            case "FACEBOOK":
                return "FACEBOOK";
            case "GOOGLE":
                return "GOOGLE";
            case "LINKEDIN":
                return "LINKEDIN";
            case "PINTEREST":
                return "PINTEREST";
            case "TWITTER":
                return "TWITTER";
            default:
                throw new TypeError('expected SocialPlatform for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Ht(a, b) {
        switch (b) {
            case "FACEBOOK":
                return "FACEBOOK";
            case "GOOGLE":
                return "GOOGLE";
            case "LINKEDIN":
                return "LINKEDIN";
            case "PINTEREST":
                return "PINTEREST";
            case "TWITTER":
                return "TWITTER";
            default:
                throw new TypeError('expected SocialPlatform for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function It(a, b) {
        switch (b) {
            case "DEFAULT":
                return "DEFAULT";
            case "GROUP":
                return "GROUP";
            case "PAGE":
                return "PAGE";
            default:
                throw new TypeError('expected SocialTargetType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Jt(a, b) {
        switch (b) {
            case "DEFAULT":
                return "DEFAULT";
            case "GROUP":
                return "GROUP";
            case "PAGE":
                return "PAGE";
            default:
                throw new TypeError('expected SocialTargetType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Kt(a, b) {
        switch (b) {
            case "PIXELS":
                return "PIXELS";
            case "INCHES":
                return "INCHES";
            case "CENTIMETERS":
                return "CENTIMETERS";
            case "MILLIMETERS":
                return "MILLIMETERS";
            default:
                throw new TypeError('expected DocumentTypeDimensionsUnits for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Lt(a, b) {
        switch (b) {
            case "PIXELS":
                return "PIXELS";
            case "INCHES":
                return "INCHES";
            case "CENTIMETERS":
                return "CENTIMETERS";
            case "MILLIMETERS":
                return "MILLIMETERS";
            default:
                throw new TypeError('expected DocumentTypeDimensionsUnits for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Mt(a, b) {
        switch (b) {
            case "IMAGE":
                return "IMAGE";
            case "PDF":
                return "PDF";
            default:
                throw new TypeError('expected DocumentTypeDefaultExportSettings for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Nt(a, b) {
        switch (b) {
            case "IMAGE":
                return "IMAGE";
            case "PDF":
                return "PDF";
            default:
                throw new TypeError('expected DocumentTypeDefaultExportSettings for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function cp(a) {
        this.id = a.id;
        this.name = a.name;
        this.Yh = a.Yh;
        this.nf = a.nf;
        this.visible = a.visible;
        this.Gs = a.Gs;
        this.pl = a.pl;
        this.Dp = a.Dp || [];
        this.bd = a.bd;
        this.Yq = a.Yq || new Map;
        this.tb = a.tb;
        this.jD = a.jD;
        this.tn = a.tn;
        this.dl = a.dl;
        this.version = a.version;
        this.aM = a.aM || [];
        this.cN = a.cN || [];
        this.KN = a.KN || []
    }
    f = cp.prototype;
    f.G = function () {
        return this.id
    };
    f.getName = function () {
        return this.name
    };
    f.Vd = function () {
        return this.bd
    };
    f.getVersion = function () {
        return this.version
    };

    function Ot(a) {
        return {
            id: ib("id", a.id),
            name: ib("name", a.name),
            sentenceName: ib("sentenceName", a.Yh),
            category: ib("category", a.nf),
            visible: gb("visible", a.visible),
            showAsNew: gb("showAsNew", a.Gs),
            multiPage: gb("multiPage", a.pl),
            newPageElements: kb(Pt, "newPageElements", a.Dp),
            thumbnail: jb(Qt, "thumbnail", a.bd),
            descriptions: nb(Rt, "descriptions", a.Yq),
            dimensions: jb(St, "dimensions", a.tb),
            defaultExportSettings: mb(Mt, "defaultExportSettings", a.jD),
            pdfExportSettings: jb(Tt, "pdfExportSettings", a.tn),
            imageExportSettings: jb(Ut, "imageExportSettings", a.dl),
            version: eb("version", a.version),
            localizedDescriptions: kb(Vt, "localizedDescriptions", a.aM),
            pageFormats: kb(Wt, "pageFormats", a.cN),
            publishHints: kb(Xt, "publishHints", a.KN)
        }
    }

    function qq(a) {
        var b = F("id", a),
            c = F("name", a),
            d = F("sentenceName", a),
            e = F("category", a),
            g = Ma("visible", a),
            h = Ma("showAsNew", a),
            k = Ma("multiPage", a),
            l = Qa(Yt, "newPageElements", a),
            m = Pa(Zt, "thumbnail", a),
            n;
        n = Ua(Va, Xa.bind(null, $t), "descriptions", a);
        return new cp({
            id: b,
            name: c,
            Yh: d,
            nf: e,
            visible: g,
            Gs: h,
            pl: k,
            Dp: l,
            bd: m,
            Yq: n,
            tb: Pa(au, "dimensions", a),
            jD: Sa(Nt, "defaultExportSettings", a),
            tn: Pa(bu, "pdfExportSettings", a),
            dl: Pa(cu, "imageExportSettings", a),
            version: A("version", a),
            aM: Qa(du, "localizedDescriptions", a),
            cN: Qa(eu, "pageFormats", a),
            KN: Qa(fu, "publishHints", a)
        })
    }

    function gu(a, b, c) {
        return new cp({
            id: "custom",
            name: (new hu({
                width: a,
                height: b,
                units: c
            })).print(),
            Yh: "design",
            tb: new hu({
                width: a,
                height: b,
                units: c
            }),
            visible: !1,
            order: 0,
            pl: !0,
            Gs: !1,
            custom: new hu({
                width: a,
                height: b,
                units: c
            }),
            dl: new iu({
                cd: 96,
                Q8: "JPG",
                yo: null,
                d9: null,
                c9: null
            }),
            tn: new ju({
                cd: 300
            })
        })
    }
    f.xg = function () {
        var a = this.dl,
            b = Lg(this.tb);
        return {
            elements: this.Dp,
            width: b.D(),
            height: b.F(),
            dpi: a && a.cd
        }
    };

    function ku(a) {
        a = a.Dp;
        return Array.isArray(a) ? a.filter(function (a) {
            return "fixed" === a.type
        }).map(Pt) : []
    }

    function lu(a) {
        a = ku(a);
        a = _.min(_.pluck(a, "left"));
        return Math.min(0, a)
    }

    function mu(a) {
        a = ku(a);
        a = _.min(_.pluck(a, "top"));
        return Math.min(0, a)
    }

    function nu(a) {
        var b = ku(a),
            b = _.max(b.map(function (a) {
                return a.top + a.height
            })),
            c = mu(a);
        a = a.tb ? Lg(a.tb).F() : 0;
        return Math.max(a, b) - c
    }

    function ou(a) {
        var b = ku(a),
            b = _.max(b.map(function (a) {
                return a.left + a.width
            })),
            c = lu(a);
        a = a.tb ? Lg(a.tb).D() : 0;
        return Math.max(a, b) - c
    }

    function pu(a) {
        this.type = a.type;
        this.tb = a.tb;
        this.xK = a.xK || [];
        this.sM = a.sM;
        this.zI = a.zI
    }
    pu.prototype.Ab = function () {
        return this.type
    };

    function Wt(a) {
        return {
            type: ib("type", a.type),
            dimensions: cb.required("dimensions", St(a.tb)),
            fixedElements: kb(Pt, "fixedElements", a.xK),
            nameTemplate: ib("nameTemplate", a.sM),
            cardinality: cb.required("cardinality", qu(a.zI))
        }
    }

    function eu(a) {
        return new pu({
            type: F("type", a),
            tb: Na(au, "dimensions", a),
            xK: Qa(Yt, "fixedElements", a),
            sM: F("nameTemplate", a),
            zI: Na(ru, "cardinality", a)
        })
    }

    function su(a) {
        this.lower = a.lower;
        this.upper = a.upper
    }

    function qu(a) {
        return {
            lower: eb("lower", a.lower),
            upper: eb("upper", a.upper)
        }
    }

    function ru(a) {
        return new su({
            lower: A("lower", a),
            upper: A("upper", a)
        })
    }

    function tu(a) {
        this.type = a.type
    }

    function Xt(a) {
        switch (a.type) {
            case "SHARE_SPEC":
                return {
                    type: "SHARE_SPEC",
                    platform: mb(Gt, "platform", a.platform),
                    targetType: mb(It, "targetType", a.hf)
                };
            case "DOWNLOAD_SPEC":
                return {
                    type: "DOWNLOAD_SPEC",
                    format: mb(Mt, "format", a.format),
                    fileType: ib("fileType", a.Se),
                    compression: ib("compression", a.yo),
                    dpi: eb("dpi", a.cd),
                    jpgQuality: eb("jpgQuality", a.Ej),
                    jpgTargetFileSizeKb: eb("jpgTargetFileSizeKb", a.rp)
                };
            default:
                throw Error();
        }
    }

    function fu(a) {
        switch (a.type) {
            case "SHARE_SPEC":
                return Ba("SHARE_SPEC" === a.type),
                    new uu({
                        platform: Sa(Ht, "platform", a),
                        hf: Sa(Jt, "targetType", a)
                    });
            case "DOWNLOAD_SPEC":
                return Ba("DOWNLOAD_SPEC" === a.type),
                    new vu({
                        format: Sa(Nt, "format", a),
                        Se: F("fileType", a),
                        yo: F("compression", a),
                        cd: A("dpi", a),
                        Ej: A("jpgQuality", a),
                        rp: A("jpgTargetFileSizeKb", a)
                    });
            default:
                throw Error("unknown case: " + a.type);
        }
    }

    function uu(a) {
        this.type = "SHARE_SPEC";
        this.platform = a.platform;
        this.hf = a.hf
    }
    t(uu, tu);

    function vu(a) {
        this.type = "DOWNLOAD_SPEC";
        this.format = a.format;
        this.Se = a.Se;
        this.yo = a.yo;
        this.cd = a.cd;
        this.Ej = a.Ej;
        this.rp = a.rp
    }
    t(vu, tu);

    function wu(a) {
        this.locale = a.locale;
        this.name = a.name;
        this.Yh = a.Yh;
        this.eN = a.eN || new Map
    }
    wu.prototype.qg = function () {
        return this.locale
    };
    wu.prototype.getName = function () {
        return this.name
    };

    function Vt(a) {
        var b = hb("locale", a.locale),
            c = hb("name", a.name),
            d = hb("sentenceName", a.Yh);
        a = ob(pb, sb, "pageNameTemplates", a.eN);
        return {
            locale: b,
            name: c,
            sentenceName: d,
            pageNameTemplates: a
        }
    }

    function du(a) {
        return new wu({
            locale: D("locale", a),
            name: D("name", a),
            Yh: D("sentenceName", a),
            eN: Ua(Va, Ya, "pageNameTemplates", a)
        })
    }

    function xu(a) {
        this.type = a.type;
        this.placeholder = a.placeholder;
        this.url = a.url;
        this.Pm = a.Pm;
        this.top = a.top;
        this.left = a.left;
        this.width = a.width;
        this.height = a.height;
        this.Ob = a.Ob
    }
    f = xu.prototype;
    f.Ab = function () {
        return this.type
    };
    f.Aa = function () {
        return this.url
    };
    f.N = function () {
        return this.top
    };
    f.Y = function () {
        return this.left
    };
    f.D = function () {
        return this.width
    };
    f.F = function () {
        return this.height
    };
    f.wE = function () {
        return this.Ob
    };

    function Pt(a) {
        return {
            type: hb("type", a.type),
            placeholder: ib("placeholder", a.placeholder),
            url: ib("url", a.url),
            image: ib("image", a.Pm),
            top: db("top", a.top),
            left: db("left", a.left),
            width: db("width", a.width),
            height: db("height", a.height),
            transparency: eb("transparency", a.Ob)
        }
    }

    function Yt(a) {
        return new xu({
            type: D("type", a),
            placeholder: F("placeholder", a),
            url: F("url", a),
            Pm: F("image", a),
            top: z("top", a),
            left: z("left", a),
            width: z("width", a),
            height: z("height", a),
            Ob: A("transparency", a)
        })
    }

    function yu(a) {
        this.bucket = a.bucket;
        this.key = a.key;
        this.url = a.url;
        this.width = a.width;
        this.height = a.height
    }
    yu.prototype.getKey = function () {
        return this.key
    };
    yu.prototype.Aa = function () {
        return this.url
    };
    yu.prototype.D = function () {
        return this.width
    };
    yu.prototype.F = function () {
        return this.height
    };

    function Qt(a) {
        return {
            bucket: ib("bucket", a.bucket),
            key: ib("key", a.key),
            url: ib("url", a.url),
            width: eb("width", a.width),
            height: eb("height", a.height)
        }
    }

    function Zt(a) {
        return new yu({
            bucket: F("bucket", a),
            key: F("key", a),
            url: F("url", a),
            width: A("width", a),
            height: A("height", a)
        })
    }

    function zu(a) {
        this.locale = a.locale;
        this.name = a.name;
        this.Yh = a.Yh;
        this.FK = a.FK;
        this.bd = a.bd
    }
    zu.prototype.qg = function () {
        return this.locale
    };
    zu.prototype.getName = function () {
        return this.name
    };
    zu.prototype.Vd = function () {
        return this.bd
    };

    function Rt(a) {
        return {
            locale: hb("locale", a.locale),
            name: ib("name", a.name),
            sentenceName: ib("sentenceName", a.Yh),
            gender: ib("gender", a.FK),
            thumbnail: jb(Qt, "thumbnail", a.bd)
        }
    }

    function $t(a) {
        return new zu({
            locale: D("locale", a),
            name: F("name", a),
            Yh: F("sentenceName", a),
            FK: F("gender", a),
            bd: Pa(Zt, "thumbnail", a)
        })
    }

    function hu(a) {
        this.height = a.height;
        this.width = a.width;
        this.units = a.units
    }
    hu.prototype.F = function () {
        return this.height
    };
    hu.prototype.D = function () {
        return this.width
    };
    hu.prototype.wj = function () {
        return this.units
    };

    function St(a) {
        return {
            height: db("height", a.height),
            width: db("width", a.width),
            units: lb(Kt, "units", a.units)
        }
    }

    function au(a) {
        return new hu({
            height: z("height", a),
            width: z("width", a),
            units: Ra(Lt, "units", a)
        })
    }

    function Au(a) {
        switch (a) {
            case "PIXELS":
                return "px";
            case "CENTIMETERS":
                return "cm";
            case "INCHES":
                return "in";
            case "MILLIMETERS":
                return "mm";
            default:
                throw Error("Unknown units: " + a);
        }
    }
    hu.prototype.print = function () {
        var a = this.D(),
            b = this.F(),
            c = Au(this.wj());
        return a + " " + c + "  " + b + " " + c
    };

    function Lg(a) {
        var b;
        switch (a.wj()) {
            case "PIXELS":
                return a;
            case "CENTIMETERS":
                b = a.D() / 2.54 * 96;
                a = a.F() / 2.54 * 96;
                break;
            case "INCHES":
                b = 96 * a.D();
                a = 96 * a.F();
                break;
            case "MILLIMETERS":
                b = a.D() / 25.4 * 96;
                a = a.F() / 25.4 * 96;
                break;
            default:
                throw Error("Unknown units: " + a.wj());
        }
        return new hu({
            units: "PIXELS",
            width: b,
            height: a
        })
    }

    function ju(a) {
        this.cd = a.cd
    }

    function Tt(a) {
        return {
            dpi: eb("dpi", a.cd)
        }
    }

    function bu(a) {
        return new ju({
            cd: A("dpi", a)
        })
    }

    function iu(a) {
        this.Se = a.Se;
        this.yo = a.yo;
        this.cd = a.cd;
        this.Ej = a.Ej;
        this.rp = a.rp
    }

    function Ut(a) {
        return {
            fileType: ib("fileType", a.Se),
            compression: ib("compression", a.yo),
            dpi: eb("dpi", a.cd),
            jpgQuality: eb("jpgQuality", a.Ej),
            jpgTargetFileSizeKb: eb("jpgTargetFileSizeKb", a.rp)
        }
    }

    function cu(a) {
        return new iu({
            Se: F("fileType", a),
            yo: F("compression", a),
            cd: A("dpi", a),
            Ej: A("jpgQuality", a),
            rp: A("jpgTargetFileSizeKb", a)
        })
    }

    function Bu(a) {
        this.nf = a.nf;
        this.visible = a.visible;
        this.Gs = a.Gs;
        this.pl = a.pl;
        this.Dp = a.Dp || [];
        this.bd = a.bd;
        this.Yq = a.Yq || new Map;
        this.tb = a.tb;
        this.tn = a.tn;
        this.dl = a.dl
    }
    Bu.prototype.Vd = function () {
        return this.bd
    };

    function Ct(a) {
        return {
            category: ib("category", a.nf),
            visible: gb("visible", a.visible),
            showAsNew: gb("showAsNew", a.Gs),
            multiPage: gb("multiPage", a.pl),
            newPageElements: kb(Pt, "newPageElements", a.Dp),
            thumbnail: jb(Qt, "thumbnail", a.bd),
            descriptions: nb(Rt, "descriptions", a.Yq),
            dimensions: jb(St, "dimensions", a.tb),
            pdfExportSettings: jb(Tt, "pdfExportSettings", a.tn),
            imageExportSettings: jb(Ut, "imageExportSettings", a.dl)
        }
    }
    Bu.prototype.$n = function () {
        var a = Ct(this);
        return Object.keys(a).map(function (b) {
            var c = a[b];
            if (void 0 !== c && "object" !== typeof c)
                return b + "\x3d" + encodeURIComponent(c)
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };

    function Cu(a) {
        this.Cc = a.Cc
    }

    function Dt(a) {
        return new Cu({
            Cc: Na(qq, "docType", a)
        })
    }

    function Du(a) {
        this.id = a.id;
        this.ip = a.ip
    }
    Du.prototype.G = function () {
        return this.id
    };
    Du.prototype.$n = function () {
        var a = {
            id: hb("id", this.id),
            includeAllDescriptions: fb("includeAllDescriptions", this.ip)
        };
        return Object.keys(a).map(function (b) {
            var c = a[b];
            if (void 0 !== c && "object" !== typeof c)
                return b + "\x3d" + encodeURIComponent(c)
        }).filter(function (a) {
            return !!a
        }).join("\x26")
    };

    function Eu(a) {
        this.Cc = a.Cc
    }

    function Bt(a) {
        return new Eu({
            Cc: Na(qq, "docType", a)
        })
    }

    function Fu(a) {
        this.limit = a.limit;
        this.visible = a.visible;
        this.ip = a.ip;
        this.Aj = a.Aj || []
    }
    Fu.prototype.Kd = function () {
        return this.limit
    };

    function Gu(a) {
        this.$q = a.$q || []
    }

    function Ft(a) {
        return new Gu({
            $q: Qa(qq, "docTypes", a)
        })
    };

    function Hu(a, b) {
        switch (b) {
            case "IMAGESETS":
                return "IMAGESETS";
            default:
                throw new TypeError('expected Kind for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Iu(a, b) {
        switch (b) {
            case "DOCUMENT_SERVICE":
                return "DOCUMENT_SERVICE";
            case "DOWNLOAD":
                return "DOWNLOAD";
            case "WORKFLOW":
                return "WORKFLOW";
            default:
                throw new TypeError('expected DestinationCode for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Ju(a, b) {
        switch (b) {
            case "PNG":
                return "PNG";
            case "PDF":
                return "PDF";
            case "JPG":
                return "JPG";
            default:
                throw new TypeError('expected FileFormat for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Ku(a, b) {
        switch (b) {
            case "LOSSLESS":
                return "LOSSLESS";
            case "LOSSY":
                return "LOSSY";
            case "NONE":
                return "NONE";
            default:
                throw new TypeError('expected OptimizationStrategy for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Lu(a, b) {
        switch (b) {
            case "PRINT":
                return "PRINT";
            case "SCREEN":
                return "SCREEN";
            case "THUMBNAIL":
                return "THUMBNAIL";
            default:
                throw new TypeError('expected ExportMediaQuality for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Mu(a, b) {
        switch (b) {
            case "HIGH":
                return "HIGH";
            case "MEDIUM":
                return "MEDIUM";
            case "LOW":
                return "LOW";
            default:
                throw new TypeError('expected Priority for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Nu(a, b) {
        switch (b) {
            case "COMPLETE":
                return "COMPLETE";
            case "FAILED":
                return "FAILED";
            case "CREATED":
                return "CREATED";
            default:
                throw new TypeError('expected ExportStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Ou(a) {
        this.Dq = a.Dq;
        this.Di = a.Di;
        this.ay = a.ay;
        this.YR = a.YR;
        this.kind = a.kind;
        this.dP = a.dP;
        this.mG = a.mG;
        this.zV = a.zV;
        this.CV = a.CV;
        this.bW = a.bW;
        this.eV = a.eV || [];
        this.us = a.us
    }

    function Pu(a) {
        return {
            attachment: gb("attachment", a.Dq),
            docId: hb("docId", a.Di),
            docVersion: eb("docVersion", a.ay),
            docMedia: jb(Qu, "docMedia", a.YR),
            kind: mb(Hu, "kind", a.kind),
            spec: jb(Ru, "spec", a.dP),
            priority: mb(Mu, "priority", a.mG),
            pollableJob: gb("pollableJob", a.zV),
            prefetchDocument: gb("prefetchDocument", a.CV),
            renderSpec: jb(Su, "renderSpec", a.bW),
            outputSpecs: kb(Tu, "outputSpecs", a.eV),
            schema: lb(Yr, "schema", a.us)
        }
    }

    function Uu(a) {
        return {
            bleedMicrons: eb("bleedMicrons", a.v8),
            resizeBleedBackground: fb("resizeBleedBackground", a.x9)
        }
    }

    function Su(a) {
        return {
            bleed: jb(Uu, "bleed", a.wt),
            crops: fb("crops", a.Tq),
            mediaQuality: lb(Lu, "mediaQuality", a.Nz),
            mediaDpi: db("mediaDpi", a.Jr),
            pages: bb.$d("pages", a.ia),
            watermark: fb("watermark", a.V9),
            scaleFactor: eb("scaleFactor", a.Pd),
            removeCanvas: gb("removeCanvas", a.ns)
        }
    }

    function Vu(a) {
        return {
            type: lb(Wu, "type", a.type),
            queue: jb(Xu, "queue", a.queue),
            workflow: jb(Yu, "workflow", a.uh)
        }
    }

    function Wu(a, b) {
        switch (b) {
            case "WORKFLOW":
                return "WORKFLOW";
            case "QUEUE":
                return "QUEUE";
            default:
                throw new TypeError('expected Destination2Type for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Xu(a) {
        return {
            queueName: hb("queueName", a.t9),
            token: ib("token", a.bo),
            expiryHours: eb("expiryHours", a.O8)
        }
    }

    function Yu(a) {
        return {
            taskToken: hb("taskToken", a.M9)
        }
    }

    function Tu(a) {
        return {
            destination: jb(Vu, "destination", a.destination),
            format: lb(Ju, "format", a.format),
            pages: bb.$d("pages", a.ia),
            jpg: jb(Zu, "jpg", a.Bz),
            png: jb($u, "png", a.uA),
            pdf: jb(av, "pdf", a.m9)
        }
    }

    function Zu(a) {
        return {
            width: eb("width", a.width),
            height: eb("height", a.height),
            jpgQuality: eb("jpgQuality", a.Ej),
            targetImageSizeKb: eb("targetImageSizeKb", a.Bw),
            zipped: gb("zipped", a.EH)
        }
    }

    function $u(a) {
        return {
            width: eb("width", a.width),
            height: eb("height", a.height),
            zipped: gb("zipped", a.EH),
            optimizationStrategy: mb(Ku, "optimizationStrategy", a.XM)
        }
    }

    function av(a) {
        return {
            rasterizePages: gb("rasterizePages", a.u9)
        }
    }

    function bv(a) {
        this.type = a.type;
        this.wt = a.wt;
        this.Tq = a.Tq;
        this.destination = a.destination;
        this.Jr = a.Jr;
        this.format = a.format;
        this.XM = a.XM;
        this.Nz = a.Nz;
        this.ia = a.ia || [];
        this.Bw = a.Bw;
        this.wT = a.wT;
        this.uT = a.uT;
        this.EH = a.EH;
        this.Ej = a.Ej;
        this.ns = a.ns
    }
    bv.prototype.Ab = function () {
        return this.type
    };
    bv.prototype.Rb = function () {
        return this.ia
    };

    function Ru(a) {
        return {
            type: lb(cv, "type", a.type),
            bleed: gb("bleed", a.wt),
            crops: gb("crops", a.Tq),
            destination: mb(Iu, "destination", a.destination),
            mediaDpi: db("mediaDpi", a.Jr),
            format: lb(Ju, "format", a.format),
            optimizationStrategy: mb(Ku, "optimizationStrategy", a.XM),
            mediaQuality: lb(Lu, "mediaQuality", a.Nz),
            pages: bb.$d("pages", a.ia),
            targetImageSizeKb: eb("targetImageSizeKb", a.Bw),
            imageWidth: eb("imageWidth", a.wT),
            imageHeight: eb("imageHeight", a.uT),
            zipped: gb("zipped", a.EH),
            jpgQuality: eb("jpgQuality", a.Ej),
            removeCanvas: gb("removeCanvas", a.ns)
        }
    }

    function cv(a, b) {
        switch (b) {
            case "CUSTOM":
                return "CUSTOM";
            case "PRINT":
                return "PRINT";
            case "SCREEN":
                return "SCREEN";
            case "THUMBNAIL":
                return "THUMBNAIL";
            case "PREVIEW":
                return "PREVIEW";
            default:
                throw new TypeError('expected ExportType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function dv(a) {
        this.oj = a.oj
    }
    dv.prototype.MK = function () {
        return this.oj
    };

    function ev(a) {
        return new dv({
            oj: Na(fv, "export", a)
        })
    }

    function gv(a) {
        this.id = a.id;
        this.jA = a.jA;
        this.status = a.status
    }
    gv.prototype.G = function () {
        return this.id
    };
    gv.prototype.Oh = function () {
        return this.status
    };

    function fv(a) {
        return new gv({
            id: A("id", a),
            jA: Pa(hv, "output", a),
            status: Ra(Nu, "status", a)
        })
    }

    function iv(a) {
        this.title = a.title;
        this.XD = a.XD || []
    }
    iv.prototype.Jb = function () {
        return this.title
    };

    function hv(a) {
        return new iv({
            title: F("title", a),
            XD: Qa(jv, "exportBlobs", a)
        })
    }

    function kv(a) {
        this.bucket = a.bucket;
        this.key = a.key;
        this.page = a.page;
        this.url = a.url;
        this.width = a.width;
        this.height = a.height
    }
    f = kv.prototype;
    f.getKey = function () {
        return this.key
    };
    f.ha = function () {
        return this.page
    };
    f.Aa = function () {
        return this.url
    };
    f.D = function () {
        return this.width
    };
    f.F = function () {
        return this.height
    };

    function jv(a) {
        return new kv({
            bucket: D("bucket", a),
            key: D("key", a),
            page: z("page", a),
            url: D("url", a),
            width: A("width", a),
            height: A("height", a)
        })
    }

    function lv(a) {
        this.Dq = a.Dq;
        this.id = a.id
    }
    lv.prototype.G = function () {
        return this.id
    };

    function mv(a) {
        this.oj = a.oj
    }
    mv.prototype.MK = function () {
        return this.oj
    };

    function nv(a) {
        return new mv({
            oj: Na(fv, "export", a)
        })
    }

    function ov(a) {
        this.id = a.id
    }
    ov.prototype.G = function () {
        return this.id
    };

    function pv() {}

    function qv() {
        return new pv
    };

    function rv(a, b) {
        this.fa = a;
        this.path = "/export";
        this.kM = void 0 != b ? b.kM : 1E3;
        this.tU = void 0 != b ? b.tU : 3E4;
        this.FT = void 0 != b ? b.FT : 1.6
    }
    rv.prototype.Ox = function (a) {
        var b = this;
        return sv(this, a).bind(this).then(function (a) {
            w(a.oj.id);
            var d = a.oj.id;
            return tv(b, a.oj, b.kM).catch(P.CancellationError, function (a) {
                return uv(b, new ov({
                    id: d
                })).finally(function () {
                    return P.reject(a)
                })
            })
        })
    };

    function sv(a, b) {
        return Qi(a.fa, a.path, Pu(b)).get(0).then(Ja).then(ev)
    }

    function tv(a, b, c) {
        c = Math.max(c || 0, a.kM);
        return "FAILED" === b.status ? P.reject(b) : "CREATED" !== b.status ? P.resolve(b) : P.delay(c).cancellable().bind(a).then(function () {
            Ba(!!b.id, "Job id required to get an export");
            return this.MK(new lv({
                id: b.id,
                Dq: !0
            }))
        }).then(function (a) {
            return tv(this, a.oj, Math.min(c * this.FT, this.tU))
        })
    }
    rv.prototype.MK = function (a) {
        return Ii(this.fa, this.path + "/" + encodeURIComponent(a.id + "") + ("?attachment\x3d" + encodeURIComponent(a.Dq + ""))).get(0).then(Ja).then(nv)
    };

    function uv(a, b) {
        return rk(a.fa, a.path + "/" + encodeURIComponent(b.id + "")).get(0).then(Ja).then(qv)
    };
    var vv = {
        U7: "FACEBOOK",
        p8: "TWITTER",
        f8: "PINTEREST"
    };

    function wv(a, b) {
        switch (b) {
            case "FACEBOOK":
                return "FACEBOOK";
            case "TWITTER":
                return "TWITTER";
            case "PINTEREST":
                return "PINTEREST";
            default:
                throw new TypeError('expected Platform for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function xv(a, b) {
        switch (b) {
            case "FACEBOOK":
                return "FACEBOOK";
            case "TWITTER":
                return "TWITTER";
            case "PINTEREST":
                return "PINTEREST";
            default:
                throw new TypeError('expected Platform for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function yv(a, b) {
        switch (b) {
            case "PUBLISH":
                return "PUBLISH";
            case "GET_BASIC_PROFILE":
                return "GET_BASIC_PROFILE";
            case "GET_EMAIL":
                return "GET_EMAIL";
            case "PUBLISH_TO_GROUP":
                return "PUBLISH_TO_GROUP";
            case "PUBLISH_TO_PAGE":
                return "PUBLISH_TO_PAGE";
            default:
                throw new TypeError('expected Permission for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function zv(a, b) {
        switch (b) {
            case "PUBLISH":
                return "PUBLISH";
            case "GET_BASIC_PROFILE":
                return "GET_BASIC_PROFILE";
            case "GET_EMAIL":
                return "GET_EMAIL";
            case "PUBLISH_TO_GROUP":
                return "PUBLISH_TO_GROUP";
            case "PUBLISH_TO_PAGE":
                return "PUBLISH_TO_PAGE";
            default:
                throw new TypeError('expected Permission for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Av(a, b) {
        switch (b) {
            case "DEFAULT":
                return "DEFAULT";
            case "PAGE":
                return "PAGE";
            case "GROUP":
                return "GROUP";
            default:
                throw new TypeError('expected TargetType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Bv(a, b) {
        switch (b) {
            case "DEFAULT":
                return "DEFAULT";
            case "PAGE":
                return "PAGE";
            case "GROUP":
                return "GROUP";
            default:
                throw new TypeError('expected TargetType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Cv(a) {
        this.platform = a.platform;
        this.QP = a.QP;
        this.Yy = a.Yy || [];
        this.Pt = a.Pt || [];
        this.username = a.username
    }
    Cv.prototype.rg = function () {
        return this.username
    };

    function Dv(a) {
        return new Cv({
            platform: Ra(xv, "platform", a),
            QP: La("userDeniedAuthorization", a),
            Yy: Ta(zv, "grantedPermissions", a),
            Pt: Ta(zv, "deniedPermissions", a),
            username: F("username", a)
        })
    };
    var Ev = {
        neverShowReplacePageContentWarning: "aa"
    };

    function Fv(a) {
        this.fa = a;
        this.path = "/profile"
    }
    Fv.prototype.Qa = P.method(function (a) {
        return Ii(this.fa, this.path + "/users/" + encodeURIComponent(a)).get(0).then(Gv)
    });

    function Hv(a, b) {
        return Ii(a.fa, a.path + "/users/" + encodeURIComponent(b) + "?detailed").get(0).then(Iv)
    }

    function Jv(a) {
        return Ii(a.fa, a.path + "/user/uiinfo").get(0).then(function (a) {
            for (var c = _.invert(Ev), d = ka(Object.keys(a)), e = d.next(); !e.done; e = d.next())
                e = e.value,
                c[e] && (a[c[e]] = a[e],
                    delete a[e]);
            return a
        })
    }

    function Kv(a, b, c) {
        return Jv(a).then(function (a) {
                Ev[b] && (delete a[b],
                    b = Ev[b]);
                if (a[b] === c)
                    return a;
                a[b] = c;
                return Qi(this.fa, this.path + "/user/uiinfo", a).get(0)
            }
            .bind(a))
    }

    function Lv(a, b) {
        return Qi(a.fa, a.path + "/brands/" + encodeURIComponent(b.brand), b).get(0).then(Mv)
    }
    Fv.prototype.wa = function (a) {
        return Ii(this.fa, this.path + "/brands/" + encodeURIComponent(a)).get(0).then(Nv)
    };
    Fv.prototype.rW = P.method(function (a) {
        var b = this.path + "/brands/" + encodeURIComponent(a.wa()) + "/invitations";
        return Qi(this.fa, b, a).spread(Ov)
    });
    P.method(function (a) {
        a = this.path + "/brands/" + encodeURIComponent(a.wa()) + "/invitations?" + (null != a.dc() ? "\x26continuation\x3d" + encodeURIComponent(a.dc()) : "") + (null != a.Kd() ? "\x26limit\x3d" + encodeURIComponent(a.Kd()) : "") + (a.countOnly ? "\x26countOnly\x3d" + encodeURIComponent(a.countOnly) : "");
        return Ii(this.fa, a).spread(Pv)
    });
    P.method(function (a) {
        var b = this.path + "/brands/" + encodeURIComponent(a.wa()) + "/invitations?update\x3dtrue";
        return Qi(this.fa, b, a).spread(Qv)
    });
    Fv.prototype.zy = P.method(function (a) {
        a = this.path + "/brands/" + encodeURIComponent(a.wa()) + "/members?" + (a.includeAvatars ? "\x26includeAvatars\x3d" + encodeURIComponent(a.includeAvatars) : "") + (a.includeEmails ? "\x26includeEmails\x3d" + encodeURIComponent(a.includeEmails) : "") + (a.countOnly ? "\x26countOnly\x3d" + encodeURIComponent(a.countOnly) : "") + (null != a.dc() ? "\x26continuation\x3d" + encodeURIComponent(a.dc()) : "") + (null != a.Kd() ? "\x26limit\x3d" + encodeURIComponent(a.Kd()) : "") + (null != a.xE() ? "\x26users\x3d" + encodeURIComponent(a.xE().join(",")) : "");
        return Ii(this.fa, a).spread(Rv)
    });
    P.method(function (a) {
        var b = this.path + "/brands/" + encodeURIComponent(a.wa()) + "/members";
        return Qi(this.fa, b, a).spread(Sv)
    });

    function Tv(a, b) {
        return Ii(a.fa, a.path + "/users/" + encodeURIComponent(b.user) + "/oauth/" + encodeURIComponent(b.platform)).get(0).then(Ja).then(Uv)
    };
    var Xl = "MEMBER";

    function yh(a, b) {
        switch (b) {
            case "MEMBER":
                return Xl;
            case "DESIGNER":
                return "DESIGNER";
            case "ADMIN":
                return "ADMIN";
            case "OWNER":
                return "OWNER";
            default:
                throw new TypeError('expected BrandUserRole for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Vv(a, b) {
        switch (b) {
            case "PENDING":
                return "PENDING";
            case "SUCCEEDED":
                return "SUCCEEDED";
            case "FAILED":
                return "FAILED";
            default:
                throw new TypeError('expected AvatarBundleStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Wv(a, b) {
        switch (b) {
            case "PENDING":
                return "PENDING";
            case "SUCCEEDED":
                return "SUCCEEDED";
            case "FAILED":
                return "FAILED";
            default:
                throw new TypeError('expected AvatarBundleStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Xv(a, b) {
        switch (b) {
            case "AD":
                return "AD";
            case "AE":
                return "AE";
            case "AF":
                return "AF";
            case "AG":
                return "AG";
            case "AI":
                return "AI";
            case "AL":
                return "AL";
            case "AM":
                return "AM";
            case "AO":
                return "AO";
            case "AQ":
                return "AQ";
            case "AR":
                return "AR";
            case "AS":
                return "AS";
            case "AT":
                return "AT";
            case "AU":
                return "AU";
            case "AW":
                return "AW";
            case "AX":
                return "AX";
            case "AZ":
                return "AZ";
            case "BA":
                return "BA";
            case "BB":
                return "BB";
            case "BD":
                return "BD";
            case "BE":
                return "BE";
            case "BF":
                return "BF";
            case "BG":
                return "BG";
            case "BH":
                return "BH";
            case "BI":
                return "BI";
            case "BJ":
                return "BJ";
            case "BL":
                return "BL";
            case "BM":
                return "BM";
            case "BN":
                return "BN";
            case "BO":
                return "BO";
            case "BQ":
                return "BQ";
            case "BR":
                return "BR";
            case "BS":
                return "BS";
            case "BT":
                return "BT";
            case "BV":
                return "BV";
            case "BW":
                return "BW";
            case "BY":
                return "BY";
            case "BZ":
                return "BZ";
            case "CA":
                return "CA";
            case "CC":
                return "CC";
            case "CD":
                return "CD";
            case "CF":
                return "CF";
            case "CG":
                return "CG";
            case "CH":
                return "CH";
            case "CI":
                return "CI";
            case "CK":
                return "CK";
            case "CL":
                return "CL";
            case "CM":
                return "CM";
            case "CN":
                return "CN";
            case "CO":
                return "CO";
            case "CR":
                return "CR";
            case "CU":
                return "CU";
            case "CV":
                return "CV";
            case "CW":
                return "CW";
            case "CX":
                return "CX";
            case "CY":
                return "CY";
            case "CZ":
                return "CZ";
            case "DE":
                return "DE";
            case "DJ":
                return "DJ";
            case "DK":
                return "DK";
            case "DM":
                return "DM";
            case "DO":
                return "DO";
            case "DZ":
                return "DZ";
            case "EC":
                return "EC";
            case "EE":
                return "EE";
            case "EG":
                return "EG";
            case "EH":
                return "EH";
            case "ER":
                return "ER";
            case "ES":
                return "ES";
            case "ET":
                return "ET";
            case "FI":
                return "FI";
            case "FJ":
                return "FJ";
            case "FK":
                return "FK";
            case "FM":
                return "FM";
            case "FO":
                return "FO";
            case "FR":
                return "FR";
            case "GA":
                return "GA";
            case "GB":
                return "GB";
            case "GD":
                return "GD";
            case "GE":
                return "GE";
            case "GF":
                return "GF";
            case "GG":
                return "GG";
            case "GH":
                return "GH";
            case "GI":
                return "GI";
            case "GL":
                return "GL";
            case "GM":
                return "GM";
            case "GN":
                return "GN";
            case "GP":
                return "GP";
            case "GQ":
                return "GQ";
            case "GR":
                return "GR";
            case "GS":
                return "GS";
            case "GT":
                return "GT";
            case "GU":
                return "GU";
            case "GW":
                return "GW";
            case "GY":
                return "GY";
            case "HK":
                return "HK";
            case "HM":
                return "HM";
            case "HN":
                return "HN";
            case "HR":
                return "HR";
            case "HT":
                return "HT";
            case "HU":
                return "HU";
            case "ID":
                return "ID";
            case "IE":
                return "IE";
            case "IL":
                return "IL";
            case "IM":
                return "IM";
            case "IN":
                return "IN";
            case "IO":
                return "IO";
            case "IQ":
                return "IQ";
            case "IR":
                return "IR";
            case "IS":
                return "IS";
            case "IT":
                return "IT";
            case "JE":
                return "JE";
            case "JM":
                return "JM";
            case "JO":
                return "JO";
            case "JP":
                return "JP";
            case "KE":
                return "KE";
            case "KG":
                return "KG";
            case "KH":
                return "KH";
            case "KI":
                return "KI";
            case "KM":
                return "KM";
            case "KN":
                return "KN";
            case "KP":
                return "KP";
            case "KR":
                return "KR";
            case "KW":
                return "KW";
            case "KY":
                return "KY";
            case "KZ":
                return "KZ";
            case "LA":
                return "LA";
            case "LB":
                return "LB";
            case "LC":
                return "LC";
            case "LI":
                return "LI";
            case "LK":
                return "LK";
            case "LR":
                return "LR";
            case "LS":
                return "LS";
            case "LT":
                return "LT";
            case "LU":
                return "LU";
            case "LV":
                return "LV";
            case "LY":
                return "LY";
            case "MA":
                return "MA";
            case "MC":
                return "MC";
            case "MD":
                return "MD";
            case "ME":
                return "ME";
            case "MF":
                return "MF";
            case "MG":
                return "MG";
            case "MH":
                return "MH";
            case "MK":
                return "MK";
            case "ML":
                return "ML";
            case "MM":
                return "MM";
            case "MN":
                return "MN";
            case "MO":
                return "MO";
            case "MP":
                return "MP";
            case "MQ":
                return "MQ";
            case "MR":
                return "MR";
            case "MS":
                return "MS";
            case "MT":
                return "MT";
            case "MU":
                return "MU";
            case "MV":
                return "MV";
            case "MW":
                return "MW";
            case "MX":
                return "MX";
            case "MY":
                return "MY";
            case "MZ":
                return "MZ";
            case "NA":
                return "NA";
            case "NC":
                return "NC";
            case "NE":
                return "NE";
            case "NF":
                return "NF";
            case "NG":
                return "NG";
            case "NI":
                return "NI";
            case "NL":
                return "NL";
            case "NO":
                return "NO";
            case "NP":
                return "NP";
            case "NR":
                return "NR";
            case "NU":
                return "NU";
            case "NZ":
                return "NZ";
            case "OM":
                return "OM";
            case "PA":
                return "PA";
            case "PE":
                return "PE";
            case "PF":
                return "PF";
            case "PG":
                return "PG";
            case "PH":
                return "PH";
            case "PK":
                return "PK";
            case "PL":
                return "PL";
            case "PM":
                return "PM";
            case "PN":
                return "PN";
            case "PR":
                return "PR";
            case "PS":
                return "PS";
            case "PT":
                return "PT";
            case "PW":
                return "PW";
            case "PY":
                return "PY";
            case "QA":
                return "QA";
            case "RE":
                return "RE";
            case "RO":
                return "RO";
            case "RS":
                return "RS";
            case "RU":
                return "RU";
            case "RW":
                return "RW";
            case "SA":
                return "SA";
            case "SB":
                return "SB";
            case "SC":
                return "SC";
            case "SD":
                return "SD";
            case "SE":
                return "SE";
            case "SG":
                return "SG";
            case "SH":
                return "SH";
            case "SI":
                return "SI";
            case "SJ":
                return "SJ";
            case "SK":
                return "SK";
            case "SL":
                return "SL";
            case "SM":
                return "SM";
            case "SN":
                return "SN";
            case "SO":
                return "SO";
            case "SR":
                return "SR";
            case "SS":
                return "SS";
            case "ST":
                return "ST";
            case "SV":
                return "SV";
            case "SX":
                return "SX";
            case "SY":
                return "SY";
            case "SZ":
                return "SZ";
            case "TC":
                return "TC";
            case "TD":
                return "TD";
            case "TF":
                return "TF";
            case "TG":
                return "TG";
            case "TH":
                return "TH";
            case "TJ":
                return "TJ";
            case "TK":
                return "TK";
            case "TL":
                return "TL";
            case "TM":
                return "TM";
            case "TN":
                return "TN";
            case "TO":
                return "TO";
            case "TR":
                return "TR";
            case "TT":
                return "TT";
            case "TV":
                return "TV";
            case "TW":
                return "TW";
            case "TZ":
                return "TZ";
            case "UA":
                return "UA";
            case "UG":
                return "UG";
            case "UM":
                return "UM";
            case "US":
                return "US";
            case "UY":
                return "UY";
            case "UZ":
                return "UZ";
            case "VA":
                return "VA";
            case "VC":
                return "VC";
            case "VE":
                return "VE";
            case "VG":
                return "VG";
            case "VI":
                return "VI";
            case "VN":
                return "VN";
            case "VU":
                return "VU";
            case "WF":
                return "WF";
            case "WS":
                return "WS";
            case "YE":
                return "YE";
            case "YT":
                return "YT";
            case "ZA":
                return "ZA";
            case "ZM":
                return "ZM";
            case "ZW":
                return "ZW";
            case "ZZ":
                return "ZZ";
            default:
                throw new TypeError('expected CountryCode for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Yv(a, b) {
        switch (b) {
            case "ROOT":
                return "ROOT";
            case "USER":
                return "USER";
            case "REVIEWER":
                return "REVIEWER";
            case "ETCHER":
                return "ETCHER";
            case "SUPPORT":
                return "SUPPORT";
            case "THIRD_PARTY":
                return "THIRD_PARTY";
            case "FUSION":
                return "FUSION";
            default:
                throw new TypeError('expected UserRole for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Zv(a) {
        this.platform = a.platform;
        this.valid = a.valid;
        this.permissions = a.permissions || [];
        this.Yy = a.Yy || [];
        this.Pt = a.Pt || [];
        this.username = a.username
    }
    Zv.prototype.rg = function () {
        return this.username
    };

    function $v(a) {
        return new Zv({
            platform: Ra(xv, "platform", a),
            valid: La("valid", a),
            permissions: Ta(zv, "permissions", a),
            Yy: Ta(zv, "grantedPermissions", a),
            Pt: Ta(zv, "deniedPermissions", a),
            username: F("username", a)
        })
    }

    function aw(a) {
        this.user = a.user;
        this.platform = a.platform
    }
    aw.prototype.Qa = function () {
        return this.user
    };

    function bw(a) {
        this.summary = a.summary
    }

    function Uv(a) {
        return new bw({
            summary: Na($v, "summary", a)
        })
    }

    function cw(a) {
        this.version = a.version;
        this.sizes = a.sizes || new Map;
        this.status = a.status
    }
    cw.prototype.getVersion = function () {
        return this.version
    };
    cw.prototype.Oh = function () {
        return this.status
    };

    function dw(a) {
        return {
            version: db("version", a.version),
            sizes: nb(ew, "sizes", a.sizes),
            status: mb(Vv, "status", a.status)
        }
    }

    function fw(a) {
        var b = z("version", a),
            c;
        c = Ua(Va, Xa.bind(null, gw), "sizes", a);
        return new cw({
            version: b,
            sizes: c,
            status: Sa(Wv, "status", a)
        })
    }

    function hw(a) {
        this.size = a.size;
        this.width = a.width;
        this.height = a.height;
        this.url = a.url
    }
    hw.prototype.cp = function () {
        return this.size
    };
    hw.prototype.D = function () {
        return this.width
    };
    hw.prototype.F = function () {
        return this.height
    };
    hw.prototype.Aa = function () {
        return this.url
    };

    function ew(a) {
        return {
            size: db("size", a.size),
            width: db("width", a.width),
            height: db("height", a.height),
            url: hb("url", a.url)
        }
    }

    function gw(a) {
        return new hw({
            size: z("size", a),
            width: z("width", a),
            height: z("height", a),
            url: D("url", a)
        })
    }

    function Bn(a) {
        this.sg = a.sg;
        this.name = a.name
    }
    Bn.prototype.getName = function () {
        return this.name
    };

    function iw(a) {
        return new Bn({
            sg: D("hexString", a),
            name: F("name", a)
        })
    }

    function zn(a) {
        this.rd = a.rd || [];
        this.name = a.name
    }
    zn.prototype.og = function () {
        return this.rd
    };
    zn.prototype.getName = function () {
        return this.name
    };

    function jw(a) {
        return new zn({
            rd: Qa(iw, "colors", a),
            name: F("name", a)
        })
    }

    function kw(a) {
        this.size = a.size;
        this.media = a.media;
        this.family = a.family;
        this.bold = a.bold;
        this.v = a.v
    }
    kw.prototype.cp = function () {
        return this.size
    };
    kw.prototype.ac = function () {
        return this.media
    };

    function lw(a) {
        return new kw({
            size: z("size", a),
            media: Pa(Gm, "media", a),
            family: F("family", a),
            bold: Ma("bold", a),
            v: Ma("italic", a)
        })
    }

    function mw(a) {
        this.font = a.font;
        this.name = a.name
    }
    mw.prototype.getName = function () {
        return this.name
    };

    function nw(a) {
        return new mw({
            font: Pa(lw, "font", a),
            name: F("name", a)
        })
    }

    function ow(a) {
        this.name = a.name;
        this.GB = a.GB || []
    }
    ow.prototype.getName = function () {
        return this.name
    };

    function pw(a) {
        return new ow({
            name: F("name", a),
            GB: Qa(nw, "textStyles", a)
        })
    }

    function qw(a) {
        this.Yb = a.Yb;
        this.Gx = a.Gx || [];
        this.EB = a.EB || []
    }
    qw.prototype.Qo = function () {
        return this.Yb
    };

    function rw(a) {
        return new qw({
            Yb: Pa(iw, "brandColor", a),
            Gx: Qa(jw, "colorPalettes", a),
            EB: Qa(pw, "textStylePalettes", a)
        })
    }

    function sw(a) {
        this.id = a.id;
        this.username = a.username;
        this.tA = a.tA;
        this.displayName = a.displayName;
        this.jL = a.jL;
        this.Sf = a.Sf;
        this.Sc = a.Sc;
        this.zC = a.zC;
        this.yG = a.yG || [];
        this.locale = a.locale;
        this.iD = a.iD
    }
    f = sw.prototype;
    f.G = function () {
        return this.id
    };
    f.rg = function () {
        return this.username
    };
    f.Py = function () {
        return this.tA
    };
    f.Tb = function () {
        return this.displayName
    };
    f.lu = function () {
        return this.Sf
    };
    f.lr = function () {
        return this.Sc
    };
    f.RS = function () {
        return this.zC
    };
    f.vr = function () {
        return this.yG
    };
    f.qg = function () {
        return this.locale
    };

    function tw() {
        this.enabled = null;
        this.allowedReferrers = []
    }
    tw.prototype.isEnabled = function () {
        return this.enabled
    };

    function uw() {
        this.id = "";
        this.brandname = this.displayName = null;
        this.thirdParty = this.layoutContributor = this.contributor = this.personal = !1;
        this.billingInfo = this.brandKit = this.apiSettings = null
    }
    f = uw.prototype;
    f.G = function () {
        return this.id
    };
    f.Tb = function () {
        return this.displayName
    };
    f.HK = function () {
        return this.brandname
    };
    f.JT = function () {
        return this.contributor
    };
    f.QT = function () {
        return this.layoutContributor
    };
    f.Ph = function () {
        return this.personal
    };
    f.VT = function () {
        return this.thirdParty
    };
    f.Ro = function () {
        return this.brandKit ? rw(this.brandKit) : null
    };

    function Mv(a) {
        if (!a)
            return null;
        a = R(uw, a);
        var b;
        b = (b = a.apiSettings) ? R(tw, b) : null;
        a.apiSettings = b;
        return a
    }

    function vw(a) {
        a = void 0 === a ? {} : a;
        this.id = a.id || "";
        this.displayName = a.displayName || null;
        this.brandname = a.w8 || null;
        this.personal = a.Zr || !1;
        this.contributor = a.A8 || !1;
        this.layoutContributor = a.e9 || !1;
        this.thirdParty = a.O9 || !1;
        this.brandColor = a.Yb || null
    }
    f = vw.prototype;
    f.G = function () {
        return this.id
    };
    f.Tb = function () {
        return this.displayName
    };
    f.HK = function () {
        return this.brandname
    };
    f.JT = function () {
        return this.contributor
    };
    f.QT = function () {
        return this.layoutContributor
    };
    f.Ph = function () {
        return this.personal
    };
    f.VT = function () {
        return this.thirdParty
    };
    f.Qo = function () {
        return this.brandColor
    };

    function Nv(a) {
        return a ? R(vw, a) : null
    }

    function ww() {
        this.brand = "";
        this.owner = this.billingInfo = this.hiddenMagicTemplates = this.personal = this.brandKit = this.apiSettings = this.displayName = this.brandname = null
    }
    f = ww.prototype;
    f.io = function (a) {
        this.brand = a;
        return this
    };
    f.G = function () {
        return this.brand
    };
    f.$s = function (a) {
        this.brandname = a;
        return this
    };
    f.getName = function () {
        return this.brandname
    };

    function xw(a, b) {
        a.displayName = b;
        return a
    }
    f.Tb = function () {
        return this.displayName
    };

    function yw(a) {
        a.personal = !1;
        return a
    }

    function zw(a) {
        a = void 0 === a ? {} : a;
        this.id = a.id || "UNKNOWN_USER_ID";
        this.username = a.username || "";
        this.personalBrand = a.tA || "";
        this.displayName = a.displayName || "";
        this.homepage = a.jL || null;
        this.city = a.Sf || null;
        this.countryCode = a.Sc || null;
        this.avatar = a.zC || null;
        this.roles = a.yG || [];
        this.deactivated = a.iD || !1
    }
    f = zw.prototype;
    f.G = function () {
        return this.id
    };
    f.rg = function () {
        return this.username
    };
    f.Py = function () {
        return this.personalBrand
    };
    f.Tb = function () {
        return this.displayName
    };
    f.lu = function () {
        return this.city
    };
    f.lr = function () {
        return this.countryCode
    };
    f.ju = function () {
        return this.avatar
    };
    f.vr = function () {
        return this.roles
    };

    function Gv(a) {
        if (!a)
            return null;
        a = R(zw, a);
        a.avatar && (a.avatar = fw(a.avatar));
        return a
    }

    function ik(a) {
        return Gv(a)
    }
    f.JB = function () {
        var a = Object.assign({}, this, {
            avatar: this.avatar && dw(this.avatar)
        });
        return new sw({
            id: D("id", a),
            username: F("username", a),
            tA: F("personalBrand", a),
            displayName: D("displayName", a),
            jL: F("homepage", a),
            Sf: F("city", a),
            Sc: Sa(Xv, "countryCode", a),
            zC: Na(fw, "avatar", a),
            yG: Ta(Yv, "roles", a),
            locale: F("locale", a),
            iD: La("deactivated", a)
        })
    };
    f.SS = function (a) {
        var b = this.ju();
        return b && (a = b.sizes.get(a)) ? a.Aa() : null
    };

    function Aw() {}

    function Bw() {
        this.id = "";
        this.creationDate = 0;
        this.temporary = this.deactivated = !1;
        this.email = this.displayName = "";
        this.emailVerified = !1;
        this.emailStatus = null;
        this.username = "";
        this.userNotificationSettings = this.countryCode = this.city = this.homepage = null;
        this.avatars = [];
        this.apiDetails = this.google = this.facebook = this.credentials = this.avatar = null;
        this.roles = [];
        this.personalBrand = "";
        this.brands = {};
        this.uiInfo = null;
        this.features = [];
        this.locale = "";
        this.profession = null
    }
    f = Bw.prototype;
    f.G = function () {
        return this.id
    };
    f.Tb = function () {
        return this.displayName
    };
    f.bh = function () {
        return this.email
    };
    f.MT = function () {
        return this.emailStatus ? "VERIFIED" === this.emailStatus : this.emailVerified
    };
    f.rg = function () {
        return this.username
    };
    f.lu = function () {
        return this.city
    };
    f.lr = function () {
        return this.countryCode
    };
    f.ju = function () {
        return this.avatar
    };
    f.vr = function () {
        return this.roles
    };
    f.Py = function () {
        return this.personalBrand
    };
    f.TS = function () {
        return this.brands
    };
    f.Wy = function () {
        return this.uiInfo
    };
    f.qg = function () {
        return this.locale
    };
    f.setLocale = function (a) {
        this.locale = a
    };

    function Iv(a) {
        var b;
        if (!a)
            return null;
        b = R(Bw, a);
        b.avatar && (b.avatar = fw(b.avatar));
        a.userNotificationSettings && (b.userNotificationSettings = R(Aw, a.userNotificationSettings));
        return b
    }
    f.SS = function (a) {
        var b = this.ju();
        return b && (a = b.sizes.get(a)) ? a.Aa() : null
    };
    f.JB = function () {
        return Gv({
            id: this.id,
            username: this.username,
            personalBrand: this.personalBrand,
            displayName: this.displayName,
            homepage: this.homepage,
            city: this.city,
            countryCode: this.countryCode,
            avatar: this.avatar && dw(this.avatar),
            roles: this.roles,
            deactivated: this.deactivated
        })
    };
    var Cw = fw({
        version: 0,
        sizes: {
            50: {
                size: 50,
                width: 50,
                height: 50,
                url: "https://static.canva.com/static/images/default_avatar_50.png"
            },
            200: {
                size: 200,
                width: 200,
                height: 200,
                url: "https://static.canva.com/static/images/default_avatar_200.png"
            }
        }
    });

    function Dw() {}
    Dw.prototype.bh = function () {
        return this.email
    };
    Dw.prototype.Ii = function () {
        return this.role
    };

    function Ew() {}
    Ew.prototype.Hg = function (a) {
        this.brand = a;
        return this
    };
    Ew.prototype.wa = function () {
        return this.brand
    };

    function Fw(a, b) {
        a.invitees = b;
        return a
    }

    function Gw(a, b) {
        a.utmContent = b;
        return a
    }

    function Hw() {}

    function Ov(a) {
        return Object.freeze(R(Hw, a))
    }

    function Iw() {}
    Iw.prototype.dc = function () {
        return this.continuation
    };
    Iw.prototype.getCount = function () {
        return this.count
    };

    function Pv(a) {
        return Object.freeze(R(Iw, a))
    }

    function Jw(a) {
        a = void 0 === a ? {} : a;
        this.user = a.user;
        this.email = a.email;
        this.role = a.Fn
    }
    Jw.prototype.Qa = function () {
        return this.user
    };
    Jw.prototype.bh = function () {
        return this.email
    };
    Jw.prototype.Ii = function () {
        return this.role
    };

    function Kw(a) {
        a = R(Jw, a);
        a.user = Gv(a.user);
        return Object.freeze(a)
    }

    function Lw() {}
    f = Lw.prototype;
    f.Hg = function (a) {
        this.brand = a;
        return this
    };
    f.wa = function () {
        return this.brand
    };
    f.aj = function (a) {
        this.continuation = a;
        return this
    };
    f.dc = function () {
        return this.continuation
    };
    f.Ig = function (a) {
        this.limit = a;
        return this
    };
    f.Kd = function () {
        return this.limit
    };

    function Mw(a) {
        a.includeAvatars = !0;
        return a
    }

    function Nw(a) {
        a.includeEmails = !0;
        return a
    }

    function Ow(a) {
        a.countOnly = !0;
        return a
    }

    function Pw(a, b) {
        a.users = b;
        return a
    }
    f.xE = function () {
        return this.users
    };

    function Qw(a) {
        a = void 0 === a ? {} : a;
        this.members = a.xp
    }
    Qw.prototype.rE = function () {
        return this.members
    };
    Qw.prototype.dc = function () {
        return this.continuation
    };
    Qw.prototype.getCount = function () {
        return this.count
    };

    function Rv(a) {
        a = R(Qw, a);
        a.members && (a.members = a.members.map(Kw));
        return Object.freeze(a)
    }

    function Rw() {}
    Rw.prototype.rE = function () {
        return this.members
    };
    Rw.prototype.wa = function () {
        return this.brand
    };

    function Sv(a) {
        a = R(Rw, a);
        a.members && (a.members = a.members.map(Kw));
        return Object.freeze(a)
    }

    function Sw() {}

    function Qv(a) {
        return Object.freeze(R(Sw, a))
    };

    function Tw(a) {
        this.fa = a;
        this.path = "/social"
    }
    Tw.prototype.createComment = function (a) {
        return Qi(this.fa, this.path + "/comments/" + encodeURIComponent(a.object), Uw(a)).get(0).then(Ja).then(Vw)
    };

    function Uw(a) {
        return {
            object: hb("object", a.object),
            content: hb("content", a.content)
        }
    }

    function Ww(a) {
        this.id = a.id;
        this.dD = a.dD
    }
    Ww.prototype.G = function () {
        return this.id
    };

    function Vw(a) {
        return new Ww({
            id: D("id", a),
            dD: z("created", a)
        })
    };

    function Xw() {}

    function Yw() {
        var a = R(Xw, window.clientInfo),
            b;
        b = R(Zw, a.brandInfo);
        b.brand = Nv(b.brand);
        b.subscription && (b.subscription = Wi(b.subscription));
        b = Object.freeze(b);
        a.brandInfo = b;
        b = R($w, a.user);
        b.avatar && (b.avatar = fw(b.avatar));
        b = Object.freeze(b);
        a.user = b;
        return Object.freeze(a)
    }

    function ax(a) {
        return a.brandInfo
    }

    function bx(a) {
        return a.user
    }

    function Zw() {}
    Zw.prototype.wa = function () {
        return this.brand
    };
    Zw.prototype.Ro = function () {
        return this.brandKit ? rw(this.brandKit) : null
    };
    Zw.prototype.getSubscription = function () {
        return this.subscription || null
    };

    function cx(a) {
        return a.brandMembersCount
    }

    function dx(a) {
        return a.brandInvitationsCount
    }

    function $w() {}
    f = $w.prototype;
    f.G = function () {
        return this.id
    };
    f.RS = function () {
        return this.avatar
    };
    f.bh = function () {
        return this.email
    };
    f.MT = function () {
        return this.emailVerified
    };
    f.rg = function () {
        return this.username
    };
    f.Tb = function () {
        return this.displayName
    };
    f.vr = function () {
        return this.roles
    };
    f.Py = function () {
        return this.personalBrand
    };
    f.Wy = function () {
        return this.uiInfo
    };
    f.qg = function () {
        return this.locale
    };
    f.oE = function () {
        return this.country
    };
    f.JB = function () {
        return Gv({
            id: this.G(),
            username: this.rg(),
            personalBrand: this.Py(),
            displayName: this.Tb(),
            avatar: dw(this.RS()),
            roles: this.vr(),
            countryCode: this.oE()
        })
    };

    function ex() {
        this.fa = Hb;
        this.url = "/session"
    }

    function gx(a) {
        return Qi(a.fa, a.url + "/brand?invalidateCache", null)
    }

    function hx(a) {
        return Qi(a.fa, a.url + "/user?invalidateCache", null)
    };

    function ix(a) {
        this.fa = a;
        this.url = "/shares"
    }
    ix.prototype.bT = function (a) {
        return Ii(this.fa, this.url + "/" + encodeURIComponent(a.id)).get(0).then(Ja).then(jx)
    };

    function kx(a, b) {
        return Qi(a.fa, a.url + "/targetqueues", lx(b)).get(0).then(Ja).then(mx)
    }

    function nx(a, b) {
        return Ii(a.fa, a.url + "/targetqueues?" + (b.user ? "\x26user\x3d" + encodeURIComponent(b.user) : "") + (b.Z ? "\x26brand\x3d" + encodeURIComponent(b.Z) : "") + (b.hf ? "\x26targetType\x3d" + encodeURIComponent(b.hf) : "") + (b.externalId ? "\x26externalId\x3d" + encodeURIComponent(b.externalId) : "") + (b.platform ? "\x26platform\x3d" + encodeURIComponent(b.platform) : "") + (b.na ? "\x26continuation\x3d" + encodeURIComponent(b.na) : "") + ("\x26limit\x3d" + encodeURIComponent(String(b.limit)))).get(0).then(Ja).then(ox)
    }

    function px(a, b) {
        return Qi(a.fa, a.url + "/email/document/" + encodeURIComponent(b.zb), qx(b)).get(0).then(Ja).then(rx)
    }

    function sx(a, b) {
        return Ii(a.fa, a.url + "/email/quota/" + encodeURIComponent(b.Uv)).get(0).then(Ja).then(tx)
    };

    function ux(a, b) {
        switch (b) {
            case "NEW":
                return "NEW";
            case "IN_PROGRESS":
                return "IN_PROGRESS";
            case "SUCCESS":
                return "SUCCESS";
            case "FAILURE":
                return "FAILURE";
            default:
                throw new TypeError('expected Status for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function vx(a, b) {
        switch (b) {
            case "UPLOAD_NOW":
                return "UPLOAD_NOW";
            case "SCHEDULE_FOR_DATE":
                return "SCHEDULE_FOR_DATE";
            default:
                throw new TypeError('expected Action for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function wx(a, b) {
        switch (b) {
            case "UPLOAD_NOW":
                return "UPLOAD_NOW";
            case "SCHEDULE_FOR_DATE":
                return "SCHEDULE_FOR_DATE";
            default:
                throw new TypeError('expected Action for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function xx(a) {
        this.platform = a.platform;
        this.hf = a.hf;
        this.externalId = a.externalId
    }

    function yx(a) {
        return {
            platform: lb(wv, "platform", a.platform),
            targetType: lb(Av, "targetType", a.hf),
            externalId: ib("externalId", a.externalId)
        }
    }

    function zx(a) {
        this.id = a.id;
        this.platform = a.platform;
        this.Cw = a.Cw;
        this.version = a.version;
        this.document = a.document;
        this.lc = a.lc;
        this.message = a.message;
        this.title = a.title;
        this.oU = a.oU;
        this.status = a.status;
        this.url = a.url
    }
    f = zx.prototype;
    f.G = function () {
        return this.id
    };
    f.getVersion = function () {
        return this.version
    };
    f.getDocument = function () {
        return this.document
    };
    f.Jb = function () {
        return this.title
    };
    f.Oh = function () {
        return this.status
    };
    f.Aa = function () {
        return this.url
    };

    function Ax(a) {
        return new zx({
            id: D("id", a),
            platform: Ra(xv, "platform", a),
            Cw: Na(Bx, "targetQueue", a),
            version: z("version", a),
            document: F("document", a),
            lc: A("documentVersion", a),
            message: F("message", a),
            title: F("title", a),
            oU: F("linkUrl", a),
            status: Ra(ux, "status", a),
            url: F("url", a)
        })
    }

    function Cx(a) {
        this.id = a.id;
        this.pf = a.pf;
        this.user = a.user;
        this.Z = a.Z;
        this.action = a.action;
        this.status = a.status;
        this.Nw = a.Nw || []
    }
    Cx.prototype.G = function () {
        return this.id
    };
    Cx.prototype.Qa = function () {
        return this.user
    };
    Cx.prototype.wa = function () {
        return this.Z
    };
    Cx.prototype.Oh = function () {
        return this.status
    };

    function Dx(a) {
        return new Cx({
            id: D("id", a),
            pf: z("creationDate", a),
            user: D("user", a),
            Z: D("brand", a),
            action: Sa(wx, "action", a),
            status: Ra(ux, "status", a),
            Nw: Qa(Ax, "uploads", a)
        })
    }

    function Ex(a) {
        this.id = a.id;
        this.user = a.user;
        this.Z = a.Z;
        this.platform = a.platform;
        this.hf = a.hf;
        this.externalId = a.externalId;
        this.uS = a.uS;
        this.vS = a.vS
    }
    Ex.prototype.G = function () {
        return this.id
    };
    Ex.prototype.Qa = function () {
        return this.user
    };
    Ex.prototype.wa = function () {
        return this.Z
    };

    function Bx(a) {
        return new Ex({
            id: D("id", a),
            user: D("user", a),
            Z: D("brand", a),
            platform: Ra(xv, "platform", a),
            hf: Ra(Bv, "targetType", a),
            externalId: F("externalId", a),
            uS: F("externalName", a),
            vS: F("externalThumb", a)
        })
    }

    function Fx(a) {
        this.user = a.user;
        this.Z = a.Z;
        this.document = a.document;
        this.lc = a.lc;
        this.message = a.message;
        this.uJ = a.uJ || [];
        this.Os = a.Os || [];
        this.action = a.action;
        this.LQ = a.LQ
    }
    Fx.prototype.Qa = function () {
        return this.user
    };
    Fx.prototype.wa = function () {
        return this.Z
    };
    Fx.prototype.getDocument = function () {
        return this.document
    };

    function Gx(a) {
        return {
            user: hb("user", a.user),
            brand: hb("brand", a.Z),
            document: ib("document", a.document),
            documentVersion: eb("documentVersion", a.lc),
            message: ib("message", a.message),
            destinations: kb(yx, "destinations", a.uJ),
            targetQueues: $a.$d("targetQueues", a.Os),
            action: lb(vx, "action", a.action),
            absoluteSchedule: eb("absoluteSchedule", a.LQ)
        }
    }

    function Hx(a) {
        this.id = a.id
    }
    Hx.prototype.G = function () {
        return this.id
    };

    function Ix(a) {
        return new Hx({
            id: D("id", a)
        })
    }

    function Jx(a) {
        this.id = a.id
    }
    Jx.prototype.G = function () {
        return this.id
    };

    function Kx(a) {
        this.cw = a.cw
    }
    Kx.prototype.bT = function () {
        return this.cw
    };

    function jx(a) {
        return new Kx({
            cw: Na(Dx, "share", a)
        })
    }

    function Lx(a) {
        this.user = a.user;
        this.Z = a.Z;
        this.platform = a.platform;
        this.hf = a.hf;
        this.timeZone = a.timeZone;
        this.externalId = a.externalId
    }
    Lx.prototype.Qa = function () {
        return this.user
    };
    Lx.prototype.wa = function () {
        return this.Z
    };

    function lx(a) {
        return {
            user: hb("user", a.user),
            brand: hb("brand", a.Z),
            platform: lb(wv, "platform", a.platform),
            targetType: lb(Av, "targetType", a.hf),
            timeZone: hb("timeZone", a.timeZone),
            externalId: ib("externalId", a.externalId)
        }
    }

    function Mx(a) {
        this.Cw = a.Cw
    }

    function mx(a) {
        return new Mx({
            Cw: Na(Bx, "targetQueue", a)
        })
    }

    function Nx(a) {
        this.user = a.user;
        this.Z = a.Z;
        this.platform = a.platform;
        this.hf = a.hf;
        this.externalId = a.externalId;
        this.na = a.na;
        this.limit = a.limit
    }
    Nx.prototype.Qa = function () {
        return this.user
    };
    Nx.prototype.wa = function () {
        return this.Z
    };
    Nx.prototype.dc = function () {
        return this.na
    };
    Nx.prototype.Kd = function () {
        return this.limit
    };

    function Ox(a) {
        this.Os = a.Os || [];
        this.na = a.na
    }
    Ox.prototype.dc = function () {
        return this.na
    };

    function ox(a) {
        return new Ox({
            Os: Qa(Bx, "targetQueues", a),
            na: F("continuation", a)
        })
    }

    function Px(a) {
        this.zb = a.zb;
        this.$R = a.$R;
        this.mode = a.mode;
        this.Zg = a.Zg;
        this.dr = a.dr || [];
        this.Ae = a.Ae;
        this.Uv = a.Uv;
        this.SB = a.SB;
        this.Ia = a.Ia;
        this.sG = a.sG
    }
    Px.prototype.Fc = function () {
        return this.zb
    };
    Px.prototype.getExtension = function () {
        return this.Zg
    };

    function qx(a) {
        return {
            documentId: hb("documentId", a.zb),
            documentUrl: ib("documentUrl", a.$R),
            mode: hb("mode", a.mode),
            extension: ib("extension", a.Zg),
            emails: $a.$d("emails", a.dr),
            imageUrl: ib("imageUrl", a.Ae),
            senderId: ib("senderId", a.Uv),
            utmSource: ib("utmSource", a.SB),
            brandId: ib("brandId", a.Ia),
            recaptchaToken: ib("recaptchaToken", a.sG)
        }
    }

    function Qx(a) {
        this.RN = a.RN
    }

    function rx(a) {
        return new Qx({
            RN: Ma("recaptchaRequired", a)
        })
    }

    function Rx(a) {
        this.Uv = a.Uv
    }

    function Sx(a) {
        this.Jo = a.Jo
    }

    function tx(a) {
        return new Sx({
            Jo: z("emailsRemaining", a)
        })
    };

    function Uo() {}
    Uo = Backbone.View.extend();
    Uo.prototype.initialize = function (a) {
        a = _.defaults({}, a, {
            Kq: !0,
            content: $(),
            cf: !0,
            Qn: !0
        });
        this.aa = a.aa;
        this.Kq = !!a.Kq;
        this.content = a.content;
        this.Nd = new Tx({
            style: this.Xo(),
            aa: this.aa
        });
        this.listenTo(this.Nd, "maskClick", this.blur);
        this.result = 1;
        this.cf = !!a.cf;
        this.Je = !!a.Je;
        this.Qn = !!a.Qn;
        this.title = a.Qn ? a.title : "";
        this.zS = null;
        this.pw = !1
    };
    Uo.tQ = 300;
    f = Uo.prototype;
    f.blur = function () {
        this.Kq && (this.result = 0,
            this.remove())
    };
    f.cancel = function () {
        this.result = 1;
        this.remove()
    };
    f.fail = function (a) {
        this.result = 3;
        this.zS = a || null;
        this.remove()
    };
    f.events = function () {
        return {
            "click .close": this.Rr,
            "click .dialogMaskCloseButton": this.Rr,
            "click button.done": this.ok
        }
    };
    f.Xo = function () {
        return Ux
    };
    f.ok = function () {
        this.result = 2;
        this.remove()
    };
    f.Rr = function (a) {
        a.preventDefault();
        this.cancel()
    };
    f.remove = function () {
        var a = this;
        this.$el.children(".dialog").addClass("disappearing");
        this.Nd.hide();
        this.pw = !1;
        this.trigger("hide", this.result);
        this.aa.setTimeout(function () {
            a.trigger("remove", a);
            Backbone.View.prototype.remove.call(a)
        }, Uo.tQ);
        return this
    };
    f.render = function () {
        this.$el.html(this.template(this.Zh()));
        this.$(".content").append(this.content);
        this.$(".dialog").data("Canva_Views_Dialog", this);
        return this
    };
    f.Zh = function () {
        return {
            showCloseButton: this.cf,
            showDialogMaskCloseButton: this.Je,
            showTitle: this.Qn,
            title: this.title
        }
    };
    f.u6 = function (a) {
        this.$("h2").text(a);
        this.title = a
    };
    f.show = function () {
        function a(d) {
            d.target === d.currentTarget && (b.off("animationend transitionend", a),
                c.trigger("showTransitionEnd", c))
        }
        var b, c = this;
        this.render();
        b = this.$el.children(".dialog");
        this.Nd.show(this.$el);
        this.pw = !0;
        this.trigger("show", this);
        Sk(function () {
            b.removeClass("preparing");
            b.on("animationend transitionend", a)
        });
        return this
    };

    function Xo(a) {
        return new P(function (a, c) {
                this.once("hide", function (d) {
                        3 !== d ? a(d) : c(this.zS)
                    }
                    .bind(this));
                this.show()
            }
            .bind(a))
    }
    f.template = _.template('\x3c% if (showDialogMaskCloseButton) { %\x3e\x3ca class\x3d"dialogMaskCloseButton"\x3eClose\x3c/a\x3e\x3c% } %\x3e\x3cdiv class\x3d"dialog preparing"\x3e\x3c% if (showTitle) { %\x3e\x3ch2 class\x3d"dialog__title"\x3e\x3c%- title %\x3e\x3c/h2\x3e\x3c% } %\x3e\x3cdiv class\x3d"content"\x3e\x3c/div\x3e\x3c% if (showCloseButton) { %\x3e\x3ca class\x3d"close" href\x3d"#" title\x3d"Close this dialog"\x3eClose\x3c/a\x3e\x3c% } %\x3e\x3c/div\x3e');

    function Vx() {}
    Vx = Uo.extend({
        className: "fontUploadDialog"
    });
    Vx.create = function () {
        return new Vx({})
    };
    f = Vx.prototype;
    f.events = function () {
        return _.extend(Uo.prototype.events.call(this), {
            "click .fontUploadDialogConfirm": this.p2,
            "click .fontUploadDialogFinish": this.ok,
            "click .fontUploadDialogCancel": this.bZ
        })
    };
    f.initialize = function () {
        Uo.prototype.initialize.call(this, {
            aa: Rk,
            cf: !0,
            Kq: !0,
            Je: !1
        });
        this.error = null;
        this.Cy = "the font you are uploading.";
        this.opentype = opentype;
        this.progress = !1
    };
    f.render = function () {
        Uo.prototype.render.call(this);
        Wx(this);
        this.$(".fontFileInput").remove();
        var a = $('\x3cinput class\x3d"fontFileInput" type\x3d"file" accept\x3d".ttf,.otf,.woff"\x3e');
        this.$el.append(a);
        a.on("change", this.U1.bind(this));
        return this
    };
    f.U1 = function () {
        var a = {
                message: "Your font file could not be read. Try a different font. If this problem persists, contact support."
            },
            b = this.$(".fontFileInput")[0].files;
        if (b.length && /.*\.(ttf|otf|woff)$/gi.test(b[0].name)) {
            if (this.error = null,
                this.hE = b[0],
                this.Cy = this.hE.name,
                this.opentype) {
                var c = new FileReader;
                c.onload = function () {
                        if (c.result)
                            try {
                                var b = this.opentype.parse(c.result);
                                b && b.supported ? b.names && b.names.fullName && b.names.fullName.en && (this.Cy = b.names.fullName.en) : this.error = a
                            } catch (e) {
                                this.error = a
                            }
                        else
                            this.error = a;
                        this.show()
                    }
                    .bind(this);
                c.readAsArrayBuffer(this.hE);
                return
            }
        } else
            this.error = {
                message: "Are you sure that is a font? Please check the file and try again."
            };
        this.show()
    };
    f.p2 = function () {
        this.$(".fontUploadDialogDisclaimerCheck").prop("checked") ? (this.progress = 1,
            this.$(".fontUploadDialogBlurb").html("Please wait while the font is uploaded to your brand kit. It will be ready in a jiffy."),
            this.$(".fontUploadDialogConfirm").addClass("buttonProgress").html('\x3cspan class\x3d"buttonProgressIndicator"\x3e\x3c/span\x3e\x3cspan class\x3d"buttonProgressText"\x3eUploading\x26hellip;\x3c/span\x3e'),
            this.hE && this.trigger("fontUpload", this.hE)) : Xx(this)
    };

    function Xx(a) {
        a.$(".fontUploadDialogDisclaimerError").addClass("on");
        setTimeout(function () {
                this.$(".fontUploadDialogDisclaimerError").removeClass("on")
            }
            .bind(a), 3200)
    }
    f.ef = function (a) {
        this.error = a;
        Wx(this)
    };

    function Wx(a) {
        a.$(".fontUploadDialogContents").remove();
        a.$(".dialog .content").append(a.TI({
            canEditFontName: !1,
            error: null != a.error ? a.error.message : !1,
            supportUrl: null != a.error ? a.error.aH : null,
            supportTitle: null != a.error ? a.error.L9 : "fonts",
            fontName: a.Cy,
            progress: a.progress || !1
        }))
    }
    f.JW = function (a) {
        this.progress = Math.round(100 * a);
        this.$(".buttonProgressIndicator").css("width", String(this.progress) + "%")
    };
    f.bZ = function () {
        this.trigger("fontUploadCancel");
        this.cancel()
    };
    f.TI = _.template('\x3cdiv class\x3d"fontUploadDialogContents"\x3e\x3c% if (error) { %\x3e\x3ch2\x3eSorry, something went wrong\x3c/h2\x3e\x3cdiv class\x3d"fontUploadDialogError"\x3e\x3cp\x3e\x3c%- error %\x3e\x3c/p\x3e\x3c% if (supportUrl !\x3d null) { %\x3e\x3cp\x3ePlease see the support article on \x3ca href\x3d"\x3c%- supportUrl %\x3e" target\x3d"_blank"\x3e\x3c%- supportTitle %\x3e\x3c/a\x3e for more info.\x3c/p\x3e\x3c% } %\x3e\x3cdiv class\x3d"fontUploadDialogControls"\x3e\x3cbutton class\x3d"button buttonBlock buttonSubmittable fontUploadDialogFinish"\x3eOK\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } else { %\x3e\x3ch2\x3eBefore you upload, please confirm the following:\x3c/h2\x3e\x3cdiv class\x3d"fontUploadDialogDisclaimer"\x3e\x3cp\x3e\x3cstrong\x3eFont name\x3c/strong\x3e: \x3c% if (canEditFontName) { %\x3e\x3cinput class\x3d"fontUploadDialogFontName" autocomplete\x3d"off" value\x3d"\x3c%- fontName %\x3e"\x3e\x3c% } else { %\x3e\x3c%- fontName %\x3e\x3c% } %\x3e\x3c/p\x3e\x3cp\x3e\x3cspan class\x3d"fontUploadDialogDisclaimerError"\x3eYou must confirm this before uploading.\x3c/span\x3e\x3clabel\x3e\x3cinput class\x3d"fontUploadDialogDisclaimerCheck" type\x3d"checkbox"\x3e\x3cspan class\x3d"fontUploadDialogDisclaimerText"\x3eI own this font or have the right to use it for my intended purpose.\x3c/span\x3e\x3c/label\x3e\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"fontUploadDialogControls"\x3e\x3cbutton class\x3d"button buttonBlock buttonSubmittable fontUploadDialogConfirm"\x3eYes. Upload away!\x3c/button\x3e\x3cspan class\x3d"fontUploadDialogCancel"\x3eCancel the upload.\x3c/span\x3e\x3c/div\x3e\x3c% } %\x3e\x3c/div\x3e');

    function Yx() {}
    Yx = Backbone.View.extend({
        className: "multipageDialog"
    });
    f = Yx.prototype;
    f.initialize = function (a) {
        this.aa = Rk;
        this.jg = 0;
        this.$D = a.$D || [];
        this.yi = void 0 === a.yi || a.yi;
        this.Je = !!a.Je;
        this.Nd = new Tx({
            aa: this.aa,
            style: Ux
        });
        this.ia = a.ia;
        this.ia.forEach(function (a) {
            this.listenTo(a, "next", this.B6);
            this.listenTo(a, "back", this.D6)
        }, this)
    };
    f.events = function () {
        return {
            click: this.Bf,
            "click .dialogMaskCloseButton": this.hide
        }
    };
    f.hide = function () {
        this.$el.addClass("multipageDialogDisappearing");
        this.Nd.hide();
        this.aa.setTimeout(function () {
                this.trigger("hide")
            }
            .bind(this), 300)
    };
    f.Bf = function (a) {
        $(a.target).is(".multipageDialogPage, .multipageDialogPageWrapper") && this.yi && this.hide()
    };
    f.render = function () {
        var a = this;
        (function () {
            a.$D.forEach(function (b) {
                a.$el.addClass(b)
            })
        })();
        (function () {
            a.ia.forEach(function (a) {
                a.$el.detach()
            });
            a.$el.empty()
        })();
        a.Je && a.$el.append('\x3cbutton class\x3d"buttonLink dialogMaskCloseButton"\x3eClose\x3c/button\x3e');
        (function () {
            a.ia.forEach(function (b) {
                var c, d;
                c = $("\x3cdiv\x3e").addClass("multipageDialogPageWrapper");
                d = $("\x3cdiv\x3e").addClass("multipageDialogPage");
                c.append(d);
                d.append(b.render().$el);
                a.$el.append(c)
            })
        })();
        Zx(this, this.jg);
        return this
    };
    f.show = function () {
        this.$el.addClass("multipageDialogAppearing");
        this.Nd.show(this.render().$el);
        this.aa.setTimeout(function () {
                this.$el.removeClass("multipageDialogAppearing")
            }
            .bind(this), 300)
    };
    f.B6 = function () {
        var a = this.jg + 1;
        a >= this.ia.length ? this.hide() : Zx(this, a)
    };
    f.D6 = function () {
        var a = this.jg - 1;
        0 > a ? this.hide() : Zx(this, a)
    };

    function Zx(a, b) {
        a.trigger("pageChange", a.ia[b]);
        var c = a.$(".multipageDialogPageWrapper"),
            d = a.$(".multipageDialogPage");
        a.jg = b;
        c.css("transform", "translateY(" + -100 * b + "%)");
        d.removeClass("multipageDialogCurrentPage");
        d.eq(b).addClass("multipageDialogCurrentPage")
    };

    function $x(a) {
        var b = {},
            c = a.XQ.Vk(),
            d = a.zo.D(),
            e = c - a.margin - a.vH.Y(),
            g = a.vH.kb() - c - a.margin;
        b.left = Math.round((g >= d || g >= e ? c + a.margin : c - a.margin - d) - a.KU.Y()) + "px";
        c = a.XQ.Wk();
        d = a.zo.F();
        e = c - a.margin - a.vH.N();
        g = a.vH.Ha() - c - a.margin;
        b.top = Math.round((g >= d || g >= e ? c + a.margin : c - a.margin - d) - a.KU.N()) + "px";
        return b
    }

    function ay(a) {
        this.jx = a.jx;
        this.Xy = a.Xy;
        this.margin = a.margin || 0;
        this.uB = a.uB
    }
    ay.prototype.Nl = function (a, b) {
        if (0 !== b.length && 0 !== a.length) {
            this.jx(a);
            var c = a.get(0),
                d = b.get(0),
                e = c.offsetParent || c.ownerDocument.body;
            b = this.Xy().get(0) || c.ownerDocument.body;
            c = Qg(c.getBoundingClientRect());
            d = Qg(d.getBoundingClientRect());
            e = Qg(e.getBoundingClientRect());
            b = Qg(b.getBoundingClientRect());
            jm(d, this.margin);
            jm(b, -this.margin);
            b = this.uB({
                margin: this.margin,
                XQ: d,
                zo: c,
                KU: e,
                vH: b
            });
            a.css(b)
        }
    };

    function by() {}
    by = Uo.extend();
    by.prototype.initialize = function (a) {
        Uo.prototype.initialize.call(this, _.extend(a, {
            aa: Rk
        }));
        this.yJ = a.yJ
    };
    by.prototype.render = function () {
        Uo.prototype.render.call(this);
        this.$(".dialog").addClass("alert");
        this.$(".content").append('\x3cp class\x3d"buttonContainer"\x3e\x3cbutton class\x3d"button done"\x3e' + (this.yJ ? this.yJ : "OK") + "\x3c/button\x3e\x3c/p\x3e");
        return this
    };
    var gp = "top",
        cy = {
            LEFT: "left",
            c8: "leftTop",
            n8: gp,
            o8: "topLeft",
            h8: "rightTop"
        };

    function dy() {}
    dy = Uo.extend();
    f = dy.prototype;
    f.initialize = function (a) {
        Uo.prototype.initialize.call(this, _.extend({
            aa: Rk
        }, a));
        this.Qe = a.Qe || "Done";
        this.lw = void 0 !== a.lw ? a.lw : !0;
        this.hx = null;
        this.BV = a.position instanceof Array ? a.position : [a.position || gp];
        this.position = null;
        this.Ef = _.defaults({}, a.Ef, {
            left: 0,
            top: 0
        });
        this.nv = a.nv || !1;
        this.on("hide", this.LR);
        this.keydown = this.keydown.bind(this)
    };
    f.A5 = function () {
        $(document).off("keydown", this.keydown)
    };
    f.Xo = function () {
        return ey
    };
    f.getCurrentPosition = function () {
        return this.position
    };
    f.render = function () {
        Uo.prototype.render.call(this);
        this.$(".dialog").addClass("popover").addClass(this.nv ? "paddingLess" : "").prepend('\x3cdiv class\x3d"pointer"\x3e\x3c/div\x3e');
        this.lw && this.$(".content").append('\x3cp class\x3d"buttonContainer"\x3e\x3cbutton class\x3d"button buttonBlock done"\x3e' + this.Qe + "\x3c/button\x3e\x3c/p\x3e");
        return this
    };
    f.ci = function (a) {
        if (!this.hx) {
            var b = _.debounce(this.Nl.bind(this), 300);
            window.addEventListener("resize", b, !1);
            this.on("remove", function () {
                window.removeEventListener("resize", b, !1)
            })
        }
        this.show();
        $(document).on("keydown", this.keydown);
        this.on("remove", this.A5);
        fy(this, a);
        this.Nl();
        return this
    };

    function gy() {
        this.kN = this.yl = this.dialogLeft = this.dialogTop = null
    }
    f.Nl = function () {
        for (var a, b, c = 0; c < this.BV.length; c++) {
            a = b = this.BV[c];
            var d = this.nv ? 5 : 13,
                e = this.nv ? 20 : 40,
                g = this.hx,
                h = g.offset(),
                k = h.top - $(document).scrollTop(),
                l = g.outerWidth(),
                m = g.outerHeight(),
                n = this.$(".dialog").outerHeight(),
                p = this.$(".dialog").outerWidth(),
                r = this.$el.width(),
                g = new gy,
                u = Math.round(h.left + l / 2 - p / 2);
            switch (a) {
                case gp:
                    g.dialogLeft = u + p + 10 > r ? r - p - 10 : u;
                    g.dialogLeft += this.Ef.left;
                    g.dialogTop = Math.round(k) + m + d + this.Ef.top;
                    a = u - g.dialogLeft;
                    g.yl = "calc(50% - 7px + " + a + "px)";
                    break;
                case "topLeft":
                    g.dialogLeft = h.left + p + 10 > r ? r - p - 10 : h.left;
                    g.dialogLeft += this.Ef.left;
                    g.dialogTop = Math.round(k) + m + d + this.Ef.top;
                    g.yl = g.dialogLeft + d;
                    break;
                case "left":
                    g.dialogLeft = h.left + l + this.Ef.left;
                    g.dialogTop = k - n / 2 + d + this.Ef.top;
                    break;
                case "leftTop":
                    g.dialogLeft = h.left + l + this.Ef.left + d;
                    g.dialogTop = k + m / 2 - e + this.Ef.top;
                    10 > g.dialogTop && (g.kN = g.dialogTop - 10,
                        g.dialogTop = 10);
                    break;
                case "rightTop":
                    g.dialogLeft = h.left - p + this.Ef.left - d,
                        g.dialogTop = k + m / 2 - e + this.Ef.top,
                        10 > g.dialogTop && (g.kN = g.dialogTop - 10,
                            g.dialogTop = 10)
            }
            d = a = g;
            e = this.$(".dialog");
            if (!(d.dialogLeft + e.outerWidth() > $(window).width() || d.dialogTop + e.outerHeight() > $(window).height()))
                break
        }
        this.position = b;
        this.$(".dialog").css("top", a.dialogTop).css("left", a.dialogLeft);
        c = this.$(".pointer");
        c.removeClass(_.values(cy).join(" ")).addClass(b);
        c.css("left", a.yl || "");
        c.css("margin-top", a.kN || "");
        return this
    };

    function fy(a, b) {
        a.LR();
        a.hx = b;
        b.addClass("on");
        b.blur()
    }
    f.LR = function () {
        this.hx && this.hx.removeClass("on")
    };
    f.keydown = function (a) {
        27 === a.which && (this.cancel(),
            a.stopPropagation(),
            a.preventDefault())
    };

    function hy(a) {
        soy.asserts.assertType(goog.isString(a.FH) || a.FH instanceof goog.soy.data.SanitizedContent, "zoomInLabel", a.FH, "string|goog.soy.data.SanitizedContent");
        var b = a.FH;
        soy.asserts.assertType(goog.isString(a.HH) || a.HH instanceof goog.soy.data.SanitizedContent, "zoomOutLabel", a.HH, "string|goog.soy.data.SanitizedContent");
        var c = a.HH;
        soy.asserts.assertType(goog.isString(a.kE) || a.kE instanceof goog.soy.data.SanitizedContent, "fullscreenModeLabel", a.kE, "string|goog.soy.data.SanitizedContent");
        var d = a.kE;
        soy.asserts.assertType(goog.isString(a.uF) || a.uF instanceof goog.soy.data.SanitizedContent, "normalModeLabel", a.uF, "string|goog.soy.data.SanitizedContent");
        var e = a.uF,
            g = goog.asserts.assertArray(a.lf, "expected parameter 'zoomLevels' of type list\x3cstring\x3e."),
            h = goog.asserts.assertArray(a.P7, "expected parameter 'zoomTranslations' of type list\x3cstring\x3e."),
            k = goog.asserts.assertNumber(a.km, "expected parameter 'currentZoomIndex' of type int.");
        soy.asserts.assertType(goog.isString(a.dE) || a.dE instanceof goog.soy.data.SanitizedContent, "fitLabel", a.dE, "string|goog.soy.data.SanitizedContent");
        var l = a.dE;
        soy.asserts.assertType(goog.isString(a.bE) || a.bE instanceof goog.soy.data.SanitizedContent, "fillLabel", a.bE, "string|goog.soy.data.SanitizedContent");
        var m = a.bE;
        soy.asserts.assertType(goog.isBoolean(a.er) || 1 === a.er || 0 === a.er, "enablePresentationMode", a.er, "boolean");
        a = !!a.er;
        b = '\x3csection class\x3d"zoomer zoomer__pane ' + (a ? "zoomer--presentation" : "") + '"\x3e\x3cdiv class\x3d"zoomer__toolbar"\x3e' + (a ? '\x3cbutton class\x3d"zoomer__item zoomer__toolbarItem zoomer__fullscreen" title\x3d"' + soy.$$escapeHtmlAttribute(d) + '"\x3e\x3c/button\x3e\x3cbutton class\x3d"zoomer__item zoomer__toolbarItem zoomer__normal" title\x3d"' + soy.$$escapeHtmlAttribute(e) + '"\x3e\x3c/button\x3e\x3cdiv class\x3d"zoomer__divider"\x3e\x3c/div\x3e' : "") + '\x3cbutton class\x3d"zoomer__item zoomer__toolbarItem zoomer__out" title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e\x26ndash;\x3c/button\x3e\x3cbutton class\x3d"zoomer__item zoomer__toolbarItem zoomer__prev" title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e\x26nbsp;\x3c/button\x3e\x3cspan class\x3d"zoomer__item zoomer__toolbarItem zoomer__status zoomer__zoomLevel"\x3e' + soy.$$escapeHtml(g[k]) + '\x3c/span\x3e\x3cspan class\x3d"zoomer__item zoomer__toolbarItem zoomer__status zoomer__pageIndex"\x3e\x3c/span\x3e\x3cbutton class\x3d"zoomer__item zoomer__toolbarItem zoomer__in" title\x3d"' + soy.$$escapeHtmlAttribute(b) + '"\x3e+\x3c/button\x3e\x3cbutton class\x3d"zoomer__item zoomer__toolbarItem zoomer__next" title\x3d"' + soy.$$escapeHtmlAttribute(b) + '"\x3e\x26nbsp;\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"zoomer__popover zoomer__pane"\x3e\x3cul class\x3d"zoomer__popoverList"\x3e';
        c = g.length;
        for (d = 0; d < c; d++)
            e = g[d],
            b += '\x3cli data-zoom\x3d"' + soy.$$escapeHtmlAttribute(e) + '" class\x3d"zoomer__item zoomer__popoverItem ' + (d == k ? "zoomer__item--selected" : "") + '"\x3e' + ("fit" == e ? soy.$$escapeHtml(l) : "fill" == e ? soy.$$escapeHtml(m) : soy.$$escapeHtml(h[d])) + "\x3c/li\x3e";
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b + '\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"zoomer__popoverArrow"\x3e\x3c/div\x3e\x3c/section\x3e')
    };

    function iy(a, b, c) {
        Backbone.View.call(this, {
            className: "zoomToolbar"
        });
        this.aa = a;
        this.cj = b;
        this.er = c;
        this.lf = [];
        this.km = 0;
        this.Vf = !1;
        this.Ww = this.rT = 0;
        this.paused = !1;
        this.Ko = this.Ko.bind(this)
    }
    t(iy, Backbone.View);
    f = iy.prototype;
    f.hI = function (a, b) {
        this.lf = b;
        this.km = Math.max(0, b.indexOf("100%"));
        this.Ww = parseInt(this.lf[this.km], 10);
        this.render().$el.appendTo(a)
    };
    f.events = function () {
        return {
            "click .zoomer__out": this.SX,
            "click .zoomer__in": this.RX,
            "click .zoomer__next": this.G1,
            "click .zoomer__prev": this.k5,
            "click .zoomer__fullscreen": this.EK,
            "click .zoomer__normal": this.I1,
            "click .zoomer__popover .zoomer__item": this.O7,
            "click .zoomer__zoomLevel": this.kX,
            "mouseenter .zoomer__popover": this.kX.bind(this, !0),
            "mouseleave .zoomer": this.qT
        }
    };
    f.RX = function () {
        this.trigger("zoomInClick")
    };
    f.SX = function () {
        0 < this.km && this.trigger("zoomOutClick")
    };
    f.G1 = function () {
        this.trigger("nextPageClick")
    };
    f.k5 = function () {
        this.trigger("prevPageClick")
    };
    f.EK = function () {
        this.trigger("presentationModeClick");
        this.Ko()
    };
    f.I1 = function () {
        this.exitFullscreen()
    };
    f.O7 = function (a) {
        this.trigger("zoomLevelClick", $(a.currentTarget).data("zoom"))
    };
    f.kX = function (a) {
        this.Vf || (this.aa.clearTimeout(this.rT),
            this.$el.toggleClass("zoomer--expanded", a))
    };
    f.qT = function () {
        var a = this;
        this.rT = this.aa.setTimeout(function () {
            a.$el.removeClass("zoomer--expanded")
        }, 500)
    };
    f.E7 = function (a, b) {
        a = "string" == typeof a ? this.lf.indexOf(a) : -1; -
        1 < a && (this.km = a);
        this.$el.removeClass("zoomer--minZoom zoomer--maxZoom");
        0 === a ? this.$el.addClass("zoomer--minZoom") : a === this.lf.indexOf("fill") - 1 && this.$el.addClass("zoomer--maxZoom");
        a = this.lf[this.km];
        "number" != typeof b || "fill" != a && "fit" != a || (this.Ww = 100 * b,
            a = this.Ww.toFixed(1));
        a = this.cj.Ww(parseInt(a, 10));
        this.$el.find(".zoomer__zoomLevel").text(a);
        this.$el.find(".zoomer__popoverItem").removeClass("zoomer__item--selected").eq(this.km).addClass("zoomer__item--selected")
    };
    f.xX = function (a) {
        this.$el.removeClass("zoomer--firstPage zoomer--lastPage");
        var b = Ap(a);
        a = a.wc();
        0 === b && this.$el.addClass("zoomer--firstPage");
        b === a - 1 && this.$el.addClass("zoomer--lastPage");
        this.$el.find(".zoomer__pageIndex").text(++b + " / " + a);
        this.Vf && this.paused && this.Ko()
    };
    f.exitFullscreen = function () {
        this.Vf && (this.$el.removeClass("zoomer--fullscreenMode"),
            this.Vf = !1,
            this.trigger("fullscreenMode", this.Vf))
    };
    f.Ko = function () {
        this.$el.addClass("zoomer--fullscreenMode");
        this.Vf = !0;
        this.qT();
        this.trigger("fullscreenMode", this.Vf)
    };

    function jy(a) {
        a.paused = !1;
        $("body").removeClass("zoomer--fullscreenWindowMode");
        $("#content").off("click", a.Ko)
    }
    f.render = function () {
        var a = this;
        this.el.innerHTML = hy({
            lf: this.lf,
            km: this.km,
            er: this.er,
            P7: this.lf.map(function (b) {
                return a.cj.Ww(parseInt(b, 10))
            }),
            FH: this.cj.format("zoomToolbarZoomIn"),
            HH: this.cj.format("zoomToolbarZoomOut"),
            kE: this.cj.Vf(),
            uF: this.cj.format("zoomToolbarNormalMode"),
            bE: this.cj.fill(),
            dE: this.cj.format("zoomToolbarFit")
        });
        return this
    };
    var W = 1;

    function ky(a, b, c, d, e, g) {
        this.Ed = a;
        this.ni = b;
        this.yV = c;
        this.iN = !1;
        this.aa = d;
        this.ja = e;
        this.H = g;
        this.nA = !1;
        this.lastIndex = 0;
        this.qv = !0;
        this.EU = 0;
        this.DE = this.DE.bind(this)
    }

    function ly(a, b, c, d, e, g, h) {
        d = new iy(Rk, d, e.ba.get(Rf));
        a = new ky(a, d, a.$el, Rk, e, g);
        my(a);
        d.listenTo(c, "documentView:zoom", d.E7);
        d.listenTo(b, "page:change:selected", d.xX);
        d.on("fullscreenMode", h);
        d.xX(b);
        a.listenTo(c, "pausePresentationOnExit", a.O4);
        return a
    }

    function my(a) {
        var b = $(".documentContainer"),
            c = _.values(ny);
        a.bL = a.bL.bind(a);
        a.ni.hI(b, c);
        a.listenTo(a.ni, {
            zoomInClick: a.PZ,
            zoomOutClick: a.RZ,
            nextPageClick: a.GI,
            prevPageClick: a.HI,
            zoomLevelClick: a.QZ,
            presentationModeClick: a.EZ,
            fullscreenMode: a.x0
        });
        $(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange", function () {
            var b = $("body");
            if (oy())
                py(a);
            else if (a.qv) {
                a.lastIndex = Ap(a.Ed.model);
                var c = a.ni;
                $("body").addClass("zoomer--fullscreenWindowMode");
                c.paused = !0;
                $("#content").on("click", c.Ko);
                a.qv = b.hasClass("modalContentVisible")
            } else
                qy(a)
        });
        $(document).on("keyup", function (b) {
            return ry(a, b)
        });
        $(window).on("mousewheel wheel", a.bL)
    }

    function ry(a, b) {
        if (!$("body").hasClass("modalContentVisible"))
            if (!b.metaKey && !b.ctrlKey && !b.altKey)
                switch (b.which) {
                    case 27:
                        if (oy())
                            return a.qv = !1, !0;
                        a.ni.paused && qy(a);
                        break;
                    case 38:
                    case 37:
                    case 33:
                        return a.HI(), !1;
                    case 40:
                    case 39:
                    case 34:
                    case 32:
                    case 13:
                        return a.GI(), !1;
                    case 116:
                        return a.ni.EK(), !1
                }
        else if (b.ctrlKey && b.shiftKey && 13 === b.which)
            return a.ni.EK(), !1
    }
    f = ky.prototype;
    f.x0 = function (a) {
        $("body");
        this.lastIndex = Ap(this.Ed.model);
        a ? (this.qv = !1,
            sy().Ko()) : (this.qv = !1,
            sy().exitFullscreen(),
            qy(this))
    };

    function qy(a) {
        var b = $("body");
        jy(a.ni);
        a.ni.exitFullscreen();
        J.jC = J.eY;
        b.off("mousemove", a.DE);
        b.removeClass("fullscreenMode fullscreenModeLinkAnimations fullscreenModeTransitionIn");
        ty(a.Ed, !1);
        uy(a.Ed, a.lastIndex)
    }

    function py(a) {
        var b = $("body");
        jy(a.ni);
        J.jC = J.hY;
        bh();
        vy();
        b.addClass("fullscreenMode");
        ty(a.Ed, !0);
        b.on("mousemove", a.DE);
        P.delay(100).then(function () {
            uy(a.Ed, a.lastIndex);
            return P.delay(100)
        }).then(function () {
            b.addClass("fullscreenModeTransitionIn")
        })
    }
    f.O4 = function (a) {
        oy() && (this.qv = a)
    };
    f.DE = function (a) {
        var b = $("body");
        120 > a.clientY ? b.addClass("hoverTop") : 120 > $(window).outerHeight() - a.clientY ? b.addClass("zoomer--hoverBottom") : b.removeClass("zoomer--hoverBottom hoverTop");
        this.aa.clearTimeout(this.EU);
        a = $(a.target);
        a.is(".zoomer__toolbar") || a.parents(".zoomer__toolbar").length || (this.EU = this.aa.setTimeout(function () {
            return b.removeClass("zoomer--hoverBottom hoverTop")
        }, wy))
    };
    f.bL = function (a) {
        var b = this,
            c = a.originalEvent.wheelDeltaY || a.originalEvent.deltaY,
            d = a.originalEvent.wheelDeltaX || a.originalEvent.deltaX,
            c = Math.abs(d) > Math.abs(c) ? d : c;
        !this.ni.Vf && this.yV && this.yV.find(a.target).length && a.ctrlKey && (a.preventDefault(),
            xy(this, c));
        this.ni.Vf && !this.nA && (120 <= c ? (this.HI(),
            this.nA = !0,
            this.aa.setTimeout(function () {
                b.nA = !1
            }, 600)) : -120 >= c && (this.GI(),
            this.nA = !0,
            this.aa.setTimeout(function () {
                b.nA = !1
            }, 600)))
    };

    function xy(a, b) {
        a.iN || (0 < b ? a.ni.RX() : a.ni.SX(),
            a.iN = !0,
            a.aa.setTimeout(function () {
                return a.iN = !1
            }, 250))
    }
    f.PZ = function () {
        var a = yy(this.Ed);
        this.H.zoom("zoom_in", "editor", "zoom_toolbar", "bottom_right", a);
        return !1
    };
    f.RZ = function () {
        var a = zy(this.Ed);
        this.H.zoom("zoom_out", "editor", "zoom_toolbar", "bottom_right", a);
        return !1
    };
    f.QZ = function (a) {
        Ay(this.Ed, a);
        this.H.zoom("popover_item", "editor", "zoom_toolbar", "bottom_right", a);
        return !1
    };
    f.EZ = function () {
        Gl(this.H, "fullscreen_mode", "button", "editor", "zoom_toolbar", "bottom_right");
        return !1
    };
    f.GI = function () {
        var a = this.Ed,
            b = Ap(a.model);
        b + 1 < a.model.wc() && uy(a, b + 1);
        return !1
    };
    f.HI = function () {
        var a = this.Ed,
            b = Ap(a.model);
        0 <= b - 1 && uy(a, b - 1);
        return !1
    };
    var wy = 5E3;
    f = ky.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;

    function lp(a) {
        J.jY && $("html").addClass("isMac");
        $("#content").addClass("preparing");
        By();
        window.setTimeout(function () {
            Cy(a.content, a.Cc, a.Ei, a.u, a.HY, a.g7);
            Dy({
                Ta: a.Ta,
                sb: a.sb,
                Eb: a.Eb,
                sa: a.sa
            });
            var b = new Ey({
                u: xc(a.u)
            });
            $("#canvaDocument").before(b.render());
            b.init({
                jj: a.jj,
                u: a.u,
                H: a.H
            });
            Fy({
                u: a.u,
                gd: a.gd,
                Ho: a.Ho,
                jc: a.jc,
                ba: a.ba
            });
            a.Ht(H, G, S, gd(a.u), a.ja, a.H, function (a) {
                Mb.toggle(a, G.xa())
            });
            Gy(a.u);
            Hy(!!a.T_);
            Ly(0, !0);
            a.yS && a.yS();
            $("body").hasClass("preroll") ? (window.setTimeout(function () {
                    window.requestAnimationFrame(My)
                }, J.Na.Pj * J.Xw),
                window.setTimeout(function () {
                    Ny()
                }, 2E3)) : window.setTimeout(function () {
                $("#content").removeClass("preparing").addClass("on")
            }, J.Na.Pj * J.Xw)
        }, J.Qc)
    }

    function My() {
        var a = $(".preroll .prerollDelay6");
        if (1 > a.length)
            window.requestAnimationFrame(My);
        else
            $(a).one("animationend", Ny)
    }

    function Ny() {
        $("#content").removeClass("preparing").addClass("on");
        $("#search").css("transform", "translateX(0)");
        $("body").removeClass("preroll")
    }

    function By() {
        Qb = Pb = Ob = 0;
        var a = Oy("editorPageToolbarStylesheet");
        if (null != a)
            for (var b = 0; b < a.length && !(".pageToolbar" == a[b].selectorText ? (Qb = parseInt(a[b].style.marginTop, 10),
                        Ob = parseInt(a[b].style.width, 10)) : ".pageToolbar.vertical" == a[b].selectorText && (Pb = parseInt(a[b].style.width, 10)),
                    Pb && Ob && Qb); b++)
        ;
    }

    function Oy(a) {
        for (var b = null, c = 0; c < document.styleSheets.length; c++)
            if (document.styleSheets[c].ownerNode.id == a) {
                b = document.styleSheets[c];
                break
            }
        return null == b ? null : b.cssRules || null
    }

    function Ly(a, b) {
        if (!Py && !Qy) {
            var c = $("#objectPanel");
            Ry();
            var d = $(".layer", c).eq(0).width();
            a = Math.ceil(d / J.qY);
            var e = Math.ceil(d / J.oY),
                d = Math.ceil(d / J.pY),
                g = Oy("objectPanelStylesheet");
            null != g && (g[0].style.width = Math.round(100 / a * 10) / 10 + "%",
                g[1].style.width = Math.round(100 / e * 10) / 10 + "%",
                g[2].style.width = Math.round(100 / d * 10) / 10 + "%");
            Sy();
            window.setTimeout(function () {
                c.find(".results \x3e .layer \x3e .inner \x3e .browseCategories").each(function () {
                    Ty($(this), !0)
                })
            }, J.Qc);
            H && H.Mz(b)
        }
    }

    function Uy(a) {
        return ub.Nu() ? ub.Ji() ? new P(function (b, c) {
            function d(a) {
                2 == a ? (e(),
                    b()) : 1 != a && 0 != a && (e(),
                    c())
            }

            function e() {
                window.clearTimeout(g);
                S.off("session:sync", d)
            }
            var g = window.setTimeout(function () {
                e();
                c()
            }, a || J.XX);
            S.on("session:sync", d);
            ub.save()
        }) : P.resolve() : P.reject()
    };

    function Vy(a) {
        this.fa = a.fa;
        this.WM = a.WM;
        this.xe = a.xe;
        this.La = a.La;
        this.aK = a.aK;
        this.uP = a.uP;
        this.oI = a.oI;
        this.UJ = a.UJ
    }
    Vy.prototype.mO = function () {
        if (!this.aK && !J.vY && this.La && this.La.Nu() && !$("#savingError").hasClass("on")) {
            if (0 < this.uP.MB.length)
                return "You're in the middle of uploading an image. Are you sure you want to leave the Canva editor?";
            if (this.La.Ji())
                return this.La.save(),
                    "We are still auto-saving the latest changes to your design. Are you sure you want to leave the Canva editor?";
            var a = G;
            if (a && it(this.La, a.serialize()))
                return a.trigger("change"),
                    "We are still auto-saving the latest changes to your design. Are you sure you want to leave the Canva editor?";
            this.La.close();
            this.oI || (a = Math.floor((Date.now() - this.WM) / 1E3),
                pk(this.fa, "/session/editor/" + encodeURIComponent(this.xe) + "?close", this.UJ, {
                    docId: this.xe,
                    session: this.La.context.Ex,
                    durationSecs: a
                }))
        }
    };
    var Wy = "bold fontFamily fontSize italic justification letterSpacing lineHeight list textTransform".split(" ");

    function Xy(a) {
        a = a.children(".inner").get(0);
        a = Yy(a);
        for (var b = window.getSelection(), c = a.filter(function (a) {
                return Zy(b, a, !1)
            }), d = a.map(function (a) {
                return a.textContent || ""
            }).join(""), e = "", g = 0, h = b.rangeCount; g != h; g++)
            e += b.getRangeAt(g).toString();
        d = $y(d, e);
        (e = a.length) && "BR" == a[e - 1].nodeName && --e;
        return c.length >= e && d
    }

    function $y(a, b) {
        if (a == b)
            return !0;
        a = a.replace(/^\s*/, "").replace(/\s*$/, "").replace(/(?!^)\s+(?!$)/gi, " ");
        b = b.replace(/^\s*/, "").replace(/\s*$/, "").replace(/(?!^)\s+(?!$)/gi, " ");
        return a == b
    }

    function az(a) {
        var b = window.getSelection();
        return 0 < b.rangeCount && (b = b.getRangeAt(0).cloneRange(),
            b.collapse(!0),
            a = a.get(0)) ? (b.setStart(a, 0),
            b.toString().slice(-1)) : ""
    }

    function bz(a) {
        var b = window.getSelection();
        if (0 == b.rangeCount)
            return -1;
        a = a.children(".inner");
        if (0 == a.length)
            return -1;
        a = a.get(0);
        return cz(b, a) ? b.toString().length : -1
    }

    function dz(a) {
        var b = window.getSelection();
        if (0 == b.rangeCount)
            return !0;
        a = a.children(".inner");
        if (0 == a.length)
            return !0;
        a = a.get(0);
        return cz(b, a) ? b.isCollapsed : !0
    }

    function cz(a, b) {
        if (!b || ez(a))
            return !1;
        var c = a.getRangeAt(0);
        a = c.startContainer;
        c = c.endContainer;
        if (!a || !c)
            return !1;
        a = 3 == a.nodeType || 4 == a.nodeType ? fz(a) : a;
        var d = 3 == c.nodeType || 4 == c.nodeType ? fz(c) : c,
            c = !(b != a && b != d);
        b = !(!b.contains(a) && !b.contains(d));
        return c || b
    }

    function gz(a, b) {
        var c = a.qb(b).children(".inner");
        hz(c);
        iz(c);
        c.find("*").css({
            "font-size": "",
            "line-height": "",
            "letter-spacing": "",
            color: ""
        });
        c.find("br").removeAttr("color");
        jz(a, b)
    }

    function jz(a, b) {
        function c(a) {
            if (1 !== a.length)
                return !1;
            a = a.get(0);
            if (a.nodeType !== Node.ELEMENT_NODE)
                return !1;
            var b = a.nodeName.toLowerCase();
            return "ul" === b || "li" === b ? !1 : 1 === a.parentNode.childNodes.length
        }
        for (var d = a.gc(b), e = a.qb(b).children(".inner").contents(), g = e, h = !1; c(e);)
            kz(d, e.get(0)),
            h = !0,
            e = e.contents();
        h && (g.replaceWith(e),
            a.Wi(b, d))
    }

    function kz(a, b) {
        function c(a) {
            a = a.match(/"[^"]*"|'[^']*'|[^\s"',]+/g);
            if (!a)
                return "";
            a = a[0];
            var b = a.charAt(0);
            if ('"' === b || "'" === b)
                a = a.slice(1, -1).trim();
            return a
        }
        var d = b.nodeName.toLowerCase();
        if ("b" === d || "strong" === d)
            a.bold = !0;
        else {
            var e = b.style.fontWeight;
            a.bold = "bold" === e || "600" <= e && "900" >= e
        }
        "i" === d || "em" === d ? a.italic = !0 : (e = b.style.fontStyle,
            a.italic = "italic" === e || "oblique" === e);
        e = gh(b.style.color);
        b.color && (e = gh(b.color));
        e && (a.color = e.Ca());
        e = null;
        (e = "font" === d ? c(b.face) : c(b.style.fontFamily)) && (b = lz(e)) && (a.fontFamily = b)
    }

    function mz(a) {
        var b = [],
            c = [],
            d = a.children(".inner").get(0);
        Yy(d).forEach(function (d) {
            "br" !== d.nodeName.toLowerCase() && (d = nz(fz(d), a),
                Array.prototype.push.apply(b, d.Te),
                Array.prototype.push.apply(c, d.tf))
        });
        return {
            Te: b,
            tf: c
        }
    }

    function oz(a, b) {
        var c = a.clone();
        c.addClass("doNotTransform");
        c.children(".inner").addClass("doNotTransform");
        c.appendTo("#limbo");
        pz(c, b);
        for (var d = c.find(".char"), e = 0, g = [], h = qz(d), k = 1; k < h.length; k++)
            if (!rz(h[k - 1], h[k])) {
                var l = d.index(h[k]);
                g.push(l - e);
                e = l
            }
        g.push(d.length - e);
        c.remove();
        a.data("cachedLineLengths", g);
        b && (g = g.map(function (a) {
            return a - 1
        }));
        return g
    }

    function qz(a) {
        return a.filter(function () {
            return 0 !== this.offsetHeight || 0 !== this.offsetWidth
        })
    }

    function rz(a, b) {
        var c = a.offsetTop - b.offsetTop;
        return 0 <= c || c >= b.offsetHeight - a.offsetHeight
    }

    function pz(a, b) {
        function c() {
            if (this.nodeType === Node.ELEMENT_NODE) {
                var a = this.nodeName.toLowerCase();
                if ("br" === a)
                    if (b) {
                        var e = document.createElement("span");
                        e.textContent = "";
                        e.classList.add("char");
                        $(this).before(e)
                    } else
                        return;
                if ("script" !== a && "style" !== a) {
                    e = $(this).contents();
                    if ("span" === a) {
                        if (this.classList.contains("fauxCaret"))
                            return;
                        if (this.classList.contains("char")) {
                            if (1 === e.length && e[0].nodeType === Node.TEXT_NODE && 1 === e[0].data.length)
                                return;
                            e.replaceAll(this)
                        }
                    }
                    e.each(c)
                }
            } else
                this.nodeType === Node.TEXT_NODE && (a = this.data.split("").map(function (a) {
                        var b = document.createElement("span");
                        b.classList.add("char");
                        d.test(a) && b.classList.add("diacriticalMark");
                        b.appendChild(document.createTextNode(a));
                        return b
                    }),
                    $(this).replaceWith(a))
        }
        var d = /[\u0300-\u036f]/,
            e = String(a.data("fontFamily"));
        Jb && sz(e) || a.children(".inner").each(c)
    }

    function tz(a, b) {
        !b && a.data("kernPairs") || a.find(".char").each(function () {
            var a = $(this),
                b = a.contents();
            0 < b.length ? a.replaceWith(b) : a.remove()
        })
    }
    var uz = !1;

    function vz(a, b) {
        function c(a) {
            return " " === a || "\n" === a || "\t" === a || "\r" === a || "" === a || "\u2028" === a || "\u2029" === a || "" === a
        }
        pz(a);
        var d = [],
            e = a.children(".inner"),
            g = e.find(".char"),
            h = a.data("letterSpacing") || 0,
            k = 0 !== h ? h / 1E3 + "em" : "0",
            l = a.parent(),
            m = a.prev();
        if (function () {
                return b.reduce(function (a, b) {
                    return a + b
                }, 0)
            }() === g.length) {
            e.addClass("explicitLineBreaksLayoutMode");
            e.find(".implicitLineBreak").remove();
            a.removeData("ephemeralLetterSpacing");
            a.css("letter-spacing", k);
            a.data("cachedLineLengths", b);
            document.body.contains(a[0]) || (e.addClass("doNotTransform"),
                a.addClass("doNotTransform"),
                a.appendTo("#limbo"),
                d.push(function () {
                    0 < l.length ? 0 < m.length ? a.insertAfter(m) : a.prependTo(l) : a.detach();
                    a.removeClass("doNotTransform");
                    e.removeClass("doNotTransform")
                }));
            var n = 0,
                p = -1,
                r = 0,
                u = 0,
                v = 0;
            b.forEach(function (a) {
                var b = n,
                    e = Math.min(b + a, g.length);
                if (!(b >= e)) {
                    for (var h = b, k = e - 1; h <= k && c(g[h].firstChild.data);)
                        h++;
                    for (; h <= k && c(g[k].firstChild.data);)
                        k--;
                    d.push(function () {
                        g.slice(b, h).addClass("superfluousWhitespace");
                        g.slice(k + 1, e).addClass("superfluousWhitespace")
                    });
                    h <= k && (0 <= p && rz(g[p], g[h]) && d.push(function () {
                            $("\x3cbr\x3e").addClass("implicitLineBreak").insertBefore(g[b])
                        }),
                        p = k,
                        h !== k && (a = g[k].offsetLeft + g[k].offsetWidth - g[h].offsetLeft,
                            a > r && (r = a,
                                u = h,
                                v = k)));
                    n = e
                }
            });
            k = e[0].offsetWidth;
            if (r > k) {
                var y = qz(g.slice(u, v + 1)).length,
                    k = (k - r) / y,
                    y = parseFloat(window.getComputedStyle(e[0]).getPropertyValue("font-size")),
                    q = Math.max(h - 1E3 / 12, 1E3 * k / y),
                    x = a.data("index") || 0;
                d.push(function () {
                    var b = a.data("canvaElement");
                    b && b.LG(x, q)
                })
            }
            d.forEach(function (a) {
                a()
            });
            uz = !0;
            wz(a);
            uz = !1
        }
    }

    function xz(a, b) {
        uz || (tz(a, b),
            a.removeData("cachedLineLengths"),
            b = a.children(".inner"),
            b.hasClass("explicitLineBreaksLayoutMode") && (b.removeClass("explicitLineBreaksLayoutMode"),
                b.find(".implicitLineBreak").remove(),
                b.find(".superfluousWhitespace").removeClass("superfluousWhitespace"),
                wz(a)))
    }

    function hz(a) {
        for (var b = a.find("*"), c = b.length - 1; 0 <= c; c--) {
            var d = b[c],
                e = d.nodeName.toLowerCase();
            "br" !== e && "div" !== e && "ul" !== e && "li" !== e && "p" !== e && (("span" !== e && "font" !== e || 0 !== d.attributes.length) && "" !== d.textContent.trim() || $(d).contents().replaceAll(d))
        }
        a.get(0).normalize()
    }

    function iz(a) {
        function b(a, b) {
            if (!a || !b)
                return !1;
            var e;
            if (a.nodeType === Node.ELEMENT_NODE) {
                e = a.nodeName.toLowerCase();
                if ("br" === e || "div" === e || "ul" === e || "li" === e || "p" === e)
                    return !1;
                for (;
                    (a = a.lastChild) && a.nodeType === Node.ELEMENT_NODE;)
                    if ("br" === a.nodeName.toLowerCase())
                        return !1
            }
            return b.nodeType === Node.ELEMENT_NODE && (e = b.nodeName.toLowerCase(),
                "ul" === e || "li" === e) ? !1 : !0
        }
        a.find("div, p").each(function () {
            var a = $(this);
            b(this.previousSibling, this.firstChild || this.nextSibling) && $("\x3cbr\x3e").insertBefore(this);
            b(this.lastChild || this.previousSibling, this.nextSibling) && $("\x3cbr\x3e").insertAfter(this);
            a.replaceWith(a.contents())
        })
    }

    function ez(a) {
        if (0 === a.rangeCount)
            return !1;
        a = a.getRangeAt(0);
        return null != a.startContainer && !(a.startContainer instanceof Object) || null != a.endContainer && !(a.endContainer instanceof Object)
    }

    function yz(a) {
        function b(a) {
            var b;
            $.browser.msie ? (b = document.selection.createRange(),
                b.collapse(!0),
                b = b.parentElement()) : b = window.getSelection().getRangeAt(0).startContainer;
            return a.contains(b)
        }
        var c = [],
            d = [],
            e = window.getSelection(),
            g = a.children(".inner").get(0);
        if (ez(e))
            return {
                Te: [],
                tf: []
            };
        dz(a) ? 1 == e.rangeCount && b(g) && (g = nz(fz(e.getRangeAt(0).startContainer), a),
            c = c.concat(g.Te),
            d = d.concat(g.tf)) : Yy(g).filter(function (a) {
            return Zy(e, a, !0) && a.nodeType == Node.TEXT_NODE
        }).forEach(function (b) {
            b = nz(fz(b), a);
            c = c.concat(b.Te);
            d = d.concat(b.tf)
        });
        c = c.filter(function (a, b) {
            return c.lastIndexOf(a) === b
        });
        d = d.filter(function (a, b) {
            return d.lastIndexOf(a) === b
        });
        return {
            Te: c,
            tf: d
        }
    }

    function nz(a, b) {
        var c, d, e = [],
            g = [],
            h = b.children(".inner").get(0);
        c = b.get(0);
        var k = b.data("fontName");
        b = b.data("fill");
        if (a == h || a == c)
            c = k,
            d = gh(b),
            c && e.push(c),
            d && g.push(d.Ca());
        else {
            for (; a !== h;)
                "font" == a.tagName.toLowerCase() && ((c = a.getAttribute("face")) && e.push(c),
                    (d = gh($(a).css("color") || a.getAttribute("color"))) && g.push(d.Ca())),
                a = a.parentElement;
            0 == e.length && k && e.push(k);
            0 == g.length && b && g.push(b)
        }
        return {
            Te: e,
            tf: g
        }
    }

    function Yy(a) {
        for (var b = [], c = 0; c < a.childNodes.length; c++) {
            var d = a.childNodes[c];
            0 == d.childNodes.length ? b.push(d) : b = b.concat(Yy(d))
        }
        return b
    }

    function fz(a) {
        if (a.parentElement)
            return a.parentElement;
        for (a = a.parentNode; a && a.nodeType !== Node.ELEMENT_NODE;)
            a = a.parentNode;
        return a
    }

    function Zy(a, b, c) {
        if (a.containsNode)
            return a.containsNode(b, c);
        c = document.createRange();
        c.selectNodeContents(b);
        b = 0;
        for (var d; b < a.rangeCount; ++b) {
            d = a.getRangeAt(b);
            try {
                if (0 >= d.compareBoundaryPoints(d.START_TO_START, c) && 0 <= d.compareBoundaryPoints(d.END_TO_END, c))
                    return !0
            } catch (e) {
                if (e.code !== DOMException.WRONG_DOCUMENT_ERR)
                    throw e;
            }
        }
        return !1
    }

    function zz(a) {
        if (!a)
            return [];
        for (var b = /<font[^>]+\bface="([^"]+)/gi, c, d = []; c = b.exec(a);)
            c = c[1].replace(/('|&#39;)/g, ""),
            d.push(c);
        return _.uniq(d)
    }

    function Az(a) {
        var b = a.html().toString();
        a.data("fontFamily") && (b += '\x3cfont face\x3d"' + a.data("fontFamily") + '"\x3e\x3c/font\x3e');
        return zz(b).filter(function (a) {
            return null !== Bz(Jb, a)
        })
    }

    function Cz(a, b) {
        b ? this.qb(a).data("fontMedia", {
            id: b.id,
            version: b.version
        }) : this.qb(a).removeData("fontMedia")
    }

    function Dz(a, b) {
        function c(a) {
            return {
                id: a.G(),
                version: a.getVersion()
            }
        }
        b && 0 < b.length ? this.qb(a).data("htmlFontMedia", b.map(c)) : this.qb(a).removeData("htmlFontMedia")
    }

    function Ez(a, b, c, d) {
        function e(a) {
            if (a) {
                var d = "'" + m.family + "'",
                    e;
                if (e = Ib)
                    e = Ib.ba.get(Bf);
                e ? d += ", notdef" : $.browser.msie || (d += ", " + m.Uk);
                h.css("font-family", d).css("font-weight", void 0 !== m.weight ? m.weight : "");
                h.toggleClass("noBold", !m.K.bold);
                h.toggleClass("noItalic", !m.K.v);
                h.toggleClass("noBoldItalic", !m.K.w);
                wz(h);
                g.trigger("change:fontFamily", this, h, b)
            }
            c && c(a)
        }
        var g = this,
            h = this.qb(a),
            k = h.data("fontName"),
            l = !1;
        b && sz(String(b)) && (l = !0);
        d || h.find("font").removeAttr("face");
        b !== k && (this.ps(a),
            this.Iv(a),
            xz(h),
            l && hz(h));
        if (void 0 === b)
            h.removeData("fontName").removeData("fontFamily").removeData("fontWeight").removeData("fontMedia").removeData("htmlFontMedia").css("font-family", "").css("font-weight", ""),
            c && c(!0);
        else if (Jb) {
            h.data("fontFamily", b);
            var m = Bz(Jb, b);
            d = Fz(b);
            m || d ? (h.data("fontName", m.name || m.family).data("fontFamily", m.family),
                this.aq(a, d),
                Gz(Jb, d, b, e)) : c && c(!1)
        } else
            c && c(!1)
    }

    function Hz(a, b, c) {
        var d = this.qb(a),
            e = parseFloat(d.data("fontSize")) / b;
        if (isNaN(e) || !c && (2 <= e || .5 >= e))
            this.ps(a),
            this.Iv(a),
            xz(d);
        void 0 === b ? d.removeData("fontSize").css("font-size", "") : (d.data("fontSize", b).css("font-size", b * J.oi + "%"), !0 !== c && wz(d, !0))
    }

    function Iz(a) {
        this.qe(this.Ib(), a)
    }

    function Jz(a) {
        return this.qb(a).data("fontSize") || J.cC
    }

    function Kz() {
        for (var a = [], b = 0; b < this.vE(); b++) {
            var c = this.qb(b).data("fontFamily");
            c && a.push("" + c)
        }
        return a
    }

    function Lz(a, b) {
        a = this.qb(a);
        void 0 === b ? a.removeData("justification").css("text-align", "") : a.data("justification", b).css("text-align", b)
    }

    function Mz(a, b) {
        function c(a, b, c) {
            a.children(".inner").find("*").filter(function () {
                var a = gh($(this).css("color") || $(this).attr("color"));
                return a && a.equals(b)
            }).attr("color", c ? c.Ca() : "")
        }

        function d(a, b, c) {
            b ? a.data("fill", b.Ca()).css("color", b.Ca()) : a.removeData("fill").css("color", "");
            c && a.find("*").removeAttr("color").css("color", "")
        }
        a = this.qb(a);
        var e = Xy(a),
            g = dz(a),
            h = a.is(".focused"),
            k = gh(a.data("fill")),
            l = gh(yz(a).tf[0]);
        h && b && document.execCommand("foreColor", !1, b.Ca());
        h && g ? (e = 0 < yz(a).tf.length,
            k = l && l.equals(k), !e || k ? d(a, b, !1) : c(a, l, b)) : (e || g) && d(a, b, h)
    }

    function Nz(a, b) {
        a = this.qb(a);
        a.is(".focused") && document.execCommand("bold", !1, null);
        if (Xy(a) || dz(a))
            void 0 === b ? a.removeData("bold").removeClass("bold") : (a.data("bold", b),
                b ? a.addClass("bold") : a.removeClass("bold"));
        wz(a, !0)
    }

    function Oz(a, b) {
        a = this.qb(a);
        a.is(".focused") && document.execCommand("italic", !1, null);
        if (Xy(a) || dz(a))
            void 0 === b ? a.removeData("italic").removeClass("italic") : (a.data("italic", b),
                b ? a.addClass("italic") : a.removeClass("italic"));
        wz(a, !0)
    }

    function Pz(a, b) {
        function c() {
            var b;
            l.focus();
            e() ? b = !0 : (l.click(),
                b = e());
            b && (document.execCommand("selectAll", !1, null),
                document.execCommand("insertUnorderedList", !1, null),
                gz(g, a),
                document.execCommand("selectAll", !1, null),
                d());
            l.attr("contentEditable", m)
        }

        function d() {
            window.setTimeout(function () {
                wz(h, !0)
            }, 0)
        }

        function e() {
            return null !== window.getSelection().focusNode && "BODY" !== window.getSelection().focusNode.tagName
        }
        var g = this,
            h = this.qb(a),
            k = 0 < h.find("li").length;
        if (!!b !== k) {
            var l = h.children(".inner"),
                m = String(l.prop("contentEditable"));
            l.attr("contentEditable", "true");
            l.focus();
            Qz(l, c)
        }
        b ? h.data("list", !0) : h.removeData("list")
    }

    function Rz(a) {
        return "uppercase" === this.qb(a).data("textTransform")
    }

    function Sz(a, b) {
        a = this.qb(a);
        b ? a.data("textTransform", b).css("text-transform", b) : a.removeData("textTransform").css("text-transform", "none");
        wz(a, !0)
    }

    function Tz(a, b) {
        a = this.qb(a);
        var c = a.children(".inner");
        b ? (a.data("lineHeight", b),
            c.css("line-height", b / 100)) : (a.removeData("lineHeight"),
            c.css("line-height", J.dt / 100));
        wz(a, !0)
    }

    function Uz(a) {
        return this.qb(a).data("lineHeight") || J.dt
    }

    function Vz(a, b) {
        a = this.qb(a);
        a.removeData("ephemeralLetterSpacing");
        void 0 === b || 0 === b ? (a.removeData("letterSpacing"),
            a.css("letter-spacing", "0")) : (a.data("letterSpacing", b),
            a.css("letter-spacing", b / 1E3 + "em"));
        wz(a, !0)
    }

    function Wz(a, b) {
        a = this.qb(a);
        var c = 0 !== b ? b / 1E3 + "em" : "0";
        a.data("ephemeralLetterSpacing", b);
        a.css("letter-spacing", c)
    }

    function Xz(a) {
        a = this.qb(a);
        var b = a.data("ephemeralLetterSpacing"),
            c = a.data("letterSpacing") || 0;
        b !== c && a.css("letter-spacing", 0 !== c ? c / 1E3 + "em" : "0");
        a.removeData("ephemeralLetterSpacing")
    }

    function Yz(a) {
        a = this.qb(a);
        var b = a.data("ephemeralLetterSpacing");
        return void 0 !== b ? b : a.data("letterSpacing") || 0
    }

    function Zz(a) {
        return this.qb(a).data("kernPairs") || {}
    }

    function $z(a, b) {
        return (a = this.qb(a).data("kernPairs")) && a.hasOwnProperty(b) ? parseFloat(a[b]) : 0
    }

    function aA(a) {
        a = this.qb(a);
        a.data("kernPairs") && (a.removeData("kernPairs"),
            tz(a, !0))
    }

    function bA(a) {
        var b = this.qb(a);
        a = this.pr(a);
        if (0 < Object.keys(a).length) {
            if (pz(b),
                a = b.data("kernPairs") || null)
                if (b = b[0].querySelectorAll(".char"),
                    0 !== b.length)
                    for (var c = b[0].firstChild.data, d = 1; d < b.length; d++) {
                        var e = b[d].firstChild.data,
                            c = a[c + e] || 0;
                        0 === c ? b[d].removeAttribute("style") : b[d].style.marginLeft = c / 1E3 + "em";
                        c = e
                    }
        } else
            tz(b)
    }

    function cA(a, b, c) {
        if (2 === c.length) {
            var d = this.qb(a);
            a = this.pr(a);
            a[c] = b;
            d.data("kernPairs", a)
        }
    }

    function dA(a, b) {
        this.qb(a).data("kernPairs", b)
    }

    function eA() {
        var a = this.ze();
        0 < a.parents("#overlays").length && fA(a)
    }

    function gA(a) {
        var b = this.pr(a),
            c = [];
        b && 0 !== Object.keys(b).length && Object.keys(b).forEach(function (a) {
            c.push({
                pair: a,
                adjustment: b[a]
            })
        });
        return c
    }

    function hA(a) {
        if (void 0 === a || 0 === a.length)
            return null;
        var b = {};
        a.forEach(function (a) {
            b[a.pair] = a.adjustment
        });
        return b
    }

    function iA(a) {
        function b(a) {
            if (a = Fz(a))
                return {
                    id: a.id,
                    version: a.version
                }
        }

        function c() {
            var a = h.data("cachedLineLengths");
            if (!a) {
                a = h[0].style;
                if ("" === a.fontFamily || "" === a.width)
                    return;
                a = h.data("fontScaling");
                if (void 0 !== a && 1 !== a || h.hasClass("focused"))
                    return;
                a = oz(h)
            }
            g.lineLengths = a
        }

        function d() {
            var b = e.HG(a);
            0 !== b.length && (g.kerning = b)
        }
        var e = this,
            g = {
                index: a
            },
            h = this.qb(a),
            k = String(h.data("fontFamily")),
            k = sz(k);
        (function () {
            var a = h.clone();
            xz(a, !0);
            g.html = a.children(".inner").html()
        })();
        (function () {
            Wy.forEach(function (a) {
                var b = h.data(a);
                void 0 !== b && (g[a] = b)
            });
            h.data("fill") && (g.color = h.data("fill"))
        })();
        k || (c(),
            d());
        (function () {
            var a = Fz(g.fontFamily);
            a ? g.fontMedia = {
                id: a.id,
                version: a.version
            } : h.data("fontMedia") && (g.fontMedia = h.data("fontMedia"));
            var c = Az(h).map(b).filter(function (a) {
                return !!a
            }).filter(function (b) {
                return !a || b.id !== a.id
            });
            0 < c.length ? g.htmlFontMedia = c : h.data("htmlFontMedia") && (g.htmlFontMedia = h.data("htmlFontMedia"))
        })();
        return g
    };

    function Dm(a) {
        this.type = a.type;
        this.id = a.id || "";
        this.version = a.version || 0
    }
    Dm.prototype.Ab = function () {
        return this.type
    };
    Dm.prototype.G = function () {
        return this.id
    };
    Dm.prototype.st = function () {
        this.type = jA;
        return this
    };
    Dm.prototype.serialize = function () {
        return this.type === jA || this.type === kA ? {
            type: this.type,
            id: this.id,
            version: this.version
        } : this.type ? {
            type: this.type
        } : null
    };

    function lA(a) {
        this.source = a;
        this.filename = "";
        this.viewBox = []
    }

    function mA(a) {
        if (a === nA)
            return nA;
        if (a = gh(a || ""))
            return a
    }

    function oA(a) {
        if (a === nA)
            return nA;
        if (a instanceof Om)
            return a.Ca()
    }
    lA.prototype.KX = function (a) {
        this.filename = a;
        return this
    };
    var nA = "inherit";

    function pA(a, b) {
        a: {
            var c;
            try {
                c = $.parseXML(a)
            } catch (d) {
                a = null;
                break a
            }
            a = $(c.documentElement)
        }
        return !a || !b && qA(a) || rA(a) ? !1 : !0
    }

    function qA(a) {
        return sA(a).some(function (a) {
            return -1 === tA.indexOf(a.localName.toLowerCase())
        })
    }

    function rA(a) {
        return sA(a).some(function (a) {
            a = a.attributes;
            for (var c = 0; c < a.length; c++) {
                var d = a[c].name.toLowerCase(),
                    e;
                if (e = "xlink:href" === d)
                    e = a[c].value,
                    e = !("#" === e.charAt(0) || uA.test(e));
                if (e || -1 === vA.indexOf(d))
                    return !0
            }
            return !1
        })
    }

    function sA(a) {
        a = a.get(0);
        var b = Array.from(a.getElementsByTagName("*"));
        return [a].concat(b)
    }
    var uA = /^data:image\/[^,;]+;base64,/,
        tA = "circle clippath defs desc ellipse feblend fecolormatrix fecomponenttransfer fecomposite feconvolvematrix fediffuselighting fedisplacementmap fedistantlight feflood fefunca fefuncb fefuncg fefuncr fegaussianblur feimage femerge femergenode femorphology feoffset fepointlight fespecularlighting fespotlight fetile feturbulence filter g hkern image line lineargradient marker mask path pattern polygon polyline radialgradient rect stop svg symbol text textpath title tref tspan use view vkern".split(" "),
        vA = "amplitude azimuth basefrequency baseline-shift bias class clip clip-path clip-rule clippathunits color color-interpolation color-interpolation-filters color-profile color-rendering cursor cx cy d diffuseconstant direction display divisor dominant-baseline dx dy edgemode elevation enable-background exponent fill fill-opacity fill-rule filter filterres filterunits flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight fx fy g1 g2 glyph-orientation-horizontal glyph-orientation-vertical gradienttransform gradientunits height id image-rendering in in2 intercept k k1 k2 k3 k4 kernelmatrix kernelunitlength kerning lengthadjust letter-spacing lighting-color limitingconeangle marker-end marker-mid marker-start markerheight markerunits markerwidth mask maskcontentunits maskunits method mode numoctaves offset opacity operator order orient overflow pathlength patterncontentunits patterntransform patternunits pointer-events points pointsatx pointsaty pointsatz preservealpha preserveaspectratio primitiveunits r radius refx refy result rotate rx ry scale seed shape-rendering slope spacing specularconstant specularexponent spreadmethod startoffset stddeviation stitchtiles stop-color stop-opacity stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width style surfacescale tablevalues targetx targety text-anchor text-decoration text-rendering textlength transform type u1 u2 unicode-bidi values version viewbox viewtarget visibility width word-spacing writing-mode x x1 x2 xchannelselector xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xml:lang xml:space xmlns xmlns:svg xmlns:xlink y y1 y2 ychannelselector z zoomandpan".split(" ");

    function wA(a) {
        var b = a.indexOf("\x3csvg", 0),
            c = a.slice(0, b); -
        1 === c.toUpperCase().indexOf("\x3c!DOCTYPE") && (a = c + '\x3c!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"\x3e\n' + a.slice(b));
        return a
    }

    function xA(a) {
        function b(a) {
            return 0 !== a.filter(function (a) {
                return isNaN(a)
            }).length
        }
        var c = ($($.parseXML(a)).find("svg").attr("viewBox") || "").split(/\s/);
        a = c.map(function (a, b) {
            return parseFloat(c[b])
        });
        return 4 !== a.length || b(a) ? [] : a
    }

    function yA(a) {
        function b(a) {
            a = g.attr(a);
            return "undefined" == typeof a || "" === a ? NaN : parseFloat(a.replace(/[^0-9\.]/g, ""))
        }
        var c = $("#limbo"),
            d = !1;
        0 >= c.length && (c = $('\x3cdiv id\x3d"limbo"\x3e\x3c/div\x3e'),
            $("body").append(c),
            d = !0);
        var e = $($.parseXML(a)),
            g, h, k, l, m;
        if (4 !== xA(a).length) {
            g = e.find("svg");
            if (!g)
                throw Error("SVG with no \x3csvg\x3e!");
            h = b("x");
            k = b("y");
            l = b("width");
            m = b("height");
            var n = e.find("svg");
            c.append(n);
            n = n.get(0).getBBox();
            isNaN(h) && (h = n.x);
            isNaN(k) && (k = n.y);
            isNaN(l) && (l = n.width);
            isNaN(m) && (m = n.height);
            e.remove();
            d && c.remove();
            c = ' viewBox\x3d"' + [h, k, l, m].join(" ") + '" ';
            d = a.indexOf("\x3csvg", 0) + 4;
            return a.substring(0, d) + c + a.substring(d)
        }
        return a
    }

    function zA(a) {
        if (!pA(a))
            throw Error("Aborting attempt to generate color changes on unacceptable SVG");
        var b = $(a).filter("svg"),
            c = '\x3c?xml version\x3d"1.0" standalone\x3d"no"?\x3e',
            d = a.match(/<\?xml([^?]*)\?>/gi);
        d && 0 <= d.length && (c = d[0]);
        d = b.find("[fill]").not('[fill\x3d"none"]');
        if (0 < b.find("g").filter(function () {
                return /^change/gi.test(this.id)
            }).length)
            return a;
        var e = [],
            g = {};
        d.each(function () {
            var a = gh($(this).attr("fill"));
            if (a) {
                var b = a.Ca();
                g.hasOwnProperty(b) || (e.push(a.Ca()),
                    g[b] = 1);
                a = e.indexOf(b) + 1;
                $(this).wrap('\x3cg id\x3d"change' + a + "_" + g[b] + '"\x3e\x3c/g\x3e');
                g[b] += 1
            }
        });
        a = $("\x3cdiv\x3e\x3c/div\x3e").append(b).html();
        return c + a
    }

    function AA(a, b) {
        for (var c = /SVGID_/g, d = new Set, e = /((url\(|xlink:href=)['"]?#)([a-z0-9_-]+)(['"]?)/gi, g; g = e.exec(a);)
            g[3] && !d.has(g[3]) && (c && c.test(g[3]) || d.add(g[3]));
        return 0 == d.size ? a : a.replace(e, function (a, c, e, g, n) {
            return (c || "") + (d.has(g) ? b + g : g) + (n || "")
        }).replace(/(xml:)?(id=['"]?)([a-z0-9_-]+)(['"]?)/gi, function (a, c, e, g, n) {
            return (c || "") + (e || "") + (d.has(g) ? b + g : g) + (n || "")
        })
    };

    function BA(a, b) {
        a = a.trim();
        a = a.replace(/SVGID_/g, b + "SVGID_");
        a = AA(a, b);
        a = a.replace(/font-size\s*:\s*\d+\.?\d*(?=[\s;"])/g, "$\x26px");
        a = wA(a);
        return a = yA(a)
    }

    function CA(a) {
        var b = a.get(0);
        b.removeAttribute("width");
        b.removeAttribute("height");
        b.removeAttribute("id");
        $("g", a).each(function (a, b) {
            b.id = b.id.toLowerCase()
        });
        $("style", a).remove();
        DA(a);
        EA(a);
        FA(a);
        GA(a);
        HA(a)
    }

    function DA(a) {
        var b = 0,
            c = 0,
            d = /^[neswc]_repeat/i,
            e = /^([ns][ew]?|e|w|c)(_\d+)(_|$)/i;
        $("g", a).each(function (a, g) {
            d.test(g.id) ? (g.id = g.id.substr(0, 1),
                g.classList.add("repeat")) : (a = g.id.match(e)) && a[1] && (g.id = a[1]); -
            1 < ["w", "e"].indexOf(g.id) && b++; -
            1 < ["n", "s"].indexOf(g.id) && c++
        });
        var g = 0 < b && 0 === c,
            h = 0 < c && 0 === b,
            k = a.get(0);
        g ? (k.classList.add("horizontalOnly"),
            $("g#w, g#c, g#e", a).each(function (a, b) {
                b.id = "n" + b.id;
                "nc" == b.id && (b.id = "n")
            })) : h && (k.classList.add("verticalOnly"),
            $("g#n, g#c, g#s", a).each(function (a, b) {
                b.id += "w";
                "cw" == b.id && (b.id = "w")
            }))
    }

    function EA(a) {
        function b(a, b) {
            var c, k, l;
            l = (k = (c = a.getAttribute("style")) && c.match(IA)) ? c.match(IA)[2] : a.getAttribute("fill");
            k && (c = c.replace(IA, ""),
                a.setAttribute("style", c),
                a.setAttribute("fill", l));
            a.hasAttribute("fill") && (a.classList.add("color"),
                a.setAttribute("data-color", a.getAttribute("fill")),
                a.classList.add("color-" + b));
            b = a.getAttribute("fill");
            c = gh(b);
            k = null;
            JA.equals(c) ? k = "primaryColor" : KA.equals(c) ? k = "secondaryColor" : LA.equals(c) && (k = "tertiaryColor");
            (c = k) ? a.classList.add(c): b && (d = !1)
        }
        var c = /^change(\d+|$)/i,
            d = !0;
        a.find("g").filter(function () {
            return c.test(this.id)
        }).each(function (a, c) {
            var d = parseFloat(c.id.substr(6)),
                d = isNaN(d) ? 1 : d;
            c.removeAttribute("id");
            b(c, d);
            $("[style*\x3dfill], [fill], [FILL]", c).each(function () {
                b(this, d)
            })
        });
        d && a.get(0).classList.add("baseColors")
    }

    function FA(a) {
        var b = /^stack(_|$)/i;
        a.find("g").filter(function () {
            return b.test(this.id)
        }).each(function (a, b) {
            var e = b.id;
            b.removeAttribute("id");
            b.classList.add("canva");
            b.classList.add("stack");
            e = e.match(/_(vcenter|vtop|vbottom)(_|$)/i);
            b.setAttribute("data-valign", e ? e[1].substr(1).toUpperCase() : "CENTER");
            b.setAttribute("data-stack-id", a)
        })
    }

    function GA(a) {
        var b = MA(a),
            c = b.Y(),
            d = b.N(),
            e = /^[op](_|$)/i,
            g = 0;
        a.find("g").filter(function () {
            return e.test(this.id)
        }).each(function (a, b) {
            a = document.createElementNS("http://www.w3.org/2000/svg", "g");
            a.setAttribute("class", "canva");
            b.parentNode.insertBefore(a, b);
            b.parentNode.removeChild(b);
            b = NA(b, ["circle", "ellipse", "path", "polygon", "rect"]);
            if (null !== b) {
                var e = document.createElementNS("http://www.w3.org/2000/svg", "clipPath");
                a.appendChild(e);
                e.id = OA();
                e.setAttribute("transform", "translate(" + -c + ", " + -d + ")");
                b.setAttribute("class", "photoPlaceholder");
                e.appendChild(b);
                var m = document.createElementNS("http://www.w3.org/2000/svg", "image");
                m.setAttribute("class", "placeholder");
                m.setAttribute("clip-path", "url(#" + e.id + ")");
                m.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", "https://static.canva.com/static/images/placeholder.jpg");
                m.setAttribute("transform", "translate(" + c + ", " + d + ")");
                m.setAttribute("data-placeholder-index", g.toString());
                g++;
                a.appendChild(m);
                b = PA(b, "cx cy r rx ry d pathLength points x y width height transform".split(" "));
                b.setAttribute("class", "outline");
                b.setAttribute("fill", "none");
                a.appendChild(b)
            }
        })
    }

    function HA(a) {
        var b = /^t(_|$)/i;
        a.find("g").filter(function () {
            return b.test(this.id)
        }).each(function (a, b) {
            var e = document.createElementNS("http://www.w3.org/2000/svg", "g");
            e.setAttribute("class", "canva");
            b.parentNode.insertBefore(e, b);
            b.parentNode.removeChild(b);
            a = NA(b, ["rect"]);
            if (null !== a) {
                a = PA(a, "rx ry x y width height".split(" "));
                a.setAttribute("class", "textPlaceholder");
                a.setAttribute("fill", "none");
                e.appendChild(a);
                var e = NA(b, ["text"]),
                    e = QA(e),
                    g = b.id,
                    h = /_(dfont)(_|$)/.test(g),
                    k = /_(dwidth)(_|$)/.test(g),
                    l = /_(dheight)(_|$)/.test(g),
                    m = g.match(/_(left|center|right)(_|$)/),
                    g = g.match(/_ls([0-9]+)(_|$)/),
                    e = $.extend({}, e, {
                        justification: m ? m[1] : void 0,
                        "line-spacing": g ? parseFloat(g[1].substring(0, 1) + "." + g[1].substring(1)) : void 0,
                        "dynamic-font-size": h,
                        "dynamic-width": k && !l,
                        "dynamic-height": l
                    }),
                    n;
                for (n in e)
                    a.setAttribute("data-" + n, e[n]);
                if (b) {
                    n = [];
                    b = b.getElementsByTagNameNS("http://www.w3.org/2000/svg", "text");
                    for (e = 0; e < b.length; e++)
                        h = b[e],
                        h.textContent && 0 < h.textContent.trim().length && n.push(h.textContent.trim());
                    b = n.join(" ")
                } else
                    b = "";
                "" != b && a.setAttribute("data-placeholder-text", b)
            }
        })
    }

    function PA(a, b) {
        var c = document.createElementNS("http://www.w3.org/2000/svg", a.nodeName);
        b.forEach(function (b) {
            a.hasAttribute(b) && c.setAttribute(b, a.getAttribute(b))
        });
        return c
    }

    function NA(a, b) {
        var c = [];
        b.forEach(function (b) {
            b = a.getElementsByTagNameNS("http://www.w3.org/2000/svg", b);
            for (var e = 0; e < b.length; e++)
                c.push(b[e])
        });
        return 0 === c.length ? null : c[0]
    }

    function QA(a) {
        function b(a) {
            for (var b = a.replace(/^['"]|['"]$/g, ""), d = RA(Jb), e, g, p = 0; p < d.length; p++)
                for (g in e = d[p],
                    e.o)
                    if (e.o[g].C && e.o[g].C.toLowerCase() === b.toLowerCase())
                        return a = -1 < [e.o.bold, e.o.w].indexOf(e.o[g]),
                            g = -1 < [e.o.v, e.o.w].indexOf(e.o[g]), {
                                "font-name": e.name || e.family,
                                "font-family": e.family,
                                bold: a,
                                italic: g
                            };
            return c(a)
        }

        function c(a) {
            var b = ["bold", "italic", "bolditalic", "black"],
                c = {},
                d = RA(Jb),
                e = a.replace(/^['"]|['"]$/g, "").toLowerCase();
            if (a = _.find(d, function (a) {
                    return (a.W || "").toLowerCase() === e
                }))
                return c["font-name"] = a.name || a.family,
                    c["font-family"] = a.family,
                    c;
            var d = d.filter(function (a) {
                    a = (a.W || "").toLowerCase().replace(/-[^-]+$/, "");
                    return 0 === e.indexOf(a)
                }),
                g = _.find(d, function (a) {
                    return -1 < (a.W || "").toLowerCase().indexOf("-regular")
                }) || d[0];
            g && b.forEach(function (a) {
                var b = (g.W || "").toLowerCase().replace(/-[^-]+$/, "");
                e == b + "-" + a && (c["font-name"] = g.name || g.family,
                    c["font-family"] = g.family,
                    c.bold = "bold" == a || "bolditalic" == a || "black" == a,
                    c.italic = "italic" == a || "bolditalic" == a)
            });
            return c
        }
        var d = ["fill", "font-size", "font-family"];
        if (!a)
            return {};
        var e = {};
        d.forEach(function (b) {
            var c = (a.getAttribute(b) || "").trim();
            "" !== c && (e[b] = c)
        });
        (a.getAttribute("style") || "").split(";").forEach(function (a) {
            var b = a.split(":");
            2 == b.length && (a = b[0].trim(),
                b = b[1].trim(), -1 < d.indexOf(a) && (e[a] = b))
        });
        if (e.fill) {
            var g = gh(e.fill);
            g ? e.fill = g.Ca() : delete e.fill
        }
        e["font-size"] && (e["font-size"] = .72 * parseFloat(e["font-size"]));
        e["font-family"] && (g = b(e["font-family"]),
            delete e["font-family"],
            $.extend(e, g));
        return e
    }
    var IA = /(\b|^)fill\s*:\s*([^;]+);\s*/i;

    function Z(a) {
        this.u = Kb;
        this.bb = $('\x3cdiv class\x3d"element" /\x3e');
        this.bb.data("canvaElement", this);
        this.selected = !1;
        this.ls = !0;
        this.mc = this.rotation = this.height = this.width = this.top = this.left = 0;
        this.page = this.oe = null;
        this.gm = this.XN = !1;
        this.Ob = 0;
        this.link = "";
        this.DA = this.rh = !1;
        this.Yl = this.origin = null;
        this.AC = !0;
        this.wx = 1;
        this.ke = null;
        this.HD = ["copy", "arrange", "transparency", "link", "delete"];
        this.rH = !0;
        this.vx = !1;
        if (a) {
            var b = cm({
                left: a.left,
                top: a.top,
                width: a.width,
                height: a.height
            });
            this.yd(b);
            null != a.rotation && (this.rotation = a.rotation);
            null != a.flipOrientation && (this.mc = a.flipOrientation);
            0 <= Object.keys(a).indexOf("userEdited") && (this.rH = a.userEdited);
            0 <= Object.keys(a).indexOf("transparency") && (this.Ob = a.transparency);
            0 <= Object.keys(a).indexOf("link") && (this.link = a.link);
            null != a.origin && (this.origin = new Dm(a.origin));
            null != a.groupIndex && (this.vx = !0)
        }
    }
    f = Z.prototype;
    f.Iu = function () {
        return !1
    };
    f.zP = function () {
        this.te = "top"
    };
    f.jM = function () {
        this.te = "middle"
    };
    f.qI = function () {
        this.te = "bottom"
    };
    f.pu = function () {
        return J.OH
    };
    f.cT = function () {
        return {
            Ni: 0,
            Kj: 0,
            maxLength: 0,
            Md: 0,
            KI: []
        }
    };
    f.vL = function () {
        return !1
    };
    f.vg = function () {
        return !1
    };

    function SA(a) {
        return "middle" === a.te
    }

    function TA(a) {
        return "bottom" === a.te
    }
    f.trigger = Backbone.Events.trigger;
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    _.extend(Z.prototype, Backbone.Events);
    f = Z.prototype;
    f.ZW = function () {
        return !1
    };
    f.nP = function () {
        return !1
    };
    f.transform = function (a) {
        var b = Jm(Im([this.Y(), this.N()]).transform(a));
        this.Hl(UA(this.eb(), 180 * Math.atan2(a.m[3], a.m[4]) / Math.PI * -1));
        this.setPosition(b[0], b[1])
    };
    f.O = function () {
        return this.bb
    };

    function VA(a) {
        a = a.bb[0].children;
        for (var b = 0; b < a.length; b++) {
            var c = a[b];
            if (c.classList.contains("inner"))
                return $(c)
        }
        return $()
    }
    f.vf = function () {
        return !1
    };
    f.zu = function () {
        return !1
    };
    f.cL = function () {
        return !1
    };
    f.fL = function () {
        return !1
    };
    f.ez = function () {
        return !1
    };
    f.sU = function () {
        this.rh = !0
    };
    f.ne = function () {
        return !1
    };
    f.gp = function () {
        return !1
    };
    f.nT = function () {
        return !1
    };
    f.pG = function () {};
    f.Po = function () {};
    f.Oo = function () {};
    f.Vp = function () {
        this.DA = !0
    };
    f.Uj = function () {
        this.DA = !1
    };
    f.nr = function () {
        return this.HD
    };
    f.pp = function () {
        return !0
    };
    f.PS = function () {
        return []
    };
    f.Jd = function () {
        return 0
    };

    function WA(a, b) {
        function c() {
            d.off("placeholderImage:loaded", e);
            d.RE(b)
        }
        if (void 0 === a.ib || void 0 === a.jd)
            throw Error("loadImagesAndFilters must be called on elements that have placeable and filterable images");
        var d = a,
            e = _.after(a.ib.length, c);
        a.on("placeholderImage:loaded", e);
        0 === a.ib.length ? window.setTimeout(c, 0) : a.ib.forEach(function (a, b) {
            a.update(function () {
                d.trigger("placeholderImage:loaded", b)
            })
        })
    }
    f.RE = function (a) {
        function b() {
            c.uG();
            a && a()
        }
        if (void 0 === this.ib || void 0 === this.jd)
            throw Error("initializeFilters must be called on elements that have placeable and filterable images");
        var c = this,
            d = _.after(this.jd.length, b);
        0 === this.jd.length ? window.setTimeout(b, 0) : this.jd.forEach(function (a) {
            a.initialize(d)
        })
    };
    f.Ve = function () {
        return this.origin
    };

    function XA(a, b) {
        for (var c = [], d, e = _.pluck(a, "index"), g, h = 0; h < b.length; h++)
            d = {},
            g = e.indexOf(h), -1 < g ? d = a[g] : d.index = h,
            c.push(YA(d.filter, b[d.index]));
        return c
    }

    function ZA(a, b, c) {
        for (var d = [], e, g = _.pluck(a, "index"), h, k = 0; k < b; k++)
            e = {},
            h = g.indexOf(k), -1 < h ? e = a[h] : e.index = k,
            h = c.is(".svg.element") ? c.find("svg image.placeholder").eq(k).parent() : c.find(".placeholder").eq(k).parent(),
            d.push(new $A(e, h));
        return d
    }

    function tg(a) {
        switch (a.type) {
            case "text":
                return new up(a);
            case "image":
                return new aB(a);
            case "graphic":
                return "print" !== bB ? a = new cB(a) : (a = new Ko(a),
                        a.KT = !0),
                    a;
            case "svg":
                return new Ko(a);
            case "shape":
                return new dB(a);
            case "grid":
                return new eB(a);
            case "fixed":
                return new fB(a);
            case "group":
                switch (a.generatorType) {
                    case gB:
                        return hB(a);
                    default:
                        return new iB(a)
                }
        }
        return null
    }
    f.we = function () {
        delete this.pe
    };
    f.remove = function () {
        this.page && this.page.Ui(this, {
            B5: !0
        });
        this.ke && this.ke.remove();
        this.ke = this.oe = this.page = null;
        this.XN = !0
    };
    f.ea = function () {
        return this.page ? this.page.xa().indexOf(this) : -1
    };
    f.ha = function () {
        return this.page
    };
    f.bq = function (a) {
        this.page = a
    };
    f.Il = function (a) {
        this.Ob = a;
        this.Bc()
    };
    f.wE = function () {
        return this.Ob
    };

    function jB(a) {
        for (var b in kB)
            if (kB.hasOwnProperty(b) && kB[b].test(a))
                return !0;
        return !1
    }

    function lB(a, b) {
        jB(b) ? a.link = b || "" : a.link = ""
    }
    f.Fm = function () {
        return jB(this.link) ? this.link : ""
    };
    f.wb = function (a) {
        mB(this, a);
        this.Bc()
    };

    function mB(a, b) {
        void 0 !== b && !isNaN(b) && isFinite(b) && (a.left = b)
    }

    function nB(a, b) {
        a.left -= b;
        a.Bc()
    }

    function oB(a, b) {
        a.top -= b;
        a.Bc()
    }

    function pB(a, b) {
        a.left += b;
        a.Bc()
    }

    function qB(a, b) {
        a.top += b;
        a.Bc()
    }
    f.Y = function () {
        return this.left
    };

    function rB(a) {
        return {
            Ob: a.Ob,
            rotation: a.eb(),
            top: a.N(),
            left: a.Y(),
            width: a.D(),
            height: a.F()
        }
    }

    function sB(a) {
        var b = {
                left: 0,
                top: 0,
                right: 0,
                bottom: 0,
                width: 0,
                height: 0
            },
            c = W;
        if (a.oe) {
            var d = a.O().get(0);
            a = a.oe;
            d.parentNode && a.get(0).parentNode && (d = d.getBoundingClientRect(),
                a = a.find(".page__content").get(0).getBoundingClientRect(),
                b.left = (d.left - a.left) / c,
                b.right = (d.right - a.left) / c,
                b.top = (d.top - a.top) / c,
                b.bottom = (d.bottom - a.top) / c,
                b.width = b.right - b.left,
                b.height = b.bottom - b.top)
        }
        return b
    }
    f.nc = function () {
        return sB(this).left
    };
    f.Ld = function () {
        return sB(this).right
    };
    f.xc = function () {
        return sB(this).top
    };
    f.ud = function () {
        return sB(this).bottom
    };
    f.eh = function () {
        return sB(this).width
    };
    f.dh = function () {
        return sB(this).height
    };
    f.KK = function () {
        var a = Math.round(this.left * W),
            b = 0;
        this.page && (b = tB(H.Xa[this.page ? this.page.ea() : 0]) || 0);
        return b + a
    };
    f.rb = function (a) {
        uB(this, a);
        this.Bc()
    };

    function uB(a, b) {
        void 0 !== b && !isNaN(b) && isFinite(b) && (a.top = b)
    }
    f.N = function () {
        return this.top
    };
    f.setPosition = function (a, b) {
        mB(this, a);
        uB(this, b);
        this.Bc()
    };
    f.za = function (a) {
        void 0 !== a && !isNaN(a) && isFinite(a) && (this.width = a);
        a = vB(this);
        this.O().css("width", a)
    };
    f.D = function () {
        return this.width
    };

    function vB(a) {
        return Math.round(a.D() * W)
    }
    f.oa = function (a) {
        void 0 !== a && !isNaN(a) && isFinite(a) && (this.height = a);
        a = Ro(this);
        this.O().css("height", a)
    };
    f.F = function () {
        return this.height
    };

    function Ro(a) {
        return Math.round(a.F() * W)
    }
    f.setSize = function (a, b) {
        this.za(a);
        this.oa(b)
    };

    function Qo(a) {
        a = a.O().get(0).getBoundingClientRect();
        return {
            x: a.left + a.width / 2,
            y: a.top + a.height / 2
        }
    }
    f.yd = function (a) {
        var b = a.Y(),
            c = a.N();
        mB(this, b);
        uB(this, c);
        this.setSize(a.D(), a.F())
    };
    f.Ba = function () {
        return new U(this.Y(), this.N(), this.D(), this.F())
    };
    f.Hl = function (a) {
        this.rotation = a;
        this.Bc()
    };
    f.eb = function () {
        return this.rotation
    };
    f.Yv = function (a) {
        this.mc = a
    };
    f.Cs = function (a) {
        var b = this.mc ^ a;
        this.Yv(a);
        1 != b && 2 != b || this.vv();
        this.Bc()
    };
    f.lp = function () {
        return !1
    };
    f.vv = function () {};
    f.kb = function () {
        return this.left + this.width
    };
    f.Ha = function () {
        return this.top + this.height
    };
    f.xi = function () {};
    f.wo = function () {
        return !this.vx
    };
    f.JC = function () {
        return !0
    };
    f.zx = function () {
        return !0
    };
    f.KC = function () {
        return !1
    };
    f.gh = function () {
        return !1
    };
    f.zf = function () {
        return this.selected
    };
    f.Ac = function () {
        return !1
    };
    f.lC = function () {
        return !1
    };
    f.PQ = function () {
        return !1
    };
    f.yq = function () {
        return !1
    };
    f.kt = function () {
        return !1
    };
    f.QQ = function () {
        return !1
    };
    f.ix = function () {
        return !1
    };
    f.xI = function () {
        return !1
    };
    f.xb = function () {
        return !1
    };
    f.UE = function () {
        return !1
    };
    f.$j = function (a) {
        this.selected = a
    };

    function wB(a) {
        return 0 < a.O().parents(".group").length
    }

    function xB(a) {
        a = a.O().parents(".group");
        return a.length && (a = a.data("canvaElement"),
            a instanceof iB) ? a : null
    }
    f.Bc = function (a) {
        var b = this.O(),
            c = Math.round(this.left * W),
            d = Math.round(this.top * W);
        if (0 < this.O().parents("#overlays").length && !wB(this))
            var e = H.Xa[this.page ? this.page.ea() : 0],
                c = c + Math.round(tB(e)),
                d = d + Math.round(yB(e));
        b.css("transform", Jo({
            Mv: this.rotation,
            ii: d,
            hi: c
        }));
        b.css("opacity", (100 - this.Ob) / 100);
        this.lp() && this.mH();
        !a && this.oe && this.lb()
    };
    f.mH = function () {};

    function zB(a) {
        var b = J.xQ * a.D();
        a.O().css("perspective", b + "px")
    }
    f.clone = function () {
        return tg(this.serialize())
    };
    f.Lk = function (a) {
        a.addElement(this, !0)
    };
    f.appendTo = function (a) {
        -1 == a.elements.indexOf(this) ? a.addElement(this) : AB(a, this, a.xa().length)
    };
    f.Ou = function (a) {
        return a ? Sg(this.Ba(), a.Ba()) : !1
    };
    f.insertAfter = function (a) {
        var b = a.ea();
        if (-1 != b) {
            var c = a.page,
                d = c.elements.indexOf(this); -
            1 == d ? AB(c, this, b + 1) : d < b ? AB(c, this, b) : d > b && AB(c, this, b + 1);
            !this.oe && a.oe && (this.oe = a.oe);
            this.mb()
        }
    };
    f.insertBefore = function (a) {
        var b = a.ea();
        if (-1 != b) {
            var c = a.ha(),
                d = c.elements.indexOf(this); -
            1 == d ? AB(c, this, b) : d < b - 1 ? AB(c, this, b - 1) : d > b && AB(c, this, b);
            !this.oe && a.oe && (this.oe = a.oe)
        }
    };
    f.mb = function () {
        function a() {
            b.oe && b.lb()
        }
        var b = this;
        this.ls && (mB(this),
            uB(this),
            this.Bc(!0),
            this.za(),
            this.oa(),
            this.Bc(),
            this.ke && this.ke.Cr() ? this.ke.update(!1, a) : a())
    };
    f.lb = function () {
        if (this.oe) {
            var a = this.O().data("toolbar");
            a && (BB(a),
                CB(a, this));
            DB(this)
        }
    };

    function DB(a) {
        Tg(a).write(function () {
            var a = this.O(),
                c = a.data("selectionBox");
            if (c) {
                var d = this.KK(),
                    e;
                e = Math.round(this.top * W);
                var g = 0;
                this.page && (g = yB(H.Xa[this.page ? this.page.ea() : 0]) || 0);
                e = g + e;
                var g = this.eb(),
                    h = vB(this),
                    a = Ro(this) || a.height(),
                    k = 0,
                    l = 0,
                    m = 80 > h || 80 > a;
                this.Nh && this.Nh() && (k = this.O().css("font-size").replace("px", ""),
                    k = this.Nh() / 1E3 * parseInt(k, 10) * W);
                this.sr && (l = (this.padding || 0) * W);
                c.css("transform", Jo({
                    hi: d,
                    ii: e,
                    Mv: g
                })).css("width", h + 2 * (k + l)).css("height", a + 2 * (k + l));
                c.toggleClass("tightTargets", m);
                EB(c, g)
            }
        })
    }
    f.ph = function () {
        var a = this.O(),
            b = a.data("toolbar"),
            c = a.data("selectionBox"),
            d = a.data("sideDrawer");
        d && (GB(d, !1),
            P.delay(200).then(function () {
                a.removeData("sideDrawer");
                d.remove()
            }));
        b && b.remove();
        c && c.remove();
        a.removeData("selectionBox").removeData("toolbar");
        S.trigger("hideContextualControlsRequested")
    };
    f.serialize = function () {
        var a = {
            elementIndex: this.ea(),
            left: this.left,
            top: this.top,
            width: this.width,
            height: this.height,
            rotation: this.rotation,
            transparency: this.Ob,
            userEdited: this.rH
        };
        this.link && (a.link = this.link);
        var b = this.origin && this.origin.serialize();
        b && (a.origin = b);
        0 != this.mc && (a.flipOrientation = this.mc);
        return a
    };
    f.Cj = function () {
        return !1
    };
    f.Ju = function () {
        return !1
    };
    f.Hi = function () {
        return this.pe || (this.pe = new Co)
    };
    f.fz = function () {
        return !1
    };
    f.Vy = function () {
        return {}
    };
    f.yW = function () {};
    f.Jx = function () {
        return !1
    };

    function HB(a) {
        var b;
        b = G.Oa();
        var c = ax(Yw()).wa().Qo();
        b = (c = c ? gh("#" + c) : null) ? {
            bs: c,
            ys: c.ku() < J.JH ? Qm(new Om, 255, 255, 255) : Qm(new Om, 0, 0, 0),
            Ps: c.ku() < J.JH ? bn(c, Qm(new Om, 255, 255, 255), J.FQ) : bn(c, Qm(new Om, 0, 0, 0), J.FQ)
        } : !IB(b) || b.ug() ? {
            bs: Qm(new Om, 255, 255, 255),
            ys: Qm(new Om, 0, 0, 0),
            Ps: Qm(new Om, 127, 127, 127)
        } : {
            bs: Qm(new Om, 0, 0, 0),
            ys: Qm(new Om, 255, 255, 255),
            Ps: Qm(new Om, 127, 127, 127)
        };
        c = a.Yl;
        c === b || c && b && c.bs.equals(b.bs) && c.ys.equals(b.ys) && c.Ps.equals(b.Ps) || (a.Yl = b,
            a.AC = !0)
    }

    function JB(a, b) {
        b != a.wx && (a.wx = b,
            a.AC = !0)
    }
    f.JA = function () {};

    function KB() {
        return 0 == this.ng().length
    }

    function LB() {
        var a = this.Xf();
        if (!a)
            return null;
        var b = this.sd(),
            c = this.ib ? this.ib[this.Tc()].mc : this.mc;
        return sm(a, b, c)
    }

    function MB() {
        var a = this.O(),
            b = this.ng(),
            c = this.sd(),
            d = a.data("selectionBox");
        if (d) {
            c.scale(W).round();
            var e = a.data("cropControls");
            e || (e = $('\x3cdiv class\x3d"cropControls"\x3e\x3cdiv class\x3d"viewPort"\x3e\x3cdiv class\x3d"inner"\x3e\x3cimg class\x3d"masked" /\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"cropBox cornerHandles"\x3e\x3cdiv class\x3d"inner"\x3e\x3c/div\x3e\x3ca class\x3d"handle tl" href\x3d"#"\x3e\x3c/a\x3e\x3ca class\x3d"handle tr" href\x3d"#"\x3e\x3c/a\x3e\x3ca class\x3d"handle br" href\x3d"#"\x3e\x3c/a\x3e\x3ca class\x3d"handle bl" href\x3d"#"\x3e\x3c/a\x3e\x3ca class\x3d"move" href\x3d"#"\x3e\x3c/a\x3e\x3cimg class\x3d"uncropped" /\x3e\x3c/div\x3e\x3c/div\x3e'),
                e.data("canvaElement", this),
                a.data("cropControls", e),
                e.appendTo("#overlays"));
            var g = e.find(".viewPort");
            g.css(NB(c, 0));
            g.children(".inner").css("width", c.D()).css("height", c.F());
            var h = b.attr("src") || b.attr("xlink:href"),
                b = e.find("img.masked, img.uncropped");
            b.attr("src") != h && b.each(function () {
                OB(PB, $(this), h)
            });
            b = QB(d);
            e.css(NB(b, this.eb()));
            b = this.Xf();
            b.scale(W).round();
            var k = this.ib ? this.ib[this.Tc()].mc : this.mc;
            RB(g.find("img.masked"), b, k);
            b.translate(c.Y(), c.N());
            c = e.find(".cropBox");
            c.css(NB(b, 0));
            RB(c.find("img.uncropped"), null, k);
            d.addClass("cropping");
            SB(a);
            a = a.data("confirmationToolbar");
            BB(a)
        }
    }

    function TB(a, b) {
        var c = this.Xf(),
            d = this.sd();
        d.wb(0).rb(0);
        a > d.Y() ? a = d.Y() : a + c.D() < d.kb() && (a = d.kb() - c.D());
        b > d.N() ? b = d.N() : b + c.F() < d.Ha() && (b = d.Ha() - c.F());
        c.wb(a).rb(b);
        this.El(c)
    }

    function UB(a) {
        var b = this.Tc(); -
        1 < b && VB(this.ib[b], a)
    }

    function WB() {
        var a = this.O();
        a.removeClass("cropping");
        var b = a.data("confirmationToolbar"),
            c = a.data("cropControls");
        a.removeData("confirmationToolbar").removeData("cropControls");
        b && b.remove();
        c && c.remove();
        (a = a.data("selectionBox")) && a.removeClass("cropping")
    }

    function XB() {
        this.O().removeClass("cropping");
        var a = this.ng();
        if (a) {
            var b = this.mE().scale(W).round();
            a.css(NB(b, 0)).attr("data-image-rect", JSON.stringify(this.Xf().serialize()))
        }
    }

    function YB() {
        var a = this.Tc();
        return this.Gm(0 <= a ? a : 0)
    }

    function ZB() {
        var a = this.Tc();
        if (-1 === a)
            return !1;
        a = this.al(a);
        return void 0 !== a.mediaId && void 0 !== a.mediaVersion
    }

    function $B(a) {
        function b(b) {
            if (c.data("mediaId") === a.ua && c.data("mediaVersion") === a.va) {
                var d = !!b;
                b = !!b && b.src || "";
                d && OB(PB, c, b);
                a.jv && a.jv(d)
            }
        }
        var c = a.Pm;
        c.data("mediaId", a.ua);
        c.data("mediaVersion", a.va);
        var d = Gb.Uc(a.ua, a.va);
        if (d) {
            var d = d[aC],
                e = bC(a.ua, a.va, "print" === bB ? cC : Fg);
            OB(PB, c, d.Aa());
            e.then(function (a) {
                return dC(PB, a.Aa())
            }).then(b).catch(b.bind(null, void 0))
        } else
            a.jv && a.jv(!1)
    }

    function aB(a) {
        var b = this;
        Z.call(this, a);
        this.background = !!a.isBackground;
        this.mm = !!a.isDark;
        this.backgroundColor = a.backgroundColor || null;
        this.ua = "string" === typeof a.mediaId ? a.mediaId : null;
        this.va = "number" === typeof a.mediaVersion ? a.mediaVersion : null;
        this.Hc = void 0 === a.mediaApproved || !!a.mediaApproved;
        this.qp() ? (this.EE = !0,
            this.Vx = !1) : (this.EE = void 0 !== a.isCutout,
            this.Vx = !this.EE || a.isCutout);
        this.tG = !!a.isRecolorable;
        this.gm = !this.qp();
        var c = this.Ub(),
            d = null !== c,
            e = this.O();
        e.addClass("image").toggleClass("hasMedia", d);
        if (d) {
            var g = $("\x3cdiv\x3e").addClass("imageWrapper");
            g.append("\x3cimg\x3e");
            g.appendTo(e);
            this.Wc = new $A({
                mediaId: this.ua,
                mediaVersion: this.va,
                mediaApproved: this.Hc
            }, g);
            this.ke = YA(a.filter, this.Wc);
            this.Gl(c.id, c.version).bind(this).then(function () {
                S.trigger("elementLoaded", this);
                S.trigger("elementLoaded:image", this)
            }).catch(function () {
                S.trigger("elementLoadingError", this)
            })
        } else
            this.ke = this.Wc = null;
        this.tG && this.backgroundColor && e.css("background-color", this.backgroundColor);
        this.Gg = new U((this.width - this.width * J.gC) / 2, (this.height - this.height * J.gC) / 2, this.width * J.gC, this.height * J.gC);
        this.Ra = new U(-this.Gg.Y(), -this.Gg.N(), this.width, this.height);
        this.Lw = this.Ba();
        this.yk = !1;
        if (c = a.imageBox)
            al(this, new U(-1 * c.left, -1 * c.top, this.width, this.height)),
            this.El(cm(c)),
            this.Lw = this.Xf(),
            this.Sq(),
            a = cm({
                left: a.left,
                top: a.top,
                width: a.width,
                height: a.height
            }),
            this.yd(a);
        this.background && Ep(this);
        d || window.setTimeout(function () {
            S.trigger("elementLoaded", b);
            S.trigger("elementLoaded:image", b)
        }, 0)
    }
    aB.prototype = Object.create(Z.prototype);
    f = aB.prototype;
    f.constructor = aB;
    f.kp = KB;
    f.CO = TB;
    f.Wp = WB;
    f.sd = YB;
    f.mE = LB;
    f.gp = function () {
        return !!this.ke
    };
    f.nT = function () {
        return !0
    };
    f.Id = function () {
        return this.ke
    };
    f.Fy = function () {
        return 0
    };
    f.So = function (a) {
        return 0 === a ? this.ke : null
    };
    f.pp = function () {
        return !(!this.ke || !this.ke.Cr())
    };
    f.nr = function () {
        return this.lC() ? ["transparency", "delete"] : this.HD
    };
    f.S0 = aB.prototype.pp;
    f.pG = function (a, b) {
        eC(this.ke, b)
    };
    f.Po = function () {
        this.ke.Po()
    };
    f.Oo = function () {
        this.ke.Oo()
    };
    f.RE = function (a) {
        function b() {
            c.uG();
            a && a()
        }
        var c = this;
        this.ke && this.ke.initialize(b)
    };
    f.uG = function () {
        var a;
        this.S0() && (a = this.O().data("toolbar")) && a.view.Wt("filter")
    };
    f.KC = function () {
        return !this.Ac() && !this.gh()
    };
    f.qp = function () {
        return this.Hc && null === this.Ub()
    };
    f.appendTo = function (a) {
        this.Ac() ? (AB(a, this, 0),
            fC(a)) : Z.prototype.appendTo.call(this, a)
    };
    f.serialize = function () {
        var a = Z.prototype.serialize.call(this),
            b;
        this.ke && (b = gC(this.ke)) && (a.filter = b);
        a.type = "image";
        a.mediaId = this.ua;
        a.mediaVersion = this.va;
        a.isBackground = this.background;
        a.isRecolorable = this.tG;
        a.isCutout = this.Vx;
        a.isDark = this.mm;
        this.backgroundColor && (a.backgroundColor = this.backgroundColor);
        this.Hc || (a.mediaApproved = !1);
        this.yk && (a.imageBox = this.Ra.serialize());
        return a
    };
    f.za = function (a) {
        void 0 === a && (a = this.width);
        var b = this.O(),
            c = a != this.width;
        this.Ra && c && !b.is(".cropping") && (b = a / this.width,
            this.Ra.scale(b, 1),
            this.Gg.scale(b, 1));
        this.Wc && VB(this.Wc, this.yk ? this.Ra : new U(0, 0, a, this.height));
        Z.prototype.za.call(this, a)
    };
    f.oa = function (a) {
        void 0 === a && (a = this.height);
        var b = this.O(),
            c = a != this.height;
        this.Ra && c && !b.is(".cropping") && (b = a / this.height,
            this.Ra.scale(1, b),
            this.Gg.scale(1, b));
        this.Wc && VB(this.Wc, this.yk ? this.Ra : new U(0, 0, this.width, a));
        Z.prototype.oa.call(this, a)
    };
    f.lp = function () {
        return null !== this.Wc
    };
    f.Yv = function (a) {
        sm(this.Ra, this.Gg, this.mc ^ a);
        this.Gg.wb(-this.Ra.Y());
        this.Gg.rb(-this.Ra.N());
        this.mc = a
    };
    f.mH = function () {
        RB(this.O().find(".imageWrapper"), null, this.mc)
    };
    f.vv = function () {
        zB(this);
        var a = this.O().find(".imageWrapper");
        a.addClass("flipping");
        a.one("transitionend", function () {
            a.removeClass("flipping")
        })
    };
    f.mb = function () {
        Z.prototype.mb.call(this);
        var a = this.O();
        if (this.yk && !a.is(".cropping")) {
            var b = this.mE().scale(W).round();
            $("img", a).css(NB(b, 0))
        }
    };
    f.lb = function () {
        Z.prototype.lb.call(this);
        this.O().is(".cropping") ? this.gy() : this.Wp()
    };
    f.TB = function (a) {
        this.qp() || Lp(a, this.Ub()) || (this.bB(!1),
            this.va = this.ua = null)
    };
    f.Cj = function () {
        return !0
    };
    f.Ub = function () {
        return null != this.ua && null != this.va ? new Fm({
            id: this.ua,
            version: this.va
        }) : null
    };
    f.Fv = function () {
        var a = this.Ub();
        return a ? this.Gl(a.id, a.version) : P.resolve()
    };
    f.Gl = function (a, b) {
        return new P(function (c, d) {
                this.ua = a;
                this.va = b;
                var e = this;
                $B({
                    Pm: e.O().find("img"),
                    ua: a,
                    va: b,
                    jv: function (a) {
                        a ? e.RE(c) : d()
                    }
                })
            }
            .bind(this))
    };
    f.zz = function () {
        return this.Hc
    };
    f.bB = function (a) {
        this.Hc = a;
        this.O().toggleClass("unapproved", !a);
        this.lb()
    };
    f.As = function () {};
    f.ng = function () {
        return this.O().find("img")
    };
    f.Tc = function () {
        return 0
    };
    f.Qy = function (a) {
        return 0 != a ? $() : $("img", this.O()).eq(0)
    };
    f.Zf = function () {
        return 1
    };
    f.Gm = function () {
        return this.Gg.clone()
    };
    f.al = function () {
        return null
    };
    f.Zo = function () {
        return this.Wc
    };
    f.fq = function () {};
    f.HA = function () {};

    function al(a, b) {
        var c = a.Gg.Y(),
            d = a.Gg.N();
        a.Gg = b.clone();
        a.Ra.translate(c - a.Gg.Y(), d - a.Gg.N())
    }
    f.Xf = function () {
        return this.Ra.clone()
    };
    f.gL = function () {
        return !0
    };
    f.gy = function () {
        if (this.page) {
            var a = this.O();
            this.jH || (this.jH = !0,
                this.Lw = new U(this.left + (this.yk ? this.Ra.Y() : 0), this.top + (this.yk ? this.Ra.N() : 0), this.Ra.D(), this.Ra.F()));
            var b = hC(H, this.page),
                c = tB(b) || 0,
                d = yB(b) || 0,
                b = this.Lw.clone();
            b.scale(W).translate(c, d).round();
            (c = a.data("selectionBox")) && c.css(NB(b, this.eb()));
            MB.call(this);
            0 == $(".viewPort .frameHandle").length && (c = $('\x3ca class\x3d"frameHandle tl" href\x3d"#"\x3e\x3cspan class\x3d"tl"\x3e\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"frameHandle tr" href\x3d"#"\x3e\x3cspan class\x3d"tr"\x3e\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"frameHandle br" href\x3d"#"\x3e\x3cspan class\x3d"br"\x3e\x3c/span\x3e\x3c/a\x3e\x3ca class\x3d"frameHandle bl" href\x3d"#"\x3e\x3cspan class\x3d"bl"\x3e\x3c/span\x3e\x3c/a\x3e'),
                (a = a.data("cropControls")) && a.find(".viewPort").append(c))
        }
    };
    f.ph = function () {
        Z.prototype.ph.call(this);
        this.Wp()
    };
    f.El = function (a) {
        this.Ra = a.clone()
    };
    f.Sq = function () {
        XB.call(this);
        var a = this.O();
        this.ng().css("position", "absolute");
        a.css("overflow", "hidden");
        var b = this.Gg.clone();
        b.translate(this.Lw.Y(), this.Lw.N());
        a.addClass("cropping");
        this.yd(b);
        a.removeClass("cropping");
        this.Gg.wb(-this.Ra.Y()).rb(-this.Ra.N());
        this.yk = !0;
        this.jH = !1
    };

    function Ep(a) {
        var b = a.vd();
        a.background = !0;
        a.gm = !1;
        a.O().addClass("background");
        a.page && (AB(a.page, a, 0),
            fC(a.page),
            a.page.trigger("change:background", a.page));
        a.vd() !== b && a.lb();
        a.we()
    }

    function iC(a) {
        var b = a.vd();
        a.background = !1;
        a.gm = !a.qp();
        a.O().removeClass("background");
        a.gh() && null !== a.backgroundColor && a.Wv(null);
        a.vd() !== b && a.lb();
        a.page && a.page.trigger("change:background", a.page);
        a.we()
    }
    f.Ac = function () {
        return this.background
    };
    f.xI = function () {
        return !0
    };
    f.lC = function () {
        return this.background
    };
    f.yq = function () {
        return !0
    };
    f.zu = function () {
        return !0
    };
    f.vd = function () {
        return this.gh() ? this.Ac() : this.tG
    };
    f.PK = function () {
        if (this.vd()) {
            var a = gh(this.backgroundColor || J.LH);
            if (a)
                return a.ku() < J.JH
        }
        return this.mm
    };
    f.gh = function () {
        var a = this;
        this.EE || null === this.Ub() || (this.EE = !0,
            Bb.ac(this.ua, (new jC).jk(this.va), function (b, c) {
                a.Vx = c.Va().gh()
            }));
        return this.Vx
    };
    f.ob = function () {
        var a = [];
        if (this.vd()) {
            var b = gh(this.backgroundColor || J.LH);
            b && a.push(b)
        }
        return a
    };
    f.Jd = function () {
        return this.ob().length
    };
    f.ah = function () {
        return null !== this.backgroundColor ? gh(this.backgroundColor) : null
    };
    f.Wv = function (a) {
        var b = this.O();
        a ? (this.backgroundColor = a.Ca(),
            b.css("background-color", this.backgroundColor)) : (this.backgroundColor = null,
            b.css("background-color", ""));
        this.Ac() && this.page && this.page.trigger("change:background", this.page);
        this.we()
    };
    f.ce = function (a, b) {
        if (0 !== a)
            throw Error("ImageElement.setChangeableColorAtIndex - invalid index: " + a.toString());
        this.Wv(b)
    };
    f.Hi = function () {
        if (this.pe)
            return this.pe;
        var a = new Co;
        this.ob().forEach(function (b) {
            Fo(a, b)
        });
        return this.pe = a
    };

    function Ko(a) {
        this.rv = [];
        this.Fb = this.Lc = this.ZH = null;
        this.ic = $();
        this.uw = [];
        this.fP = $();
        this.ib = [];
        this.jd = [];
        this.KT = this.loaded = !1;
        Z.call(this, a);
        if (void 0 !== a && void 0 !== a.mediaId) {
            this.ua = a.mediaId;
            this.va = a.mediaVersion;
            this.Hc = void 0 === a.mediaApproved ? !0 : a.mediaApproved;
            var b = this.O();
            b.addClass("svg");
            var c = $('\x3cimg class\x3d"placeholder" /\x3e');
            b.append(c);
            this.listenTo(this, "change:fontSize", this.QU);
            this.listenTo(this, "change:fontFamily", this.QU);
            this.contents = a.contents ? a.contents.slice(0) : null;
            a.scale && (this.scale = a.scale);
            this.dk = null;
            a.svgMetadata && (this.dk = a.svgMetadata);
            a.fillColors && (this.wm = a.fillColors.map(function (a) {
                    return {
                        index: a.index,
                        color: mA(a.color)
                    }
                }),
                Object.freeze(this.wm));
            this.Gl(this.ua, this.va).bind(this).then(function () {
                S.trigger("elementLoaded", this);
                S.trigger("elementLoaded:svg", this)
            }).catch(function () {
                S.trigger("elementLoadingError", this)
            })
        }
    }
    Ko.prototype = Object.create(Z.prototype);
    f = Ko.prototype;
    f.constructor = Ko;
    f.kp = KB;
    f.Wp = WB;
    f.sd = YB;
    f.gL = ZB;
    f.mE = LB;
    f.qo = bA;
    f.mD = hA;
    f.dd = Jz;
    f.ou = Kz;
    f.qE = $z;
    f.pr = Zz;
    f.rr = Yz;
    f.$k = Uz;
    f.pE = Rz;
    f.Iv = Xz;
    f.ps = aA;
    f.HG = gA;
    f.Vv = iA;
    f.Jn = Nz;
    f.setColor = Mz;
    f.LG = Wz;
    f.aq = Cz;
    f.aB = Dz;
    f.Zj = Ez;
    f.qe = Hz;
    f.$A = Iz;
    f.Ln = Oz;
    f.ai = Lz;
    f.Zv = cA;
    f.MG = dA;
    f.$v = Vz;
    f.aw = Tz;
    f.bw = Pz;
    f.hq = Sz;
    f.yw = eA;
    f.lp = function () {
        return this.KT
    };
    f.yz = function () {
        return !0
    };
    f.yq = function () {
        return !this.vf()
    };
    f.kt = function () {
        return this.ne() && !this.zu()
    };
    f.ne = function () {
        return this.ic && 0 < this.ic.length
    };
    f.gp = function () {
        return this.jd && 0 < this.jd.length
    };
    f.mH = function () {
        RB(this.O().children("svg"), null, this.mc)
    };
    f.vv = function () {
        zB(this);
        var a = this.O().children("svg");
        a.get(0).classList.add("flipping");
        a.one("transitionend", function () {
            a.get(0).classList.remove("flipping")
        })
    };
    f.TB = function (a) {
        Lp(a, this.Ub()) || (this.bB(!1),
            this.va = this.ua = null)
    };
    f.Cj = function () {
        return !0
    };
    f.EC = function (a, b) {
        function c() {
            k.XN ? b && b(!1) : (k.ic.each(function (a, b) {
                    k.Wi(a, k.gc(a), x, !0);
                    $(b).css("opacity", "")
                }),
                k.mb(),
                l.forEach(function (a) {
                    var b = a.index,
                        c = k.qb(b);
                    k.Wi(b, a, function (b) {
                        b && void 0 !== a.lineLengths && vz(c, a.lineLengths);
                        x()
                    }, !0)
                }),
                k.rv = kC(p, ".photoPlaceholder"),
                k.gm = 0 < k.Zf(),
                lC(p, k.rv),
                mC(p, k.rv),
                nC(p, k.rv),
                m && (k.ib = ZA(m, k.Zf(), h),
                    k.jd = XA(m, k.ib),
                    Object.freeze(k.jd),
                    Object.freeze(k.ib)),
                k.ib.forEach(function (a, b) {
                    em(a.Em(), dm) && VB(a, oC(k, b))
                }),
                WA(k, function () {
                    q = !0;
                    e()
                }))
        }

        function d() {
            y = !0;
            window.setTimeout(e, 0)
        }

        function e() {
            if (q && y && !k.loaded && (k.Bc(),
                    k.loaded = !0,
                    p.css("position", "absolute"),
                    b && b(!0),
                    null != k.dk && (null == v || JSON.stringify(k.dk) !== JSON.stringify(v)))) {
                var a = k.ha();
                (a = a ? a.Nb : null) && a.trigger("change")
            }
        }

        function g(a, b) {
            var c = a.parent(),
                d = a.prev(),
                e = MA(a),
                e = $("\x3cdiv\x3e\x3c/div\x3e").css("opacity", 0).css("width", e.D() * W).css("height", e.F() * W).append(a).appendTo("#limbo");
            try {
                b()
            } finally {
                0 < c.length ? 0 < d.length ? a.insertAfter(d) : a.prependTo(c) : a.detach(),
                    e.remove()
            }
        }
        var h = this.O(),
            k = this,
            l = this.contents ? this.contents.filter(function (a) {
                return "text" == a.type
            }) : [],
            m = this.contents ? this.contents.filter(function (a) {
                return "image" == a.type
            }) : [];
        if (!pA(a, !0) || this.XN)
            b && b(!1);
        else {
            var n = OA();
            a = BA(a, n);
            var p = $(a).filter("svg");
            CA(p);
            p = $(p.get(0).cloneNode(!0));
            p.appendTo(h);
            this.Lc = MA(p);
            this.width && this.height || (this.za(this.Lc.D()),
                this.oa(this.Lc.F()));
            this.ic = pC(p, lc(this.u));
            this.ic.css("opacity", 0).data("canvaElement", this).appendTo(h);
            qC(this);
            rC(this).each(function () {
                var a = $(this).data("designObject");
                k.listenTo(a, "change:width", k.NU);
                k.listenTo(a, "change:height", k.MU)
            });
            a = sC(p, this.ic);
            this.uw = a.uw;
            this.uw.forEach(function (a) {
                k.listenTo(a, "change", k.XU)
            });
            this.fP = a.y_;
            this.fP.appendTo(h);
            this.wm && this.wm.forEach(function (a) {
                k.ce(a.index, a.color)
            });
            var r = [],
                u = [];
            this.ic.each(function () {
                var a = $(this).data("fontFamily"),
                    b = mz($(this)).Te;
                a && r.push(a);
                r = r.concat(b)
            });
            l.forEach(function (a) {
                var b = zz('\x3cfont face\x3d"' + a.fontFamily + '"\x3e\x3c/font\x3e' + a.html);
                r = r.concat(b);
                a.lineLengths && k.qb(a.index).data("cachedLineLengths", a.lineLengths);
                a.fontMedia && (u = u.concat(Gm(a.fontMedia)));
                Array.isArray(a.htmlFontMedia) && (u = u.concat(a.htmlFontMedia.map(Gm)))
            });
            var u = u.filter(Boolean),
                v = this.dk;
            g(p, function () {
                k.Fb = tC(p);
                k.dk = uC(k, p)
            });
            k.Fb && (k.scale && vC(k),
                k.za(k.D()),
                k.oa(k.F()));
            var y = !1,
                q = !1;
            a = this.ic.length + l.length;
            var x = _.after(a, d);
            0 === a && d();
            this.we();
            wC(Jb, u, r, c)
        }
    };
    f.mb = function () {
        Z.prototype.mb.call(this);
        xC(this);
        Lo(this);
        yC(this)
    };
    f.wr = function () {
        var a = this,
            b = [];
        this.ic && this.ic.each(function (c) {
            b.push(gh(a.gc(c).color))
        });
        return b
    };
    f.Id = function () {
        var a = this.Tc();
        return -1 < a ? this.jd[a] : null
    };
    f.Fy = function () {
        return this.Tc()
    };
    f.So = function (a) {
        return this.jd[a] || null
    };
    f.pp = function () {
        return !(!this.Id() || !this.Id().Cr())
    };
    f.nr = function () {
        var a = this.HD.slice();
        0 < this.Zf() && a.push("deletePlaceholder");
        return a
    };
    f.Po = function () {
        this.Id() && this.Id().Po()
    };
    f.Oo = function () {
        this.Id() && this.Id().Oo()
    };
    f.uG = function () {
        if (this.Id() && this.Id().Cr()) {
            var a = this.O().data("toolbar");
            a && a.view.Wt("filter")
        }
    };
    f.pG = function (a, b) {
        eC(this.jd[a], b)
    };
    f.QU = function (a, b) {
        (a = b.data("designObject")) && this.loaded && zC(a)
    };
    var AC = 0;

    function OA() {
        AC = AC == Math.pow(2, 53) ? 0 : AC + 1;
        return "CANVA" + AC + "_"
    }

    function BC(a) {
        return 0 < $("g", a).filter(function () {
            return -1 != "nw n ne w c e sw s se".split(" ").indexOf(this.id)
        }).length
    }

    function tC(a) {
        function b(a, b) {
            var c = b.firstElementChild;
            c ? b.insertBefore(a, c) : b.appendChild(a)
        }

        function c(a, c, d, e, g) {
            if (0 != a.length) {
                var h = a.get(0),
                    k = document.createElementNS("http://www.w3.org/2000/svg", "g"),
                    m = document.createElementNS("http://www.w3.org/2000/svg", "clipPath"),
                    n = OA(),
                    K = OA(),
                    C = document.createElementNS("http://www.w3.org/2000/svg", "rect"),
                    N = document.createElementNS("http://www.w3.org/2000/svg", "rect"),
                    Q = a.get(0).cloneNode(!0),
                    M = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                m.id = n;
                C.setAttribute("width", e);
                C.setAttribute("height", g);
                C.setAttribute("x", c);
                C.setAttribute("y", d);
                m.appendChild(C);
                k.id = K;
                Q.removeAttribute("id");
                $("g.canva, .textPlaceholder, .photoPlaceholder", Q).remove();
                k.appendChild(Q);
                l.appendChild(k);
                l.appendChild(m);
                a.children(":not(.canva)").remove();
                a.data("clipId", n);
                a.data("useId", K);
                h.setAttribute("clip-path", "url(#" + n + ")");
                M.setAttribute("width", e);
                M.setAttribute("height", g);
                M.setAttribute("x", c);
                M.setAttribute("y", d);
                M.setAttribute("class", "repeat");
                M.setAttribute("visibility", "hidden");
                M.setAttribute("pointer-events", "none");
                N.setAttribute("width", e);
                N.setAttribute("height", g);
                N.setAttribute("class", "repeat");
                N.setAttribute("display", "none");
                N.setAttribute("pointer-events", "none");
                N.setAttribute("class", "canva dimensions");
                b(M, h);
                h.insertBefore(N, M);
                h.setAttribute("class", "canva tiled");
                CC(a)
            }
        }
        if (!BC(a))
            return null;
        var d = MA(a),
            e = {
                left: 0,
                right: 0,
                top: 0,
                bottom: 0,
                repeat: !1,
                ss: !0,
                Bn: !0
            },
            g = a.get(0),
            h = d.D(),
            k = d.F();
        $("g", a).each(function (a, b) {
            -1 != ["n", "e", "s", "w"].indexOf(b.id) && (e.repeat |= b.classList.contains("repeat")); -
            1 != ["ne", "e", "se"].indexOf(b.id) ? (e.right = Math.max(e.right, h - b.getBBox().x),
                e.right == h && (e.right = 0)) : -1 != ["n", "c", "s"].indexOf(b.id) && (e.left = Math.max(e.left, b.getBBox().x)); -
            1 != ["sw", "s", "se"].indexOf(b.id) ? (e.bottom = Math.max(e.bottom, k - b.getBBox().y),
                e.bottom == k && (e.bottom = 0)) : -1 != ["w", "c", "e"].indexOf(b.id) && (e.top = Math.max(e.top, b.getBBox().y))
        });
        e.ss = !g.classList.contains("verticalOnly");
        e.Bn = !g.classList.contains("horizontalOnly");
        if (e.repeat) {
            var l = document.createElementNS("http://www.w3.org/2000/svg", "defs");
            b(l, g);
            var d = e.left + e.right,
                m = e.top + e.bottom,
                n = g.classList.contains("horizontalOnly"),
                g = g.classList.contains("verticalOnly");
            c($("g#n", a), e.left, 0, h - d, n ? k : e.top);
            c($("g#s", a), e.left, k - e.bottom, h - d, n ? k : e.bottom);
            c($("g#c", a), e.left, e.top, h - d, k - m);
            c($("g#w", a), 0, e.top, g ? h : e.left, k - m);
            c($("g#e", a), h - e.right, e.top, g ? h : e.right, k - m)
        }
        return e
    }

    function CC(a) {
        var b = a.data("clipId"),
            c = a.data("useId"),
            d = a.get(0);
        if (b && c) {
            var b = d.querySelector(".repeat"),
                e = d.querySelector(".dimensions");
            if (b && e) {
                var g = Number(b.getAttribute("width")),
                    h = Number(b.getAttribute("height")),
                    b = Number(e.getAttribute("width")),
                    e = Number(e.getAttribute("height")),
                    g = Math.ceil(g / b),
                    h = Math.ceil(h / e);
                if (!(isNaN(g * h) || !isFinite(g * h) || 0 > h || 0 > g || g === Number(a.data("columns")) && h === Number(a.data("rows")))) {
                    a.find("use").remove();
                    for (var k = 0; k < g; k++)
                        for (var l = 0; l < h; l++) {
                            var m = document.createElementNS("http://www.w3.org/2000/svg", "use"),
                                n = k * b - .5 * k,
                                p = l * e - .5 * l;
                            m.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#" + c);
                            m.setAttribute("transform", "translate(" + n + "," + p + ")");
                            d.appendChild(m)
                        }
                    a.data("columns", g);
                    a.data("rows", h)
                }
            }
        }
    }

    function kC(a, b) {
        var c = [];
        if (0 === a.find(b).length)
            return c;
        var d = a.parent(),
            e = a.prev(),
            g = MA(a),
            h = $("\x3cdiv\x3e\x3c/div\x3e");
        h.appendTo($("#limbo"));
        h.css("width", g.D()).css("height", g.F());
        a.appendTo(h);
        a.attr("stroke", "transparent").attr("stroke-width", 0);
        vf(a);
        var k = a.get(0).getBoundingClientRect();
        $(b, a).each(function (a, b) {
            a = $(b).clone();
            a.attr("fill", "transparent").appendTo($(b).parents("g, svg").first());
            vf(a);
            b = Qg(a.get(0).getBoundingClientRect());
            a.remove();
            b.translate(-k.left, -k.top);
            c.push(b)
        });
        0 < d.length ? 0 < e.length ? a.insertAfter(e) : a.prependTo(d) : a.detach();
        h.remove();
        return c
    }

    function pC(a, b) {
        var c = $(),
            d = kC(a, ".textPlaceholder"),
            e = $(".canva .textPlaceholder", a);
        d.forEach(function (a, d) {
            var k = e.eq(d),
                l = k.data() || {},
                m = $(['\x3cdiv class\x3d"text"\x3e\x3cdiv class\x3d"inner"\x3e', l.placeholderText || b.format("documentSvgPlaceholderText"), "\x3c/div\x3e\x3c/div\x3e"].join(""));
            m.data("textIndex", d).data("placeholderElement", k).data("placeholderText", l.placeholderText).data("rect", a).data("justification", l.justification || "center").css("text-align", l.justification || "center").data("fontSize", l.fontSize || J.cC).css("font-size", (l.fontSize || J.cC) * J.oi + "%").data("defaultFontSize", l.fontSize || J.cC).data("original-fill", l.fill).data("is-primary-color", l.fill && JA.equals(gh(l.fill))).data("is-secondary-color", l.fill && KA.equals(gh(l.fill))).data("is-tertiary-color", l.fill && LA.equals(gh(l.fill))).data("fill", l.fill).css("color", l.fill || "").data("fontName", l.fontName).data("fontFamily", l.fontFamily).css("font-family", l.fontFamily ? l.fontFamily : "").data("bold", l.bold).data("italic", l.italic).data("lineSpacing", l.lineSpacing || J.NH).css("line-height", l.lineSpacing || J.NH).data("dynamicFontSize", l.dynamicFontSize).data("dynamicHeight", l.dynamicHeight).data("dynamicWidth", l.dynamicWidth);
            0 < k.parents().filter(function () {
                return this.classList.contains("stack")
            }).length || DC(m);
            a = new EC(m, 0, 0);
            m.data("designObject", a);
            c = c.add(m)
        });
        return c
    }

    function sC(a, b) {
        function c(a, b, c) {
            var d = [];
            $(a).find(".textPlaceholder").each(function (e, g) {
                e = c.filter(function () {
                    return $(this).data("placeholderElement").get(0) == g
                });
                if (1 === e.length) {
                    var r = new EC(e.eq(0), b.Y(), b.N());
                    e.data("stackId", a.getAttribute("data-stack-id")).data("designObject", r);
                    d.push(r)
                }
            });
            return d
        }
        var d = $(),
            e = [],
            g = kC(a, ".canva.stack");
        a.find(".canva.stack").each(function (a, k) {
            a = g[a];
            var l = 0 < $(k).parents("#n, #c, #s").length,
                m = 0 < $(k).parents("#w, #c, #e").length,
                n = c(k, a, b);
            a = {
                valign: k.getAttribute("data-valign"),
                box: a.serialize(),
                resizeHorizontal: l,
                resizeVertical: m,
                contents: n
            };
            a = new FC(a);
            e.push(a);
            l = $('\x3cdiv class\x3d"stack"\x3e\x3c/div\x3e');
            m = b.filter(function () {
                return $(this).data("stackId") == k.getAttribute("data-stack-id")
            });
            l.data("sourceElement", k).data("stack", a).append(m);
            d = d.add(l)
        });
        return {
            uw: e,
            y_: d
        }
    }

    function DC(a) {
        var b = a.data("placeholderElement"),
            c = 0 < b.parents("#n, #c, #s").length,
            b = 0 < b.parents("#w, #c, #e").length;
        c || b ? b ? a.data("dynamicHeight", !0) : c && a.data("dynamicWidth", !0) : a.data("dynamicFontSize", !0)
    }

    function lC(a, b) {
        b.forEach(function (b, d) {
            var e = new U(0, 0, J.zQ, J.yQ);
            pm(e, b);
            a.find("image.placeholder").eq(d).attr("x", e.Y()).attr("y", e.N()).attr("width", e.D()).attr("height", e.F())
        })
    }

    function mC(a, b) {
        b.forEach(function (b, d) {
            var e = Math.max(b.D(), b.F()),
                e = new U(0, 0, e, e);
            d = a.find("image.placeholder").eq(d);
            var g = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            om(pm(e, b).scale(Math.max(1, J.gx)), b);
            fm(e) && (g.classList.add("vignette"),
                $(g).appendTo(d.parent()).attr("fill", "none").attr("clip-path", d.attr("clip-path")).attr("x", e.Y()).attr("y", e.N()).attr("width", e.D()).attr("height", e.F()))
        })
    }

    function nC(a, b) {
        b.forEach(function (b, d) {
            d = a.find("image.placeholder").get(d);
            var e = d.cloneNode(!0);
            e.classList.remove("placeholder");
            e.classList.add("broken");
            b = om(b.clone().scale(.33), b);
            $(e).appendTo(d.parentNode).attr("x", b.Y()).attr("y", b.N()).attr("width", b.D()).attr("height", b.F());
            e.setAttributeNS("http://www.w3.org/1999/xlink", "href", "https://static.canva.com/static/images/broken_image_icon.svg")
        })
    }

    function GC(a, b, c, d) {
        if (!c)
            return b.clone().scale(d.scale);
        b = b.clone();
        b.scale(d.scale);
        c = a.parents("g#ne, g#e, g#se");
        0 < c.length && (c = c.data("offsetX") || 0,
            b.translate(d.scale * c, 0));
        c = a.parents("g#n, g#c, g#s");
        0 < c.length && (c = c.data("deltaX") || 0,
            km(b, c * d.scale, 0));
        c = a.parents("g#sw, g#s, g#se");
        0 < c.length && (c = c.data("offsetY") || 0,
            b.translate(0, d.scale * c));
        c = a.parents("g#w, g#c, g#e");
        0 < c.length && (a = c.data("deltaY") || 0,
            km(b, 0, a * d.scale));
        return b
    }
    f = Ko.prototype;
    f.NU = function (a, b) {
        if (this.Fb && this.Fb.ss && 0 !== b) {
            var c = km(this.Ba(), b, 0);
            switch (a.kk.data("justification")) {
                case HC:
                    c.translate(-b / 2, 0);
                    break;
                case IC:
                    c.translate(-b, 0)
            }
            JC(this, c);
            this.Bc()
        }
    };
    f.MU = function (a, b) {
        this.Fb && this.Fb.Bn && 0 !== b && (a = km(this.Ba(), 0, b),
            a.translate(0, -b / 2),
            JC(this, a),
            this.Bc())
    };

    function JC(a, b) {
        var c = a.lb,
            d = a.Bc;
        a.lb = function () {};
        a.Bc = function () {};
        a.yd(b);
        a.Bc = d;
        a.lb = c
    }
    f.XU = function (a) {
        if (this.Fb && (this.Fb.ss || this.Fb.Bn)) {
            var b = !1,
                c = a.Ba(),
                d = this.O().children(".stack").filter(function () {
                    return $(this).data("stack") === a
                }),
                d = GC($(d.data("sourceElement")), a.Oy(), !0, KC(this));
            if (this.Fb.Bn) {
                var e = c.Ha() - d.Ha(),
                    b = b || 0 !== e;
                this.oa(this.F() + e)
            }
            this.Fb.ss && (c = c.kb() - d.kb(),
                b = b || 0 !== c,
                this.za(this.D() + c));
            b && this.mb()
        }
    };

    function vC(a) {
        var b, c = a.Lc;
        b = {
            scale: a.scale,
            deltaX: a.D() / a.scale - c.D(),
            deltaY: a.F() / a.scale - c.F()
        };
        var c = b.scale,
            d = b.deltaX;
        b = b.deltaY;
        a.setSize(a.Lc.D() * c, a.Lc.F() * c);
        d && a.za(c * d + a.D());
        b && a.oa(c * b + a.F())
    }
    f.setSize = function (a, b) {
        var c = this.width;
        LC(a, this.width) && !LC(b, this.height) ? this.oa(b) : LC(b, this.height) && !LC(a, this.width) ? this.za(a) : (Z.prototype.za.call(this, a),
            Z.prototype.oa.call(this, b),
            xC(this),
            yC(this),
            qC(this),
            void 0 !== a && !isNaN(a) && isFinite(a) && this.ib.forEach(function (b) {
                var e = b.Em();
                e.scale(a / c);
                VB(b, e)
            }))
    };
    f.za = function (a) {
        var b;
        Z.prototype.za.call(this, a);
        if (this.Fb && void 0 !== this.width && void 0 !== a && 0 != $("svg", this.O()).length) {
            this.ic.each(function () {
                var a = $(this);
                a.data("dynamicWidth") && xz(a)
            });
            b = MA($("svg", this.O()));
            b.F() == this.Lc.F() ? (a = this.Lc.F() * this.width / this.height,
                b = this.Lc.clone()) : (a = b.F() * this.width / this.height,
                b = b.clone());
            b.za(a);
            b = [b.Y(), b.N(), b.D(), b.F()].join(" ");
            $("svg", this.O()).get(0).setAttribute("viewBox", b);
            b = this.Fb.left + this.Fb.right;
            var c = this.Lc.D() - b,
                d = a - b,
                e = d / c,
                g = -this.Fb.left * (e - 1),
                h = this;
            $("g#n, g#c, g#s", this.O()).each(function () {
                var a = void 0 === $(this).data("scaleY") ? 1 : $(this).data("scaleY"),
                    b = $(this).data("offsetY") || 0;
                "c" == this.id && (b = -h.Fb.top * (a - 1));
                h.Fb.repeat ? ($(".repeat", this).attr("width", d),
                    (a = $("#" + $(this).data("clipId") + " rect").get(0)) && a.setAttribute("width", d)) : $(this).attr("transform", "translate(" + g.toString() + ", " + b.toString() + ") scale(" + e.toString() + ", " + a.toString() + ")");
                $(this).data("deltaX", d - c).data("scaleX", e)
            });
            var k = d - c - 1;
            $("g#ne, g#e, g#se", this.O()).each(function () {
                var a = $(this).data("offsetY") || 0,
                    b = void 0 === $(this).data("scaleY") ? 1 : $(this).data("scaleY");
                "e" == this.id && (a = -h.Fb.top * (b - 1));
                "e" == this.id && h.Fb.repeat ? $(this).attr("transform", "translate(" + k.toString() + ")").data("offsetX", k) : $(this).attr("transform", "translate(" + k.toString() + ", " + a.toString() + ") scale(1, " + b.toString() + ")").data("offsetX", k)
            });
            $("g#nw, g#w, g#sw", this.O()).each(function () {
                var a = $(this).data("offsetY") || 0,
                    b = void 0 === $(this).data("scaleY") ? 1 : $(this).data("scaleY");
                "w" == this.id && (a = -h.Fb.top * (b - 1));
                "w" == this.id && h.Fb.repeat ? $(this).attr("transform", "translate(1, 0)").data("offsetX", 1) : $(this).attr("transform", "translate(1," + a.toString() + ") scale(1," + b.toString() + ")").data("offsetX", 1)
            });
            xC(this);
            yC(this)
        }
    };
    f.oa = function (a) {
        Z.prototype.oa.call(this, a);
        if (this.Fb && void 0 !== this.height && void 0 !== a && 0 != $("svg", this.O()).length) {
            var b;
            b = MA($("svg", this.O()));
            b.D() == this.Lc.D() ? (a = this.Lc.D() * this.height / this.width,
                b = this.Lc.clone()) : (a = b.D() * this.height / this.width,
                b = b.clone());
            b.oa(a);
            $("svg", this.O()).get(0).setAttribute("viewBox", b.Y() + " " + b.N() + " " + b.D() + " " + b.F());
            b = this.Fb.top + this.Fb.bottom;
            var c = this.Lc.F() - b,
                d = a - b,
                e = d / c,
                g = -this.Fb.top * (e - 1),
                h = this;
            $("g#w, g#c, g#e", this.O()).each(function () {
                var a = void 0 === $(this).data("scaleX") ? 1 : $(this).data("scaleX"),
                    b = $(this).data("offsetX") || 0;
                "c" == this.id && (b = -h.Fb.left * (a - 1));
                h.Fb.repeat ? ($(".repeat", this).attr("height", d),
                    (a = $("#" + $(this).data("clipId") + " rect").get(0)) && a.setAttribute("height", d)) : $(this).attr("transform", "translate(" + b.toString() + ", " + g.toString() + ") scale(" + a.toString() + ", " + e.toString() + ")");
                $(this).data("deltaY", d - c).data("scaleY", e)
            });
            var k = d - c - 1;
            $("g#sw, g#s, g#se", this.O()).each(function () {
                var a = $(this).data("offsetX") || 0,
                    b = void 0 === $(this).data("scaleX") ? 1 : $(this).data("scaleX");
                "s" == this.id && (a = -h.Fb.left * (b - 1));
                "s" == this.id && h.Fb.repeat ? $(this).attr("transform", "translate(0, " + k.toString() + ")").data("offsetY", k) : $(this).attr("transform", "translate(" + a.toString() + ", " + k.toString() + ") scale(" + b.toString() + ", 1)").data("offsetY", k)
            });
            $("g#nw, g#n, g#ne", this.O()).each(function () {
                var a = $(this).data("offsetX") || 0,
                    b = void 0 === $(this).data("scaleX") ? 1 : $(this).data("scaleX");
                "n" == this.id && (a = -h.Fb.left * (b - 1));
                "n" == this.id && h.Fb.repeat ? $(this).attr("transform", "translate(0, 1)").data("offsetY", 1) : $(this).attr("transform", "translate(" + a.toString() + ", 1) scale(" + b.toString() + ", 1)").data("offsetY", 1)
            });
            xC(this);
            yC(this)
        }
    };

    function MC(a) {
        return a.Lc ? a.D() / a.Lc.D() : 0
    }

    function KC(a) {
        var b = {
            scale: MC(a),
            deltaX: 0,
            deltaY: 0
        };
        if (!a.Fb)
            return b;
        var c, d = MA($("svg", a.O()));
        a.Lc.D() != d.D() && a.Lc.F() != d.F() ? c = a.width / d.D() : a.Lc.F() == d.F() ? c = a.height / a.Lc.F() : (a.Lc.D(),
            d.D(),
            c = a.width / a.Lc.D());
        b.scale = c;
        b.deltaX = d.D() - a.Lc.D();
        b.deltaY = d.F() - a.Lc.F();
        return b
    }

    function Lo(a) {
        a.ic.each(function () {
            var b = $(this),
                c = b.data("fontSize"),
                d = void 0 !== b.data("stackId"),
                e = KC(a),
                c = c * e.scale;
            b.css("font-size", c * J.oi + "%");
            !d && b.data("placeholderElement") && b.data("rect") && b.data("designObject") && (d = b.data("placeholderElement"),
                c = b.data("rect").clone(),
                c = GC(d, c, !!a.Fb, e),
                e = b.data("designObject"),
                a.stopListening(e, "change:width"),
                a.stopListening(e, "change:height"),
                e.yd(c),
                a.listenTo(e, "change:width", a.NU),
                a.listenTo(e, "change:height", a.MU),
                c.scale(W).round(),
                b.css(c.serialize()))
        })
    }

    function rC(a) {
        return a.ic.filter(function () {
            return 0 == $(this).data("placeholderElement").parents().filter(function () {
                return this.classList.contains("stack")
            }).length
        })
    }

    function qC(a) {
        if (a.ic && 0 != a.ic.length) {
            var b = rC(a),
                c = KC(a);
            b.each(function () {
                $(this).data("designObject").scale(c.scale)
            })
        }
    }

    function xC(a) {
        a.O().find(".canva.tiled").each(function () {
            CC($(this))
        })
    }

    function yC(a) {
        a.uw.forEach(function (b, c) {
            var d = KC(a),
                e = a.O().find(".canva.stack").eq(c),
                e = GC(e, b.Oy(), !!a.Fb, d),
                g = e.clone().scale(W).round();
            a.fP.eq(c).css(g.serialize());
            a.stopListening(b, "change");
            b.yd(e, d.scale);
            b.ta();
            a.listenTo(b, "change", a.XU)
        })
    }
    f.remove = function () {
        this.ic.each(function () {
            var a = $(this);
            a.hasClass("focused") && 0 < a.parents("#overlays").length && fA(a)
        });
        Z.prototype.remove.call(this);
        this.stopListening();
        this.ic.remove();
        this.uw.forEach(function (a) {
            a.remove()
        })
    };
    f.ph = function () {
        Z.prototype.ph.call(this);
        this.Wp()
    };
    f.WN = function () {
        var a = $(this.O()).data("toolbar");
        a && a.remove()
    };
    f.lb = function () {
        Z.prototype.lb.call(this);
        NC(this);
        var a = this.O(),
            b = a.data("selectionBox");
        b && this.Fb && (this.Fb.Bn && b.addClass("verticalScale"),
            this.Fb.ss && b.addClass("horizontalScale"));
        if (a.is(".cropping"))
            this.gy();
        else {
            this.Wp();
            var c = this,
                b = $("#overlays");
            0 !== b.length && (b = b.find(".svg.text.focused"),
                b = b.filter(function () {
                    return c == $(this).data("canvaElement")
                }),
                a = a.data("toolbar")) && (0 < b.length && a.view.$el.filter(".toolbar--font").length && OC(a),
                this.ib.length && (b = -1 < this.Tc(),
                    a.view.GW("imageDelete", "crop", "filter"),
                    a.view.Mf("imageDelete", b),
                    a.view.Mf("crop", b),
                    a.view.Mf("filter", b && PC(this.ib[this.Tc()]))),
                BB(a))
        }
    };
    f.Ub = function () {
        return null !== this.ua && null !== this.va ? new Fm({
            id: this.ua,
            version: this.va
        }) : null
    };
    f.Fv = function () {
        var a = this.Ub();
        if (!a)
            return P.resolve();
        this.contents && this.contents.splice.bind(this.contents, 0, Infinity).apply(null, this.serialize().contents);
        var b = $('\x3cimg class\x3d"placeholder" /\x3e');
        this.O().empty().append(b);
        this.loaded = !1;
        return this.Gl(a.id, a.version)
    };
    f.Jy = function () {
        for (var a = [], b = 0; b < this.Zf(); b++) {
            var c = this.Zo(b);
            c && a.push(c)
        }
        return a
    };
    f.Ju = function () {
        return !0
    };
    f.cq = function (a) {
        OB(PB, this.O().find("img.placeholder"), a)
    };
    f.Gl = function (a, b) {
        this.ua = a;
        this.va = b;
        return QC(this)
    };

    function QC(a) {
        return new P(function (a, c) {
                function d(a, b) {
                    var c = 0 > a.indexOf("?") ? "?" : "\x26",
                        g;
                    g = $.ajax({
                        dataType: "text",
                        url: a
                    });
                    g.done(function (a) {
                        k.EC(a, e)
                    });
                    g.fail(function () {
                        b ? S.trigger("elementLoadingError", k) : d(a + c, !0)
                    })
                }

                function e(a) {
                    if (a) {
                        var b = k;
                        b.O().children("img.placeholder").remove();
                        b.mb()
                    }
                    h(a)
                }

                function g(a) {
                    function b(a) {
                        var c = !!a;
                        k.cq(c && a.src || "");
                        k.O().find("img.placeholder").removeClass("placeholder");
                        k.O().addClass("raster");
                        h(c)
                    }
                    dC(PB, a).then(b).catch(b.bind(null, void 0))
                }

                function h(d) {
                    d ? window.setTimeout(function () {
                        k.mb();
                        k.JA();
                        a()
                    }, 0) : c()
                }
                var k = this,
                    l = Gb.Uc(this.ua, this.va);
                if (l) {
                    var m = l[aC];
                    bC(this.ua, this.va, "print" == bB ? cC : Fg).then(function (a) {
                        var b = a.Aa();
                        a.url.match(/^data:image\/svg\+xml;base64,/i) ? (a = window.atob(b.substr(b.indexOf(",") + 1)),
                            k.EC(a, e)) : a.url.match(/\.svg(\?|$)/) ? (k.cq("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"),
                            d(b)) : (k.cq(m.Aa()),
                            g(b))
                    })
                } else
                    c()
            }
            .bind(a))
    }
    f.zz = function () {
        return this.Hc
    };
    f.bB = function (a) {
        this.Hc = a;
        this.O().toggleClass("unapproved", !a);
        this.lb()
    };

    function RC(a) {
        a = 1 / MC(a) / W;
        return "stroke-width: " + 1 * a + "px; " + ("stroke-dasharray: " + 3 * a + " " + 3 * a + ";")
    }

    function NC(a) {
        var b = a.ng();
        SC(a);
        0 < b.length && (b = b.get(0),
            b.getAttribute("xlink:href") != J.ko && b.classList.add("active"),
            b.parentNode.querySelector(".outline").setAttribute("style", RC(a)))
    }

    function SC(a) {
        TC(a).each(function () {
            this.classList.contains("active") && (this.classList.remove("active"),
                this.parentNode.querySelector(".outline").removeAttribute("style"))
        })
    }
    f.xi = function () {
        SC(this)
    };
    f.As = function (a) {
        this.kp() || (this.ZH = a,
            NC(this),
            (a = this.O().data("toolbar")) && CB(a, this))
    };
    f.al = function (a) {
        return (a = this.ib[a]) ? a.serialize() : null
    };
    f.Zo = function (a) {
        return this.ib[a] || null
    };
    f.fq = function (a, b) {
        function c() {
            d.trigger("placeholderImage:loaded", a)
        }
        var d = this,
            e = this.ib[a];
        b.mediaId ? VB(UC(VC(WC(e, b.mediaId, b.mediaVersion, c), b.origin ? new Dm(b.origin) : null), b.mediaApproved), cm(b.imageBox)).Yv(b.flipOrientation) : this.HA(a)
    };
    f.$V = function () {
        this.HA(this.Tc())
    };
    f.HA = function (a) {
        a === this.Tc() && (this.ZH = null,
            SC(this));
        var b = oC(this, a);
        VB(XC(this.ib[a]), b);
        this.jd[a].remove()
    };

    function oC(a, b) {
        a = a.Gm(b);
        b = new U(0, 0, J.zQ, J.yQ);
        a && pm(b, a).translate(-a.Y(), -a.N());
        return b
    }

    function TC(a) {
        return a.O().find("svg image.placeholder")
    }

    function YC(a) {
        return TC(a).filter(function () {
            return $(this).attr("xlink:href") != J.ko
        }).first()
    }
    f.ng = function () {
        return this.ZH || YC(this)
    };
    f.Tc = function () {
        return TC(this).index(this.ng())
    };
    f.Qy = function (a) {
        return TC(this).eq(a)
    };
    f.Zf = function () {
        return this.rv.length
    };
    f.gy = function () {
        MB.call(this);
        var a = this.O().data("cropControls");
        $(".viewPort", a).css("display", "none");
        if (0 == $("svg", a).length) {
            var b = this.ng().clone().get(0),
                c = this.sd().scale(1 / MC(this)).round(),
                d = document.createElementNS("http://www.w3.org/2000/svg", "svg"),
                e = document.createElementNS("http://www.w3.org/2000/svg", "g"),
                c = [c.Y(), c.N(), c.D(), c.F()].join(" ");
            d.appendChild(e);
            e.appendChild(b);
            d.setAttribute("viewBox", c);
            b = $(d).children("g").get(0);
            b.classList.add("cropLayer");
            b.classList.add("masked");
            a.append(d)
        }
        d = this.sd();
        d.scale(W).round();
        a.find("svg").css("transform", Jo({
            hi: d.Y(),
            ii: d.N()
        })).css("width", d.D()).css("height", d.F())
    };
    f.CO = function (a, b) {
        TB.call(this, a, b);
        b = this.O().data("cropControls");
        a = this.ng();
        b = $("g.cropLayer image", b);
        var c = this.sd(),
            d = this.Xf();
        d.translate(c.Y(), c.N()).scale(1 / MC(this));
        a.attr("x", d.Y()).attr("y", d.N());
        b.attr("x", d.Y()).attr("y", d.N())
    };
    f.El = function (a) {
        UB.call(this, a);
        var b = this.O().data("cropControls"),
            b = $("g.cropLayer image", b),
            c = this.sd();
        a = a.clone();
        a.translate(c.Y(), c.N()).scale(1 / MC(this));
        b.attr("x", a.Y()).attr("y", a.N()).attr("width", a.D()).attr("height", a.F())
    };
    f.Gm = function (a) {
        var b = MC(this);
        a = this.rv[a].clone();
        a.scale(b);
        return a
    };
    f.Xf = function () {
        var a = this.ng(),
            b = this.sd(),
            a = new U(parseFloat(a.attr("x")), parseFloat(a.attr("y")), parseFloat(a.attr("width")), parseFloat(a.attr("height")));
        a.scale(MC(this)).translate(-b.Y(), -b.N());
        return a
    };
    f.Sq = function () {
        var a = this.O();
        a.removeClass("cropping");
        var b = this.ng(),
            a = a.data("cropControls"),
            a = $("g.cropLayer image", a);
        b.attr("x", a.attr("x"));
        b.attr("y", a.attr("y"));
        b.attr("width", a.attr("width"));
        b.attr("height", a.attr("height"))
    };
    f.serialize = function () {
        function a(a, b) {
            a = a === nA ? nA : a.Ca();
            return {
                index: b,
                color: a
            }
        }
        var b = Z.prototype.serialize.call(this);
        b.type = "svg";
        b.mediaId = this.ua;
        b.mediaVersion = this.va;
        this.Hc || (b.mediaApproved = !1);
        0 !== MC(this) && (b.scale = KC(this).scale);
        var c = this,
            d = [],
            e;
        this.loaded ? (this.ib.forEach(function (a, b) {
                if (PC(a) || !a.Hc)
                    a = a.serialize(),
                    (b = gC(c.jd[b])) && (a.filter = b),
                    d.push(a)
            }),
            this.ic && this.ic.each(function (a) {
                a = c.gc(a);
                a.type = "text";
                d.push(a)
            }),
            0 < d.length && (b.contents = d),
            e = this.ob().map(a),
            0 < e.length && (b.fillColors = e)) : (this.scale && (b.scale = this.scale),
            this.contents && (b.contents = this.contents.slice(0)),
            this.wm && (b.fillColors = this.wm.map(function (b, c) {
                return a(b.color, c)
            })));
        this.dk && (b.svgMetadata = this.dk);
        return b
    };

    function uC(a, b) {
        function c(a, b) {
            var c, e, g, h, k, y, q, x;
            a.find("g[id\x3dc]")[0] ? (c = d("n"),
                e = d("s"),
                g = d("w"),
                h = d("e"),
                k = d("nw"),
                y = d("ne"),
                q = d("sw"),
                x = d("se")) : a.find("g[id\x3dn]")[0] ? (g = d("nw"),
                h = d("ne"),
                c = e = k = y = q = x = {
                    width: 0,
                    height: 0
                }) : a.find("g[id\x3dw]")[0] && (c = d("nw"),
                e = d("sw"),
                g = h = k = y = q = x = {
                    width: 0,
                    height: 0
                });
            a = Math.max(g.width, k.width, q.width);
            c = Math.max(c.height, y.height, k.height);
            return {
                x: b.x + a,
                y: b.y + c,
                width: b.width - a - Math.max(h.width, y.width, x.width),
                height: b.height - c - Math.max(e.height, x.height, q.height)
            }
        }

        function d(a) {
            return (a = b.find("g[id\x3d" + a + "]")[0]) ? a.getBBox() : {
                x: 0,
                y: 0,
                width: 0,
                height: 0
            }
        }

        function e(a) {
            return {
                left: a.x,
                top: a.y,
                width: a.width,
                height: a.height
            }
        }
        Ba(1 === b.closest("#limbo").length, "svg must be in limbo element.");
        try {
            var g = a.Fb,
                h = {},
                k = {
                    x: a.Lc.Y(),
                    y: a.Lc.N(),
                    width: a.Lc.D(),
                    height: a.Lc.F()
                };
            h.viewBox = e(k);
            h.textHolderBoxes = b.find(".textPlaceholder").toArray().map(function (a) {
                return e(a.getBBox())
            });
            h.photoHolderBoxes = b.find("image.placeholder").toArray().map(function (a) {
                a = (a = a.getAttribute("clip-path")) && a.match(/url\(["']?(.*?)["']?\)/);
                Da(!!a, "SVG image placeholder's clip-path attribute is missing or invalid.");
                var c = b.find(a[1]);
                Da(1 === c.length, "SVG image placeholder's clipPath element is missing or ambiguous.");
                a = SVGClipPathElement.prototype.getBBox ? c[0].getBBox() : null;
                if (null == a || 0 === a.width && 0 === a.height && null != c[0].innerHTML)
                    c = $("\x3csvg\x3e\x3cg\x3e\x3c/g\x3e\x3c/svg\x3e").children().html(c.html()).insertAfter(c),
                    a = c[0].getBBox(),
                    c.remove();
                return e(a)
            });
            g && (h.centerBox = e(c(b, k)),
                h.tile = !!g.repeat);
            return h
        } catch (l) {
            return ZC().log("Failed to serialize SVG metadata.", {
                    error: l
                }),
                null
        }
    }
    f.ze = function () {
        return this.ic ? this.ic.filter(".focused") : $()
    };
    f.vf = function () {
        return 0 < this.ze().length
    };
    f.zu = function () {
        return 0 < this.ng().length
    };
    f.Hi = function () {
        function a(a, c) {
            mz($(c)).tf.forEach(b)
        }

        function b(a) {
            (a = gh(a)) && Fo(c, a)
        }
        if (this.pe)
            return this.pe;
        var c = new Co;
        this.ic && this.ic.each(a);
        this.ob().forEach(function (a) {
            a instanceof Om && Fo(c, a)
        });
        return this.pe = c
    };
    f.vE = function () {
        return this.ic.length
    };
    f.qb = function (a) {
        return this.ic ? this.ic.eq(a) : $()
    };
    f.Ib = function () {
        return this.ic.index(this.ze())
    };
    f.gc = function (a) {
        function b(a, b, c) {
            var d = Math.PI / 2,
                e = Math.PI,
                g = Math.PI + Math.PI / 2;
            if (0 <= c && c < d)
                return b *= Math.sin(c), {
                    left: a.left + b,
                    top: a.top
                };
            if (c >= d && c < e)
                return b *= Math.sin(c - d), {
                    left: a.right,
                    top: a.top + b
                };
            if (c >= e && c < g)
                return b *= Math.sin(c - e), {
                    left: a.right - b,
                    top: a.bottom
                };
            if (c >= g)
                return b *= Math.sin(c - g), {
                    left: a.left,
                    top: a.bottom - b
                };
            throw Error("Invalid radians value " + c);
        }

        function c(a, b, c) {
            var d = a.left - b.left;
            a = a.top - b.top;
            var e = Math.sin(c);
            c = Math.cos(c);
            return {
                left: d * c - a * e + b.left,
                top: d * e + a * c + b.top
            }
        }
        if (0 > a || a >= this.ic.length)
            throw Error("SvgElement.getTextAtIndex - invalid index: " + a.toString());
        var d = this.ic.eq(a);
        a = this.Vv(a);
        var e = d.data("designObject");
        e && (a.preferredFontSize = e.eG);
        var g = d.children(".inner");
        a.width = g.prop("clientWidth");
        a.height = g.prop("clientHeight");
        e = function (a, d) {
            var e = a[0].getBoundingClientRect(),
                m = g[0].getBoundingClientRect();
            if (0 === d)
                return {
                    left: (m.left - e.left) / W,
                    top: (m.top - e.top) / W
                };
            d = pn(0 <= d ? d : 360 + d);
            var n = {
                left: e.left + e.width / 2,
                top: e.top + e.height / 2
            };
            a = Number(a.prop("clientHeight"));
            e = b(e, a, d);
            e = c(e, n, -d);
            a = Number(g.prop("clientHeight")) * W;
            m = b(m, a, d);
            m = c(m, n, -d);
            return {
                left: (m.left - e.left) / W,
                top: (m.top - e.top) / W
            }
        }(this.O(), this.eb() % 360);
        a.left = e.left;
        a.top = e.top;
        d = Number(d.data("lineSpacing"));
        a.lineHeight = 100 * (isNaN(d) ? J.NH : d);
        return a
    };
    f.Wi = function (a, b, c, d) {
        if (0 <= a && this.ic && a < this.ic.length) {
            var e = this.ic.eq(a),
                g = e.children(".inner");
            g.html(b.html);
            var h = ("true" == g.attr("contentEditable")).toString();
            g.attr("contentEditable", "true");
            for (var k = window.getSelection(), l = [], m = 0; m < k.rangeCount; m++)
                l.push(k.getRangeAt(m));
            m = g.get(0) || null;
            document.body.contains(m) && k.selectAllChildren(m);
            this.Zj(a, b.fontFamily, c, d);
            this.aq(a, b.fontMedia && Gm(b.fontMedia));
            this.setColor(a, gh(b.color));
            k.removeAllRanges();
            l.forEach(function (a) {
                try {
                    k.addRange(a)
                } catch (b) {}
            });
            this.qe(a, b.fontSize * KC(this).scale);
            this.Jn(a, b.bold);
            this.Ln(a, b.italic);
            this.ai(a, b.justification);
            this.bw(a, b.list);
            this.hq(a, b.textTransform);
            a = e.data("designObject");
            void 0 !== b.preferredFontSize && (a.eG = b.preferredFontSize);
            g.attr("contentEditable", h);
            m && m.hasAttribute("_moz_abspos") && m.setAttribute("_moz_abspos", "transparent");
            xz(e)
        }
    };
    f.dK = function () {};
    f.pD = function () {};
    f.xz = function () {};
    f.qe = function (a, b) {
        var c = this.qb(a);
        if (void 0 === b)
            c.removeData("fontSize").css("font-size", "");
        else {
            var d = KC(this).scale,
                e = c.data("fontSize"),
                g = b / d;
            c.data("fontSize", b / d).css("font-size", b * J.oi + "%");
            if (e !== g) {
                d = g / e;
                if (.5 > d || 2 < d)
                    this.ps(a),
                    this.Iv(a),
                    xz(c);
                this.trigger("change:fontSize", this, c, b)
            }
        }
    };
    f.dd = function (a) {
        a = Jz.call(this, a);
        var b = KC(this).scale;
        return a * b
    };
    f.$A = function (a) {
        var b = this.ze().data("designObject"),
            c = KC(this).scale;
        b.eG = a / c;
        Iz.apply(this, arguments)
    };
    f.ob = function () {
        var a = $C(this);
        return _.sortBy(a, function (a, c) {
            return parseInt(c.match(/\d+/)[0], 10)
        })
    };
    f.Jd = function () {
        return this.ob().length
    };

    function $C(a) {
        var b = {};
        a.O().children("svg").find(".color").each(function () {
            for (var a, d = 0; d < this.classList.length; d++) {
                var e = this.classList.item(d);
                if (e.match(/^color-\d+$/)) {
                    a = e;
                    break
                }
            }
            a && (d = mA(this.getAttribute("fill"))) && (b[a] = d)
        });
        return b
    }
    f.Jx = function () {
        var a = this.O().children("svg").get(0);
        return !!a && a.classList.contains("baseColors")
    };
    f.JA = function () {
        function a(a, b, c) {
            return bn(gh(a), b, c)
        }
        var b = this.Yl,
            c = this.wx;
        null !== this.Yl && this.Jx() && (this.O().children("svg").find(".primaryColor").each(function () {
                this.setAttribute("fill", a(this.getAttribute("data-color"), b.bs, c).Ca())
            }),
            this.O().children("svg").find(".secondaryColor").each(function () {
                this.setAttribute("fill", a(this.getAttribute("data-color"), b.ys, c).Ca())
            }),
            this.O().children("svg").find(".tertiaryColor").each(function () {
                this.setAttribute("fill", a(this.getAttribute("data-color"), b.Ps, c).Ca())
            }),
            this.ic.each(function (d, e) {
                    var g = !!jQuery.data(e, "is-primary-color"),
                        h = !!jQuery.data(e, "is-secondary-color"),
                        k = !!jQuery.data(e, "is-tertiary-color");
                    e = jQuery.data(e, "original-fill");
                    g ? this.setColor(d, a(e, b.bs, c)) : h ? this.setColor(d, a(e, b.ys, c)) : k && this.setColor(d, a(e, b.Ps, c))
                }
                .bind(this)))
    };
    f.ce = function (a, b) {
        var c = $C(this);
        a = _.sortBy(_.keys(c), function (a) {
            return parseInt(a.match(/\d+/)[0], 10)
        })[a];
        this.O().children("svg").find("." + a).each(function () {
            var a = this.getAttribute("data-color");
            this.setAttribute("fill", oA(b) || a)
        });
        this.we()
    };

    function up(a, b) {
        function c() {
            g.Wi(0, a, d, !0);
            g.Vn = $.extend(!0, {}, a.stylesOverriden);
            g.ls = !1
        }

        function d(a) {
            n = !0;
            r = a;
            m && e()
        }

        function e() {
            var c = p && r;
            g.loaded = !0;
            h.removeClass("textElementLoading");
            if (c)
                g.ls = !0,
                g.mb(),
                g.Gd && a.height ? g.oa(a.height) : g.oa(),
                uB(g),
                mB(g),
                g.Bc(),
                S.trigger("elementLoaded", g),
                S.trigger("elementLoaded:text", g);
            else {
                var d = g;
                Z.prototype.oa.call(d, a.height);
                Z.prototype.za.call(d, a.width);
                vz(d.O(), a.lineLengths || []);
                d.vy = !0;
                d.O().toggleClass("failed", d.vy);
                d.ls = !0;
                S.trigger("elementLoadingError", g)
            }
            b && b(g, c)
        }
        Z.call(this, a);
        var g = this,
            h = this.O(),
            k = lc(this.u);
        h.addClass("text").addClass("textElementLoading").data("placeholderText", a.placeholderText || k.nh()).append('\x3cdiv class\x3d"inner"\x3e' + k.nh() + "\x3c/div\x3e");
        this.style = a.style;
        this.padding = a.padding;
        this.border = a.border;
        this.fF = !0;
        !1 === a.lockedWidth && (this.fF = !1);
        k = [];
        a.fontMedia && k.push(Gm(a.fontMedia));
        a.htmlFontMedia && (k = k.concat(a.htmlFontMedia.map(Gm)));
        a.verticalAlignment && (this.te = a.verticalAlignment);
        var l = zz(a.html);
        a.fontFamily && l.push(a.fontFamily);
        var m = !1,
            n = !1,
            p = !1,
            r = !1;
        this.Vn = {};
        0 < k.length ? aD(Jb, k, c) : c();
        this.Gd = this.loaded = !1;
        this.z4 = a;
        wC(Jb, k, l, function (a) {
            m = !0;
            p = a;
            n && e()
        });
        this.XL = !1
    }
    up.prototype = Object.create(Z.prototype);
    f = up.prototype;
    f.constructor = up;
    f.qo = bA;
    f.mD = hA;
    f.dd = Jz;
    f.ou = Kz;
    f.qE = $z;
    f.pr = Zz;
    f.rr = Yz;
    f.$k = Uz;
    f.pE = Rz;
    f.Iv = Xz;
    f.ps = aA;
    f.HG = gA;
    f.Vv = iA;
    f.Jn = Nz;
    f.setColor = Mz;
    f.LG = Wz;
    f.aq = Cz;
    f.aB = Dz;
    f.Zj = Ez;
    f.qe = Hz;
    f.$A = Iz;
    f.Ln = Oz;
    f.ai = Lz;
    f.Zv = cA;
    f.MG = dA;
    f.$v = Vz;
    f.aw = Tz;
    f.bw = Pz;
    f.hq = Sz;
    f.yw = eA;
    f.Iu = function () {
        return !this.loaded
    };
    f.vE = function () {
        return 1
    };
    f.wo = function () {
        return this.loaded && !this.vx && !this.vy
    };
    f.kt = function () {
        return !0
    };
    f.JC = function () {
        return this.loaded && !this.vy
    };
    f.ZW = function () {
        return !0
    };
    f.nP = function () {
        return !0
    };
    f.yz = function () {
        return this.fF
    };
    f.Ij = function () {
        this.fF = !0
    };
    f.EP = function () {
        this.fF = !1
    };

    function bD(a) {
        if (!a.wq) {
            var b = a.qb(0),
                c = window.getSelection(),
                d = c.focusNode,
                c = c.toString();
            if (d && d.parentNode && d.parentNode.classList.contains("char"))
                (b = d && d.parentNode && d.parentNode.nextSibling) && b.classList.contains("fauxCaret") && (b = b.nextSibling),
                b && b.classList.contains("char") && (c = d.textContent + b.textContent);
            else if (1 === c.length && 8203 === c.charCodeAt(0) && (c = ""),
                0 === c.length) {
                d = az(b);
                a: {
                    c = window.getSelection();
                    if (0 < c.rangeCount && (c = c.getRangeAt(0).cloneRange(),
                            c.collapse(!0),
                            b = b.get(0))) {
                        c.setEnd(b, 1);
                        b = c.toString().slice(0, 1);
                        8203 === b.charCodeAt(0) && (b = c.toString().slice(1, 2));
                        break a
                    }
                    b = ""
                }
                c = d + b
            } else
                1 === c.length && (c = az(b) + c);
            2 === c.length && (a.wq = c)
        }
        a.wq && (a.wq = a.wq.replace(/\s/gi, ""),
            2 !== a.wq.length && (a.wq = void 0));
        return a.wq
    }

    function cD(a) {
        var b = bD(a);
        return b ? a.qE(0, b) : 0
    }
    f.xW = function (a) {
        var b = bD(this);
        b && (this.Zv(0, a, b),
            this.qo(0))
    };
    f.xT = function () {
        var a = bD(this);
        if (a) {
            var b = cD(this);
            this.Zv(0, Math.min(b + 10, 200), a);
            this.qo(0)
        }
    };
    f.NR = function () {
        var a = bD(this);
        if (a) {
            var b = cD(this);
            this.Zv(0, Math.max(b - 10, -200), a);
            this.qo(0)
        }
    };
    f.Zj = function (a, b, c, d) {
        this.Vn.fontFamily = !0;
        Ez.call(this, a, b, c, d)
    };
    f.qe = function (a, b, c) {
        this.Vn.fontSize = !0;
        Hz.call(this, a, b, c)
    };
    f.Jn = function (a, b) {
        this.Vn.bold = !0;
        Nz.call(this, a, b)
    };
    f.Ln = function (a, b) {
        this.Vn.italic = !0;
        Oz.call(this, a, b)
    };
    f.ai = function (a, b) {
        this.Vn.justification = !0;
        Lz.call(this, a, b)
    };
    f.setColor = function (a, b) {
        this.Vn.color = !0;
        Mz.call(this, a, b);
        this.we()
    };
    f.za = function (a) {
        var b = void 0 !== a && a !== this.width;
        Z.prototype.za.call(this, a);
        a = this.D();
        VA(this).css("width", Math.round(a));
        b && !this.XL && xz(this.O())
    };
    f.oa = function (a) {
        this.Gd ? a && Z.prototype.oa.call(this, a) : (a = VA(this).prop("scrollHeight") || 0,
            Z.prototype.oa.call(this, a))
    };
    f.setSize = function (a, b, c) {
        this.XL = !!c;
        this.za(a);
        this.oa(b);
        this.XL = !1
    };
    f.Bc = function () {
        var a = VA(this),
            b = W,
            c = .5 * (J.dt - this.$k(0)) / 100 * b;
        a.css("transform", "translateY(" + c + "em) scale(" + b + ")").css("transform-origin", "top left").css("width", this.D());
        Z.prototype.Bc.apply(this, arguments)
    };
    f.ze = function () {
        return this.bb
    };
    f.vf = function () {
        return 0 < this.bb.length
    };
    f.Hi = function () {
        if (this.pe)
            return this.pe;
        var a = new Co;
        mz(this.bb).tf.forEach(function (b) {
            (b = gh(b)) && Fo(a, b)
        });
        return this.pe = a
    };
    f.qb = function (a) {
        return 0 !== a ? $() : this.bb
    };
    f.Ib = function () {
        return 0
    };
    f.gc = function (a) {
        a = this.Vv(a);
        a.height = this.F();
        a.width = this.D();
        this.Gd && (a.fontSizeAuto = this.Gd);
        return a
    };
    f.wr = function () {
        return [gh(this.gc(0).color)]
    };

    function dD(a) {
        return mz(a.O()).tf.filter(function (a, c, d) {
            return d.indexOf(a) === c
        })
    }
    f.Wi = function (a, b, c, d) {
        var e = this,
            g = this.O(),
            h = Array.isArray(b.htmlFontMedia) ? b.htmlFontMedia.map(Gm) : [],
            k = this.mD(b.kerning),
            l = b.lineLengths;
        this.Gd = !1;
        VA(this).html(b.html);
        this.aB(a, h);
        this.aq(a, b.fontMedia && Gm(b.fontMedia));
        this.qe(a, b.fontSize);
        this.Jn(a, b.bold);
        this.Ln(a, b.italic);
        this.ai(a, b.justification);
        this.$v(a, b.letterSpacing);
        this.aw(a, b.lineHeight);
        this.bw(a, b.list);
        this.hq(a, b.textTransform);
        this.setColor(a, gh(b.color));
        l && g.data("cachedLineLengths", l);
        this.Vn = $.extend(!0, {}, b.stylesOverriden);
        this.we();
        this.Zj(a, b.fontFamily, function (b) {
            b && (k && e.qo(a),
                l && vz(g, l));
            c && c(b)
        }, d);
        k && this.MG(a, k);
        b.fontSizeAuto && eD(this)
    };
    f.dK = function () {
        eD(this)
    };
    f.pD = function () {
        this.Gd = !1
    };
    f.xz = function () {
        return this.Gd
    };
    f.ne = function () {
        return !0
    };
    f.cL = function () {
        return !0
    };

    function fD(a, b) {
        a.border = b ? {
            width: b
        } : {
            width: 0
        };
        a.mb()
    }
    f.Nh = function () {
        return this.border && this.border.width || 0
    };
    f.fL = function () {
        return !0
    };
    f.dB = function (a) {
        this.padding = a ? a : 0;
        this.mb()
    };
    f.sr = function () {
        return this.padding
    };
    f.mb = function () {
        Z.prototype.mb.call(this);
        var a = this.O(),
            b = "#000000",
            c = mz(a).tf;
        0 < c.length && (b = c[c.length - 1]);
        this.Nh() ? a.css("border", this.Nh() / 1E3 * W + "em solid " + b) : a.css("border", "none");
        a.css("padding", this.padding * W + "px")
    };
    f.pu = function () {
        var a = J.OH;
        Ib.ba.get(gg) && (a = a.slice(0),
            a.push(gD));
        return a
    };
    f.remove = function () {
        var a = this.O();
        0 < a.parents("#overlays").length && fA(a);
        Z.prototype.remove.call(this)
    };
    f.lb = function () {
        Z.prototype.lb.call(this);
        var a = this.O(),
            b = a.data("toolbar"),
            a = a.data("selectionBox");
        b && (a && (this.Gd ? (a.addClass("autoSize"),
                a.removeClass("horizontalScale")) : (a.addClass("horizontalScale"),
                a.removeClass("autoSize"))),
            OC(b),
            BB(b))
    };
    f.ph = function () {
        Z.prototype.ph.call(this);
        var a = this.O(),
            b = a.data("toolbar");
        b && b.remove();
        a.removeData("toolbar")
    };

    function eD(a) {
        a.Gd = !0;
        a.Ij();
        a.lb()
    }
    f.serialize = function () {
        var a = Z.prototype.serialize.call(this);
        if (!this.loaded) {
            var b = this.z4;
            Object.keys(a).forEach(function (c) {
                b[c] = a[c]
            });
            return b
        }
        var c = this.gc(0);
        a.type = "text";
        a.style = this.style;
        a.border = this.border;
        a.padding = this.padding;
        a.stylesOverriden = $.extend(!0, {}, this.Vn);
        for (var d in c)
            a[d] = c[d];
        this.te && (a.verticalAlignment = this.te);
        delete a.fontSizeAuto;
        return a
    };

    function eB(a) {
        function b() {
            var a = {
                type: "columns",
                children: [{
                    type: "item"
                }, {
                    type: "item"
                }]
            };
            return [a, a]
        }
        void 0 === a && (a = {});
        a.width = a.width || J.qQ;
        a.height = a.height || J.qQ;
        Z.call(this, a);
        var c = parseInt(a.spacing, 10);
        this.spacing = isNaN(c) || !isFinite(c) || 0 > c ? J.dC : c;
        this.items = a.items || b();
        this.gm = !0;
        c = this.O();
        c.addClass("grid").css("width", this.width * W).css("height", this.height * W);
        hD(this, iD(this.items));
        a = a.contents || [];
        this.ib = ZA(a, this.Zf(), c);
        Object.freeze(this.ib);
        this.jd = XA(a, this.ib);
        Object.freeze(this.jd);
        this.load().bind(this).then(function () {
            S.trigger("elementLoaded", this);
            S.trigger("elementLoaded:grid", this)
        })
    }
    eB.prototype = Object.create(Z.prototype);
    f = eB.prototype;
    f.constructor = eB;
    f.kp = KB;
    f.Xf = function () {
        return -1 === this.Tc() ? null : this.ib[this.Tc()].Em()
    };
    f.gy = MB;
    f.CO = TB;
    f.El = UB;
    f.Wp = WB;
    f.Sq = XB;
    f.sd = YB;
    f.gL = ZB;
    f.mE = LB;
    f.lp = function () {
        return !0
    };
    f.bq = function (a) {
        Z.prototype.bq.call(this, a);
        this.O().toggleClass("fullPageGrid", this.vg())
    };
    f.setSize = function (a, b, c) {
        Z.prototype.setSize.call(this, a, b, c);
        this.O().toggleClass("fullPageGrid", this.vg())
    };
    f.Bc = function () {
        Z.prototype.Bc.call(this);
        this.O().toggleClass("fullPageGrid", this.vg())
    };
    f.Fv = function () {
        this.ib.forEach(function (a) {
            a.FE = !1
        });
        return this.load()
    };
    f.load = function () {
        return new P(function (a) {
                WA(this, a)
            }
            .bind(this))
    };
    f.Hi = function () {
        if (this.pe)
            return this.pe;
        var a = new Co;
        this.ib.forEach(function (b) {
            (b = b.ah()) && Fo(a, b)
        });
        return this.pe = a
    };
    f.ob = function () {
        return this.ib.map(function (a) {
            return a.ah()
        })
    };
    f.Jd = function () {
        return this.ob().length
    };
    f.ce = function (a, b) {
        var c = this.ib[a] || this.ib[this.ib.length - 1];
        this.fq(a, null);
        c.Wv(b);
        this.lb();
        this.we()
    };

    function iD(a) {
        function b(a) {
            var d = a.type || "rows";
            a = a.children || a;
            for (var e = $(), g = 0, h = 0; h < a.length; h++) {
                var k = a[h],
                    l = $('\x3cdiv class\x3d"' + k.type + '"\x3e\x3c/div\x3e');
                "item" == k.type && $('\x3cdiv class\x3d"content"\x3e\x3cdiv class\x3d"placeholder" /\x3e\x3c/div\x3e').appendTo(l);
                if ("rows" == d) {
                    var m = 1 / (a.length - h) * (100 - g),
                        m = k.height || m,
                        n = g,
                        m = ~~(10 * m) / 10;
                    l.css("top", n + "%").css("height", m + "%").attr("data-top", n / 100).attr("data-height", m / 100)
                } else
                    m = 1 / (a.length - h) * (100 - g),
                    m = k.width || m,
                    n = g,
                    m = ~~(10 * m) / 10,
                    l.css("left", n + "%").css("width", m + "%").attr("data-left", n / 100).attr("data-width", m / 100);
                g += m;
                void 0 !== k.children && l.append(b(k));
                e = e.add(l)
            }
            return e
        }
        return b([{
            type: "rows",
            children: a
        }])
    }
    f.gp = function () {
        return this.jd && 0 < this.jd.length
    };
    f.Id = function () {
        var a = this.Tc();
        return -1 != a && PC(this.ib[a]) ? -1 < a ? this.jd[a] : null : null
    };
    f.Fy = function () {
        var a = this.Tc();
        return -1 !== a && PC(this.ib[a]) ? a : -1
    };
    f.So = function (a) {
        return this.jd[a]
    };
    f.pp = function () {
        return this.Id() && this.Id().Cr()
    };
    f.PK = function () {
        return !1
    };
    f.ah = function () {
        return 1 === this.Jd() ? gh(this.ob()[0]) : null
    };
    f.qp = function () {
        return null !== this.ah()
    };
    f.vd = function () {
        var a = 1 === this.ib.length && null === this.ib[0].Ub();
        return this.qp() || a
    };
    f.vg = function () {
        return !(!this.page || !qm(this.Ba(), this.page.Ba()))
    };
    f.yq = function () {
        return !0
    };
    f.zu = function () {
        return 0 < this.ng().length
    };
    f.nr = function () {
        var a = this.HD.slice();
        0 < this.Zf() && a.push("deletePlaceholder");
        return a
    };
    f.Po = function () {
        this.Id() && this.Id().Po()
    };
    f.Oo = function () {
        this.Id() && this.Id().Oo()
    };
    f.uG = function () {
        if (this.Id() && this.Id().Cr()) {
            var a = this.O().data("toolbar");
            a && a.view.Wt("filter")
        }
    };
    f.pG = function (a, b) {
        eC(this.jd[a], b)
    };
    f.$V = function () {
        this.HA(this.Tc());
        this.O().find(".active").removeClass("active")
    };

    function Cm(a, b, c, d) {
        if (d)
            return new U(0, 0, a, b);
        c *= J.wQ;
        return new U(-c, -c, a + 2 * c, b + 2 * c)
    }

    function hD(a, b) {
        var c = a.O();
        c.empty();
        $('\x3cdiv class\x3d"inner"\x3e\x3c/div\x3e').append(b).appendTo(c);
        jD(a)
    }
    f.mb = function () {
        Z.prototype.mb.call(this);
        jD(this);
        kD(this)
    };

    function jD(a) {
        var b = Math.round(Math.round(a.spacing / 2) * W);
        a = VA(a);
        a.css("left", b).css("right", b).css("top", b).css("bottom", b);
        $(".item \x3e .content", a).css("left", b).css("right", b).css("top", b).css("bottom", b)
    }

    function kD(a) {
        a.ib.forEach(function (a) {
            a.update()
        })
    }
    f.lb = function () {
        function a() {
            if (lD(H, c.ha())) {
                var a = c.ib[c.Tc()];
                if (a)
                    if (PC(a)) {
                        e.view.Wt("crop", "filter", "flip", "imageDelete");
                        e.view.GW("crop", "filter", "flip");
                        var d;
                        d = a.bb.find("img.placeholder");
                        a = a.bb.find("canvas");
                        d = 1 == d.length && d.attr("src") ? "" + d.attr("src") : 1 == a.length ? a.get(0).toDataURL() : J.ko;
                        b(d)
                    } else
                        e.view.wJ("crop", "filter", "flip", "imageDelete"),
                        e.view.JE("crop", "filter", "flip"),
                        b(J.ko),
                        (d = c.ob()[c.Tc()]) && e.view.setColor([d.Ca()], g);
                else
                    b(J.ko),
                    e.view.wJ("crop", "filter", "flip", "imageDelete"),
                    e.view.JE("crop", "filter", "flip")
            }
        }

        function b(a) {
            e.view.setColor(["url(" + a + ")"], g)
        }
        Z.prototype.lb.call(this);
        var c = this,
            d = this.O(),
            e = d.data("toolbar"),
            g = pe();
        d.is(".cropping") ? this.gy() : (this.Wp(),
            e && a())
    };
    f.ph = function () {
        Z.prototype.ph.call(this);
        this.Wp()
    };
    f.gq = function (a) {
        this.spacing = a;
        this.mb()
    };
    f.remove = function () {
        Z.prototype.remove.call(this);
        this.jd.forEach(function (a) {
            a.remove()
        })
    };
    f.le = function () {
        return this.spacing
    };
    f.ez = function () {
        return !0
    };
    f.serialize = function () {
        var a = Z.prototype.serialize.call(this);
        a.type = "grid";
        a.items = this.items;
        a.spacing = this.spacing;
        var b = this,
            c = [];
        this.ib.forEach(function (a, e) {
            a.isEmpty() || (a = a.serialize(),
                a.filter = gC(b.jd[e]),
                c.push(a))
        });
        a.contents = c;
        return a
    };
    f.As = function (a) {
        if (!this.kp()) {
            S.trigger("hideContextualControlsRequested");
            var b = $(".item .placeholder.active, div.content.active", this.O());
            0 < b.length && b.removeClass("active");
            a.parent("div.content").andSelf().addClass("active");
            this.lb()
        }
    };
    f.ng = function () {
        var a = this.O().find(".item .placeholder"),
            b = a.filter(".active");
        if (0 !== b.length)
            return b.first();
        b = a.filter("[src]");
        return 0 !== b.length ? b.first() : a.first()
    };
    f.Tc = function () {
        var a = this.O().find(".item .content.active");
        0 === a.length && (a = this.O().find(".item.filled .content"));
        return this.O().find(".item .content").index(a)
    };
    f.Qy = function (a) {
        return this.O().find(".item .placeholder").eq(a)
    };
    f.Zf = function () {
        return this.O().find(".item .placeholder").length
    };
    f.Gm = function (a) {
        a = this.Qy(a).parent("div.content");
        var b = new U(0, 0, this.width, this.height);
        a = a.parentsUntil(".inner");
        b.translate(this.spacing, this.spacing);
        km(b, -this.spacing, -this.spacing);
        a.toArray().reverse().forEach(function (a) {
            a = $(a);
            var d = parseFloat(a.data("left")) || 0,
                e = parseFloat(a.data("top")) || 0,
                g = parseFloat(a.data("width")) || 1;
            a = parseFloat(a.data("height")) || 1;
            b.translate(d * b.D(), e * b.F()).za(b.D() * g).oa(b.F() * a)
        });
        b.za(b.D() - this.spacing).oa(b.F() - this.spacing);
        return b
    };
    f.al = function (a) {
        return (a = this.ib[a]) ? a.serialize() : null
    };
    f.Zo = function (a) {
        return this.ib[a] || null
    };
    f.fq = function (a, b) {
        function c() {
            d.trigger("placeholderImage:loaded", a)
        }
        var d = this,
            e = this.ib[a];
        e && (b && b.mediaId ? VB(UC(VC(WC(mD(e), b.mediaId, b.mediaVersion, c), b.origin ? new Dm(b.origin) : null), b.mediaApproved), cm(b.imageBox)).Yv(b.flipOrientation) : b && b.backgroundColor ? e.Wv(gh(b.backgroundColor)) : (e.clear(),
            this.jd[a].remove(),
            nD(this.jd[a], new oD)))
    };
    f.HA = function (a) {
        this.fq(a, null)
    };
    f.fz = function () {
        return !0
    };
    f.Vy = function () {
        return {
            imageBoxes: this.ib.map(function (a) {
                return a.isEmpty() ? null : a.Em().serialize()
            })
        }
    };
    f.yW = function (a) {
        a = a.imageBoxes;
        for (var b = 0; b < this.ib.length; b++) {
            var c = this.ib[b],
                d = a[b];
            d && !c.isEmpty() && VB(c, cm(d))
        }
    };
    f.Jy = function () {
        for (var a = [], b = 0; b < this.Zf(); b++) {
            var c = this.Zo(b);
            c && a.push(c)
        }
        return a
    };
    f.Ju = function () {
        return !0
    };

    function pD(a) {
        this.a = a
    }

    function qD() {
        var a = document.createElement("a");
        return new pD(a)
    }

    function rD(a, b) {
        a = a.a;
        a.href = b;
        return "data:" == a.protocol || "blob:" == a.protocol || ":" == a.protocol || "" == a.hostname ? !1 : a.protocol != window.location.protocol || a.hostname != window.location.hostname || a.port != window.location.port
    }

    function OB(a, b, c) {
        var d = b instanceof jQuery ? b : $(b);
        return new P(function (e, g) {
            function h() {
                d.attr(p) === c && (d.one("error", k),
                    d.attr(p, c + n))
            }

            function k() {
                m();
                g(Error("Could not load image from src: " + c))
            }

            function l() {
                m();
                e(b)
            }

            function m() {
                d.off("error", h);
                d.off("error", k);
                d.off("load", l)
            }
            var n = 0 > c.indexOf("?") ? "?" : "\x26",
                p = null;
            d && d.length && (p = "image" === d.get(0).tagName ? "xlink:href" : "src",
                d.one("load", l),
                rD(a, c) ? (d.attr("crossorigin", "anonymous"),
                    d.one("error", h)) : (d.removeAttr("crossorigin"),
                    d.one("error", k)),
                d.attr(p, c))
        })
    }

    function dC(a, b) {
        return OB(a, new Image, b)
    }
    var PB = qD();

    function sD(a) {
        this.fa = a;
        this.path = "/licenses"
    }
    sD.prototype.cE = function (a) {
        var b = a.status,
            c = a.Z,
            d = a.document,
            e = a.Kc,
            g = a.media,
            h = a.CX,
            k = a.Rx,
            l = a.na,
            m = a.limit;
        a = [].concat(la(a.types.map(function (a) {
            return "type\x3d" + encodeURIComponent(a)
        })), la(b.map(function (a) {
            return "status\x3d" + encodeURIComponent(a)
        })), [c && "brand\x3d" + encodeURIComponent(c), d && "document\x3d" + encodeURIComponent(d)], la(e.map(function (a) {
            return "license\x3d" + encodeURIComponent(a)
        })), la(g.map(function (a) {
            return "media\x3d" + encodeURIComponent(a)
        })), [h && "validAt\x3d" + encodeURIComponent(String(h)), k && "creatingBrand\x3d" + encodeURIComponent(k), l && "continuation\x3d" + encodeURIComponent(l), m && "limit\x3d" + encodeURIComponent(String(m))]);
        return Ii(this.fa, this.path + "?" + a.filter(function (a) {
            return !!a
        }).join("\x26")).get(0).then(Ja).then(tD)
    };

    function Jh(a, b) {
        switch (b) {
            case "ONE_USE":
                return "ONE_USE";
            case "ROYALTY_FREE":
                return "ROYALTY_FREE";
            case "EXTENDED":
                return "EXTENDED";
            default:
                throw new TypeError('expected LicenseType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function fi(a, b) {
        switch (b) {
            case "ONE_USE":
                return "ONE_USE";
            case "ROYALTY_FREE":
                return "ROYALTY_FREE";
            case "EXTENDED":
                return "EXTENDED";
            default:
                throw new TypeError('expected LicenseType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function uD(a, b) {
        switch (b) {
            case "ACTIVATED":
                return "ACTIVATED";
            case "REVOKED":
                return "REVOKED";
            default:
                throw new TypeError('expected LicenseStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function vD(a) {
        this.types = a.types || [];
        this.status = a.status || [];
        this.Z = a.Z;
        this.document = a.document;
        this.Kc = a.Kc || [];
        this.media = a.media || [];
        this.CX = a.CX;
        this.Rx = a.Rx;
        this.na = a.na;
        this.limit = a.limit
    }
    f = vD.prototype;
    f.Oh = function () {
        return this.status
    };
    f.wa = function () {
        return this.Z
    };
    f.getDocument = function () {
        return this.document
    };
    f.ac = function () {
        return this.media
    };
    f.dc = function () {
        return this.na
    };
    f.Kd = function () {
        return this.limit
    };

    function wD(a) {
        this.id = a.id;
        this.media = a.media;
        this.va = a.va;
        this.Z = a.Z;
        this.Rx = a.Rx;
        this.IT = a.IT;
        this.document = a.document;
        this.JR = a.JR;
        this.mM = a.mM;
        this.py = a.py;
        this.type = a.type;
        this.status = a.status;
        this.yU = a.yU
    }
    f = wD.prototype;
    f.G = function () {
        return this.id
    };
    f.ac = function () {
        return this.media
    };
    f.Ly = function () {
        return this.va
    };
    f.wa = function () {
        return this.Z
    };
    f.getDocument = function () {
        return this.document
    };
    f.Ab = function () {
        return this.type
    };
    f.Oh = function () {
        return this.status
    };

    function xD(a) {
        return new wD({
            id: D("id", a),
            media: D("media", a),
            va: z("mediaVersion", a),
            Z: D("brand", a),
            Rx: D("creatingBrand", a),
            IT: D("invoiceItem", a),
            document: F("document", a),
            JR: z("createdDate", a),
            mM: z("modifiedDate", a),
            py: A("expiryDate", a),
            type: Ra(fi, "type", a),
            status: Ra(uD, "status", a),
            yU: D("mediaBrand", a)
        })
    }

    function yD(a) {
        this.Kc = a.Kc || [];
        this.Al = a.Al;
        this.na = a.na
    }
    yD.prototype.dc = function () {
        return this.na
    };

    function tD(a) {
        return new yD({
            Kc: Qa(xD, "licenses", a),
            Al: z("responseTimestamp", a),
            na: F("continuation", a)
        })
    };

    function zD(a) {
        this.fa = a
    }

    function AD(a, b, c) {
        b = "/media?" + ("brand" in b ? "\x26brand\x3d" + encodeURIComponent(b.brand) : "") + ("user" in b ? "\x26user\x3d" + encodeURIComponent(b.user) : "") + ("filename" in b ? "\x26filename\x3d" + encodeURIComponent(b.filename) : "") + ("ids" in b ? "\x26ids\x3d" + encodeURIComponent(b.ids) : "") + ("restricted" in b ? "\x26restricted\x3d" + encodeURIComponent(b.restricted) : "") + ("deactivated" in b ? "\x26deactivated\x3d" + encodeURIComponent(b.deactivated) : "") + ("staging" in b ? "\x26staging\x3d" + encodeURIComponent(b.staging) : "") + "\x26projection\x3d" + encodeURIComponent(b.projections.join("")) + ("continuation" in b && null != b.continuation ? "\x26continuation\x3d" + encodeURIComponent(b.continuation) : "") + ("types" in b ? "\x26types\x3d" + encodeURIComponent(b.types) : "") + ("limit" in b ? "\x26limit\x3d" + encodeURIComponent(b.limit) : "");
        return a.fa.get(b, function (a, b) {
            var g = null;
            200 == a && (g = {
                media: BD(b.media),
                continuation: b.continuation
            });
            c && c(a, g)
        })
    }

    function CD(a, b) {
        return new P(function (a, d) {
                AD(this, b, function (b, g) {
                    g ? a({
                        na: g.continuation,
                        media: g.media
                    }) : d(b)
                })
            }
            .bind(a))
    }

    function DD(a, b) {
        return Qi(a.fa, "/media?" + ("name" in b ? "\x26file\x3d" + encodeURIComponent(b.name) : "") + ("restricted" in b ? "\x26restricted\x3d" + encodeURIComponent(b.restricted) : "") + ("listed" in b ? "\x26listed\x3d" + encodeURIComponent(b.listed) : "") + ("fileSize" in b ? "\x26fileSize\x3d" + encodeURIComponent(b.fileSize) : ""), {}).spread(kj)
    }
    zD.prototype.ac = function (a, b, c) {
        var d = Object.keys(b).filter(function (a) {
            return "version" != a
        }).map(function (a) {
            if ("object" !== typeof b[a])
                return a + "\x3d" + encodeURIComponent(b[a])
        });
        a = "/media/" + encodeURIComponent(a) + ("version" in b ? "/" + encodeURIComponent(b.version) : "") + (0 < d.length ? "?" + d.join("\x26") : "");
        return this.fa.get(a, function (a, b) {
            b = 200 == a ? kj(b) : null;
            c && c(a, b)
        })
    };

    function ED(a, b, c) {
        return new P(function (a, e) {
                this.ac(b, c, function (b, c) {
                    nk(b) ? a(c) : e(b)
                })
            }
            .bind(a))
    }

    function FD(a, b, c) {
        function d(a) {
            return a.id + ":" + a.version
        }
        b = "/media?batch" + ("refs" in b ? "\x26refs\x3d" + encodeURIComponent(b.refs.map(d).join(",")) : "") + ("ids" in b ? "\x26ids\x3d" + encodeURIComponent(b.ids.join(",")) : "") + ("staging" in b ? "\x26staging\x3d" + encodeURIComponent(b.staging) : "") + ("unwatermarked" in b ? "\x26unwatermarked\x3d" + encodeURIComponent(b.unwatermarked) : "") + "\x26projection\x3d" + encodeURIComponent(b.projections.join(""));
        a.fa.get(b, function (a, b) {
            var d = null;
            200 == a && (d = {
                media: BD(b.media)
            });
            c && c(a, d)
        })
    }

    function GD(a, b) {
        return new P(function (a, d) {
                FD(this, b, function (b, g) {
                    nk(b) ? a(g) : d(b)
                })
            }
            .bind(a))
    }

    function HD(a, b, c) {
        var d = "/media/" + encodeURIComponent(b.G()) + "/" + b.getVersion();
        a.fa.post(d, b, function (a, b) {
            b = 200 == a ? kj(b) : null;
            c && c(a, b)
        })
    }

    function ID(a, b, c, d) {
        b = (new JD).io(b).jk(c).Zs(!0);
        HD(a, b, d)
    }

    function KD(a, b, c) {
        return new P(function (a, e) {
                ID(this, b, c, function (b, c) {
                    nk(b) ? a(c) : e(b)
                })
            }
            .bind(a))
    }
    zD.prototype.FX = P.method(function (a, b) {
        function c(a) {
            return 404 === a
        }

        function d() {
            return ED(h, a, b).catch(c, function () {
                return null
            })
        }

        function e() {
            return d().then(function (a) {
                g++;
                var b;
                if (b = a)
                    b = a.Va().Oh(),
                    b = "PENDING_SUBMISSION" != b && "PENDING_REVIEW" != b;
                return b ? a.Va().Oh() === LD ? a : Promise.reject(a) : P.delay(Math.round(3E3 * Math.pow(1.6, g))).then(e).cancellable()
            })
        }
        var g = 0,
            h = this;
        return e().timeout(36E5)
    });
    var aC = "THUMBNAIL",
        Fg = "SCREEN",
        cC = "PRINT";

    function Os(a, b) {
        switch (b) {
            case "THUMBNAIL":
                return aC;
            case "THUMBNAIL_LARGE":
                return "THUMBNAIL_LARGE";
            case "SCREEN":
                return Fg;
            case "PRINT":
                return cC;
            case "ORIGINAL":
                return "ORIGINAL";
            default:
                throw new TypeError('expected MediaQuality for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }
    var zg = "RASTER",
        Bg = "VECTOR";

    function kh(a, b) {
        switch (b) {
            case "RASTER":
                return zg;
            case "VECTOR":
                return Bg;
            case "DESIGN":
                return "DESIGN";
            case "FONT":
                return "FONT";
            case "ELEMENT_GROUP":
                return "ELEMENT_GROUP";
            default:
                throw new TypeError('expected MediaType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function MD(a, b) {
        switch (b) {
            case "RECOLORABLE":
                return "RECOLORABLE";
            case "BACKGROUND_R":
                return "BACKGROUND_R";
            case "BACKGROUND_G":
                return "BACKGROUND_G";
            case "BACKGROUND_B":
                return "BACKGROUND_B";
            case "BACKGROUND_A":
                return "BACKGROUND_A";
            default:
                throw new TypeError('expected SpritesheetLayerType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function ND(a, b) {
        switch (b) {
            case "RECOLORABLE":
                return "RECOLORABLE";
            case "BACKGROUND_R":
                return "BACKGROUND_R";
            case "BACKGROUND_G":
                return "BACKGROUND_G";
            case "BACKGROUND_B":
                return "BACKGROUND_B";
            case "BACKGROUND_A":
                return "BACKGROUND_A";
            default:
                throw new TypeError('expected SpritesheetLayerType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Di(a, b) {
        switch (b) {
            case "NOT_APPLICABLE":
                return "NOT_APPLICABLE";
            case "FREE":
                return "FREE";
            case "STANDARD":
                return "STANDARD";
            case "NONE":
                return "NONE";
            default:
                throw new TypeError('expected Licensing for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function ji(a, b) {
        switch (b) {
            case "NOT_APPLICABLE":
                return "NOT_APPLICABLE";
            case "FREE":
                return "FREE";
            case "STANDARD":
                return "STANDARD";
            case "NONE":
                return "NONE";
            default:
                throw new TypeError('expected Licensing for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Fm(a) {
        this.id = a.id;
        this.version = a.version
    }
    Fm.prototype.G = function () {
        return this.id
    };
    Fm.prototype.getVersion = function () {
        return this.version
    };

    function Qu(a) {
        return {
            id: hb("id", a.id),
            version: db("version", a.version)
        }
    }

    function Gm(a) {
        return new Fm({
            id: D("id", a),
            version: z("version", a)
        })
    }

    function OD(a) {
        this.Ll = a.Ll;
        this.mq = a.mq;
        this.lE = a.lE;
        this.$E = a.$E || []
    }

    function Gg(a) {
        return {
            spritesWide: db("spritesWide", a.Ll),
            spritesHigh: db("spritesHigh", a.mq),
            fullyRecolorable: fb("fullyRecolorable", a.lE),
            layers: kb(PD, "layers", a.$E)
        }
    }

    function QD(a) {
        return new OD({
            Ll: z("spritesWide", a),
            mq: z("spritesHigh", a),
            lE: La("fullyRecolorable", a),
            $E: Qa(RD, "layers", a)
        })
    }

    function SD(a) {
        this.type = a.type;
        this.Fz = a.Fz;
        this.color = a.color
    }
    SD.prototype.Ab = function () {
        return this.type
    };
    SD.prototype.RK = function () {
        return this.Fz
    };
    SD.prototype.$b = function () {
        return this.color
    };

    function PD(a) {
        return {
            type: lb(MD, "type", a.type),
            layerIndex: eb("layerIndex", a.Fz),
            color: ib("color", a.color)
        }
    }

    function RD(a) {
        return new SD({
            type: Ra(ND, "type", a),
            Fz: A("layerIndex", a),
            color: F("color", a)
        })
    };
    var LD = "APPROVED",
        TD = {
            W7: "F",
            a8: "K",
            g8: "P",
            i8: "S",
            m8: "T",
            S7: "D"
        },
        kA = "DOCUMENT",
        Eg = "FACEBOOK",
        jA = "LAYOUT";

    function UD(a) {
        a = void 0 === a ? {} : a;
        this.url = a.url || "";
        this.width = a.width || 0;
        this.height = a.height || 0;
        this.watermarked = a.Rw || !1;
        this.page = a.page || 0;
        this.quality = a.Wh || null
    }
    f = UD.prototype;
    f.Aa = function () {
        return this.url
    };
    f.F = function () {
        return this.height
    };
    f.D = function () {
        return this.width
    };
    f.ha = function () {
        return this.page
    };
    f.uE = function () {
        return this.quality
    };

    function Fq(a) {
        return a ? $.extend(new UD, a) : null
    }

    function VD(a, b) {
        this.locale = a;
        this.text = b
    }
    VD.prototype.qg = function () {
        return this.locale
    };
    VD.prototype.ep = function () {
        return this.text
    };

    function WD(a) {
        return a ? $.extend(new VD(a.locale, a.text), a) : null
    }

    function XD(a) {
        a = void 0 === a ? {} : a;
        this.version = a.version || 0;
        this.restrictedAccess = a.y9 || !1;
        this.listed = a.g9 || !1;
        this.status = a.status || "PENDING_SUBMISSION";
        this.rejectionReason = a.v9;
        this.importState = a.X8 || "PENDING_IMPORT";
        this.importMessage = a.W8;
        this.designVersion = a.G8;
        this.designType = a.Ci;
        this.artist = a.u8 || "";
        this.title = a.title || "";
        this.titles = a.Q9;
        this.description = a.description || "";
        this.descriptions = a.Yq;
        this.locale = a.locale || null;
        this.background = a.background || !1;
        this.cutout = a.Vx || !1;
        this.isolated = a.a9 || !1;
        this.photoholder = a.o9 || !1;
        this.textholder = a.N9 || !1;
        this.repeating = a.w9 || !1;
        this.recolorable = a.tG || !1;
        this.superKeywords = a.K9 || [];
        this.keywords = a.Be || [];
        this.files = a.files || {};
        this.quality = a.Wh;
        this.ageRating = a.t8 || null;
        this.priceModel = a.r9 || {};
        this.spritesheetMetadata = a.eP;
        this.submittedBy = a.I9;
        this.submittedDate = a.J9;
        this.reviewedBy = a.z9;
        this.reviewedDate = a.A9
    }
    f = XD.prototype;
    f.getVersion = function () {
        return this.version
    };
    f.Oh = function () {
        return this.status
    };
    f.QS = function () {
        return this.artist
    };
    f.Jb = function () {
        return this.title
    };
    f.pg = function () {
        return this.description
    };
    f.qg = function () {
        return this.locale
    };
    f.Ac = function () {
        return this.background
    };
    f.gh = function () {
        return this.cutout
    };
    f.Az = function () {
        return this.repeating
    };
    f.vd = function () {
        return this.recolorable
    };
    f.XK = function () {
        return this.superKeywords
    };
    f.Zk = function () {
        return this.keywords
    };
    f.Dc = function () {
        return this.files
    };
    f.uE = function () {
        return this.quality
    };
    f.Ty = function () {
        return this.spritesheetMetadata
    };

    function YD(a) {
        return a.priceModel
    }

    function ZD(a) {
        a = void 0 === a ? {} : a;
        this.id = a.id || "";
        this.importKey = a.importKey || "";
        this.importBucket = a.U8 || "";
        this.importFilename = a.V8 || "";
        this.type = a.type || zg;
        this.copyright = a.B8 || "";
        this.bundle = a.x8 || new XD;
        this.deactivated = a.iD || !1;
        this.oneTimeUseDiscountable = a.k9 || !1;
        this.brand = a.Z || "";
        this.user = a.user;
        this.design = a.xe
    }
    f = ZD.prototype;
    f.G = function () {
        return this.id
    };
    f.Ab = function () {
        return this.type
    };
    f.Va = function () {
        return this.bundle
    };
    f.Ku = function () {
        return this.oneTimeUseDiscountable
    };
    f.wa = function () {
        return this.brand
    };
    f.Qa = function () {
        return this.user
    };

    function kj(a) {
        if (!a)
            return null;
        a = $.extend(new ZD, a);
        if (a.bundle) {
            var b;
            var c = a.bundle;
            if (c) {
                c = $.extend(new XD, c);
                c.superKeywords && (c.superKeywords = c.superKeywords.map(WD));
                c.keywords && (c.keywords = c.keywords.map(WD));
                if (c.files)
                    for (b in c.files)
                        c.files[b] = Fq(c.files[b]);
                c.spritesheetMetadata && (c.spritesheetMetadata = QD(Ja(c.spritesheetMetadata)));
                b = c
            } else
                b = null;
            a.bundle = b
        }
        return a
    }

    function BD(a) {
        if (!a)
            return null;
        for (var b = [], c = 0; c < a.length; c++)
            b.push(kj(a[c]));
        return b
    }

    function $D() {
        this.projections = []
    }
    f = $D.prototype;
    f.Hg = function (a) {
        this.brand = a;
        return this
    };
    f.ct = function (a) {
        this.user = a;
        return this
    };
    f.bt = function (a) {
        this.restricted = a;
        return this
    };
    f.Uw = function (a) {
        this.staging = a;
        return this
    };
    f.KX = function (a) {
        null != a && 0 < a.length && (this.filename = a);
        return this
    };
    f.fQ = function (a) {
        null != a && 0 < a.length && (this.ids = a);
        return this
    };
    f.Zs = function (a) {
        this.deactivated = a;
        return this
    };
    f.zH = function (a) {
        this.locale = a;
        return this
    };
    f.ho = function () {
        this.projections.push("F");
        return this
    };
    f.XB = function () {
        this.projections.push("P");
        return this
    };
    f.yH = function () {
        this.projections.push("K");
        return this
    };
    f.JX = function () {
        this.projections = Object.keys(TD).map(function (a) {
            return TD[a]
        });
        return this
    };
    f.aj = function (a) {
        this.continuation = a;
        return this
    };
    f.Ig = function (a) {
        this.limit = a;
        return this
    };

    function aE(a, b) {
        a.types = b;
        return a
    }

    function bE() {}
    bE.prototype.$s = function (a) {
        this.name = a;
        return this
    };
    bE.prototype.bt = function (a) {
        this.restricted = a;
        return this
    };
    bE.prototype.NX = function (a) {
        this.listed = a;
        return this
    };

    function cE(a, b) {
        a.fileSize = b;
        return a
    }
    bE.prototype.zH = function (a) {
        this.locale = a;
        return this
    };

    function jC() {}
    f = jC.prototype;
    f.jk = function (a) {
        this.version = a;
        return this
    };
    f.Uw = function (a) {
        this.staging = a;
        return this
    };

    function dE(a) {
        a.projection = "";
        return a
    }
    f.ho = function () {
        this.projection = (this.projection || "") + "F";
        return this
    };
    f.yH = function () {
        this.projection = (this.projection || "") + "K";
        return this
    };
    f.XB = function () {
        this.projection = (this.projection || "") + "P";
        return this
    };
    f.OX = function () {
        this.projection = (this.projection || "") + "T";
        return this
    };
    f.IX = function () {
        this.projection = (this.projection || "") + "D";
        return this
    };

    function eE() {
        this.projections = []
    }

    function fE(a, b) {
        a.refs = b;
        return a
    }
    f = eE.prototype;
    f.fQ = function (a) {
        this.ids = a;
        return this
    };
    f.Uw = function (a) {
        this.staging = a;
        return this
    };
    f.JX = function () {
        this.projections = Object.keys(TD).map(function (a) {
            return TD[a]
        });
        return this
    };
    f.XB = function () {
        this.projections.push("P");
        return this
    };
    f.ho = function () {
        this.projections.push("F");
        return this
    };
    f.OX = function () {
        this.projections.push("T");
        return this
    };
    f.IX = function () {
        this.projections.push("D");
        return this
    };

    function gE(a) {
        a.unwatermarked = !0;
        a.projections.push("F")
    }

    function JD() {}
    f = JD.prototype;
    f.io = function (a) {
        this.id = a;
        return this
    };
    f.G = function () {
        return this.id
    };
    f.jk = function (a) {
        this.version = a;
        return this
    };
    f.getVersion = function () {
        return this.version
    };
    f.Zs = function (a) {
        this.deactivated = a;
        return this
    };
    f.NX = function (a) {
        this.listed = a;
        return this
    };
    f.LX = function (a) {
        this.importVersion = a;
        return this
    };

    function hE(a, b) {
        a.superKeywords = b;
        return a
    }
    f.yH = function (a) {
        this.keywords = a;
        return this
    };
    f.zH = function (a) {
        this.locale = a;
        return this
    };

    function iE(a, b, c) {
        this.qB = a;
        this.M6 = b;
        this.N6 = c;
        this.NW = null;
        this.RL = this.SL = 0;
        this.VZ = this.isAlpha() ? "destination-in" : "lighter";
        this.color = jE(this);
        this.ve = null
    }
    f = iE.prototype;
    f.vd = function () {
        return "RECOLORABLE" === this.qB.type
    };
    f.isAlpha = function () {
        return "BACKGROUND_A" === this.qB.type
    };

    function jE(a) {
        switch (a.qB.type) {
            case "RECOLORABLE":
                return gh(a.qB.color);
            case "BACKGROUND_R":
                return Qm(new Om, 255, 0, 0);
            case "BACKGROUND_G":
                return Qm(new Om, 0, 255, 0);
            case "BACKGROUND_B":
                return Qm(new Om, 0, 0, 255);
            case "BACKGROUND_A":
                return null;
            default:
                throw Error("Unknown SpritesheetLayerType");
        }
    }
    f.RK = function () {
        return this.qB.Fz
    };
    f.$b = function () {
        return this.color
    };
    f.setColor = function (a) {
        this.vd() && (this.color = a)
    };
    f.multiply = function (a, b, c, d, e) {
        this.ve = a.getImageData(b, c, d, e);
        c = ka([b, c]);
        b = c.next().value;
        c = c.next().value;
        for (d = 0; d < this.ve.data.length; d += 4) {
            var g = ka(this.color.yb.slice());
            e = g.next().value;
            var h = g.next().value,
                g = g.next().value;
            this.ve.data[d] = this.ve.data[d] / 255 * e;
            this.ve.data[d + 1] = this.ve.data[d + 1] / 255 * h;
            this.ve.data[d + 2] = this.ve.data[d + 2] / 255 * g
        }
        a.putImageData(this.ve, b, c)
    };
    f.compose = function (a, b, c, d, e, g, h, k, l, m) {
        kE(b, this.VZ);
        b.drawImage(a.canvas, c, d, e, g, h, k, l, m)
    };

    function kE(a, b) {
        a.globalCompositeOperation = b;
        return a.globalCompositeOperation == b
    }
    f.we = function () {
        this.ve = null
    };

    function lE(a) {
        this.Tn = a.Tn;
        this.Ll = a.Ll;
        this.mq = a.mq;
        this.xL = a.xL;
        this.bf = a.bf;
        this.Xm = a.Xm;
        this.mL = a.mL;
        this.SF = [];
        this.HC = null;
        this.FC = !1
    }

    function mE(a) {
        var b = document.createElement("canvas").getContext("2d"),
            c = document.createElement("canvas").getContext("2d"),
            d = nE(a),
            e = a.Ll,
            g = a.mq;
        a = a.lE;
        var h = qD();
        return (new lE({
            Tn: d,
            Ll: e,
            mq: g,
            bf: b,
            Xm: c,
            xL: a,
            mL: h
        })).init()
    }

    function nE(a) {
        return a.$E.map(function (b, c) {
            return new iE(b, c % a.Ll, Math.floor(c / a.Ll))
        }).sort(function (a, c) {
            return a.isAlpha() ? 1 : c.isAlpha() ? -1 : a.RK() - c.RK()
        })
    }
    lE.prototype.init = function () {
        this.SF = oE(this);
        return this
    };
    lE.prototype.qk = function (a) {
        var b = this;
        this.HC = null;
        this.FC = !1;
        return dC(this.mL, a).then(function (a) {
            return pE(b, a)
        }).then(function () {
            return qE(b)
        }).then(function () {
            return rE(b)
        }).then(function () {
            return b.FC = !0
        }).catch(function () {
            throw Error("Could not build spritesheet");
        })
    };
    lE.prototype.vd = function () {
        return this.Tn.some(function (a) {
            return a.vd()
        })
    };

    function sE(a) {
        var b = [JA, KA, LA];
        return a.xL && a.SF.every(function (a) {
            return b.some(function (b) {
                return b.equals(a)
            })
        })
    }

    function oE(a) {
        return tE(a).map(function (a) {
            return a.$b()
        })
    }

    function tE(a) {
        return a.Tn.filter(function (a) {
            return a.vd()
        })
    }
    lE.prototype.toDataURL = function () {
        return this.FC && this.HC || (this.HC = this.bf.canvas.toDataURL())
    };

    function uE(a, b) {
        var c = a.Tn.indexOf(b);
        if (!(0 > c)) {
            var d = a.Xm,
                c = c * a.bf.canvas.width,
                e = a.bf.canvas.width,
                g = a.bf.canvas.height;
            b.we();
            kE(d, "source-over");
            d.drawImage(b.NW, b.M6 * b.SL, b.N6 * b.RL, b.SL, b.RL, c, 0, e, g);
            if (b.isAlpha()) {
                var h = ka([c, 0]);
                a = h.next().value;
                h = h.next().value;
                b.ve = b.ve || d.getImageData(c, 0, e, g);
                for (c = 0; c < b.ve.data.length; c += 4)
                    b.ve.data[c + 3] = b.ve.data[c],
                    b.ve.data[c] = b.ve.data[c + 1] = b.ve.data[c + 2] = 255;
                d.putImageData(b.ve, a, h)
            } else
                b.color && (kE(d, "multiply") ? (d.fillStyle = b.color.toString(),
                    d.fillRect(c, 0, e, g)) : b.multiply(d, c, 0, e, g))
        }
    }

    function pE(a, b) {
        var c = b.width / a.Ll,
            d = b.height / a.mq;
        a.bf.canvas.width = c;
        a.bf.canvas.height = d;
        a.Xm.canvas.width = a.Tn.length * c;
        a.Xm.canvas.height = d;
        a.Tn.forEach(function (a) {
            a.NW = b;
            a.SL = c;
            a.RL = d
        })
    }

    function qE(a) {
        a.Xm.clearRect(0, 0, a.Xm.canvas.width, a.Xm.canvas.height);
        a.Tn.forEach(function (b) {
            return uE(a, b)
        })
    }

    function rE(a) {
        a.bf.clearRect(0, 0, a.bf.canvas.width, a.bf.canvas.height);
        a.Tn.forEach(function (b, c) {
            return b.compose(a.Xm, a.bf, c * a.bf.canvas.width, 0, a.bf.canvas.width, a.bf.canvas.height, 0, 0, a.bf.canvas.width, a.bf.canvas.height)
        })
    };

    function cB(a) {
        if ("print" == bB)
            throw Error("Graphic should not be used in print as it uses screen media. It should be an SvgElement in print.");
        if (void 0 !== a && void 0 !== a.mediaId && void 0 !== a.spritesheetMetadata) {
            var b = this;
            this.loaded = !1;
            this.QL = null;
            this.eP = QD(Ja(a.spritesheetMetadata));
            this.Un = mE(this.eP);
            Z.call(this, a);
            this.ua = a.mediaId;
            this.va = a.mediaVersion;
            this.Hc = void 0 === a.mediaApproved ? !0 : a.mediaApproved;
            var c = this.O();
            c.addClass("graphic");
            var d = $('\x3cdiv class\x3d"placeholder"\x3e\x3cimg class\x3d"imgPlaceholder" /\x3e\x3cdiv class\x3d"canvasPlaceholder" /\x3e\x3c/div\x3e');
            c.append(d);
            c.find(".canvasPlaceholder").append(this.Un.bf.canvas);
            this.Uj();
            this.contents = a.contents ? a.contents.slice(0) : null;
            a.fillColors && a.fillColors.forEach(function (a) {
                var c = gh(a.color);
                c && b.ce(a.index, c)
            });
            this.Gl(this.ua, this.va).bind(this).then(function () {
                S.trigger("elementLoaded", this);
                S.trigger("elementLoaded:graphic", this)
            }).catch(function () {
                S.trigger("elementLoadingError", this)
            })
        }
    }
    cB.prototype = Object.create(Z.prototype);
    f = cB.prototype;
    f.constructor = cB;
    f.Gl = function (a, b) {
        this.ua = a;
        this.va = b;
        this.loaded = !1;
        return vE(this, a, b)
    };

    function vE(a, b, c) {
        var d = Gb.Uc(b, c);
        if (!d)
            return P.reject();
        d = d[aC];
        b = bC(b, c, Fg);
        a.cq(d.Aa());
        return b.bind(a).then(function (a) {
            return this.Un.qk(a.Aa())
        }).then(function () {
            this.loaded = !0;
            this.we();
            this.DA ? this.Vp() : this.Uj()
        })
    }
    f.yX = function () {
        this.loaded && this.cq(this.Un.toDataURL())
    };
    f.n_ = _.debounce(cB.prototype.yX, 200);
    f.cq = function (a) {
        var b = this.O().find(".imgPlaceholder");
        OB(PB, b, a)
    };

    function wE(a) {
        return a.loaded && a.QL !== a.DA ? (a.QL = a.DA, !0) : !1
    }
    f.Vp = function () {
        Z.prototype.Vp.call(this);
        wE(this) && (this.O().find(".canvasPlaceholder").show(),
            this.O().find(".imgPlaceholder").hide())
    };
    f.Uj = function () {
        Z.prototype.Uj.call(this);
        wE(this) && (this.yX(),
            this.O().find(".imgPlaceholder").show(),
            this.O().find(".canvasPlaceholder").hide())
    };
    f.TB = function (a) {
        Lp(a, this.Ub()) || (this.bB(!1),
            this.va = this.ua = null)
    };
    f.Cj = function () {
        return !0
    };
    f.Ub = function () {
        return null != this.ua && null != this.va ? new Fm({
            id: this.ua,
            version: this.va
        }) : null
    };
    f.Fv = function () {
        this.QL = null;
        var a = this.Ub();
        return a ? this.Gl(a.id, a.version) : P.resolve()
    };
    f.zz = function () {
        return this.Hc
    };
    f.bB = function (a) {
        this.Hc = a;
        this.O().toggleClass("unapproved", !a);
        this.lb()
    };
    f.vd = function () {
        return 0 < this.ob().length
    };
    f.ob = function () {
        return 5 < oE(this.Un).length ? [] : oE(this.Un)
    };
    f.Jd = function () {
        return this.ob().length
    };
    f.ce = function (a, b) {
        var c = this.Un;
        if (a = tE(c)[a])
            c.HC = null,
            a.setColor(b),
            c.FC && (uE(c, a),
                rE(c));
        this.we();
        this.n_()
    };
    f.Hi = function () {
        if (this.pe)
            return this.pe;
        var a = new Co;
        this.ob().forEach(function (b) {
            Fo(a, b)
        });
        return this.pe = a
    };
    f.lp = function () {
        return !0
    };
    f.mH = function () {
        RB(this.O().find(".placeholder"), null, this.mc)
    };
    f.vv = function () {
        zB(this);
        var a = this.O().find(".placeholder");
        a.addClass("flipping");
        a.one("transitionend", function () {
            a.removeClass("flipping")
        })
    };
    f.serialize = function () {
        var a = Z.prototype.serialize.call(this);
        a.type = "graphic";
        a.mediaId = this.ua;
        a.mediaVersion = this.va;
        this.Hc || (a.mediaApproved = !1);
        a.spritesheetMetadata = Gg(this.eP);
        var b = this.ob().map(function (a, b) {
            return {
                index: b,
                color: a.Ca()
            }
        });
        0 < b.length && (a.fillColors = b);
        return a
    };
    f.Jx = function () {
        return sE(this.Un)
    };

    function xE(a) {
        var b = a.wx;
        1 <= b || 0 >= b ? a.Uj() : a.Vp()
    }
    f.JA = function () {
        if (this.vd() && this.AC && null !== this.Yl && this.Jx()) {
            this.AC = !1;
            xE(this);
            var a;
            this.Un.SF.forEach(function (b, c) {
                    switch (b.Ca()) {
                        case JA.Ca():
                            a = this.Yl.bs;
                            break;
                        case KA.Ca():
                            a = this.Yl.ys;
                            break;
                        case LA.Ca():
                            a = this.Yl.Ps;
                            break;
                        default:
                            a = null
                    }
                    a && (b = bn(b, a, this.wx),
                        this.ce(c, b))
                }
                .bind(this))
        }
    };
    f.yq = function () {
        return !0
    };
    cB.prototype.uW = cB.prototype.ce;

    function yE() {
        this.QN = 0
    }
    var AE = ["tame", "angry"];
    yE.prototype.ce = function (a, b) {
        this.uW(a, b);
        if (!(0 > ["MABsSJ6etSs"].indexOf(this.ua)) && BE(this)) {
            this.QN = this.QN || 0;
            this.Vp();
            var c = AE[this.QN++] || "flipOut",
                d = this.O().find(".placeholder");
            d.addClass(c);
            var e = this.ob();
            a = {
                overflow: "visible",
                zIndex: 5
            };
            var g = $(".page .elements"),
                h = {},
                k;
            for (k in a)
                h[k] = g.css(k);
            g.css(a);
            $({
                ratio: 0
            }).animate({
                ratio: 1
            }, {
                duration: 500,
                step: function (a) {
                        this.Un.SF.forEach(function (b, c) {
                                b = hn(e[c], b, a);
                                this.uW(c, b)
                            }
                            .bind(this))
                    }
                    .bind(this),
                always: function () {
                        this.Uj();
                        this.lb();
                        d.removeClass(c);
                        g.css(h)
                    }
                    .bind(this)
            })
        }
    };

    function BE(a) {
        return a.ob().every(function (a) {
            return a.equals(gh("#cc0000"))
        })
    }
    _.extend(cB.prototype, yE.prototype);

    function iB(a) {
        this.elements = [];
        this.kd = null;
        this.UN = !0;
        this.XZ = {};
        this.fH = new WeakMap;
        this.zh(a);
        Z.call(this, a);
        this.PY = [{
            id: "HorizontalAlignLeft",
            name: ee(xc(this.u)),
            enabled: !0
        }, {
            id: "HorizontalAlignCenter",
            name: ge(xc(this.u)),
            enabled: !0
        }, {
            id: "HorizontalAlignRight",
            name: fe(xc(this.u)),
            enabled: !0
        }, {
            id: "VerticalAlignTop",
            name: he(xc(this.u)),
            enabled: !0
        }, {
            id: "VerticalAlignCenter",
            name: ke(xc(this.u)),
            enabled: !0
        }, {
            id: "VerticalAlignBottom",
            name: je(xc(this.u)),
            enabled: !0
        }, {
            id: "HorizontalDistribute",
            name: le(xc(this.u)),
            enabled: !0
        }, {
            id: "VerticalDistribute",
            name: me(xc(this.u)),
            enabled: !0
        }];
        this.EC()
    }
    var gB = "CHART";

    function CE(a, b) {
        var c;
        c = Math.max(0, b.Ob - a.Ob);
        var d = Jm(Im([b.left + b.width / 2 - (a.left + a.width / 2), b.top + b.height / 2 - (a.top + a.height / 2)]).rotate(a.rotation));
        return {
            Ob: c || 0,
            rotation: UA(b.rotation, a.rotation) || 0,
            top: d[1] - b.height / 2 + a.height / 2,
            left: d[0] - b.width / 2 + a.width / 2,
            width: b.width,
            height: b.height
        }
    }

    function DE(a, b, c) {
        c ? (c = 100 - (100 - b.Ob) / 100 * ((100 - a.Ob) / 100) * 100,
            c = Math.round(10 * c) / 10) : c = Math.min(100, b.Ob + a.Ob);
        var d = Km(Im([b.left + b.width / 2 - a.width / 2, b.top + b.height / 2 - a.height / 2]), -a.rotation),
            e = Jm(d);
        return {
            Ob: c || 0,
            rotation: UA(b.rotation, -(180 * Math.atan2(d.m[3], d.m[4]) / Math.PI)) || 0,
            top: e[1] - b.height / 2 + a.top + a.height / 2,
            left: e[0] - b.width / 2 + a.left + a.width / 2,
            width: b.width,
            height: b.height
        }
    }

    function EE(a) {
        var b = a.filter(function (a) {
            return "group" === a.type
        })[0];
        if (!b)
            throw Error("Group index out of bounds");
        var c = b.childRange;
        if (!Op(c))
            throw Error("Invalid group child range");
        for (var b = new iB(b), d, e, g = c[0]; g <= c[1]; g++)
            d = tg(a[g]),
            e = CE(rB(b), rB(d)),
            d.Il(e.Ob),
            d.setPosition(e.left, e.top),
            d.Hl(e.rotation),
            FE(b, d),
            d.vx = !1;
        return b
    }
    iB.prototype = Object.create(Z.prototype);
    f = iB.prototype;
    f.constructor = iB;
    f.xb = function () {
        return !0
    };
    f.UE = function () {
        return !0
    };
    f.jT = function () {
        return !1
    };
    f.nP = function () {
        return !0
    };
    f.zh = function (a) {
        function b(a, b) {
            return a.elementIndex > b.elementIndex ? 1 : -1
        }
        var c = this;
        a && 0 <= Object.keys(a).indexOf("elements") && a.elements.sort(b).forEach(function (a) {
            (a = tg(a)) && c.addElement(a)
        })
    };

    function GE(a, b) {
        mB(a, Math.min.apply(null, b.map(function (a) {
            return a.nc()
        })));
        uB(a, Math.min.apply(null, b.map(function (a) {
            return a.xc()
        })));
        a.za(Math.max.apply(null, b.map(function (a) {
            return a.Ld()
        })) - a.Y());
        a.oa(Math.max.apply(null, b.map(function (a) {
            return a.ud()
        })) - a.N());
        return a
    }
    f.Oq = function (a) {
        var b = {};
        b.elementIndex = this.ea();
        b.pageIndex = this.ha() && this.ha().ea();
        b.old = this.Ba();
        if (!this.UN)
            return b["new"] = this.Ba(),
                b;
        var c = Infinity,
            d = Infinity,
            e = -Infinity,
            g = -Infinity;
        a || (a = this.elements[0]);
        if (!a)
            return b["new"] = this.Ba(),
                b;
        for (var h = 0; h < this.elements.length; h++) {
            var k = this.elements[h].Y(),
                l = this.elements[h].N(),
                m = this.elements[h].D(),
                n = this.elements[h].F(),
                p = um(this.elements[h].eb()),
                r = k + m / 2,
                u = l + n / 2,
                v = Jm(Km(Im([k - r, l - u]), -p));
            v[0] += r;
            v[1] += u;
            var y = Jm(Km(Im([k + m - r, l - u]), -p));
            y[0] += r;
            y[1] += u;
            var q = Jm(Km(Im([k - r, l + n - u]), -p));
            q[0] += r;
            q[1] += u;
            k = Jm(Km(Im([k + m - r, l + n - u]), -p));
            k[0] += r;
            k[1] += u;
            c = Math.min(c, v[0], y[0], q[0], k[0]);
            d = Math.min(d, v[1], y[1], q[1], k[1]);
            e = Math.max(e, v[0], y[0], q[0], k[0]);
            g = Math.max(g, v[1], y[1], q[1], k[1])
        }
        k = e - c;
        l = g - d;
        h = Jm(Im([this.Y(), this.N()]).translate(-this.D() / 2, -this.F() / 2).rotate(um(-this.eb())).translate(this.D() / 2, this.F() / 2));
        e = Jm(Im([this.Y(), this.N()]).translate(-k / 2, -l / 2).rotate(um(-this.eb())).translate(k / 2, l / 2));
        g = e[0] - h[0];
        e = e[1] - h[1];
        for (h = 0; h < this.elements.length; h++)
            r = this.elements[h],
            0 === r.eb() && 2 > Math.round(r.N()) && 2 > Math.round(r.Y()) && 2 > Math.abs(Math.round(this.D() - r.D())) && 2 > Math.abs(Math.round(this.F() - r.F())) && (this.elements[h].za(k),
                this.elements[h].oa(l));
        this.za(k);
        this.oa(l);
        h = rB(a);
        SA(a) ? h.top += h.height / 2 : TA(a) && (h.top += h.height);
        h = DE(rB(this), h);
        r = h.top;
        u = h.left;
        for (h = 0; h < this.elements.length; h++)
            k = this.elements[h].Y(),
            l = this.elements[h].N(),
            this.elements[h].setPosition(k - c, l - d);
        h = rB(a);
        SA(a) ? h.top += h.height / 2 : TA(a) && (h.top += h.height);
        a = DE(rB(this), h);
        c = a.top - r;
        a = a.left - u;
        this.setPosition(this.Y() - g - a, this.N() - e - c);
        b["new"] = this.Ba();
        return b
    };
    f.oT = function () {
        return !1
    };

    function HE(a) {
        a.elements.forEach(function (b) {
            b instanceof up && a.fH.set(b, oz(b.O(), !0).length)
        })
    }
    f.TN = function (a, b, c) {
        function d(d, l) {
            g.elements.filter(e).forEach(function (e) {
                var g = h.has(e) ? h.get(e) : e.Ba();
                h.set(e, e.Ba());
                var m = um(a.eb()),
                    n = oz(a.O(), !0).length,
                    p = um(a.eb()),
                    B = b.clone();
                1 <= n && 5 > Math.abs(m - p) && (m = a.F() / n / 2,
                    jm(B, -m));
                B = qm(g, B);
                m = tm(b, g, d);
                n = tm(c, g, d);
                if (B || !(m < -1 * g.F() / 2)) {
                    var g = m - n,
                        K = p = 0;
                    isFinite(m) && !isFinite(n) && k && (g = m);
                    isFinite(g) && !isNaN(g) && (0 <= d && 45 > d ? p = g * Math.cos(d * Math.PI / 180) : 45 <= d && 90 > d ? K = g * Math.sin(d * Math.PI / 180) : 90 <= d && 135 > d ? K = g * Math.cos((d - 90) * Math.PI / 180) : 135 <= d && 180 > d ? p = g * Math.sin((d - 90) * Math.PI / 180) : 180 <= d && 225 > d ? p = g * Math.cos((d - 180) * Math.PI / 180) : 225 <= d && 270 > d ? K = g * Math.sin((d - 180) * Math.PI / 180) : 270 <= d && 315 > d ? K = g * Math.cos((d - 270) * Math.PI / 180) : 315 < d && (l = !0,
                        p = g * Math.sin((d - 270) * Math.PI / 180)), !e.kt() && B ? 1 < Math.abs(K) ? e.za(e.D() + K) : 1 < Math.abs(p) && (l && e.rb(e.N() - p),
                        e.oa(e.F() + p)) : (l && (p *= -1),
                        1 < Math.abs(K) ? e.wb(e.Y() + K) : 1 < Math.abs(p) && e.rb(e.N() + p)))
                }
            })
        }

        function e(b) {
            return b !== a
        }
        var g = this;
        if (this.UN && -1 !== this.elements.indexOf(a) && (c = c || a.Ba(),
                fm(b) && fm(c))) {
            var h = new Map,
                k = c.F() > b.F(),
                l = a.$k(0),
                m = .5 * (J.dt - a.$k(0)) / 100,
                n = oz(a.O(), !0).length,
                p = this.fH.get(a);
            l < J.dt && p !== n && (1 === p ? c.oa(c.F() + m * b.F()) : 1 === n && c.oa(c.F() - m * c.F()));
            this.fH.set(a, n);
            l = a.eb();
            a.te && "top" !== a.te ? TA(a) ? d(um(l), !0) : SA(a) && (d(um(180 + l), !1),
                d(um(l), !0)) : d(um(180 + l), !1);
            this.Oq(a)
        }
    };
    f.pu = function () {
        var a = J.OH;
        Ib.ba.get(gg) && (a = a.slice(0),
            a.push(gD));
        return a
    };
    f.EC = function () {
        var a = $('\x3cdiv class\x3d"elements"\x3e\x3c/div\x3e');
        this.O().addClass("group").html(a);
        this.Bc()
    };
    f.setSize = function (a, b, c) {
        var d;
        a < J.$w || b < J.$w || (void 0 !== a && void 0 !== b && (d = (a - this.D()) / this.D(),
                Z.prototype.setSize.call(this, a, b)),
            this.elements.forEach(function (a) {
                if (d && (void 0 === c || c)) {
                    var b = d,
                        h = a.D() / a.F(),
                        k, l, m;
                    !isNaN(b) && isFinite(b) && (k = a.D() + a.D() * b,
                        h = k / h,
                        l = a.Y() + a.Y() * b,
                        m = a.N() + a.N() * b,
                        a.setSize(k, h, !0),
                        a.setPosition(l, m),
                        a instanceof up && a.dd && a.dd(0) && (b = a.dd(0) + a.dd(0) * b,
                            a.qe(0, b, !0)))
                }
                a.za();
                a.setPosition();
                a.mb()
            }))
    };
    f.mb = function () {
        this.ls && (Z.prototype.mb.call(this),
            this.elements.forEach(function (a) {
                a.za();
                a.setPosition();
                a.mb()
            }))
    };
    f.addElement = function (a) {
        var b = this.elements.indexOf(a); -
        1 === b ? this.elements.push(a) : this.elements.splice(b, 1, a);
        a instanceof up && this.fH.set(a, oz(a.O(), !0).length)
    };

    function FE(a, b, c) {
        if (b.ha() && void 0 === c)
            a.addElement(b);
        else {
            c = void 0 !== c ? c : Math.max(a.elements.length - 1, 0);
            var d = a.ha();
            if (d) {
                b.bq(d);
                var e = hC(H, d);
                b.oe = e.$el;
                AB(d, b, a.ea() + c + 1, !0)
            }
            a.elements.splice(c, 0, b);
            a = a.O().find(".elements");
            a.find(".element").length > c ? a.find(".element").eq(c).before(b.O()) : a.append(b.O());
            b.Bc(!0)
        }
    }
    f.Ui = function (a) {
        a = this.elements.indexOf(a); -
        1 !== a && this.elements.splice(a, 1)
    };
    f.remove = function () {
        this.elements.forEach(function (a) {
            a.remove()
        });
        var a = this.ha();
        a && this.stopListening(a, "change:background");
        Z.prototype.remove.call(this)
    };
    f.xa = function () {
        return this.elements
    };

    function IE(a) {
        return a.elements.filter(function (a) {
            return a instanceof up
        })
    }
    f.nc = function () {
        return Math.min.apply(null, this.xa().map(function (a) {
            return a.nc()
        }))
    };
    f.Ld = function () {
        return Math.max.apply(null, this.xa().map(function (a) {
            return a.Ld()
        }))
    };
    f.xc = function () {
        return Math.min.apply(null, this.xa().map(function (a) {
            return a.xc()
        }))
    };
    f.ud = function () {
        return Math.max.apply(null, this.xa().map(function (a) {
            return a.ud()
        }))
    };
    f.eh = function () {
        return this.Ld() - this.nc()
    };
    f.dh = function () {
        return this.ud() - this.xc()
    };
    f.clone = function () {
        var a = this.serialize();
        return new iB(a)
    };
    f.nr = function () {
        return "ungroup copy arrange transparency link delete deleteElement".split(" ")
    };
    f.PS = function () {
        return this.PY
    };
    f.vf = function () {
        return 1 === this.ze().length
    };
    f.vE = function () {
        return this.elements.reduce(function (a, b) {
            return a + b.vE()
        }, 0)
    };
    f.zu = function () {
        return !1
    };

    function JE(a, b) {
        a.xi();
        b && -1 !== a.elements.indexOf(b) ? (a.kd = b,
            a.kd.O().addClass("focused")) : a.kd = null
    }
    f.xi = function () {
        this.kd = null;
        this.elements.forEach(function (a) {
            a.ph();
            a.O().removeClass("active focused")
        })
    };
    f.serialize = function () {
        var a = Z.prototype.serialize.call(this);
        a.type = "group";
        a.constraints = this.XZ;
        a.elements = this.xa().map(function (a) {
            return a.serialize()
        });
        return a
    };
    f.pp = function () {
        return !1
    };
    f.ne = function () {
        for (var a = 0; a !== this.elements.length; a++)
            if (KE(this, a))
                return !0;
        return !1
    };

    function KE(a, b) {
        return a.elements[b] instanceof up
    }
    f.ze = function () {
        var a = this.elements.filter(function (a) {
            var c = a.O().hasClass("focused");
            return a instanceof up && c
        })[0];
        return a ? a.O() : $()
    };
    f.Ib = function () {
        for (var a = 0; a != this.elements.length; a++)
            if (this.elements[a] instanceof up && this.elements[a].O().hasClass("focused"))
                return a;
        return -1
    };
    f.qb = function (a) {
        return KE(this, a) ? this.elements[a].qb(0) : $()
    };

    function LE(a) {
        for (var b = [], c = 0; c !== a.elements.length; c++)
            KE(a, c) && b.push(a.gc(c));
        return b
    }
    f.gc = function (a) {
        if (KE(this, a)) {
            var b = this.elements[a].gc(0);
            b.index = a;
            return b
        }
        return this.Gy()
    };
    f.Wi = function (a, b, c, d) {
        KE(this, a) && this.elements[a].Wi(0, b, c, d)
    };
    f.qo = function (a) {
        return this.elements[a].qo(0)
    };
    f.ou = function () {
        for (var a = [], b = 0; b !== this.elements.length; b++)
            this.elements[b].ne() && this.elements[b].ou().forEach(function (b) {
                a.push(b)
            });
        return a
    };
    f.mD = function (a) {
        return this.elements[a].mD(0)
    };
    f.dd = function (a) {
        return KE(this, a) ? this.elements[a].dd(0) : ME(this)
    };
    f.qE = function (a) {
        return this.elements[a].qE(0)
    };
    f.pr = function (a) {
        return this.elements[a].pr(0)
    };
    f.rr = function (a) {
        return this.elements[a].rr(a)
    };
    f.$k = function (a) {
        return this.elements[a].$k(0)
    };
    f.pE = function (a) {
        return this.elements[a].pE(0)
    };
    f.Iv = function (a) {
        return this.elements[a].Iv(0)
    };
    f.ps = function (a) {
        return this.elements[a].ps(0)
    };
    f.HG = function (a) {
        return this.elements[a].HG(0)
    };
    f.Vv = function (a) {
        return this.elements[a].Vv(0)
    };
    f.Jn = function (a, b) {
        KE(this, a) ? this.elements[a].Jn(0, b) : this.DO(b)
    };
    f.setColor = function (a, b) {
        this.elements[a] ? NE(this.elements[a], b) : this.EO(b);
        this.lb()
    };

    function NE(a, b) {
        if (b)
            if (a instanceof up)
                a.setColor(0, b);
            else
                for (var c = 0; c < a.Jd(); c++)
                    a.ce(c, b)
    }
    f.ce = function (a, b) {
        this.kd && this.kd.Jd() && this.kd.ce(a, b)
    };
    f.LG = function (a, b) {
        this.elements[a].LG(0, b)
    };
    f.aq = function (a, b) {
        this.elements[a].aq(0, b)
    };
    f.aB = function (a, b) {
        this.elements[a].aB(0, b)
    };
    f.Zj = function (a, b, c, d) {
        KE(this, a) ? this.elements[a].Zj(0, b, c, d) : this.JG(b, c, d)
    };
    f.qe = function (a, b) {
        if (KE(this, a))
            this.elements[a].qe(0, b);
        else if (0 !== ME(this))
            this.KG(b);
        else {
            var c = b / OE(this);
            this.elements.forEach(function (a) {
                if (a instanceof up) {
                    var b = Math.round(10 * a.dd(0) * c) / 10;
                    a.qe(0, b)
                }
            })
        }
    };
    f.$A = function (a) {
        this.qe(this.Ib(), a)
    };
    f.dK = function () {
        var a = this.Ib(); -
        1 !== a ? eD(this.elements[a]) : this.elements.forEach(function (a) {
            a instanceof up && eD(a)
        })
    };
    f.pD = function () {
        var a = this.Ib(); -
        1 !== a ? this.elements[a].Gd = !1 : this.elements.forEach(function (a) {
            a instanceof up && (a.Gd = !1)
        })
    };
    f.xz = function () {
        var a = this.Ib();
        return -1 !== a ? this.elements[a].Gd : PE(this)
    };
    f.Ln = function (a, b) {
        KE(this, a) ? this.elements[a].Ln(0, b) : this.FO(b)
    };
    f.ai = function (a, b) {
        this.elements[a].ai(0, b)
    };
    f.Zv = function (a, b, c) {
        this.elements[a].Zv(0, b, c)
    };
    f.MG = function (a, b) {
        this.elements[a].MG(0, b)
    };
    f.$v = function (a, b) {
        this.elements[a].$v(0, b)
    };
    f.aw = function (a, b) {
        this.elements[a].aw(0, b)
    };
    f.bw = function (a, b) {
        this.elements[a].bw(0, b)
    };
    f.hq = function (a, b) {
        this.elements[a].hq(0, b)
    };

    function QE(a) {
        function b(a) {
            -1 === d.indexOf(a) && d.push(a)
        }

        function c(a) {
            -1 === e.indexOf(a) && e.push(a)
        }
        var d = [],
            e = [];
        a.elements.filter(function (a) {
            return a instanceof up
        }).forEach(function (a) {
            a = mz(a.O());
            a.Te.forEach(b);
            a.tf.forEach(c)
        });
        return {
            Te: d,
            tf: e
        }
    }
    f.Gy = function () {
        var a = {};
        this.elements.filter(function (a) {
            return a instanceof up
        }).forEach(function (b) {
            var c = b.Vv(0);
            Wy.forEach(function (b) {
                -1 === Object.keys(a).indexOf(b) ? a[b] = c[b] : a[b] !== c[b] && (a[b] = null)
            })
        });
        return a
    };
    f.og = function () {
        var a = QE(this).tf.map(function (a) {
            return gh(a)
        });
        this.elements.forEach(function (b) {
            b.Jd() && (a = a.concat(b.ob()))
        });
        return a
    };

    function RE(a) {
        function b(a) {
            return a instanceof Om ? a.Ca() : "string" === typeof a ? a : "#000000"
        }
        var c = QE(a).tf;
        a.elements.forEach(function (a) {
            a.Jd() && (c = c.concat(a.ob().map(b)))
        });
        return c
    }

    function SE(a) {
        return RE(a).filter(function (a, c, d) {
            return d.indexOf(a) === c
        })
    }

    function TE(a) {
        var b = a.Gy(),
            c = $("\x3cdiv\x3e");
        Wy.forEach(function (a) {
            c.data(a, b[a])
        });
        return c
    }

    function ME(a) {
        for (var b, c = 0; c !== a.elements.length; c++)
            if (a.elements[c] instanceof up && (b = b || a.elements[c].dd(0),
                    b !== a.elements[c].dd(0)))
                return 0;
        return b
    }
    f.Jd = function () {
        return this.elements.reduce(function (a, b) {
            return a + b.Jd()
        }, 0)
    };
    f.ob = function () {
        return this.elements.reduce(function (a, b) {
            return b.Jd() ? a.concat(b.ob()) : a
        }, [])
    };

    function PE(a) {
        return a.elements.filter(function (a) {
            return a instanceof up
        }).every(function (a) {
            return a.Gd
        })
    }

    function UE(a) {
        return !PE(a) && a.elements.filter(function (a) {
            return a instanceof up
        }).some(function (a) {
            return a.Gd
        })
    }

    function OE(a) {
        for (var b = 0, c = 0; c !== a.elements.length; c++)
            a.elements[c] instanceof up && (b = Math.max(b, a.elements[c].dd(0)));
        return b
    }
    f.DO = function (a) {
        this.elements.forEach(function (b) {
            b instanceof up && b.Jn(0, a)
        });
        this.lb()
    };
    f.EO = function (a) {
        this.elements.forEach(function (b) {
            NE(b, a)
        });
        this.lb()
    };
    f.JG = function (a, b, c) {
        function d(a) {
            g += 1;
            !h && g >= e && (h = !0,
                k = k && a,
                b && b(k))
        }
        var e = 0,
            g = 0,
            h = !1,
            k = !0;
        this.elements.forEach(function (b) {
            b instanceof up && (e += 1,
                b.Zj(0, a, d, c))
        })
    };
    f.KG = function (a) {
        this.elements.forEach(function (b) {
            b instanceof up && b.qe(0, a)
        })
    };
    f.FO = function (a) {
        this.elements.forEach(function (b) {
            b instanceof up && b.Ln(0, a)
        })
    };
    f.yw = function () {
        for (var a = 0; a < this.elements.length; a++)
            this.elements[a] instanceof up && this.elements[a].yw()
    };
    f.WN = function () {
        this.zn()
    };
    f.zn = function () {
        var a = $(this.O()).data("toolbar");
        a && a.remove()
    };

    function VE(a) {
        for (var b = a, c = 0; c < a.elements.length; c++)
            a.elements[c].ea() > b.ea() && (b = a.elements[c]);
        return b
    }

    function WE(a) {
        function b(a, b) {
            return a.ea() - b.ea()
        }
        0 === a.elements.filter(function (a) {
            return -1 === a.ea()
        }).length && a.elements.sort(b);
        var c = a;
        a.elements.forEach(function (b) {
            b.insertAfter(c);
            c = b;
            b.O().appendTo(a.O().children(".elements"))
        })
    }
    f.insertBefore = function (a) {
        -1 != a.ea() && (Z.prototype.insertBefore.call(this, a),
            WE(this))
    };
    f.insertAfter = function (a) {
        -1 != a.ea() && (Z.prototype.insertAfter.call(this, a),
            WE(this))
    };
    f.zP = function () {
        var a = this.Ib(); -
        1 !== a && this.elements[a].zP()
    };
    f.jM = function () {
        var a = this.Ib(); -
        1 !== a && this.elements[a].jM()
    };
    f.qI = function () {
        var a = this.Ib(); -
        1 !== a && this.elements[a].qI()
    };
    f.lC = function () {
        return !1
    };
    f.PQ = function () {
        return !0
    };
    f.yq = function () {
        for (var a = 0; a !== this.elements.length; a++)
            if (this.elements[a].yq())
                return !0;
        return !1
    };
    f.kt = function () {
        for (var a = 0; a !== this.elements.length; a++)
            if (this.elements[a].kt())
                return !0;
        return !1
    };
    f.bq = function (a) {
        var b = this.ha();
        b && this.stopListening(b);
        Z.prototype.bq.call(this, a);
        XE(this, a)
    };

    function XE(a, b) {
        YE(a, b);
        a.listenTo(b, "change:background", function () {
            YE(this, b)
        })
    }

    function YE(a, b) {
        var c = gh("#000000"),
            d = gh(J.fC);
        a.elements.forEach(function (a) {
            a.wr && a.wr() && a.wr().forEach(function (g, h) {
                g && g.equals && (b.ug() && g.equals(c) ? a.setColor(h, d) : !b.ug() && g.equals(d) && a.setColor(h, c))
            });
            a.Jd() && a.ob().forEach(function (g, h) {
                g && g.equals && (b.ug() && g.equals(c) ? a.ce(h, d) : !b.ug() && g.equals(d) && a.ce(h, c))
            })
        })
    };

    function dB(a) {
        Z.call(this, a);
        this.O().addClass("shape");
        this.xl = [];
        this.viewBox = new U(0, 0, 0, 0);
        if (a && a.paths) {
            var b = a.paths.map(function (a) {
                return new ZE({
                    d: a.d,
                    fill: a.fill,
                    Rk: a.fillRule
                })
            });
            $E(this, b)
        }
        a && a.viewBox && aF(this, cm(a.viewBox));
        this.render();
        S.trigger("elementLoaded", this)
    }
    dB.prototype = Object.create(Z.prototype);
    f = dB.prototype;
    f.constructor = dB;

    function bF(a) {
        return new dB({
            top: a.N(),
            left: a.Y(),
            width: a.D(),
            height: a.F()
        })
    }

    function $E(a, b) {
        if (b.some(function (a) {
                return a.d.match(/[^emclazMCLAZ0-9., -]/)
            }))
            throw Error("Invalid path data.");
        a.xl = b
    }

    function aF(a, b) {
        a.viewBox = b
    }
    f.render = function () {
        var a = this.viewBox,
            b = this.O().find("svg"),
            c = this.xl;
        b.length || (b = $(document.createElementNS("http://www.w3.org/2000/svg", "svg")),
            this.O().append(b));
        b.get(0).setAttribute("viewBox", [a.Y(), a.N(), a.D(), a.F()].join(" "));
        var d = b.find("path");
        d.slice(c.length).remove();
        c.forEach(function (a, c) {
            var h = (c = d.get(c)) || document.createElementNS("http://www.w3.org/2000/svg", "path");
            h.setAttribute("d", a.d);
            h.setAttribute("fill", a.fill);
            if (a.Rk) {
                a: switch (a.Rk) {
                    case "EVEN_ODD":
                        a = "evenodd";
                        break a;
                    default:
                        a = "nonzero"
                }
                h.setAttribute("fill-rule", a)
            }!c && b.append(h)
        })
    };
    f.serialize = function () {
        var a = Z.prototype.serialize.call(this);
        a.type = "shape";
        a.paths = this.xl.map(function (a) {
            return {
                d: a.d,
                fill: a.fill,
                fillRule: a.Rk
            }
        });
        a.viewBox = this.viewBox.serialize();
        return a
    };
    f.QQ = function () {
        return !0
    };
    f.ob = function () {
        return this.xl.map(function (a) {
            return gh(a.fill)
        })
    };
    f.Jd = function () {
        return this.ob().length
    };
    f.ce = function (a, b) {
        b && (this.xl[a] = new ZE({
                d: this.xl[a].d,
                fill: b.toString(),
                Rk: this.xl[a].Rk
            }),
            this.render(),
            this.we())
    };
    f.Hi = function () {
        if (this.pe)
            return this.pe;
        if (0 < this.O().parents(".group.chart").length)
            return new Co;
        var a = new Co;
        this.ob().forEach(function (b) {
            b && Fo(a, b)
        });
        return this.pe = a
    };

    function ZE(a) {
        this.d = a.d;
        this.fill = a.fill;
        this.Rk = a.Rk
    };

    function cF(a, b, c, d, e, g) {
        U.call(this, a, b, c, d);
        this.color = e;
        this.html = g || ""
    }
    t(cF, U);
    f = cF.prototype;
    f.setColor = function (a) {
        this.color = a;
        return this
    };
    f.pg = function () {
        return ["M", this.Y(), this.Ha(), "L", this.Y(), this.N(), "L", this.kb(), this.N(), "L", this.kb(), this.Ha(), "Z"].join(" ")
    };
    f.$b = function () {
        return this.color
    };
    f.toString = function () {
        return this.html
    };
    f.setElement = function (a) {
        this.element = a
    };
    f.getElement = function () {
        return this.element
    };
    f.em = function () {
        var a = {};
        a[dF] = this.N();
        a[eF] = this.Y();
        a[fF] = this.D();
        a[gF] = this.F();
        a[hF] = this.$b();
        return a
    };
    f.clone = function () {
        var a = new cF(this.Y(), this.N(), this.D(), this.F(), this.$b(), this.toString());
        a.setElement(this.getElement());
        return a
    };

    function iF(a, b, c, d, e) {
        e = {
            count: 1,
            ease: e,
            onUpdate: function () {
                return d(jF(a, b))
            },
            onComplete: function () {
                return b = c
            }
        };
        e[dF] = function (b, d) {
            return c[a.indexOf(d)].N()
        };
        e[eF] = function (b, d) {
            return c[a.indexOf(d)].Y()
        };
        e[fF] = function (b, d) {
            return c[a.indexOf(d)].D()
        };
        e[gF] = function (b, d) {
            return c[a.indexOf(d)].F()
        };
        e[hF] = function (b, d) {
            return c[a.indexOf(d)].$b()
        };
        return e
    }

    function kF(a) {
        return a.map(function (a) {
            return a.em()
        })
    }

    function jF(a, b) {
        return a.map(function (a, d) {
            d = b[d];
            d.rb(a[dF]);
            d.wb(a[eF]);
            d.za(a[fF]);
            d.oa(a[gF]);
            d.setColor(a[hF]);
            return d
        })
    }
    var dF = "TOP",
        eF = "LEFT",
        fF = "WIDTH",
        gF = "HEIGHT",
        hF = "COLOR";

    function lF(a, b, c, d, e, g) {
        cF.call(this, b, c, d, e, "transparent", g);
        this.pi = a;
        this.rotation = this.padding = 0
    }
    t(lF, cF);
    f = lF.prototype;
    f.scale = function (a, b) {
        var c = this.D(),
            d = this.F();
        cF.prototype.scale.call(this, a, b);
        this.za(c);
        this.oa(d);
        return this
    };
    f.Hl = function (a) {
        this.rotation = a;
        this.pi = 0 != this.rotation ? "right" : "center"
    };
    f.eb = function () {
        return this.rotation
    };
    f.Iy = function () {
        return this.pi
    };
    f.ai = function (a) {
        this.pi = a
    };
    f.sr = function () {
        return this.padding
    };
    f.dB = function (a) {
        this.padding = a
    };
    f.clone = function () {
        var a = new lF(this.Iy(), this.Y(), this.N(), this.D(), this.F(), this.toString());
        a.setElement(this.getElement());
        return a
    };

    function mF(a) {
        cF.call(this, 0, a.value, a.width, a.fi, a.color);
        this.fi = a.fi || 1
    }
    t(mF, cF);
    mF.prototype.scale = function (a, b) {
        cF.prototype.scale.call(this, a, b);
        this.oa(this.fi);
        return this
    };
    mF.prototype.clone = function () {
        var a = new mF({
            value: this.N(),
            width: this.D(),
            fi: this.F(),
            color: this.$b()
        });
        a.setElement(this.getElement());
        return a
    };

    function nF(a) {
        cF.call(this, a.index, a.top, 1, Math.abs(a.value), a.color)
    }
    t(nF, cF);
    nF.prototype.pg = function () {
        var a = Math.min(this.F(), Math.max(.08 * this.D(), 1));
        return ["M", this.Y(), this.Ha(), "L", this.Y(), this.Ha() - this.F() + a, "a", a, a, 0, 0, 1, a, -a, "L", this.kb() - a, this.Ha() - this.F(), "a", a, a, 0, 0, 1, a, a, "L", this.kb(), this.Ha(), "Z"].join(" ")
    };
    nF.prototype.clone = function () {
        var a = new nF({
            index: this.Y(),
            top: this.N(),
            value: this.F(),
            color: this.$b()
        });
        a.setElement(this.getElement());
        return a
    };

    function oF(a) {
        return Math.PI * (a + -90) / 180
    }

    function pF(a) {
        cF.call(this, a.left, a.top, a.width, a.height, a.color);
        this.ox = {
            x: 0,
            y: 0
        };
        this.data = "";
        this.Xg = a.Xg;
        this.jh = a.jh;
        this.mh = a.mh;
        this.ff = a.ff;
        this.ub = a.ub;
        this.am = a.am;
        this.bm = a.bm;
        this.value = a.value;
        this.nk = a.nk
    }
    t(pF, cF);
    f = pF.prototype;
    f.td = function () {
        this.QI();
        return this.ox
    };
    f.pg = function () {
        this.QI();
        return this.data
    };
    f.QI = function () {
        var a = this.am + this.ub * Math.cos(oF(this.ff)),
            b = this.bm + this.ub * Math.sin(oF(this.ff)),
            c = Math.min(this.Xg + 5, 359.999),
            d = this.am + this.ub * Math.cos(oF(c)),
            e = this.bm + this.ub * Math.sin(oF(c));
        this.$p(this.am + (this.ub + this.nk) * Math.cos(oF(this.jh)), this.bm + (this.ub + this.nk) * Math.sin(oF(this.jh)));
        this.data = ["M", this.am, this.bm, "L", a, b, "A", this.ub, this.ub, 0, 180 <= c - this.ff ? 1 : 0, 1, d, e, "Z"].join(" ")
    };
    f.oc = function () {
        return this.value
    };
    f.Vk = function () {
        return this.am
    };
    f.Wk = function () {
        return this.bm
    };
    f.$p = function (a, b) {
        this.ox = {
            x: a,
            y: b
        }
    };
    f.setData = function (a) {
        this.data = a
    };
    f.setRadius = function (a) {
        this.ub = a
    };
    f.clone = function () {
        return new pF({
            left: this.Y(),
            top: this.N(),
            width: this.D(),
            height: this.F(),
            color: this.$b(),
            value: this.oc(),
            mh: this.mh,
            ff: this.ff,
            jh: this.jh,
            Xg: this.Xg,
            ub: this.ub,
            am: this.Vk(),
            bm: this.Wk(),
            nk: this.nk
        })
    };
    f.em = function () {
        var a = {};
        a[qF] = this.ff;
        a[rF] = this.Xg;
        a[sF] = this.ub;
        a[tF] = this.$b();
        return a
    };

    function uF(a) {
        return a.map(function (a) {
            return a.em()
        })
    }

    function vF(a, b, c, d, e) {
        e = {
            count: 1,
            ease: e,
            onUpdate: function () {
                return d(wF(a, b))
            },
            onComplete: function () {
                return b = c
            }
        };
        e[qF] = function (b, d) {
            return c[a.indexOf(d)].ff
        };
        e[rF] = function (b, d) {
            return c[a.indexOf(d)].Xg
        };
        e[sF] = function (b, d) {
            return c[a.indexOf(d)].ub
        };
        e[tF] = function (b, d) {
            return c[a.indexOf(d)].$b()
        };
        return e
    }

    function wF(a, b) {
        return a.map(function (a, d) {
            d = b[d];
            d.ff = a[qF];
            d.Xg = a[rF];
            d.setRadius(a[sF]);
            d.setColor(a[tF]);
            return d
        })
    }
    var qF = "START_ANGLE",
        rF = "END_ANGLE",
        sF = "RADIUS",
        tF = "COLOR";

    function xF(a, b, c, d, e, g) {
        lF.call(this, a, b, c, d, e, g);
        this.ox = {
            x: 0,
            y: 0
        };
        this.CU = {
            x: 0,
            y: 0
        };
        this.angle = 0
    }
    t(xF, lF);
    xF.prototype.td = function () {
        return this.ox
    };
    xF.prototype.$p = function (a, b) {
        this.ox = {
            x: a,
            y: b
        }
    };

    function yF(a) {
        cF.call(this, a.left, a.top, a.width, a.height, a.color);
        this.data = a.data
    }
    t(yF, cF);
    yF.prototype.pg = function () {
        return this.data
    };

    function zF(a) {
        pF.call(this, a);
        this.Hh = a.Hh
    }
    t(zF, pF);
    zF.prototype.QI = function () {
        var a = Math.min(this.Xg + 5, 359.999),
            b = this.Vk() + this.ub * this.Hh * Math.cos(oF(this.ff)),
            c = this.Wk() + this.ub * this.Hh * Math.sin(oF(this.ff)),
            d = this.Vk() + this.ub * this.Hh * Math.cos(oF(a)),
            e = this.Wk() + this.ub * this.Hh * Math.sin(oF(a)),
            g = this.Vk() + this.ub * Math.cos(oF(this.ff)),
            h = this.Wk() + this.ub * Math.sin(oF(this.ff)),
            k = this.Vk() + this.ub * Math.cos(oF(a)),
            l = this.Wk() + this.ub * Math.sin(oF(a));
        this.$p(this.Vk() + (this.ub + this.nk) * Math.cos(oF(this.jh)), this.Wk() + (this.ub + this.nk) * Math.sin(oF(this.jh)));
        a = 180 <= a - this.ff ? 1 : 0;
        this.data = ["M", b, c, "L", g, h, "A", this.ub, this.ub, 0, a, 1, k, l, "L", d, e, "A", this.ub * this.Hh, this.ub * this.Hh, 0, a, 0, b, c, "Z"].join(" ")
    };
    zF.prototype.clone = function () {
        return new zF({
            left: this.Y(),
            top: this.N(),
            width: this.D(),
            height: this.F(),
            color: this.$b(),
            value: this.oc(),
            mh: this.mh,
            ff: this.ff,
            jh: this.jh,
            Xg: this.Xg,
            ub: this.ub,
            am: this.Vk(),
            bm: this.Wk(),
            nk: this.nk,
            Hh: this.Hh
        })
    };

    function AF(a) {
        cF.call(this, a.left, a.top, a.width, a.height, a.color);
        this.ub = a.ub
    }
    t(AF, cF);
    AF.prototype.setRadius = function (a) {
        this.ub = a
    };
    AF.prototype.pg = function () {
        var a = this.ub,
            b = this.Y() + this.D() / 2 - a,
            c = this.N();
        return ["M", b, c, "a", a, a, 0, 1, 0, 2 * a, 0, "a", a, a, 0, 1, 0, 2 * -a, 0, "Z"].join(" ")
    };
    AF.prototype.clone = function () {
        return new AF({
            left: this.Y(),
            top: this.N(),
            width: this.D(),
            height: this.F(),
            color: this.$b(),
            ub: this.ub
        })
    };
    AF.prototype.em = function () {
        var a = cF.prototype.em.call(this);
        a[sF] = this.ub;
        return a
    };

    function BF(a, b, c, d) {
        var e = iF(a, b, c, d, Power1.easeOut);
        e.onUpdate = function () {
            return d(CF(a, b))
        };
        e[sF] = function (b, d) {
            return c[a.indexOf(d)].ub
        };
        return e
    }

    function CF(a, b) {
        return a.map(function (a, d) {
            d = b[d];
            d.rb(a[dF]);
            d.wb(a[eF]);
            d.za(a[fF]);
            d.oa(a[gF]);
            d.setColor(a[hF]);
            d.setRadius(a[sF]);
            return d
        })
    }

    function DF(a, b, c, d) {
        var e = Math.min(a.x, b.x),
            g = Math.min(a.y, b.y);
        cF.call(this, e, g, Math.max(a.x, b.x) - e, Math.max(a.y, b.y) - g, c);
        this.Nc = a;
        this.qc = b;
        this.fi = d
    }
    t(DF, cF);
    DF.prototype.pg = function () {
        var a = this.fi / 2,
            b = 180 * Math.atan2(this.qc.y - this.Nc.y, this.qc.x - this.Nc.x) / Math.PI - -90 - 90,
            c = this.Nc.x - (this.Nc.x + a * Math.cos(oF(b))),
            a = this.Nc.y - (this.Nc.y + a * Math.sin(oF(b)));
        return ["M", this.Nc.x - c, this.Nc.y - a, "L", this.qc.x - c, this.qc.y - a, "L", this.qc.x + c, this.qc.y + a, "L", this.Nc.x + c, this.Nc.y + a, "Z"].join(" ")
    };
    DF.prototype.clone = function () {
        return new DF({
            x: this.Nc.x,
            y: this.Nc.y
        }, {
            x: this.qc.x,
            y: this.qc.y
        }, this.$b(), this.fi)
    };
    DF.prototype.em = function () {
        var a = {};
        a[EF] = this.Nc.x;
        a[FF] = this.Nc.y;
        a[GF] = this.qc.x;
        a[HF] = this.qc.y;
        a[IF] = this.$b();
        a[JF] = this.fi;
        return a
    };

    function KF(a, b, c, d, e) {
        e = {
            count: 1,
            ease: e,
            onUpdate: function () {
                return d(LF(a, b))
            },
            onComplete: function () {
                return b = c
            }
        };
        e[EF] = function (b, d) {
            return c[a.indexOf(d)].Nc.x
        };
        e[FF] = function (b, d) {
            return c[a.indexOf(d)].Nc.y
        };
        e[GF] = function (b, d) {
            return c[a.indexOf(d)].qc.x
        };
        e[HF] = function (b, d) {
            return c[a.indexOf(d)].qc.y
        };
        e[IF] = function (b, d) {
            return c[a.indexOf(d)].$b()
        };
        e[JF] = function (b, d) {
            return c[a.indexOf(d)].fi
        };
        return e
    }

    function MF(a) {
        return a.map(function (a) {
            return a.em()
        })
    }

    function LF(a, b) {
        return a.map(function (a, d) {
            d = b[d];
            d.Nc.x = a[EF];
            d.Nc.y = a[FF];
            d.qc.x = a[GF];
            d.qc.y = a[HF];
            d.setColor(a[IF]);
            d.fi = a[JF];
            return d
        })
    }
    var EF = "POINT_1_X",
        FF = "POINT_1_Y",
        GF = "POINT_2_X",
        HF = "POINT_2_Y",
        IF = "COLOR",
        JF = "THICKNESS";
    var NF = /([^\-0-9,.]*)([\-0-9,.\s]*\d)(\D*)/;

    function OF(a) {
        this.parsed = !1;
        this.value = a;
        this.Qi = NaN;
        this.post = this.wM = this.vA = "";
        this.parse()
    }
    OF.prototype.ak = function (a) {
        this.value = a;
        this.parsed = !1;
        return this
    };
    OF.prototype.parse = function () {
        if (!this.parsed) {
            var a = NF.exec(this.value);
            a && !isNaN(PF(this.value)) ? (this.Qi = PF(this.value),
                this.vA = a[1],
                this.wM = a[2],
                this.post = a[3]) : (this.Qi = NaN,
                this.post = this.wM = this.vA = "");
            this.parsed = !0
        }
    };
    OF.prototype.toString = function () {
        this.parse();
        return this.vA + this.wM + this.post
    };
    OF.prototype.isValid = function () {
        this.parse();
        return !isNaN(this.Qi) && ("" !== this.vA || "" !== this.post)
    };

    function PF(a) {
        if (a = NF.exec(a))
            if (a = parseFloat(a[2].replace(/[,\s]*/g, "")), !isNaN(a))
                return a;
        return NaN
    };

    function QF(a) {
        a = void 0 === a ? {} : a;
        var b = a.bar || {};
        this.SY = !0;
        this.Kr = 5;
        this.spacing = void 0 !== b.spacing ? b.spacing : .5;
        this.padding = void 0 !== b.padding ? b.padding : 10;
        this.VQ = !1;
        this.color = dn(Vm(a.colors ? a.colors[0] : "#00c4cc"), a.gradientRange);
        this.data = [];
        this.Wx = new U(0, 0, 0, 0);
        this.Md = void 0 !== a.labelset ? a.labelset : 0;
        this.Pf = this.Md + 1;
        this.nl = {
            labels: [],
            nI: [],
            ck: []
        };
        this.Yd = {
            labels: [],
            Vu: [],
            ck: []
        };
        this.vM = a.vM || function (a) {
            return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
        };
        a.data && this.Nr(a.data)
    }
    f = QF.prototype;
    f.Nr = function (a, b, c) {
        var d = this;
        this.Md = b || this.Md;
        this.Pf = c || this.Pf;
        this.Md === this.Pf && this.Pf++;
        var e = null;
        this.data = a.map(function (a) {
            var b = new OF(a[d.Pf]);
            !e && b.isValid() && (e = b);
            a = a[d.Md];
            b.parse();
            return [a, b.Qi]
        }).filter(function (a) {
            return !isNaN(a[d.Pf])
        });
        c = this.data.map(function (a) {
            return a[d.Pf]
        });
        a = 0;
        b = _.max(c);
        this.VQ && (a = Math.min(0, _.min(c)));
        this.SY && (this.Kr = 5,
            5 < b && 10 >= b && 0 !== b % 2 ? b += 2 - b % 2 : 10 < b && 25 >= b && 0 !== b % 5 ? b += 5 - b % 5 : 25 < b && 100 >= b && 0 !== b % 10 ? b += 10 - b % 10 : 100 < b && 1E3 >= b && 0 !== b % 50 ? b += 50 - b % 50 : 1E3 < b && 1E4 >= b && 0 !== b % 100 ? b += 100 - b % 100 : 1E4 < b && (c = Math.pow(10, Math.floor(Math.log10(b))),
                b /= c,
                b = (Math.floor(b) + Math.ceil(20 * (b - Math.floor(b))) / 20) * c),
            4 < b && (0 === b % 4 ? this.Kr = 5 : 0 === b % 3 ? this.Kr = 4 : 0 === b % 5 && (this.Kr = 6)));
        this.Wx = new U(0, a, this.data.length, b - a);
        this.Yd = RF(this, a, b, e);
        this.nl = SF(this, this.data, a)
    };
    f.WS = function () {
        var a = [];
        a[1] = this.nl.ck.slice();
        a[0] = this.Yd.ck.slice();
        return a
    };
    f.getData = function () {
        return this.data
    };
    f.gq = function (a) {
        this.spacing = a
    };
    f.le = function () {
        return this.spacing
    };

    function RF(a, b, c, d) {
        for (var e = [], g = [], h = [], k = [], l = 0; l < a.Kr; l++)
            k.push(Mm(b, c, l / (a.Kr - 1)));
        var m = k.reduce(function (a, b) {
            return Math.abs(a) < Math.abs(b) ? a : b
        });
        k.forEach(function (c) {
            var k = c - m;
            c = k + Math.abs(b);
            var l = a.vM(k.toString());
            d && (d.parse(),
                l = d.vA + l + d.post);
            h.push(l);
            k = new mF({
                value: k + Math.abs(b),
                width: a.Wx.D(),
                fi: 1,
                color: "#ccc"
            });
            e.push(new lF("right", 0, c, a.Kr - 1, 1, l));
            g.push(k)
        });
        return {
            ck: h,
            labels: e,
            Vu: g
        }
    }

    function SF(a, b, c) {
        var d = [],
            e = [],
            g = [];
        b.forEach(function (b, k) {
            var l = parseFloat(b[a.Pf]);
            !a.VQ && 0 > l && (l = 0);
            var m = new lF("center", k, 0, 1, 1, b[a.Md]);
            e.push(new nF({
                index: k,
                top: 0 >= c && 0 < l ? Math.abs(c) : Math.abs(c) - Math.abs(l),
                value: l,
                color: "#ccc"
            }));
            d.push(m);
            g.push(b[a.Md])
        });
        return {
            labels: d,
            nI: e,
            ck: g
        }
    }

    function TF(a, b, c, d) {
        var e = c.D() / a.Wx.D(),
            g = c.F() / a.Wx.F();
        return b.map(function (a) {
            a = a.clone();
            a.scale(e, g);
            a.translate(c.Y(), c.N());
            a.oa(a.F());
            a.rb(d.F() - a.N() - a.F());
            return a
        })
    }
    f.Qq = function (a) {
        function b(a, b) {
            return a > b ? a : b
        }
        var c = this;
        if (0 === this.data.length || 0 === this.Wx.F())
            return {
                Yd: [
                    [],
                    []
                ],
                data: [
                    [],
                    []
                ]
            };
        var d = a.Ew.Tw[0].reduce(b, 0),
            e = a.Ew.Tw[1].reduce(b, 0),
            g = a.Ew.NL;
        this.padding = .5 * g;
        this.spacing = void 0 !== a.spacing ? a.spacing : this.spacing;
        this.color = a.color || this.color;
        var h = a.FD,
            k = h.D() - d - 2 * this.padding,
            l = k / this.nl.nI.length,
            m = l < e,
            n = m ? .7071067811865475 * (e + g) : g,
            p = d + this.padding,
            r = (1 - this.spacing) * l,
            u = h.F() - n - g - this.padding,
            v = new U(0, n + this.padding + g / 2, d, u),
            y = m ? this.padding : .5 * this.padding,
            q = new U(p + (m ? .7071067811865475 * g / 2 : 0), h.F() - n - y, k, n),
            n = new U(p, n + this.padding, k, u),
            k = TF(this, this.Yd.Vu, n, h),
            v = TF(this, this.Yd.labels, v, h),
            x = TF(this, this.nl.nI, n, h),
            E = TF(this, this.nl.labels, q, h);
        E.forEach(function (a) {
            return a.oa(g)
        });
        v.forEach(function (a) {
            return a.za(d)
        });
        x.forEach(function (a, b) {
            a.setColor(c.color(b, x.length));
            if (1 === x.length)
                a.za(l);
            else {
                var d = 1 < x.length ? b * c.spacing * l / (x.length - 1) : 0;
                a.za(r).translate(d, -1);
                E[b].translate(-(l - r) / 2 + d, 0)
            }
        });
        k.forEach(function (b) {
            return b.setColor(a.Tu)
        });
        E.forEach(function (a) {
            if (m) {
                var b = a.Y() + l / 2;
                a.za(e);
                a.wb(b - .7071067811865475 * (e + g));
                a.Hl(-45);
                a.rb(q.N() + .35355339059327373 * e)
            } else
                a.za(l),
                a.rb(q.N())
        });
        var B = Math.ceil(1.2 * g / l),
            E = E.filter(function (a, b) {
                return 0 === b % B
            }),
            h = {
                Yd: [],
                data: []
            };
        h.Yd.push(k);
        h.Yd.push(v);
        h.data.push(x);
        h.data.push(E);
        return h
    };

    function UF(a) {
        var b = "undefined" !== typeof a.q0 ? a.q0 : 1;
        this.canvas = document.createElement("canvas");
        this.color = dn(Vm(a.color || "#00c4cc"), b);
        this.data = [];
        this.Md = 0;
        this.nl = [];
        this.total = 0;
        this.Pf = 1;
        this.ck = [];
        this.spacing = a.spacing || 0;
        a.data && this.Nr(a.data)
    }
    f = UF.prototype;
    f.getData = function () {
        return this.data
    };
    f.WS = function () {
        return this.ck
    };
    f.le = function () {
        return this.spacing
    };
    f.gq = function (a) {
        this.spacing = a
    };
    f.Nr = function (a, b, c) {
        var d = this;
        this.Md = b || this.Md;
        this.Pf = c || this.Pf;
        this.data = a.map(function (a) {
            return [a[d.Md], PF(a[d.Pf])]
        }).filter(function (a) {
            return !isNaN(a[d.Pf])
        }).filter(function (a) {
            return 0 < a[d.Pf]
        });
        this.total = this.data.reduce(function (a, b) {
            return a + b[d.Pf]
        }, 0);
        this.nl = this.data.map(function (a) {
            return [a[0], a[d.Pf], 100 * a[d.Pf] / d.total]
        });
        this.ck[0] = this.data.map(function (a, b) {
            return "" + d.nl[b][0]
        });
        this.ck[1] = this.data.map(function (a, b) {
            return Math.round(d.nl[b][2]) + "%"
        })
    };
    f.Qq = function (a) {
        for (var b = a.color || this.color, c = a.FD, d = a.I0 || .9, e = "undefined" !== typeof a.aU ? a.aU : .3, d = Math.min(c.F(), c.D()) / 2 * d, g = VF(this, b, c, d, e, a.Tu, a.Ew), h = WF(g, c); 0 < h && 10 < d;)
            d = Math.max(d - h, 10),
            g = VF(this, b, c, d, e, a.Tu, a.Ew),
            h = WF(g, c);
        return g
    };

    function VF(a, b, c, d, e, g, h) {
        e *= h.fontSize;
        var k = c.D() / 2,
            l = c.F() / 2;
        b = XF(a, c, b, k, l, d, e);
        c = [];
        var m = [];
        if (0 < h.fontSize) {
            var m = d + 2.1 * h.fontSize,
                n = 2 * h.NL;
            c = YF(a, b, k, l, m, n, e, h);
            m = ZF(c, k, l, m, n, g)
        }
        return {
            B0: 0 < m.length,
            labels: c,
            Vu: m,
            Z4: d,
            Sn: b
        }
    }

    function YF(a, b, c, d, e, g, h, k) {
        return b.map(function (b, m) {
            var n = Math.ceil(Math.max(k.Tw[0][m], k.Tw[1][m])) + 2 * h,
                p = .0032 * n * (90 - Math.abs(b.jh % 180 - 90)),
                r = c + (e + p) * Math.cos(oF(b.jh)),
                p = d + (e + p) * Math.sin(oF(b.jh));
            m = new xF("center", r - n / 2, p - g / 2, n, g, "\x3cb\x3e" + a.ck[0][m] + "\x3c/b\x3e\x3cbr/\x3e" + a.ck[1][m]);
            m.$p(r, p);
            m.angle = b.jh;
            m.slice = b;
            return m
        })
    }

    function $F(a, b, c, d) {
        var e = a.slice,
            g = e.td(),
            h = a.td(),
            k = a.CU,
            l = (2 * k.x + e.td().x) / 3,
            m = (2 * k.y + e.td().y) / 3,
            n = (2 * k.x + a.td().x) / 3;
        a = (2 * k.y + a.td().y) / 3;
        b = g.x >= b ? 1 : -1;
        c = g.y >= c ? -1 : 1;
        g = ["M", g.x, g.y, "C", l, m, ",", n, a, ",", h.x, h.y, "L", h.x + b, h.y + c, "C", n + b, a + c, ",", l + b, m + c, ",", g.x + b, g.y + c, "Z"].join(" ");
        return new yF({
            left: e.Y(),
            top: e.N(),
            width: e.D(),
            height: e.F(),
            color: d,
            data: g
        })
    }

    function XF(a, b, c, d, e, g, h) {
        var k = 0;
        return a.nl.map(function (l, m, n) {
            var p = 3.6 * k,
                r = p + 3.6 * l[2],
                u = p + 1.8 * l[2];
            k += l[2];
            return a.IR({
                top: 0,
                left: 0,
                width: b.D(),
                height: b.F(),
                value: l[1],
                mh: l[2],
                color: c(m, n.length),
                ff: p,
                Xg: r,
                jh: u,
                ub: g,
                am: d,
                bm: e,
                nk: h
            })
        })
    }
    f.IR = function (a) {
        return new pF(a)
    };

    function WF(a, b) {
        b = b.clone().setPosition(0, 0);
        a = a.labels.reduce(function (a, b) {
            return {
                left: Math.min(a.left, b.Y()),
                top: Math.min(a.top, b.N()),
                right: Math.max(a.right, b.kb()),
                bottom: Math.max(a.bottom, b.Ha())
            }
        }, {
            left: b.Y(),
            top: b.N(),
            right: b.kb(),
            bottom: b.Ha()
        });
        return parseInt(Math.max(Math.abs(a.left - b.Y()), Math.abs(a.top - b.N()), Math.abs(a.right - b.kb()), Math.abs(a.bottom - b.Ha())), 10)
    }

    function ZF(a, b, c, d, e, g) {
        for (var h = [], k = [], l = 0; 10 > l; l++) {
            var m = h.length;
            a.forEach(function (b) {
                a.forEach(function (a) {
                    b !== a && Sg(b, a) && [b, a].forEach(function (a) {
                        -1 === h.indexOf(a) && h.push(a)
                    })
                })
            });
            if (h.length === m)
                break;
            h.forEach(function (a) {
                var g = b + d * Math.cos(oF(a.angle)),
                    h = c + d * Math.sin(oF(a.angle));
                a.$p(g, h);
                a.rb(h - e / 2);
                a.td().x >= b ? a.wb(g) : a.wb(g - a.D());
                a.CU = {
                    x: g,
                    y: h
                }
            })
        }
        var l = h.filter(function (a) {
                return a.td().x >= b && a.td().y < c
            }),
            m = h.filter(function (a) {
                return a.td().x >= b && a.td().y >= c
            }),
            n = h.filter(function (a) {
                return a.td().x < b && a.td().y < c
            }),
            p = h.filter(function (a) {
                return a.td().x < b && a.td().y >= c
            }),
            r = [l, m, n, p];
        r.filter(function (a) {
            return a.length
        }).forEach(function (a) {
            a.sort(function (a, b) {
                return a.N() > b.N() ? 1 : -1
            });
            a[0].td().y < c && a.reverse()
        });
        var u = 0;
        l[0] && m[0] && Sg(l[0], m[0]) && (u = l[0].Ha() - m[0].N());
        n[0] && p[0] && Sg(n[0], p[0]) && (u = Math.max(u, n[0].Ha() - p[0].N()));
        r.forEach(function (a) {
            a.forEach(function (d, h) {
                var l = u / 2,
                    m = d.td(),
                    n = d.td().x >= b ? m.x + 25 : m.x - 25,
                    l = d.td().y >= c ? m.y + l : m.y - l,
                    p = d.td().x >= b ? n : n - d.D();
                d.$p(n, l);
                d.wb(p);
                d.rb(l - e / 2);
                if ((l = a[h - 1]) && Sg(d, l))
                    for (l = l.td(),
                        l = d.td().y >= c ? l.y + e : l.y - e,
                        d.$p(n, l),
                        d.rb(l - e / 2),
                        m = l - m.y,
                        h += 1; h < a.length; h++)
                        n = a[h],
                        l = n.td(),
                        p = l.y + m,
                        n.$p(l.x, p),
                        n.rb(p - e / 2);
                k.push($F(d, b, c, g))
            })
        });
        return k
    }

    function aG(a) {
        UF.call(this, a);
        this.Hh = a.Hh || .55
    }
    t(aG, UF);
    aG.prototype.IR = function (a) {
        a = Object.assign({}, a, {
            Hh: this.Hh
        });
        return new zF(a)
    };

    function bG(a) {
        a = void 0 === a ? {} : a;
        QF.call(this, a)
    }
    t(bG, QF);
    bG.prototype.Qq = function (a) {
        var b = QF.prototype.Qq.call(this, a),
            c = b.data[0],
            d = a.FD.F() / 100,
            e = 1.5 * d,
            g = c.map(function (a) {
                return a.$b()
            });
        g.unshift(g[0]);
        var h = e;
        a = d;
        1 < c.length && (a = c[1].Y() - c[0].Y(),
            h = Math.max(Math.min(e, a / 3), .5 * d),
            a = h / e * d);
        c = c.map(function (a, b) {
            return new AF({
                left: a.Y(),
                top: a.N(),
                width: a.D(),
                height: a.D(),
                color: g[b],
                ub: h
            })
        });
        d = [];
        for (e = 0; e < c.length - 1; e++) {
            var k = c[e],
                l = c[e + 1];
            d.push(new DF({
                x: k.Y() + k.D() / 2,
                y: k.N()
            }, {
                x: l.Y() + l.D() / 2,
                y: l.N()
            }, l.$b(), a))
        }
        b.data[0] = d.concat(c);
        return b
    };
    var cG = {
            type: "text",
            transparency: 0,
            fontFamily: J.Sd,
            fontSize: J.Rd
        },
        dG = {
            type: "image",
            isBackground: !1,
            isRecolorable: !0
        };

    function eG(a) {
        var b = a.serialize();
        b.backgroundColor = a.$b();
        return new aB(_.extend({}, dG, b))
    }

    function fG(a, b, c) {
        var d = a.serialize();
        d.html = a.toString();
        d.justification = 0 != a.eb() ? "right" : "center";
        d.rotation = a.eb();
        d.padding = a.padding;
        c && (d.fontMedia = c);
        return new up(_.extend({}, cG, d, b))
    }

    function gG(a, b, c, d) {
        var e = d.chart;
        this.Jv = a;
        this.wi = e.chartType;
        this.data = e.data;
        this.e_ = b;
        this.cD = c;
        this.ed = e.labelTextStyle;
        this.Cz = e.labelFontMedia;
        this.Ar = e.interpolation;
        this.Nq = hG(d);
        this.fj = !0;
        iB.call(this, d);
        this.O().addClass("chart");
        this.o_ = _.debounce(this.render, 300)
    }
    gG.prototype = Object.create(iB.prototype);
    f = gG.prototype;
    f.constructor = iB;

    function hB(a) {
        a = JSON.parse(JSON.stringify(a));
        a.chart.data = iG(a.chart.data);
        var b = jG(a);
        return new gG(b, eG, fG, a)
    }

    function kG(a) {
        var b;

        function c(a, b) {
            var c = document.createElementNS("http://www.w3.org/2000/svg", "g");
            c.setAttribute("shape-rendering", "crispEdges");
            c.setAttribute("style", "opacity: 0.15;");
            c.setAttribute("data-recolorable-lines", "true");
            a.Yd[0].forEach(function (a) {
                var b = document.createElementNS("http://www.w3.org/2000/svg", "line"),
                    d = Math.max(2, a.N());
                b.setAttribute("x1", a.Y());
                b.setAttribute("y1", d);
                b.setAttribute("x2", a.kb());
                b.setAttribute("y2", d);
                b.setAttribute("stroke", a.$b());
                b.setAttribute("stroke-width", "1");
                b.setAttribute("vector-effect", "non-scaling-stroke");
                c.appendChild(b)
            });
            b.appendChild(c)
        }
        var d = JSON.parse(JSON.stringify(a));
        b = b || new U(0, 0, d.width, d.height);
        a = d.chart.chartType;
        var e = d.chart;
        e.data = iG(e.data);
        var g = jG(d),
            d = hG(d),
            e = g.Qq({
                FD: b,
                Ew: {
                    Tw: [
                        [0],
                        [0]
                    ],
                    NL: 0,
                    fontSize: 0
                },
                color: d,
                Tu: e.labelTextStyle.color || lG,
                I0: e.idealPieRadiusFactor || .8
            }),
            h = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        h.setAttribute("width", "100%");
        h.setAttribute("height", "100%");
        h.setAttribute("preserveAspectRatio", "xMaxYMax");
        h.setAttribute("viewBox", b.Y() + " " + b.N() + " " + b.D() + " " + b.F());
        switch (a) {
            case mG:
                c(e, h);
                e.data[0].forEach(function (a) {
                    var b = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                    b.setAttribute("x", a.Y());
                    b.setAttribute("y", a.N());
                    b.setAttribute("width", a.D());
                    b.setAttribute("height", a.F());
                    b.setAttribute("fill", a.$b());
                    h.appendChild(b)
                });
                break;
            case nG:
            case oG:
                e.Sn.forEach(function (a) {
                    var b = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    b.setAttribute("d", a.pg());
                    b.setAttribute("fill", a.$b());
                    h.appendChild(b)
                });
                break;
            case pG:
                c(e, h);
                var k = 1;
                e.data[0].filter(function (a) {
                    return a instanceof DF
                }).forEach(function (a) {
                    var b = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    b.setAttribute("x1", a.Nc.x);
                    b.setAttribute("y1", a.Nc.y);
                    b.setAttribute("x2", a.qc.x);
                    b.setAttribute("y2", a.qc.y);
                    b.setAttribute("stroke", a.$b());
                    b.setAttribute("stroke-width", .65 * a.fi);
                    b.setAttribute("stroke-linecap", "round");
                    b.setAttribute("vector-effect", "non-scaling-stroke");
                    h.appendChild(b);
                    k = a.fi
                });
                e.data[0].filter(function (a) {
                    return a instanceof AF
                }).forEach(function (a) {
                    var b = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                    b.setAttribute("cx", a.Y() + a.D() / 2);
                    b.setAttribute("cy", a.N());
                    b.setAttribute("r", k);
                    b.setAttribute("fill", a.$b());
                    b.setAttribute("stroke", a.$b());
                    b.setAttribute("stroke-width", .75 * k);
                    b.setAttribute("vector-effect", "non-scaling-stroke");
                    h.appendChild(b)
                })
        }
        return h
    }

    function jG(a) {
        a = a.chart;
        var b;
        b = Kb;
        b.AI || (b.AI = new kf(b.config));
        b = b.AI;
        a.vM = b.dZ.bind(b);
        switch (a.chartType) {
            case mG:
                return new QF(a);
            case nG:
                return new UF(a);
            case pG:
                return new bG(a);
            case oG:
                return new aG(a)
        }
        throw Error("Invalid chart type specified");
    }

    function hG(a) {
        a = a.chart || {};
        switch (a.coloringType) {
            case qG:
                if (a.interpolation && (a = en(a.interpolation)))
                    return a
        }
        return rG
    }
    f.getData = function () {
        return JSON.parse(JSON.stringify(this.data))
    };
    f.le = function () {
        return this.Jv.le()
    };
    f.gq = function (a) {
        this.Jv.gq(a);
        this.render()
    };
    f.Nr = function (a) {
        this.data = JSON.parse(JSON.stringify(a));
        this.Jv.Nr(this.data)
    };
    f.wr = function () {
        return [gh(this.ed.color)]
    };
    f.ob = function () {
        return [gh(this.Nq(0, 1))]
    };
    f.Jd = function () {
        return this.ob().length
    };
    f.ce = function (a, b) {
        if (b instanceof Om) {
            switch (this.wi) {
                case nG:
                case oG:
                    this.Nq = dn(b, 1, 90, 0, 36);
                    break;
                case mG:
                case pG:
                    this.Nq = this.Ar && this.Ar.from === this.Ar.to ? function () {
                            return b.Ca()
                        } :
                        dn(b, .75)
            }
            this.render({
                Z8: !0
            })
        }
    };

    function sG(a) {
        return new U(a.Y(), a.N(), a.D(), a.F())
    }

    function tG(a) {
        for (var b = sG(a).setPosition(0, 0), c = a.xa().filter(function (a) {
                return a instanceof dB
            }), d = 0; 2 > d; d++) {
            var e = c[d];
            e || (e = bF(b),
                FE(a, e, d),
                c[d] = e);
            e.viewBox = b;
            e.za(b.D());
            e.oa(b.F())
        }
        return c
    }

    function uG(a) {
        return function (b) {
            $E(a, b.map(function (a) {
                return new ZE({
                    d: a.pg(),
                    fill: a.$b()
                })
            }));
            a.render()
        }
    }

    function vG(a, b) {
        a = a.Yd[0];
        var c = uG(b);
        b.Il(75);
        c(a)
    }

    function wG(a, b) {
        var c = tG(a),
            d = c[0],
            e = a.Pb.data[0],
            g = b.data[0],
            c = uG(c[1]);
        if (a.fj)
            if (e.length) {
                a = Math.max(g.length, e.length);
                for (var h = 0; h < a; h++) {
                    var k = g[h],
                        l = e[h];
                    k && !l ? e.push(k) : k || e.pop()
                }
                a = kF(e);
                TweenMax.to(a, .3, iF(a, e, g, c, Power1.easeOut))
            } else
                a.Pb = b,
                c(a.Pb.data[0]);
        else
            c(g);
        vG(b, d)
    }

    function xG(a, b) {
        function c() {
            if (m.length) {
                var a = [],
                    c = [],
                    k = m.filter(d),
                    l = m.filter(e),
                    q = n.filter(d),
                    x = n.filter(e);
                g(q, k, k[0]);
                g(x, l, k[0]);
                var E = kF(k),
                    B = MF(l),
                    k = BF(E, k, q, function (b) {
                        c = b;
                        p(a.concat(c))
                    });
                TweenMax.to(B, .3, KF(B, l, x, function (b) {
                    a = b;
                    p(a.concat(c))
                }, Power1.easeOut));
                TweenMax.to(E, .3, k)
            } else
                h.Pb = b,
                p(h.Pb.data[0])
        }

        function d(a) {
            return a instanceof AF
        }

        function e(a) {
            return a instanceof DF
        }

        function g(a, b, c) {
            for (var d = Math.max(a.length, b.length), e = 0; e < d; e++) {
                var g = a[e],
                    h = b[e];
                if (g && !h) {
                    var h = g.clone(),
                        k = b.length - 1;
                    g instanceof DF ? -1 < k ? (h.qc.x = b[k].qc.x,
                        h.qc.y = b[k].qc.y,
                        h.Nc.x = b[k].qc.x,
                        h.Nc.y = b[k].qc.y) : (g = c.Y() + c.D() / 2 - c.ub,
                        h.qc.x = g,
                        g = c.N(),
                        h.qc.y = g,
                        g = c.Y() + c.D() / 2 - c.ub,
                        h.Nc.x = g,
                        g = c.N(),
                        h.Nc.y = g) : g instanceof AF && (h.wb(b[k].Y()),
                        h.rb(b[k].N()),
                        h.za(b[k].D()),
                        h.oa(b[k].F()));
                    b.push(h)
                } else
                    g || b.pop()
            }
        }
        var h = a,
            k = tG(a),
            l = k[0],
            m = a.Pb.data[0],
            n = b.data[0],
            p = uG(k[1]);
        a.fj ? c() : p(m = n);
        vG(b, l)
    }

    function yG(a, b) {
        var c = tG(a),
            d = c[0],
            e = uG(d);
        d.Il(75);
        e(b.Vu);
        e = c[1];
        c = a.Pb.Sn;
        d = b.Sn;
        c.length || (a.Pb = b);
        e = uG(e);
        if (a.fj)
            if (c.length) {
                a = Math.max(d.length, c.length);
                for (b = 0; b < a; b++) {
                    var g = d[b],
                        h = c[b];
                    g && !h ? (g = g.clone(),
                        g.setRadius(c[0].ub),
                        c.push(g)) : g || (c.pop(),
                        g = c.length - 1,
                        d[g] && (c[g].Xg = d[g].Xg))
                }
                a = uF(c);
                TweenMax.to(a, .3, vF(a, c, d, e, Power1.easeOut))
            } else
                a.Pb = b,
                e(a.Pb.Sn);
        else
            e(d)
    }

    function zG(a, b, c) {
        if (b !== c && (b || c)) {
            var d = c && !b;
            if (!c && b)
                c = b instanceof lF ? a.cD(b, a.qr(), a.QK()) : a.e_(b),
                FE(a, c, b instanceof mF ? 0 : void 0),
                b.setElement(c);
            else if (d)
                c = c.getElement(),
                a.Ui(c),
                a.ha().Ui(c, {
                    KW: !0
                }),
                c.O().remove(),
                c.remove();
            else {
                c = c.getElement();
                if (b instanceof lF) {
                    c.setPosition(b.Y(), b.N());
                    c.za(b.D());
                    c.Hl(b.eb());
                    c.ai(0, b.Iy());
                    var d = c,
                        e = b.toString();
                    Ib.ba.get($f) && (d.O().removeData("cachedLineLengths"),
                        VA(d).html(e));
                    c.setPosition(b.Y(), b.N())
                } else
                    c.yd(b),
                    c.Wv(gh(b.$b())),
                    c.Bc(!0);
                b.setElement(c);
                a.elements[a.elements.indexOf(c)] = c
            }
        }
    }

    function AG(a, b) {
        var c = a.QK(),
            d = a.qr().fontFamily,
            e;
        c && (e = new Fm(c));
        a.render();
        BG(Jb, d) ? b && b() : Gz(Jb, e, d, function () {
                this.render({
                    vN: !0
                });
                b && b()
            }
            .bind(a))
    }
    f.appendTo = function (a) {
        iB.prototype.appendTo.call(this, a);
        CG(this, a)
    };
    f.Lk = function (a) {
        iB.prototype.Lk.call(this, a);
        CG(this, a)
    };

    function CG(a, b) {
        DG(a) && 0 < a.xa().length && a.render();
        a.listenTo(b, "change:background", function () {
            DG(this) && this.render()
        })
    }

    function DG(a) {
        return a.ed.color ? !1 : (a.Tu = a.ha().ug() ? J.fC : J.eC, !0)
    }
    f.render = function (a) {
        function b(a) {
            TweenMax.fromTo(a, .5, {
                autoAlpha: 0
            }, {
                autoAlpha: 1,
                ease: Power1.easeIn
            })
        }
        a = a || {};
        var c, d = this.Qq();
        !this.Pb && EG(this);
        var e = this.fj;
        a.vN && (this.fj = !1);
        switch (this.wi) {
            case nG:
            case oG:
                for (c = 0; c < Math.max(this.Pb.labels.length, d.labels.length); c++)
                    zG(this, d.labels[c], this.Pb.labels[c]);
                a.KL && this.fj && b(this.O().find(".text.element"));
                yG(this, d);
                break;
            case pG:
                for (c = 0; c < Math.max(this.Pb.Yd[0].length, d.Yd[0].length); c++)
                    zG(this, d.Yd[1][c], this.Pb.Yd[1][c]);
                for (c = 0; c < Math.max(this.Pb.data[0].length, d.data[1].length); c++)
                    zG(this, d.data[1][c], this.Pb.data[1][c]);
                !a.KL && this.fj && b(this.O().find(".text.element"));
                xG(this, d);
                break;
            default:
                for (c = 0; c < Math.max(this.Pb.Yd[0].length, d.Yd[0].length); c++)
                    zG(this, d.Yd[1][c], this.Pb.Yd[1][c]);
                for (c = 0; c < Math.max(this.Pb.data[0].length, d.data[1].length); c++)
                    zG(this, d.data[1][c], this.Pb.data[1][c]);
                !a.KL && this.fj && b(this.O().find(".text.element"));
                wG(this, d)
        }
        this.Pb = d;
        this.fj = e
    };
    f.clone = function () {
        return hB(this.serialize())
    };
    f.nr = function () {
        return ["copy", "arrange", "transparency", "link", "delete"]
    };
    f.oT = function () {
        return !0
    };
    f.Oq = function () {};
    f.TN = function () {};
    f.setSize = function (a, b, c) {
        if (!(a < J.$w || b < J.$w)) {
            var d = this.F();
            void 0 !== a && void 0 !== b && Z.prototype.setSize.call(this, a, b);
            c && (a = this.F() / d,
                0 !== a && (a *= this.qr().fontSize,
                    iB.prototype.KG.call(this, a),
                    this.ed.fontSize = a));
            this.O().find(".elements").length && this.render({
                vN: !0
            })
        }
    };
    f.lb = function () {
        iB.prototype.lb.call(this);
        var a = this.O().data("selectionBox");
        a && (a.addClass("verticalScale"),
            a.addClass("horizontalScale"));
        (a = this.O().data("toolbar")) && OC(a)
    };
    f.ph = function () {
        Z.prototype.ph.call(this);
        this.Ut = !1
    };
    f.ix = function () {
        return !0
    };
    f.UE = function () {
        return !1
    };
    f.jT = function () {
        return !0
    };
    f.vL = function () {
        return !!this.Ut
    };
    f.serialize = function () {
        var a = iB.prototype.serialize.call(this);
        a.generatorType = "CHART";
        var b = a.chart = {};
        b.data = this.Zh();
        b.labelColumn = 0;
        b.labelTextStyle = {};
        var c = this.qr(),
            d;
        for (d in c)
            b.labelTextStyle[d] = c[d];
        (c = Fz(c.fontFamily)) && (b.labelFontMedia = {
            id: c.id,
            version: c.version
        });
        b.chartType = this.wi;
        (b[this.wi.toLowerCase()] = {}).spacing = this.le();
        b.coloringType = qG;
        b = b.interpolation = {};
        b.colorSpace = "HCL";
        b.from = this.Nq(0, 1);
        b.to = this.Nq(1, 1);
        if ("#aNaNaN" === b.from || "#aNaNaN" === b.from)
            a.invalid = !0;
        return a
    };
    f.Zh = function () {
        var a = {
            columns: []
        };
        this.data.forEach(function (b, c) {
            b.forEach(function (b, e) {
                var g = a.columns[e] || {};
                g.name = e ? "Value" : "Label";
                g.cells = g.cells || [];
                g.cells[c] = "" + b;
                a.columns[e] = g
            })
        });
        return a
    };

    function iG(a) {
        var b = [];
        a.columns.forEach(function (a, d) {
            a.cells.forEach(function (a, c) {
                b[c] = b[c] || [];
                b[c][d] = a
            })
        });
        return b
    }
    f.cT = function (a) {
        switch (this.wi) {
            case nG:
            case oG:
                return {
                    Ni: 2,
                    Kj: 12,
                    maxLength: 16,
                    Md: 0,
                    KI: a.slice(0, 2)
                };
            default:
                return {
                    Ni: 2,
                    Kj: 48,
                    maxLength: 16,
                    Md: 0,
                    KI: a.slice(0, 2)
                }
        }
    };
    f.QK = function () {
        var a = Fz(this.qr().fontFamily);
        if (a)
            return {
                id: a.id,
                version: a.version
            }
    };
    f.qr = function () {
        return {
            fontFamily: this.ed.fontFamily,
            fontSize: this.ed.fontSize,
            bold: this.ed.bold,
            italic: this.ed.italic,
            color: this.ed.color
        }
    };
    f.Gy = function () {
        return iB.prototype.Gy.call(this)
    };
    f.DO = function (a) {
        iB.prototype.DO.call(this, a);
        this.ed.bold = a;
        this.render()
    };
    f.FO = function (a) {
        iB.prototype.FO.call(this, a);
        this.ed.italic = a;
        this.render()
    };
    f.EO = function (a) {
        this.elements.forEach(function (b) {
            b instanceof up && b.setColor(0, a)
        });
        this.ed.color = a ? a.Ca() : null;
        this.render()
    };
    f.JG = function (a, b, c) {
        var d = this;
        iB.prototype.JG.call(this, a, function (c) {
            c && (d.ed.fontFamily = a);
            d.render();
            b(c)
        }, c)
    };
    f.KG = function (a) {
        iB.prototype.KG.call(this, a);
        this.ed.fontSize = a;
        this.render()
    };
    f.Wi = function (a, b, c, d) {
        iB.prototype.Wi.call(this, a, b, c, d);
        this.ed.fontFamily = b.fontFamily;
        this.ed.fontSize = b.fontSize;
        this.ed.bold = b.bold;
        this.ed.italic = b.italic;
        this.ed.letterSpacing = b.letterSpacing;
        this.ed.lineHeight = b.lineHeight;
        this.ed.color = b.color;
        this.render()
    };

    function FG(a) {
        switch (a) {
            case nG:
                a = wm.PIECHART1;
                break;
            case pG:
                a = wm.LINECHART1;
                break;
            case oG:
                a = wm.DONUTCHART1;
                break;
            default:
                a = wm.BARCHART1
        }
        return hB(a)
    }

    function GG(a, b) {
        a = a.qr();
        var c = a.bold ? "bold" : "normal",
            d = a.italic ? "italic" : "",
            e = a.fontSize || J.Sd,
            g = a.fontFamily || J.Rd,
            h = document.createElement("canvas").getContext("2d"),
            k = 96 / 72 * e,
            l = {
                Tw: [],
                NL: (a.lineHeight || J.dt) / 100 * k,
                fontSize: k
            };
        h.font = d + " " + c + " " + e + "pt " + g;
        b.forEach(function (a) {
            l.Tw.push(a.map(function (a) {
                return Math.ceil(1.2 * h.measureText(a).width)
            }))
        });
        return l
    }
    var mG = "BAR",
        nG = "PIE",
        pG = "LINE",
        oG = "DONUT",
        HG = {
            R7: mG,
            e8: nG,
            d8: pG,
            T7: oG
        },
        qG = "INTERPOLATE";

    function IG(a, b) {
        a.Jv = b
    }

    function EG(a) {
        a.Pb = a.wi === nG || a.wi === oG ? {
            labels: [],
            Sn: [],
            B0: !1,
            Z4: 0
        } : {
            Yd: [
                [],
                []
            ],
            data: [
                [],
                []
            ]
        };
        for (var b, c = a.ha(); b = a.elements.pop();)
            a.Ui(b),
            c && c.Ui(b, {
                KW: !0
            }),
            b.O().remove(),
            b.remove()
    }
    gG.prototype.Qq = function () {
        var a = GG(this, this.Jv.WS());
        return this.Jv.Qq({
            FD: sG(this),
            Ew: a,
            color: this.Nq,
            Tu: this.ed.color || this.Tu || J.eC,
            aU: .3
        })
    };

    function JG(a, b) {
        function c(a) {
            a = a.clone();
            a.ff = 0;
            a.Xg = 0;
            return a
        }

        function d(a) {
            a = a.clone();
            a.setRadius(0);
            return a
        }

        function e(a) {
            a = a.clone();
            var b = a.Ha();
            a.oa(0);
            a.top = b - a.F();
            return a
        }

        function g(a) {
            var b = a.clone();
            a = r.indexOf(a);
            0 !== a ? (a = r[a - 1],
                b.Nc.x = a.qc.x,
                b.Nc.y = a.qc.y,
                b.qc.x = a.qc.x,
                b.qc.y = a.qc.y) : (b.qc.x = b.Nc.x,
                b.qc.y = b.Nc.y);
            return b
        }

        function h(a) {
            $E(q, v);
            q.Il(75);
            q.render();
            a = a.map(k);
            $E(x, a);
            x.render()
        }

        function k(a) {
            return new ZE({
                d: a.pg(),
                fill: a.$b()
            })
        }

        function l() {
            AG(p);
            b && b();
            p.fj = !0
        }

        function m(a) {
            return a instanceof AF
        }

        function n(a) {
            return a instanceof DF
        }
        var p = a;
        a.fj = !1;
        EG(a);
        a.render();
        var r, u, v, y;
        u = tG(a);
        var q = u[0],
            x = u[1];
        switch (a.wi) {
            case oG:
                v = a.Pb.Vu.map(k);
                r = a.Pb.Sn.reverse().map(c);
                u = a.Pb.Sn.reverse();
                y = uF(r);
                TweenMax.staggerTo(y, .5, vF(y, r, u, h, Power1.easeOut), .5 / Math.max(a.getData().length, 1), l);
                break;
            case nG:
                v = a.Pb.Vu.map(k);
                r = a.Pb.Sn.map(d);
                u = a.Pb.Sn;
                y = uF(r);
                TweenMax.staggerTo(y, .5, vF(y, r, u, h, Back.easeOut.config(1.4)), .5 / Math.max(y.length, 1), l);
                break;
            case mG:
                r = a.Pb.data[0].map(e);
                u = a.Pb.data[0];
                v = a.Pb.Yd[0].map(k);
                y = kF(r);
                TweenMax.staggerTo(y, .5, iF(y, r, u, h, Back.easeOut.config(1.4)), .5 / Math.max(y.length, 1), l);
                break;
            case pG:
                r = a.Pb.data[0];
                u = a.Pb.data[0];
                v = a.Pb.Yd[0].map(k);
                var E = [],
                    B = [],
                    K = r.filter(n),
                    K = K.map(g),
                    C = r.filter(m),
                    C = C.map(d),
                    N = u.filter(n),
                    Q = u.filter(m),
                    M = .75 / Math.max(C.length, 1),
                    ca = new TimelineMax({
                        onComplete: l
                    });
                C.forEach(function (a, b) {
                    K[b] && (a = K[b].em(),
                        ca.to([a], M, KF([a], [K[b]], [N[b]], function (a) {
                            E[b] = a[0]
                        }, Power0.easeNone)));
                    a = C[b].em();
                    var c = BF([a], [C[b]], [Q[b]], function (a) {
                        B[b] = a[0];
                        h(E.concat(B))
                    });
                    ca.to([a], M, c, "-\x3d" + M)
                });
                break;
            default:
                l()
        }
    }
    gG.prototype.pu = function () {
        return KG
    };

    function LG(a, b) {
        var c = JSON.parse(JSON.stringify(b)),
            d = c.chart;
        d.data = a.getData();
        IG(a, jG(c));
        a.wi = d.chartType;
        a.Nq = hG(b);
        a.Ar = d.interpolation;
        a.ed = d.labelTextStyle;
        a.Cz = d.labelFontMedia;
        TweenMax.to(a.O(), .3, {
            opacity: 0,
            ease: Power1.easeOut,
            onComplete: function () {
                JG(a);
                TweenMax.to(a.O(), .5, {
                    opacity: 1,
                    ease: Power1.easeOut
                })
            }
        })
    }
    var rG = dn(Vm("#00c4cc")),
        lG = "#fff",
        KG = [6, 8, 10, 12, 14, 16, 18, 21, 24, 28, 32, 36];

    function MG(a) {
        Z.call(this, a);
        this.rh = !0;
        this.LL = "vertical" === a.align;
        this.PT = !this.LL;
        this.O().addClass("guide").addClass(a.align)
    }
    MG.prototype = Object.create(Z.prototype);
    f = MG.prototype;
    f.constructor = MG;
    f.wo = function () {
        return !1
    };
    f.zx = function () {
        return !1
    };
    f.JC = function () {
        return !0
    };
    f.activate = function () {
        this.O().removeClass("inactive")
    };
    f.hD = function () {
        this.O().addClass("inactive")
    };
    f.rb = function (a) {
        this.PT && Z.prototype.rb.call(this, a)
    };
    f.wb = function (a) {
        this.LL && Z.prototype.wb.call(this, a)
    };
    f.setPosition = function (a, b) {
        this.LL && Z.prototype.wb.call(this, a);
        this.PT && Z.prototype.rb.call(this, b)
    };

    function fB(a) {
        Z.call(this, a);
        this.rh = !0;
        this.placeholder = a.placeholder in NG ? a.placeholder : "DEFAULT";
        this.O().addClass("fixed").css("backgroundImage", "url(" + NG[this.placeholder] + ")")
    }
    fB.prototype = Object.create(Z.prototype);
    fB.prototype.constructor = fB;
    var NG = {
        CARD: "https://static.canva.com/static/images/furniture_card_fold_line_center.svg",
        CARD_VERTICAL: "https://static.canva.com/static/images/furniture_card_fold_line_center_vertical.svg",
        DEFAULT: "https://static.canva.com/static/images/placeholder.jpg",
        FACEBOOK: "https://static.canva.com/static/images/furniture_facebook_avatar.svg",
        FUSION_SPINE_GUIDE: "https://static.canva.com/static/images/furniture_fusion_spine_guide.svg",
        FUSION_VERTICAL_DANGER_GUIDE: "https://static.canva.com/static/images/furniture_fusion_vertical_danger_guide.svg",
        FUSION_HORIZONTAL_DANGER_GUIDE: "https://static.canva.com/static/images/furniture_fusion_horizontal_danger_guide.svg",
        FUSION_HORIZONTAL_COVER_DANGER_GUIDE: "https://static.canva.com/static/images/furniture_fusion_horizontal_cover_danger_guide.svg",
        GPLUS_CARD: "https://static.canva.com/static/images/furniture_gplus_card.svg",
        TWITTER_AVATAR: "https://static.canva.com/static/images/furniture_twitter_avatar.svg",
        TWITTER_MENU: "https://static.canva.com/static/images/furniture_twitter_menu.svg",
        TWITTER_STATS: "https://static.canva.com/static/images/furniture_twitter_stats.svg",
        BROCHURE_FOLD_LINE_LEFT: "https://static.canva.com/static/images/furniture_trifold_brochure_fold_line_left.svg",
        BROCHURE_FOLD_LINE_CENTER: "https://static.canva.com/static/images/furniture_trifold_brochure_fold_line_center.svg",
        BROCHURE_FOLD_LINE_RIGHT: "https://static.canva.com/static/images/furniture_trifold_brochure_fold_line_right.svg",
        BROCHURE_BLEED_AREA: "https://static.canva.com/static/images/furniture_trifold_brochure_bleed_area.svg",
        PHONE: "https://static.canva.com/static/images/furniture_phone.svg",
        TABLET: "https://static.canva.com/static/images/furniture_tablet.svg",
        BROWSER: "https://static.canva.com/static/images/furniture_browser.svg"
    };
    f = fB.prototype;
    f.serialize = function () {
        return {
            type: "fixed"
        }
    };
    f.lb = function () {};
    f.wo = function () {
        return !1
    };
    f.JC = function () {
        return !1
    };
    f.zx = function () {
        return !1
    };

    function $A(a, b) {
        this.index = a.index;
        this.bb = b;
        this.ua = a.mediaId;
        this.va = a.mediaVersion;
        this.origin = a.origin ? new Dm(a.origin) : null;
        this.Ra = cm(a.imageBox);
        this.QV = this.TV = this.SV = this.RV = 0;
        this.GA = !0;
        this.mc = a.flipOrientation | 0;
        this.XE = 0 < this.bb.parents(".svg.element").length;
        this.FE = !1;
        this.backgroundColor = null;
        a.backgroundColor && (this.backgroundColor = gh(a.backgroundColor));
        this.Hc = void 0 === a.mediaApproved ? !0 : a.mediaApproved;
        UC(this, this.Hc)
    }
    f = $A.prototype;
    f.serialize = function () {
        var a = {
            type: "image",
            index: this.index,
            mediaId: this.ua,
            mediaVersion: this.va,
            imageBox: this.Ra.serialize(),
            flipOrientation: this.mc,
            mediaApproved: this.Hc
        };
        this.backgroundColor && (a.backgroundColor = this.backgroundColor.serialize());
        var b = this.origin && this.origin.serialize();
        b && (a.origin = b);
        return a
    };
    f.O = function () {
        return this.bb
    };

    function WC(a, b, c, d) {
        var e = b !== a.ua || c !== a.va;
        if (a.FE && !e)
            return d && d(!0),
                a;
        e && (a.ua = b,
            a.va = c,
            a.origin = null,
            UC(a, !0));
        a.FE = !0;
        a.GA = !0;
        a.XE ? a.ua && a.va && (b = a.bb.find("image.placeholder"),
            a.bb.get(0).classList.add("filled"),
            $B({
                Pm: b,
                ua: a.ua,
                va: a.va,
                jv: d
            })) : a.ua && a.va && (b = $("\x3cimg\x3e"),
            b.addClass("placeholder"),
            a.bb.find(".placeholder").remove(),
            a.bb.append(b),
            a.bb.parent(".item").addClass("filled"),
            $B({
                Pm: b,
                ua: a.ua,
                va: a.va,
                jv: d
            }));
        return a
    }

    function VC(a, b) {
        a.origin = b;
        return a
    }

    function XC(a) {
        a.FE = !1;
        UC(a, !0);
        a.ua = void 0;
        a.va = void 0;
        a.origin = null;
        a.XE ? (a.bb.get(0).classList.remove("filled"),
            a.bb.find("image.placeholder").removeAttr("crossorigin").removeData("mediaId").removeData("mediaVersion").attr("xlink:href", J.ko)) : (a.bb.parent(".item").removeClass("filled"),
            a.bb.find(".placeholder").remove(),
            a.bb.append('\x3cdiv class\x3d"placeholder"\x3e\x3c/div\x3e'));
        return a
    }
    f.Em = function () {
        return this.Ra.clone()
    };

    function VB(a, b) {
        a.Ra = b.clone();
        a.GA = !0;
        OG(a);
        return a
    }
    f.Yv = function (a) {
        var b = a ^ this.mc;
        sm(this.Ra, PG(this), b);
        this.GA = !0;
        this.mc = a;
        OG(this);
        return this
    };
    f.Cs = function (a) {
        this.vv();
        this.Yv(a);
        return this
    };
    f.ah = function () {
        return this.backgroundColor
    };
    f.Wv = function (a) {
        this.backgroundColor = a;
        QG(this);
        return this
    };

    function mD(a) {
        a.backgroundColor = null;
        a.bb.find(".backgroundColor.placeholder").replaceWith('\x3cdiv class\x3d"placeholder"\x3e\x3c/div\x3e');
        return a
    }

    function PC(a) {
        return !(!a.ua || !_.isNumber(a.va))
    }
    f.isEmpty = function () {
        return !(PC(this) || this.ah())
    };
    f.Uc = function () {
        return PC(this) ? Gb.Uc(this.ua, this.va) : null
    };

    function UC(a, b) {
        (a.Hc = b) ? a.bb.get(0).classList.remove("unapproved"): a.bb.get(0).classList.add("unapproved");
        return a
    }
    f.TB = function (a) {
        var b = this.Ub();
        null != this.backgroundColor || null == b || Lp(a, this.Ub()) || (XC(this),
            UC(this, !1))
    };
    f.Ub = function () {
        return void 0 !== this.ua && void 0 !== this.va ? new Fm({
            id: this.ua,
            version: this.va
        }) : null
    };
    f.Gl = function (a, b) {
        return new P(function (c) {
                this.ua = a;
                this.va = b;
                this.update(c)
            }
            .bind(this))
    };
    f.update = function (a) {
        var b = this.Hc;
        void 0 !== this.ua && void 0 !== this.va ? (WC(this, this.ua, this.va, a),
            OG(this)) : (XC(this),
            QG(this),
            a && a(!0));
        UC(this, b)
    };
    f.clear = function () {
        XC(this);
        mD(this)
    };

    function QG(a) {
        if (a.backgroundColor) {
            XC(a);
            var b = $('\x3cdiv class\x3d"backgroundColor placeholder"\x3e\x3c/div\x3e');
            b.css("background-color", a.backgroundColor.Ca());
            a.bb.find(".placeholder").replaceWith(b)
        } else
            a.clear()
    }

    function OG(a) {
        if (a.XE) {
            var b = a.bb.closest(".element").data("canvaElement"),
                c = a.bb.find("image.placeholder"),
                d = PG(a);
            a = a.Ra.clone();
            a.translate(d.Y(), d.N()).scale(1 / MC(b));
            c.attr("width", a.D()).attr("height", a.F()).attr("x", a.Y()).attr("y", a.N())
        } else {
            b = PG(a);
            c = b.D();
            d = b.F();
            if (a.GA)
                a.RV = a.Ra.Y() / c,
                a.SV = a.Ra.N() / d,
                a.TV = a.Ra.D() / c,
                a.QV = a.Ra.F() / d,
                a.GA = !1;
            else {
                var e = hm(a.Ra);
                a.Ra.wb(c * a.RV);
                a.Ra.rb(d * a.SV);
                a.Ra.za(c * a.TV);
                a.Ra.oa(d * a.QV);
                var g = e / hm(a.Ra),
                    e = c / 2,
                    h = d / 2,
                    k = 1;
                1 > g ? (im(a.Ra, e, h, g, 1),
                    g = Math.max(0, a.Ra.Y(), c - a.Ra.kb()),
                    k = c / (c - 2 * g)) : 1 < g && (im(a.Ra, e, h, 1, 1 / g),
                    g = Math.max(0, a.Ra.N(), d - a.Ra.Ha()),
                    k = d / (d - 2 * g));
                1 < k && im(a.Ra, e, h, k)
            }
            RB(a.bb, null, a.mc);
            c = a.Ra.clone();
            sm(c, b, a.mc);
            c.scale(W);
            c.round();
            a.bb.find("img.placeholder").css(NB(c))
        }
    }

    function PG(a) {
        var b = a.bb.closest(".element").data("canvaElement");
        return b ? b.Gm(a.index) : dm.clone()
    }
    f.vv = function () {
        var a = this.bb,
            b = J.xQ * this.Ra.D();
        a.parent().css("perspective", b + "px");
        a.addClass("flipping");
        a.one("transitionend", function () {
            a.removeClass("flipping")
        })
    };

    function FC(a) {
        this.UP = a.valign;
        this.ij = cm(a.box);
        this.yg = this.ij.clone();
        this.ss = a.resizeHorizontal;
        this.Bn = a.resizeVertical;
        this.contents = a.contents;
        this.VP = [];
        this.G0 = [];
        this.scale = 1;
        this.Cu = RG(this);
        this.BT = this.ij.F() - SG(this);
        TG(this);
        this.ta();
        var b = this;
        this.contents.forEach(function (a) {
            b.listenTo(a, "change:width", b.ta);
            b.listenTo(a, "change:height", b.ta)
        })
    }
    FC.prototype.trigger = Backbone.Events.trigger;
    FC.prototype.listenTo = Backbone.Events.listenTo;
    FC.prototype.stopListening = Backbone.Events.stopListening;
    _.extend(FC.prototype, Backbone.Events);
    f = FC.prototype;
    f.remove = function () {
        var a = this;
        this.stopListening(this);
        this.contents.forEach(function (b) {
            a.stopListening(b)
        })
    };
    f.za = function (a) {
        LC(a, this.D()) || (this.ij.za(a),
            this.ta(),
            this.trigger("change:width", this),
            this.trigger("change", this))
    };
    f.D = function () {
        return this.ij.D()
    };
    f.oa = function (a) {
        LC(a, this.F()) || (this.ij.oa(a),
            this.ta(),
            this.trigger("change:height", this),
            this.trigger("change", this))
    };
    f.F = function () {
        return this.ij.F()
    };
    f.setSize = function (a, b, c) {
        var d = this.D() !== a,
            e = this.F() !== b;
        if (d || e)
            this.ij.setSize(a, b),
            this.scale !== c && (this.scale = c,
                UG(this)),
            this.ta(),
            d && this.trigger("change:width", this),
            e && this.trigger("change:height", this),
            this.trigger("change", this)
    };
    f.cp = function () {
        return this.ij.cp()
    };
    f.yd = function (a, b) {
        this.ij.wb(a.Y()).rb(a.N());
        this.setSize(a.D(), a.F(), b)
    };
    f.Ba = function () {
        return this.ij.clone()
    };
    f.Oy = function () {
        return this.yg.clone()
    };

    function RG(a) {
        a = a.contents.map(function (a) {
            return a.Ba()
        });
        return cl(a.map(function (a) {
            return a.N()
        }))
    }

    function SG(a) {
        a = a.contents.map(function (a) {
            return a.Ba()
        });
        return dl(a.map(function (a) {
            return a.Ha()
        }))
    }

    function VG(a) {
        var b = RG(a);
        return SG(a) - b
    }

    function WG(a) {
        a = a.contents.slice(0);
        a.sort(function (a, c) {
            a = a.Oy();
            c = c.Oy();
            return a.N() < c.N() ? -1 : a.N() > c.N() ? 1 : 0
        });
        return a
    }

    function TG(a) {
        a.VP = [];
        if (!(2 > a.contents.length)) {
            var b = WG(a);
            a.contents.forEach(function (c) {
                var d = b.indexOf(c);
                d == a.contents.length - 1 ? d = 0 : (c = c.Ba(),
                    d = b[d + 1].Ba().N() - c.Ha());
                a.VP.push(d)
            })
        }
    }

    function XG(a, b) {
        a.contents.forEach(function (c) {
            var d = c.Ba();
            d.translate(0, b);
            a.stopListening(c);
            c.yd(d, a.scale);
            a.listenTo(c, "change:width", a.ta);
            a.listenTo(c, "change:height", a.ta)
        })
    }

    function UG(a) {
        a.contents.forEach(function (b) {
            a.stopListening(b);
            b.scale(a.scale);
            a.listenTo(b, "change:width", a.ta);
            a.listenTo(b, "change:height", a.ta)
        })
    }
    f.ta = function () {
        var a = this;
        this.contents.forEach(function (b) {
            a.stopListening(b);
            if (!b.yB)
                if (b.SJ)
                    YG(b);
                else {
                    var c = b.Ba(),
                        d = ZG(b);
                    c.za(d.width);
                    c.oa(d.height);
                    b.yd(c)
                }
        });
        var b = 0 === this.G0.length;
        this.contents.forEach(function (c) {
            if (a.ss && b) {
                var d = c.Ba();
                d.D() !== a.D() && (d.za(a.D()),
                    c.yd(d, a.scale))
            }
        });
        var c = WG(this);
        c.forEach(function (b, d) {
            if (0 !== d) {
                d = c[d - 1];
                var e = a.contents.indexOf(d),
                    g = a.VP[e],
                    e = b.Ba();
                d = d.Ba().Ha() + g * a.scale;
                e.rb(d);
                b.yd(e, a.scale)
            }
        });
        var d = VG(this),
            e = this.ij.F(),
            g;
        "CENTER" == this.UP ? (g = this.Cu + this.BT,
            g = this.Cu + (e - d - g) / 2,
            g -= RG(this),
            XG(this, g),
            d > e && this.Bn && (g = -RG(this),
                XG(this, g),
                this.oa(d))) : "TOP" == this.UP ? this.Cu + d > e && this.Bn && this.oa(this.Cu + d) : "BOTTOM" == this.UP && (g = this.Cu + this.BT,
            g = this.Cu + (e - d - g),
            g -= RG(this),
            XG(this, g),
            d > e && this.Bn && (g = -RG(this),
                XG(this, g),
                this.oa(d)));
        this.contents.forEach(function (b) {
            a.listenTo(b, "change:width", a.ta);
            a.listenTo(b, "change:height", a.ta)
        })
    };

    function EC(a, b, c) {
        this.kk = a;
        this.yg = a.data("rect").clone().translate(-b, -c);
        this.hy = !!a.data("dynamicWidth");
        this.CD = !!a.data("dynamicHeight");
        this.SJ = !!a.data("dynamicFontSize");
        this.eG = a.data("defaultFontSize");
        this.SJ && (this.CD = this.hy = !1);
        this.hy && this.CD && (this.hy = !1);
        this.Sb = {
            DH: 0,
            Sw: 0,
            wf: 0,
            Pd: 1
        };
        this.yB = !1
    }
    EC.prototype.trigger = Backbone.Events.trigger;
    EC.prototype.listenTo = Backbone.Events.listenTo;
    EC.prototype.stopListening = Backbone.Events.stopListening;
    _.extend(EC.prototype, Backbone.Events);
    var HC = "center",
        IC = "right";
    f = EC.prototype;
    f.O = function () {
        return this.kk
    };
    f.Oy = function () {
        return this.yg.clone()
    };
    f.Ba = function () {
        var a = this.yg.clone();
        a.rb(this.Sb.DH + this.yg.N() * this.Sb.Pd).wb(this.yg.Y() * this.Sb.Pd).za(this.Sb.Sw + a.D() * this.Sb.Pd).oa(this.Sb.wf + a.F() * this.Sb.Pd);
        return a
    };
    f.yd = function (a, b) {
        void 0 === b && (b = this.Sb.Pd);
        var c = this.Ba(),
            d = a.clone().scale(W).round();
        this.kk.css(d.serialize());
        $G(this);
        this.Sb.Pd = b;
        this.Sb.DH = a.N() - this.yg.N() * this.Sb.Pd;
        this.Sb.Sw = a.D() - this.yg.D() * this.Sb.Pd;
        this.Sb.wf = a.F() - this.yg.F() * this.Sb.Pd;
        b = !LC(c.D(), a.D());
        d = !LC(c.F(), a.F());
        b && this.trigger("change:width", this, a.D() - c.D());
        d && this.trigger("change:height", this, a.F() - c.F());
        (b || d) && this.trigger("change", this)
    };
    f.scale = function (a) {
        this.Sb.DH *= a / this.Sb.Pd;
        this.Sb.Sw *= a / this.Sb.Pd;
        this.Sb.wf *= a / this.Sb.Pd;
        this.Sb.Pd = a
    };

    function $G(a) {
        if (a.kk.hasClass("text")) {
            var b = a.Ba(),
                c = a.kk.children(".inner");
            c.css("width", b.D()).css("height", "");
            var d = a.kk.height();
            a = c.height();
            b = Math.round(b.D() * (W - 1) * .5);
            d = Math.ceil(d / 2) - Math.floor(a / 2);
            c.css("height", a).css("position", "absolute").css("transform", "translate(" + b + "px, " + d + "px) scale(" + W + ")")
        }
    }

    function YG(a) {
        if (!a.yB) {
            var b = aH(a),
                c = a.kk.data("canvaElement"),
                d = a.kk.data("textIndex");
            a.yB = !0;
            c.qe(d, b);
            a.yB = !1;
            $G(a)
        }
    }

    function zC(a) {
        var b;
        if (!a.yB)
            if (a.SJ)
                YG(a);
            else {
                var c = a.Ba();
                b = ZG(a);
                var d = b.width;
                b = b.height;
                a.hy && (d = Math.max(d, a.yg.D() * a.Sb.Pd));
                a.CD && (b = Math.max(b, a.yg.F() * a.Sb.Pd));
                c.za(d);
                c.oa(b);
                a.yd(c)
            }
    }

    function aH(a) {
        function b(a, b, d) {
            var m = "width" == a ? b.width : b.height;
            a = "width" == a ? e : g;
            var n = m.call(b);
            d /= n / a;
            b.css("font-size", d * J.oi + "%");
            n = m.call(b);
            if (0 == n)
                return c;
            if (n > a)
                for (; n > a && !(d *= .95,
                        b.css("font-size", d * J.oi + "%"),
                        n = m.call(b),
                        n < a || 8 > d);)
            ;
            else if (n < a)
                for (; n < a;)
                    if (d /= .95,
                        b.css("font-size", d * J.oi + "%"),
                        n = m.call(b),
                        n > a || d > c) {
                        d *= .95;
                        break
                    }
            return d = Math.max(Math.min(c, d), J.QH)
        }
        var c = a.eG * a.Sb.Pd,
            d = parseFloat(a.kk.data("fontSize")) * a.Sb.Pd,
            e = Math.floor(a.Sb.Sw + a.yg.D() * a.Sb.Pd),
            g = Math.floor(a.Sb.wf + a.yg.F() * a.Sb.Pd);
        a = a.kk.clone();
        a.addClass("element").appendTo("#canvaDocument \x3e .inner").css("width", "").css("height", "");
        a.children(".inner").css("width", "").css("height", "").css("transform", "").css("position", "").css("top", "");
        d = b("width", a, d);
        a.css("font-size", d * J.oi + "%");
        a.height() > g && (a.css("width", a.width()),
            d = b("height", a, d));
        a.remove();
        return d
    }

    function ZG(a) {
        function b(a, b, c) {
            var d = "height" === b ? c : "";
            c = "width" === b ? c : "";
            a = a.clone();
            "width" === b && a.css("white-space", "nowrap");
            a.addClass("element").appendTo("#limbo").css("width", d).css("height", c);
            d = a.children(".inner").css("width", d).css("height", c).css("transform", "").css("position", "").css("top", "");
            vf($(d));
            b = a.get(0).getBoundingClientRect()[b];
            a.remove();
            return b
        }
        var c = a.Sb.Sw + a.yg.D() * a.Sb.Pd,
            d = a.Sb.wf + a.yg.F() * a.Sb.Pd,
            e = a.kk;
        a.hy && (c = b(e, "width", d));
        a.CD && (d = b(e, "height", c));
        return {
            width: c,
            height: d
        }
    };

    function bH(a) {
        for (var b, c = /(.*['"<])?([^'">]+)(['">].*)?/g; b = c.exec(a);)
            if (b = b[2].trim(),
                cH(b))
                return b
    }

    function cH(a) {
        return /^[^@]+@[^@]+\.[^@]+$/.test(a) && !/[ ,<>'"]/.test(a)
    };

    function dH() {
        this.fa = Hb;
        this.path = "/login"
    };

    function eH() {}
    t(eH, Error);

    function fH(a, b, c) {
        this.id = a;
        this.length = b;
        this.name = c
    }
    fH.prototype.G = function () {
        return this.id
    };
    fH.prototype.getLength = function () {
        return this.length
    };
    fH.prototype.getName = function () {
        return this.name
    };

    function gH(a, b, c, d) {
        this.id = a;
        this.name = b;
        this.bd = d;
        this.y4 = c
    }
    gH.prototype.G = function () {
        return this.id
    };
    gH.prototype.getName = function () {
        return this.name
    };
    gH.prototype.Vd = function () {
        return this.bd
    };
    gH.prototype.sj = function () {
        return this.y4
    };

    function hH(a, b, c) {
        this.height = a;
        this.url = b;
        this.width = c
    }
    hH.prototype.F = function () {
        return this.height
    };
    hH.prototype.Aa = function () {
        return this.url
    };
    hH.prototype.D = function () {
        return this.width
    };

    function iH(a) {
        this.fa = a.fa;
        this.rU = a.rU;
        this.fI = a.config.fI;
        this.hr = null
    }
    var jH = {
        b0: function (a, b) {
            var c = [];
            b.permissions.data.forEach(function (a) {
                "granted" == a.status && c.push(a.permission)
            });
            this.permissions = c
        },
        param: "permissions"
    };
    iH.prototype.init = function () {
        var a = this,
            b, c;
        b = this;
        return (c = window.facebookSdkPromise) ? c : c = window.facebookSdkPromise = new P(function (c, e) {
            a.sO = function (b) {
                kH(a);
                e(b)
            };
            window.fbAsyncInit = function () {
                FB.init({
                    version: "v2.6",
                    appId: b.fI,
                    channelUrl: "//" + window.location.hostname + "/static/channel.html",
                    status: !0,
                    xfbml: !1
                });
                kH(a);
                c(a)
            };
            lH(a)
        })
    };
    iH.prototype.sO = function () {
        kH(this)
    };

    function kH(a) {
        document.getElementById("facebook-jssdk").removeEventListener("error", a.sO)
    }

    function lH(a) {
        var b, c = document.getElementsByTagName("script")[0];
        document.getElementById("facebook-jssdk") || (b = document.createElement("script"),
            b.id = "facebook-jssdk",
            b.src = "//connect.facebook.com/en_US/sdk.js",
            b.addEventListener("error", a.sO),
            c.parentNode.insertBefore(b, c))
    }

    function mH() {
        var a;
        a = window.facebookSdkPromise;
        return !!a && a.isFulfilled()
    }

    function nH(a, b) {
        return new P(function (c, d) {
            oH(a).then(function (e) {
                e = e.permissions;
                var g = _.difference(b, e);
                a.hr && a.hr.B9(e);
                g.length ? d() : c()
            }).catch(d)
        })
    }

    function oH(a) {
        var b = [jH];
        return new P(function (c, d) {
            a.getAuthResponse().then(function (a) {
                for (var g = [], h = 0; h < b.length; h++) {
                    var k = b[h];
                    k.param && g.push(k.param)
                }
                g = g.join(",");
                FB.api("/me?return_ssl_resources\x3d1\x26fields\x3d" + encodeURIComponent(g), function (g) {
                    if ("error" in g)
                        d("FB_API_ERROR");
                    else {
                        for (var h = {}, k = 0; k < b.length; k++)
                            b[k].b0.call(h, a, g);
                        c(h)
                    }
                })
            }).catch(function (b) {
                a.hr = null;
                d(b)
            })
        })
    }
    iH.prototype.getAuthResponse = function () {
        return new P(function (a, b) {
            FB.getAuthResponse() ? a(FB.getAuthResponse()) : FB.getLoginStatus(function (c) {
                "connected" == c.status ? a(c.authResponse) : b("UNAUTHORIZED")
            })
        })
    };
    iH.prototype.Qa = function () {
        return this.hr
    };

    function pH(a) {
        var b = ["email", "public_profile", "user_photos"];
        return new P(function (c, d) {
            function e(b) {
                a.hr = null;
                d(b)
            }

            function g(g) {
                g.authResponse && g.status ? nH(a, b).then(c).catch(e) : d("FB_API_ERROR")
            }
            var h = _.difference(b, a.hr ? a.hr.permissions : []);
            0 < h.length ? FB.login(g, {
                scope: h.join(",")
            }) : nH(a, b).then(c).catch(e)
        })
    }

    function qH(a) {
        return nH(a, ["email", "public_profile", "user_photos"])
    }

    function rH(a) {
        if (!mH())
            throw new eH;
        var b = {
            fields: "id,name,count"
        };
        void 0 !== a && (b.offset = a);
        b.limit = 10;
        return new P(function (a, d) {
            FB.api("/me/albums?return_ssl_resources\x3d1", b, function (b) {
                "error" in b ? d("FB_API_ERROR") : (b = b.data.map(function (a) {
                        return new fH(a.id, a.count || 0, a.name)
                    }),
                    a(b))
            })
        })
    }

    function sH(a, b, c) {
        if (!mH())
            throw new eH;
        var d = {
            fields: "id,name,height,width,source,picture,images"
        };
        void 0 !== b && (d.offset = b);
        void 0 !== c && (d.limit = c);
        return new P(function (b, c) {
            FB.api("/" + encodeURIComponent(a) + "/photos?return_ssl_resources\x3d1", d, function (a) {
                "error" in a ? c("FB_API_ERROR") : (a = a.data.map(function (a) {
                        var b = a.height,
                            c = a.width,
                            d = a.source,
                            e = b / 4.6,
                            g = c / 4.6,
                            h = a.picture,
                            v = a.images.filter(function (a) {
                                return a.source === h
                            });
                        0 < v.length && (e = v[0].height,
                            g = v[0].width);
                        v = a.images.sort(function (a, b) {
                            return b.height - a.height
                        })[0];
                        if (v.width > c || v.height > b)
                            b = v.height,
                            c = v.width,
                            d = v.source;
                        return new gH(a.id, a.name, new hH(b, d, c), new hH(e, h, g))
                    }),
                    b(a))
            })
        })
    }

    function tH(a, b) {
        return new P(function (c, d) {
            function e() {
                return m.reduce(function (a, b) {
                    return a + b.getLength()
                }, 0)
            }

            function g(c) {
                var k;
                m = m.concat(c);
                c = 0 < c.length && 10 >= c.length;
                k = e() < a + b;
                c && k ? rH(m.length).then(g).catch(d) : h()
            }

            function h() {
                var c = 0,
                    e = m.filter(function (b) {
                        c += b.getLength();
                        return c > a
                    }),
                    g = m.filter(function (a) {
                        return -1 === e.indexOf(a)
                    }).reduce(function (a, b) {
                        return a + b.getLength()
                    }, 0),
                    h = [],
                    n = 0;
                e.forEach(function (c, d) {
                    var e = 0 === d ? a - g : 0;
                    d = Math.min(b, c.getLength() - e);
                    n < b && (c = sH(c.G(), e, d).tap(k),
                        h.push(c));
                    n += d
                });
                P.all(h).then(l).catch(d)
            }

            function k(a) {
                n = n.concat(a)
            }

            function l() {
                c(n)
            }
            var m = [],
                n = [];
            if (!mH())
                throw new eH;
            rH(0).then(g).catch(d)
        })
    }

    function uH() {
        this.fI = D("appId", window.facebookConfig)
    };

    function vH(a) {
        this.fa = a
    }
    vH.prototype.Kz = function (a, b) {
        var c = b.NK(),
            d = b.Kd(),
            e = b.dc(),
            g = b.JK();
        a = "/vfolders/" + a + b.Gc() + "?" + (c ? "filter\x3d" + encodeURIComponent(c) : "") + (d ? "\x26limit\x3d" + encodeURIComponent(String(d)) : "") + (e ? "\x26continuation\x3d" + encodeURIComponent(e) : "") + (g ? "\x26decorations\x3d" + encodeURIComponent(g.join(",")) : "");
        return Ii(this.fa, a).get(0).then(wH)
    };

    function xH(a, b) {
        var c = b.wa();
        return a.Kz("brands/" + (c ? encodeURIComponent(c) : "~"), b)
    }

    function yH(a, b) {
        var c = b.wa(),
            d = b.Qa();
        return a.Kz("brands/" + (c ? encodeURIComponent(c) : "~") + "/users/" + (d ? encodeURIComponent(d) : "~"), b)
    };

    function zH() {
        this.content = null
    }
    zH.prototype = new ek;
    zH.prototype.getContent = function () {
        return this.content
    };

    function AH(a) {
        a = a.content;
        var b = a.elements;
        return b && 1 === b.length && "grid" === b[0].type ? 0 >= b[0].top && 0 >= b[0].left && b[0].width >= a.width && b[0].height >= a.height && (!b[0].contents || 0 === b[0].contents.length) : !1
    }

    function BH() {}
    f = BH.prototype;
    f.Hg = function (a) {
        this.brand = a;
        return this
    };
    f.wa = function () {
        return this.brand || null
    };
    f.ct = function (a) {
        this.user = a;
        return this
    };
    f.Qa = function () {
        return this.user || null
    };
    f.ik = function (a) {
        this.folder = a;
        return this
    };
    f.Gc = function () {
        return this.folder
    };

    function CH(a, b) {
        a.filter = b;
        return a
    }
    f.NK = function () {
        return this.filter
    };
    f.aj = function (a) {
        this.continuation = a;
        return this
    };
    f.dc = function () {
        return this.continuation || null
    };
    f.Ig = function (a) {
        this.limit = a;
        return this
    };
    f.Kd = function () {
        return this.limit
    };
    f.JK = function () {
        return this.decorations
    };

    function DH() {
        this.items = [];
        this.folders = this.continuation = null
    }
    DH.prototype.uf = function () {
        return this.items
    };
    DH.prototype.dc = function () {
        return this.continuation
    };
    DH.prototype.To = function () {
        return this.folders
    };

    function wH(a) {
        if (!a)
            return null;
        a = $.extend(new DH, a);
        a.items && (a.items = a.items.map(Tj));
        a.folders && (a.folders = a.folders.map(Cj));
        return a
    };

    function EH(a, b) {
        this.gb = a;
        this.da = b
    }
    EH.prototype.Tb = function () {
        var a = this.gb.getName(),
            b = this.gb.me();
        if (a)
            return a;
        if (b) {
            if ("LOGOS" === b)
                return this.da.format("objectPanelUploadsPanelSystemFolderLogos");
            if ("UNFOLDERED" === b)
                return this.da.format("objectPanelUploadsPanelSystemFolderUnfoldered");
            throw Error("unrecognised system folder");
        }
        return this.gb === Jj ? this.da.format("objectPanelUploadsPanelUploadsFolder") : this.gb === Kj ? Od(this.da) : this.da.format("objectPanelUploadsPanelUntitledFolder")
    };

    function oD(a) {
        this.name = a || "Normal";
        this.Qf = this.vignette = this.jf = this.saturation = this.contrast = this.brightness = this.blur = 0;
        this.qh = 50
    }
    var FH = new oD,
        GH = new oD("halftone");

    function HH(a) {
        var b = a.match(/([a-z0-9]{2})/gi),
            c = new oD;
        if ("halftone" === a)
            return GH;
        c.brightness = parseInt(b[0], 16) - 100;
        c.contrast = parseInt(b[1], 16) - 100;
        c.saturation = parseInt(b[2], 16) - 100;
        c.jf = parseInt(b[3], 16) - 100;
        c.blur = parseInt(b[4], 16) - 100;
        c.vignette = parseInt(b[5], 16);
        c.Qf = parseInt(b[6], 16) - 100;
        c.qh = 7 < b.length ? parseInt(b[7], 16) : FH.qh;
        return c
    }

    function IH(a) {
        a = a.toLowerCase();
        return "tint" !== a && "name" !== a
    }

    function JH(a, b, c) {
        b = Math.round((b || 0) * c);
        return "vignette" === a || "tintAmount" === a ? Math.min(100, Math.max(0, b)) : Math.min(100, Math.max(-100, b))
    }

    function KH(a, b) {
        var c = _.findWhere(LH, {
            name: a.name
        });
        _.chain(c).keys().filter(IH).each(function (a) {
                this.IG(a, JH(a, c[a], b))
            }
            .bind(a))
    }

    function MH(a) {
        var b = new oD;
        b.zh(a.serialize());
        b.blur && (b.blur *= .5);
        b.brightness && (b.brightness *= .5);
        b.contrast && (b.contrast *= .6);
        b.saturation && 0 < b.saturation && (b.saturation *= .8);
        b.vignette && (b.vignette *= .7);
        return b
    }
    f = oD.prototype;
    f.zh = function (a) {
        a && (this.name = a.name || FH.name,
            this.blur = a.blur || FH.blur,
            this.brightness = a.brightness || FH.brightness,
            this.contrast = a.contrast || FH.contrast,
            this.saturation = a.saturation || FH.saturation,
            this.jf = a.tint || FH.jf,
            this.vignette = a.vignette || FH.vignette,
            this.Qf = a.xpro || FH.Qf,
            this.qh = _.isNumber(a.tintAmount) ? a.tintAmount : FH.qh)
    };

    function NH(a, b) {
        function c(c) {
            return a[c] !== b[c]
        }
        a = void 0 === a ? FH : a;
        b = void 0 === b ? FH : b;
        return null === a && null === b ? !0 : null === a || null === b ? !1 : 0 === Object.keys(a).filter(c).length && 0 === Object.keys(b).filter(c).length
    }
    f.IG = function (a, b) {
        switch (a) {
            case "brightness":
                return this.brightness = b, !0;
            case "saturation":
                return this.saturation = b, !0;
            case "contrast":
                return this.contrast = b, !0;
            case "blur":
                return this.blur = b, !0;
            case "tint":
                return this.jf = b, !0;
            case "xpro":
            case "xprocess":
                return this.Qf = b, !0;
            case "vignette":
                return this.vignette = b, !0;
            case "tintAmount":
                return this.qh = b, !0;
            default:
                return !1
        }
    };
    f.getByName = function (a) {
        switch (a) {
            case "brightness":
                return this.brightness;
            case "saturation":
                return this.saturation;
            case "contrast":
                return this.contrast;
            case "blur":
                return this.blur;
            case "tint":
                return this.jf;
            case "xpro":
            case "xprocess":
                return this.Qf;
            case "vignette":
                return this.vignette;
            case "tintAmount":
                return this.qh;
            default:
                throw Error("unknown filter property name: " + a);
        }
    };
    f.CL = function () {
        return null !== OH(this)
    };
    f.serialize = function () {
        if (NH(this, FH))
            return null;
        var a = {};
        this.name && (a.name = this.name);
        this.blur && (a.blur = this.blur);
        this.brightness && (a.brightness = this.brightness);
        this.contrast && (a.contrast = this.contrast);
        this.saturation && (a.saturation = this.saturation);
        this.jf && (a.tint = this.jf);
        this.vignette && (a.vignette = this.vignette);
        this.Qf && (a.xpro = this.Qf);
        _.isNumber(this.qh) && (a.tintAmount = this.qh);
        return a
    };

    function OH(a) {
        var b = _.findWhere(LH, {
            name: a.name
        });
        if (null === b)
            return null;
        var c = PH(a, b);
        return null === c ? null : _.all(b, function (a, e) {
                return IH(e) ? 1 >= Math.abs(this.getByName(e) - JH(e, b[e], c)) : !0
            }
            .bind(a)) ? c : null
    }

    function PH(a, b) {
        var c = 0,
            d = null;
        _.each(b, function (a, b) {
                IH(b) && Math.abs(a) >= Math.abs(c) && 100 > Math.abs(this.getByName(b)) && (c = a,
                    d = b)
            }
            .bind(a));
        return 0 === c ? null : a.getByName(d) / c
    }
    f.Ca = function () {
        return [this.brightness + 100, this.contrast + 100, this.saturation + 100, this.jf + 100, this.blur + 100, this.vignette, this.Qf + 100, this.qh].map(function (a) {
            a = Math.round(a).toString(16);
            1 == a.length && (a = "0" + a);
            return a
        }).join("")
    };

    function QH(a, b) {
        a -= 200 / 7;
        0 > a && (a = 200 + a);
        var c, d;
        a = 360 * a / 200 / 360;
        c = 1;
        d = .5;
        if (0 == c)
            d = c = a = d;
        else {
            var e = .5 > d ? d * (1 + c) : d + c - d * c,
                g = 2 * d - e;
            d = gn(g, e, a + 1 / 3);
            c = gn(g, e, a);
            a = gn(g, e, a - 1 / 3)
        }
        a = [Math.round(255 * d), Math.round(255 * c), Math.round(255 * a)];
        return {
            color: {
                r: a[0],
                Tk: a[1],
                b: a[2]
            },
            po: 7 + .14 * (b - 50)
        }
    }

    function RH(a) {
        function b(b) {
            return parseFloat((b * a / -100).toFixed(2))
        }
        if (0 < a) {
            var c = function (b) {
                    return parseFloat((b * a / 100).toFixed(2))
                },
                d = [0, .2, 0, -.1, 0].map(c),
                e = [0, .1, 0, -.1, 0].map(c),
                c = [.2, 0, .2].map(c);
            return {
                red: [
                    [0, 0],
                    [.3, .3 - d[1]],
                    [.7, .7 - d[3]],
                    [1, 1]
                ],
                green: [
                    [0, 0],
                    [.25, .25 - e[1]],
                    [.75, .75 - e[3]],
                    [1, 1]
                ],
                blue: [
                    [0, c[0]],
                    [0 + 2 / 3 * .5, c[0] + 2 / 3 * (.5 - c[0])],
                    [1 + 2 / 3 * -.5, 1 - c[2] + 2 / 3 * (.5 - (1 - c[2]))],
                    [1, 1 - c[2]]
                ]
            }
        }
        d = [0, .2, .5, -.05].map(b);
        e = [0, -.15, 0, 0].map(b);
        c = [0, -.01, 0, .3].map(b);
        return {
            red: [
                [0, 0],
                [.3, .3 - d[1]],
                [.7, .7 - d[2]],
                [.95, .95 - d[3]]
            ],
            green: [
                [0, 0],
                [.25, .25 - e[1]],
                [.6, .6],
                [1, 1]
            ],
            blue: [
                [0, 0],
                [.3, .3 - c[1]],
                [.5, .5],
                [1, 1 - c[3]]
            ]
        }
    };

    function SH(a) {
        this.filter = new oD;
        this.jp = this.NN = this.mj = !1;
        this.AD = {};
        this.L_ = "";
        this.Wc = a;
        this.qJ = "print" == bB ? cC : Fg;
        this.bP = null;
        this.qz = 50
    }

    function YA(a, b) {
        var c = new oD;
        b = new SH(b);
        a && c.zh(a);
        nD(b, c);
        return b
    }
    f = SH.prototype;
    f.CL = function () {
        return this.filter.CL()
    };
    f.Cr = function () {
        return this.jp
    };
    f.initialize = function (a) {
        function b() {
            c.jp = !0;
            a && a()
        }
        var c = this;
        !PC(this.Wc) || this.jp || NH(this.filter, FH) ? b() : eC(this, b)
    };

    function TH(a) {
        a.Lh || (a.Lh = new UH(window, a.Wc, a.qJ),
            a.Lh.update(!0))
    }
    f.update = function (a, b) {
        var c = this;
        if (this.mj)
            if (this.bP = gC(this),
                this.trigger("change"),
                this.Wc.isEmpty())
                this.Lh && (this.Lh.remove(),
                    this.Lh = null),
                this.mj = !1,
                b && b();
            else {
                this.Lh || (this.Lh = new UH(window, this.Wc, this.qJ));
                var d = !!this.NN;
                VH(this.Lh.apply(this.filter), d).update(!!a, function () {
                    c.mj = !1;
                    b && b()
                })
            }
        else
            b && b()
    };

    function eC(a, b) {
        a.mj = !0;
        a.NN = !0;
        a.Po();
        a.update(!0, function () {
            a.NN = !1;
            a.Oo();
            b && b()
        })
    }
    f.IG = function (a, b, c) {
        "intensity" === a ? (this.qz = b,
            KH(this.filter, b / 50),
            this.mj = !0) : this.mj = this.filter.IG(a, b);
        this.update(!1, c)
    };
    f.getByName = function (a) {
        return "intensity" == a ? this.qz : this.filter.getByName(a)
    };

    function nD(a, b) {
        a.filter = b;
        a.qz = Math.round(50 * OH(b))
    }

    function WH(a, b) {
        a.filter = new oD;
        a.qz = 50;
        b && a.filter.zh(b);
        eC(a, void 0)
    }

    function XH(a) {
        a.filter = new oD;
        a.qz = 50;
        a.mj = !0;
        eC(a, void 0)
    }

    function gC(a) {
        return a.filter.serialize()
    }
    f.Ca = function () {
        return this.filter.Ca()
    };
    f.Po = function () {};
    f.Oo = function () {
        if (this.Lh) {
            var a = VH(this.Lh, !0);
            if (!a.OP)
                if (a.PB)
                    YH(a);
                else if (a.canvas) {
                var b = a.AH.clone(!0).off().removeAttr("crossorigin"),
                    c = ZH(a);
                c ? (b.get(0).src = c,
                    $H(a)) : (c = a.canvas.toDataURL(),
                    a.cache.add(aI(a), c),
                    b.get(0).src = c);
                a.bb.find("img,canvas").remove();
                a.bb.append(b);
                a.AH = b;
                $("#limbo").append(a.canvas);
                a.Ow = !1
            }
        }
    };
    f.Uc = function () {
        return this.Wc.Uc()
    };
    f.RJ = function (a, b, c) {
        var d = new oD;
        a && d.zh(a);
        this.Wc.serialize().mediaId + this.Wc.serialize().mediaVersion !== this.L_ && (this.AD = {});
        if (this.AD[d.name])
            c(this.AD[d.name]);
        else if (a = this.Uc()) {
            var e = this,
                g = b ? aC : this.qJ,
                h = a[g];
            b = h.Aa();
            a = $("\x3cimg\x3e");
            var k = $("\x3cdiv\x3e");
            k.append(a);
            k.appendTo("#limbo");
            a.one("load", function () {
                var a = h.D(),
                    b = h.F();
                k.css("width", a).css("height", b);
                var a = new $A(e.Wc.serialize(), k),
                    n = new UH(window, a, g);
                n.apply(d).RJ().update(!0, function () {
                    var a = {
                        src: bI(n),
                        J7: cI(n)
                    };
                    e.AD[d.name] = a;
                    c(a);
                    n.remove();
                    k && k.remove()
                })
            });
            OB(PB, a, b)
        }
    };
    f.remove = function () {
        this.Lh && this.Lh.remove();
        this.Lh = null
    };
    f.trigger = Backbone.Events.trigger;
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    _.extend(SH.prototype, Backbone.Events);
    var LH = [{
        name: "The Blues",
        blur: -14,
        brightness: 63,
        contrast: -37,
        tint: 0,
        saturation: -26,
        vignette: 0,
        xpro: -23,
        tintAmount: 50
    }, {
        name: "Edge",
        blur: -53,
        brightness: 10,
        contrast: -24,
        tint: 49,
        saturation: 26,
        vignette: 0,
        xpro: 29,
        tintAmount: 50
    }, {
        name: "Selfie",
        blur: void 0,
        brightness: 10,
        contrast: -12,
        tint: -50,
        saturation: -12,
        vignette: 56,
        xpro: 50,
        tintAmount: 50
    }, {
        name: "Festive",
        blur: -7,
        brightness: 10,
        contrast: 21,
        tint: void 0,
        saturation: 24,
        vignette: void 0,
        xpro: 40,
        tintAmount: 50
    }, {
        name: "Rosie",
        blur: -14,
        brightness: 0,
        contrast: 55,
        tint: -73,
        saturation: -28,
        vignette: 0,
        xpro: 27,
        tintAmount: 50
    }, {
        name: "Drama",
        blur: 0,
        brightness: -10,
        contrast: 21,
        tint: 60,
        saturation: -34,
        vignette: 50,
        xpro: 80,
        tintAmount: 50
    }, {
        name: "Epic",
        blur: 1,
        brightness: 6,
        contrast: 20,
        tint: void 0,
        saturation: -14,
        vignette: 39,
        xpro: 50,
        tintAmount: 50
    }, {
        name: "Grayscale",
        blur: void 0,
        brightness: 15,
        contrast: -20,
        tint: void 0,
        saturation: -100,
        vignette: void 0,
        xpro: void 0,
        tintAmount: 50
    }, {
        name: "Nordic",
        blur: 0,
        brightness: 15,
        contrast: -16,
        tint: 0,
        saturation: -50,
        vignette: 0,
        xpro: 0,
        tintAmount: 50
    }, {
        name: "Summer",
        blur: 0,
        brightness: 10,
        contrast: 14,
        tint: -46,
        saturation: 18,
        vignette: 25,
        xpro: 30,
        tintAmount: 50
    }, {
        name: "Street",
        blur: -7,
        brightness: -7,
        contrast: 21,
        tint: 0,
        saturation: -95,
        vignette: 50,
        xpro: 0,
        tintAmount: 50
    }, {
        name: "Retro",
        blur: 0,
        brightness: 0,
        contrast: -14,
        tint: 14,
        saturation: -18,
        vignette: 40,
        xpro: 69,
        tintAmount: 50
    }, {
        name: "Whimsical",
        blur: -19,
        brightness: 43,
        contrast: -15,
        tint: -79,
        saturation: -53,
        vignette: 21,
        xpro: 60,
        tintAmount: 50
    }, {
        name: "Cali",
        blur: 0,
        brightness: 22,
        contrast: -46,
        tint: 0,
        saturation: 38,
        vignette: 0,
        xpro: 27,
        tintAmount: 50
    }];

    function UH(a, b, c) {
        this.Wc = b;
        this.Wh = c;
        this.bb = this.Wc.O();
        this.OP = this.Wc.XE;
        this.PB = dI;
        this.FL = this.BD = this.mj = this.locked = this.Ow = !1;
        !this.PB && "WebGLRenderingContext" in a && (a = fx.canvas(),
            b = fx.canvas(),
            a && b && (eI = a,
                fI = b,
                this.PB = dI = !0))
    }
    var eI, fI;
    UH.prototype.p0 = function () {
        var a = 0;
        return function () {
            a += 1;
            return a.toString()
        }
    }();
    var dI = !1;
    UH.prototype.RJ = function () {
        this.BD = !0;
        return this
    };
    UH.prototype.apply = function (a) {
        this.values = new oD;
        this.values.zh(MH(a).serialize());
        return this
    };

    function VH(a, b) {
        a.Ow = b;
        return a
    }
    UH.prototype.update = function (a, b) {
        this.FL || !a && this.locked || (this.OP ? this.D7(b) : this.PB ? gI(this, b) : hI(this, a, b))
    };

    function YH(a) {
        function b() {
            this.Ow = !1;
            c.bb.find("img,canvas").remove();
            c.bb.append(d);
            c.AH = d;
            $("#limbo").append(c.canvas)
        }
        if (a.canvas) {
            var c = a,
                d = a.AH.clone(!0).off().removeAttr("crossorigin"),
                e = ZH(a);
            e ? (d.get(0).src = e,
                b(),
                $H(a)) : gI(a, function () {
                c.canvas.update();
                c.canvas._.texture.toImage(d.get(0));
                var a = d.get(0).src;
                c.cache.add(aI(c), a);
                b()
            })
        }
    }

    function iI(a, b) {
        a = a.Wc.Em().scale(W).round();
        $(b).css(NB(a, 0))
    }
    (function () {
        function a(a, c, d, e) {
            dC(PB, a.Uc()[d].Aa()).then(function (g) {
                var h = $("\x3cdiv\x3e").append(g);
                g = new $A(a.serialize(), h);
                h.appendTo("#limbo");
                var k = new UH(window, g, d);
                k.values = b(c);
                k.update(!0, function () {
                    var a = bI(k);
                    h.remove();
                    e(a)
                })
            })
        }

        function b(a) {
            a = HH(a.Ca());
            a.saturation /= .8;
            0 !== a.jf && (a.brightness = 0 < a.brightness ? a.brightness / 1.5 : a.brightness - 15);
            0 < a.blur && (a.blur /= 2);
            return a
        }

        function c(a) {
            var b = $(a).children("defs.canva.filter");
            0 === b.length ? (b = document.createElementNS("http://www.w3.org/2000/svg", "defs"),
                b.classList.add("canva"),
                b.classList.add("filter"),
                a.appendChild(b)) : b = b.get(0);
            return b
        }

        function d(a, b, c) {
            var d = {
                    brightness: l,
                    contrast: m,
                    saturation: n,
                    jf: k,
                    blur: p,
                    vignette: h,
                    Qf: e
                },
                g = document.createElementNS("http://www.w3.org/2000/svg", "filter");
            c = c.Em().scale(2);
            g.setAttribute("id", b);
            "print" === bB && g.setAttribute("filterRes", c.D() + " " + c.F());
            b = document.createElementNS("http://www.w3.org/2000/svg", "feComponentTransfer");
            g.appendChild(b);
            Object.keys(a).filter(function (b) {
                return d.hasOwnProperty(b) && void 0 !== a[b]
            }).forEach(function (b) {
                0 !== a[b] && d[b].call(this, a[b], a).forEach(function (a) {
                    g.appendChild(a)
                })
            });
            return g
        }

        function e(a) {
            if (0 === a)
                return [];
            a = g(RH(a));
            a.forEach(function (a) {
                a.classList.add("crossProcess")
            });
            return a
        }

        function g(a) {
            var b = document.createElementNS("http://www.w3.org/2000/svg", "feComponentTransfer");
            b.setAttribute("color-interpolation-filters", "sRGB");
            var c = {
                r: a.red,
                g: a.green,
                b: a.blue
            };
            ["r", "g", "b"].forEach(function (a) {
                var d = document.createElementNS("http://www.w3.org/2000/svg", "feFunc" + a.toUpperCase());
                if (a = c[a])
                    a = jI({
                        x: a[0][0],
                        y: a[0][1]
                    }, {
                        x: a[1][0],
                        y: a[1][1]
                    }, {
                        x: a[2][0],
                        y: a[2][1]
                    }, {
                        x: a[3][0],
                        y: a[3][1]
                    }).map(function (a) {
                        return a.y
                    }),
                    d.setAttribute("type", "table"),
                    d.setAttribute("tableValues", a.join(" ")),
                    b.appendChild(d)
            });
            b.classList.add("curves");
            return [b]
        }

        function h(a) {
            if (0 === a)
                return [];
            var b = document.createElementNS("http://www.w3.org/2000/svg", "radialGradient"),
                c = document.createElementNS("http://www.w3.org/2000/svg", "stop"),
                d = document.createElementNS("http://www.w3.org/2000/svg", "stop");
            b.classList.add("vignette");
            b.appendChild(c);
            b.appendChild(d);
            b.setAttribute("cx", "50%");
            b.setAttribute("cy", "50%");
            b.setAttribute("r", "50%");
            b.setAttribute("fx", "50%");
            b.setAttribute("fy", "50%");
            var e = Math.min(1, J.gx);
            c.setAttribute("offset", (1 < J.gx ? J.XH / J.gx : J.XH).toString());
            c.setAttribute("stop-color", "#000000");
            c.setAttribute("stop-opacity", "0");
            d.setAttribute("offset", e.toString());
            d.setAttribute("stop-color", "#000000");
            d.setAttribute("stop-opacity", a / 100);
            return [b]
        }

        function k(a, b) {
            if (0 === a)
                return [];
            a = QH(a + 100, b.getByName("tintAmount"));
            var c = {
                    r: a.color.r / 255,
                    g: a.color.Tk / 255,
                    b: a.color.b / 255
                },
                d = a.po / 100 * 2,
                e = document.createElementNS("http://www.w3.org/2000/svg", "feComponentTransfer");
            e.setAttribute("color-interpolation-filters", "sRGB");
            ["r", "g", "b"].forEach(function (a) {
                var b = document.createElementNS("http://www.w3.org/2000/svg", "feFunc" + a.toUpperCase());
                a = c[a] * d;
                b.setAttribute("type", "linear");
                b.setAttribute("slope", 1 - d);
                b.setAttribute("intercept", a);
                e.appendChild(b)
            });
            e.classList.add("tint");
            return [e]
        }

        function l(a) {
            if (0 === a)
                return [];
            var b = a / 100,
                c = document.createElementNS("http://www.w3.org/2000/svg", "feComponentTransfer");
            c.setAttribute("color-interpolation-filters", "sRGB");
            ["r", "g", "b"].forEach(function (a) {
                a = document.createElementNS("http://www.w3.org/2000/svg", "feFunc" + a.toUpperCase());
                a.setAttribute("type", "linear");
                a.setAttribute("slope", 1);
                a.setAttribute("intercept", b);
                c.appendChild(a)
            });
            c.classList.add("brightness");
            return [c]
        }

        function m(a) {
            if (0 === a)
                return [];
            var b = (a * (1 < a ? 1 / .6 : 1) + 100) / 100,
                c = document.createElementNS("http://www.w3.org/2000/svg", "feComponentTransfer");
            c.setAttribute("color-interpolation-filters", "sRGB");
            ["r", "g", "b"].forEach(function (a) {
                a = document.createElementNS("http://www.w3.org/2000/svg", "feFunc" + a.toUpperCase());
                var d = -(.5 * b) + .5;
                a.setAttribute("type", "linear");
                a.setAttribute("slope", b);
                a.setAttribute("intercept", d);
                c.appendChild(a)
            });
            c.classList.add("contrast");
            return [c]
        }

        function n(a) {
            if (0 === a)
                return [];
            a = (a + 100) / 100;
            a *= 1 >= a ? 1 : a;
            a = [.3086 + .6914 * a, .6094 - .6094 * a, .082 - .082 * a, 0, 0, .3086 - .3086 * a, .6094 + (1 - .6094) * a, .082 - .082 * a, 0, 0, .3086 - .3086 * a, .6094 - .6094 * a, .082 + .918 * a, 0, 0, 0, 0, 0, 1, 0];
            var b = document.createElementNS("http://www.w3.org/2000/svg", "feColorMatrix");
            b.setAttribute("color-interpolation-filters", "sRGB");
            b.setAttribute("type", "matrix");
            b.setAttribute("values", a.join(" "));
            b.classList.add("saturation");
            return [b]
        }

        function p(a) {
            if (0 === a)
                return [];
            if (0 > a) {
                a *= -1;
                if (0 === a)
                    a = [];
                else {
                    a = a / 100 * 4;
                    a = [0, -a, 0, -a, 4 * a + 1, -a, 0, -a, 0];
                    var b = document.createElementNS("http://www.w3.org/2000/svg", "feConvolveMatrix");
                    b.setAttribute("order", "3");
                    b.setAttribute("kernelMatrix", a.join(" "));
                    b.classList.add("sharpen");
                    a = [b]
                }
                return a
            }
            b = document.createElementNS("http://www.w3.org/2000/svg", "feGaussianBlur");
            b.setAttribute("stdDeviation", .125 * a);
            b.classList.add("blur");
            return [b]
        }
        var r = 0;
        UH.prototype.D7 = function (b) {
            var e = "_CANVA_FILTER_" + r++;
            kI(this);
            if (!this.values || NH(this.values, FH))
                b && b();
            else {
                this.yy = c(this.bb.get(0));
                var g = d(this.values, e, this.Wc);
                this.yy.appendChild(g);
                var g = this.yy.querySelector(".vignette"),
                    h = this.bb.get(0).querySelector(".vignette"),
                    k = e + "_VIGNETTE";
                g ? (this.yy.appendChild(g),
                    g.setAttribute("id", k),
                    h.setAttribute("fill", "url(#" + k + ")")) : h.setAttribute("fill", "none");
                var l = this.bb.find("image.placeholder").get(0);
                Py ? a(this.Wc, this.values, this.Wh, function (a) {
                    a && OB(PB, $(l), a);
                    b && b()
                }) : (l.setAttribute("filter", "url(#" + e + ")"),
                    b && b())
            }
        }
    })();

    function aI(a) {
        var b, c = a.Wc.serialize();
        a.sh && a.values && a.Wc && (b = a.values.Ca() + c.mediaId + c.mediaVersion + a.sh.width + a.sh.height);
        return b
    }

    function lI(a) {
        var b = aI(a);
        return a.Ow && !!b && !!a.cache.fetch(b)
    }

    function ZH(a) {
        return lI(a) ? a.cache.fetch(aI(a)) : void 0
    }

    function gI(a, b) {
        function c() {
            d.sh.width = e;
            d.sh.height = g;
            d.canvas || (d.canvas = d.BD ? fI : eI,
                d.bb.append(d.canvas),
                iI(d, d.canvas),
                d.TF = d.canvas.texture(d.sh),
                d.canvas.draw(d.TF, e, g),
                $("#limbo").append(d.sh));
            if (d.canvas.width !== e || d.canvas.height !== g)
                d.canvas.width = e,
                d.canvas.height = g;
            iI(d, d.canvas);
            d.canvas.draw(d.TF, e, g);
            if (d.values) {
                d.canvas.brightnessContrast((d.values.brightness || 0) / 100, (d.values.contrast || 0) / 100).saturation(d.values.saturation || 0);
                if (d.values.jf) {
                    var a = QH(d.values.jf + 100, d.values.qh);
                    d.canvas.colorize(a.color.r, a.color.Tk, a.color.b, a.po / 100)
                }
                d.values.blur && (0 < d.values.blur ? d.canvas.triangleBlur(d.values.blur) : d.canvas.unsharpMask(3, -1 * d.values.blur / 20));
                d.values.Qf && (a = RH(d.values.Qf),
                    d.canvas.curves(a.red, a.green, a.blue));
                $H(d);
                d.values.name === GH.name && d.canvas.colorHalftone(e / 2, g / 2, .45, e / 100)
            }
            d.canvas.update();
            b && b();
            d.BD = !1;
            d.locked = !1;
            d.mj = !1
        }
        var d = a,
            e, g;
        if (lI(a))
            b && b();
        else if (a = a.Wc.Uc())
            a = a[d.Wh],
            e = a.D(),
            g = a.F(),
            d.vT = a.Aa(),
            d.Ow = !1,
            d.locked = !0,
            mI(d, c)
    }

    function hI(a, b, c) {
        function d() {
            h.sh.width = k;
            h.sh.height = l;
            if (h.Ah) {
                if (h.canvas.width !== k || h.canvas.height !== l)
                    h.canvas.width = k,
                    h.canvas.height = l;
                e()
            } else
                h.canvas = document.createElement("canvas"),
                h.canvas.setAttribute("data-caman-hidpi-disabled", !0),
                h.nR = "camanCanvas" + h.p0(),
                h.canvas.id = h.nR,
                h.canvas.width = k,
                h.canvas.height = l,
                iI(h, h.canvas),
                h.bb.append(h.canvas),
                h.cZ = h.canvas.getContext("2d"),
                h.cZ.drawImage(h.sh, 0, 0, k, l),
                h.Ah = Caman("#" + h.nR, e),
                $("#limbo").append(h.sh)
        }

        function e() {
            iI(h, h.canvas);
            h.Ah.revert(!1);
            if (h.values) {
                h.values.brightness && 0 != h.values.brightness && h.Ah.brightness(h.values.brightness);
                h.values.contrast && 0 != h.values.contrast && h.Ah.contrast(h.values.contrast);
                h.values.saturation && 0 != h.values.saturation && (-100 == h.values.saturation ? h.Ah.greyscale() : h.Ah.saturation(h.values.saturation));
                var a = QH(h.values.jf + 100, h.values.qh);
                h.values.jf && h.Ah.colorize(a.color.r, a.color.Tk, a.color.b, 2.5 * a.po);
                h.values.blur && 0 != h.values.blur && (0 < h.values.blur ? h.Ah.stackBlur(h.values.blur) : h.Ah.sharpen(-1 * h.values.blur || 0));
                if (h.values.Qf) {
                    var b = RH(h.values.Qf),
                        a = b.red.map(g),
                        d = b.green.map(g),
                        b = b.blue.map(g);
                    h.Ah.curves("r", a[0], a[1], a[2], a[3]);
                    h.Ah.curves("g", d[0], d[1], d[2], d[3]);
                    h.Ah.curves("b", b[0], b[1], b[2], b[3])
                }
                $H(h)
            }
            h.Ah.render(function () {
                c && c();
                h.BD = !1;
                window.setTimeout(function () {
                    h.locked = !1
                }, 1E3);
                h.mj = !1
            })
        }

        function g(a) {
            return [Math.min(255, Math.round(255 * a[0])), Math.min(255, Math.round(255 * a[1]))]
        }
        if (b) {
            var h = a,
                k, l;
            if (lI(a))
                c && c();
            else if (a = a.Wc.Uc())
                a = a[h.Wh],
                k = a.D(),
                l = a.F(),
                h.vT = a.Aa(),
                h.Ow = !1,
                h.locked = !0,
                mI(h, d)
        } else
            c && c()
    }

    function $H(a) {
        var b = a.bb.find(".vignette");
        0 === b.length && (b = $('\x3cdiv class\x3d"vignette"\x3e\x3c/div\x3e'),
            a.bb.prepend(b));
        a.values.vignette ? (a = cI(a),
            b.removeClass("off").addClass("on").css("background-image", "radial-gradient(" + a + ")")) : b.removeClass("on").addClass("off").css("background-image", "none")
    }

    function mI(a, b) {
        function c(a) {
            if (d.Ur && 0 < d.Ur.length && d.Ur.get(0).src) {
                d.sh = new Image;
                var c = $(d.sh);
                c.css("visibility", "hidden");
                OB(PB, c, a).then(function () {
                    window.setTimeout(function () {
                        d.FL || (d.Ur.appendTo("#limbo"),
                            c.css("visibility", "visible"),
                            b())
                    }, 300)
                });
                iI(d, d.sh);
                d.bb.append(c)
            } else
                window.setTimeout(function () {
                    mI(d, b)
                }, 500)
        }
        var d = a;
        d.canvas ? (1 == $(d.canvas).parents("#limbo").length && ($(d.canvas).appendTo(d.bb),
                d.bb.find("img").remove()),
            b()) : (d.Ur = d.bb.find("img"),
            d.AH = d.Ur,
            c(d.vT))
    }

    function cI(a) {
        return "circle farthest-side at center center, rgba(0,0,0,0) " + 100 * J.XH + "%, " + ("rgba(0,0,0," + a.values.vignette / 100 + ")") + " " + 100 * J.gx + "%"
    }

    function bI(a) {
        var b = $("\x3cimg /\x3e");
        a.PB ? (a.canvas.update(),
            a.canvas._.texture.toImage(b.get(0))) : b.get(0).src = a.canvas.toDataURL();
        return b.get(0).src
    }
    UH.prototype.remove = function () {
        this.FL = !0;
        this.OP ? kI(this) : ($(this.sh).remove(),
            this.Ur && this.Ur.remove(),
            this.bb.find(".vignette").remove(),
            this.TF && this.TF.destroy(),
            this.canvas && ($(this.canvas).remove(),
                this.canvas.width = 0,
                this.canvas = null))
    };

    function kI(a) {
        a.bb.find("image.placeholder").removeAttr("filter");
        a.bb.get(0).querySelector(".vignette").setAttribute("fill", "none");
        $(a.yy).remove();
        a.yy = null
    }

    function nI() {
        this.cache = {}
    }
    nI.prototype.add = function (a, b) {
        var c = this.cache[a];
        return c ? c : this.cache[a] = b
    };
    nI.prototype.fetch = function (a) {
        return this.cache[a]
    };
    UH.prototype.cache = new nI;
    J.uQ && oI.forEach(function (a) {
        a.fonts.forEach(function (a) {
            a.R = a.X;
            a.vb = a.Cb
        })
    });

    function pI(a, b, c) {
        var d = $("\x3cdiv\x3e");
        d.css("font-family", a + ", zerowidthfallbackfont").css("font-size", "20px").css("font-weight", b || "400").css("font-style", c || "normal").css("font-synthesis", "none").css("position", "absolute").css("white-space", "pre").html("A1  ");
        $("#limbo").append(d);
        a = d.get(0).offsetWidth;
        d.remove();
        return 0 === a
    };

    function qI(a, b) {
        this.fonts = a;
        this.pc = b.pc;
        this.xH = b.xH;
        this.yK = b.yK;
        this.zK = {};
        this.By = [];
        this.BK = [];
        this.fu = [];
        this.AK = [];
        this.iE = [];
        this.WG = Date.now();
        this.EN = [];
        this.QB = [];
        this.locale = b.locale;
        this.DV = null;
        this.HS = !!b.HS;
        this.aa = b.aa
    }
    qI.prototype.off = Backbone.Events.off;
    qI.prototype.on = Backbone.Events.on;
    qI.prototype.once = Backbone.Events.once;
    qI.prototype.trigger = Backbone.Events.trigger;
    var rI = "hairline thin light regular medium bold black heavy".split(" "),
        sI = new Set(rI),
        tI = new Map(rI.map(function (a, b) {
            return [a, b]
        }));

    function uI(a) {
        return a.QB.filter(function (a) {
            return 0 > this.EN.indexOf(a)
        }, a)
    }

    function vI() {
        var a = Jb;
        a.DV || (a.DV = new P(function (a, c) {
                var d = aE((new $D).bt(!0).Zs(!1).ct("*").ho(), ["FONT"]).Ig(25);
                AD(this.pc, d, function (d, g) {
                        200 === d && g ? (d = g.media,
                            d = wI(this, d),
                            d.forEach(function (a) {
                                0 <= xI(this).indexOf(a) && (this.QB.unshift(a),
                                    this.QB = this.QB.slice(0, 25))
                            }, this),
                            yI(this, d.map(function (a) {
                                return a.W
                            })),
                            a()) : c()
                    }
                    .bind(this))
            }
            .bind(a)))
    }

    function Bz(a, b) {
        if (b = b && b.replace ? b.replace(/#/gi, "_") : null)
            for (var c = 0; c < a.fonts.length; c++)
                for (var d = a.fonts[c], e = 0; e < d.fonts.length; e++) {
                    var g = d.fonts[e];
                    if (g.name == b || g.family == b)
                        return g.Uk = d.Uk,
                            g
                }
        return null
    }

    function sz(a) {
        a = Bz(Jb, a);
        return !(!a || !0 !== a.eZ)
    }

    function zI(a, b) {
        if (b)
            for (var c = 0; c < a.fonts.length; c++)
                for (var d = a.fonts[c], e = 0; e < d.fonts.length; e++) {
                    var g = d.fonts[e];
                    if (g.media && g.media.id === b.id && g.media.version === b.version)
                        return g.Uk = d.Uk,
                            g
                }
        return null
    }

    function Fz(a) {
        if ((a = Bz(Jb, a)) && a.media)
            return new Fm({
                id: a.media.id,
                version: a.media.version
            })
    }

    function Gz(a, b, c, d) {
        var e = [],
            g = [];
        b && e.push(b);
        c && g.push(c);
        wC(a, e, g, d)
    }

    function AI(a, b) {
        yI(Jb, [a], b)
    }

    function BG(a, b) {
        return (b = Bz(a, b)) ? void 0 === b.url && !1 === b.cb || 0 <= a.fu.indexOf(b.family) : !1
    }

    function BI(a, b, c) {
        a.BK = a.BK.concat(b);
        a.iE.push({
            Te: b,
            callback: c || $.noop
        })
    }

    function CI(a) {
        function b(a) {
            var b = !0;
            0 !== a.Te.filter(function (a) {
                var d = BG(c, a);
                a = 0 <= c.AK.indexOf(a);
                if (!d && !a)
                    return !0;
                a && (b = !1);
                return !1
            }).length || a.XR || (a.XR = !0,
                a.callback(b),
                c.trigger("update"))
        }
        var c = a;
        a.aa.setTimeout(function () {
            c.iE.forEach(b);
            c.iE = c.iE.filter(function (a) {
                return !a.XR
            })
        }, 0)
    }

    function DI(a, b) {
        a.fu = a.fu.filter(function (c) {
            return (c = Bz(a, c)) && 0 > b.indexOf(c.family)
        });
        b.forEach(function (b) {
            var d = Bz(a, b);
            d && -1 === a.AK.indexOf(d.family) && a.AK.push(d.family);
            a.trigger("fontLoadFailed", b)
        });
        CI(a)
    }

    function EI(a, b, c) {
        c = c || 0;
        var d = b.filter(function (b) {
                var c = Bz(a, b);
                if (c) {
                    b = c.family;
                    var d = c.K.bold,
                        e = c.K.v,
                        g = c.K.w;
                    Da(!!(0 < $("#limbo").length), "Font measurement requires #limbo");
                    Da(!!(0 < $("#zeroWidthFallbackFont").length), "Font measurement requires #zeroWidthFallbackFont");
                    pI("zerowidthfallbackfont") ? (c = !pI(b),
                        d = !d || !pI(b, "700"),
                        e = !e || !pI(b, "400", "italic"),
                        b = !g || !pI(b, "italic", "700"),
                        b = c && d && e && b) : b = !1
                } else
                    b = !1;
                return b
            }),
            e = b.filter(function (a) {
                return -1 === d.indexOf(a)
            });
        if (0 < e.length)
            if (6 >= c) {
                var g = c + 1;
                a.aa.setTimeout(function () {
                    EI(a, e, g)
                }, 200 * Math.pow(2, c))
            } else
                FI(a, e);
        $.browser.safari ? a.aa.setTimeout(function () {
            FI(a, d)
        }, 2E3) : FI(a, d)
    }

    function FI(a, b) {
        b.forEach(function (b) {
            b = Bz(a, b); -
            1 === a.fu.indexOf(b.family) && a.fu.push(b.family)
        });
        CI(a)
    }
    qI.prototype.cb = function (a) {
        function b(a, b, c, k) {
            k = k.j ? "src: url('" + k.j + "') format('woff'); " : k.i ? "src: url('" + k.i + "') format('truetype'); " : k.ca ? "src: url('" + k.ca + "') format('opentype'); " : void 0;
            k && d.insertRule("@font-face {" + ("font-family: '" + a + "'; ") + ("font-style: " + b + "; ") + ("font-weight: " + c + "; ") + k + "}", 0)
        }
        var c = this,
            d = function () {
                var a = $("#fontStylesheet" + c.WG);
                0 === a.length && (a = $('\x3cstyle id\x3d"fontStylesheet' + c.WG + '"\x3e\x3c/style\x3e'),
                    $("head").append(a));
                return a.get(0).sheet
            }();
        a.cb && (b(a.family, "normal", "400", a.o.l),
            a.K.bold ? b(a.family, "normal", "700", a.o.bold) : b(a.family, "normal", "700", a.o.l),
            a.K.v ? b(a.family, "italic", "400", a.o.v) : b(a.family, "italic", "400", a.o.l),
            a.K.w ? b(a.family, "italic", "700", a.o.w) : a.K.bold ? b(a.family, "italic", "700", a.o.bold) : a.K.v ? b(a.family, "italic", "700", a.o.v) : b(a.family, "italic", "700", a.o.l))
    };

    function wC(a, b, c, d) {
        b && 0 < b.length ? c && 0 < c.length ? GI(a, b, function (b) {
            b ? yI(a, c, d) : a.aa.setTimeout(function () {
                d && d(!1)
            }, 0)
        }) : GI(a, b, d) : c && 0 < c.length ? yI(a, c, d) : a.aa.setTimeout(function () {
            d && d(!0)
        }, 0)
    }

    function HI(a, b, c) {
        var d = [],
            e = [];
        b.forEach(function (a) {
            var b = a.font;
            a = b.family;
            (b = b.ac()) ? d.push(b): a && e.push(a)
        });
        wC(a, d, e, c)
    }

    function aD(a, b, c) {
        function d(a) {
            if (a) {
                var b = m.yK.Uc(a.id, a.version);
                if (b)
                    l.push(h(II(m, a, b)));
                else
                    throw Error("Media " + a.id + "," + a.version + " missing from media map.");
            }
        }

        function e(a) {
            var b = [],
                d = new Set;
            a.forEach(function (a) {
                a.media.forEach(function (a) {
                    var c = a.G() + "," + a.Va().getVersion();
                    n.has(c) && !d.has(c) && (b.push(a),
                        d.add(c))
                })
            });
            a = wI(m, b).map(h);
            l = l.concat(a);
            c(!0, l)
        }

        function g() {
            c(!1, l)
        }

        function h(a) {
            return a.family || a.name
        }

        function k(a) {
            return null == m.zK[a.G() + "," + a.getVersion()]
        }
        var l = [],
            m = a,
            n = new Set,
            p = b.filter(function (a) {
                return !zI(m, a)
            }).filter(function (a) {
                return !!a
            });
        p.forEach(function (a) {
            n.add(a.id + "," + a.version)
        });
        if (a.pc) {
            var r = p.filter(k);
            if (0 !== r.length) {
                b = fE(new eE, r).ho().OX().IX();
                var u = GD(a.pc, b);
                r.forEach(function (a) {
                    m.zK[a.G() + "," + a.getVersion()] = u
                })
            }
            a = p.map(function (a) {
                return m.zK[a.G() + "," + a.getVersion()]
            });
            P.all(a).then(e).catch(g)
        } else
            a.yK && b.forEach(d),
            a.aa.setTimeout(function () {
                c(!0, l)
            }, 0)
    }

    function GI(a, b, c) {
        aD(a, b, function (b, e) {
            b ? yI(a, e, c) : c && a.aa.setTimeout(function () {
                c(!1)
            }, 0)
        })
    }

    function JI(a, b) {
        function c(a) {
            return a && (a = (a.W9 | a.l9 + a.R9) / 40,
                1 < a) ? Math.round(a * d - d) : 0
        }
        a = a.HS ? 15E3 : 6E4;
        var d = a / 30;
        return b.reduce(function (a, b) {
            b.o && (a += c(b.o.l),
                a += c(b.o.bold),
                a += c(b.o.v),
                a += c(b.o.w));
            return Math.ceil(a)
        }, a)
    }

    function yI(a, b, c) {
        function d(a, b, c) {
            h.xH.load({
                custom: {
                    families: a,
                    urls: b
                },
                active: function () {
                    EI(h, c)
                },
                inactive: function () {
                    DI(h, c)
                },
                timeout: u
            })
        }

        function e(a, b) {
            var c = /^([^:]+)(:.+)?/,
                d = [];
            a.forEach(function (a, e) {
                if (void 0 !== a && null !== a) {
                    var g = ["n4"],
                        h = a.match(c),
                        k = h[1].replace(/[^a-z0-9]/gi, "").toLowerCase(); -
                    1 < a.indexOf(":") && (g = h[2].substring(1).split(","));
                    var l = document.querySelector("html"),
                        m = !1;
                    g.forEach(function (a) {
                        a = "wf-" + k + "-" + a + "-inactive";
                        m = m || l.classList.contains(a)
                    });
                    m && d.push({
                        family: a,
                        url: b[e]
                    })
                }
            });
            return d
        }

        function g(a) {
            return Bz(h, a)
        }
        var h = a,
            k = [],
            l = [],
            m = {},
            n = _.uniq(b).filter(function (a) {
                return null !== g(a)
            }),
            p = n.filter(function (a) {
                var b = 0 <= h.fu.indexOf(a);
                a = Bz(h, a);
                a = void 0 === a.url && !1 === a.cb;
                return !(b || a)
            }),
            r = p.filter(function (a) {
                return 0 > h.BK.indexOf(a)
            }),
            r = _.uniq(r.map(g)),
            u = JI(a, r);
        0 === p.length && c ? h.aa.setTimeout(function () {
            c(!0)
        }, 0) : (BI(h, n, c),
            CI(h),
            r.forEach(function (a) {
                var b;
                b = ["n4"];
                a.K && (a.K.v && b.push("i4"),
                    a.K.bold && b.push("n7"),
                    a.K.w && b.push("i7"));
                b.sort();
                if (b = (b = a.K && (a.K.v || a.K.bold || a.K.w) ? a.family + ":" + b.join(",") : a.family) && b.replace ? b.replace(/#/gi, "_") : null) {
                    k.push(b);
                    a.vP && (m[b] = a.vP);
                    !0 === a.cb ? h.cb(a) : a.url && l.push(a.url);
                    b = h;
                    var c = $("#fontOverrideStylesheet" + b.WG);
                    0 === c.length && (c = $('\x3cstyle id\x3d"fontOverrideStylesheet' + b.WG + '"\x3e\x3c/style\x3e'),
                        $("head").append(c));
                    b = c.get(0).sheet;
                    a.K && (!1 === a.K.v && b.insertRule('font[face\x3d"' + a.family + '"] * {font-style: normal !important; }', 0), !1 === a.K.bold && b.insertRule('font[face\x3d"' + a.family + '"] * {font-weight: normal !important; }', 0), !1 === a.K.w && (b.insertRule('font[face\x3d"' + a.family + '"] b i {font-weight: normal !important; font-style: normal !important; }', 0),
                        b.insertRule('font[face\x3d"' + a.family + '"] i b {font-weight: normal !important; font-style: normal !important; }', 0)));
                    h.trigger("fontLoadStart", a.family)
                }
            }),
            0 < r.length && a.xH.load({
                custom: {
                    families: k,
                    urls: l,
                    testStrings: m
                },
                active: function () {
                    var a = e(k, l),
                        c;
                    0 < a.length ? (c = _.pluck(a, "family"),
                        a = _.pluck(a, "url"),
                        d(c, a, b)) : EI(h, b)
                },
                inactive: function () {
                    d(k, l, b)
                },
                timeout: u
            }))
    }

    function xI(a) {
        return RA(a).filter(function (a) {
            return !a.disabled
        }).sort(a.MI)
    }
    qI.prototype.MI = function (a, b) {
        a = w(a.family || a.displayName);
        var c = w(b.family || b.displayName);
        if (!a.includes(" ") || !c.includes(" "))
            return a.localeCompare(c);
        b = a.toLocaleLowerCase().replace(/demi|extra|ultra/gi, "");
        a = c.toLocaleLowerCase().replace(/demi|extra|ultra/gi, "");
        var c = b.split(/\s+/gi),
            d = a.split(/\s+/gi),
            e = c.pop(),
            g = d.pop();
        return c.join("") === d.join("") && sI.has(e) && sI.has(g) ? Math.sign(tI.get(e) - tI.get(g)) : b.localeCompare(a)
    };

    function RA(a) {
        var b = [];
        a.fonts.forEach(function (a) {
            a.fonts.forEach(function (a) {
                b.push(a)
            })
        });
        return b.sort(a.MI)
    }

    function lz(a) {
        var b = RA(Jb).filter(function (b) {
            return (b.name || b.family).toLowerCase() == a.toLowerCase()
        });
        return 0 < b.length ? b[0].name || b[0].family : null
    }

    function wI(a, b) {
        return b.map(function (a) {
            var b, e = new Fm({
                id: a.G(),
                version: a.Va().getVersion()
            });
            if (KI(this, e))
                return zI(this, e);
            b = a.Va();
            var g = a.G();
            a = b.Jb() || a.importFilename.replace(/\..*$/, "") || g;
            var h = b.Dc()[Fg].Aa(),
                k, l, m;
            /\.ttf/gi.test(h) ? k = h : /\.otf/gi.test(h) ? l = h : /\.woff/gi.test(h) && (m = h);
            h = b.Dc()[aC];
            b = LI({
                displayName: a,
                fontFamily: g + "_" + b.getVersion(),
                R: {
                    url: h.Aa(),
                    width: h.D(),
                    height: h.F()
                },
                ua: g,
                va: b.getVersion(),
                rX: k,
                dV: l,
                PX: m
            });
            this.By.push(e);
            MI(this, b);
            return b
        }, a)
    }

    function II(a, b, c) {
        if (KI(a, b) && zI(a, b))
            b = w(zI(a, b)),
            MI(a, b);
        else {
            a.By.push(b);
            var d = c[Fg].Aa(),
                e, g, h;
            /\.ttf/gi.test(d) ? e = d : /\.otf/gi.test(d) ? g = d : /\.woff/gi.test(d) && (h = d);
            c = c[aC];
            b = LI({
                displayName: b.id,
                fontFamily: b.id + "_" + b.version,
                R: {
                    url: c.Aa(),
                    width: c.D(),
                    height: c.F()
                },
                ua: b.id,
                va: b.version,
                rX: e,
                dV: g,
                PX: h
            })
        }
        MI(a, b);
        return b
    }

    function MI(a, b) {
        var c;
        (function () {
            c = a.fonts.filter(function (a) {
                return "Media" === a.nf
            })[0];
            return !!c
        })() ? c.fonts.push(b): a.fonts.push({
            nf: "Media",
            Uk: "sans-serif",
            fonts: [b]
        })
    }

    function KI(a, b) {
        for (var c = 0; c !== a.By.length; c++)
            if (a.By[c].id === b.id && a.By[c].version === b.version)
                return !0;
        return !1
    }

    function LI(a) {
        return {
            family: a.fontFamily,
            W: a.fontFamily,
            displayName: a.displayName,
            disabled: !1,
            cb: !0,
            R: a.R,
            X: a.R,
            media: {
                id: a.ua,
                version: a.va
            },
            o: {
                l: {
                    ca: a.dV,
                    i: a.rX,
                    j: a.PX,
                    C: a.fontFamily
                }
            },
            url: "#",
            K: {
                v: !1,
                bold: !1,
                w: !1
            }
        }
    };

    function NI(a) {
        this.id = a.id;
        this.version = a.version
    }
    NI.prototype.G = function () {
        return this.id
    };
    NI.prototype.getVersion = function () {
        return this.version
    };

    function OI(a) {
        this.document = a.document;
        this.locale = a.locale
    }
    OI.prototype.getDocument = function () {
        return this.document
    };
    OI.prototype.qg = function () {
        return this.locale
    };

    function PI() {}

    function QI() {
        return new PI
    };

    function RI() {
        this.fa = Hb
    }

    function SI(a, b, c, d, e, g) {
        a.fa.post("/import/layout/" + encodeURIComponent(b) + "/" + encodeURIComponent(c.toString()) + (g ? "?designType\x3d" + encodeURIComponent(g) : ""), d, function (a) {
            e && e(a)
        })
    }

    function TI(a, b) {
        Qi(a.fa, "/import/elementgroup/" + encodeURIComponent(b.document.id) + "/" + encodeURIComponent(String(b.document.version)), b).catch(Ji).get(0).then(Ja).then(QI)
    }

    function UI(a, b, c, d) {
        return Qi(a.fa, "/media/" + encodeURIComponent(b) + "/" + encodeURIComponent(c.toString()) + "?upload", {
            url: d
        })
    }

    function VI(a, b, c, d) {
        return Ii(a.fa, "/media/" + encodeURIComponent(b) + "/" + encodeURIComponent(c.toString()) + "?form\x26mimeType\x3d" + encodeURIComponent(d)).spread(WI)
    }

    function XI(a, b, c, d) {
        return Qi(a.fa, "/media/" + encodeURIComponent(b) + "/" + encodeURIComponent(c.toString()) + "?import", d).spread(function (a) {
            return kj(a.media)
        })
    }

    function YI() {
        this.prices = {}
    }

    function ZI(a, b, c) {
        a.prices[b] = c;
        return a
    }
    var $I = ZI(new YI, "ONE_USE", 0),
        aJ = ZI(ZI(ZI(new YI, "ONE_USE", 1), "ROYALTY_FREE", 10), "EXTENDED", 100);

    function bJ() {
        this.licensing = this.licenseModel = null;
        this.autoPublicify = !1;
        this.publicifyMediaRequests = []
    }
    bJ.prototype.gQ = function (a) {
        this.licenseModel = a;
        return this
    };
    bJ.prototype.hQ = function (a) {
        this.licensing = a;
        return this
    };

    function cJ(a, b) {
        a.publicifyMediaRequests.push(b)
    }

    function dJ() {
        var a = (new bJ).gQ($I).hQ("FREE");
        a.autoPublicify = !0;
        return a
    }
    bJ.prototype.zH = function (a) {
        this.locale = a;
        return this
    };

    function eJ() {
        this.licensing = this.licenseModel = this.keywords = this.description = this.title = this.version = this.media = void 0
    }

    function fJ(a) {
        var b = new eJ;
        b.media = a;
        return b
    }
    f = eJ.prototype;
    f.jk = function (a) {
        this.version = a;
        return this
    };

    function gJ(a, b) {
        a.title = b;
        return a
    }
    f.HX = function (a) {
        this.description = a;
        return this
    };
    f.yH = function (a) {
        this.keywords = a;
        return this
    };
    f.gQ = function (a) {
        this.licenseModel = a;
        return this
    };
    f.hQ = function (a) {
        this.licensing = a;
        return this
    };

    function hJ() {}
    hJ.prototype.LX = function (a) {
        this.importVersion = a;
        return this
    };

    function iJ(a) {
        this.reset();
        this.u = a
    }
    iJ.prototype.reset = function () {
        this.previous = null;
        this.xq = [];
        this.Ek = {
            top: 0,
            left: 0
        }
    };
    iJ.prototype.FA = function () {
        var a = this;
        jJ();
        a.xq.forEach(function (b) {
            b = {
                elementIndex: b.ea(),
                pageIndex: Mo(G, b.ha()),
                "new": {
                    left: b.Y(),
                    top: b.N()
                },
                old: {
                    left: b.Y() - a.Ek.left,
                    top: b.N() - a.Ek.top
                }
            };
            I.register(new Y(No, b))
        });
        kJ()
    };
    iJ.prototype.eF = function () {
        var a = this;
        return function (b) {
            a.xq = G.hb();
            var c = $(b.target);
            if ("true" == c.attr("contenteditable") || c.is("input:focus") || c.is("textarea:focus"))
                return a.reset(), !0;
            if (0 < $(".toolbar__item--submenuExpanded .menuList").length || "block" === $("#overlays #marquee").css("display") || b.metaKey || b.ctrlKey)
                return !0;
            if (0 < a.xq.length) {
                var d = 1;
                b.shiftKey && (d = 10);
                switch (b.which) {
                    case 37:
                        return a.previous = 37,
                            a.Ek.left -= 1 / W * 1 * d,
                            a.xq.forEach(function (a) {
                                nB(a, 1 / W * 1 * d)
                            }),
                            lJ(xc(a.u), zc(a.u)), !1;
                    case 38:
                        return a.previous = 38,
                            a.Ek.top -= 1 / W * 1 * d,
                            a.xq.forEach(function (a) {
                                oB(a, 1 / W * 1 * d)
                            }),
                            lJ(xc(a.u), zc(a.u)), !1;
                    case 39:
                        return a.previous = 39,
                            a.Ek.left += 1 / W * 1 * d,
                            a.xq.forEach(function (a) {
                                pB(a, 1 / W * 1 * d)
                            }),
                            lJ(xc(a.u), zc(a.u)), !1;
                    case 40:
                        return a.previous = 40,
                            a.Ek.top += 1 / W * 1 * d,
                            a.xq.forEach(function (a) {
                                qB(a, 1 / W * 1 * d)
                            }),
                            lJ(xc(a.u), zc(a.u)), !1
                }
            }
            null !== a.previous && a.FA();
            a.reset();
            return !0
        }
    };
    iJ.prototype.save = function () {
        var a = this;
        return function (b) {
            a.previous === b.which && (a.FA(),
                a.reset())
        }
    };

    function Gy(a) {
        $(document).keydown(mJ);
        a = new iJ(a);
        $(document).keydown(a.eF());
        $(document).keyup(a.save())
    }

    function mJ(a) {
        var b;
        if ($("body").hasClass("fullscreenMode"))
            return !1;
        if (27 === a.which) {
            a = $("#canvaDocument .element.selected,#canvaDocument .element.multiSelected").length;
            var c = G.hb();
            0 < $("*:focus").length ? $("*:focus").blur() : 0 < $(".modalContentMask").length ? (a = $(".modalContentMask:last"),
                (c = a.next().children(".dialog").data("Canva_Views_Dialog")) ? c.cancel() : a.trigger("click")) : $(".toolbar__item--submenuExpanded").length ? S.trigger("hideContextualControlsRequested") : 1 === c.length && c[0] instanceof iB && c[0].kd ? (c[0].kd instanceof up && fA(c[0].kd.O()),
                c[0].xi()) : 0 < a ? bh() : $(".infoPanel .close").click();
            return !1
        }
        if (document.querySelector(".modalContentMask, .mask.editingDefaults, .mask.on, body.blockDocument"))
            return !0;
        if (16 === a.which) {
            var d = function (a) {
                window.clearTimeout(b);
                16 === a.which && ($(".selectionBox").removeClass("freeResize"),
                    $(document).off("keyup", d))
            };
            (c = G.hb()[0]) && 0 === bz(c.O()) ? b = window.setTimeout(function () {
                $(".selectionBox").addClass("freeResize")
            }, 500) : $(".selectionBox").addClass("freeResize");
            $(document).on("keyup", d)
        }
        var c = document.querySelector(".element.text.selected"),
            e = document.querySelector(".element.text.focused"),
            g = e,
            h = document.activeElement,
            k = h ? h.nodeName.toLowerCase() : "";
        if ("input" === k || "textarea" === k)
            g = !0;
        k = G.hb()[0];
        if (g && 9 === a.which && 0 === $(h).parents(".tableView").length)
            return nJ(), !1;
        if (G.xa().some(function (a) {
                return a.gg
            }))
            return !0;
        if (k && a.altKey && (a.ctrlKey || a.metaKey)) {
            if (67 === a.which)
                return Pn(bc, k.clone()), !1;
            if (86 === a.which)
                return oJ(k), !1
        }
        if (k && k.Nh && g && a.shiftKey && a.altKey) {
            if (66 === a.which)
                return pJ(k), !1;
            if (187 === a.which || 171 === a.which)
                return qJ(k, 1), !1;
            if (189 === a.which || 173 === a.which)
                return qJ(k, -1), !1
        }
        if (k && k.ez() && a.shiftKey && a.altKey) {
            if (187 === a.which || 171 === a.which)
                return rJ(k, 1), !1;
            if (189 === a.which || 173 === a.which)
                return rJ(k, -1), !1
        }
        if (c && 13 === a.which && (a.ctrlKey || a.metaKey))
            return e ? fA($(c)) : sJ($(c)), !1;
        if (g && k && k.ZW() && a.altKey) {
            switch (a.which) {
                case 37:
                    return tJ(k, -1), !1;
                case 39:
                    return tJ(k, 1), !1;
                default:
                    k.wq = void 0
            }
            if (a.shiftKey && 81 === a.which)
                return tJ(k, 0), !1
        }
        if (k && k.xb() && k.ne() && !k.vf() && !k.oT() && (a.metaKey || a.ctrlKey)) {
            if (74 === a.which)
                return uJ(k), !1;
            if (75 === a.which) {
                if (a.shiftKey || a.altKey)
                    return vJ(k), !1
            } else if (76 === a.which) {
                if (a.shiftKey || a.altKey)
                    return wJ(k), !1
            } else if (82 === a.which) {
                if (a.shiftKey || a.altKey)
                    return xJ(k), !1
            } else if (67 === a.which && (a.shiftKey || a.altKey))
                return yJ(k), !1
        }
        if (g && k && k.nP() && (a.shiftKey || a.altKey) && (a.metaKey || a.ctrlKey)) {
            switch (a.which) {
                case 75:
                    $(".textToolbarUppercase a").trigger("click");
                    $(".toolbar__button--uppercase").trigger("click");
                    break;
                case 76:
                    $(".textToolbarLeft a").trigger("click");
                    $(".toolbar__button--left").trigger("mouseup");
                    break;
                case 82:
                    $(".textToolbarRight a").trigger("click");
                    $(".toolbar__button--right").trigger("mouseup");
                    break;
                case 67:
                    $(".textToolbarCenter a").trigger("click");
                    $(".toolbar__button--center").trigger("mouseup");
                    break;
                case 84:
                    zJ(k);
                    break;
                case 77:
                    AJ(k);
                    break;
                case 66:
                    BJ(k)
            }
            return !1
        }
        if (a.metaKey || a.ctrlKey) {
            if (90 === a.which)
                return a.shiftKey ? CJ() : DJ(), !1;
            if (89 === a.which) {
                if (a.shiftKey)
                    return !0;
                CJ();
                return !1
            }
        }
        if (!g) {
            if (a.metaKey || a.ctrlKey)
                switch (a.which) {
                    case 67:
                        if (a.shiftKey)
                            return !0;
                        EJ();
                        return !1;
                    case 86:
                        if (a.shiftKey)
                            return !0;
                        FJ();
                        return !1;
                    case 68:
                        if (a.shiftKey)
                            return !0;
                        EJ();
                        FJ();
                        return !1;
                    case 71:
                        return a.shiftKey ? GJ() : HJ(), !1;
                    case 65:
                        return bh(),
                            a.shiftKey || IJ(G.Oa().xa()), !1
                }
            if (!a.metaKey && !a.ctrlKey && !a.altKey)
                switch (a.which) {
                    case 84:
                        return $("#objectPanel .textControls a[data-style\x3dbody]").trigger("click"), !1
                }
            switch (a.which) {
                case 8:
                case 46:
                    return $(".enabled \x3e .toolbar__button--imageDelete").length ? $(".toolbar__button--imageDelete").trigger("click") : $(".enabled \x3e .toolbar__button--elementDelete").length ? $(".toolbar__button--elementDelete").trigger("click") : $(".toolbar__button--delete").trigger("click"), !1;
                case 191:
                    return $("#search").focus().get(0).select(), !1
            }
        }
        if (a.ctrlKey && a.altKey && 70 === a.which)
            return JJ(), !1;
        if (a.metaKey || a.ctrlKey) {
            if (a.altKey) {
                if (221 === a.which)
                    return KJ(1), !1;
                if (219 === a.which)
                    return KJ(-1), !1
            }
            switch (a.which) {
                case 221:
                case 38:
                    if (Ip())
                        return $(".elementToolbarForward a").click(),
                            $(".toolbar__button--forward").trigger("mouseup"), !1;
                    break;
                case 219:
                case 40:
                    if (Ip())
                        return $(".elementToolbarBackward a").click(),
                            $(".toolbar__button--back").trigger("mouseup"), !1;
                    break;
                case 187:
                case 61:
                    return $(".zoomer__in").click(), !1;
                case 189:
                case 173:
                    return $(".zoomer__out").click(), !1;
                case 83:
                    return S.trigger("documentSaveRequested"), !1
            }
            if (59 === a.which || 186 === a.which)
                return Rb().toggle(), !1
        }
        if (Ib.ba.get($f) && a.altKey)
            switch (a.which) {
                case 112:
                    var l = prompt("Select which type of chart to create:\n0 \x3d Bar chart\n1 \x3d Pie chart\n2 \x3d Line chart\n3 \x3d Donut chart", "0"),
                        l = HG[Object.keys(HG)[+l]],
                        m = FG(l);
                    m.Lk(G.Oa());
                    JG(m, function () {
                        vg(m);
                        Dl(l)
                    });
                    return !1
            }
        return !0
    };

    function LJ() {}
    LJ.prototype.search = function (a, b, c) {
        return new P(function (d, e) {
            function g() {
                d(MJ({
                    results: []
                }))
            }

            function h() {
                tH(b, c).then(k).catch(g)
            }

            function k(a) {
                var b = [];
                a.forEach(function (a) {
                    var c = a.Vd(),
                        d = a.sj(),
                        c = {
                            page: 0,
                            quality: "THUMBNAIL",
                            height: c.F(),
                            width: c.D(),
                            url: c.Aa()
                        },
                        d = {
                            page: 0,
                            quality: "SCREEN",
                            height: d.F(),
                            width: d.D(),
                            url: d.Aa()
                        };
                    b.push({
                        id: a.G(),
                        title: a.getName(),
                        origin: Eg,
                        files_: [c, d]
                    })
                });
                d(MJ({
                    results: b
                }))
            }
            "facebook" == a.toLowerCase() ? qg && qH(qg).then(h).catch(function () {
                pH(qg).then(h).catch(g)
            }) : e(Error("Not handled"))
        })
    };

    function NJ(a, b) {
        this.fa = a;
        this.h6 = b || [];
        this.url = "/search"
    }
    var OJ = ["DESIGN"],
        PJ = [zg, Bg],
        QJ = ["ELEMENT_GROUP"];
    NJ.prototype.xs = function (a) {
        function b(a) {
            var b = "";
            0 < a.length && (b = a.map(function (a) {
                return "\x26sort\x3d" + encodeURIComponent(a.$t + ":" + a.direction)
            }).join(""));
            return b
        }
        a.from || (a.Cg = null);
        a = "/search?q\x3d" + encodeURIComponent(a.query) + (a.Di ? "\x26docId\x3d" + encodeURIComponent(a.Di) : "") + function (a, b, e, g) {
            var h = "",
                k = [],
                l = [],
                m = [];
            if (a) {
                var n = [];
                a.forEach(function (a) {
                    a = a.toString().charAt(0);
                    h += a;
                    n.push(a)
                });
                m.push("+type:(" + n.join(" ") + ")")
            }
            b && Object.keys(b).forEach(function (a) {
                k.push("" + a + ":" + b[a]);
                m.push("+" + a + ":" + b[a])
            });
            e && Object.keys(e).forEach(function (a) {
                l.push("" + a + ":" + e[a]);
                m.push("-" + a + ":" + e[a])
            });
            g && (m = m.concat(g));
            a = "";
            h && (a += "\x26types\x3d" + h);
            0 < k.length && (a += "\x26includes\x3d" + encodeURIComponent(k.join(",")));
            0 < l.length && (a += "\x26excludes\x3d" + encodeURIComponent(l.join(",")));
            0 < m.length && (a += "\x26fq\x3d" + encodeURIComponent(m.join(",")));
            return a
        }(a.bn, a.fl, a.Pk, a.filters) + (null != a.hj ? "\x26boosts\x3d" + encodeURIComponent(JSON.stringify(ob(pb, rb, "boosts", a.hj))) : "") + (null != a.Aw ? "\x26suggest\x3d" + encodeURIComponent(String(a.Aw)) : "") + (a.sort ? b(a.sort) : "") + (a.elevation ? "\x26elevation\x3d" + encodeURIComponent(a.elevation) : "") + (a.JD ? "\x26elevateIds\x3d" + encodeURIComponent(a.JD.join(",")) : "") + (a.jy ? "\x26elevatedOnly\x3dtrue" : "") + (null != a.limit ? "\x26limit\x3d" + encodeURIComponent(String(a.limit)) : "") + (null != a.from ? "\x26from\x3d" + encodeURIComponent(String(a.from)) : "") + (a.gk ? "\x26translatable\x3dtrue" : "") + (a.Cg ? "\x26rootSearchId\x3d" + encodeURIComponent(a.Cg) : "") + (null != a.bg ? "\x26organic\x3d" + encodeURIComponent(String(a.bg)) : "") + (null != a.$g ? "\x26freeOnly\x3d" + encodeURIComponent(String(a.$g)) : "");
        return Ii(this.fa, a).get(0).then(MJ)
    };

    function RJ(a, b) {
        return P.any(a.h6.map(function (a) {
            return a.search(b.query, b.from, b.limit)
        })).catch(function () {
                return this.xs(b)
            }
            .bind(a)).cancellable()
    }

    function SJ(a) {
        var b = Sb;
        Qi(b.fa, b.url + "/click", {
            events: kb(TJ, "events", a.events)
        }).return()
    };

    function UJ() {
        this.searchId = "";
        this.rank = 0;
        this.id = "";
        this.version = 0;
        this.origin = "CANVA";
        this.description = this.title = this.artist = this.brand = null;
        this.recolorable = this.repeating = this.cutout = this.background = !1;
        this.oneTimeUsePriceCents = this.keywords = this.superKeywords = null;
        this.oneTimeUseDiscountable = !1;
        this.spritesheetMetadata = this.componentMedia = this.extendedPriceCents = this.royaltyFreePriceCents = this.oneTimeUseAggregatePriceCents = null;
        this.files_ = [];
        this.designType = void 0;
        this.type = null;
        this.status = LD;
        this.user = null;
        this.xo = void 0
    }
    f = UJ.prototype;
    f.aT = function () {
        return this.searchId
    };
    f.ZS = function () {
        return this.rank
    };
    f.G = function () {
        return this.id
    };
    f.getVersion = function () {
        return this.version
    };
    f.Ve = function () {
        return this.origin
    };
    f.wa = function () {
        return this.brand
    };
    f.Qa = function () {
        return this.user
    };
    f.QS = function () {
        return this.artist
    };
    f.Jb = function () {
        return this.title
    };
    f.pg = function () {
        return this.description
    };
    f.Ac = function () {
        return this.background
    };
    f.gh = function () {
        return this.cutout
    };
    f.Az = function () {
        return this.repeating
    };
    f.vd = function () {
        return this.recolorable
    };

    function VJ(a) {
        return a.oneTimeUsePriceCents
    }
    f.Ku = function () {
        return this.oneTimeUseDiscountable
    };
    f.sE = function () {
        return this.oneTimeUseAggregatePriceCents
    };
    f.IK = function () {
        return this.componentMedia
    };
    f.XK = function () {
        return this.superKeywords
    };
    f.Zk = function () {
        return this.keywords
    };
    f.Dc = function () {
        return this.files_
    };
    f.Ty = function () {
        return this.spritesheetMetadata
    };

    function WJ(a) {
        return a.type
    }
    f.Uc = function (a) {
        return this.Dc().filter(function (b) {
            return b.ha() === (a || 0)
        }).reduce(function (a, c) {
            a[c.uE()] = c;
            return a
        }, {})
    };
    f.wc = function () {
        return XJ(this).length
    };

    function XJ(a) {
        var b = [];
        a.Dc().forEach(function (a) {
            a = a.ha(); -
            1 === b.indexOf(a) && b.push(a)
        });
        return b
    }

    function YJ(a) {
        return "DESIGN" == WJ(a) && 1 < a.wc()
    }
    f.getFile = function (a, b) {
        return (b = this.Uc(b)) ? b[a] : void 0
    };
    f.sj = function (a) {
        var b = this,
            c = this.getFile("ORIGINAL");
        c ? b.xo ? a && a(JSON.parse(JSON.stringify(b.xo))) : $.getJSON(c.Aa(), function (c) {
            b.xo = c;
            a && a(JSON.parse(JSON.stringify(b.xo)))
        }) : a && a(JSON.parse(JSON.stringify(b.xo)))
    };
    f.Hm = function () {
        var a = this.getFile("THUMBNAIL_LARGE") || this.getFile(aC);
        return a ? a.Aa() : null
    };

    function Dg(a) {
        if (!a)
            return null;
        a = $.extend(new UJ, a);
        if (a.files_) {
            var b;
            b = (b = a.files_) ? b.map(Fq) : null;
            a.files_ = b
        }
        Array.isArray(a.componentMedia) && (a.componentMedia = a.componentMedia.map(Ja).map(Gm));
        a.spritesheetMetadata && (a.spritesheetMetadata = QD(Ja(a.spritesheetMetadata)));
        return a
    }

    function ZJ(a, b) {
        a.id = b.G();
        a.version = b.Va().getVersion();
        a.origin = "CANVA"
    }

    function $J() {
        this.end = this.start = 0;
        this.replacement = this.original = ""
    }
    $J.prototype.sj = function () {
        return this.original
    };

    function aK(a) {
        return a ? $.extend(new $J, a) : null
    }

    function bK() {
        this.overridden = !1;
        this.replacementQuery = this.originalQuery = "";
        this.replacementHits = this.originalHits = 0;
        this.tokenReplacements = null
    }

    function cK(a) {
        return a.replacementQuery
    }

    function dK() {
        this.id = "";
        this.totalHits = 0;
        this.results = [];
        this.suggestion = null
    }
    dK.prototype.G = function () {
        return this.id
    };
    dK.prototype.Ry = function () {
        return this.results
    };

    function MJ(a) {
        if (!a)
            return null;
        a = $.extend(new dK, a);
        a.results && (a.results = a.results.map(Dg));
        if (a.suggestion) {
            var b;
            (b = a.suggestion) ? (b = $.extend(new bK, b),
                b.tokenReplacements && (b.tokenReplacements = b.tokenReplacements.map(aK))) : b = null;
            a.suggestion = b
        }
        return a
    }

    function eK(a) {
        this.events = a
    }

    function fK(a, b) {
        return new eK([new gK({
            ws: a.aT(),
            ua: a.G(),
            ks: a.ZS(),
            Hd: 0 === VJ(a),
            bg: !!b
        })])
    }

    function gK(a) {
        this.ws = a.ws;
        this.ua = a.ua;
        this.ks = a.ks;
        this.Hd = a.Hd;
        this.bg = a.bg
    }

    function TJ(a) {
        return {
            searchId: hb("searchId", a.ws),
            mediaId: hb("mediaId", a.ua),
            rank: db("rank", a.ks),
            free: gb("free", a.Hd),
            organic: gb("organic", a.bg)
        }
    };

    function hK(a, b) {
        switch (b) {
            case "DESC":
                return "DESC";
            case "ASC":
                return "ASC";
            default:
                throw new TypeError('expected SortDirection for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function iK(a) {
        this.$t = a.$t;
        this.direction = a.direction
    }
    iK.prototype.getDirection = function () {
        return this.direction
    };

    function lh(a) {
        return new iK({
            $t: D("field", a),
            direction: Ra(hK, "direction", a)
        })
    }

    function jh(a) {
        this.Di = a.Di;
        this.query = a.query;
        this.bn = a.bn || [];
        this.fl = a.fl || new Map;
        this.Pk = a.Pk || new Map;
        this.filters = a.filters || [];
        this.hj = a.hj || new Map;
        this.elevation = a.elevation;
        this.JD = a.JD || [];
        this.jy = a.jy;
        this.sort = a.sort || [];
        this.ND = a.ND;
        this.lq = a.lq;
        this.limit = a.limit;
        this.gk = a.gk;
        this.locale = a.locale;
        this.Cg = a.Cg;
        this.bg = a.bg;
        this.$g = a.$g
    }
    jh.prototype.Wo = function () {
        return this.bn
    };
    jh.prototype.Kd = function () {
        return this.limit
    };
    jh.prototype.qg = function () {
        return this.locale
    };

    function jK(a, b) {
        this.cache = $.extend({}, a, !0);
        this.pc = b;
        var c = this;
        Object.keys(this.cache).forEach(function (a) {
            Object.keys(c.cache[a]).forEach(function (b) {
                var g = +b;
                Object.keys(c.cache[a][+b]).forEach(function (b) {
                    c.cache[a][g][b] = Fq(c.cache[a][g][b])
                })
            })
        })
    }

    function Kg(a, b, c, d) {
        a.cache[b] = a.cache[b] || {};
        a.cache[b][c] = a.cache[b][c] || {};
        for (var e in d)
            a.cache[b][c][e] = Fq(d[e])
    }
    jK.prototype.Uc = function (a, b) {
        return kK(this, a, b) ? this.cache[a][b] : null
    };

    function kK(a, b, c) {
        return !!a.cache[b] && !!a.cache[b][c]
    }

    function Lp(a, b) {
        return !!b && kK(a, b.id, b.version)
    }

    function lK(a, b, c, d) {
        function e(a) {
            a && a.media && a.media.forEach(function (a) {
                Kg(g, a.G(), a.Va().getVersion(), a.Va().Dc())
            })
        }
        var g = a;
        0 === b.length ? d() : (b = fE(new eE, b),
            c ? gE(b) : b.ho(),
            GD(a.pc, b).then(e).catch($.noop).finally(d))
    }

    function mK(a, b, c) {
        lK(a, b, !0, c)
    }
    jK.prototype.getKeys = function () {
        var a = this,
            b = [];
        Object.keys(a.cache).forEach(function (c) {
            Object.keys(a.cache[c]).forEach(function (a) {
                b.push({
                    id: c,
                    version: Number(a)
                })
            })
        });
        return b
    };
    var nK = {
        1: "TOP-LEFT",
        2: "TOP-RIGHT",
        3: "BOTTOM-RIGHT",
        4: "BOTTOM-LEFT",
        5: "LEFT-TOP",
        6: "RIGHT-TOP",
        7: "RIGHT-BOTTOM",
        8: "LEFT-BOTTOM"
    };

    function oK() {}
    oK.prototype.getKey = function () {
        return this.key
    };

    function WI(a) {
        return R(oK, a)
    };

    function pK(a, b, c) {
        this.fileName = a;
        this.nS = b;
        this.X_ = c
    }
    pK.prototype.getFileName = function () {
        return this.fileName
    };

    function qK() {}
    qK = by.extend();
    qK.prototype.initialize = function (a) {
        this.rq = a.rq;
        this.kf = a.kf;
        by.prototype.initialize.call(this, {
            title: "Upload error",
            content: $(rK(this).toString())
        })
    };

    function rK(a) {
        var b = a.rq.nS,
            c = a.rq.getFileName() || "";
        switch (b) {
            case 0:
                return a.kf.Ua("uploadErrorUnsupportedBrowserHtml");
            case 3:
                return a.kf.Ua("uploadErrorWorkerHtml");
            case 1:
                return a.kf.Ua("uploadErrorUnsupportedFileTypeHtml", c);
            case 2:
                return a.kf.Ua("uploadErrorFileTooLargeHtml", c);
            case 4:
                return a.kf.Ua("uploadErrorFileProcessingHtml", c);
            case 5:
                return a.kf.Ua("uploadErrorUnsupportedSvgContentHtml", c);
            case 6:
                return b = a.rq.X_,
                    b = b instanceof ZD ? b.Va().rejectionReason : void 0,
                    b ? a.kf.Ua("uploadErrorMediaImportWithReasonHtml", c, b) : a.kf.Ua("uploadErrorMediaImportHtml", c)
        }
        throw new TypeError("Unhandled UploadErrorDetails.ErrorType: " + b);
    }
    qK.$u = null;
    qK.show = function (a, b) {
        if (!qK.M7(a))
            return null;
        var c = new qK({
            rq: a,
            kf: b
        });
        c.on("hide", function () {
            qK.$u === c && (qK.$u = null)
        });
        if (qK.$u)
            qK.$u.on("hide", function () {
                c.show()
            });
        else
            c.show();
        return qK.$u = c
    };
    qK.M7 = function (a) {
        if (qK.$u)
            switch (a.nS) {
                case 1:
                case 2:
                case 4:
                case 5:
                case 6:
                    return !1
            }
        return !0
    };

    function sK(a, b, c) {
        this.Tf = !1;
        this.tb = b;
        this.media = null;
        this.un = 0;
        this.xw = Date.now();
        this.Y6 = !!c;
        this.fg = a;
        this.rq = null
    }
    f = sK.prototype;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.trigger = Backbone.Events.trigger;
    f.ac = function () {
        return this.media
    };
    f.Hm = function () {
        return this.fg
    };
    f.start = function (a) {
        this.Tf || this.media || (this.media = a,
            this.trigger("start", this))
    };
    f.update = function (a) {
        this.Tf || (this.un = 100 * Math.max(0, Math.min(a, 1)),
            this.trigger("update", this))
    };
    f.complete = function () {
        this.Tf || (this.Tf = !0,
            this.un = 100,
            this.trigger("complete", this))
    };
    f.fail = function (a) {
        this.Tf || (this.Tf = !0,
            this.media = null,
            this.rq = a,
            this.trigger("fail", this))
    };

    function tK() {
        this.lI = !1;
        this.nK = this.Tf = 0;
        this.id = void 0;
        this.qV = [];
        this.aP = 0
    }
    f = tK.prototype;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.trigger = Backbone.Events.trigger;
    f.io = function (a) {
        this.id = a;
        return this
    };
    f.G = function () {
        return this.id
    };
    f.tE = function () {
        return this.qV
    };
    f.create = function (a, b, c, d) {
        function e() {
            k.trigger("start", l)
        }

        function g() {
            l.off("start", e);
            l.off("complete", g);
            l.off("fail", h);
            k.Tf++;
            k.lI && k.Tf + k.aP === k.nK && k.complete()
        }

        function h() {
            k.fail(l.rq);
            g()
        }
        var k = this,
            l = new sK(a, c, d);
        l.on("start", e);
        l.on("complete", g);
        l.on("fail", h);
        this.qV.push(l);
        this.trigger("create");
        return l
    };
    f.init = function (a) {
        a()
    };
    f.sync = function () {
        this.trigger("sync")
    };

    function uK(a) {
        a.lI = !0;
        a.nK++
    }
    f.lq = function () {
        this.aP++
    };
    f.complete = function () {
        this.Tf = this.aP = this.nK = 0;
        this.lI = !1;
        this.trigger("complete")
    };
    f.fail = function (a) {
        this.trigger("fail", a)
    };

    function vK() {
        this.bv = {}
    }
    _.extend(vK.prototype, Backbone.Events);
    vK.prototype.off = Backbone.Events.on;
    vK.prototype.on = Backbone.Events.on;
    vK.prototype.trigger = Backbone.Events.trigger;
    vK.prototype.tE = function (a) {
        return 0 <= Object.keys(this.bv).indexOf(a) ? this.bv[a].tE() : []
    };

    function wK(a, b) {
        a = Object.keys(a.bv).map(a.tE, a).reduce(function (a, b) {
            return a.concat(b)
        }, []).filter(function (a) {
            return a.xw >= b
        });
        if (a.every(function (a) {
                return a.Tf
            }))
            return 100;
        var c = a.reduce(function (a, b) {
            return a + (b.Tf && !b.media ? 100 : b.un)
        }, 0);
        return Math.min(100 * c / (100 * a.length), 99)
    };

    function xK(a) {
        this.source = a.source;
        this.KF = a.KF || null;
        this.listener = a.progress
    }

    function yK(a, b, c, d, e, g, h, k) {
        var l = !1,
            m = a.listener.create(d, e, g, h);
        zK(b, c, d, g, function (a, b) {
            l || (l = !0,
                m.start(a));
            m.update(b)
        }, k).then(function () {
            m.complete();
            a.KF && a.KF(m.ac())
        }, function (a) {
            m.fail(new pK(b.name || "Unnamed File", 6, a))
        })
    }

    function AK(a) {
        var b = a.naturalWidth,
            c = a.naturalHeight,
            d = b,
            e = c,
            g = 200 / Math.max(b, c);
        1 > g && (d = Math.round(g * b),
            e = Math.round(g * c));
        g = document.createElement("canvas");
        g.width = d;
        g.height = e;
        var h = g.getContext("2d");
        h.drawImage(a, 0, 0, b, c, 0, 0, d, e);
        a = g.toDataURL();
        for (var d = h.getImageData(0, 0, d, e), e = d.data, b = e.length, c = new Om, k = 0; k < b; k += 4)
            Qm(c, e[k], e[k + 1], e[k + 2]),
            e[k] = e[k + 1] = e[k + 2] = c.ku();
        h.putImageData(d, 0, 0);
        g = g.toDataURL();
        return {
            color: a,
            dT: g
        }
    }

    function BK(a, b) {
        CK(b).then(function (c) {
            var d = AK(c);
            c = {
                width: c.naturalWidth,
                height: c.naturalHeight
            };
            for (var e = window.atob(b.substr(22)), g = e.length, h = Math.ceil(g / 1024), k = Array(h), l = 0; l < h; ++l) {
                for (var m = 1024 * l, n = Math.min(m + 1024, g), p = Array(n - m), r = 0; m < n; ++r,
                    ++m)
                    p[r] = e[m].charCodeAt(0);
                k[l] = new Uint8Array(p)
            }
            e = new Blob(k, {
                type: "image/png"
            });
            e.name = "generated_file_" + Date.now() + ".png";
            e.type = "image/png";
            e.constructor = File;
            yK(a, e, b, d.color, d.dT, c, !1)
        }).catch($.noop)
    }
    xK.prototype.upload = function (a, b) {
        var c = this;
        this.listener.init(function () {
            function d(a, b, c) {
                var d = $("\x3cimg\x3e");
                d.one("load", function () {
                    var b;
                    b = d.get(0);
                    var g = document.createElement("canvas"),
                        h = b.naturalWidth,
                        k = b.naturalHeight; -
                    1 < [nK[5], nK[6], nK[7], nK[8]].indexOf(c) ? (g.width = k,
                        g.height = h) : (g.width = h,
                        g.height = k);
                    var l = g.getContext("2d");
                    switch (c) {
                        case nK[2]:
                            l.translate(h, 0);
                            l.scale(-1, 1);
                            break;
                        case nK[3]:
                            l.translate(h, k);
                            l.rotate(Math.PI);
                            break;
                        case nK[4]:
                            l.translate(0, k);
                            l.scale(1, -1);
                            break;
                        case nK[5]:
                            l.rotate(.5 * Math.PI);
                            l.scale(1, -1);
                            break;
                        case nK[6]:
                            l.rotate(.5 * Math.PI);
                            l.translate(0, -k);
                            break;
                        case nK[7]:
                            l.rotate(.5 * Math.PI);
                            l.translate(h, -k);
                            l.scale(-1, 1);
                            break;
                        case nK[8]:
                            l.rotate(-.5 * Math.PI),
                                l.translate(-h, 0)
                    }
                    l.drawImage(b, 0, 0, h, k);
                    b = g.toDataURL("image/jpeg", .92);
                    e(a, b)
                });
                d.attr("src", b)
            }

            function e(a, b) {
                var c = b.slice(b.indexOf(",") + 1),
                    d = g(c);
                d.name = a;
                d.type = "image/jpeg";
                var e = $("\x3cimg\x3e");
                e.attr("src", b);
                e.one("load", function () {
                    k(d, e.get(0), b)
                })
            }

            function g(a) {
                a = window.atob(a);
                for (var b = a.length, c = Math.ceil(b / 1024), d = Array(c), e = 0; e < c; ++e) {
                    for (var g = 1024 * e, h = Math.min(g + 1024, b), k = Array(h - g), l = 0; g < h; ++l,
                        ++g)
                        k[l] = a[g].charCodeAt(0);
                    d[e] = new Uint8Array(k)
                }
                return new Blob(d, {
                    type: "image/jpeg"
                })
            }

            function h(a, b) {
                var d = m[a];
                DK(d).then(function (a) {
                    k(d, a, b)
                }).catch(function () {
                    c.listener.fail(new pK(a, 4));
                    c.listener.lq();
                    l()
                })
            }

            function k(a, d, e) {
                var g = AK(d);
                yK(c, a, e, g.color, g.dT, {
                    width: d.naturalWidth,
                    height: d.naturalHeight
                }, !1, b);
                window.setTimeout(l, 600)
            }

            function l() {
                u++;
                u < r ? p.postMessage({
                    next: !0
                }) : c.listener.sync()
            }
            if (window.URL) {
                for (var m = {}, n = [], p = new Worker(J.BY.upload), r = 0, u = 0, v = 0; v < a.length; v++) {
                    var y = a[v],
                        q = y.name,
                        x = y.type,
                        E = y.size;
                    uK(c.listener);
                    var B;
                    a: {
                        switch (x) {
                            case "image/jpeg":
                            case "image/png":
                            case "image/raw":
                            case "image/svg+xml":
                            case "image/x-fuji-raf":
                                B = !0;
                                break a
                        }
                        B = !1
                    }
                    if (B)
                        if (26214400 < E)
                            c.listener.fail(new pK(q, 2)),
                            c.listener.lq();
                        else {
                            if ("image/jpeg" === x || "image/png" === x)
                                m[q] = y;
                            n.push(y);
                            r++
                        }
                    else
                        c.listener.fail(new pK(q, 1)),
                        c.listener.lq()
                }
                c.listener.sync();
                if (0 === r)
                    c.listener.complete();
                else {
                    p.onmessage = function (a) {
                        var g = JSON.parse(a.data);
                        if ("error" === g.status)
                            c.listener.fail(new pK(g.fileName, 4)),
                            c.listener.lq(),
                            l();
                        else if ("exifRotated" === g.specialFile)
                            d(g.fileName, g.imageData, g.orientation);
                        else if ("raw" === g.specialFile)
                            e(g.fileName, g.imageData);
                        else if (g.svgText)
                            if (a = g.fileName,
                                g = g.svgText,
                                pA(g)) {
                                a = (new lA(g)).KX(a);
                                a.source = zA(a.source);
                                a.source = wA(a.source);
                                a.source = yA(a.source);
                                a.viewBox = xA(a.source);
                                a.source = a.source.replace(/xmlns:xml=['"]http:\/\/www.w3.org\/XML\/1998\/namespace["']/g, "");
                                g = new Blob([a.source], {
                                    type: "image/svg+xml"
                                });
                                g.name = a.filename;
                                g.constructor = File;
                                var k = "data:image/svg+xml;base64," + window.btoa(unescape(encodeURIComponent(a.source)));
                                yK(c, g, k, k, k, {
                                    width: a.viewBox[2],
                                    height: a.viewBox[3]
                                }, !0, b);
                                window.setTimeout(l, 600)
                            } else
                                c.listener.fail(new pK(a, 5)),
                                c.listener.lq(),
                                l();
                        else
                            h(g.fileName, g.imageData)
                    };
                    try {
                        p.postMessage(n)
                    } catch (K) {
                        c.listener.fail(new pK(null, 3));
                        c.listener.complete();
                        return
                    }
                    T && T.track("image_upload", {
                        source: c.source,
                        quantity: r
                    })
                }
            } else
                c.listener.fail(new pK(null, 0)),
                c.listener.complete()
        })
    };

    function DK(a) {
        return new P(function (b, c) {
            if (EK) {
                var d = window.URL.createObjectURL(a);
                CK(d).then(b, c).finally(function () {
                    window.URL.revokeObjectURL(d)
                })
            } else {
                var e = new FileReader;
                e.onload = function () {
                    CK(e.result).then(b, c)
                };
                e.onerror = c;
                e.readAsDataURL(a)
            }
        })
    }

    function CK(a) {
        return new P(function (b, c) {
            var d = new Image;
            d.onload = function () {
                b(d)
            };
            d.onerror = c;
            d.src = a
        })
    }
    var EK = "IE" !== (new UAParser).getResult().browser.name;

    function FK(a) {
        Ba(0 < a);
        this.i1 = a;
        this.queue = [];
        this.pL = 0
    }
    FK.prototype.mO = function (a) {
        var b = this;
        return (new P(function (a) {
            b.queue.push(a);
            GK(b)
        })).cancellable().then(a).finally(function () {
            b.pL--;
            GK(b)
        })
    };

    function GK(a) {
        if (!(a.pL >= a.i1)) {
            var b = a.queue.shift();
            b && (a.pL++,
                b())
        }
    };

    function HK(a, b, c, d, e, g, h, k) {
        this.fa = a;
        this.media = b;
        this.yc = c;
        this.Ze = d;
        this.Nw = e;
        this.Z_ = g;
        this.Dw = {};
        this.MB = [];
        this.Mr = h;
        this.Dh = k;
        this.uX = [];
        this.gM = _.throttle(this.gM.bind(this), 30, {
            leading: !1
        })
    }
    HK.prototype.Uc = function (a, b) {
        return null == a || null == b ? null : this.Ze.Uc(a, b) || this.Dw[a] || null
    };

    function bC(a, b, c) {
        var d = Gb,
            e = d.Uc(a, b),
            g;
        return e && (g = e[c]) ? g.watermarked ? (new P(function (c) {
            d.uX.push({
                j1: new Fm({
                    id: a,
                    version: b
                }),
                resolve: c
            });
            d.gM()
        })).then(function () {
            var e = d.Uc(a, b);
            if (!e || !(g = e[c]))
                throw Error();
            return g
        }) : P.resolve(g) : P.reject()
    }
    HK.prototype.gM = function () {
        var a = this.uX.splice(0),
            b = a.map(function (a) {
                return a.j1
            });
        mK(this.Ze, b, function () {
            return a.forEach(function (a) {
                return a.resolve()
            })
        })
    };

    function IK(a, b) {
        var c = {};
        return b.filter(function (a) {
            if (!a)
                return !1;
            var b = a.G();
            a = a.getVersion();
            if (this.Uc(b, a))
                return !1;
            b = b + ":" + a;
            return c[b] ? !1 : c[b] = !0
        }, a)
    }

    function Ig(a, b) {
        var c = b.G();
        a.Dw[c] || (b = b.Uc(),
            a.Dw[c] = {
                SCREEN: Fq(b[Fg]),
                THUMBNAIL: Fq(b[aC])
            })
    }

    function xg(a, b, c) {
        var d = b.Ve();
        if (d !== Eg && "GOOGLE" !== d)
            throw Error('Cannot upload media with origin "' + d + '"');
        var e, g = b.G(),
            h = JK(b, a.yc),
            d = (new bE).$s(h.filename).bt(!0);
        a.MB.push(g);
        DD(a.media, d).then(function (b) {
            var c = b.Va();
            a.Dw[b.G()] = c && c.Dc();
            e = b;
            a: switch (h.origin) {
                case Eg:
                case "GOOGLE":
                    b = new KK(h.id, h.yc, b, h.zG);
                    break a;
                default:
                    throw Error(h.origin + " is unsupported");
            }
            return a.Nw.upload(b)
        }).then(function () {
            var b = (new jC).jk(e.Va().getVersion()).Uw(!0);
            return a.media.FX(e.G(), b)
        }).then(function (c) {
            var d = b.getVersion();
            ZJ(b, c);
            Kg(a.Ze, c.G(), c.Va().getVersion(), c.Va().Dc());
            var d = {
                    mediaId: g,
                    mediaVersion: d
                },
                e = {
                    mediaId: c.G(),
                    mediaVersion: c.Va().getVersion()
                };
            LK(d, e);
            Jp(G).forEach(function (a) {
                var b = a.Ub();
                b && b.id === g && a.Gl(c.G(), c.Va().getVersion())
            });
            MK();
            return c
        }).catch(function (b) {
            c.TB(a.Ze);
            MK();
            return Promise.reject(b)
        }).finally(a.TW.bind(a, g))
    }

    function zK(a, b, c, d, e, g) {
        var h = Gb;

        function k(a) {
            var e = {};
            e[aC] = new UD({
                url: c,
                width: d.width,
                height: d.height
            });
            e[Fg] = new UD({
                url: b,
                width: d.width,
                height: d.height
            });
            r.Dw[a.G()] = e;
            return a
        }

        function l(a) {
            var b = (new jC).jk(a.Va().getVersion()).Uw(!0);
            return r.media.FX(a.G(), b)
        }

        function m(a) {
            Kg(r.Ze, a.G(), a.Va().getVersion(), a.Va().Dc());
            MK();
            return P.resolve(a)
        }

        function n(a) {
            return Promise.reject(a)
        }

        function p(b) {
            b = new NK({
                file: a,
                gE: g,
                id: _.uniqueId("file_"),
                media: b,
                yc: r.yc,
                Mr: r.Mr,
                Dh: r.Dh
            });
            b.GN.push(e);
            return r.Nw.upload(b)
        }
        var r = h,
            u = a.name.replace(/\$/g, "_"),
            v = _.uniqueId("file_"),
            y = cE((new bE).$s(u).bt(!0).NX(!1), a.size);
        h.MB.push(v);
        return h.Z_.mO(function () {
            return DD(r.media, y).then(k).then(p).then(l).then(m).catch(n).finally(r.TW.bind(r, v))
        })
    }
    HK.prototype.TW = function (a) {
        a = this.MB.indexOf(a); -
        1 != a && this.MB.splice(a, 1)
    };

    function MK() {
        G.trigger("change")
    }

    function OK(a) {
        function b(a) {
            var g = a.mediaId,
                h = a.mediaVersion;
            void 0 !== g && void 0 !== h && null !== g && null !== h && (kK(d.Ze, g, h) ? 0 : g in d.Dw) && (delete a.mediaId,
                delete a.mediaVersion);
            Object.keys(a).forEach(function (d) {
                d = a[d];
                d instanceof Array ? d.filter(c).forEach(function (a) {
                    b(a)
                }) : c(d) && b(d)
            })
        }

        function c(a) {
            return a instanceof Object
        }
        var d = Gb;
        b(a)
    };

    function PK(a) {
        this.id = a.id;
        this.origin = a.origin;
        this.zG = a.zG;
        this.HB = a.HB;
        this.filename = a.filename;
        this.yc = a.yc
    }

    function JK(a, b) {
        var c = a.Ve();
        switch (c) {
            case Eg:
                var c = a.getFile(Fg).Aa(),
                    d = a.getFile(aC).Aa(),
                    e = c.match(/.*(\.\w+)/)[1],
                    e = a.G() + e;
                return new PK({
                    id: a.G(),
                    origin: a.Ve(),
                    zG: c,
                    HB: d,
                    filename: e,
                    yc: b
                });
            case "GOOGLE":
                return c = a.getFile(Fg).Aa(),
                    d = a.getFile(aC).Aa(),
                    e = a.Jb(),
                    new PK({
                        id: a.G(),
                        origin: a.Ve(),
                        zG: c,
                        HB: d,
                        filename: e,
                        yc: b
                    });
            default:
                throw Error('Cannot create temporary media for origin "' + c + '"');
        }
    };

    function QK() {
        this.queue = [];
        this.MA = {};
        this.NP = {};
        this.mJ = null
    }
    QK.prototype.upload = function (a) {
        function b() {
            var b = new P(function (b, d) {
                b = {
                    request: a,
                    resolve: b,
                    reject: d
                };
                c.queue.push(b);
                d = a.G();
                var e = c.MA[d];
                e || (e = []);
                e.push(b);
                c.MA[d] = e
            });
            RK(c);
            return b
        }
        var c = this,
            d = this.NP[a.G()];
        return d ? P.resolve(d) : P.resolve().then(b)
    };

    function RK(a) {
        if (!a.mJ && 0 < a.queue.length) {
            var b = a.queue.shift();
            a.mJ = b;
            SK(a, b)
        }
    }

    function SK(a, b) {
        var c = b.request.G();
        TK(b.request).then(function (b) {
            a.NP[c] = b
        }).then(function () {
            var b = a.MA[c],
                e = a.NP[c];
            if (!e)
                throw Error("Could not find media reference for uploaded item");
            b && b.forEach(function (a) {
                a.resolve(e)
            })
        }).catch(function () {
            var b = a.MA[c];
            b && b.forEach(function (a) {
                a.reject()
            })
        }).finally(function () {
            delete a.MA[c]
        }).finally(a.F1.bind(a))
    }

    function TK(a) {
        return new P(function (b, c) {
            function d(h) {
                7 > e && h === UK ? (e++,
                    g *= 1.6,
                    P.delay(g).then(a.send.bind(a)).then(b).catch(d)) : c(h)
            }
            var e = 0,
                g = 500;
            a.send().then(b).catch(d)
        })
    }
    QK.prototype.F1 = function () {
        this.mJ = null;
        RK(this)
    };

    function VK(a, b) {
        this.id = a;
        this.media = b;
        this.GN = []
    }
    var UK = Error("Canva is too busy to process your upload at this time. Please try again later.");
    VK.prototype.G = function () {
        return this.id
    };
    VK.prototype.send = function () {
        return P.reject("Not implemented")
    };
    VK.prototype.q4 = function (a) {
        if (a.lengthComputable) {
            a = a.loaded / a.total;
            for (var b = 0; b < this.GN.length; b++)
                this.GN[b](this.media, a)
        }
    };

    function WK(a) {
        a = function (a) {
            var c = /^([^?]+)\?/.exec(a);
            return c ? c[1] : a
        }(a);
        return _.find(XK, function (b, c) {
            return a.slice(-c.length) === c
        })
    }
    var XK = {
        ".gif": "image/gif",
        ".jpg": "image/jpeg",
        ".jpeg": "image/jpeg",
        ".png": "image/png",
        ".ttf": "application/x-font-truetype",
        ".otf": "application/x-font-otf",
        ".woff": "application/font-woff"
    };

    function NK(a) {
        VK.call(this, a.id, a.media);
        this.file = a.file;
        this.gE = a.gE;
        this.yc = a.yc;
        this.Yr = void 0;
        this.Dh = a.Dh;
        this.iL = a.Mr.iL("canva.editor.uploadrate")
    }
    NK.prototype = Object.create(VK.prototype);
    NK.prototype.constructor = NK;
    NK.prototype.send = P.method(function () {
        var a = this,
            b = a.file.type || WK(a.file.name),
            c = this.Dh.now();
        return VI(this.yc, this.media.G(), this.media.Va().getVersion(), b).then(function (c) {
            c = {
                FY: c.awsAccessKeyId,
                file: a.file,
                n1: b,
                key: c.getKey(),
                d5: c.policy,
                progress: a.q4.bind(a),
                F6: c.signature,
                url: c.postUrl
            };
            return cL({
                file: c.file,
                url: c.url,
                KS: {
                    key: c.key,
                    AWSAccessKeyId: c.FY,
                    policy: c.d5,
                    signature: c.F6,
                    "Content-Type": c.n1 || c.file.type
                },
                progress: c.progress,
                tT: c.tT
            })
        }).tap(function () {
            a.iL.update(a.file.size / (a.Dh.now() - c))
        }).then(function (c) {
            c = (new hJ).LX(c);
            c.mimeType = b;
            c.isPaid = !0 === a.Yr;
            a.gE && (c.folderKey = a.gE);
            return XI(a.yc, a.media.G(), a.media.Va().getVersion(), c)
        }).catch(this.K5.bind(this))
    });
    NK.prototype.K5 = function () {
        throw Error("Unfortunately your upload failed :(\n\nPlease ensure that:\n   - the size of the image is under 25MB;\n   - the image is a .png, .jpg or .svg file;\n   - the image uses an RGB color model (i.e. not CMYK); and,\n   - you have a stable internet connection.\n\nIf you feel that you have met the above criteria and the image is still failing to upload, please let the team know by emailing support@canva.com");
    };

    function KK(a, b, c, d) {
        VK.call(this, a, c);
        this.yc = b;
        this.url = d
    }
    KK.prototype = Object.create(VK.prototype);
    KK.prototype.constructor = KK;
    KK.prototype.send = P.method(function () {
        var a = this;
        return UI(this.yc, this.media.G(), this.media.Va().getVersion(), this.url).then(function () {
            return a.media
        }).catch(function (a) {
            throw 429 === a[1] ? UK : Error();
        })
    });

    function Fy(a) {
        function b(a, b, c) {
            c || b.forEach(function (a) {
                a.G && a.getVersion && a.Dc && ("CANVA" == a.Ve() ? Kg(vb, a.G(), a.getVersion(), a.Uc()) : Ig(Gb, a))
            })
        }

        function c() {
            dL = "FREE" === y.bc.XA;
            eL(l, !0)
        }
        var d = $("#objectPanel"),
            e = new dh(window.viewConfig),
            g = Yw(),
            h = bx(g),
            k = ax(g).wa(),
            l = a.u,
            m = Rl(),
            n = a.jc,
            p = new pj(Hb),
            r = new NJ(Hb);
        HI(Jb, function () {
            var a = (ax(g).Ro() || new qw({})).EB;
            return a && a[0] ? a[0].GB || [] : []
        }(), function () {
            var a = new fL({
                model: G,
                jj: ax(g).Ro(),
                u: l
            });
            $("#resultsText \x3e .layer \x3e .inner").prepend(a.el)
        });
        var u = null,
            v = ih(e);
        null != v && (u = gL(v));
        new hL({
            Yb: k.Qo(),
            lJ: h.G(),
            cJ: function (b) {
                return new iL({
                    da: jc(l),
                    Nt: b,
                    gd: a.gd,
                    jw: !Ib.Zx()
                })
            },
            ZC: function (a, b) {
                var c, d; -
                1 < h.vr().indexOf("FUSION") ? (c = qq(window.cdocType).G(),
                    d = !1) : (c = void 0,
                    d = !0);
                return new jL({
                    el: a,
                    r_: new kL({
                        nb: yb,
                        uc: p,
                        ya: h.G(),
                        Ia: k.G(),
                        du: b,
                        fr: d,
                        tD: c
                    }),
                    wz: !!b,
                    u: l
                })
            },
            bJ: function (a) {
                return new lL({
                    el: a,
                    u: l,
                    bD: function () {
                        return new mL(null != u ? new nL({
                            uO: r,
                            md: u
                        }) : new nL({
                            uO: r,
                            Cc: G.pb(),
                            query: e.hg.get("layoutQuery", null)
                        }))
                    }
                })
            },
            YI: function (a) {
                return new oL({
                    el: a,
                    u: l
                })
            },
            nb: yb,
            uc: p,
            el: "#resultsLayout",
            g1: e.hg.get("magicTemplates", []).map(pL),
            model: G,
            E9: Ib.ba.get(Ff),
            F9: Ib.Zx(),
            u: l,
            TO: !!ax(g).getSubscription(),
            VO: -1 === ["DESIGN_TUTORIAL", "FREE_NEW_USER"].indexOf(e.kh())
        });
        v = $(".searchAdvanced");
        if (1 === v.length) {
            var y = qL({
                Dl: Dd(l),
                uK: c,
                anchor: $("#search"),
                ba: a.ba,
                H: m,
                QC: function () {
                    var a = Lb;
                    a.H.Ga(Tl("object_panel", "free_media_filter"));
                    qo(a, rL)
                }
            });
            v.append(y.view.$el);
            dL = "FREE" === y.bc.XA
        }
        var q = new sL({
            el: "#resultsSearch",
            u: l
        });
        q.on("results:didFetch", b);
        q.on("searchFilterMediaType", function () {
            tL = q.Wo();
            eL(l, !0)
        });
        tL = q.Wo();
        v = new uL({
            el: "#resultsElements",
            u: l,
            A6: Ib.ba.get($f)
        });
        v.on("results:didFetch", b);
        v.on("folder:expand", function (a) {
            m.track("folder_opened", {
                section: "editor",
                subsection: "object_panel",
                location: "elements_tab",
                type: a.replace(/\s/g, "_").toLowerCase()
            })
        });
        var v = new vH(Hb),
            x = new vK,
            E = new rg({
                Nb: G,
                Ed: H,
                Ze: vb,
                pc: Bb,
                uc: p,
                eH: Gb,
                Qx: function (a, b) {
                    var c = jc(l);
                    a = a.G();
                    var d;
                    0 <= Object.keys(x.bv).indexOf(a) ? a = x.bv[a] : (d = (new tK).io(a),
                        d.on("create", x.trigger.bind(x, "create")),
                        d.on("fail", x.trigger.bind(x, "fail")),
                        a = x.bv[a] = d);
                    return new xK({
                        source: b,
                        da: c,
                        progress: a
                    })
                }
            }),
            B;
        a: {
            try {
                B = ax(g).Ro().Qo().sg;
                break a
            } catch (K) {}
            B = void 0
        }
        B = new vL({
            Yb: B,
            $a: E,
            ly: Ib.ba.get(Jf),
            Ok: Ib.ba.get(Hf),
            I_: new wL($(window)),
            Qk: qg,
            ja: Ib,
            uc: p,
            ki: v,
            pc: Bb,
            u: l,
            ka: Cb,
            Of: x,
            ya: h.G(),
            aa: Rk,
            gd: a.gd
        });
        B.render().getElement().replaceAll("#normalUploads");
        B.show();
        (new xL({
            root: $("#objectPanel menu .uploads"),
            Of: x,
            kf: id(l)
        })).start();
        yL(ax(g).Ro(), tc(l), m);
        zL(l);
        Sy();
        d.children("menu").find("a").on("click", function () {
            AL.call(this, l)
        });
        (new Po("#objectPanel")).on("mousedown", ".templateGallery a", BL).on("touchstart", ".templateGallery a", BL);
        d.on("click", ".backgroundGallery a", CL);
        (new Po("#objectPanel")).on("mousedown", ".backgroundGallery *:not(.static) a", DL).on("touchstart", ".backgroundGallery *:not(.static) a", DL);
        d.on("click", ".backgroundGallery a", !1);
        d.on("click", ".infoPanelGallery .info .moreInfo", function () {
            EL.call(this, l)
        });
        d.on("click", ".infoPanelGallery .info .superKeyword", FL);
        if (Ib.ba.get(Df))
            d.on("click", ".searchSuggestion a", function () {
                var a = l,
                    b = $(this).data("query");
                $("#search").val(b);
                GL = null;
                eL(a, !1)
            });
        (new Po("#objectPanel")).on("mousedown", ".photoGallery:not(.gridGallery):not(.albumGallery) a", HL).on("touchstart", ".photoGallery:not(.gridGallery):not(.albumGallery) a", HL);
        d.on("click", ".photoGallery:not(.gridGallery):not(.albumGallery) a", !1);
        (new Po("#objectPanel")).on("mousedown", ".gridGallery a", IL).on("touchstart", ".gridGallery a", IL);
        (new Po("#objectPanel")).on("mousedown", ".chartGallery .chart a", JL).on("touchstart", ".chartGallery .chart a", JL).on("mousedown", ".chartGallery :not(.chart) a", HL).on("touchstart", ".chartGallery :not(.chart) a", HL);
        qg && qg.init().then(function (a) {
            qH(a).catch(function () {})
        });
        $(".results.infinite:not(#resultsSearch):not(#resultsUpload):not(#resultsLayout):not(#resultsElements) \x3e .layer").on("scroll", KL);
        $("#search").on("focus", LL);
        $("#someoneElseEditing").find("a").on("click", ML);
        $("#inReview").find("a").on("click", NL);
        $("#touchDevice").find("a").on("click", OL);
        d.find(".scrollPane").each(function () {
            (new Dn($(this))).render()
        });
        PL(d, a.Ho, l);
        QL(n, RL, function () {
            var a = Od(jc(l)),
                a = d.find('[title\x3d"' + a + '"]'),
                b = d.find(".uploads");
            return b.is(".on") && 1 === a.length ? (a = a.get(0).getBoundingClientRect(), {
                x: Number(a.right) + 20,
                y: Number(a.top) + 15
            }) : 1 === b.length ? (a = b.get(0).getBoundingClientRect(), {
                x: Number(a.right) + 20,
                y: Number(a.top) + Number(a.height) / 2
            }) : null
        })
    }

    function PL(a, b, c) {
        function d(b) {
            var d = b.param;
            "folder" === b.action ? e(d) : "search" === b.action ? g(d) : "tab" === b.action && ((b = a.find("menu ." + d + " a").get(0)) ? AL.call(b, c) : h())
        }

        function e(b) {
            var d = $("#resultsElements").find('a[data-query\x3d"' + b + '"]');
            b = a.find("menu .elements a").get(0);
            0 < d.length ? (AL.call(b, c),
                window.setTimeout(function () {
                    d.trigger("mousedown")
                }, J.Na.Pj)) : h()
        }

        function g(b) {
            window.setTimeout(function () {
                a.find("#search").val(b);
                eL(c)
            }, J.Na.Pj)
        }

        function h() {
            var a = $("#objectPanel").find("menu .on a").get(0);
            AL.call(a, c)
        }
        b ? d(b) : h()
    }

    function yL(a, b, c) {
        function d() {
            var a = e();
            if (a && !a.equals(p.ap()) || null === a && null !== p.ap())
                p.off("preview", m.wv),
                p.off("confirm", m.confirm),
                p.gB(a),
                p.confirm(),
                p.on("preview", m.wv),
                p.on("confirm", m.confirm),
                m.reset()
        }

        function e() {
            if (IB(n)) {
                var a = Dp(n);
                if (0 < a.length)
                    return a[a.length - 1].ah()
            }
            return null
        }

        function g() {
            Fn(p);
            p.confirm()
        }

        function h(a) {
            0 === $(a.target).closest(".colorPicker, .colorPalette").length && g()
        }
        var k = $("#resultsBackground"),
            l = k.find(".colorControls"),
            m = SL(),
            n = G.Oa();
        a = a && a.Gx || [];
        var p = new xn({
            Hx: new ay({
                jx: function (a) {
                    a.appendTo("#objectPanel")
                },
                Xy: function () {
                    return $(document.body)
                },
                margin: J.oQ,
                uB: $x
            }),
            kl: b,
            zi: pc(Kb),
            vl: G,
            xt: a,
            UA: !1,
            Xb: e(),
            H: c,
            ja: Ib,
            window: window
        });
        p.on("preview", m.wv);
        p.on("confirm", m.confirm);
        p.on("showColorPicker", function () {
            document.addEventListener("mousedown", h, !0);
            k.find(".layer").on("scroll", g)
        });
        p.on("hideColorPicker", function () {
            document.removeEventListener("mousedown", h, !0);
            k.find(".layer").off("scroll", g)
        });
        p.listenTo(G, "page:change:selected", function () {
            g();
            p.stopListening(n);
            n = G.Oa();
            d();
            p.listenTo(n, "change:background", d)
        });
        p.listenTo(n, "change:background", d);
        p.listenTo(I, "beforeOperationStackPop", g);
        p.appendTo(l)
    }

    function LL() {
        var a = this;
        "resultsSearch" !== TL().attr("id") && $("#objectPanel").find("menu .search a").trigger("click");
        window.setTimeout(function () {
            a.select()
        }, J.Qc)
    }

    function AL(a) {
        function b(a, b, c, d, e, g) {
            var h = $(a);
            a = h.find("\x3e .layer \x3e .inner \x3e .searchGroup").first();
            a.parent(".layer").find(".searchError").remove();
            UL(a);
            a.height(h.height());
            GL = new VL(c, b, d, null, null, null, null, !1, null, WL(h, h.height()), null, !1, !1, function () {
                XL(e)
            }, !1);
            g && (b = new VL(c, g, d, null, null, null, null, !1, null, WL(h, h.height()), null, !1, !1, function () {
                    XL(e)
                }, !1),
                b.IV = GL,
                GL.FG = b);
            a.data("search", GL);
            XL(e)
        }
        S.trigger("objectPanel:tabClicked");
        var c = $(this).parents("menu"),
            d = $("li", c),
            e = $(this).parents("li"),
            g = d.index(c.find("li.on")) + 1,
            h = e.index() + 1,
            k = $("#objectPanel"),
            l = "#" + k.find(".content \x3e .results").get(g - 1).id,
            c = "#" + k.find(".content \x3e .results").get(h - 1).id,
            m = k.get(0).className,
            m = m.replace(/(^| )stage[^ ]+/g, "");
        k.get(0).className = m;
        k.addClass("stage" + h);
        d.removeClass("on");
        T && e.get(0) && ul(T, e.get(0).className, "object_panel");
        e.addClass("on");
        d = TL();
        e.hasClass("search") && $("#search").focus();
        g == h && d.find(".layer").first().animate({
            scrollTop: 0
        }, J.Na.Zp);
        e = $(l + " .layer");
        YL(e);
        ZL && ZL.cancel();
        ZL = null;
        g = $(c);
        e = 0 === g.find(".gallery li:not(.static)").length;
        g = 0 < g.find(".searchLoader").length;
        e && !g && ("#resultsLayout" == c ? (c = $("#resultsLayout"),
            a = c.data("view"),
            c = WL(c, c.height()),
            a.Jh(c)) : "#resultsText" == c ? Ib.ba.get(fg) ? b(c, QJ, "text", null, a, PJ) : b(c, PJ, "text", null, a) : "#resultsBackground" == c && b(c, PJ, "backgrounds", {
            background: "true"
        }, a));
        (a = d.find(".layer").last().find(".searchGroup").last().data("search")) && GL && "facebook" != GL.query.toLowerCase().trim() && (GL = a);
        return !1
    }

    function BL(a) {
        function b(a) {
            var b = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            var c = Math.abs(a - m) > J.Rc,
                c = Math.abs(b - l) > J.Rc || c;
            null == k && c && (k = g.Px(),
                $("#content").append(k),
                e.css("opacity", 0),
                $("#search").blur(),
                $L(k, aM(n)));
            null != k && (a = h.top + a - m,
                k.css("left", h.left + b - l).css("top", a));
            return !1
        }

        function c() {
            function a() {
                $(this).remove();
                e.css("opacity", "")
            }
            $("#hotspots").remove();
            n.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            e.removeClass("pickedUp");
            null == k || k.hasClass("disappeared") || k.hasClass("placing") ? (k && k.remove(),
                e.animate({
                    opacity: 1
                }, J.Na.ZJ),
                d()) : (h = e.offset(),
                k.addClass("returning"),
                k.one("transitionend", a).css("left", h.left).css("top", h.top))
        }

        function d() {
            var b = null != k;
            if (!$(a.currentTarget).find(".multiPageDesignItem,.multiPageLayoutItem").length || b) {
                var c;
                switch ($(".layoutsControls .tabDropdown").attr("data-selected")) {
                    case bM:
                        c = g.model instanceof zH ? "canva_layout_grid" : "canva_layout";
                        break;
                    case cM:
                        c = "brand_template";
                        break;
                    case dM:
                        c = "your_designs";
                        break;
                    default:
                        c = "design_folder"
                }
                var d = $(a.target).is(".componentItemLink"),
                    e = "function" === typeof g.model.sE && 0 < g.model.sE();
                T && T.track("layout_use", {
                    media_id: g.model.G(),
                    layout_source: c,
                    component_page: d,
                    interaction: b ? "drag" : "click",
                    is_paid_layout: e ? "yes" : "no"
                });
                if (b = e && Ib)
                    b = Ib.ba.get(mg);
                b && (window.location.hash = "#premiumLayoutHint",
                    window.Appcues && window.Appcues.page())
            }
        }
        if ($(a.target).hasClass("moreInfo") || $(a.target).hasClass("superKeyword") || a.which == J.wh || a.ctrlKey)
            return !0;
        vy();
        var e = $(this);
        e.addClass("pickedUp");
        var g = e.parents("li").data("view"),
            h = e.offset(),
            k = null,
            l = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            m = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            n = new Po($(document));
        n.on("mousemove|touchmove", b).on("mouseup|touchend", c);
        return !1
    }

    function SL() {
        function a() {
            b && (kJ(),
                b = !1);
            d = c = null
        }
        var b = !1,
            c, d, e;
        return {
            wv: function (a) {
                bh();
                var h = G.Oa(),
                    k = Dp(h);
                e = {
                    index: 0,
                    color: a.Ca()
                };
                b || (jJ(),
                    b = !0);
                c = k.filter(function (a) {
                    return a.qp()
                }).pop();
                k.forEach(function (a) {
                    a !== c && (eM(a),
                        a.remove())
                });
                c ? (d || (h = c.ob()[0],
                        d = {
                            index: 0,
                            color: h ? h.Ca() : J.LH
                        }),
                    c.ce(0, a)) : (a = {
                        type: "image",
                        isBackground: !0,
                        isRecolorable: !0,
                        backgroundColor: e.color
                    },
                    _.extend(a, h.Ba().serialize()),
                    a = tg(a),
                    a.appendTo(h),
                    d = e,
                    vg(a),
                    c = a)
            },
            confirm: function () {
                if (c && c.ha()) {
                    var b = {
                        elementIndex: c.ea(),
                        pageIndex: c.ha().ea(),
                        "new": e,
                        old: d
                    };
                    I.register(new Y(fM, b));
                    d = e
                }
                a()
            },
            reset: a
        }
    }

    function CL(a) {
        if ($(a.target).is(".moreInfo") || $(a.target).is(".superKeyword"))
            return !1;
        bh();
        a = $(a.currentTarget).parents("li")[0];
        a = $(a);
        gM(a);
        a = a.data("result");
        SJ(fK(a));
        El("background_image", a.G(), null);
        return !1
    }

    function DL(a) {
        function b(a) {
            var b = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            if (null == m && (Math.abs(b - n) >= J.Rc || Math.abs(a - p) > J.Rc)) {
                m = $('\x3cdiv class\x3d"clone bg"\x3e\x3c/div\x3e');
                g.Az() && m.addClass("patterned");
                var c = $("img", d).clone(!0).off(""),
                    q = parseInt(c.attr("width"), 10),
                    x = parseInt(c.attr("height"), 10);
                q < x ? c.css("width", k).css("height", c.height()) : c.css("width", c.width()).css("height", k);
                m.data("li", e).append(c).css("left", h.left).css("top", h.top).css("width", k).css("height", l).css("background-color", e.data("color"));
                $("#content").append(m);
                d.css("opacity", 0);
                $("#search").blur();
                $L(m, aM(r))
            }
            null != m && (a = h.top + a - p,
                m.css("left", h.left + b - n).css("top", a));
            return !1
        }

        function c() {
            function a() {
                $(this).remove();
                d.css("opacity", 1)
            }
            $("#hotspots").remove();
            r.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            d.removeClass("pickedUp");
            null == m || m.hasClass("disappeared") || m.hasClass("placing") ? (m && m.remove(),
                d.animate({
                    opacity: 1
                }, J.Na.ZJ)) : (h = d.offset(),
                m.addClass("returning"),
                m.one("transitionend", a).css("left", h.left).css("top", h.top))
        }
        if (a.which == J.wh || a.ctrlKey)
            return !0;
        if ($(a.target).is(".moreInfo") || $(a.target).is(".superKeyword"))
            return !1;
        var d = $(this);
        d.addClass("pickedUp");
        var e = d.parents("li"),
            g = e.data("result"),
            h = d.offset(),
            k = d.width(),
            l = d.height(),
            m = null,
            n = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            p = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            r = new Po($(document));
        r.on("mousemove|touchmove", b).on("mouseup|touchend", c);
        return !1
    }

    function gM(a) {
        var b = G.Oa(),
            c = ah(H),
            d = Dp(b);
        if (0 < d.length) {
            var e = d[d.length - 1].O().clone();
            e.removeClass("appearing");
            hM(c, e);
            P.delay(J.Na.N_ * J.Xw).then(function () {
                e.remove()
            })
        }
        a = $("img", a);
        (a = tg(iM(a))) && a.xI() && (jJ(),
            d.forEach(function (a) {
                var c = a.ea(),
                    c = {
                        backgroundColor: a.ah(),
                        elementIndex: c,
                        oldElementIndex: c,
                        pageIndex: Mo(G, b)
                    };
                iC(a);
                I.register(new Y(jM, c));
                eM(a);
                a.remove()
            }),
            d = b.Ba(),
            c = a.Ba(),
            pm(c, d),
            a.yd(c),
            b.addElement(a, !1, !0),
            vg(a),
            d = a.ea(),
            Ep(a),
            d = {
                backgroundColor: a.ah(),
                elementIndex: a.ea(),
                oldElementIndex: d,
                pageIndex: Mo(G, b)
            },
            I.register(new Y(kM, d)),
            kJ())
    }

    function Sy(a, b) {
        function c(a) {
            var b, c, d = a.width(),
                l = parseFloat(a.find("a").css("margin-right"));
            b = a.data("layoutItem");
            c = a.data("designItem");
            var m = a.data("searchResult");
            if (b)
                c = b.getContent(),
                b = c.width,
                c = c.height;
            else {
                if (c)
                    c = Aq(c.draft.imageSets.thumbnail);
                else if (c = m.getFile("ORIGINAL"), !c)
                    return d;
                b = c.D();
                c = c.F()
            }
            return 80 > (d - l) * c / b ? Number(a.parent().width()) : d
        }
        void 0 === b && (b = !0);
        void 0 === a && (a = $("#objectPanel .photoGallery, #objectPanel .infoPanelGallery"));
        var d = a.filter(".gridGallery");
        a = a.not(d);
        lM(d);
        a.each(function () {
            var a = $(this),
                d = a.children("li"),
                h = a.hasClass("backgroundGallery");
            if (!(0 >= d.length || (a.removeClass("laidOut"),
                    0 >= a.width()))) {
                b || d.filter(":not(.newSearch)").addClass("doNotTransition");
                $("img", a).css("height", "");
                d.css("width", "").css("left", "").css("top", "");
                var k;
                k = a.hasClass("templateGallery") ? c(d.first()) : d.first().width();
                for (var l = parseInt($("a", this).css("margin-right"), 10), m = parseInt($("a", this).css("margin-bottom"), 10), n = Math.round(a.width() / k), p = a.data("columnData"), r = {
                        UZ: k,
                        marginRight: l,
                        marginBottom: m,
                        Da: []
                    }, u = p && p.Da.length == n && p.UZ == k, v = 0; v < n; v++)
                    r.Da[v] = {
                        height: 0,
                        items: [],
                        wf: 0
                    },
                    u && (r.Da[v].wf = p.Da[v].wf);
                var y = null;
                a.children("li").find("a.infoOpen").parents("li").first().each(function () {
                    var a = $("img", this),
                        b = a.attr("width") || a.get(0).naturalWidth,
                        a = a.attr("height") || a.get(0).naturalHeight;
                    y = $(this).data("originalTop") + (k - l) / b * a + m
                });
                null != y && u || d.removeData("modifiedTop");
                d.each(function () {
                    for (var b = $(this), c = b.data("result"), d = 0, g = r.Da[d].height, n = 0; n < r.Da.length; n++)
                        if (0 == r.Da[n].height) {
                            d = n;
                            g = 0;
                            break
                        } else
                            r.Da[n].height < g && (d = n,
                                g = r.Da[n].height);
                    var n = b.find("a"),
                        p = b.find("img"),
                        q, v;
                    0 < p.length ? (q = parseInt(p.attr("width"), 10) || p.get(0).naturalWidth,
                        v = parseInt(p.attr("height"), 10) || p.get(0).naturalHeight) : v = q = k;
                    var x = q > v,
                        E = k - l,
                        ma = E / q * v;
                    p.css("height", ma);
                    b.hasClass("grid") && (ma = b.data("layoutItem").getContent(),
                        ma = (k - l) * ma.height / ma.width,
                        b.find("a").css("height", ma));
                    b.data("originalTop", g).css("width", k).css("left", d * k);
                    h && (x && (E = q / v * (k - m),
                            p.css("width", E).css("height", "")),
                        "backgroundColorAlbum" === b.attr("id") ? b.add(n).add(p).css("width", "").css("height", "") : (b.height(k),
                            n.height(k - m),
                            c && !c.Az() && (ma = x ? 0 : (k - m - ma) / 2,
                                p.css("margin-left", (k - l - E) / 2).css("margin-top", ma))),
                        c && (c.vd() && (ma = "#" + (J.sY[c.G()] || "888888"),
                                b.data("color", ma),
                                n.css("background-color", ma)),
                            c.Az() && b.addClass("patterned")),
                        ma = k - m);
                    c = d;
                    b.hasClass("newSearch") ? (d = 0,
                        null != y && g + ma + m > y && (d = r.Da[c].wf,
                            0 == d && (d = mM(a.parents(".searchGroup")),
                                d += y - r.Da[c].height,
                                r.Da[c].wf = d),
                            b.data("modifiedTop", g + d)),
                        b.css("top", g + d)) : b.data("modifiedTop") ? (c = b.data("columnIndex"),
                        g = b.data("modifiedTop"),
                        b.css("left", c * k).css("top", g).data("originalTop", g - r.Da[c].wf)) : u ? (c = b.data("columnIndex"),
                        b.css("left", c * k).css("top", r.Da[c].height).data("originalTop", r.Da[c].height)) : b.css("top", g);
                    r.Da[c].height += ma + m;
                    r.Da[c].items.push(b);
                    b.data("columnIndex", c)
                });
                a.data("columnData", r);
                a.parents(".searchGroup").height();
                a.addClass("laidOut");
                b || window.setTimeout(function () {
                    d.filter(":not(.newSearch)").removeClass("doNotTransition")
                }, J.Na.Tz);
                var q = a.parent(".searchGroup"),
                    n = a.parents(".layer").find("\x3e .inner \x3e .searchGroup").last().get(0) == q.get(0);
                Ty(q, !n);
                var x = q.height(),
                    E = a.hasClass("templateGallery") ? 4 : 1;
                setTimeout(function () {
                    var b = nM(a.parents(".results")),
                        c = 0 < a.parents("#resultsSearch").length,
                        d = c ? oM(q) : 0,
                        g = -1;
                    a.children("li.newSearch").each(function () {
                        var a = $(this),
                            e = !1;
                        (e = c ? d + a.data("originalTop") < b : parseInt(a.css("top"), 10) < x) ? window.setTimeout(function () {
                            a.removeClass("newSearch")
                        }, ++g * J.Na.ev * E): a.addClass("doNotTransition").removeClass("newSearch").removeClass("doNotTransition")
                    })
                }, J.Qc)
            }
        })
    }

    function lM(a) {
        void 0 === a && (a = $("#objectPanel").find(".gridGallery"));
        var b = $("a", a).width();
        $("li, a", a).css("height", b);
        a.addClass("laidOut");
        a.each(function () {
            var a = $(this),
                b = a.children("li"),
                a = a.parents(".searchGroup"),
                e = a.parents(".layer"),
                g = e.offset(),
                h = e.height();
            b.each(function () {
                var a = $(this),
                    b = a.position().top + (a.hasClass("newSearch") ? 50 : 0);
                a.data("originalTop", b)
            });
            Ty(a, !1);
            setTimeout(function () {
                b.each(function (a) {
                    var b = $(this);
                    b.offset().top < g.top + h ? setTimeout(function () {
                        b.removeClass("newSearch")
                    }, a * J.Na.ev) : b.removeClass("newSearch")
                })
            }, J.Qc)
        })
    }

    function pM(a, b) {
        var c = a.parents("li"),
            c = c.data("result");
        c || (c = a.parent().data("li"),
            c = c.data("result"));
        c.sj(function (a) {
            qM(a).then(function () {
                b(a.elements)
            })
        })
    }

    function iM(a) {
        var b = a.parents("li"),
            c = b.data("result");
        c || (b = a.parent().data("li"),
            c = b.data("result"));
        var d = 0 < b.parents("#resultsBackground").length,
            e = parseInt(a.data("screen-width") || a.attr("width"), 10),
            g = parseInt(a.data("screen-height") || a.attr("height"), 10),
            h = "image";
        a.hasClass("svg") ? (h = "svg",
            e *= H.Go,
            g *= H.Go) : a.hasClass("graphic") && (h = "graphic");
        var k = c.Ty();
        return {
            type: h,
            origin: c.Ve(),
            mediaId: c.G(),
            mediaVersion: c.getVersion(),
            mediaApproved: void 0 !== a.data("mediaApproved") ? a.data("mediaApproved") : !0,
            width: e,
            height: g,
            isDark: !!a.hasClass("dark"),
            isBackground: c.Ac() && d,
            isCutout: c.gh(),
            isRepeating: c.Az(),
            isRecolorable: c.vd(),
            backgroundColor: c.vd() ? b.data("color") : void 0,
            spritesheetMetadata: k && Gg(k)
        }
    }

    function rM(a) {
        var b = Lg(G.pb().tb),
            c = $("img", a);
        a = c.parents("li").data("result");
        if ("ELEMENT_GROUP" === WJ(a))
            sM(a, !0, null);
        else {
            var c = tg(iM(c)),
                d = c.D(),
                e = c.F(),
                g = Math.min(d, b.D() * J.xh),
                h = g / d * e;
            h > b.F() * J.xh && (h = b.F() * J.xh,
                g = h / e * d);
            c.za(g);
            c.oa(h);
            HB(c);
            c.JA();
            b = G.Oa();
            c.Lk(b);
            tM(c, a);
            c.Cj() && uM(a, c);
            vg(c)
        }
    }

    function sM(a, b, c) {
        function d(b, d, h, k) {
            g = b.elements.filter(function (a) {
                return "group" !== a.type
            }).map(function (a) {
                delete a.elementIndex;
                delete a.groupIndex;
                "text" === a.type ? (l++,
                    a = new up(a, e)) : a = tg(a);
                var b = (new Hm).translate(-1 * d.Y(), -1 * d.N());
                a.transform(b);
                FE(d, a);
                return a
            });
            b = new U(0, 0, d.D(), d.F());
            var m = J.xh * h.D(),
                y = J.xh * h.F(),
                m = new U(0, 0, m, y),
                m = $g(b.clone(), m);
            m.D() < b.D() || m.F() < b.F() ? d.setSize(m.D(), m.F(), !0) : d.setSize(b.D(), b.F(), !0);
            k ? d.Lk(h) : c && (d.setPosition(c.x, c.y),
                h.addElement(d),
                XE(d, h));
            vg(d);
            T && T.track("text_group_insert", {
                media_id: a.G()
            })
        }

        function e() {
            ++k === l && (h.Oq(g[0]),
                b ? h.setPosition((m.D() - h.D()) / 2, (m.F() - h.F()) / 2) : c && (h.setPosition(c.x, c.y),
                    wg(h)))
        }
        var g, h, k = 0,
            l = 0,
            m = G.Oa();
        a.sj(function (c) {
            if (c && c.elements && 0 < c.elements.length) {
                var e = c.elements.filter(function (a) {
                    return "group" === a.type
                });
                h = new iB(e[0]);
                qM(c).then(function () {
                    d(c, h, m, b);
                    El("text_group", a.G(), WJ(a))
                })
            }
        })
    }

    function qM(a) {
        function b(a) {
            a && a.media && a.media.forEach(function (a) {
                a && Kg(vb, a.G(), a.Va().getVersion(), a.Va().Dc())
            })
        }
        a = function (a) {
            function b(a) {
                a.mediaId && e.push(new Fm({
                    id: a.mediaId,
                    version: a.mediaVersion
                }));
                a.fontMedia && e.push(Gm(a.fontMedia));
                Array.isArray(a.htmlFontMedia) && (e = e.concat(a.htmlFontMedia.map(Gm)))
            }
            var e = [];
            a.elements && a.elements.length && a.elements.forEach(function (a) {
                b(a);
                a.contents && a.contents.length && a.contents.forEach(b)
            });
            return e
        }(a);
        return a.length ? (a = fE((new eE).ho(), a),
            GD(Bb, a).then(b)) : P.resolve()
    }

    function uM(a, b) {
        "CANVA" !== a.Ve() && xg(Gb, a, b)
    }

    function vM(a) {
        var b = a.parents(".photoGallery").first();
        a.find(".info").remove();
        a.find("a").addClass("removed");
        a.find("img").addClass("removed");
        a.addClass("removed");
        window.setTimeout(function () {
            a.remove();
            Sy(b)
        }, 500)
    }

    function Ry() {
        $(".infoPanel .close").click()
    }

    function EL(a) {
        function b(a) {
            a = a.G();
            var b = c();
            return b.hasOwnProperty(a) ? b[a] : null
        }

        function c() {
            return (new dh(window.viewConfig)).hg.get("magicTemplates", []).map(pL).reduce(function (a, b) {
                a[b.template] = wM(b);
                return a
            }, {})
        }

        function d() {
            m.removeClass("transitioning")
        }
        var e = $(this).parents("a"),
            g = $("img", e),
            h = e.parents("li"),
            k = e.parents(".gallery"),
            l = e.parents(".layer"),
            m = e.parents(".searchGroup"),
            n = $(this).parents(".results"),
            p = xM(m),
            r = parseInt(m.css("margin-top"), 10),
            u = 1 === $(this).parents("#resultsUpload").length,
            v = 1 === $(this).parents("#resultsLayout").length,
            y = yM(m),
            q = 0,
            x = m.prevAll(".searchGroup");
        x.each(function () {
            q = Math.max(q, yM($(this)));
            y += q
        });
        v && y > l.height() && (l.find(".infoPanel").css("height", "0"),
            x.find(".infoPanel").css("height", "0"),
            l.scrollTop(l.scrollTop() - y));
        l.find(".infoPanel .close").click();
        e.addClass("infoOpen");
        var x = h.data("result"),
            E = h.data("designItem"),
            B = h.data("originalTop"),
            K = h.height(),
            C = B + K,
            p = p + C + oM(m),
            r = p - q + r;
        if (null != x || null != E) {
            var N = (new zM({
                Yb: ax(Yw()).wa().Qo(),
                nb: yb,
                uL: !!E,
                GL: !!x,
                Dj: !(!x || !YJ(x)),
                IL: !1 === g.data("mediaApproved"),
                JL: u,
                Ir: E && b(E),
                model: x || E,
                SM: vM.bind(null, h),
                u: a,
                ja: Ib,
                RG: g.height() / g.width()
            })).render().$el;
            N.data("item", e);
            N.css("top", r).appendTo(m);
            e.data("infoPanel", N);
            var Q = $('\x3cdiv class\x3d"infoPanelPointer"\x3e\x3c/div\x3e');
            Q.css("left", parseInt(h.css("left"), 10) + parseInt(N.css("left"), 10) + h.width() / 2).css("top", r).appendTo(m);
            N.data("infoPanelPointer", Q);
            var M = N.height(),
                ca = N.outerHeight(!0);
            N.one("transitionend", d).css("height", 0);
            P.delay(J.Qc).then(function () {
                N.addClass("on").css("height", M);
                Q.addClass("on")
            });
            var V = AM(k, C),
                V = V.filter(function (a) {
                    return a != h.get(0)
                }),
                ra = k.data("columnData");
            ra.Da.forEach(function (a) {
                var b = null;
                a.items.filter(function (a) {
                    return -1 < V.indexOf(a.get(0))
                }).forEach(function (c) {
                    var d = c.data("originalTop");
                    null === b && (b = C + ca - d,
                        a.wf = b);
                    c.css("top", d + b).data("modifiedTop", d + b).data("columnIndex", ra.Da.indexOf(a))
                })
            });
            a = l.find("\x3e .inner \x3e .searchGroup").last().get(0) == m.get(0);
            m.addClass("transitioning");
            Ty(m, !a);
            v ? setTimeout(function () {
                var a = h.parents(".scrollPane").get(0).getBoundingClientRect(),
                    b = h.get(0).getBoundingClientRect(),
                    c = a.top > b.top,
                    d = a.height > ca + b.height,
                    e = 0;
                a.height - b.bottom > ca ? c && (e = b.top - a.top - 15) : e = d ? ca - (a.bottom - b.bottom) : b.top - a.top - 15;
                30 >= e && -30 <= e && (e = 0);
                l.animate({
                    scrollTop: l.scrollTop() + e
                }, J.Na.Zp)
            }, 300) : (v = p + ca,
                n = nM(n),
                a = v - r < l.height(),
                v > n && a ? l.animate({
                    scrollTop: l.scrollTop() + (v - n)
                }, J.Na.Zp) : r < l.scrollTop() && l.animate({
                    scrollTop: l.scrollTop() - (l.scrollTop() - r)
                }, J.Na.Zp),
                m.hasClass("inlineFolderGroup") && S.trigger("infoPanelToggle", m, yM(m)))
        }
    }

    function FL() {
        var a = $(this),
            b = a.parents("a").parents("li"),
            c = !0 === b.data("superKeywordAdd"),
            d = b.data("query"),
            e = b.data("result");
        if (d && e) {
            var g = (e.XK() || []).slice();
            c ? g.push(d) : g = g.filter(function (a) {
                return a !== d
            });
            g = g.map(function (a) {
                return new VD("en", a.trim())
            });
            e = hE((new JD).io(e.G()).jk(e.getVersion()), g);
            HD(Bb, e, function (e) {
                200 == e && (c ? (a.removeClass("superMiss"),
                    a.addClass("superHit"),
                    a.attr("title", "Remove superKeyword '" + d + "'"),
                    b.data("superKeywordAdd", !1)) : (a.removeClass("superHit"),
                    a.addClass("superMiss"),
                    a.attr("title", "Add superKeyword '" + d + "'"),
                    b.data("superKeywordAdd", !0)))
            })
        }
    }

    function BM() {
        var a = $(this).parents(".infoPanel"),
            b = a.data("xhr"),
            c = a.data("item");
        c.removeClass("infoOpen");
        c.parents("li").siblings().each(function () {
            var a = $(this).data("originalTop");
            $(this).css("top", a).removeData("modifiedTop")
        });
        var d = a.parents(".searchGroup").first();
        d.addClass("transitioning").height(d.data("contentHeight"));
        $(".gallery", d).data("columnData").Da.forEach(function (a) {
            a.wf = 0
        });
        a.one("transitionend", function () {
            e && (e.remove(),
                a.remove(),
                d.removeClass("transitioning"))
        }).removeClass("on").css("height", 0);
        var e = a.data("infoPanelPointer");
        e.removeClass("on");
        b && b.cancel();
        b = null;
        a.removeData("xhr");
        d.hasClass("inlineFolderGroup") && S.trigger("infoPanelToggle", d, 0);
        return !1
    }

    function HL(a) {
        function b(a) {
            function b() {
                q = $('\x3cdiv class\x3d"clone"\x3e\x3c/div\x3e');
                var a = iM(m);
                x = tg(a);
                x.za(r);
                x.oa(u);
                var c = $('\x3cdiv class\x3d"cloneInner"\x3e').append(x.O()),
                    e;
                m.is(".svg") ? e = "svg" : m.is(".graphic") && (e = "graphic");
                ma && (c.addClass("elementGroupSearchResult"),
                    pM(m, function (a) {
                        a = EE(a);
                        var b = new U(0, 0, a.D(), a.F()),
                            d = J.xh * K.D(),
                            e = J.xh * K.F(),
                            d = new U(0, 0, d, e),
                            d = $g(b.clone(), d),
                            e = b.D(),
                            g = b.F();
                        if (d.D() < b.D() || d.F() < b.F())
                            e = d.D(),
                            g = d.F();
                        v = e * W;
                        y = g * W;
                        l = k / (v / y);
                        a.setPosition(0, 0);
                        a.setSize(e, g);
                        a.UN = !1;
                        a.ls = !1;
                        c.empty().append(a.O());
                        x = a
                    }));
                e && (q.addClass(e),
                    c.addClass(e),
                    a = Gb.Uc(a.mediaId, a.mediaVersion),
                    x instanceof iB ? x.xa().filter(function (a) {
                        return a instanceof Ko
                    })[0].cq(a[aC].Aa()) : x.cq(a[aC].Aa()));
                q.append(c).css("left", h.left).css("top", h.top).css("transform-origin", "top left").css("transform", "scale(" + k / v + ", " + l / y + ")").toggleClass("cutout", x.gh()).data("li", g.parents("li")).data("canvaElement", x).data("isOrganicSearchResult", d);
                $("#content").append(q);
                g.css("visibility", "hidden");
                ma || !x.KC() && !x.gh() || ch(q, null, aM(Ka));
                $("#search").blur()
            }
            var c = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            if (null == q)
                if (aM(Ka)) {
                    var e = rn(Q, M, c, a);
                    if (300 < e || 60 > e)
                        b();
                    else
                        return !0
                } else
                    (Math.abs(c - Q) > J.Rc || Math.abs(a - M) > J.Rc) && b();
            if (null != q) {
                var n = Math.min(1, Math.sqrt(Math.pow(c - Q, 2) + Math.pow(a - M, 2)) / ra),
                    e = Math.min(1, k / (v * (1 - n))),
                    p = Math.min(1, l / (y * (1 - n)));
                if (c > Q) {
                    q.css("transform", "scale(" + e + ", " + p + ")");
                    if (x.xb()) {
                        var rc = SE(x);
                        Db || rc && 0 !== rc.length && (1 !== rc.length || "#000000" !== rc[0]) || (Db = gh(J.fC));
                        Db && (rc = G.Oa().ug() ? Db : gh(J.eC)) && x.EO(bn(Db, rc, n))
                    }
                    x.Jx() && (null === x.Yl && HB(x),
                        JB(x, n),
                        x.JA());
                    n = Math.round(h.top + a - M - (p * y - l) * V);
                    q.css("left", Math.round(h.left + c - Q - (e * v - k) * ca)).css("top", n)
                } else
                    q.css("transform-origin", "top left").css("transform", "scale(" + k / v + ", " + l / y + ")").css("left", h.left + c - Q).css("top", h.top + a - M);
                (c < B.left || c > B.left + E.outerWidth() || a < B.top || a > B.top + E.outerHeight()) && q && !q.hasClass("disappeared") && !q.hasClass("placing") && CM(C, q) ? (null == aa && (aa = new Wg(q, N)),
                    Yg(aa, xb, Oa)) : $("#overlays .align").removeClass("on")
            }
            return !1
        }

        function c(a) {
            function e() {
                $(this).remove();
                g.css("visibility", "visible")
            }

            function m() {
                g.css("opacity", 0);
                window.setTimeout(function () {
                    g.one("transitionend", function () {
                        $(this).removeClass("reappearing")
                    }).css("visibility", "").addClass("reappearing").css("opacity", "")
                }, J.Qc)
            }

            function n() {
                var a;
                if (a = ma.Ku())
                    a = Ib.ba.get(kg);
                a && !Ib.ba.get(hg) && (a = Lb,
                    a.H.Ga(Tl("object_panel", "exclusive_media_usage", "non_discounted")),
                    qo(a, ro))
            }
            Ka.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            if (!0 !== DM) {
                $("#overlays .align").removeClass("on");
                $("#content").trigger("mousedown");
                bh();
                var p = void 0 !== a.clientX ? a.clientX : a.originalEvent.changedTouches[0].clientX;
                a = void 0 !== a.clientY ? a.clientY : a.originalEvent.changedTouches[0].clientY;
                var r = Math.abs(a - M) > J.Rc,
                    r = Math.abs(p - Q) > J.Rc || r;
                $("#hotspots").remove();
                P.delay(J.Na.X4).then(function () {
                    g.removeClass("pickedUp")
                });
                var u = g.parents("li");
                if (u.data("result")) {
                    var ma = u.data("result");
                    if (null == q && !r)
                        return $("#search").blur(),
                            rM(u),
                            p = fK(ma, d),
                            SJ(p),
                            n(), !1;
                    null != q && null != x && ((p < B.left || p > B.left + E.outerWidth() || a < B.top || a > B.top + E.outerHeight()) && q && !q.hasClass("disappeared") && CM(C, q) ? (p = G.Oa(),
                        "ELEMENT_GROUP" === WJ(ma) ? sM(ma, !1, {
                            x: aa.Y(),
                            y: aa.N()
                        }) : (x.setPosition(aa.Y(), aa.N()),
                            x.za(aa.D()),
                            x.oa(aa.F()),
                            p && x.appendTo(p),
                            x.Cj() && uM(ma, x),
                            vg(x),
                            wg(x)),
                        m(),
                        p = fK(ma, d),
                        SJ(p),
                        tM(x, ma),
                        n(),
                        q.remove()) : null == q || q.hasClass("disappeared") ? null != q && q.hasClass("disappeared") && (m(),
                        EM(q.data("placedInElement"))) : (h = g.offset(),
                        q.addClass("returning"),
                        q.one("transitionend", e).css("left", h.left).css("top", h.top).css("transform", "scale(" + k / v + ", " + l / y + ")")))
                }
            }
        }
        if (a.which == J.wh || a.ctrlKey)
            return !0;
        if ($(a.target).is(".removed") || $(a.target).is(".moreInfo") || $(a.target).is(".superKeyword"))
            return !1;
        var d = 1 === $(this).parents("#resultsSearch").length,
            e = Lg(G.pb().tb),
            g = $(this);
        g.addClass("pickedUp");
        var h = g.offset(),
            k = g.width(),
            l = g.height(),
            m = $("img", g).first(),
            n = iM(m),
            p = n.width,
            n = n.height,
            r = Math.min(p, e.D() * J.xh),
            u = r / p * n;
        u > e.F() * J.xh && (u = e.F() * J.xh,
            r = u / n * p);
        var v = r * W,
            y = u * W,
            q = null,
            x = null,
            E = $("#objectPanel"),
            B = E.offset(),
            K = G.Oa(),
            e = ah(H),
            C = e.$el,
            N = e.$el.find(".page__content").offset(),
            Q = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            M = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            ca = (Q - h.left) / k,
            V = (M - h.top) / l,
            ra = Math.abs(Q - (B.left + E.outerWidth())),
            Ka = new Po($(document)),
            ma = 1 === $(a.target).parents(".elementGroupSearchResult").length;
        Ka.on("mousemove|touchmove", b).on("mouseup|touchend", c);
        var aa = null,
            Oa = Xg(),
            xb = {},
            Db = null;
        return FM
    }

    function JL(a) {
        function b(a) {
            function b(a) {
                var c = $('\x3cdiv class\x3d"clone" style\x3d"pointer-events: none"\x3e\x3c/div\x3e'),
                    d = a.offset(),
                    e = a.width(),
                    g = a.height();
                c.append(kG(m)).css("left", d.left).css("top", d.top).css("width", e).css("height", g).css("transform-origin", "top left");
                $("#content").append(c);
                a.css("visibility", "hidden");
                $("#search").blur();
                return c
            }
            var c = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            var d = c - C.x,
                g = a - C.y,
                n = Math.abs(d) > J.Rc || Math.abs(g) > J.Rc;
            if (!x)
                if (n)
                    x = b(e);
                else if (aM(ca))
                if (g = 180 * Math.atan2(g, d) / Math.PI,
                    300 < g || 60 > g)
                    x = b(e);
                else
                    return !0;
            if (x) {
                d = Lm(Lm(d, 0, d) / M);
                g = Mm(1, y / k, d);
                n = Mm(1, q / l, d);
                x.css("width", g * k + "px").css("height", n * l + "px").css("left", h.left + c - C.x - Mm(0, (y - k) * N.x, d)).css("top", h.top + a - C.y - Mm(0, (q - l) * N.y, d));
                g = x.find('[data-recolorable-lines\x3d"true"] \x3e line');
                if (g.length) {
                    var n = e.find('[data-recolorable-lines\x3d"true"] \x3e line').first().attr("stroke"),
                        p = G.Oa().ug() ? J.fC : J.eC,
                        d = bn(fn(n), fn(p), d);
                    g.attr("stroke", d.toString())
                }
                c > Q && CM(B, x) ? (V = V || new Wg(x, K),
                    Yg(V, Ka, ra)) : GM();
                d = $(".selectionBox");
                d.css("pointer-events", "none");
                c = $(document.elementFromPoint(c, a));
                d.css("pointer-events", "");
                c = c.is(".element.chart") ? c : c.parents(".element.chart");
                $(".element.chart").not(c).removeClass("chartElement--droppable");
                c.length && c.addClass("chartElement--droppable")
            }
            return !1
        }

        function c(a) {
            function g() {
                $(this).remove();
                e.css("visibility", "visible")
            }

            function p() {
                e.css("opacity", 0);
                P.delay(J.Qc).then(function () {
                    e.one("transitionend", function () {
                        $(this).removeClass("reappearing")
                    }).css("visibility", "").addClass("reappearing").css("opacity", "")
                })
            }
            ca.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            if (!0 !== DM) {
                GM();
                bh();
                var r = d(a);
                a = Math.abs(r.x - C.x) > J.Rc || Math.abs(r.y - C.y) > J.Rc;
                var q = tg(m);
                q.za(u);
                q.oa(v);
                if (!a && !x)
                    return $("#search").blur(),
                        1 === n.length && n[0] instanceof gG ? (a = n[0],
                            r = a.serialize(),
                            LG(a, q.serialize()),
                            I.register(new Y(HM, {
                                elementIndex: a.ea(),
                                pageIndex: a.ha().ea(),
                                "new": a.serialize(),
                                old: r
                            })),
                            wg(a),
                            q = null) : q && (q.Lk(E),
                            tM(q),
                            JG(q, function () {
                                q && (vg(q),
                                    tM(q),
                                    T && Dl(m.chart.chartType))
                            })), !1;
                x && (a = r.x > Q && CM(B, x),
                    r = $(document.elementFromPoint(r.x, r.y)),
                    r = r.is(".element.chart") ? r : r.parents(".element.chart"),
                    a && q && r.length ? (a = r.data("canvaElement"),
                        r.removeClass("chartElement--droppable"),
                        a && (r = a.serialize(),
                            LG(a, q.serialize()),
                            I.register(new Y(HM, {
                                elementIndex: a.ea(),
                                pageIndex: a.ha().ea(),
                                "new": a.serialize(),
                                old: r
                            })),
                            wg(a)),
                        p(),
                        x.remove(),
                        q = null) : a && q ? (q.setPosition(V.Y(), V.N()),
                        q.appendTo(E),
                        AG(q, function () {
                            q && (vg(q),
                                T && Dl(m.chart.chartType))
                        }),
                        wg(q),
                        p(),
                        x.remove()) : (x.addClass("returning"),
                        x.one("transitionend", g).css("left", h.left).css("top", h.top).css("width", k).css("height", l)))
            }
        }

        function d(a) {
            return {
                x: void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
                y: void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY
            }
        }
        if (a.which == J.wh || a.ctrlKey)
            return !0;
        var e = $(this),
            g = e.parents("li").data("chart-name"),
            h = e.offset(),
            k = e.width(),
            l = e.height(),
            m = JSON.parse(JSON.stringify(wm[g])),
            n = G.hb(),
            g = m.width,
            p = m.height,
            r = Lg(G.pb().tb),
            u = .75 * r.D(),
            v = u / g * p;
        v > .75 * r.F() && (v = .75 * r.F(),
            u = v / p * g);
        var y = u * W,
            q = v * W,
            x = null,
            E = G.Oa(),
            g = ah(H),
            B = g.$el,
            K = g.$el.find(".page__content").offset(),
            C = d(a),
            N = {
                x: (C.x - h.left) / k,
                y: (C.y - h.top) / l
            },
            Q = document.getElementById("objectPanel").getBoundingClientRect().right,
            M = Math.abs(C.x - Q),
            ca = new Po($(document));
        ca.on("mousemove|touchmove", b).on("mouseup|touchend", c);
        var V = null,
            ra = Xg(),
            Ka = {};
        return FM
    }

    function IL(a) {
        function b(a) {
            function b() {
                h = e.clone(!1);
                h.appendTo("#content").css("top", u).css("left", r).addClass("clone draggableGridItem dragging");
                e.css("visibility", "hidden")
            }
            var c = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            if (null == h)
                if (aM(ca)) {
                    var d = rn(C, N, c, a);
                    if (300 < d || 60 > d)
                        Q = !0,
                        b();
                    else
                        return !0
                } else
                    c - C > J.Rc && (Q = !0,
                        b());
            null != h && (a = Math.min(1, Math.sqrt(Math.pow(c - C, 2) + Math.pow(a - N, 2)) / M),
                a = c <= C ? 0 : a,
                c = 2 + (m - 2) * a,
                d = y + (K - y) * a,
                h.css("width", v + (B - v) * a).css("height", d),
                d = u + (E - u) * a,
                h.css("left", r + (x - r) * a).css("top", d),
                h.find("\x3e .rows, \x3e .columns, .item \x3e .content").css("left", c / 2).css("right", c / 2).css("top", c / 2).css("bottom", c / 2));
            return !1
        }

        function c() {
            p.xa().forEach(function (a) {
                if (a instanceof eB) {
                    for (var b = a.Zf(), c, d = !0, e = 0 >= a.N() && 0 >= a.Y() && 0 === a.eb() && a.D() >= p.D() && a.F() >= p.F(), g = 0; g !== b; g++)
                        if (c = a.al(g).mediaId) {
                            d = !1;
                            break
                        }
                    d && e && (eM(a),
                        a.remove())
                }
            })
        }

        function d(a) {
            function g(a) {
                function b(a) {
                    this == a.target && $(this).off("animationend", b).remove()
                }
                this == a.target && ($(this).off("transitionend", g).on("animationend", b).addClass("disappearing"),
                    e.css("visibility", ""))
            }

            function k() {
                e.css("opacity", 0);
                setTimeout(function () {
                    e.one("transitionend", function () {
                        $(this).removeClass("reappearing")
                    }).css("visibility", "").addClass("reappearing").css("opacity", "")
                }, J.Qc)
            }
            a = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            Q ? a >= x ? (jJ(),
                n.yd(q),
                c(),
                n.appendTo(p),
                wg(n),
                vg(n),
                kJ(),
                k(),
                h.remove()) : (h.addClass("returning").on("transitionend", g),
                parseInt(h.css("left"), 10) == Math.floor(r) && parseInt(h.css("top"), 10) == Math.floor(u) ? h.trigger("transitionend") : h.css("left", r).css("top", u).css("width", v).css("height", y)) : (jJ(),
                n.yd(q),
                c(),
                n.Lk(p),
                tM(n),
                vg(n),
                kJ());
            ca.off("mousemove|touchmove", b).off("mouseup|touchend", d)
        }
        if (a.which == J.wh || a.ctrlKey)
            return !0;
        $("#search").blur();
        bh();
        var e = $(a.currentTarget),
            g = e.offset(),
            h = null,
            k = e.parents("li").data("grid-name"),
            l = $.extend(!0, [], vm[k].items),
            m = (vm[k].spacing || J.dC) * W,
            n = new eB({
                items: l
            }),
            p = G.Oa(),
            k = H.Oa(),
            l = $("#canvaDocument \x3e .inner").offset(),
            k = Rg(k).translate(l.left, l.top),
            r = g.left,
            u = g.top,
            v = e.width(),
            y = e.height(),
            g = 0 < Dp(p).filter(function (a) {
                return !a.vg()
            }).length,
            q = Cm(p.D(), p.F(), n.le(), g),
            g = q.clone().scale(W).translate(k.Y(), k.N()).round(),
            x = g.Y(),
            E = g.N(),
            B = g.D(),
            K = g.F(),
            C = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            N = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            Q = !1,
            M = x - C,
            ca = new Po($(document));
        ca.on("mousemove|touchmove", b).on("mouseup|touchend", d);
        return !1
    }

    function yM(a) {
        var b = 0,
            c = $(".gallery", a).data("columnData");
        if (c)
            b = dl(c.Da.map(function (a) {
                return a.wf
            }));
        else
            return b;
        b = dl(c.Da.map(function (a) {
            return a.height
        }));
        c = dl(c.Da.map(function (a) {
            return 0 == a.height ? 0 : a.height + a.wf
        }));
        return b = b != c ? c - b : mM(a)
    }

    function mM(a) {
        var b = 0,
            c = $(".infoPanel", a).clone();
        0 < c.length && (c.appendTo(a).addClass("doNotTransition").css("height", "").css("display", "none"),
            b = c.outerHeight(!0),
            c.remove());
        return b
    }

    function Ty(a, b) {
        if (0 != a.parents(".results.infinite").length) {
            var c = a.parents(".results").first(),
                d = a.is(".inlineFolderGroup") || c.is("#resultsLayout"),
                e = d ? a.find("p button") ? a.find("p").height() : 0 : xM(a),
                g = 0;
            $(".gallery li", a).each(function (a, b) {
                a = $(b);
                g = Math.max(g, a.data("originalTop") + a.height())
            });
            g += e;
            a.data("contentHeight", g);
            e = yM(a);
            b || d ? a.height(g + e) : a.height(Math.max(g + e, c.height()))
        }
    }

    function KL() {
        var a = $(this).parents(".results");
        clearTimeout(a.data("scrollTimer"));
        var b = setTimeout(function () {
            IM(a)
        }, 100);
        a.data("scrollTimer", b)
    }

    function AM(a, b) {
        var c = [];
        a = a.data("columnData");
        if (void 0 === a)
            return c;
        a = a.Da;
        for (var d = 0; d < a.length; d++) {
            for (var e = a[d].items, g = 0, h = !1, k = 0; k < e.length; k++) {
                var l = e[k],
                    m = l.data("originalTop") || 0,
                    m = (l.data("modifiedTop") || m) - m;
                0 == m || h || (g += m,
                    h = !0);
                g += l.height();
                if (g > b)
                    break
            }
            c = c.concat(e.slice(k))
        }
        return c.map(function (a) {
            return a.get(0)
        }).filter(function (a) {
            return null != a.parentNode
        })
    }

    function WL(a, b) {
        var c;
        c = a.find(".layer \x3e .inner \x3e .searchGroup").find(".gallery li").first();
        var d = a.hasClass("twoCol") ? 120 : 70;
        c = c.width() || d;
        a = Math.floor(Math.abs(a.find(".layer").width()) / c) || 1;
        return Math.max(18, a * Math.max(Math.ceil(b / c), 3))
    }

    function IM(a) {
        if (null != GL && !a.is(".modifying")) {
            var b = a.find(".layer").last(),
                c = b.find("\x3e .inner \x3e .searchGroup").last();
            0 < $(".searchLoaderHolder \x3e .searchLoader", a).length || 0 < $(".searchLoader", c).length || Tg().read(function (d) {
                var e = c.outerHeight() + c.offset().top - (a.offset().top + a.outerHeight());
                null != GL && GL.Fp >= GL.limit && e <= a.outerHeight() * J.vQ && d.write(function () {
                    var c = b.find("\x3e .inner \x3e .searchGroup .gallery li").length;
                    c > J.hC && JM(b, c - J.hC);
                    c = a.find(".searchLoaderHolder");
                    UL(c);
                    c.addClass("on");
                    GL.from += GL.limit;
                    GL.lW()
                })
            })
        }
    }

    function JM(a, b) {
        for (var c = a.parents(".results"), d = $(), e = $(), g = a.find("\x3e .inner \x3e .searchGroup").toArray(), h = 0; h < g.length && !(0 >= b); h++) {
            var k = $(g[h]),
                l = $(".gallery li", k);
            if (l.length < b)
                d = d.add(k),
                b -= l.length;
            else
                for (var k = b, m = 0; m < k; m++)
                    e = e.add(l[m]),
                    b--
        }
        b = e.parents(".searchGroup").add(d);
        g = $(".infoPanel", b);
        0 < g.length && (b.addClass("doNotTransition"),
            g.addClass("doNotTransition"),
            $(".close", g).click(),
            g.data("infoPanelPointer").remove(),
            g.remove(),
            b.removeClass("doNotTransition"));
        c.addClass("modifying");
        a.find("\x3e .inner \x3e .searchGroup").addClass("doNotTransition");
        b = a.scrollTop();
        var g = e.parents(".searchGroup"),
            n = 0;
        0 < g.length && (h = g.outerHeight(!0),
            l = $(".gallery", g),
            l.removeData("columnData"),
            e.remove(),
            Sy(l),
            n += h - g.outerHeight(!0));
        d.each(function () {
            n += $(this).outerHeight(!0)
        });
        d.remove();
        g = a.find("\x3e .inner \x3e .searchGroup .infoPanel");
        0 < g.length && g.addClass("doNotTransition").css("top", parseInt(g.css("top"), 10) - n).removeClass("doNotTransition");
        a.scrollTop(Math.max(0, b - n));
        a.find("\x3e .inner \x3e .searchGroup").removeClass("doNotTransition");
        c.removeClass("modifying")
    }

    function xM(a) {
        return 0 == a.length ? 0 : $(".gallery, .noResults", a).offset().top - a.offset().top
    }

    function KM(a) {
        a = a.find("\x3e .inner \x3e .searchGroup").last();
        return oM(a) + a.outerHeight(!0)
    }

    function oM(a) {
        return 0 == a.length ? 0 : a.parents(".layer").scrollTop() + a.position().top
    }

    function LM(a, b) {
        if (null != a && 0 != b.length) {
            var c = b.toArray();
            a.Da.forEach(function (a) {
                c.forEach(function (b) {
                    var c = a.items.map(function (a) {
                        return a.get(0)
                    }).indexOf(b); -
                    1 >= c || (a.items.splice(c, 1),
                        a.height -= $(b).height(),
                        void 0 !== $(b).data("modifiedTop") && 1 <= c && void 0 === a.items[c - 1].data("modifiedTop") && (a.wf = 0))
                })
            })
        }
    }

    function nM(a) {
        var b = a.find(".layer").last().scrollTop();
        a = a.height();
        return b + a
    }

    function TL() {
        var a = $("#objectPanel \x3e menu \x3e li.on").index();
        return $("#objectPanel \x3e .content \x3e .results").eq(a)
    }

    function MM() {
        window.location.reload();
        return !1
    }

    function NM(a, b) {
        $("#savingErrorCode").text("");
        $(".warningPanel" + b).one("animationend", function () {
            $(this).removeClass("on off")
        }).addClass("off");
        OM();
        return !1
    }

    function ML() {
        return NM.call(this, 0, "#someoneElseEditing")
    }

    function NL() {
        return NM.call(this, 0, "#inReview")
    }

    function OL() {
        return NM.call(this, 0, "#touchDevice")
    }

    function PM() {
        $("#inReview").addClass("on");
        QM()
    }

    function RM(a) {
        $("#outOfSync").is(".on") || (SM(),
            QM(),
            T && Al(T, a, sp().toString()),
            $("#outOfSync").removeClass("off").addClass("on"),
            $("#outOfSync button").on("click", MM))
    }

    function TM(a, b) {
        $("#savingError").is(".on") || $("#outOfSync").is(".on") || (T && Al(T, a, sp().toString(), b),
            $("#savingError").removeClass("off").addClass("on"),
            $("#savingError button").on("click", MM),
            Tb && UM())
    }

    function SM() {
        $("#savingError").is(".on") && ($("#savingError").removeClass("on").addClass("off"),
            OM())
    }

    function tM(a, b) {
        var c = "other";
        a instanceof eB ? c = "grid" : a instanceof aB ? c = "image" : a instanceof Ko && (c = "image:svg");
        T && El(c, b ? b.G() : null, b ? WJ(b) : null)
    };

    function VM() {
        this.xd = [];
        this.Dv = [];
        this.Km = [];
        this.SN = this.DP = !1
    }
    f = VM.prototype;
    f.trigger = Backbone.Events.trigger;
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    _.extend(VM.prototype, Backbone.Events);
    VM.prototype.register = function (a) {
        if (a.data["new"] && a.data.old && JSON.stringify(a.data["new"]) == JSON.stringify(a.data.old) || this.DP || this.SN)
            return !1;
        var b = a instanceof WM;
        0 < this.Km.length ? this.Km[this.Km.length - 1].push(a) : (this.xd.push(a),
            this.Dv = [], !b && G.trigger("change"));
        return !0
    };

    function XM() {
        var a = I;
        return a.xd.length ? a.xd[a.xd.length - 1] : null
    }

    function jJ() {
        var a = I,
            b = new WM;
        a.register(b);
        a.Km.push(b)
    }

    function kJ() {
        var a = I;
        if (0 == a.Km.length)
            throw Error("mismatched number of .endGrouping calls");
        var b = a.Km.pop(); -
        1 !== a.xd.indexOf(b) && 0 === b.getLength() && a.xd.splice(a.xd.indexOf(b), 1);
        0 == a.Km.length && G.trigger("change")
    }

    function LK(a, b) {
        var c = I;

        function d(a) {
            var b = [];
            a instanceof Y ? b.push(a) : a instanceof WM && a.xd.forEach(function (a) {
                b = b.concat(d(a))
            });
            return b
        }

        function e(a, b, c) {
            a.mediaId === b.mediaId && a.mediaVersion === b.mediaVersion && (a.mediaId = c.mediaId,
                a.mediaVersion = c.mediaVersion)
        }
        c = c.xd.map(d).concat(c.Dv.map(d));
        [].concat.apply([], c).forEach(function (c) {
            switch (c.Vb) {
                case YM:
                    e(c.data["new"], a, b);
                    e(c.data.old, a, b);
                    break;
                case ZM:
                case $M:
                    e(c.data, a, b)
            }
        })
    }

    function aN(a) {
        var b = [];
        if (a instanceof WM)
            a = a.xd,
            a.forEach(function (a) {
                a = aN(a);
                b = b.concat(a)
            }),
            2 === b.length && 2 == a.length && a[0] instanceof Y && a[1] instanceof Y && a[0].Vb == ZM && a[1].Vb == YM && (b = aN(a[0]));
        else if (a.Vb != $M && (a instanceof Y || a instanceof bN)) {
            var c = a.data.elementIndex;
            G.ia[a.data.pageIndex].xa().forEach(function (a) {
                a.ea() == c && b.push(a)
            })
        }
        return _.uniq(b)
    }

    function cN() {
        this.Vb = null;
        this.data = {}
    }
    cN.prototype.vn = function () {
        throw Error("classes that inherit from Operation must implement .perform");
    };
    cN.prototype.invert = function () {
        throw Error("classes that inherit from Operation must implement .invert");
    };

    function dN(a) {
        return $.extend(!0, {}, a)
    }

    function WM() {
        this.xd = []
    }
    WM.prototype = new cN;
    WM.prototype.vn = function () {
        this.xd.forEach(function (a) {
            a.vn()
        })
    };
    WM.prototype.invert = function () {
        var a = new WM;
        this.xd.reverse();
        this.xd.forEach(function (b) {
            a.push(b.invert())
        });
        this.xd.reverse();
        return a
    };
    WM.prototype.push = function (a) {
        this.xd.push(a)
    };
    WM.prototype.getLength = function () {
        return this.xd.length
    };
    var No = 1,
        $M = 2,
        ZM = 3,
        YM = 5,
        kM = 7,
        jM = 8,
        fM = 9,
        HM = 16;

    function Y(a, b) {
        this.Vb = a;
        this.data = b
    }
    Y.prototype = new cN;
    Y.prototype.vn = function () {
        Oo();
        var a = G.ia[this.data.pageIndex],
            b = a.xa().length,
            c;
        switch (this.Vb) {
            case ZM:
                c = tg($.extend(!0, {}, this.data));
                break;
            case 4:
            case kM:
            case jM:
                c = a.elements[this.data.oldElementIndex] || null;
                break;
            default:
                c = a.elements[this.data.elementIndex] || null
        }
        if (!c)
            throw Error("error performing operation on non-existent element");
        var d, e;
        switch (this.Vb) {
            case No:
                a = this.data["new"];
                null != a.left && c.wb(a.left);
                null != a.top && c.rb(a.top);
                null != a.rotation && c.Hl(a.rotation);
                null != a.flipOrientation && c.Cs(a.flipOrientation);
                null != a.transparency && c.Il(a.transparency);
                null != a.borderWidth && fD(c, a.borderWidth);
                null != a.spacing && c.gq(a.spacing);
                null != a.padding && c.dB(a.padding);
                null != a.verticalAlignment && (c.te = a.verticalAligment);
                c.setSize(null == a.width ? c.D() : a.width, null == a.height ? c.F() : a.height, this.data.proportionalSetSize);
                null != a.transformDependentData && c.yW(a.transformDependentData);
                break;
            case 11:
                a = this.data["new"];
                d = c.So(this.data.placeholderIndex);
                a.filter ? NH(gC(d), a.filter) || WH(d, a.filter) : XH(d);
                break;
            case 10:
                a = this.data["new"];
                null != a.link && lB(c, a.link);
                break;
            case $M:
                c.remove();
                break;
            case 4:
                d = this.data.elementIndex;
                this.data.oldElementIndex < d && d++;
                b = a.xa().length;
                d = Math.max(Math.min(b, d), 0);
                e = a.elements[d] || null;
                d == b ? c.appendTo(a) : e && c.insertBefore(e);
                break;
            case ZM:
                d = this.data.elementIndex;
                var g = this.data.groupElementIndex,
                    h = this.data.groupIndex;
                e = $.extend(!0, {}, this.data);
                delete e.groupIndex;
                delete e.groupElementIndex;
                c = tg(e);
                if (!c)
                    throw Error("bad element template while performing operation of type" + this.Vb.toString());
                d = Math.max(Math.min(b, d), 0);
                e = a.elements[d] || null;
                if (void 0 !== g) {
                    var k = a.elements[g] || null;
                    if (!k)
                        throw Error("group could not be found for operation type " + this.Vb.toString());
                    k.yw();
                    FE(k, c, h);
                    c.Iu() ? (a = function m(a) {
                            a === c && (k.Oq(c),
                                S.off("elementLoaded", m),
                                S.off("elementLoadingError", m))
                        },
                        S.on("elementLoaded", a),
                        S.on("elementLoadingError", a)) : k.Oq(c)
                } else
                    d == b ? c.appendTo(a) : e && c.insertBefore(e);
                break;
            case YM:
                c.fq(this.data.placeholderIndex, this.data["new"]);
                break;
            case 6:
                a = c.Qy(this.data.placeholderIndex);
                c.As(a);
                a = this.data["new"];
                d = cm(a.imageBox);
                e = cm(a.placeholderBox);
                c instanceof aB ? a.cropped ? (al(c, e),
                    c.El(d),
                    c.Sq(),
                    c.wb(a.left),
                    c.rb(a.top)) : (c.wb(a.left),
                    c.rb(a.top),
                    c.za(d.D()),
                    c.oa(d.F()),
                    al(c, e),
                    c.El(d),
                    c.jH = !1,
                    c.yk = !1,
                    c.O().find("img").css("transform", "").css("width", "").css("height", "")) : (c.El(d),
                    c.Sq());
                break;
            case kM:
                Ep(c);
                AB(a, c, this.data.elementIndex);
                this.data.backgroundColor && c.ce(0, this.data.backgroundColor);
                break;
            case jM:
                iC(c);
                AB(a, c, this.data.elementIndex);
                break;
            case fM:
                d = this.data["new"];
                a = d.index;
                d.placementData ? c.fq(a, d.placementData) : (d = gh(d.color),
                    c.ce(a, d));
                break;
            case 12:
                c.ib[this.data.placeholderIndex].Cs(this.data["new"].flipOrientation);
                break;
            case 13:
                b = this.data.childRange;
                g = this.data.elements;
                e = $.extend(!0, {}, this.data);
                e.elements = [];
                d = this.data.elementIndex;
                c = new iB(e);
                AB(a, c, d);
                if (2 === b.length)
                    for (d = b[0],
                        e = 0; d <= b[1]; d++,
                        e++)
                        if (h = a.elements[d] || null)
                            h.setPosition(g[e].left, g[e].top),
                            h.setSize(g[e].width, g[e].height),
                            h.Il(g[e].transparency),
                            h.Hl(g[e].rotation),
                            c.addElement(h),
                            c.O().find(".elements").append(h.O());
                break;
            case 14:
                eN(c);
                break;
            case 15:
                c.Nr(this.data["new"].data);
                c.render({
                    vN: !0
                });
                break;
            case HM:
                LG(c, $.extend(!0, {}, this.data["new"]));
                break;
            default:
                throw Error("cannot perform unknown operation type " + this.Vb.toString());
        }
    };
    Y.prototype.invert = function () {
        function a(a) {
            var b = a.elementIndex;
            a.elementIndex = a.oldElementIndex;
            a.oldElementIndex = b
        }
        var b = dN(this.data);
        switch (this.Vb) {
            case No:
            case 11:
            case 6:
            case YM:
            case fM:
            case 10:
            case 12:
            case 15:
            case HM:
                return b["new"] = this.data.old,
                    b.old = this.data["new"],
                    new Y(this.Vb, b);
            case ZM:
            case $M:
                return new Y(this.Vb == ZM ? $M : ZM, b);
            case 4:
                return a(b),
                    new Y(this.Vb, b);
            case kM:
                return a(b),
                    new Y(jM, b);
            case jM:
                return a(b),
                    new Y(kM, b);
            case 13:
                return new Y(14, b);
            case 14:
                return new Y(13, b);
            default:
                throw Error("cannot invert unknown operation type " + this.Vb.toString());
        }
    };

    function iN(a, b) {
        this.Vb = a;
        this.data = b
    }
    iN.prototype = new cN;
    iN.prototype.vn = function () {
        Oo();
        var a = null;
        1 == this.Vb ? (a = $.extend(!0, {}, this.data),
            a = new qp(G, a)) : a = G.ia[this.data.pageIndex];
        switch (this.Vb) {
            case 5:
                a = G.ia[this.data.oldPageIndex];
            case 1:
                Fp(G, a, this.data.pageIndex);
                break;
            case 2:
                a.xa().forEach(function (a) {
                    jN(a)
                });
                Hp(G, a);
                break;
            case 4:
                kN(a, this.data["new"]);
                break;
            default:
                throw Error("cannot perform unknown operation type " + this.Vb.toString());
        }
    };
    iN.prototype.invert = function () {
        var a = dN(this.data);
        switch (this.Vb) {
            case 1:
            case 2:
                return new iN(1 == this.Vb ? 2 : 1, a);
            case 4:
                return a["new"] = this.data.old,
                    a.old = this.data["new"],
                    new iN(this.Vb, a);
            case 5:
                var b = a.pageIndex;
                a.pageIndex = a.oldPageIndex;
                a.oldPageIndex = b;
                return new iN(this.Vb, a);
            default:
                throw Error("cannot invert unknown operation type " + this.Vb.toString());
        }
    };

    function lN(a, b) {
        return -1 < [4, 1].indexOf(a.Vb || -1) && a.data.pageIndex === b
    }

    function bN(a, b) {
        this.Vb = a;
        this.data = b
    }
    bN.prototype = new cN;
    bN.prototype.vn = function () {
        function a() {
            var a = b instanceof iB ? b.xa()[c] : b;
            a && (void 0 !== d.height && a.oa(),
                void 0 !== d.width && a.za(d.width))
        }
        var b = G.ia[this.data.pageIndex].elements[this.data.elementIndex] || null;
        if (!b)
            throw Error("operation element index out of bounds " + this.data.elementIndex);
        switch (this.Vb) {
            case 1:
                var c = this.data.textIndex,
                    d = this.data["new"];
                b.Wi(c, d, a);
                break;
            default:
                throw Error("cannot perform unknown operation type " + this.Vb.toString());
        }
    };
    bN.prototype.invert = function () {
        var a = dN(this.data);
        switch (this.Vb) {
            case 1:
                return a["new"] = this.data.old,
                    a.old = this.data["new"],
                    new bN(this.Vb, a);
            default:
                throw Error("cannot invert unknown operation type " + this.Vb.toString());
        }
    };

    function mN(a, b) {
        this.Vb = a;
        this.data = b
    }
    mN.prototype = new cN;
    mN.prototype.vn = function () {
        var a = this.data["new"],
            b, c;
        switch (this.Vb) {
            case 1:
                b = a.doctypeSpec ? np(a.doctypeSpec) : null;
                c = qq(a.docType);
                G.resize(c, b);
                break;
            case 2:
                b = a.doctypeSpec ? np(a.doctypeSpec) : null;
                c = qq(a.docType);
                G.CP(a.model, c, b);
                break;
            default:
                throw Error("cannot perform unknown document operation type " + this.Vb.toString());
        }
    };
    mN.prototype.invert = function () {
        var a = dN(this.data);
        a["new"] = this.data.old;
        a.old = this.data["new"];
        switch (this.Vb) {
            case 1:
                return new mN(2, a);
            case 2:
                return new mN(1, a);
            default:
                throw Error("cannot invert unknown operation type " + this.Vb.toString());
        }
    };
    (function (a) {
        a.path = {};
        var b = {
            rotate: function (a, b) {
                var e = b * Math.PI / 180;
                b = Math.cos(e);
                e = Math.sin(e);
                return [b * a[0] - e * a[1], e * a[0] + b * a[1]]
            },
            scale: function (a, b) {
                return [b * a[0], b * a[1]]
            },
            add: function (a, b) {
                return [a[0] + b[0], a[1] + b[1]]
            },
            o1: function (a, b) {
                return [a[0] - b[0], a[1] - b[1]]
            }
        };
        a.path.WY = function (c) {
            c.start = a.extend({
                angle: 0,
                length: .3333
            }, c.start);
            c.end = a.extend({
                angle: 0,
                length: .3333
            }, c.end);
            this.UF = [c.start.x, c.start.y];
            this.VF = [c.end.x, c.end.y];
            var d = b.o1(this.VF, this.UF),
                e = b.scale(d, c.start.length),
                d = b.scale(d, -1),
                d = b.scale(d, c.end.length),
                e = b.rotate(e, c.start.angle);
            this.fV = b.add(this.UF, e);
            d = b.rotate(d, c.end.angle);
            this.gV = b.add(this.VF, d);
            this.c0 = function (a) {
                return a * a * a
            };
            this.d0 = function (a) {
                return 3 * a * a * (1 - a)
            };
            this.e0 = function (a) {
                return 3 * a * (1 - a) * (1 - a)
            };
            this.f0 = function (a) {
                return (1 - a) * (1 - a) * (1 - a)
            };
            this.css = function (a) {
                var b = this.c0(a),
                    c = this.d0(a),
                    d = this.e0(a);
                a = this.f0(a);
                var e = {};
                e.x = this.x = this.UF[0] * b + this.fV[0] * c + this.gV[0] * d + this.VF[0] * a + .5 | 0;
                e.y = this.y = this.UF[1] * b + this.fV[1] * c + this.gV[1] * d + this.VF[1] * a + .5 | 0;
                e.left = e.x + "px";
                e.top = e.y + "px";
                return e
            }
        };
        a.fx.step.path = function (b) {
            var d = b.end.css(1 - b.pos);
            null != d.l5 && a.cssHooks.transform.set(b.elem, "rotate(" + Math.atan2(d.q9 - d.y, d.l5 - d.x) + ")");
            b.elem.style.top = d.top;
            b.elem.style.left = d.left
        }
    })(jQuery);

    function fp(a, b, c, d) {
        this.ka = a;
        this.qN = 0;
        this.qP = 23;
        this.sI = "";
        a = this.u = c;
        a.Cd || (a.Cd = new Ue(a.config));
        this.Cd = a.Cd;
        this.Ei = b;
        this.ja = d
    }

    function nN(a) {
        a.preventDefault();
        a.stopPropagation();
        return !1
    }
    var oN = [];
    [
        [642, 800, "https://static.canva.com/static/images/onboarding/lion-0.png"],
        [200, 106, "https://static.canva.com/static/images/onboarding/lion-1.png"],
        [192, 200, "https://static.canva.com/static/images/onboarding/lion-2.png"],
        [200, 77, "https://static.canva.com/static/images/onboarding/lion-3.png"],
        [165, 200, "https://static.canva.com/static/images/onboarding/lion-4.png"],
        [141, 200, "https://static.canva.com/static/images/onboarding/lion-5.png"],
        [200, 124, "https://static.canva.com/static/images/onboarding/lion-6.png"],
        [149, 200, "https://static.canva.com/static/images/onboarding/lion-7.png"],
        [191, 200, "https://static.canva.com/static/images/onboarding/lion-8.png"],
        [150, 200, "https://static.canva.com/static/images/onboarding/lion-9.png"],
        [200, 129, "https://static.canva.com/static/images/onboarding/lion-10.png"],
        [129, 200, "https://static.canva.com/static/images/onboarding/lion-11.png"],
        [200, 154, "https://static.canva.com/static/images/onboarding/lion-12.png"],
        [200, 174, "https://static.canva.com/static/images/onboarding/lion-13.png"],
        [200, 70, "https://static.canva.com/static/images/onboarding/lion-14.png"],
        [124, 200, "https://static.canva.com/static/images/onboarding/lion-15.png"],
        [200, 176, "https://static.canva.com/static/images/onboarding/lion-16.png"],
        [200, 132, "https://static.canva.com/static/images/onboarding/lion-17.png"],
        [200, 149, "https://static.canva.com/static/images/onboarding/lion-18.png"]
    ].forEach(function (a, b) {
        var c = "Monboarding" + b;
        0 === b && (c = "M-YUM-LION");
        a = _.extend({}, new UJ, {
            Jb: function () {
                return ""
            },
            id: c,
            G: function () {
                return c
            },
            files: {
                UH: {
                    width: a[0],
                    height: a[1],
                    url: a[2]
                },
                ex: {
                    width: a[0],
                    height: a[1],
                    url: a[2]
                }
            }
        });
        oN.push(a)
    });

    function pN() {
        return {
            SCREEN: {
                Aa: function () {
                    return "https://static.canva.com/static/images/onboarding/lion-0.png"
                }
            },
            THUMBNAIL: {
                Aa: function () {
                    return "https://static.canva.com/static/images/onboarding/lion-0.png"
                }
            }
        }
    }

    function qN(a, b, c) {
        c(200, {
            Va: function () {
                return {
                    getVersion: function () {
                        return 0
                    },
                    Dc: function () {
                        return pN()
                    }
                }
            }
        });
        return new kk
    }
    f = fp.prototype;
    f.go = function () {
        rN(this)
    };

    function sN(a, b, c, d) {
        function e() {
            var c = g.shift();
            c === a.sI && (c = "\x3cbr\x3e");
            h += c;
            b(h);
            0 < g.length ? window.setTimeout(e, 250 + Math.floor(100 * Math.random())) : window.setTimeout(d, 250);
            return !1
        }
        var g = c.split(""),
            h = "";
        b("");
        e()
    }

    function tN() {
        for (var a = [], b = 0; 5 !== b; b++)
            a[b] = new Image,
            a[b].crossOrigin = "anonymous";
        a[0].src = "https://static.canva.com/static/images/onboarding/lion-0.png";
        a[1].src = "https://static.canva.com/static/images/onboarding/lion-1.png";
        a[2].src = "https://static.canva.com/static/images/onboarding/lion-2.png";
        a[3].src = "https://static.canva.com/static/images/onboarding/lion-3.png";
        a[4].src = "https://static.canva.com/static/images/onboarding/lion-4.png"
    }
    f.pU = function () {
        var a = this;
        tN();
        WebFont.load({
            google: {
                families: ["Abril+Fatface", "Carter+One"]
            },
            active: function () {
                a.next()
            },
            inactive: function () {
                a.next()
            }
        })
    };

    function uN(a) {
        a.ER = !1;
        $("body").addClass("modalContentVisible modalContentBlurAndDarkenVisible");
        $("body \x3e .mask").addClass("on fullscreenMessageMask");
        $("body \x3e .mask").on("click", function () {
            vN(a).then(function () {
                    a.ER || wN(a)
                }
                .bind(a))
        })
    }

    function vN(a) {
        $("body").removeClass("modalContentVisible modalContentBlurAndDarkenVisible");
        var b = $("body \x3e .mask");
        b.addClass("off");
        $("video.for-onboarding").remove();
        a.Mb.addClass("disappearing");
        return P.delay(500).then(function () {
            b.removeClass("fullscreenMessageMask off on white");
            a.Mb.remove()
        })
    }
    f.AW = function () {
        uN(this);
        var a = Ve(this.Cd);
        jp() && !this.U0 && xN() && (a = this.Cd.format("twentyThreeSecondOnboardingChooseText"));
        this.Mb = $('\x3cdiv id\x3d"onboarding-23second-dialog" class\x3d"for-onboarding onboarding-dialog"\x3e\x3cdiv class\x3d"onboarding-dialog-text"\x3e\x3cspan class\x3d"onboarding-time"\x3e' + this.qP + '\x3c/span\x3e\x3cspan class\x3d"onboarding-description"\x3e' + this.Cd.format("twentyThreeSecondOnboardingDescription") + '\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"onboarding-dialog-icons"\x3e\x3cspan class\x3d"onboarding-search"\x3e\x3cspan class\x3d"icon"\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding_search.png"/\x3e\x3c/span\x3e' + a + '\x3c/span\x3e\x3cspan class\x3d"onboarding-drag"\x3e\x3cspan class\x3d"icon"\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding_hand.png"/\x3e\x3c/span\x3e' + We(this.Cd) + '\x3c/span\x3e\x3cspan class\x3d"onboarding-publish"\x3e\x3cspan class\x3d"icon"\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding_publish.png" /\x3e\x3c/span\x3e' + Xe(this.Cd) + '\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"onboarding-dialog-actions"\x3e\x3cspan class\x3d"onboarding-show-me-how"\x3e\x3cbutton class\x3d"button onboarding-show-me-how-button"\x3e' + this.Cd.format("twentyThreeSecondOnboardingShowMeHowButtonText") + '\x3c/button\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding_hand_clicking.png" width\x3d"0" height\x3d"0" style\x3d"display:none"/\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding_hand_grabbing.png" width\x3d"0" height\x3d"0" style\x3d"display:none"/\x3e');
        this.Mb.appendTo("body");
        this.next()
    };
    f.GX = function () {
        var a = this,
            b = $(".onboarding-dialog");
        $(".onboarding-show-me-how-button").click(function () {
            T && T.track("onboarding", {
                status: "viewed",
                variant: jp() ? "layouts" : "regular",
                experiment: "none",
                experimentVariant: "none"
            });
            a.ER = !0;
            var c = $(".onboarding-drag .icon"),
                d = c.clone(),
                e = $(".onboarding-show-me-how-button"),
                g = e.clone(),
                h = e.clone(),
                e = e.offset(),
                c = c.find("img").offset();
            d.attr("id", "onboarding-active-hand").addClass("for-onboarding").appendTo("body").offset(c);
            g.attr("id", "onboarding-active-button").addClass("for-onboarding").appendTo("body").offset(e);
            h.attr("id", "onboarding-active-button-width").addClass("for-onboarding").appendTo("body");
            d = a.qP - 1;
            $("#onboarding-23second-dialog .onboarding-time").text(d.toString());
            b.fadeOut(2E3);
            a.next()
        })
    };
    f.ZV = function () {
        $("body").append(this.pI);
        this.pI.on("click", nN);
        var a = this.qP - 2;
        window.setTimeout(function () {
            $("#onboarding-23second-dialog .onboarding-time").text(a.toString())
        }, 1E3);
        this.next(1500)
    };
    f.mS = function () {
        var a = G.Rb().length;
        bh();
        1 === a && G.Rb()[0].isEmpty() ? (this.zW = !1,
            this.page = G.Rb()[0]) : (this.zW = !0,
            a = new qp(G, G.xg()),
            Fp(G, a, 0),
            this.page = a);
        this.next()
    };
    f.DU = function () {
        function a() {
            c++;
            2 === c && b.next(300)
        }
        var b = this,
            c = 0,
            d = $("#onboarding-active-hand"),
            e = $("#onboarding-active-button");
        $(".onboarding-drag .icon").remove();
        $("body \x3e .mask").click();
        (function () {
            e.css({
                width: e.width(),
                height: "46px"
            });
            e.text("");
            P.delay(J.Na.t_).then(function () {
                e.animate({
                    width: yN(Ve(b.Cd)),
                    "border-radius": "25px",
                    padding: "0 15px 0 35px"
                }, {
                    duration: 600,
                    queue: !1,
                    complete: a
                });
                d.animate({
                    left: 1 * e.offset().left - 15,
                    top: 1 * e.offset().top - 4
                }, {
                    duration: 600,
                    queue: !1,
                    complete: a
                })
            })
        })()
    };
    f.WT = function () {
        var a = $("#onboarding-active-hand"),
            b = $("#onboarding-active-button"),
            c = $('\x3cdiv class\x3d"for-onboarding" id\x3d"onboarding-active-hand-morphed"\x3e\x3c/div\x3e'),
            d = a.offset();
        c.offset(d);
        c.appendTo(a.parent());
        a.appendTo(c);
        a.css({
            top: 0,
            left: 0
        });
        b.appendTo(c);
        b.css({
            top: "4px",
            left: "15px"
        });
        this.next()
    };
    f.s6 = function () {
        $("#onboarding-active-button").text(Ve(this.Cd));
        this.next()
    };
    f.p6 = function () {
        zN(We(this.Cd));
        this.next()
    };
    f.q6 = function () {
        this.nB || zN(this.Cd.format("twentyThreeSecondOnboardingEditText"));
        this.next()
    };
    f.r6 = function () {
        $("#onboarding-active-button").text("Choose");
        this.next()
    };

    function AN() {
        $("#onboarding-active-hand img").attr("src", "https://static.canva.com/static/images/onboarding_hand_grabbing.png")
    }

    function BN() {
        $("#onboarding-active-hand img").attr("src", "https://static.canva.com/static/images/onboarding_hand.png")
    }

    function CN() {
        var a = $("#onboarding-active-hand img");
        a.attr("src", "https://static.canva.com/static/images/onboarding_hand_clicking.png");
        window.setTimeout(function () {
            a.attr("src", "https://static.canva.com/static/images/onboarding_hand.png")
        }, 300)
    }
    f.NEXT = "next";

    function DN(a, b) {
        return 500 + Math.floor(.8 * Math.sqrt(Math.pow(a.left - b.left, 2) + Math.pow(a.top - b.top, 2)))
    }

    function zN(a, b) {
        var c = $("#onboarding-active-button");
        b = _.extend({
            width: yN(a)
        }, b);
        c.text(a);
        c.animate(b, {
            duration: 500,
            queue: !1
        })
    }

    function yN(a) {
        return $("#onboarding-active-button-width").text(a).width()
    }

    function EN(a, b, c) {
        var d = 2 / 3,
            e = c.mt || {
                x: 0,
                y: 0
            },
            g = c.callback || function () {},
            h = $("#onboarding-active-hand-morphed"),
            k = h.offset(),
            l = {
                top: 1 * $(b).offset().top + 1 * $(b).height() / 3 + e.y,
                left: 1 * $(b).offset().left + 1 * $(b).width() / 3 + e.x
            };
        c && c.iS && "BR" === c.iS && (l = {
            top: 1 * $(b).offset().top + 1 * $(b).height() + e.y,
            left: 1 * $(b).offset().left + 1 * $(b).width() + e.x
        });
        b = DN(k, l);
        l = new $.path.WY({
            start: {
                x: 1 * h.offset().left,
                y: 1 * h.offset().top,
                angle: 10,
                length: .1
            },
            end: {
                x: l.left,
                y: l.top,
                angle: -30,
                length: .1
            }
        });
        c.callback === a.NEXT && (g = function () {
            a.next(300)
        });
        c.kL && window.setTimeout(function () {
            c.kL()
        }, d * b);
        h.animate({
            path: l
        }, b, g)
    }
    f.z1 = function () {
        EN(this, "#search", {
            callback: this.NEXT
        })
    };
    f.GZ = function () {
        CN();
        $("#search").focus();
        this.next(600)
    };
    f.f6 = function () {
        function a() {
            var a = $("#resultsSearch"),
                a = $(".layer \x3e .inner \x3e .searchGroup", a).last(),
                c = $(".photoGallery", a),
                g = 0,
                h = !1;
            YL(a);
            oN.forEach(function (a) {
                var d = $('\x3cli class\x3d"newSearch loading"\x3e\x3ca href\x3d"#"\x3e\x3cimg data-screen-url\x3d"' + a.files.UH.url + '"data-screen-width\x3d"' + a.files.UH.width + '"data-screen-height\x3d"' + a.files.UH.height + '"src\x3d"' + a.files.ex.url + '"width\x3d"' + a.files.ex.width + '"height\x3d"' + a.files.ex.height + '"/\x3e\x3c/a\x3e\x3c/li\x3e');
                d.appendTo(c);
                $("img", d).on("load", function () {
                    g++;
                    !h && 5 <= g && (b.next(),
                        h = !0);
                    d.removeClass("loading")
                });
                d.data("result", a)
            });
            c.addClass("photoGallery");
            Sy(c);
            Sb.xs = b.xs
        }
        var b = this,
            c = $("#search");
        this.xs = Sb.xs;
        Sb.xs = function () {
            return new P(function () {})
        };
        sN(this, function (a) {
            c.val(a)
        }, this.Cd.format("twentyThreeSecondOnboardingSearchTerm"), function () {
            YL($("#resultsSearch .layer \x3e .inner \x3e .searchGroup"));
            eL(b.u, !0, a)
        })
    };
    f.w1 = function () {
        zN(We(this.Cd));
        EN(this, "#resultsSearch .searchGroup .photoGallery li:first-child", {
            callback: this.NEXT
        })
    };
    f.ue = function () {
        this.next(600)
    };
    f.H_ = function () {
        var a = this,
            b = $("#onboarding-active-hand-morphed"),
            c = $("section .page.selected"),
            c = {
                top: c.offset().top - 40,
                left: c.offset().left - 42
            },
            d = DN(b.offset(), c),
            e = Math.floor(.8 * G.Oa().F()) * W,
            g = Math.floor(.8025 * e);
        AN();
        a.gr = $("#resultsSearch .searchGroup .photoGallery li:first-child img").clone();
        a.gr.removeAttr("width");
        a.gr.removeAttr("height");
        a.gr.css({
            position: "absolute",
            top: "-34px",
            left: "-27px",
            "z-index": "9000",
            height: "95px"
        });
        b.append(a.gr);
        a.gr.animate({
            height: e + "px",
            width: g + "px",
            left: (-180 * W - 42) / 2 + "px",
            top: (-180 * W - 40) / 2 + "px"
        }, {
            duration: d,
            queue: !1
        });
        b.animate(c, {
            duration: d,
            queue: !1,
            complete: function () {
                a.next(300)
            }
        })
    };
    f.K_ = function () {
        var a = this,
            b = $("#resultsSearch .photoGallery li:first-child img"),
            b = tg(iM(b)),
            c = Math.floor(.8 * G.Oa().F());
        b.setSize(Math.floor(.8025 * c), c);
        b.setPosition(-180, -180);
        b.appendTo(G.Oa());
        vg(b);
        BN();
        a.gr.fadeOut(200, function () {
            a.gr.remove()
        });
        a.next(300)
    };
    f.j6 = function () {
        var a;
        a = G.Oa().xa().filter(function (a) {
            return a instanceof aB
        })[0];
        wg(a);
        this.next(200)
    };
    f.L5 = function () {
        function a() {
            BN();
            g.removeClass("on");
            b.next(300)
        }
        var b = this,
            c = $("#onboarding-active-hand-morphed"),
            d = G.Oa(),
            e = 800 / 642,
            g = $(".handle.br"),
            h = d.hb()[0],
            k = H.$el.offset(),
            l = hC(H, this.page).Ba(),
            d = .78 * d.D(),
            m = d * e,
            n = {
                left: Math.floor(k.left + l.Y() + d * W * .78),
                top: Math.floor(k.top + l.N() + m * W * .78)
            },
            p = h.D();
        h.F();
        EN(this, ".selectionBox .handle.br", {
            mt: {
                x: -20,
                y: -12
            },
            callback: function () {
                var b = c.offset();
                AN();
                g.addClass("on");
                P.delay(300).then(function () {
                    c.animate(n, {
                        duration: 1E3,
                        queue: !1,
                        complete: a,
                        progress: function () {
                            var a = (c.offset().left - b.left) / W + p,
                                d = a * e;
                            $(".selectionBox").css({
                                height: d * W + "px",
                                width: a * W + "px"
                            });
                            h.setSize(a, d)
                        }
                    })
                })
            }
        })
    };
    f.B1 = function () {
        var a = this;
        zN(this.Cd.format("twentyThreeSecondOnboardingAddText"));
        EN(this, "#objectPanel \x3e menu li.text a", {
            callback: function () {
                $("#objectPanel \x3e menu li.text a").css("color", "#00f7ff");
                a.next(300)
            }
        })
    };
    f.KZ = function () {
        CN();
        $("#objectPanel \x3e menu li.text a").click().css("color", "");
        this.next(200)
    };
    f.u1 = function () {
        var a = this;
        EN(this, "#objectPanel .textControls [data-style\x3dtitle]", {
            mt: {
                x: 0,
                y: 16
            },
            callback: function () {
                a.next(300)
            }
        })
    };
    f.oZ = function () {
        function a() {
            var a = h.Ib();
            h.Zj(a, "Carter One")
        }

        function b() {
            S.off("elementLoaded:text", b);
            c()
        }

        function c() {
            bh();
            CN();
            a();
            h.appendTo(e);
            vg(h);
            wg(h);
            window.setTimeout(function () {
                a()
            }, 100);
            window.setTimeout(function () {}, 200);
            d.next(200)
        }
        var d = this,
            e = G.Oa(),
            g = {
                width: e.D() / 2,
                html: "\x26nbsp;",
                fontFamily: "Carter One",
                fontSize: function (a, b, c, d) {
                    var e = document.createElement("canvas").getContext("2d");
                    if (null == e)
                        return c;
                    e.font = c * J.oi * 14 / 100 + "px " + d;
                    a = e.measureText(a).width;
                    isFinite(b) && 0 < b && (10 < b - a || a > b) && (c *= b / a);
                    return Math.floor(c)
                }(Ye(this.Cd), 380, 120, "Carter One"),
                color: "#222",
                left: e.D() - 400,
                top: Math.floor(.5 * e.F() - 112.5)
            };
        S.on("elementLoaded:text", b);
        var h = new up(g)
    };
    f.t7 = function () {
        var a = this,
            b = G.Oa().hb()[0];
        b.O().trigger("click");
        sN(this, function (a) {
            VA(b).html(a + '\x3cspan class\x3d"onboarding-fake-caret"\x3e\x3c/span\x3e')
        }, Ye(this.Cd), function () {
            VA(b).css({
                border: "none"
            });
            $(".onboarding-fake-caret").remove();
            a.next()
        })
    };
    f.IU = function () {
        var a = Xe(this.Cd),
            b = {
                left: -yN(a) - 25,
                padding: "0 39px 0 17px"
            };
        $("#designToolsText a").css({
            color: "#fff"
        });
        zN(a, b);
        EN(this, ".editorActionExport", {
            callback: this.NEXT,
            kL: function () {
                $(".editorActionExport").addClass("fakeHoverState")
            }
        })
    };
    f.xR = function () {
        CN();
        $(".editorActionExport").trigger("click");
        this.next(600)
    };
    f.HU = function () {
        var a = this;
        zN(Xe(this.Cd), {
            left: "22px",
            padding: "0 20px 0 31px"
        });
        EN(this, ".exportPopOver__downloadButton", {
            callback: function () {
                a.next(600)
            },
            kL: function () {
                $(".editorActionExport").removeClass("fakeHoverState");
                $(".exportPopOver__downloadButton").addClass("fakeHoverState")
            }
        })
    };
    f.vR = function () {
        CN();
        var a = this;
        $(".exportPopOver__downloadButton").addClass("fakeActiveState");
        window.setTimeout(function () {
            $(".modalContentMask").click();
            a.next(200)
        }, 300);
        $(document.body).addClass("modalContentVisible modalContentBlurAndDarkenVisible")
    };
    f.OG = function () {
        var a = ah(H).$el.clone(),
            b = a.find(".page__content");
        a.find(".fixed").remove();
        a.css({
            top: 0,
            left: 0
        });
        a.removeClass("selected");
        $("body \x3e .mask").addClass("on fullscreenMessageMask");
        this.Mb = $('\x3cdiv id\x3d"onboarding-outro-dialog" class\x3d"for-onboarding onboarding-dialog"\x3e\x3c/div\x3e');
        this.Mb.css({
            width: b.width() - 4 + "px",
            height: b.height() - 4 + "px"
        });
        this.Mb.append(a);
        this.Mb.appendTo("body");
        this.next()
    };
    f.xS = function () {
        var a = this;
        $("#onboarding-active-hand-morphed").fadeOut(1600, function () {
            a.next()
        })
    };
    f.FW = function () {
        var a = this,
            b = $(window).height() - a.Mb.offset().top,
            c = !1;
        $('\x3cdiv id\x3d"onboarding-go-dialog" class\x3d"for-onboarding onboarding-dialog"\x3e\x3cdiv class\x3d"onboarding-dialog-text"\x3e\x3cspan class\x3d"onboarding-go"\x3e' + this.Cd.format("twentyThreeSecondOnboardingNowText") + '\x3c/span\x3e\x3cspan class\x3d"onboarding-go-description"\x3e' + this.Cd.format("twentyThreeSecondOnboardingYourTurnText") + "\x3c/span\x3e\x3c/div\x3e").appendTo("body");
        var d = $('\x3cdiv id\x3d"onboarding-exit-hand" class\x3d"for-onboarding"\x3e\x3cdiv class\x3d"exit-hand open"\x3e\x3cdiv class\x3d"exit-hand-fingers"\x3e\x3c/div\x3e\x3cdiv class\x3d"exit-hand-thumb"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
        d.css({
            bottom: "-280px"
        });
        d.appendTo("body");
        d.animate({
            bottom: "0"
        }, 900, function () {
            var e = 1 * a.Mb.css("margin-top").replace(/px/, "") - b;
            d.animate({
                bottom: e + "px"
            }, {
                duration: 1800,
                Mk: "easeOutQuint",
                queue: !1
            });
            a.Mb.animate({
                "margin-top": b + "px"
            }, {
                duration: 1800,
                Mk: "easeOutQuint",
                queue: !1,
                complete: function () {
                    c || (a.next(1E3),
                        c = !0)
                }
            })
        })
    };

    function FN() {
        GL = null;
        $("#search").val("");
        $("#resultsSearch .searchGroup").removeData("search").css("height", "").find("ul").empty();
        $("#resultsSearch .searchGroup").find("h2").remove();
        $("#objectPanel .results").addClass("doNotTransition");
        window.setTimeout(function () {
            $("#search").blur();
            $("#objectPanel .results").removeClass("doNotTransition")
        }, J.Qc)
    }
    f.YV = function () {
        function a() {
            b.next()
        }
        var b = this;
        bh();
        !0 === this.zW ? (Hp(G, this.page),
            a()) : GN(b.page).then(a)
    };
    f.iO = function () {
        FN();
        this.next()
    };
    f.uR = function () {
        this.pI.remove();
        $("body \x3e .mask").removeClass("on white fullscreenMessageMask").addClass("off");
        $(".for-onboarding").remove();
        $("body").removeClass("onboarding-in-progress").removeClass("modalContentVisible modalContentBlurAndDarkenVisible");
        bh();
        this.next()
    };
    f.HV = function () {
        this.VY = Ub;
        this.a0 = Ab.Ox;
        this.pI = $("\x3cdiv id\x3d'block-everything'\x3e\x3c/div\x3e");
        this.Yu = ub.Yu;
        Ab.Ox = function () {
            return P.resolve(new gv({
                id: 1,
                jA: null,
                status: "COMPLETE"
            }))
        };
        Ub = function () {};
        ub.close();
        ub.Yu = function () {};
        G.off("change");
        this.next()
    };
    f.F0 = function () {
        this.UX = Bb.ac;
        Bb.ac = qN;
        Kg(vb, "M-YUM-LION", 0, pN());
        this.next()
    };
    f.P5 = function () {
        Bb.ac = this.UX;
        this.next()
    };

    function wN(a) {
        Ub = a.VY;
        Ab.Ox = a.a0;
        ub.Yu = a.Yu;
        HN(window.csession, window.cdoc);
        G.on("change", Vb)
    }
    f.hW = function () {
        $(".page.selected").removeClass("invisible-text");
        wN(this);
        this.next()
    };
    f.f5 = function () {
        $("#resultsLayout").data("view").gW();
        this.next()
    };
    f.onComplete = function () {
        S.trigger("onboarding:complete")
    };

    function IN(a) {
        a.order = [a.XV, a.pU, a.HV, a.AW, a.GX, a.iO, a.mS, a.ZV, a.DU, a.WT, a.s6, a.ue, a.z1, a.F0, a.GZ, a.f6, a.ue, a.w1, a.H_, a.K_, a.j6, a.L5, a.ue, a.B1, a.KZ, a.ue, a.u1, a.oZ, a.ue, a.t7, a.ue, a.IU, a.xR, a.ue, a.HU, a.vR, a.ue, a.OG, a.xS, a.ue, a.FW, a.ue, a.YV, a.uR, a.P5, a.iO, a.hW, a.x6, a.f5, a.onComplete]
    }
    f.jZ = function () {
        var a = $(".templateGallery li:not(.grid)").has(".price.free").first(),
            b = "canva-onboarding-layout-item-" + Math.floor(1E5 * Math.random());
        $(a).addClass(b);
        this.Gz = "." + b;
        this.next()
    };
    f.RY = function () {
        var a = new mp({}, gu(0, 0, "PIXELS"), this.u),
            a = new qp(a, {}),
            b = $(this.Gz).data("layoutItem");
        b && kN(a, ym(b.content), null, null, !0);
        this.next()
    };
    f.v1 = function () {
        this.$M = $(this.Gz);
        this.aN = $(this.Gz + " img");
        this.aE = $(this.Gz + " img").clone();
        EN(this, this.Gz, {
            callback: this.NEXT
        })
    };
    f.G_ = function () {
        var a = this,
            b = $("#onboarding-active-hand-morphed"),
            c = $("section .page.selected"),
            d = c.height() / 2 - Math.floor(Math.random() * c.height() / 6),
            e = c.height() / 2 + Math.floor(Math.random() * c.height() / 6),
            c = {
                top: c.offset().top + d,
                left: c.offset().left + e
            },
            d = DN(b.offset(), c),
            e = d / 4;
        AN();
        window.setTimeout(function () {
            a.aE.css("opacity", "0.5");
            $(".page.selected").addClass("hotspotHover")
        }, e);
        a.aN.parent().addClass("pickedUp");
        a.aE.css({
            position: "absolute",
            top: "-34px",
            left: "-27px",
            "z-index": "9000",
            width: $(".templateGallery li img").width() + "px",
            height: $(".templateGallery li img").height() + "px"
        });
        b.append(a.aE);
        b.animate(c, {
            duration: d,
            queue: !1,
            complete: function () {
                $(".page.selected").removeClass("hotspotHover");
                a.aN.parent().removeClass("pickedUp");
                a.next(300)
            }
        })
    };
    f.J_ = function () {
        function a() {
            S.off("pageLayoutLoaded", a);
            b.next()
        }
        var b = this;
        BN();
        this.aE.remove();
        S.on("pageLayoutLoaded", a);
        $(".page.selected").addClass("invisible-text");
        if (this.$M.find(".multiPageLayoutItem").length) {
            var c = this.$M.data("searchResult"),
                d = this.$M.parents(".results").data("view");
            c && JN(d, c, !0)
        } else
            this.aN.click()
    };

    function KN() {
        return "substantial-text-element"
    }
    f.HZ = function () {
        if (!this.nB) {
            var a = $("." + KN()),
                b = $("." + KN());
            a.hasClass("element") || (b = a.parents(".element"));
            b = b.data("canvaElement");
            CN();
            wg(b);
            a.hasClass("element") || (sJ(a, !0),
                LN(a, xc(this.u)),
                b.lb())
        }
        this.next()
    };
    f.G6 = function () {
        var a, b;
        if (!this.nB) {
            var c = $("." + KN());
            b = c.clone();
            b.find("br").replaceWith(this.sI);
            a = b.text().trim();
            var d;
            d = /\S\S/.test(a) ? a.split(/\s+/g) : a.split(/\s{2,}/g);
            2 > d.length ? (a = "",
                b = d[0] || "") : (b = d[d.length - 1],
                3 > b.length && (b = a.slice(a.lastIndexOf(d[d.length - 2]))),
                3 > b.length && (b = "!",
                    a += b),
                a = a.slice(0, a.lastIndexOf(b)),
                a = a.replace(new RegExp(this.sI, "g"), "\x3cbr\x3e"));
            this.fU = b;
            this.GS = a;
            c.children(".inner").html(this.GS)
        }
        $(".page.selected").removeClass("invisible-text");
        this.next()
    };
    f.s7 = function () {
        function a(a) {
            sN(b, function (a) {
                $(".onboarding-fake-caret").remove();
                c.children(".inner").html(b.GS + a + '\x3cspan class\x3d"onboarding-fake-caret"\x3e\x3c/span\x3e')
            }, b.fU, function () {
                $("#overlays .element.text.selected").css({
                    border: "none"
                });
                $(".onboarding-fake-caret").remove();
                a()
            })
        }
        if (this.nB)
            this.next();
        else {
            var b = this,
                c = $("." + KN());
            c.trigger("click");
            a(function () {
                bh();
                b.next()
            })
        }
    };
    f.Y4 = function () {
        if (1 > $(".page.selected .element.text,.page.selected .element.svg .text").length)
            this.nB = !0;
        else {
            var a = $(".page.selected .element.text,.page.selected .element.svg .text").first(),
                b = 0;
            $(".page.selected .element.text,.page.selected .element.svg .text").each(function () {
                var c = $(this).data("canvaElement");
                c.dd() > b && 0 < c.O().text().split("").length && (b = c.dd(),
                    a = $(this))
            });
            a.addClass(KN())
        }
        this.next()
    };
    f.A1 = function () {
        if (this.nB)
            this.next();
        else {
            var a = parseFloat($("." + KN()).css("font-size").replace("px", "")) * W,
                b = Math.floor(a / 2),
                a = Math.floor(a * this.fU.split("").length / 2);
            EN(this, "." + KN(), {
                iS: "BR",
                mt: {
                    x: -a,
                    y: -b
                },
                callback: this.NEXT
            })
        }
    };
    f.z6 = function () {
        $("#objectPanel li.layout a").click();
        this.next()
    };
    f.x6 = function () {
        $("#objectPanel li.elements a").click();
        this.next()
    };

    function jp() {
        return /[?&]layouts/g.test(window.location.search)
    }

    function xN() {
        return 1 <= $(".templateGallery li:not(.grid)").has(".price.free").length
    }

    function MN(a, b, c) {
        var d = c || 1;
        10 < d && (a.U0 = !0,
            b(!1));
        jp() ? 1 <= $(".templateGallery li").length ? b(xN()) : window.setTimeout(function () {
            MN(a, b, d + 1)
        }, 200 * d) : b(!1)
    }
    f.XV = function () {
        NN.UR();
        this.next()
    };
    f.next = function (a) {
        function b() {
            d.call(c)
        }
        var c = this,
            d = this.order[this.qN];
        d && d.call ? (this.qN++,
            a && !isNaN(parseInt(a, 10)) ? window.setTimeout(b, a) : b()) : c.next = function () {}
    };

    function rN(a) {
        a.qN = 0;
        jp() ? MN(a, function (b) {
            b ? a.order = [a.XV, a.pU, a.HV, a.AW, a.jZ, a.RY, a.GX, a.mS, a.ZV, a.DU, a.WT, a.r6, a.ue, a.v1, a.p6, a.ue, a.G_, a.J_, a.ue, a.Y4, a.G6, a.A1, a.ue, a.q6, a.HZ, a.ue, a.s7, a.ue, a.IU, a.xR, a.ue, a.HU, a.vR, a.ue, a.OG, a.xS, a.ue, a.FW, a.ue, a.YV, a.uR, a.iO, a.hW, a.z6, a.onComplete] : IN(a);
            a.next()
        }) : (IN(a),
            a.next())
    };

    function ep(a, b, c) {
        this.document = a;
        this.config = b;
        this.AS = "//www.facebook.com/plugins/like.php?href\x3dhttps%3A%2F%2Fwww.facebook.com%2Fcanva\x26amp;width\x3d450\x26amp;height\x3d65\x26amp;colorscheme\x3dlight\x26amp;layout\x3dbox_count\x26amp;action\x3dlike\x26amp;show_faces\x3dfalse\x26amp;send\x3dfalse\x26amp;appId\x3d" + encodeURIComponent(window.facebookConfig.appId);
        this.ag = c
    }
    ep.prototype.listenTo = Backbone.Events.listenTo;

    function ON() {
        WebFont.load({
            google: {
                families: ["Yellowtail"]
            },
            active: function () {},
            inactive: function () {}
        })
    }

    function PN(a) {
        var b = a.config.kh();
        switch (b) {
            case "FREE_NEW_USER":
                return b = QN(G.Jb()),
                    a = {
                        fbUrl: a.AS,
                        twitterText: a.ag.format("magicButtonFreeNewTwitterText", b),
                        congratulations: a.ag.format("magicButtonFreeNewCongratulations"),
                        youHaveCompleted: a.ag.format("magicButtonFreeNewYouHaveCompleted", b),
                        startYourOwnDesign: a.ag.format("magicButtonFreeNewStartYourOwnDesign")
                    },
                    b = _.template('\x3cdiv id\x3d"magic-button-dialog"\x3e\x3cdiv id\x3d"magic-button-dialog-congratulations"\x3e\x3c%- congratulations %\x3e\x3c/div\x3e\x3cdiv id\x3d"magic-button-dialog-now-ready"\x3e\x3c%- youHaveCompleted %\x3e\x3c/div\x3e\x3cbutton class\x3d"button" id\x3d"magic-button-dialog-done"\x3e\x3c%- startYourOwnDesign %\x3e\x3c/button\x3e\x3cdiv id\x3d"magic-button-dialog-share"\x3e\x3ciframe src\x3d"\x3c%\x3d fbUrl %\x3e" scrolling\x3d"no" frameborder\x3d"0" style\x3d"border:none; overflow:hidden; width:50px; height:61px;" allowTransparency\x3d"true"\x3e\x3c/iframe\x3e\x3ciframe allowtransparency\x3d"true" frameborder\x3d"0" scrolling\x3d"no" src\x3d"https://platform.twitter.com/widgets/tweet_button.html?url\x3d%20\x26text\x3d\x3c%\x3d encodeURIComponent(twitterText) %\x3e\x26counturl\x3dhttps://www.canva.com\x26count\x3dvertical" style\x3d"width:56px; height:62px;"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
                    $(b(a));
            case "DESIGN_TUTORIAL":
                return b = QN(G.Jb()),
                    a = {
                        fbUrl: a.AS,
                        twitterText: a.ag.format("magicButtonTutorialTwitterText", b),
                        congratulations: a.ag.format("magicButtonTutorialCongratulations"),
                        youHaveCompleted: a.ag.format("magicButtonTutorialYouHaveCompleted", b),
                        startYourOwnDesign: a.ag.format("magicButtonTutorialStartYourOwnDesign")
                    },
                    b = _.template('\x3cdiv id\x3d"magic-button-dialog"\x3e\x3cdiv id\x3d"magic-button-dialog-congratulations"\x3e\x3c%- congratulations %\x3e\x3c/div\x3e\x3cdiv id\x3d"magic-button-dialog-now-ready"\x3e\x3c%- youHaveCompleted %\x3e\x3c/div\x3e\x3cbutton class\x3d"button" id\x3d"magic-button-start-design"\x3e\x3c%- startYourOwnDesign %\x3e\x3c/button\x3e\x3cdiv id\x3d"magic-button-dialog-share"\x3e\x3ciframe src\x3d"\x3c%\x3d fbUrl %\x3e" scrolling\x3d"no" frameborder\x3d"0" style\x3d"border:none; overflow:hidden; width:50px; height:61px;" allowTransparency\x3d"true"\x3e\x3c/iframe\x3e\x3ciframe allowtransparency\x3d"true" frameborder\x3d"0" scrolling\x3d"no" src\x3d"https://platform.twitter.com/widgets/tweet_button.html?url\x3d%20\x26text\x3d\x3c%\x3d encodeURIComponent(twitterText) %\x3e\x26counturl\x3dhttps://www.canva.com\x26count\x3dvertical" style\x3d"width:56px; height:62px;"\x3e\x3c/iframe\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
                    $(b(a));
            case "C4W_INVITED_NEW_USER":
                return a = {
                        congratulations: a.ag.format("magicButtonInvitedUserCongratulations"),
                        gettingTheHangHtml: a.ag.format("magicButtonInvitedUserGettingTheHang"),
                        visitTeamSpace: a.ag.format("magicButtonInvitedUserVisitTeamSpace")
                    },
                    b = _.template('\x3cdiv id\x3d"magic-button-dialog"\x3e\x3cdiv id\x3d"magic-button-dialog-congratulations"\x3e\x3c%- congratulations %\x3e\x3c/div\x3e\x3cdiv id\x3d"magic-button-dialog-now-ready"\x3e\x3c%\x3d gettingTheHangHtml %\x3e\x3c/div\x3e\x3ca class\x3d"button" id\x3d"magic-button-dialog-done" href\x3d"/brand"\x3e\x3c%- visitTeamSpace %\x3e\x3c/a\x3e\x3c/div\x3e'),
                    $(b(a));
            default:
                throw Error("onboarding mode " + b + " not handled");
        }
    }

    function RN(a) {
        function b() {
            P.all([Uy(1E3), Qi(c.fa, c.url + "/" + encodeURIComponent(ub.Fc()) + "/complete", null).get(0).then(eo)]).finally(function () {
                window.location = "/"
            })
        }
        var c = new bo;
        $("body").addClass("modalContentVisible modalContentBlurAndDarkenVisible");
        $("body \x3e .mask").removeClass("off").addClass("on fullscreenMessageMask");
        PN(a).on("animationend", function () {
            $("body").on("click", b);
            $("body \x3e .mask").on("click", b)
        }).appendTo("body")
    }

    function SN(a) {
        return 0 < a.document.xa().filter(function (a) {
            return "magic-button" == a.O().attr("id")
        }).length
    }
    ep.prototype.bR = function () {
        function a(a) {
            a.stopPropagation();
            a.preventDefault();
            RN(b);
            return !1
        }
        var b = this,
            c = b.document;
        b.bR = function () {};
        if (!SN(b)) {
            b.page = new qp(c, c.xg());
            b.page.sU();
            Fp(c, this.page, c.wc(), !1);
            $("#canvaDocument").addClass("deletePageDisabled");
            this.config.kh() && $("#canvaDocument").addClass("pageControlsDisabled");
            hC(H, b.page).$el.css("background-color", "#20c4cb");
            var c = {
                    html: TN(this),
                    width: 460,
                    justification: "center"
                },
                c = new up(c),
                d = c.O();
            d.attr("id", "magic-button");
            d.on("mousedown", a);
            d.on("touchstart", a);
            b.page.addElement(c, !1, !1);
            var d = (b.page.D() - c.D()) / 2,
                e = (b.page.F() - c.F()) / 2;
            c.setPosition(d, e)
        }
    };

    function TN(a) {
        a = {
            tutorialComplete: a.ag.format("magicButtonTutorialCompleteButton")
        };
        var b = _.template("\x3cstrong id\x3d'magic-button-text'\x3e\x3c%- tutorialComplete %\x3e \x26nbsp;\x3cspan id\x3d'magic-button-text-triangle'\x3e\x26#9656;\x3c/span\x3e\x3c/strong\x3e");
        return $(b(a))
    }
    ep.prototype.go = function () {
        ON();
        this.bR()
    };

    function qp(a, b) {
        this.Nb = a;
        this.cd = null;
        this.elements = [];
        this.height = 0;
        this.ta = b.layout && new xm(b.layout);
        this.rs = this.An = this.Tp = null;
        this.$L = this.rh = this.selected = !1;
        this.yx = null;
        this.xG = this.uC = !1;
        this.width = 0;
        this.zh(b, !0);
        fC(this)
    }
    _.extend(qp.prototype, Backbone.Events);
    f = qp.prototype;
    f.trigger = Backbone.Events.trigger;
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.sU = function () {
        this.rh = !0
    };

    function UN(a, b) {
        a.Tp = b;
        a.trigger("change:preview")
    }

    function VN(a) {
        a.Tp = null;
        a.trigger("change:preview")
    }

    function WN(a) {
        var b = a.elements.filter(function (a) {
                return a.rh || a.Ac() && a.Ub && !a.Ub() ? !1 : !0
            }),
            c = !1,
            d = XM();
        d instanceof iN && (c = lN(d, a.ea()));
        return 0 < b.length && !c
    }

    function kN(a, b, c, d, e) {
        function g(a) {
            a.forEach(function (a) {
                var b = a.G(),
                    c = a.getVersion();
                Kg(vb, b, c, a.OK())
            })
        }

        function h() {
            if (-1 !== k.ea() || e) {
                var a = k.ta;
                if (a === m || a && m && a.id === m.id && a.version === m.version)
                    VN(k),
                    k.zh(m.xg(), !1, e),
                    fC(k)
            } else
                k.xG = !1,
                k.uC = !1
        }
        var k = a,
            l = IK(Gb, Em(b)),
            m = b.clone();
        e || (m.za(a.D()),
            m.oa(a.F()));
        a.yx = a.yx || a.serialize();
        a.clear();
        a.ta = m;
        a.uC = !0;
        0 === l.length ? (a.zh(m.xg(), !1, e),
            fC(a)) : (a.xG = !0,
            c && UN(a, c),
            d && d.Ab() === kA ? kq(d.G()).then(g).catch($.noop).finally(h) : lK(vb, l, !1, h))
    }
    f.zh = function (a, b, c) {
        function d(a) {
            0 <= r.indexOf(a) || (r.push(a),
                0 < u.length && e())
        }

        function e() {
            var b = 0 === u.filter(l).length,
                d = 0 === u.filter(h).filter(l).length,
                e = 0 < u.filter(k).length;
            d && e && !p ? (p = !0,
                XN(u, a)) : b ? g() : (window.clearTimeout(v),
                v = window.setTimeout(function () {
                    c || S.trigger("pageTimeoutWaitingForElements");
                    g()
                }, n))
        }

        function g() {
            m.uC = !1;
            m.$L = !1;
            S.off("elementLoaded", d);
            S.off("elementLoadingError", d);
            window.clearTimeout(v);
            m.elements.forEach(function (a) {
                a.vx = !1
            });
            m.trigger("unpacked");
            S.trigger("pageLayoutLoaded", m);
            b || (m.trigger("change"),
                c || m.Nb && m.Nb.trigger("change"))
        }

        function h(a) {
            return !a.xb()
        }

        function k(a) {
            return a.xb()
        }

        function l(a) {
            return -1 === r.indexOf(a)
        }
        var m = this,
            n = 3E4;
        this.Nb && !this.Nb.qL && (n += 5E3 * this.Nb.wc());
        this.$L = !0;
        this.yx = null;
        this.xG = !1;
        b || this.trigger("willchange");
        void 0 !== a.dpi && (this.cd = a.dpi);
        void 0 !== a.width && this.za(a.width);
        void 0 !== a.height && this.oa(a.height);
        var p = !1,
            r = [],
            u = [];
        S.on("elementLoaded", d);
        S.on("elementLoadingError", d);
        u = u.concat(function (a) {
            return a ? a.map(tg).filter(Boolean) : []
        }(a.elements));
        u.forEach(function (a) {
            a.appendTo(this)
        }, this);
        var v = window.setTimeout(g, n);
        0 < u.length ? window.setTimeout(function () {
            e()
        }, 1) : g();
        a.resizeContentBox ? (this.An = cm(a.resizeContentBox),
            this.rs = YN(this, this.An)) : this.rs = this.An = null
    };

    function ZN(a) {
        if (a.An && a.rs) {
            var b = YN(a, a.An);
            if (em(b, a.rs))
                return a.An;
            a.An = null;
            a.rs = null
        }
        return null
    }

    function YN(a, b) {
        var c = a.Ba(),
            d = b.clone();
        a.xa().forEach(function (a) {
            if (!(a.rh || a.Ac() || a.vg())) {
                var b = a.Ba();
                if (!(a instanceof eB && qm(b, c))) {
                    a = Math.min(d.Y(), b.Y());
                    var h = Math.min(d.N(), b.N()),
                        k = Math.max(d.kb(), b.kb()) - a,
                        b = Math.max(d.Ha(), b.Ha()) - h;
                    d.left = a;
                    d.top = h;
                    d.width = k;
                    d.height = b
                }
            }
        });
        return d
    }
    f.resize = function (a) {
        var b = $N({
            zo: ZN(this),
            Pe: a,
            page: this
        });
        this.zh(a.xg(), !0);
        fC(this);
        this.trigger("resize");
        this.rs = (this.An = b) && YN(this, b)
    };
    f.CP = function (a) {
        this.clear();
        this.zh(a, !0);
        fC(this);
        this.trigger("resize")
    };

    function XN(a, b) {
        function c(a) {
            S.trigger("elementLoaded", a);
            S.trigger("elementLoaded:group", a)
        }
        a.forEach(function (d, e) {
            if (d.xb()) {
                var g = b.elements[e].childRange;
                if (Op(g)) {
                    for (var h = g[0]; h <= g[1]; h++)
                        if (!b.elements[h] || b.elements[h].groupIndex !== e) {
                            c(d);
                            d.remove();
                            return
                        }
                    for (h = g[0]; h <= g[1]; h++)
                        e = CE(rB(d), rB(a[h])),
                        d.addElement(a[h]),
                        a[h].Il(e.Ob),
                        a[h].setPosition(e.left, e.top),
                        a[h].Hl(e.rotation),
                        d.O().find(".elements").append(a[h].O()),
                        d.mb();
                    c(d)
                } else
                    c(d),
                    d.remove()
            }
        })
    }
    f.Hi = function () {
        var a = new Co;
        this.elements.forEach(function (b) {
            b.Hi().og().forEach(function (b) {
                Fo(a, b)
            })
        });
        return a
    };
    f.clone = function () {
        return new qp(null, this.serialize())
    };
    f.serialize = function () {
        return this.xG && this.yx ? this.yx : this.uC && this.ta ? this.ta.xg() : aO(this)
    };

    function aO(a) {
        function b(a) {
            return a.elementIndex
        }
        var c = a.elements.filter(function (a) {
            return !a.rh
        }).map(function (a) {
            return a.serialize()
        }).filter(Boolean);
        c.forEach(function (a, b) {
            var c = a.elementIndex - b;
            a.elementIndex = b;
            c && a.elements && a.elements.forEach(function (a) {
                a.elementIndex -= c
            })
        });
        c.filter(function (a) {
            return -1 < Object.keys(a).indexOf("elements")
        }).forEach(function (a) {
            var d = a.elementIndex,
                e = {
                    Ob: a.transparency,
                    rotation: a.rotation,
                    top: a.top,
                    left: a.left,
                    width: a.width,
                    height: a.height
                },
                l = a.elements.map(b),
                m = [];
            c.forEach(function (a) {
                var b = l.indexOf(a.elementIndex);
                0 <= b && (l.splice(b, 1),
                    m.push(a.elementIndex),
                    b = DE(e, {
                        Ob: a.transparency,
                        rotation: a.rotation,
                        top: a.top,
                        left: a.left,
                        width: a.width,
                        height: a.height
                    }),
                    a.transparency = b.Ob,
                    a.rotation = b.rotation,
                    a.top = b.top,
                    a.left = b.left,
                    a.groupIndex = d)
            });
            if (0 !== m.length && 0 === l.length) {
                var n = Math.min.apply(null, m),
                    p = Math.max.apply(null, m);
                a.childRange = [n, p]
            } else
                a.childRange = [-1, -1];
            delete a.elements
        });
        var d = {
            elements: c,
            width: a.width,
            height: a.height
        };
        a.cd && (d.dpi = a.cd);
        var e = a.ta && a.ta.serialize();
        e && (d.layout = e);
        (a = ZN(a)) && (d.resizeContentBox = a.serialize());
        return d
    }
    f.clear = function () {
        var a;
        for (VN(this); this.xa().length;)
            (a = this.elements[0] || null) && this.Ui(a);
        this.elements = [];
        this.rs = this.An = null
    };
    f.xa = function () {
        return this.elements
    };
    f.hb = function () {
        return this.xa().filter(function (a) {
            return a.zf()
        })
    };

    function Dp(a) {
        return a.xa().filter(function (a) {
            return a.Ac()
        })
    }

    function bO(a) {
        return a.xa().filter(function (a) {
            return a.vg()
        })
    }

    function cO(a, b) {
        function c(a) {
            return !a.Ac()
        }

        function d(a) {
            return !(a instanceof fB)
        }
        var e = b instanceof Array ? b : [b],
            e = e.filter(c).filter(d);
        return 0 === e.length ? e : a.xa().filter(function (a) {
            return !wB(a)
        }).filter(c).filter(function (a) {
            return !a.vg()
        }).filter(d).filter(function (a) {
            return -1 === e.indexOf(a)
        }).filter(function (a) {
            return e.some(function (b) {
                return Sg(b.Ba(), a.Ba())
            })
        })
    }
    f.Ui = function (a, b) {
        b = b || {};
        for (var c = this.elements.indexOf(a), d = 0; d < this.elements.length; d++)
            if (this.elements[d].xb() && -1 !== this.elements[d].elements.indexOf(a)) {
                this.elements[d].Ui(a);
                break
            } -
        1 < c && (this.elements.splice(c, 1),
            a.remove(),
            b.B5 && 0 === this.elements.length && (this.ta = void 0),
            b.KW || this.trigger("element:remove", this, a, c, !!b.P8),
            (a.Ac() || a.vg()) && this.trigger("change:background", this))
    };

    function dO(a, b, c) {
        var d = a.elements.indexOf(b); -
        1 !== d && b.elements && 0 !== b.elements.length && b.xa().forEach(function (e) {
            d += 1;
            AB(a, e, d, !0);
            e.oe = b.oe;
            e.bq(a);
            !c && a.trigger("element:add", a, e, !1, !1);
            b.O().find(".elements").append(e.O())
        })
    }
    f.addElement = function (a, b, c) {
        this.elements.push(a);
        a.bq(this);
        dO(this, a);
        this.trigger("element:add", this, a, b, c);
        (a.Ac() || a.vg()) && this.trigger("change:background", this, a)
    };

    function eO(a) {
        return a.elements.filter(function (a) {
            return a.xb()
        }).map(function (b) {
            var c = b.xa().map(function (b) {
                return a.elements.indexOf(b)
            }).filter(function (a) {
                return -1 !== a
            });
            c.push(a.elements.indexOf(b));
            return [Math.min.apply(null, c), Math.max.apply(null, c)]
        })
    }

    function fO(a, b) {
        for (var c = 0; c !== a.elements.length; c++)
            if (a.elements[c].xb() && -1 !== a.elements[c].elements.indexOf(b))
                return a.elements[c]
    }

    function AB(a, b, c, d) {
        c = function (c) {
            var d = c;
            0 > d && (d = a.elements.length);
            (c = fO(a, b)) ? (d = Math.max(d, a.elements.indexOf(c)),
                d = Math.min(d, a.elements.indexOf(c) + c.xa().length)) : (d = Math.min(d, a.elements.length),
                eO(a).forEach(function (a) {
                    d > a[0] && d <= a[1] && (d = a[1] + 1)
                }));
            return d
        }(c);
        var e = a.elements.indexOf(b); -
        1 == e ? (a.elements.splice(c, 0, b),
            b.bq(a),
            dO(a, b, d), !d && a.trigger("element:add", a, b, !1, !1),
            (b.Ac() || b.vg()) && a.trigger("change:background", a, b)) : (a.elements.splice(c, 0, a.elements.splice(e, 1)[0]),
            a.trigger("element:move", a, b))
    }
    f.Y = function () {
        return 0
    };
    f.nc = qp.prototype.Y;
    f.N = function () {
        return 0
    };
    f.xc = qp.prototype.N;
    f.D = function () {
        return this.width
    };
    f.eh = qp.prototype.D;
    f.F = function () {
        return this.height
    };
    f.dh = qp.prototype.F;
    f.kb = function () {
        return this.Y() + this.D()
    };
    f.Ld = qp.prototype.kb;
    f.Ha = function () {
        return this.N() + this.F()
    };
    f.ud = qp.prototype.Ha;
    f.Ba = function () {
        return new U(this.Y(), this.N(), this.D(), this.F())
    };
    f.eb = function () {
        return 0
    };
    f.setSize = function () {};
    f.za = function (a) {
        this.ta && this.ta.za(a);
        this.width = a
    };
    f.oa = function (a) {
        this.ta && this.ta.oa(a);
        this.height = a
    };
    f.wb = function () {};
    f.rb = function () {};
    f.setPosition = function () {};

    function Gp(a, b) {
        a.Nb = b;
        fC(a)
    }
    f.ug = function () {
        var a = Dp(this);
        return 0 < a.length ? (a = a[a.length - 1],
            a.vd() && a.PK()) : !1
    };

    function IB(a) {
        a = Dp(a);
        return 0 < a.length ? a[a.length - 1].vd() : !0
    }
    f.$j = function (a) {
        var b;
        this.Nb && this.selected !== a && !this.rh && (a || (this.selected = !1),
            b = this.Nb.Oa(),
            a = a || this === b,
            b !== this && (b.selected = !a,
                b.trigger("change:selected", b, !a)),
            this.selected = a,
            this.trigger("change:selected", this, a))
    };
    f.zf = function () {
        return this.selected
    };
    f.remove = function () {
        this.elements.slice().forEach(function (a) {
            jN(a);
            a.remove()
        });
        this.Nb && Hp(this.Nb, this);
        this.Nb = null
    };

    function GN(a) {
        a.elements.forEach(function (a) {
            a.O().fadeOut()
        });
        return P.delay(400).then(function () {
            for (; 0 < a.elements.length;) {
                var b = a.elements[0];
                jN(b);
                b.O().remove();
                a.Ui(b)
            }
            a.elements = []
        })
    }
    f.ea = function () {
        return this.Nb ? Mo(this.Nb, this) : -1
    };
    f.st = function () {
        return ym(this.serialize())
    };

    function fC(a) {
        (function () {
            a.xa().slice(0).forEach(function (b) {
                b instanceof fB && a.Ui(b)
            })
        })();
        (function () {
            var b = a.pb();
            b && ku(b).forEach(function (b) {
                (b = tg(b)) && AB(a, b, 0)
            })
        })()
    }
    f.isEmpty = function () {
        return 1 > this.xa().filter(function (a) {
            return !a.rh
        }).length
    };
    f.pb = function () {
        var a = this.Nb;
        return a ? a.pb() : null
    };
    f.Iu = function () {
        return this.$L
    };

    function Dn(a, b) {
        this.gS = this.fS = this.eS = this.dS = this.Qw = this.xu = this.qO = this.rO = this.scrollHeight = this.scrollWidth = this.scrollTop = this.scrollLeft = 0;
        this.sH = this.BE = null;
        this.qX = !!b;
        this.HP = Tg(this);
        this.KP = Tg(this);
        this.XG = new gO({
            attributes: !0,
            attributeFilter: ["class", "style"],
            childList: !0,
            characterData: !1,
            subtree: !0
        });
        this.Yc = a;
        this.xj = $("\x3cdiv\x3e").addClass("scrollThumb");
        this.hk = $("\x3cdiv\x3e").addClass("scrollThumb");
        this.Ip = this.Ip.bind(this);
        this.IF = this.IF.bind(this);
        this.DF = this.DF.bind(this);
        this.FF = this.FF.bind(this);
        this.BF = this.BF.bind(this);
        this.CF = this.CF.bind(this);
        this.Wz = this.Wz.bind(this);
        this.Xz = this.Xz.bind(this);
        this.zF = this.zF.bind(this);
        this.AF = this.AF.bind(this)
    }
    f = Dn.prototype;
    f.trigger = Backbone.Events.trigger;
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.render = function () {
        this.Yc.addClass("scrollElement");
        $("\x3cdiv\x3e").addClass("scrollTrack hScrollTrack").append(this.xj).insertAfter(this.Yc);
        $("\x3cdiv\x3e").addClass("scrollTrack vScrollTrack").append(this.hk).insertAfter(this.Yc);
        hO(this);
        this.Yc.on("scroll", this.IF);
        this.Yc.on("transitionend", this.Ip);
        this.Yc.on("mouseenter", this.DF);
        this.Yc.on("mouseleave", this.FF);
        this.xj.on("mousedown", this.BF);
        this.hk.on("mousedown", this.CF);
        this.XG.on("attrModified", this.Ip);
        this.XG.on("subtreeModified", this.Ip);
        this.XG.observe(this.Yc);
        $("\x3cspan\x3e").appendTo(this.Yc).remove();
        $(window).on("resize", this.Ip);
        return this
    };
    f.remove = function () {
        iO(this.XG);
        this.Yc.off("scroll", this.IF);
        this.Yc.off("transitionend", this.Ip);
        this.Yc.off("mouseenter", this.DF);
        this.Yc.off("mouseleave", this.FF);
        this.xj.off("mousedown", this.BF);
        this.hk.off("mousedown", this.CF);
        $(window).off("resize", this.Ip);
        return this
    };

    function hO(a) {
        Tg(a).read(function (a) {
            var c = this.Yc.prop("clientWidth"),
                d = this.Yc.prop("offsetWidth"),
                e = this.Yc.prop("clientHeight"),
                g = this.Yc.prop("offsetHeight");
            a.write(function () {
                d > c && this.Yc.css("margin-right", c - d);
                g > e && this.Yc.css("margin-bottom", e - g);
                this.mb()
            })
        })
    }
    f.mb = function () {
        this.HP.read(this.wX)
    };
    f.wX = function () {
        var a = this.scrollWidth,
            b = this.scrollHeight,
            c = this.xu,
            d = this.Qw;
        this.scrollWidth = this.Yc.prop("scrollWidth");
        this.scrollHeight = this.Yc.prop("scrollHeight");
        this.rO = this.Yc.prop("clientWidth");
        this.qO = this.Yc.prop("clientHeight");
        this.xu = this.xj.parent().outerWidth();
        this.Qw = this.hk.parent().outerHeight();
        if (a !== this.scrollWidth || b !== this.scrollHeight || c !== this.xu || d !== this.Qw)
            this.scrollTop = this.scrollLeft = -1,
            this.HP.write(this.G5),
            this.KP.read(this.zX)
    };
    f.G5 = function () {
        var a = Math.round(this.Qw * this.qO / this.scrollHeight);
        this.xj.css("width", Math.round(this.xu * this.rO / this.scrollWidth) + "px");
        this.hk.css("height", a + "px");
        var a = this.rO < this.scrollWidth,
            b = this.qO < this.scrollHeight,
            c = a !== this.BE,
            d = b !== this.sH;
        c && (this.BE = a,
            this.xj.toggleClass("disabled", !a));
        d && (this.sH = b,
            this.hk.toggleClass("disabled", !b));
        this.qX && (c || d) && this.trigger("change:scrollability", this.BE, this.sH)
    };
    f.zX = function () {
        var a = this.scrollLeft,
            b = this.scrollTop;
        this.scrollLeft = this.Yc.scrollLeft();
        this.scrollTop = this.Yc.scrollTop();
        if (a !== this.scrollLeft || b !== this.scrollTop)
            this.KP.write(this.I5),
            this.qX && (this.BE || this.sH) && this.trigger("scroll", this.scrollLeft, this.scrollTop)
    };
    f.I5 = function () {
        var a = Math.round(this.Qw * this.scrollTop / this.scrollHeight);
        this.xj.css("transform", "translateX(" + Math.round(this.xu * this.scrollLeft / this.scrollWidth) + "px)");
        this.hk.css("transform", "translateY(" + a + "px)")
    };
    f.Ip = function () {
        this.HP.read(this.wX)
    };
    f.IF = function () {
        this.KP.read(this.zX)
    };
    f.DF = function () {
        this.xj.addClass("ready");
        this.hk.addClass("ready")
    };
    f.FF = function () {
        this.xj.removeClass("ready");
        this.hk.removeClass("ready")
    };
    f.BF = function (a) {
        0 === a.button && (this.dS = a.screenX,
            this.fS = this.scrollLeft,
            this.xj.addClass("active"),
            $(document).on("mousemove", this.Wz).on("mouseup", this.zF),
            a.preventDefault(),
            a.stopPropagation())
    };
    f.Wz = function (a) {
        this.Yc.scrollLeft(this.fS + Math.round((a.screenX - this.dS) * this.scrollWidth / this.xu))
    };
    f.zF = function (a) {
        this.Wz(a);
        this.xj.removeClass("active");
        $(document).off("mousemove", this.Wz).off("mouseup", this.zF)
    };
    f.CF = function (a) {
        0 === a.button && (this.eS = a.screenY,
            this.gS = this.scrollTop,
            this.hk.addClass("active"),
            $(document).on("mousemove", this.Xz).on("mouseup", this.AF),
            a.preventDefault(),
            a.stopPropagation())
    };
    f.Xz = function (a) {
        this.Yc.scrollTop(this.gS + Math.round((a.screenY - this.eS) * this.scrollHeight / this.Qw))
    };
    f.AF = function (a) {
        this.Xz(a);
        this.hk.removeClass("active");
        $(document).off("mousemove", this.Xz).off("mouseup", this.AF)
    };

    function jO() {
        this.query = "";
        this.i0 = []
    }

    function kO(a, b) {
        a.query = b;
        return a
    }
    jO.prototype.toString = function () {
        return (this.query ? [this.query] : []).concat(this.i0).map(function (a) {
            return a.toString()
        }).join(" AND ")
    };
    var ZL = null,
        tL = null,
        dL = !1,
        GL = null;

    function zL(a) {
        Wb = !1;
        Sb = new NJ(Hb, [new LJ]);
        $("#search").on("keypress", function (b) {
            return lO.call(this, b, a)
        });
        $("#search").on("keydown", mO);
        $("#search").on("keyup", mO)
    }

    function lO(a, b) {
        function c() {
            $("#objectPanel menu .elements a").click()
        }

        function d(a) {
            $("#resultsElements li.folderExpanded \x3e a:not([data-query\x3d" + a + "])").mousedown();
            setTimeout(function () {
                $("#resultsElements li:not(.folderExpanded) \x3e a[data-query\x3d" + a + "]").mousedown()
            }, 500);
            setTimeout(function () {
                $("#resultsElements \x3e .layer").animate({
                    scrollTop: $("#resultsElements a[data-query\x3d" + a + "]").parent().position().top
                }, J.Na.Zp)
            }, 900)
        }
        a.stopPropagation();
        if (13 == a.which) {
            a = $("#search");
            if (!a.val().match(/^\s*$/)) {
                var e = $("#objectPanel").find("menu");
                switch (a.val().toLowerCase()) {
                    case "grid":
                    case "grids":
                        c();
                        d("grids");
                        break;
                    case "chart":
                    case "charts":
                    case "graph":
                    case "graphs":
                    case "bar chart":
                    case "bar graph":
                    case "barchart":
                    case "bargraph":
                    case "pie chart":
                    case "piechart":
                    case "line chart":
                    case "linechart":
                    case "donut chart":
                    case "donutchart":
                    case "pie graph":
                    case "piegraph":
                    case "line graph":
                    case "linegraph":
                    case "donut graph":
                    case "donutgraph":
                        c();
                        d("charts");
                        break;
                    case "layout":
                    case "layouts":
                        e.find(".layout a").click();
                        a.select();
                        break;
                    case "text":
                    case "font":
                    case "fonts":
                        e.find(".text a").click();
                        a.select();
                        break;
                    case "bkground":
                    case "background":
                    case "backgrounds":
                        e.find(".backgrounds a").click();
                        a.select();
                        break;
                    case "upload":
                    case "uploads":
                        e.find(".uploads a").click();
                        a.select();
                        break;
                    default:
                        eL(b)
                }
            }
            return !1
        }
    }

    function eL(a, b, c) {
        function d() {
            r.animate({
                scrollTop: B - J.iC
            }, J.Na.Zp, function () {
                E.remove();
                if (ZL && ZL.isPending()) {
                    var a = TL(),
                        a = $(".inner \x3e .searchGroup", a.find(".layer")).last();
                    a.data("search") === GL && UL(a)
                }
                c && c()
            })
        }

        function e() {
            var a = $(".infoPanel", q);
            0 < a.length && (q.addClass("doNotTransition"),
                a.addClass("doNotTransition"),
                $(".close", a).click(),
                a.data("infoPanelPointer").remove(),
                a.remove(),
                q.removeClass("doNotTransition"));
            var b = nM(p),
                c = -1;
            $("\x3e .gallery \x3e li", q).each(function () {
                var a = $(this);
                x + a.data("originalTop") < b && (a.addClass("oldSearch"),
                    setTimeout(function () {
                        a.addClass("doNotTransition newSearch");
                        setTimeout(function () {
                            a.removeClass("doNotTransition newSearch oldSearch")
                        }, J.Qc)
                    }, ++c * J.Na.ev + J.Na.Tz))
            });
            setTimeout(function () {
                Wb = !1
            }, c * J.Na.ev + J.Na.Tz)
        }
        var g = $("#search"),
            h = g.val().trim();
        if ("" !== h) {
            var k = GL ? GL.query : "",
                l = GL ? GL.Wo() : [],
                m = GL ? GL.$g : null,
                n = ZL && !ZL.isRejected() && GL && !GL.Zb,
                p = $("#resultsSearch"),
                r = p.find(".layer").first(),
                u = $("\x3e .inner \x3e .searchGroup", r);
            b = Ib.ba.get(Df) && !1 !== b;
            var v = tL || PJ,
                y = dL,
                k = h === k,
                l = 0 === _.difference(l, v).length + _.difference(v, l).length,
                m = y === m;
            r.data("userPreparedSearch", !0);
            if (k && l && m && n) {
                var q = u.last();
                YL(q);
                if (!Wb) {
                    Wb = !0;
                    var x = oM(q);
                    a = x - J.iC;
                    1 < Math.abs(a - r.scrollTop()) ? r.animate({
                        scrollTop: a
                    }, J.Na.Zp, e) : e()
                }
            } else {
                GL = new VL(h, v, null, null, null, null, null, b, null, WL(p, p.height()), null, !0, !0, XL.bind(null, a), y);
                FM ? g.blur() : g.select();
                q = $('\x3cdiv class\x3d"searchGroup hasContent" data-search-text\x3d"' + _.escape(h) + '"\x3e\x3ch2\x3e\x3c/h2\x3e\x3cdiv class\x3d"searchSuggestion"\x3e\x3c/div\x3e\x3cul class\x3d"gallery photoGallery infoPanelGallery"\x3e\x3c/ul\x3e\x3c/div\x3e');
                $("h2", q).text("" + h + "");
                q.height(p.height());
                var E = $();
                0 < $(".searchLoaderHolder.on", p).length && (E = $('\x3cdiv class\x3d"placeholder"\x3e\x3cdiv/\x3e'),
                    E.height($(".searchLoaderHolder", p).height()),
                    r.addClass("doNotTransition"),
                    E.insertAfter(u.last()),
                    r.removeClass("doNotTransition"));
                YL(u.last());
                var B = KM(r),
                    m = nM(p),
                    g = B > m + J.iC,
                    h = $(),
                    n = $();
                if (g) {
                    var K = m + J.iC,
                        C = $();
                    u.each(function () {
                        var a = $(this);
                        0 == C.length && oM(a) + a.outerHeight() > K && (C = a)
                    });
                    0 == C.length && (C = u.last());
                    m = $(".gallery", C);
                    n = K - oM(C);
                    b = 0;
                    0 < m.length && (b = n - (m.offset().top - C.offset().top));
                    b = AM(m, b);
                    h = h.add(b);
                    n = C.nextAll(".searchGroup");
                    0 >= $("li", m).length - b.length && (h = $(),
                        n = n.add(C));
                    n = n.filter(function () {
                        return !$(this).hasClass("inlineFolderGroup")
                    });
                    0 == h.length && 0 == n.length ? g = !1 : (p.addClass("modifying"),
                        b = n,
                        0 < h.find("a.infoOpen").length && (b = b.add(C)),
                        v = $(".infoPanel", b),
                        0 < v.length && (b.addClass("doNotTransition"),
                            v.addClass("doNotTransition"),
                            $(".close", v).click(),
                            v.data("infoPanelPointer").remove(),
                            v.remove(),
                            b.removeClass("doNotTransition")),
                        m = m.data("columnData") || null,
                        LM(m, h),
                        h.detach(),
                        Ty(C, !0),
                        C.hasClass("inlineFolderGroup") && nO(r.data("view"), !1),
                        p.removeClass("modifying"))
                }
                u = $("\x3e .inner \x3e .searchGroup", r);
                h = n.map(function () {
                    return $(this).outerHeight(!0)
                }).toArray().reduce(function (a, b) {
                    return a + b
                }, 0);
                h = KM(r) + q.height() - h;
                g && h < nM(p) && q.height(q.height() + (nM(p) - h));
                q.insertAfter(u.last());
                n.detach();
                var N = n.toArray(),
                    u = u.filter(function () {
                        return -1 == N.indexOf(this)
                    });
                g || 0 != $(".gallery li", u.last()).length || (u.last().remove(),
                    u = u.filter(function (a) {
                        return a != u.length - 1
                    }));
                q.data("search", GL);
                var B = 0,
                    Q = parseInt(q.css("padding-top"), 10) + parseInt(q.css("padding-bottom"), 10);
                u.last().addClass("doNotTransition");
                u.each(function () {
                    var a = $(this);
                    if (void 0 !== a.data("contentHeight")) {
                        var b = a.data("contentHeight"),
                            b = b + yM(a);
                        a.height(b);
                        B += b + Q
                    }
                });
                u.last().removeClass("doNotTransition");
                g = $("#objectPanel").find("menu .search");
                g.hasClass("on") || g.find("a").click();
                XL(a);
                d()
            }
        }
    }

    function XL(a) {
        var b = TL(),
            c = GL;
        ZL && ZL.cancel();
        ZL = null;
        ZL = Sb.xs({
            Di: ub ? ub.Fc() : null,
            query: GL.query,
            bn: GL.Wo(),
            fl: GL.fl,
            Pk: GL.Pk,
            filters: GL.filters,
            hj: GL.hj,
            Aw: GL.Aw,
            sort: GL.sort,
            elevation: GL.elevation,
            jy: !1,
            bg: GL.bg,
            from: GL.Yk(),
            limit: GL.Kd(),
            gk: GL.gk,
            Cg: GL.Cg,
            $g: GL.$g
        }).then(function (b) {
            oO(a, b)
        }).catch(function (d) {
            var e = b.find(".layer \x3e .inner \x3e .searchGroup").last();
            if (!(d instanceof P.CancellationError && TL().attr("id") === b.attr("id"))) {
                if ("resultsSearch" !== b.attr("id"))
                    return YL(e),
                        P.reject();
                c.cancel();
                d = $('\x3cp class\x3d"noResults"\x3e').text(jc(a).format("objectPanelSearchFailed"));
                YL(e);
                e.find(".gallery").remove();
                e.append(d)
            }
        })
    }

    function oO(a, b) {
        var c = TL(),
            d = $(".layer \x3e .inner \x3e .searchGroup", c).last(),
            e = b.Ry(),
            g = $(".photoGallery, .backgroundGallery", d);
        GL.Fp = e.length;
        YL(c.find(".layer"));
        if (0 == e.length && GL.Fp >= GL.limit)
            GL.lW();
        else {
            var h = b.suggestion,
                k = GL,
                l = GL.query;
            0 === k.Yk() && (k.Cg = b.G());
            if (Ib.ba.get(Df) && h) {
                b = $("h2", d);
                var m = $(".searchSuggestion", d);
                m.empty().addClass("hasSuggestion");
                window.setTimeout(function () {
                    m.addClass("showSuggestion")
                }, 300);
                h.overridden ? (GL = new VL(cK(h), k.Wo(), k.fl, k.Pk, k.filters, k.hj, k.elevation, !1, k.sort, k.Kd(), k.Cg, k.bg, k.gk, function () {
                        XL(a)
                    }, k.$g),
                    GL.Fp = e.length,
                    d.data("search", GL),
                    b.text("" + cK(h) + ""),
                    0 < h.originalHits ? m.append("Search instead for ").append($("\x3ca/\x3e").data("query", h.originalQuery).append(h.originalQuery)) : m.addClass("originalSearch").append("You typed ").append($("\x3cstrong/\x3e").append(h.originalQuery))) : m.append("Did you mean: ").append($("\x3ca/\x3e").data("query", cK(h)).append(pO(h)))
            } else
                0 === k.Yk() && $(".searchSuggestion", d).empty().removeClass("showSuggestion").removeClass("hasSuggestion");
            0 < e.length || k.FG ? (e = e.slice(0, k.Kd()),
                e.forEach(function (a) {
                    Kg(vb, a.G(), a.getVersion(), a.Uc())
                }),
                e.forEach(function (b) {
                    (new qO({
                        model: b,
                        query: l,
                        da: jc(a),
                        ja: Ib
                    })).$el.appendTo(g)
                }),
                Sy(g),
                setTimeout(function () {
                    k.Fp >= k.limit || !k.FG ? IM(c) : (GL = k.FG,
                        XL(a))
                }, e.length * J.Na.ev + J.Na.Tz)) : 0 == k.Yk() && (e = k.IV, !e || 0 === e.Yk() && 0 === e.My()) && (g.remove(),
                $(".noResults", d).remove(),
                e = $('\x3cp class\x3d"noResults"\x3e').text(jc(a).format("objectPanelSearchNoResults")),
                d.append(e))
        }
    }

    function UL(a) {
        if (0 >= $(".searchLoader", a).length) {
            var b = $('\x3cdiv class\x3d"searchLoader tileListBusyIndicator"\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e');
            a.append(b);
            b.addClass("tileListBusyIndicatorOn")
        }
    }

    function pO(a) {
        var b = $("\x3cspan/\x3e");
        if (!a.tokenReplacements || 0 == a.tokenReplacements.length)
            return b.text(cK(a)),
                b;
        var c = a.originalQuery;
        a = a.tokenReplacements;
        for (var d = 0, e = 0, g = 0; d < c.length && g < a.length;)
            d == a[g].start ? (e < d && b.append(c.substring(e, d)),
                b.append($("\x3cspan\x3e").addClass("replacedToken").text(a[g].replacement)),
                d = e = a[g].end,
                g++) : d++;
        e < c.length && b.append(c.substring(e, c.length));
        return b
    }

    function YL(a) {
        $(".searchLoader", a).each(function () {
            $(this).remove();
            $(".searchLoaderHolder", a).removeClass("on")
        })
    };

    function rO() {
        this.Hn = []
    }
    rO.prototype.trigger = Backbone.Events.trigger;
    rO.prototype.listenTo = Backbone.Events.listenTo;
    rO.prototype.stopListening = Backbone.Events.stopListening;
    _.extend(rO.prototype, Backbone.Events);
    rO.prototype.lk = function (a) {
        sO(this, a, this.Hn.length)
    };

    function sO(a, b, c) {
        -1 === a.Hn.indexOf(b) && (c = Math.max(0, Math.min(c, a.Hn.length)),
            a.Hn.splice(c, 0, b),
            a.listenTo(b, "all", function () {
                a.trigger.apply(this, arguments)
            }),
            a.trigger("searchGroup:add", a, b, c))
    }
    rO.prototype.IA = function (a) {
        var b = this.Hn.indexOf(a); -
        1 < b && (a.remove(),
            this.Hn.splice(b, 1),
            this.stopListening(a),
            this.trigger("searchGroup:remove", this, a, b))
    };

    function tO(a) {
        return a.Hn[a.Hn.length - 1]
    }
    rO.prototype.getLength = function () {
        return this.Hn.length
    };

    function mL(a, b, c) {
        this.tO = a;
        this.title = b || "";
        this.x5 = c || "";
        this.CG = [];
        this.Rz = !0
    }
    mL.prototype.trigger = Backbone.Events.trigger;
    _.extend(mL.prototype, Backbone.Events);
    f = mL.prototype;
    f.Jb = function () {
        return this.title
    };
    f.remove = function () {
        this.tO.cancel()
    };
    f.clear = function () {
        this.CG = [];
        this.Rz = !0;
        this.tO.reset();
        this.trigger("results:clear", this)
    };
    f.Jh = function (a) {
        var b = this;
        this.trigger("results:willFetch", b);
        this.tO.tu(a, function (c, d) {
            b.Rz = c.length >= a;
            0 < c.length && (b.CG = b.CG.concat(c));
            b.trigger("results:didFetch", b, c, d)
        })
    };
    f.My = function () {
        return this.CG.length
    };

    function uO(a) {
        var b = Hb,
            c = Bb,
            d = Ib;
        if (-1 < ["grid", "grids"].indexOf(a.toLowerCase()))
            return new vO(a);
        if ("uploads" === a)
            return new wO(c, !0);
        if ("marketplace" === a)
            return new wO(c, !1);
        b = new NJ(b, [new LJ]);
        c = new VL(a, PJ, null, null, null, null, null, !1, [], 0, null, !1, !1, function () {}, !1);
        return d.ba.get($f) && -1 < ["chart", "charts"].indexOf(a.toLowerCase()) ? new xO(b, c, wm) : new yO(b, c)
    }

    function zO() {}
    _.extend(zO.prototype, Backbone.Events);
    zO.prototype.tu = function (a, b) {
        b && b([], !0)
    };
    zO.prototype.cancel = function () {};
    zO.prototype.reset = function () {};

    function yO(a, b, c) {
        this.search = a;
        this.md = b;
        this.$K = c || vm;
        this.Zb = !1;
        this.BG = this.Zc = null
    }
    _.extend(yO.prototype, Backbone.Events);
    f = yO.prototype;
    f.tu = function (a, b) {
        function c(a) {
            return !(a instanceof P.CancellationError)
        }
        this.Zc ? b && b([], !0) : this.wU(a, b, this.Zb) || (this.md.limit = a,
            this.BG = b,
            this.Zc = RJ(this.search, {
                Di: ub ? ub.Fc() : null,
                query: this.md.query,
                bn: this.md.Wo(),
                fl: this.md.fl,
                Pk: this.md.Pk,
                filters: this.md.filters,
                hj: this.md.hj,
                elevation: this.md.elevation,
                Aw: this.md.Aw,
                sort: this.md.sort,
                jy: !1,
                bg: this.md.bg,
                from: this.md.Yk(),
                limit: this.md.Kd(),
                gk: this.md.gk,
                Cg: this.md.Cg
            }).catch(c, function () {}).then(this.e6.bind(this)).catch(P.CancellationError, function () {}))
    };
    f.wU = function () {
        return !1
    };
    f.cancel = function () {
        this.Zb = !0;
        this.Zc && this.Zc.cancel();
        this.Zc = null
    };
    f.reset = function () {
        this.cancel();
        this.Zb = !1;
        this.md.reset()
    };
    f.e6 = function (a) {
        var b = [];
        !this.Zb && a && a.Ry() && (b = a.Ry());
        this.eM(b, this.md.Kd());
        this.BG && this.BG(b, this.Zb);
        this.Zc = this.BG = null;
        this.Zb || (0 === this.md.Yk() && (this.md.Cg = a.G()),
            this.md.Fp = b.length,
            a = this.md,
            a.from += a.limit)
    };
    f.eM = function () {};

    function vO(a) {
        this.ww = 0;
        this.Ce = [];
        this.query = a;
        this.Zb = !1;
        if ("grid" === a || "grids" === a)
            this.query = "grid",
            this.Ce = _.keys(vm)
    }
    vO.prototype.cancel = function () {
        this.Zb = !0
    };
    vO.prototype.tu = function (a, b) {
        if (this.ww >= this.Ce.length || this.Zb)
            b && b([], this.Zb);
        else {
            var c = this.Ce.slice(this.ww, this.ww + a);
            this.ww += a;
            b && b(c, !1)
        }
    };
    vO.prototype.reset = function () {
        this.Zb = !1;
        this.ww = 0;
        this.Ce = []
    };

    function wO(a, b) {
        this.pc = a;
        this.iW = b;
        this.na = null;
        this.Zb = !1;
        this.Zc = null;
        this.dz = !1
    }
    wO.prototype.tu = function (a, b) {
        function c(a, c) {
            function e(a) {
                return (a = a.Va().Dc()) && 0 < Object.keys(a).length
            }

            function l(a) {
                var b = a.Va(),
                    c = b.Dc(),
                    d;
                YD(a.Va()) && (d = 100 * YD(a.Va()).ONE_USE || 0);
                return Dg({
                    id: a.G(),
                    version: b.getVersion(),
                    files_: _.values(c),
                    oneTimeUsePriceCents: d,
                    status: b.Oh(),
                    type: a.Ab()
                })
            }

            function m(a, b) {
                a = a.G();
                b = b.G();
                return -(a < b ? -1 : a > b ? 1 : 0)
            }
            200 === a && c.media && 0 !== c.media.length ? (a = c.media.filter(e).sort(m).map(l),
                b && b(a, d.Zb),
                d.na = c.continuation,
                d.Zc = null,
                d.dz = !0) : b && b([], d.Zb)
        }
        var d = this,
            e = [zg, Bg];
        this.Zc ? b && b([], !0) : null == this.na && this.dz ? b && b([], !1) : (a = aE((new $D).bt(this.iW).Zs(!1).ho(), e).Ig(a),
            null != d.na && a.aj(d.na),
            this.iW || (a = a.XB().Uw(!0)),
            this.Zc = AD(Bb, a, c))
    };
    wO.prototype.cancel = function () {
        this.Zb = !0;
        this.Zc && (this.Zc.cancel(),
            this.Zc = null)
    };
    wO.prototype.reset = function () {
        this.cancel();
        this.Zb = !1;
        this.na = null;
        this.dz = !1
    };

    function nL(a) {
        Ba(!((a.Cc || a.query) && a.md));
        var b = a.$K || vm;
        if (null != a.md)
            yO.call(this, a.uO, a.md, b);
        else if (null != a.Cc) {
            var c = new jO,
                c = kO(c, a.query ? a.query + " *" : "*");
            yO.call(this, a.uO, new VL(c.toString(), OJ, {
                designType: a.Cc.G()
            }, null, null, null, null, !1, [new iK({
                $t: "score",
                direction: "DESC"
            }), new iK({
                $t: "lastModified",
                direction: "DESC"
            }), new iK({
                $t: "id",
                direction: "ASC"
            })], 0, null, !1, !1, function () {}, !1), b)
        }
        this.RD = !1;
        this.Zy = 0
    }
    _.extend(nL.prototype, yO.prototype);
    nL.prototype.reset = function () {
        yO.prototype.reset.call(this);
        this.RD = !1;
        this.Zy = 0
    };
    nL.prototype.wU = function (a, b, c) {
        var d = [];
        return this.RD ? (AO(this, d, this.Zy, a),
            b && b(d, c), !0) : !1
    };
    nL.prototype.eM = function (a, b) {
        (this.RD = 0 === a.length || a.length < b) && AO(this, a, this.Zy, b - a.length)
    };

    function AO(a, b, c, d) {
        c = _.rest(_.keys(a.$K), c);
        d = _.first(c, d);
        a.Zy += d.length;
        d.forEach(function (c) {
            b.push(BO(a, c))
        })
    }

    function BO(a, b) {
        b = a.$K[b];
        a = new zH;
        var c = Lg(G.pb().tb);
        b = {
            width: c.D(),
            height: c.F(),
            elements: [{
                type: "grid",
                left: 0,
                top: 0,
                width: c.D(),
                height: c.F(),
                items: b.items
            }]
        };
        a.name = "Photo Grid";
        a.content = b;
        return a
    }

    function xO(a, b, c) {
        yO.call(this, a, b, c);
        this.BI = c;
        this.mK = !1;
        this.Dx = 0
    }
    _.extend(xO.prototype, yO.prototype);
    xO.prototype.reset = function () {
        yO.prototype.reset.call(this);
        this.mK = !1;
        this.Dx = 0
    };
    xO.prototype.eM = function (a) {
        this.mK || (this.mK = CO(this, a, this.Dx, _.size(this.BI)))
    };

    function CO(a, b, c, d) {
        c = _.rest(_.keys(a.BI), c);
        d = _.first(c, d);
        a.Dx += d.length;
        d.forEach(function (a, c) {
            b.splice(c, 0, a)
        });
        return a.Dx === _.size(a.BI)
    }

    function kL(a) {
        this.Zb = !1;
        this.nb = a.nb;
        this.uc = a.uc;
        this.ya = a.ya;
        this.Ia = a.Ia;
        this.du = a.du;
        this.fr = a.fr;
        this.tD = a.tD || null;
        this.QD = !1;
        this.cF = this.na = this.Zc = null
    }
    _.extend(kL.prototype, yO.prototype);
    kL.prototype.tu = function (a, b) {
        function c() {
            function b(a) {
                h.cF = a.dc();
                h.QD = null == h.cF;
                a = a.uf().map(function (a) {
                    return a.G()
                });
                if (!a.length)
                    return null;
                k.Aj = a;
                return new Ss(k)
            }
            if (h.du) {
                var c = (new Uj).ik(new zj({
                    id: h.du
                })).Ig(a).aj(h.cF);
                return h.uc.Kz(c).then(b).catch(g)
            }
            return new P(function (a) {
                a(new Ss(k))
            })
        }

        function d(a) {
            h.Zc = null != a ? aq(h.nb, a) : P.resolve(null);
            return h.Zc
        }

        function e(a) {
            a ? (h.na = a.continuation,
                this.du || (h.QD = null == h.na),
                b && b(a.documents, h.Zb),
                h.Zc = null) : b && b([], h.Zb)
        }

        function g(a) {
            b && b([], h.Zb);
            throw a;
        }
        var h = this,
            k = {
                fr: h.fr,
                lK: !0,
                na: h.na,
                limit: a
            };
        this.tD && (k.ta = this.tD);
        this.du || (k.oh = new fs({
                user: h.ya,
                Z: h.Ia
            }),
            k.gG = ["OWNER"]);
        this.Zc ? b && b([], !0) : this.QD ? b && b([], this.Zb) : this.Zc = c().then(d).then(e).catch(g)
    };
    kL.prototype.cancel = function () {
        this.Zb = !0;
        this.Zc && (this.Zc.cancel(),
            this.Zc = null)
    };
    kL.prototype.reset = function () {
        this.cancel();
        this.Zb = !1;
        this.cF = this.na = null;
        this.QD = !1
    };

    function DO(a) {
        this.Ia = a.Ia || null;
        this.Zb = !1;
        this.AJ = a.AJ;
        this.nb = a.nb;
        this.oS = !1;
        this.na = this.Zc = null;
        this.ki = a.ki
    }
    _.extend(DO.prototype, yO.prototype);
    DO.prototype.tu = function (a, b) {
        function c(a) {
            var b = a.uf().map(h);
            k.oS = null == a.dc();
            k.na = a.dc();
            return 0 !== b.length ? (a = new Ss({
                    Aj: b
                }),
                aq(k.nb, a)) : P.resolve({
                documents: []
            })
        }

        function d(a) {
            b(a.documents, k.Zb)
        }

        function e() {
            b([], k.Zb)
        }

        function g() {
            k.Zc = null
        }

        function h(a) {
            return a.G()
        }
        var k = this;
        this.Zc ? b && b([], !0) : this.oS ? b && b([], this.Zb) : (a = CH((new BH).Hg(this.Ia).ik("/designs/layouts"), this.AJ).Ig(a).aj(this.na),
            this.Zc = xH(this.ki, a).then(c).then(d).catch(e).finally(g))
    };
    DO.prototype.cancel = function () {
        this.Zb = !0;
        this.Zc = null
    };
    DO.prototype.reset = function () {
        this.cancel();
        this.Zb = !1;
        this.na = null
    };

    function VL(a, b, c, d, e, g, h, k, l, m, n, p, r, u, v) {
        this.query = "";
        this.bn = b;
        this.fl = c;
        this.Pk = d;
        this.filters = e;
        this.hj = g;
        this.elevation = h;
        this.Aw = k;
        this.sort = l;
        "string" === typeof a ? this.query = a.trim() : a instanceof UJ && (this.query = "group:" + a.wa());
        this.from = 0;
        this.limit = m;
        this.Fp = 0;
        this.Zb = !1;
        this.lW = u;
        this.Cg = n;
        this.bg = p;
        this.gk = r;
        this.$g = v;
        this.FG = this.IV = null
    }

    function gL(a) {
        var b = {};
        a.fl.forEach(function (a, c) {
            return b[c] = a
        });
        var c = {};
        a.Pk.forEach(function (a, b) {
            return c[b] = a
        });
        return new VL(a.query, a.bn, b, c, a.filters, a.hj, null != a.elevation ? a.elevation : null, null != a.ND ? a.ND : !1, a.sort, a.limit, null != a.Cg ? a.Cg : null, null != a.bg ? a.bg : !1, null != a.gk ? a.gk : !1, function () {}, null != a.$g ? a.$g : !1)
    }
    f = VL.prototype;
    f.Wo = function () {
        return this.bn
    };
    f.Yk = function () {
        return this.from
    };
    f.Kd = function () {
        return this.limit
    };
    f.cancel = function () {
        this.Zb = !0
    };
    f.My = function () {
        return this.Fp
    };
    f.reset = function () {
        this.Fp = this.from = 0
    };

    function EO(a) {
        if (void 0 !== a && !FO(a))
            throw Error("StateMachine constructed with invalid options: " + JSON.stringify(a));
        this.jm = a ? a.CT || "none" : "none";
        this.gi = a ? a.gi.slice(0) : []
    }
    EO.prototype.trigger = Backbone.Events.trigger;
    _.extend(EO.prototype, Backbone.Events);
    EO.prototype.Uy = function () {
        return this.jm
    };

    function GO(a) {
        return a.gi.map(function (a) {
            return _.extend({}, a)
        })
    }

    function HO(a, b) {
        var c = a.gi.concat(b);
        if (!FO({
                CT: a.jm,
                gi: c
            }))
            throw Error("Invalid transitions being added: " + JSON.stringify(c));
        a.gi = a.gi.concat(b)
    }
    EO.prototype.transition = function (a) {
        var b = this.jm,
            c = IO(this, a);
        if (null !== c)
            this.jm = c,
            this.trigger("state:enter", this, c, b);
        else
            throw Error("Invalid transition " + a + " from " + this.jm);
    };

    function JO(a, b) {
        var c = a.jm;
        if (-1 === a.gi.filter(function (a) {
                return a.from === c && a.to === b
            }).map(function (a) {
                return a.to
            }).indexOf(b))
            throw Error('Cannot transition from "' + c + '" to "' + b + '"');
        a.jm = b;
        a.trigger("state:enter", a, b, c)
    }
    EO.prototype.start = function () {
        this.transition("start")
    };
    EO.prototype.fail = function () {
        this.transition("fail")
    };

    function IO(a, b) {
        var c = a.gi.filter(function (c) {
            return c.name === b && c.from === a.jm
        });
        if (1 < c.length)
            throw Error('More than 1 transition "' + b + '" exists from state "' + a.jm + '"');
        return 1 === c.length ? c[0].to : null
    }

    function FO(a) {
        var b = a.CT || "none",
            c;
        c = -1 === KO(a.gi).indexOf(b) ? !1 : !0;
        var d = LO(a.gi);
        a = MO(a.gi);
        b = 0 === a.length || 1 === a.length && a[0] === b;
        return c && b && 0 === d.length
    }

    function KO(a) {
        a = a.map(function (a) {
            return [a.from, a.to]
        });
        return _.uniq(_.flatten(a))
    }

    function MO(a) {
        return KO(a).filter(function (b) {
            return 0 === a.filter(function (a) {
                return a.to === b
            }).length
        })
    }

    function LO(a) {
        return KO(a).filter(function (b) {
            var c = a.filter(function (a) {
                return a.from === b
            }).map(function (a) {
                return a.name
            });
            return c.length > _.uniq(c).length
        })
    };

    function rn(a, b, c, d) {
        var e;
        a == c ? e = b > d ? 1.5 * Math.PI : .5 * Math.PI : (e = Math.atan((d - b) / (c - a)),
            a < c ? d < b && (e = 2 * Math.PI + e) : e = Math.PI + e,
            isNaN(e) && (e = 0));
        return um(180 * e / Math.PI)
    }

    function um(a) {
        a %= 360;
        0 > a && (a += 360);
        return a
    }

    function pn(a) {
        return Math.PI / 180 * a
    }

    function UA(a, b) {
        a -= b;
        return 0 > a ? 360 + a : a
    }

    function NO(a, b) {
        a = Math.floor(180 * Math.atan2(a.y - b.y, a.x - b.x) / Math.PI + 90);
        return 0 > a ? 360 + a : a
    }

    function OO(a) {
        switch (a) {
            case "TL":
                return 270;
            case "TR":
                return 0;
            case "BR":
                return 90;
            case "BL":
                return 180;
            default:
                throw Error("Quadrant does not exist");
        }
    }

    function sn(a, b, c, d) {
        return Math.sqrt(Math.pow(c - a, 2) + Math.pow(d - b, 2))
    };

    function PO(a, b) {
        this.listener = void 0;
        this.Fk = a;
        this.Ed = b;
        this.dI = this.visible = !1;
        this.fT = []
    }
    f = PO.prototype;
    f.hh = function () {
        return !!this.visible
    };

    function QO(a) {
        a.Fk.Rb().forEach(function (b) {
            if (!(!b || 0 > b.ea() || a.Ed.Xa.length <= b.ea())) {
                b = hC(a.Ed, b);
                if (0 >= b.$el.find(".guides").length) {
                    var c = $('\x3cdiv class\x3d"guides"\x3e\x3cdiv class\x3d"vertical gutter"\x3e\x3c/div\x3e\x3cdiv class\x3d"horizontal gutter"\x3e\x3c/div\x3e\x3c/div\x3e');
                    b.$el.prepend(c)
                }
                b.$el.find(".guides").css("display", "block")
            }
        })
    }
    f.toggle = function () {
        this.hh() ? (this.hide(),
            RO(this)) : this.dI ? RO(this) : this.show()
    };

    function SO(a) {
        return a.fT.filter(function (a) {
            return a && a.oe && a.ha()
        })
    }
    f.add = function (a) {
        this.fT.push(a)
    };
    f.hide = function () {
        var a = this;
        this.visible = !1;
        this.Fk.Rb().forEach(function (b) {
            hC(a.Ed, b).$el.find(".guides").css("display", "none")
        });
        SO(this).forEach(function (a) {
            a.hD()
        });
        this.stopListening()
    };
    f.stopListening = function () {
        this.listener && (this.listener.off("mousedown", ".guides", this.DC),
            this.listener.off("touchstart", ".guides", this.DC))
    };
    f.show = function () {
        this.visible = !0;
        QO(this);
        SO(this).forEach(function (a) {
            a.activate()
        });
        this.listener = new Po("#canvaDocument");
        this.DC = this.PJ.bind(this);
        this.listener.on("mousedown", ".guides", this.DC);
        this.listener.on("touchstart", ".guides", this.DC)
    };
    f.PJ = function (a) {
        function b(a) {
            var p = a.clientX - l;
            a = a.clientY - m;
            p = {
                align: "vertical",
                type: "guide",
                width: 0,
                height: k.F(),
                left: p / W,
                top: 0
            };
            e || (p.align = "horizontal",
                p.width = k.D(),
                p.left = 0,
                p.top = a / W,
                p.height = 0);
            a = k;
            0 <= p.left && p.left <= a.D() && 0 <= p.top && p.top <= a.F() && (a = new MG(p),
                a.appendTo(k),
                a.wb(p.left),
                a.rb(p.top),
                a.activate(),
                d.add(a));
            g.off("mouseup|touchend", b);
            g.off("mousemove|touchmove", c);
            h.remove()
        }

        function c(a) {
            var b = a.clientX - l;
            a = a.clientY - m;
            e ? h.css("top", 0).css("left", b) : h.css("top", a).css("left", 0)
        }
        var d = this,
            e = $(a.target).hasClass("vertical"),
            g = new Po($(document)),
            h = $('\x3cdiv class\x3d"element guide"\x3e\x3c/div\x3e'),
            k = this.Fk.Oa();
        a = hC(this.Ed, k);
        var l = a.$el.find(".page__content").get(0).getBoundingClientRect().left,
            m = a.$el.find(".page__content").get(0).getBoundingClientRect().top;
        e ? h.addClass("vertical") : h.addClass("horizontal");
        hM(a, h);
        g.on("mousemove|touchmove", c);
        g.on("mouseup|touchend", b)
    };

    function TO() {
        var a = Rb();
        return a.hh() ? SO(a) : []
    }

    function RO(a) {
        function b() {
            return '\x3cdiv class\x3d"gutter"\x3e\x3c/div\x3e'
        }

        function c() {
            return '\x3cdiv class\x3d"column lsnap"\x3e\x3c/div\x3e\x3cdiv class\x3d"line"\x3e\x3c/div\x3e\x3cdiv class\x3d"column"\x3e\x3c/div\x3e\x3cdiv class\x3d"line"\x3e\x3c/div\x3e\x3cdiv class\x3d"column rsnap"\x3e\x3c/div\x3e'
        }
        $(".page").hasClass("showGuidelines") ? (a.dI = !1,
            $(".page").removeClass("showGuidelines"),
            $(".page .guidelines").remove()) : (a.dI = !0,
            $(".page").addClass("showGuidelines"),
            $(".page__content").prepend('\x3cdiv class\x3d"guidelines"\x3e' + b() + c() + b() + c() + b() + c() + b() + c() + b() + c() + b() + c() + b() + "\x3c/div\x3e"),
            UO())
    }

    function UO() {
        if (G && G.Rb && G.Rb()[0]) {
            var a = (G.Rb()[0].D() - 140) / 18 * W - 2 / 3 + "px";
            $(".page .guidelines .column").css("width", a);
            $(".page .guidelines .gutter").css("width", 20 * W)
        }
    }

    function VO(a) {
        var b = hC(H, a);
        if (!b.$el.hasClass("showGuidelines"))
            return delete tb.$y, [];
        if (tb.$y)
            return tb.$y;
        tb.$y = [];
        b.$el.find(".guidelines .gutter").each(function (a, d) {
            function e() {
                return 0
            }

            function g() {
                return (d.getBoundingClientRect().right - k().left) / W
            }

            function h() {
                return (d.getBoundingClientRect().left - k().left) / W
            }

            function k() {
                return b.$el.find(".page__content").get(0).getBoundingClientRect()
            }
            tb.$y.push({
                Y: h,
                nc: h,
                Ld: g,
                N: e,
                xc: e,
                eh: function () {
                    return g() - h()
                },
                dh: function () {
                    return (k().bottom - k().top) / W
                },
                ud: function () {
                    return (k().bottom - k().top) / W
                },
                eb: function () {
                    return 0
                }
            })
        });
        return tb.$y
    };
    var JA = fn("#ffffff"),
        KA = fn("#272c33"),
        LA = fn("#7d8693");

    function WO(a) {
        var b = goog.asserts.assertArray(a.data, "expected parameter 'data' of type list\x3cstring\x3e.");
        soy.asserts.assertType(goog.isNumber(a.index), "index", a.index, "number");
        var c = a.index;
        soy.asserts.assertType(goog.isNumber(a.maxLength), "maxLength", a.maxLength, "number");
        var d = a.maxLength;
        soy.asserts.assertType(null == a.isEmpty || goog.isBoolean(a.isEmpty) || 1 === a.isEmpty || 0 === a.isEmpty, "isEmpty", a.isEmpty, "boolean|null|undefined");
        a = a.isEmpty;
        c = '\x3ctr data-row\x3d"' + soy.$$escapeHtmlAttribute(c) + '" class\x3d"tableView__row tableView__row--data ' + (a ? "tableView__row--empty" : "") + '"\x3e';
        a = b.length;
        for (var e = 0; e < a; e++)
            var g = b[e],
                c = c + ('\x3ctd class\x3d"tableView__cell"\x3e\x3cinput maxlength\x3d"' + soy.$$escapeHtmlAttribute(d) + '" data-column\x3d"' + soy.$$escapeHtmlAttribute(e) + '" class\x3d"tableView__input tableView__input--data" type\x3d"text" value\x3d"' + soy.$$escapeHtmlAttribute(g) + '" /\x3e\x3c/td\x3e');
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(c + "\x3c/tr\x3e")
    }

    function XO(a) {
        var b = '\x3ctr class\x3d"tableView__row tableView__row--header"\x3e';
        a = goog.asserts.assertArray(a.fh, "expected parameter 'header' of type list\x3cstring\x3e.");
        for (var c = a.length, d = 0; d < c; d++)
            b += '\x3cth class\x3d"tableView__cell tableView__cell--header"\x3e' + soy.$$escapeHtml(a[d]) + "\x3c/th\x3e";
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b + "\x3c/tr\x3e")
    }

    function YO(a) {
        soy.asserts.assertType(goog.isNumber(a.count), "count", a.count, "number");
        var b = a.count;
        soy.asserts.assertType(goog.isString(a.YE) || a.YE instanceof goog.soy.data.SanitizedContent, "itemMessage", a.YE, "string|goog.soy.data.SanitizedContent");
        var c = a.YE;
        soy.asserts.assertType(goog.isString(a.tH) || a.tH instanceof goog.soy.data.SanitizedContent, "valueMessage", a.tH, "string|goog.soy.data.SanitizedContent");
        a = a.tH;
        for (var d = '\x3ctr class\x3d"tableView__row tableView__row--placeholder"\x3e', e = 0; e < b; e++)
            d += '\x3ctd class\x3d"tableView__cell tableView__cell--placeholder"\x3e\x3cinput tabindex\x3d"-1" data-column\x3d"' + soy.$$escapeHtmlAttribute(e) + '" class\x3d"tableView__input tableView__input--placeholder" type\x3d"text" placeholder\x3d"' + (0 == e ? soy.$$escapeHtmlAttribute(c) : soy.$$escapeHtmlAttribute(a)) + '" /\x3e\x3c/td\x3e';
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(d + "\x3c/tr\x3e")
    }

    function ZO(a) {
        soy.asserts.assertType(goog.isString(a.aG) || a.aG instanceof goog.soy.data.SanitizedContent, "pasteMessage", a.aG, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"tableView__spacer"\x3e\x3c/div\x3e\x3ctextarea placeholder\x3d"' + soy.$$escapeHtmlAttribute(a.aG) + '" class\x3d"tableView__pasteArea" cols\x3d"30" rows\x3d"10"\x3e\x3c/textarea\x3e')
    };

    function $O(a) {
        Backbone.View.call(this, {
            className: "tableView",
            tagName: "div"
        });
        this.u = a
    }
    t($O, Backbone.View);
    f = $O.prototype;
    f.events = function () {
        return {
            "input .tableView__input": this.Mj,
            "keyup .tableView__input": this.q3,
            "keydown .tableView__input": this.LM,
            "focus .tableView__input--data": this.G2,
            "focus .tableView__input--placeholder": this.M3,
            "blur .tableView__input--data": this.Qr,
            "paste .tableView__input": this.VU,
            "paste .tableView__pasteArea": this.VU
        }
    };
    f.ea = function (a) {
        if (!a.length)
            return {
                Lb: -1,
                fb: -1
            };
        var b = a.parents(".tableView__row").attr("data-row");
        a = $(a).attr("data-column");
        b = parseInt(void 0 === b ? -1 : b, 10);
        a = parseInt(void 0 === a ? -1 : a, 10);
        return {
            Lb: b,
            fb: a
        }
    };

    function aP(a, b) {
        return a.$el.find('[data-row\x3d"' + b.Lb + '"] [data-column\x3d"' + b.fb + '"]')
    }
    f.oc = function (a) {
        return "" + a.val()
    };
    f.$h = function (a) {
        aP(this, a).focus();
        return this
    };
    f.blur = function (a) {
        aP(this, a).blur();
        return this
    };

    function bP(a, b, c) {
        aP(a, b).toggleClass("tableView__input--empty", !!c)
    }
    f.ak = function (a, b, c) {
        var d = aP(this, a);
        d.length && d.val(b) && !c && this.trigger("input", a, b)
    };
    f.JO = function (a) {
        var b = this.$el.find(".tableView__row--header");
        a = XO({
            fh: a
        }).toString();
        b.length ? b.replaceWith(a) : this.$el.find(".tableView__row").first().before(a)
    };
    f.Mj = function (a) {
        var b = $(a.currentTarget);
        a = this.ea(b);
        b = this.oc(b);
        this.trigger("input", a, b)
    };
    f.q3 = function (a) {
        a.stopPropagation();
        cP(a) ? this.kK && this.trigger("keyup", this.kK, function () {
            return a.preventDefault()
        }) : a.preventDefault()
    };
    f.LM = function (a) {
        a.stopPropagation();
        var b = $(a.currentTarget),
            c = this.ea(b),
            b = this.oc(b);
        this.kK = {
            index: c,
            value: b,
            keyCode: a.keyCode,
            shiftKey: a.shiftKey,
            altKey: a.altKey,
            selectionStart: a.currentTarget.selectionStart,
            selectionEnd: a.currentTarget.selectionEnd
        };
        cP(a) ? this.trigger("keydown", this.kK, function () {
            return a.preventDefault()
        }) : a.preventDefault()
    };

    function cP(a) {
        if (a.shiftKey)
            switch (a.which) {
                case 188:
                case 190:
                    return !1
            }
        return !0
    }
    f.VU = function (a) {
        var b = !1,
            c = $(a.currentTarget),
            c = this.ea(c),
            d = (a.originalEvent.clipboardData || window.clipboardData).getData("text"),
            e = -1 !== d.indexOf("\x3c") || -1 !== d.indexOf("\x3e"),
            g = -1 !== d.indexOf("\t"),
            h = -1 !== d.indexOf("\n") || -1 !== d.indexOf("\r");
        if (g || h || e) {
            if (-1 === c.fb || -1 === c.Lb)
                b = !0,
                c.Lb = 0,
                c.fb = 0;
            a.preventDefault();
            this.trigger("paste", c, d, b)
        }
    };
    f.M3 = function (a) {
        a.preventDefault();
        a = parseInt($(a.target).attr("data-column"), 10);
        this.trigger("append", a)
    };
    f.G2 = function (a) {
        a = $(a.currentTarget);
        this.trigger("focus", this.ea(a));
        a.select()
    };
    f.Qr = function (a) {
        var b = $(a.currentTarget);
        a = this.ea(b);
        b = this.oc(b);
        this.trigger("blur", a, b)
    };
    f.render = function (a, b, c, d) {
        var e = this.el,
            g = goog.asserts.assertArray(a, "expected parameter 'data' of type list\x3clist\x3cstring\x3e\x3e.");
        soy.asserts.assertType(goog.isNumber(b), "maxLength", b, "number");
        for (var h = '\x3ctable class\x3d"tableView__table"\x3e', k = g.length, l = 0; l < k; l++)
            h += WO({
                data: g[l],
                index: l,
                maxLength: b
            });
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml(h + "\x3c/table\x3e");
        e.innerHTML = b;
        c && this.$el.find(".tableView__row").first().before(XO({
            fh: c
        }).toString());
        d && a[0] && a[0].length && this.$el.find(".tableView__row").last().after(YO({
            count: a[0].length,
            YE: qe(this.u, a.length + 1),
            tH: this.u.format("editorToolbarTableValue")
        }).toString());
        this.$el.append(ZO({
            aG: this.u.format("editorToolbarPasteSpreadsheet")
        }).toString())
    };
    f.insertRow = function (a, b, c, d) {
        this.$el.find('.tableView__row--data[data-row\x3d"' + a + '"]').after(WO({
            data: d,
            index: a + 1,
            maxLength: c,
            isEmpty: b
        }).toString());
        dP(this)
    };

    function eP(a, b) {
        a.$el.find('.tableView__row--data[data-row\x3d"' + b + '"]').remove();
        dP(a)
    }

    function dP(a) {
        var b = 0;
        a.$el.find(".tableView__row--data").each(function (a, d) {
            $(d).attr("data-row", a);
            a > b && (b = a)
        });
        a.$('.tableView__input--placeholder[data-column\x3d"0"]').attr("placeholder", qe(a.u, b + 2))
    }

    function fP(a, b) {
        a.$el.find(".tableView__input--placeholder").toggle(b)
    };

    function gP(a, b, c, d, e, g) {
        var h = this;
        this.view = a;
        this.u = b;
        this.Kj = c;
        this.Ni = d;
        this.maxLength = e || 16;
        this.Md = g || 0;
        this.data = [];
        this.headers = [];
        this.Mt = {
            fb: 0,
            Lb: 0
        };
        this.view.on("focus", function (a) {
            h.Mt = a
        });
        this.view.on("input", function (a, b) {
            return h.ak(a, b)
        });
        this.view.on("keyup", function (a, b) {
            return hP(h, a, b)
        });
        this.view.on("keydown", function (a, b) {
            return h.Hp(a, b)
        });
        this.view.on("blur", function (a, b) {
            h.validate(a, b);
            h.trigger("commit", h.getData())
        });
        this.view.on("paste", function (a, b, c) {
            return iP(h, a, b, c)
        });
        this.view.on("append", function (a) {
            return jP(h, a)
        })
    }

    function kP(a, b, c) {
        var d = new $O(c);
        c = new gP(d, c, b.Kj, b.Ni, b.maxLength, b.Md);
        c.setData(a);
        d.render(a, c.maxLength, b.KI, !0);
        return {
            bc: c,
            view: d
        }
    }
    f = gP.prototype;
    f.setData = function (a) {
        this.data = a
    };
    f.JO = function (a) {
        this.headers = a;
        this.view.JO(this.headers)
    };
    f.ak = function (a, b) {
        -1 !== a.Lb && -1 !== a.fb && (b = this.sanitize(b),
            this.data[a.Lb] || (this.data[a.Lb] = lP(this, a.Lb + 1)),
            this.data[a.Lb][a.fb] = b,
            this.validate(a, b),
            a = a.fb !== this.Md,
            this.trigger("change", this.getData(), a))
    };
    f.sanitize = function (a) {
        return a.replace(/[<>]/g, "").substr(0, this.maxLength)
    };
    f.validate = function (a, b) {
        if (-1 === a.Lb || -1 === a.fb)
            return !1;
        var c = a.fb !== this.Md,
            d = PF(b),
            d = !isNaN(d) || "" === b;
        c && aP(this.view, a).toggleClass("tableView__input--numerical", !!d).toggleClass("tableView__input--nonNumerical", !d);
        bP(this.view, a, !b.length);
        b = this.data[a.Lb].reduce(function (a, b) {
            return !a.length && !b.length
        });
        this.view.$('.tableView__row[data-row\x3d"' + a.Lb + '"]').toggleClass("tableView__row--empty", !!b);
        return d
    };

    function hP(a, b, c) {
        var d = b.index,
            e = b.value;
        switch (b.keyCode) {
            case 13:
                c && c();
                b.shiftKey ? a.insertRow(d.Lb) : b.altKey ? mP(a, d) : nP(a, d);
                break;
            case 38:
                c && c();
                mP(a, d);
                break;
            case 40:
                c && c();
                nP(a, d);
                break;
            case 37:
                0 == b.selectionStart && 0 == b.selectionEnd && (c && c(),
                    oP(a, d));
                break;
            case 39:
                b.selectionStart == e.length && b.selectionEnd == e.length && (c && c(),
                    pP(a, d));
                break;
            case 8:
                0 === e.length && (b = 0 === a.data[d.Lb].reduce(function (a, b) {
                        return a.length + b.length
                    }),
                    0 === d.fb && b ? (c && c(),
                        a.deleteRow(d.Lb),
                        qP(a, d)) : (c && c(),
                        oP(a, d)))
        }
    }
    f.Hp = function (a, b) {
        var c = a.index;
        switch (a.keyCode) {
            case 9:
                b && b();
                a.shiftKey ? qP(this, c) : (a = c.fb === this.Ni - 1,
                    c.Lb === this.data.length - 1 && a && jP(this),
                    c.Lb <= this.data.length - 1 && (a && (c.Lb = Math.min(c.Lb + 1, this.Kj)),
                        c.fb = (c.fb + 1) % this.Ni,
                        this.$h(c)));
                break;
            case 27:
                b && b(),
                    this.view.blur(this.Mt)
        }
    };

    function iP(a, b, c, d) {
        d && rP(a);
        d = -1 !== c.indexOf("\n") ? "\n" : "\r";
        var e = [];
        c.split(d).forEach(function (a) {
            return e.push(a.split("\t"))
        });
        c = function (a, b) {
            return _.findIndex(a, function (a) {
                a = a.slice(b + 1);
                return _.any(a, function (a) {
                    return !isNaN(parseFloat(a))
                })
            })
        }(e, a.Md);
        0 < c && a.JO(e[c - 1]);
        var g;
        for (c = Math.max(0, c); c < e.length && c !== a.Kj; c++,
            b.Lb++)
            for (b.Lb >= a.data.length && a.insertRow(b.Lb - 1, lP(a, b.Lb + 1), !0),
                d = 0; d < Math.min(e[c].length, a.Ni - b.fb) && d !== a.Ni; d++) {
                g = d + b.fb;
                var h = a.sanitize(e[c][d]);
                g = {
                    Lb: b.Lb,
                    fb: g
                };
                a.ak(g, h, !0);
                a.view.ak(g, h, !0);
                a.validate(g, h)
            }
        g && (a.$h(g),
            a.trigger("change", a.getData(), !0))
    }
    f.$h = function (a, b) {
        this.trigger("focus", a);
        !b && this.view.$h(a)
    };

    function nP(a, b) {
        b.Lb + 1 < a.Kj && (b.Lb === a.data.length - 1 ? jP(a) : (b.Lb++,
            a.$h(b)))
    }

    function mP(a, b) {
        0 <= --b.Lb && a.$h(b)
    }

    function pP(a, b) {
        b.fb + 1 < a.Ni && (b.fb++,
            a.$h(b))
    }

    function oP(a, b) {
        0 <= --b.fb && a.$h(b)
    }

    function qP(a, b) {
        var c = 0 !== b.Lb;
        0 !== b.fb ? (b.fb--,
            a.$h(b)) : c && (b.Lb = Math.max(0, b.Lb - 1),
            b.fb = a.Ni - 1,
            a.$h(b))
    }
    f.getData = function () {
        return JSON.parse(JSON.stringify(this.data))
    };

    function lP(a, b) {
        for (var c = [], d = 0; d < a.Ni; d++)
            d === a.Md ? c.push(qe(a.u, b)) : c.push(a.u.format("editorToolbarTableValue"));
        return c
    }
    f.insertRow = function (a, b, c) {
        var d = a + 1;
        b = b || lP(this, d + 1);
        var e = !0,
            g = 0;
        this.data.forEach(function (a) {
            a.reduce(function (a, b) {
                return "" === a && "" === b
            }) && g++
        });
        b.forEach(function (a) {
            return e = e && 0 == a.length
        });
        this.data.length < this.Kj && 0 === g ? (this.data.splice(d, 0, b),
            this.view.insertRow(a, e, this.maxLength, b)) : this.data.length === this.Kj && fP(this.view, !1);
        this.$h({
            Lb: d,
            fb: this.Mt.fb
        }, c);
        a = this.Mt.fb !== this.Md;
        !c && this.trigger("change", this.getData(), a)
    };

    function jP(a, b) {
        a.insertRow(a.data.length - 1);
        void 0 !== b && a.$h({
            fb: b,
            Lb: a.data.length - 1
        })
    }
    f.deleteRow = function (a) {
        if (1 === this.data.length)
            return {
                fb: 0,
                Lb: a
            };
        eP(this.view, a);
        this.data.splice(a, 1);
        this.data.length < this.Kj && fP(this.view, !0);
        a = this.Mt.fb !== this.Md;
        this.trigger("change", this.getData(), a)
    };

    function rP(a) {
        a.data.length || (a.data = [lP(a, 1)]);
        for (var b = a.data.length - 1; 0 <= b; b--)
            if (0 === b)
                for (var c = 0; c < a.Ni; c++)
                    a.ak({
                        fb: c,
                        Lb: b
                    }, "", !0),
                    a.view.ak({
                        fb: c,
                        Lb: b
                    }, "", !0);
            else
                a.data.splice(b, 1),
                eP(a.view, b);
        b = {
            fb: 0,
            Lb: 0
        };
        a.Mt = b;
        a.$h(b, !0);
        a.data.length < a.Kj && fP(a.view, !0)
    }
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.trigger = Backbone.Events.trigger;
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;

    function sP(a) {
        var b = this;
        Backbone.View.call(this, {
            el: a.el,
            events: {
                "mouseover li": function (a) {
                    return $(a.currentTarget).addClass("hovering")
                },
                "mouseout li": function (a) {
                    return $(a.currentTarget).removeClass("hovering")
                },
                "hover li.selectable": function (a) {
                    b.yL || b.trigger("hover", $(a.currentTarget).index() - $(a.currentTarget).prevAll("li").not(".selectable").length)
                },
                "mouseup li.selectable": function (a) {
                    b.trigger("trigger", $(a.currentTarget).index() - $(a.currentTarget).prevAll("li").not(".selectable").length, a)
                },
                "click li:not(.selectable)": function () {
                    b.trigger("clickNonSelectable")
                }
            }
        });
        this.yL = !1;
        this.jP = _.debounce(this.jP, 500);
        this.Hp = this.Hp.bind(this);
        $(document).on("keydown", this.Hp)
    }
    t(sP, Backbone.View);

    function tP(a) {
        var b = $(uP({
            className: a.className ? " " + a.className : ""
        }));
        a = a.elements.map(function (a) {
            return $("\x3cli\x3e").toggleClass("selectable", a.mW).toggleClass("toolbar__menuHeader", a.T0).append(a.element)
        });
        var c;
        (c = b.find("ul")).append.apply(c, [].concat(la(a)));
        return new sP({
            el: b[0]
        })
    }
    f = sP.prototype;
    f.select = function (a) {
        this.$("li.active").removeClass("active");
        this.$("li.selectable").eq(a).addClass("active")
    };
    f.TA = function (a) {
        var b = this.$("li.active").position().top,
            c = this.$(".menuList__inner"),
            d = this.$el.outerHeight(),
            b = c.scrollTop() + b - d / 2;
        a ? c.scrollTop(b) : c.stop().animate({
            scrollTop: b
        }, 100)
    };
    f.remove = function () {
        $(document).off("keydown", this.Hp);
        Backbone.View.prototype.remove.call(this)
    };
    f.jP = function () {
        this.yL = !1
    };
    f.Hp = function (a) {
        if ("visible" === this.$el.css("visibility")) {
            this.yL = !0;
            this.jP();
            if (38 === a.which)
                this.trigger("keyUp", a);
            else if (40 === a.which)
                this.trigger("keyDown", a);
            else if (9 === a.which && a.shiftKey)
                this.trigger("keyShiftTab", a);
            else if (9 === a.which)
                this.trigger("keyTab", a);
            else if (13 === a.which)
                this.trigger("keyEnter", a);
            else if (27 === a.which)
                this.trigger("keyEsc", a);
            else
                return;
            a.preventDefault();
            return !1
        }
    };

    function vP(a, b, c) {
        this.element = a instanceof jQuery ? a : $(a);
        this.mW = b;
        this.T0 = c
    }
    var uP = _.template('\n  \x3cdiv class\x3d"menuList\x3c%- className %\x3e"\x3e\n    \x3cul class\x3d"menuList__inner"\x3e\x3c/ul\x3e\n  \x3c/div\x3e\n');

    function wP(a) {
        var b = this;
        this.index = a.index;
        this.In = a.In;
        this.view = a.view;
        this.listenTo(this.view, {
            keyUp: function () {
                return xP(b, !1)
            },
            keyDown: function () {
                return yP(b, !1)
            },
            keyTab: function () {
                return yP(b, !0)
            },
            keyShiftTab: function () {
                return xP(b, !0)
            },
            keyEnter: function (a) {
                null !== b.index && b.trigger("select", b.index, b.In[b.index || 0], a)
            },
            keyEsc: function () {
                return b.trigger("cancel")
            },
            hover: function (a) {
                b.index = a;
                b.view.select(a)
            },
            trigger: function (a, d) {
                b.trigger("select", a, b.In[a], d)
            },
            clickNonSelectable: function () {
                return b.trigger("cancel")
            }
        })
    }

    function zP(a) {
        var b = tP({
            elements: a.elements,
            className: a.className
        });
        "undefined" !== typeof a.Ot && b.select(a.Ot);
        return new wP({
            index: "undefined" === typeof a.Ot ? null : a.Ot,
            In: a.elements.filter(function (a) {
                return a.mW
            }),
            view: b
        })
    }

    function xP(a, b) {
        a.index || (a.index = 0);
        a.index--;
        0 > a.index && (a.index = b ? a.In.length - 1 : 0);
        a.view.select(a.index);
        a.view.TA();
        a.trigger("activeChange", a.In[a.index])
    }
    f = wP.prototype;
    f.TA = function (a) {
        this.view.TA(a)
    };

    function yP(a, b) {
        a.index || (a.index = 0);
        a.index++;
        a.index >= a.In.length && (a.index = b ? 0 : a.In.length - 1);
        a.view.select(a.index);
        a.view.TA();
        a.trigger("activeChange", a.In[a.index])
    }
    f.remove = function () {
        this.stopListening();
        this.view.remove()
    };
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;

    function AP() {
        Backbone.View.call(this, {
            className: "sideDrawer",
            tagName: "section"
        });
        this.visible = !1;
        this.nn = [];
        this.$el.hide().append('\x3cdiv class\x3d"sideDrawer__frame"\x3e\x3c/div\x3e')
    }
    t(AP, Backbone.View);
    AP.prototype.events = function () {
        return {
            click: this.preventDefault
        }
    };
    AP.prototype.preventDefault = function (a) {
        a.stopPropagation();
        a.preventDefault()
    };
    AP.prototype.lt = function (a) {
        this.nn.push(a);
        this.$el.find(".sideDrawer__frame").append(a.$el);
        return this
    };

    function GB(a, b) {
        b && !a.visible ? (a.visible = !0,
            a.$el.show(),
            a.$el.addClass("sideDrawer--showing"),
            a.$el.removeClass("sideDrawer--hiding")) : !b && a.visible && BP(a)
    }

    function BP(a) {
        a.visible = !1;
        a.$el.addClass("sideDrawer--hiding");
        a.$el.removeClass("sideDrawer--showing");
        P.delay(200 * 1.1).then(function () {
            return a.$el.hide()
        })
    }
    AP.prototype.remove = function () {
        this.trigger("remove");
        this.nn.forEach(function (a) {
            a.stopListening();
            a.remove()
        });
        Backbone.View.prototype.remove.call(this)
    };

    function CP() {}

    function DP() {
        this.type = "separator"
    }
    t(DP, CP);

    function EP(a, b) {
        DP.call(this);
        this.id = a;
        this.label = b
    }
    t(EP, DP);

    function FP(a, b, c) {
        c = void 0 === c ? {} : c;
        this.id = a;
        this.label = "number" == typeof b ? b.toFixed(1).toString().replace(".0", "") : b;
        this.Ts = (c.Ts || b).toString();
        this.rf = !!c.rf;
        this.Pm = c.Pm;
        this.enabled = void 0 === c.enabled ? !0 : c.enabled;
        this.hidden = !!c.hidden;
        this.icon = !!c.icon;
        this.Lf = c.Lf;
        this.$i = !!c.$i;
        this.Re = c.Re || "no";
        "string" == typeof c.Ie ? (a = c.Ie,
            b = -1 < navigator.platform.indexOf("Mac") ? "" : "Ctrl ",
            a = a.replace("^", b)) : a = void 0;
        this.Ie = a
    }
    t(FP, CP);

    function GP(a, b, c) {
        this.id = a;
        this.label = b;
        this.placeholder = c;
        this.type = "input"
    }
    t(GP, CP);

    function HP(a, b, c) {
        c = void 0 === c ? {} : c;
        this.id = a;
        this.label = b;
        this.type = "slider";
        this.min = c.min || 0;
        this.max = c.max || 100;
        this.step = c.step || 1
    }
    t(HP, CP);

    function IP(a, b, c) {
        this.color = a;
        this.label = b;
        this.index = c || 0;
        this.type = "color";
        this.target = "any"
    }
    t(IP, CP);

    function JP(a, b, c) {
        IP.call(this, a, b, c);
        this.target = "fill"
    }
    t(JP, IP);

    function KP(a, b, c) {
        IP.call(this, a, b, c);
        this.target = "text"
    }
    t(KP, IP);

    function LP(a, b) {
        var c = !1,
            d = new DP,
            e = [];
        a instanceof eB ? (e.push(new JP("", ne(b))),
            c = !0) : a.ob && a.ob().length && (e = e.concat(a.ob().map(function (a, c) {
                if (a instanceof Om)
                    return new JP(a.Ca(), ne(b), c);
                if ("string" === typeof a)
                    return new JP(a, ne(b), c);
                if (null === a)
                    return new JP("", ne(b), c)
            })),
            c = !0);
        if (a instanceof Ko || a.Zf && a.Zf() && (a.nT() || a.gp()))
            c && e.push(d),
            e.push(new FP("filter", b.format("editorToolbarImageFilter"), {
                enabled: a.pp(),
                hidden: a instanceof Ko && !a.Zf()
            }));
        if (a.gm || a instanceof Ko)
            c && -1 === e.indexOf(d) && e.push(d),
            e.push(new FP("crop", b.format("editorToolbarImageCrop"), {
                enabled: !(a.kp && a.kp()),
                hidden: a instanceof Ko && !a.gm
            }));
        if (a.lp()) {
            c && -1 === e.indexOf(d) && e.push(d);
            var g = [];
            g.push(new FP("flipHorizontal", b.format("editorToolbarElementFlipHorizontally"), {
                icon: !0
            }));
            g.push(new FP("flipVertical", b.format("editorToolbarElementFlipVertically"), {
                icon: !0
            }));
            e.push(new FP("flip", b.format("editorToolbarElementFlip"), {
                Lf: g,
                $i: !0
            }))
        }
        c && a.ez() && (-1 === e.indexOf(d) && e.push(d),
            e.push(new FP("gridSpacing", b.format("editorToolbarGridSpacing"), {
                Lf: [new HP("gridSpacing", b.format("editorToolbarGridSpacing"))]
            })));
        return e
    }

    function MP(a, b) {
        var c = [],
            d = {
                HorizontalAlignLeft: new FP("HorizontalAlignLeft", ee(b), {
                    icon: !0,
                    rf: !0
                }),
                HorizontalAlignCenter: new FP("HorizontalAlignCenter", ge(b), {
                    icon: !0,
                    rf: !0
                }),
                HorizontalAlignRight: new FP("HorizontalAlignRight", fe(b), {
                    icon: !0,
                    rf: !0
                }),
                VerticalAlignTop: new FP("VerticalAlignTop", he(b), {
                    icon: !0,
                    rf: !0
                }),
                VerticalAlignCenter: new FP("VerticalAlignCenter", ke(b), {
                    icon: !0,
                    rf: !0
                }),
                VerticalAlignBottom: new FP("VerticalAlignBottom", je(b), {
                    icon: !0,
                    rf: !0
                })
            },
            e = {
                HorizontalDistribute: new FP("HorizontalDistribute", le(b), {
                    icon: !0,
                    rf: !0
                }),
                VerticalDistribute: new FP("VerticalDistribute", me(b), {
                    icon: !0,
                    rf: !0
                })
            };
        c.push(new EP("AlignTo", b.format("editorToolbarElementAlignTo")));
        a.forEach(function (a) {
            d[a.id] && c.push(d[a.id])
        });
        c.push(new EP("SpaceEvenly", b.format("editorToolbarElementSpaceEvenly")));
        a.forEach(function (a) {
            e[a.id] && c.push(e[a.id])
        });
        return c
    }

    function NP(a, b, c) {
        var d = [],
            e = {
                group: new FP("group", c.format("editorToolbarElementGroup"), {
                    enabled: !1
                }),
                ungroup: new FP("ungroup", c.format("editorToolbarElementUngroup"), {
                    enabled: !0
                }),
                copy: new FP("copy", c.format("editorToolbarElementCopy")),
                arrange: new FP("arrange", c.format("editorToolbarElementArrange"), {
                    $i: !0,
                    Lf: [new FP("forward", c.format("editorToolbarElementForward"), {
                        icon: !0,
                        Ie: "^]",
                        rf: !0
                    }), new FP("back", c.format("editorToolbarElementBack"), {
                        icon: !0,
                        Ie: "^[",
                        rf: !0
                    })]
                }),
                transparency: new FP("transparency", de(c), {
                    icon: !0,
                    Lf: [new HP("transparency", de(c))]
                }),
                link: new FP("link", c.format("editorToolbarElementLink"), {
                    icon: !0,
                    Lf: [new GP("link", c.format("editorToolbarElementLinkApply"), c.format("editorToolbarElementLinkPlaceholder"))]
                }),
                "delete": new FP("delete", ce(c), {
                    icon: !0
                }),
                deletePlaceholderMenu: new FP("deleteMenu", ce(c), {
                    icon: !0,
                    $i: !0,
                    Lf: [new FP("imageDelete", c.format("editorToolbarDeleteMenuDeleteImage"), {
                        icon: !1
                    }), new FP("delete", oe(c), {
                        icon: !1
                    })]
                }),
                deleteElementMenu: new FP("deleteMenu", ce(c), {
                    icon: !0,
                    $i: !0,
                    Lf: [new FP("elementDelete", oe(c), {
                        icon: !1
                    }), new FP("delete", c.format("editorToolbarDeleteMenuDeleteGroup"), {
                        icon: !1
                    })]
                })
            };
        0 !== b.length && MP(b, c).forEach(function (a) {
            e.arrange.Lf.push(a)
        });
        d.push(new DP);
        var g = ["deletePlaceholder", "deleteElement"];
        a.forEach(function (b) {
            -1 < g.indexOf(b) || ("delete" === b ? (d.push(new FP("more", c.format("editorToolbarElementMore"), {
                Lf: [],
                $i: !0,
                enabled: !1
            })), -1 !== a.indexOf("deletePlaceholder") ? d.push(e.deletePlaceholderMenu) : -1 !== a.indexOf("deleteElement") ? d.push(e.deleteElementMenu) : d.push(e["delete"])) : d.push(e[b]))
        });
        return d
    };

    function OP(a, b) {
        a = goog.asserts.assertArray(a.items, "expected parameter 'items' of type list\x3c[color: string, disableTooltip: bool, editable: string, enabled: bool, icon: bool, id: string, index: float|int, label: string, placeholder: string, shortcut: string, submenu: list\x3c[color: string, disableTooltip: bool, editable: string, enabled: bool, icon: bool, id: string, label: string, placeholder: string, shortcut: string, target: string, tooltip: string, type: string, vertical: bool]\x3e, target: string, tooltip: string, type: string, vertical: bool]\x3e.");
        var c = '\x3cul class\x3d"toolbar__list"\x3e';
        if (a)
            for (var d = a.length, e = 0; e < d; e++) {
                var g = a[e];
                if ("color" == g.type)
                    g = PP({
                        color: g.color,
                        label: g.label,
                        index: g.index,
                        target: g.target
                    }, b);
                else if ("slider" == g.type) {
                    var h = g;
                    soy.asserts.assertType(goog.isString(h.id) || h.id instanceof goog.soy.data.SanitizedContent, "id", h.id, "string|goog.soy.data.SanitizedContent");
                    g = h.id;
                    soy.asserts.assertType(goog.isString(h.label) || h.label instanceof goog.soy.data.SanitizedContent, "label", h.label, "string|goog.soy.data.SanitizedContent");
                    var k = h.label;
                    soy.asserts.assertType(goog.isNumber(h.min), "min", h.min, "number");
                    var l = h.min;
                    soy.asserts.assertType(goog.isNumber(h.max), "max", h.max, "number");
                    var m = h.max;
                    soy.asserts.assertType(goog.isNumber(h.step), "step", h.step, "number");
                    h = h.step;
                    g = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"toolbar__item toolbar__item--slider"\x3e\x3clabel class\x3d"toolbar__label toolbar__label--' + soy.$$escapeHtmlAttribute(g) + '"\x3e' + soy.$$escapeHtml(k) + '\x3c/label\x3e\x3cdiv class\x3d"toolbar__sliderWrapper"\x3e\x3cdiv class\x3d"toolbar__sliderBackground"\x3e\x3c/div\x3e\x3cinput class\x3d"toolbar__slider toolbar__slider--' + soy.$$escapeHtmlAttribute(g) + '" type\x3d"range" min\x3d"' + soy.$$escapeHtmlAttribute(l) + '" max\x3d"' + soy.$$escapeHtmlAttribute(m) + '" step\x3d"' + soy.$$escapeHtmlAttribute(h) + '" /\x3e\x3c/div\x3e\x3cinput class\x3d"toolbar__sliderValue toolbar__sliderValue--' + soy.$$escapeHtmlAttribute(g) + '" type\x3d"number" min\x3d"' + soy.$$escapeHtmlAttribute(l) + '" max\x3d"' + soy.$$escapeHtmlAttribute(m) + '" step\x3d"' + soy.$$escapeHtmlAttribute(h) + '" disabled\x3d"disabled" /\x3e\x3c/li\x3e')
                } else if ("input" == g.type)
                    l = g,
                    soy.asserts.assertType(goog.isString(l.id) || l.id instanceof goog.soy.data.SanitizedContent, "id", l.id, "string|goog.soy.data.SanitizedContent"),
                    g = l.id,
                    soy.asserts.assertType(goog.isString(l.label) || l.label instanceof goog.soy.data.SanitizedContent, "label", l.label, "string|goog.soy.data.SanitizedContent"),
                    k = l.label,
                    soy.asserts.assertType(goog.isString(l.placeholder) || l.placeholder instanceof goog.soy.data.SanitizedContent, "placeholder", l.placeholder, "string|goog.soy.data.SanitizedContent"),
                    l = l.placeholder,
                    g = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"toolbar__item toolbar__item--input"\x3e\x3cinput class\x3d"toolbar__input toolbar__input--' + soy.$$escapeHtmlAttribute(g) + '" type\x3d"text" placeholder\x3d"' + soy.$$escapeHtmlAttribute(l) + '" /\x3e\x3cbutton class\x3d"button buttonSmall toolbar__submit toolbar__submit--' + soy.$$escapeHtmlAttribute(g) + '"\x3e' + soy.$$escapeHtml(k) + '\x3c/button\x3e\x3cdiv class\x3d"toolbar__inputLabel toolbar__inputLabel--' + soy.$$escapeHtmlAttribute(g) + '"\x3e\x3c/div\x3e\x3c/li\x3e');
                else if ("separator" == g.type)
                    g = '\x3cli class\x3d"toolbar__item toolbar__separator toolbar__subheading"\x3e' + (g.label ? '\x3cspan class\x3d"toolbar__label"\x3e' + soy.$$escapeHtml(g.label) + "\x3c/span\x3e" : "") + "\x3c/li\x3e";
                else {
                    var n = g,
                        g = b;
                    soy.asserts.assertType(goog.isString(n.id) || n.id instanceof goog.soy.data.SanitizedContent, "id", n.id, "string|goog.soy.data.SanitizedContent");
                    k = n.id;
                    soy.asserts.assertType(goog.isString(n.label) || n.label instanceof goog.soy.data.SanitizedContent, "label", n.label, "string|goog.soy.data.SanitizedContent");
                    l = n.label;
                    soy.asserts.assertType(goog.isString(n.Ts) || n.Ts instanceof goog.soy.data.SanitizedContent, "tooltip", n.Ts, "string|goog.soy.data.SanitizedContent");
                    m = n.Ts;
                    soy.asserts.assertType(null == n.rf || goog.isBoolean(n.rf) || 1 === n.rf || 0 === n.rf, "disableTooltip", n.rf, "boolean|null|undefined");
                    h = n.rf;
                    soy.asserts.assertType(null == n.icon || goog.isBoolean(n.icon) || 1 === n.icon || 0 === n.icon, "icon", n.icon, "boolean|null|undefined");
                    var p = n.icon;
                    soy.asserts.assertType(null == n.enabled || goog.isBoolean(n.enabled) || 1 === n.enabled || 0 === n.enabled, "enabled", n.enabled, "boolean|null|undefined");
                    var r = n.enabled;
                    soy.asserts.assertType(null == n.hidden || goog.isBoolean(n.hidden) || 1 === n.hidden || 0 === n.hidden, "hidden", n.hidden, "boolean|null|undefined");
                    var u = n.hidden;
                    soy.asserts.assertType(null == n.$i || goog.isBoolean(n.$i) || 1 === n.$i || 0 === n.$i, "vertical", n.$i, "boolean|null|undefined");
                    var v = n.$i;
                    soy.asserts.assertType(null == n.Re || n.Re instanceof goog.soy.data.SanitizedContent || goog.isString(n.Re), "editable", n.Re, "null|string|undefined");
                    var y = n.Re;
                    soy.asserts.assertType(null == n.Ie || n.Ie instanceof goog.soy.data.SanitizedContent || goog.isString(n.Ie), "shortcut", n.Ie, "null|string|undefined");
                    var q = n.Ie;
                    soy.asserts.assertType(null == n.Lf || goog.isArray(n.Lf), "submenu", n.Lf, "?Array\x3c{color: string, disableTooltip: boolean, editable: string, enabled: boolean, hidden: boolean, icon: boolean, id: string, index: number, label: string, placeholder: string, shortcut: string, submenu: !Array\x3c{color: string, disableTooltip: boolean, editable: string, enabled: boolean, hidden: boolean, icon: boolean, id: string, label: string, placeholder: string, shortcut: string, target: string, tooltip: string, type: string, vertical: boolean}\x3e, target: string, tooltip: string, type: string, vertical: boolean}\x3e|undefined");
                    n = n.Lf;
                    g = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"toolbar__item toolbar__item--' + soy.$$escapeHtmlAttribute(k) + " " + (r ? "enabled" : "disabled") + " " + (u ? "hidden" : "") + " " + (n ? "toolbar__item--submenu" : "") + '"\x3e\x3cbutton data-item\x3d"' + soy.$$escapeHtmlAttribute(k) + '" class\x3d"toolbar__button toolbar__button--' + soy.$$escapeHtmlAttribute(k) + " " + (p ? "toolbar__button--icon" : "") + '"\x3e' + ("number" == y ? '\x3cinput class\x3d"toolbar__inputButton toolbar__inputButton--' + soy.$$escapeHtmlAttribute(k) + '" type\x3d"text" value\x3d"' + soy.$$escapeHtmlAttribute(l) + '" /\x3e' : '\x3cspan class\x3d"toolbar__label toolbar__label--' + soy.$$escapeHtmlAttribute(k) + '"\x3e' + soy.$$escapeHtml(l) + '\x3c/span\x3e\x3cspan class\x3d"toolbar__spinner"\x3e\x3c/span\x3e' + (q && h ? '\x3cspan class\x3d"toolbar__shortcut toolbar__shortcut--' + soy.$$escapeHtmlAttribute(k) + '"\x3e' + soy.$$escapeHtml(q) + "\x3c/span\x3e" : "")) + "\x3c/button\x3e" + (h ? "" : '\x3cdiv class\x3d"toolbar__tooltip toolbar__tooltip--' + soy.$$escapeHtmlAttribute(k) + '"\x3e' + soy.$$escapeHtml(m) + (q ? '\x3cspan class\x3d"toolbar__shortcut toolbar__shortcut--' + soy.$$escapeHtmlAttribute(k) + '"\x3e' + soy.$$escapeHtml(q) + "\x3c/span\x3e" : "") + "\x3c/div\x3e") + (n ? '\x3cmenu class\x3d"toolbar toolbar--' + soy.$$escapeHtmlAttribute(k) + " " + (v ? "toolbar--vertical" : "") + '"\x3e' + OP({
                        items: n
                    }, g) + "\x3c/menu\x3e" : "") + "\x3c/li\x3e")
                }
                c += g
            }
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(c + "\x3c/ul\x3e")
    }

    function PP(a, b) {
        b = b || {};
        soy.asserts.assertType(goog.isString(a.color) || a.color instanceof goog.soy.data.SanitizedContent, "color", a.color, "string|goog.soy.data.SanitizedContent");
        var c = a.color;
        soy.asserts.assertType(goog.isNumber(a.index), "index", a.index, "number");
        var d = a.index;
        soy.asserts.assertType(goog.isString(a.label) || a.label instanceof goog.soy.data.SanitizedContent, "label", a.label, "string|goog.soy.data.SanitizedContent");
        var e = a.label;
        soy.asserts.assertType(goog.isString(a.target) || a.target instanceof goog.soy.data.SanitizedContent, "target", a.target, "string|goog.soy.data.SanitizedContent");
        a = a.target;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"toolbar__item toolbar__item--color toolbar__item--color--' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cbutton data-colorindex\x3d"' + soy.$$escapeHtmlAttribute(d) + '" class\x3d"toolbar__button toolbar__button--color toolbar__button--icon toolbar__target--' + soy.$$escapeHtmlAttribute(a) + " " + ("" == c ? "noColor" : "") + '" ' + ("" != c ? 'style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + "background-color: " + soy.$$escapeHtmlAttribute(soy.$$filterCssValue(c)) + '"' : "") + '\x3e\x3c/button\x3e\x3cdiv class\x3d"toolbar__tooltip"\x3e' + soy.$$escapeHtml(e) + "\x3c/div\x3e\x3c/li\x3e")
    }

    function QP(a) {
        soy.asserts.assertType(goog.isString(a.url) || a.url instanceof goog.soy.data.SanitizedContent, "url", a.url, "string|goog.soy.data.SanitizedContent");
        var b = a.url;
        soy.asserts.assertType(goog.isNumber(a.width), "width", a.width, "number");
        var c = a.width;
        soy.asserts.assertType(goog.isNumber(a.height), "height", a.height, "number");
        a = a.height;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"' + soy.$$escapeHtmlAttribute(c) + '" height\x3d"' + soy.$$escapeHtmlAttribute(a) + '" viewBox\x3d"0 0 ' + soy.$$escapeHtmlAttribute(c) + " " + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdefs\x3e\x3cfilter id\x3d"invert"\x3e\x3cfeColorMatrix in\x3d"SourceGraphic" type\x3d"matrix" values\x3d"-1 0 0 0 1 0 -1 0 0 1 0 0 -1 0 1 0 0 0 1 0"/\x3e\x3c/filter\x3e\x3c/defs\x3e\x3cimage x\x3d"0" y\x3d"0" width\x3d"' + soy.$$escapeHtmlAttribute(c) + '" height\x3d"' + soy.$$escapeHtmlAttribute(a) + '" xlink:href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(b)) + '" filter\x3d"url(#invert)"/\x3e\x3c/svg\x3e')
    };

    function RP(a) {
        var b = "toolbar ",
            b = a.name ? b + " toolbar--" + a.name : b,
            b = a.OC ? b + " " + a.OC : b,
            b = a.pi ? b + " toolbar--" + a.pi : b;
        Backbone.View.call(this, {
            className: b,
            tagName: "menu"
        });
        this.aa = a.aa;
        this.name = a.name;
        this.pi = a.pi;
        this.element = a.element;
        this.OF = a.OF;
        this.wD = !1
    }
    t(RP, Backbone.View);
    f = RP.prototype;
    f.events = function () {
        return {
            "mousedown \x3e .toolbar__list \x3e .toolbar__item--submenu.enabled \x3e .toolbar__button": this.mX,
            "mouseup .toolbar__item--submenu:not(.toolbar__item--more).enabled .toolbar .toolbar__item \x3e .toolbar__button": this.m7,
            "click \x3e .toolbar__list \x3e .toolbar__item--submenu.enabled \x3e .toolbar__button": this.l7,
            "click .toolbar__item--more.enabled .toolbar .toolbar__button": this.mX
        }
    };
    f.mX = function (a) {
        a = $(a.target);
        this.wD = !0;
        SP(this, a.closest(".toolbar__item"), a)
    };
    f.m7 = function (a) {
        a = $(a.target).closest(".toolbar__item");
        var b = a.find(".toolbar__button \x3e .toolbar__inputButton");
        !b.length && this.wD && a.parents(".toolbar__item--submenuExpanded").length ? (TP(this),
            this.wD = !1) : b.length && b.addClass("toolbar__inputButton--active").focus().select()
    };
    f.l7 = function () {
        this.wD = !1
    };

    function SP(a, b, c) {
        if (b.hasClass("toolbar__item--submenu") || b.hasClass("toolbar__item--color")) {
            a.trigger("openSubmenu", b, c);
            var d = b.hasClass("toolbar__item--more"),
                e = b.parents(".toolbar__item--more").length,
                g = a.$el.find(".toolbar--more");
            if (e)
                g.after(b.find(".toolbar").clone()),
                g.addClass("hidden");
            else {
                c = c.hasClass("toolbar__inputButton--fontSize") && b.hasClass("toolbar__item--submenuExpanded");
                d && g.hasClass("hidden") || c || !a.OF || a.OF();
                b.hasClass("toolbar__item--submenuExpanded") || b.addClass("toolbar__item--submenuExpanded");
                var h = b.find(".toolbar__button \x3e .toolbar__inputButton");
                a = b.find(".toolbar:first \x3e .toolbar__list \x3e .toolbar__item--input");
                d = b.find(".menuList").length;
                h.length ? Sk(function () {
                    h.addClass("toolbar__inputButton--active").focus().select()
                }) : d ? b.find(".menuList__inner .active").focus() : a.length && a.focus();
                g.removeClass("hidden");
                g.next(".toolbar").remove()
            }
        }
    }

    function TP(a, b) {
        b = void 0 === b ? 0 : b;
        var c = a.$el.find(".toolbar__item--submenuExpanded");
        if (c) {
            var d = c.parents(".toolbar").data("element");
            a.trigger("closeSubmenu", d)
        }
        a.$el.find(".toolbar__inputButton--active").removeClass("toolbar__inputButton--active");
        return P.delay(b).then(function () {
            return c.addClass("toolbar__item--submenuCollapsing")
        }).delay(200).then(function () {
            return c.removeClass("toolbar__item--submenuExpanded toolbar__item--submenuCollapsing")
        })
    }
    f.O = function () {
        return this.element
    };
    f.getName = function () {
        return this.name
    };
    f.Wt = function (a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = this;
        b.forEach(function (a) {
            return d.$el.find(".toolbar__item--" + a).removeClass("disabled").addClass("enabled")
        })
    };
    f.wJ = function (a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = this;
        b.forEach(function (a) {
            return d.$el.find(".toolbar__item--" + a).removeClass("enabled").addClass("disabled")
        })
    };
    f.JE = function (a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = this;
        b.forEach(function (a) {
            return d.$el.find(".toolbar__item--" + a).addClass("hidden")
        })
    };
    f.GW = function (a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = this;
        b.forEach(function (a) {
            return d.$el.find(".toolbar__item--" + a).removeClass("hidden")
        })
    };
    f.Mf = function (a, b) {
        b ? this.Wt(a) : this.wJ(a)
    };

    function UP(a, b) {
        a.$el.find(".toolbar__item--fontFamily .toolbar__spinner").toggleClass("toolbar__spinner--visible", b)
    }

    function VP(a, b, c, d) {
        c = "number" == typeof c ? c.toFixed(1).toString().replace(".0", "") : c;
        a.$el.find(".toolbar__label--" + b).text(c);
        a.$el.find(".toolbar__inputButton--" + b).val(c);
        d && a.$el.find(".toolbar__label--" + b).css("font-family", d)
    }

    function WP(a, b, c) {
        a.$el.find(".toolbar__item--" + b).toggleClass("toolbar__item--active", c)
    }
    f.NQ = function (a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = this;
        b.forEach(function (a) {
            var b = d.$el.find(".toolbar__item--" + a);
            b.addClass("toolbar__item--active");
            b.closest(".toolbar").closest(".toolbar__item--submenu:not(.toolbar__item--more)").children(".toolbar__button:first").addClass("toolbar__activeItem--" + a)
        });
        return this
    };
    f.MR = function (a) {
        for (var b = [], c = 0; c < arguments.length; ++c)
            b[c - 0] = arguments[c];
        var d = this;
        b.forEach(function (a) {
            var b = d.$el.find(".toolbar__item--" + a);
            b.removeClass("toolbar__item--active");
            b.closest(".toolbar").closest(".toolbar__item--submenu:not(.toolbar__item--more)").children(".toolbar__button:first").removeClass("toolbar__activeItem--" + a)
        });
        return this
    };
    f.nC = function (a, b) {
        this.$el.find(".toolbar__item--" + a).append(b.$el).addClass("toolbar__item--submenu")
    };
    f.tx = function (a) {
        "right" === this.pi ? this.$el.appendTo(a) : this.$el.prependTo(a)
    };
    f.setFillColor = function (a, b, c) {
        this.setColor(a, b, c, "fill")
    };

    function XP(a, b, c, d) {
        a.setColor(b, c, d, "text")
    }
    f.setColor = function (a, b, c, d) {
        function e(a) {
            var b = "",
                c = 100 / a.length;
            a.forEach(function (d, e) {
                var g = e * c + "%",
                    r = (e + 1) * c + "%";
                0 == e ? b += d + " " + r + "," : e == a.length - 1 ? b += d + " " + g : (b += d + " " + g + ",",
                    b += d + " " + r + ",")
            });
            return {
                L7: "-webkit-linear-gradient(left, " + b + ")",
                P6: "linear-gradient(to right, " + b + ")"
            }
        }
        c = c || 0;
        var g = this.$el.find(".toolbar__button--color");
        d && (g = g.filter(".toolbar__target--" + d));
        g = g.filter('[data-colorindex\x3d"' + c + '"]');
        g.length || (g = this.$el.not(".toolbar--element").find(".toolbar__list"),
            "fill" === d ? g.append(PP(new JP("", b, c)).toString()) : "text" === d ? g.append(PP(new KP("", b, c)).toString()) : g.append(PP(new IP("", b, c)).toString()),
            g = this.$el.find(".toolbar__button--color").filter('[data-colorindex\x3d"' + c + '"]'));
        0 < a.length ? (g.removeClass("noColor"),
            1 == a.length ? -1 < a[0].indexOf("url") || a[0] === nA ? g.css("background-color", "").css("background-image", "").addClass("noColor") : g.css("background-color", a[0]).css("background-image", "") : (a = a.map(function (a) {
                    return a || "black"
                }),
                a = e(a),
                g.css("background-color", "").css("background-image", a.L7).css("background-image", a.P6))) : this.element.data("fill") ? (a = gh(this.element.data("fill")),
            g.css("background-color", a.Ca()).css("background-image", "").removeClass("noColor")) : g.css("background-color", "").css("background-image", "").addClass("noColor")
    };

    function YP(a) {
        a.$el.find(".toolbar__separator").removeClass("hidden");
        a = a.$el.find(".toolbar__item:not(.hidden)").last();
        a.hasClass("toolbar__separator") && a.addClass("hidden")
    }
    f.addClass = function (a) {
        this.$el.addClass(a)
    };
    f.removeClass = function (a) {
        this.$el.addClass(a)
    };
    f.render = function (a) {
        this.el.innerHTML = OP({
            items: a
        });
        return this
    };

    function ZP(a) {
        this.view = a.view;
        this.items = a.items;
        this.element = a.element;
        this.qd = a.element.data("canvaElement");
        this.Wn = [];
        this.cU = 0
    }

    function $P(a) {
        var b = new RP({
            aa: a.aa,
            name: a.name,
            OC: a.OC,
            pi: a.pi,
            element: a.element,
            OF: function () {
                return a.Ge.trigger("hideContextualControlsRequested")
            }
        });
        return (new ZP({
            element: a.element,
            view: b,
            items: a.items
        })).render()
    }

    function aQ(a) {
        a.view.$el.css("visibility", "hidden");
        a.view.$el.find(".toolbar__item").each(function (a, c) {
            c = $(c);
            var d = c.outerWidth(!0);
            0 === a && (d += c.position().left);
            c.attr("data-width", d)
        });
        a.view.$el.find(".toolbar__item--more").addClass("disabled").removeClass("enabled");
        a.view.$el.css("visibility", "visible")
    }
    f = ZP.prototype;
    f.eE = function () {
        var a = this,
            b = this.Ne && this.Ne.width();
        if (b !== this.cU) {
            this.cU = b;
            var c = function () {
                    return a.view.$(".toolbar__item--collapsed").length
                },
                d = this.view.$el.filter(".toolbar--element").find("\x3e .toolbar__list \x3e .toolbar__item").not(".toolbar__item--delete, .toolbar__item--more, .toolbar__item--deleteMenu"),
                e = this.view.$el.not(".toolbar--element").find("\x3e .toolbar__list \x3e .toolbar__item"),
                g = this.view.$(".toolbar__item--more"),
                h = g.data("width"),
                k = 20;
            this.view.$("\x3e .toolbar__list \x3e .toolbar__item").not(".toolbar__item--collapsed").not(".toolbar__item--more.disabled").each(function (a, b) {
                k += $(b).data("width")
            });
            if (k > b)
                for (c = e.get().concat(d.get()).reverse(),
                    d = 0; d < c.length && (e = $(c[d]),
                        e.hasClass("toolbar__item--collapsed") || (e.addClass("toolbar__item--collapsed"),
                            k -= parseInt(e.data("width"), 10),
                            g.hasClass("disabled") && (k += h,
                                g.removeClass("disabled").addClass("enabled")), !(k < b))); d++)
            ;
            else if (c() && k < b) {
                h = e.filter(".toolbar__item--collapsed").get().concat(d.filter(".toolbar__item--collapsed").get());
                for (d = 0; d < h.length; d++)
                    if (e = $(h[d]),
                        k + e.data("width") < b)
                        k += e.data("width"),
                        e.removeClass("toolbar__item--collapsed");
                    else
                        break;
                1 >= c() && (this.view.$(".toolbar__item--collapsed").removeClass("toolbar__item--collapsed"),
                    g.removeClass("enabled").addClass("disabled"))
            }
            var b = this.view.$el.not(".toolbar--element").find(".toolbar__item--collapsed").get(),
                g = this.view.$el.filter(".toolbar--element").find(".toolbar__item--collapsed").get(),
                l = this.view.$(".toolbar--more ul");
            l.empty();
            b.forEach(function (a) {
                return l.append($(a).clone().removeClass("toolbar__item--collapsed"))
            });
            g.forEach(function (a) {
                return l.append($(a).clone().removeClass("toolbar__item--collapsed"))
            });
            this.view.$(".toolbar").each(function (a, b) {
                b.getBoundingClientRect().right > window.innerWidth && $(b).addClass("toolbar--alignRight")
            });
            b = this.view.$el.filter(".toolbar--element").find("\x3e .toolbar__list \x3e .toolbar__item:last-child").find("\x3e .toolbar__button .toolbar__tooltip");
            b.length && b.get(0).getBoundingClientRect().right > window.innerWidth && b.addClass("toolbar__tooltip--alignRight")
        }
    };
    f.O = function () {
        return this.element
    };
    f.nC = function (a, b) {
        this.view.nC(a, b.view);
        this.Wn.push(b)
    };

    function bQ(a, b) {
        a.view.$el = a.view.$el.add(b.view.$el);
        a.Wn.push(b)
    }
    f.save = function (a) {
        this.view.$el.data("element", this.element);
        this.view.$el.data("toolbar", this);
        this.element.data(a || "toolbar", this)
    };
    f.hide = function () {
        this.view.$el.hide()
    };
    f.show = function () {
        this.view.$el.show()
    };
    f.tx = function (a, b) {
        this.Ne = a;
        this.activate();
        this.Ne.empty().append('\x3cdiv class\x3d"toolbar__wrapper"\x3e\x3c/div\x3e');
        this.view.tx(this.Ne.find(".toolbar__wrapper"));
        aQ(this);
        this.eE();
        this.jO = _.debounce(this.eE.bind(this), 300);
        this.viewport = b;
        this.viewport.on("resize", this.jO)
    };
    f.activate = function () {
        this.Ne && this.Ne.addClass("toolbarContainer--active")
    };
    f.hD = function () {
        this.Ne && this.Ne.removeClass("toolbarContainer--active")
    };

    function cQ(a, b) {
        a.Ne && a.Ne.toggleClass("toolbarContainer--noAnimation", !b)
    }

    function dQ(a, b, c) {
        b.forEach(function (b, e) {
            b instanceof Om ? a.view.setFillColor([b.Ca()], c, e) : "string" == typeof b && a.view.setFillColor([b], c, e)
        });
        YP(a.view)
    }

    function eQ(a) {
        function b(a) {
            a.forEach(function (a) {
                a instanceof wP && a.TA(!0);
                a.Wn && b(a.Wn)
            })
        }
        a.Wn && b(a.Wn)
    }
    f.addClass = function (a) {
        this.view.$el.addClass(a)
    };
    f.removeClass = function (a) {
        this.view.$el.addClass(a)
    };
    f.data = function (a) {
        return "canvaElement" === a ? this.qd : this.element
    };
    f.zn = function (a) {
        this.Wn.forEach(function (b) {
            b.view.getName() === a && b.remove(!0)
        })
    };
    f.remove = function (a) {
        var b = this;
        this.jO && this.viewport.off("resize", this.jO);
        a ? (cQ(this, !1),
            this.hD(),
            this.Wn.forEach(function (a) {
                a.remove(!0)
            }),
            this.view.remove()) : (this.hD(),
            P.delay(400).then(function () {
                cQ(b, !0);
                b.Wn.forEach(function (a) {
                    a.remove(!0)
                });
                b.view.remove()
            }))
    };
    f.render = function () {
        this.view.render(this.items);
        return this
    };
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;

    function fQ(a, b, c) {
        a = a || "Glegoo";
        b = b === gD ? c.Gd() : b;
        return [new FP("fontFamily", a, {
            Ts: c.format("editorToolbarFontFamilyTooltip")
        }), new FP("fontSize", b, {
            Ts: c.format("editorToolbarFontSizeTooltip"),
            Re: "number"
        }), new DP, new KP("", ne(c)), new DP, new FP("bold", c.format("editorToolbarTextBold"), {
            icon: !0,
            Ie: "^B"
        }), new FP("italic", c.format("editorToolbarTextItalic"), {
            icon: !0,
            Ie: "^I"
        }), new FP("textAlign", c.textAlign(), {
            icon: !0,
            Lf: [new FP("left", c.format("editorToolbarTextLeft"), {
                icon: !0,
                Ie: "^ Shift L"
            }), new FP("center", c.format("editorToolbarTextCenter"), {
                icon: !0,
                Ie: "^ Shift C"
            }), new FP("right", c.format("editorToolbarTextRight"), {
                icon: !0,
                Ie: "^ Shift R"
            })]
        }), new FP("uppercase", c.format("editorToolbarTextUppercase"), {
            icon: !0,
            Ie: "^ Shift K"
        }), new FP("list", c.format("editorToolbarTextList"), {
            icon: !0
        }), new DP, new FP("textSpacing", c.format("editorToolbarTextSpacing"), {
            Lf: [new HP("letterSpacing", c.letterSpacing(), {
                min: -200,
                max: 800,
                step: 10
            }), new HP("lineHeight", c.lineHeight(), {
                min: .5,
                max: 2.5,
                step: .01
            }), new DP, new FP("textVerticalAlign", c.format("editorToolbarResizeTextBox")), new FP("textVerticalAlignTop", c.format("editorToolbarResizeTextBoxFromTop"), {
                icon: !0,
                Ie: "^ Alt T"
            }), new FP("textVerticalAlignMiddle", c.format("editorToolbarResizeTextBoxFromMiddle"), {
                icon: !0,
                Ie: "^ Alt M"
            }), new FP("textVerticalAlignBottom", c.format("editorToolbarResizeTextBoxFromBottom"), {
                icon: !0,
                Ie: "^ Alt B"
            })]
        })]
    }

    function gQ(a) {
        function b(b) {
            var d = b.name || b.family,
                e = b.displayName || d,
                g = c(b.R),
                d = $('\x3cbutton href\x3d"#"\n          data-name\x3d"' + d + '"\n          data-display-name\x3d"' + e + '"\n          data-family\x3d"' + b.family + '"\n          data-image-src\x3d"' + g.url + '"\n          title\x3d"' + e + '"\n          class\x3d"toolbar__button toolbar__button--font"\x3e\x3c/button\x3e');
            B || e !== E && b.family !== E || (d.addClass("toolbar__button--selected"),
                B = !0);
            a.AX ? (e = $('\x3cdiv class\x3d"toolbar__thumbnailSVG"\x3e\x3c/div\x3e').append(QP(g).toString()),
                d.append(e)) : d.append($('\x3cimg class\x3d"toolbar__thumbnail" src\x3d"' + g.url + '" width\x3d"' + g.width + '" height\x3d"' + g.height + '" alt\x3d"' + e + '" /\x3e'));
            b.vb && (b = c(b.vb),
                a.AX ? (b = $('\x3cdiv class\x3d"toolbar__fontSampleTextSVG"\x3e\x3c/div\x3e').append(QP(b).toString()),
                    d.append(b)) : d.append($('\x3cimg class\x3d"toolbar__fontSampleText" src\x3d"' + b.url + '" width\x3d"' + b.width + '" height\x3d"' + b.height + '" /\x3e')));
            return new vP(d, !0, !1)
        }

        function c(a) {
            return {
                url: a.url,
                width: a.width / a.height * 30,
                height: 30
            }
        }

        function d(a) {
            a = $('\x3cdiv class\x3d"toolbar__menuHeaderLine"\x3e\x3c/div\x3e\x3cdiv class\x3d"toolbar__menuListSeparator"\x3e' + a + '\x3c/div\x3e\x3cdiv class\x3d"toolbar__menuHeaderLine"\x3e\x3c/div\x3e');
            return new vP(a, !1, !0)
        }

        function e(a) {
            var b = a.find(".menuList__inner");
            a = a.find(".toolbar__fontCta");
            if (0 === a.length) {
                a = $;
                var c;
                c = k.format("editorToolbarFontUploadUpgradePrompt");
                var d = k.TL();
                soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "prompt", c, "string|goog.soy.data.SanitizedContent");
                soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "buttonLabel", d, "string|goog.soy.data.SanitizedContent");
                c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"toolbar__fontCta"\x3e\x3cdiv class\x3d"toolbar__fontCtaLabel"\x3e' + soy.$$escapeHtml(c) + '\x3c/div\x3e\x3cbutton class\x3d"button buttonSmall toolbar__fontCtaButton"\x3e' + soy.$$escapeHtml(d) + "\x3c/button\x3e\x3c/div\x3e");
                a = a(c.toString());
                a.insertAfter(b)
            }
        }

        function g(a) {
            var b = a.find(".menuList__inner");
            a = a.find(".toolbar__fontCta");
            if (0 === a.length) {
                a = $;
                var c;
                c = k.format("editorToolbarFontUploadCtaTitle");
                var d = k.format("editorToolbarFontUploadCtaLabel"),
                    e = !(0 < h.QB.length);
                soy.asserts.assertType(goog.isString("/brand"), "url", "/brand", "null|string|undefined");
                soy.asserts.assertType(null == c || c instanceof goog.soy.data.SanitizedContent || goog.isString(c), "title", c, "null|string|undefined");
                soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "label", d, "string|goog.soy.data.SanitizedContent");
                soy.asserts.assertType(goog.isBoolean(e) || 1 === e || 0 === e, "buttonEnabled", e, "boolean");
                c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"toolbar__fontUploadFeatureCta"\x3e' + (e ? '\x3ca class\x3d"toolbar__fontUploadFeatureCtaTarget" href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri("/brand")) + '" ' + (c ? 'title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"' : "") + ' target\x3d"_blank"\x3e\x3cbutton class\x3d"button toolbar__fontUploadFeatureCtaButton"\x3e' + ap({
                    Ma: "toolbar__fontUploadFeatureCtaButtonIcon"
                }) + soy.$$escapeHtml(d) + "\x3c/button\x3e\x3c/a\x3e" : '\x3cdiv class\x3d"toolbar__fontUploadFeatureCtaLink"\x3e\x3ca class\x3d"toolbar__fontUploadFeatureCtaTarget" href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri("/brand")) + '"' + (c ? 'title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"' : "") + ' target\x3d"_blank"\x3e+ ' + soy.$$escapeHtml(d) + "\x3c/a\x3e\x3c/div\x3e") + "\x3c/div\x3e");
                a = a(c.toString());
                a.insertAfter(b)
            }
        }
        var h = a.m0,
            k = a.sf,
            l = xI(h),
            m = _.uniq(h.EN, !1, function (a) {
                return a.family + a.displayName
            }),
            n = uI(h),
            p = a.C_.map(function (a) {
                return Bz(h, a)
            }).filter(function (a) {
                return !!a
            }).sort(h.MI),
            r = new Set(l.filter(function (a) {
                return !h.locale || !a.locales || -1 !== a.locales.indexOf(h.locale)
            })),
            l = l.filter(function (a) {
                return !r.has(a)
            }),
            u = n.length || m.length,
            v = 0 < r.size,
            y = 2 <= p.length || 0 < p.length && u,
            q = 0 < l.length,
            x = v ? k.format("editorToolbarOtherFontFamily") : d(k.format("editorToolbarAllFontFamily")),
            E = a.Cy;
        E || (E = p[0] ? p[0].displayName || p[0].name || p[0].family : m[0] ? m[0].displayName || m[0].name || m[0].family : "Glegoo");
        var B = !1,
            u = [],
            u = y ? u.concat(d(k.format("editorToolbarDocumentFontFamily"))).concat(p.map(b)) : u,
            u = m.length ? u.concat(d(k.format("editorToolbarBrandFontFamily"))).concat(m.map(b)) : u,
            u = n.length ? u.concat(d(k.format("editorToolbarUploadedFontFamily"))).concat(n.map(b)) : u,
            u = v ? u.concat(d(k.format("editorToolbarLocaleFontFamily"))).concat([].concat(la(r)).map(b)) : u,
            u = q ? u.concat(d(x)).concat(l.map(b)) : u,
            m = _.findIndex(u.filter(function (a) {
                return a.element && a.element.data("name")
            }), function (a) {
                return a.element.data("name") === E
            }),
            m = zP({
                elements: u,
                Ot: m
            });
        a.n0 ? e(m.view.$el) : a.o0 && g(m.view.$el);
        m.view.$el.find(".toolbar__button--selected").parent().addClass("active");
        return m
    }

    function hQ(a, b) {
        var c = Kb,
            d = b.map(function (b) {
                var d = b === a ? "toolbar__button--selected" : "",
                    e = b === gD ? xc(c).Gd() : b;
                b = $('\x3cbutton class\x3d"toolbar__button ' + d + '"\x3e').attr("data-text", b).text(e)[0];
                return new vP(b, !0, !1)
            }),
            e = b.indexOf(a);
        if (-1 === e)
            for (var g = Math.ceil(a), h = 0; h !== b.length; h++)
                g > b[h] && (e = h);
        b = zP({
            elements: d,
            Ot: e
        });
        b.view.$el.find(".toolbar__button--selected").parent().addClass("active");
        return b
    }
    var gD = Number.POSITIVE_INFINITY;

    function Ey(a) {
        Backbone.View.call(this, {
            className: "toolbarContainer",
            tagName: "menu"
        });
        this.u = a.u
    }
    var iQ, jQ, kQ, lQ;
    t(Ey, Backbone.View);
    Ey.prototype.init = function (a) {
        var b = this.u;
        mQ(b);
        $("#content").on("click", ".toolbar__button", !1);
        nQ.forEach(function (b) {
                var c = this;
                (oQ[b] || []).forEach(function (g) {
                    c.$el.on("click", g, {
                        cancel: !0
                    }, pQ(b, a))
                })
            }
            .bind(this));
        $("#content").on("click", function (a) {
            $(a.target).closest(".toolbar--fx,.toolbar--flip,.toolbar__item--submenu,.colorPalette,.colorPicker").length || S.trigger("hideContextualControlsRequested")
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--back", {
            cancel: !0
        }, function () {
            qQ(this)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--forward", {
            cancel: !0
        }, function () {
            rQ(this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--copy", {
            cancel: !0
        }, sQ);
        this.$el.on("click", ".enabled \x3e .toolbar__button--delete", {
            cancel: !0
        }, function () {
            tQ(this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--imageDelete", {
            cancel: !0
        }, function () {
            S.trigger("hideContextualControlsRequested");
            var a = $(this).parents(".toolbar").last().data("element").data("canvaElement");
            if (a) {
                var b = a.Tc(),
                    c = a.al(b),
                    b = {
                        elementIndex: a.ea(),
                        pageIndex: a.ha().ea(),
                        placeholderIndex: b,
                        "new": {},
                        old: c
                    };
                a.$V();
                I.register(new Y(YM, b));
                a.mb()
            }
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--elementDelete", {
            cancel: !0
        }, function () {
            var a = $(this).parents(".toolbar").last().data("toolbar");
            a && (a = a.qd) && a instanceof iB && uQ(a)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--group", {
            cancel: !0
        }, vQ);
        this.$el.on("click", ".enabled \x3e .toolbar__button--ungroup", {
            cancel: !0
        }, wQ);
        this.$el.on("click", ".enabled \x3e .toolbar__button--crop", {
            cancel: !0
        }, xQ);
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--flipHorizontal", {
            cancel: !0
        }, function () {
            var a = yQ(this);
            if (a instanceof eB) {
                var b = a.Tc(),
                    c = a.Zo(b),
                    h = c.mc,
                    k = h ^ 1;
                c.Cs(k);
                a = {
                    pageIndex: Mo(G, a.ha()),
                    elementIndex: a.ea(),
                    placeholderIndex: b,
                    old: {
                        flipOrientation: h
                    },
                    "new": {
                        flipOrientation: k
                    }
                };
                I.register(new Y(12, a))
            } else
                zQ.call(this)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--flipVertical", {
            cancel: !0
        }, function () {
            var a = yQ(this);
            if (a instanceof eB) {
                var b = a.Tc(),
                    c = a.Zo(b),
                    h = c.mc,
                    k = h ^ 2;
                c.Cs(k);
                a = {
                    pageIndex: Mo(G, a.ha()),
                    elementIndex: a.ea(),
                    placeholderIndex: b,
                    old: {
                        flipOrientation: h
                    },
                    "new": {
                        flipOrientation: k
                    }
                };
                I.register(new Y(12, a))
            } else
                AQ.call(this)
        });
        this.$el.on("click", ".toolbar__fontCtaButton", {
            cancel: !0
        }, function () {
            var a = Lb;
            a.H.Ga(Tl("toolbar_fonts_menu", "bottom", "fonts"));
            qo(a, BQ)
        });
        this.$el.on("click", ".toolbar__fontUploadFeatureCtaTarget", {
            cancel: !0
        }, function () {
            tl(CQ(), "upload_your_own_fonts", "editor", "toolbar", "font_dropdown")
        });
        this.$el.on("mouseleave", ".enabled.toolbar__item--submenu .menuList", {
            cancel: !0
        }, DQ);
        this.$el.on("keyup", ".enabled \x3e .toolbar__button \x3e .toolbar__inputButton--fontSize", {
            cancel: !0
        }, EQ);
        this.$el.on("click", ".enabled \x3e .toolbar__button--bold", {
            cancel: !0
        }, function () {
            FQ(this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--uppercase", {
            cancel: !0
        }, function () {
            GQ(this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--italic", {
            cancel: !0
        }, function () {
            HQ(this)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--left", {
            cancel: !0
        }, function () {
            var a = $(this).parents(".toolbar").last().data("element");
            IQ(a, "left")
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--center", {
            cancel: !0
        }, function () {
            var a = $(this).parents(".toolbar").last().data("element");
            IQ(a, "center")
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--right", {
            cancel: !0
        }, function () {
            var a = $(this).parents(".toolbar").last().data("element");
            IQ(a, "right")
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--list", {
            cancel: !0
        }, function () {
            JQ(this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--transparency", {
            cancel: !0
        }, iQ);
        this.$el.on("click", ".enabled \x3e .toolbar__button--gridSpacing", {
            cancel: !0
        }, jQ);
        this.$el.on("click", ".enabled \x3e .toolbar__button--textSpacing", {
            cancel: !0
        }, kQ);
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--HorizontalAlignLeft", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && LQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--HorizontalAlignRight", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && MQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--HorizontalAlignCenter", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && NQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--VerticalAlignTop", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && OQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--VerticalAlignBottom", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && PQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--VerticalAlignCenter", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && QQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--VerticalDistribute", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && RQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--HorizontalDistribute", {
            cancel: !0
        }, function () {
            var a = KQ(this);
            a && SQ(a)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--textVerticalAlignTop", {
            cancel: !0
        }, function () {
            TQ("top", this)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--textVerticalAlignMiddle", {
            cancel: !0
        }, function () {
            TQ("middle", this)
        });
        this.$el.on("mouseup", ".enabled \x3e .toolbar__button--textVerticalAlignBottom", {
            cancel: !0
        }, function () {
            TQ("bottom", this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--link", {
            cancel: !0
        }, function () {
            UQ(this)
        });
        this.$el.on("click", ".enabled \x3e .toolbar__button--filter", {
            cancel: !0
        }, function () {
            VQ(this, b)
        });
        Ib.ba.get($f) && (this.$el.on("click", ".enabled \x3e .toolbar__button--chartData", {
                cancel: !0
            }, function () {
                var a = $(this).parents(".toolbar").last().data("toolbar");
                if (a) {
                    a = a.qd;
                    a.Ut = !a.Ut;
                    var c = WQ(a, b);
                    c && GB(c, a.vL())
                }
            }),
            this.$el.on("click", ".enabled \x3e .toolbar__button--chartStyle", {
                cancel: !0
            }, function () {
                var a;
                $("#objectPanel menu .elements a").click();
                (function (b) {
                    $("#resultsElements li.folderExpanded \x3e a:not([data-query\x3d" + b + "])").mousedown();
                    setTimeout(function () {
                        $("#resultsElements li:not(.folderExpanded) \x3e a[data-query\x3d" + b + "]").mousedown()
                    }, 500);
                    a || (a = setTimeout(function () {
                        $("#resultsElements \x3e .layer").animate({
                            scrollTop: $("#resultsElements a[data-query\x3d" + b + "]").parent().position().top
                        }, J.Na.Zp);
                        a = void 0
                    }, 900))
                })("charts")
            }));
        $(window).resize(XQ);
        $(document).on("keyup", function (a) {
            return 27 === a.which && XQ()
        });
        var c = this.$el;
        S.on("hideContextualControlsRequested", function () {
            if (c.find(".toolbar").length) {
                var a = $(".toolbar").data("element");
                (a = a && a.data("toolbar")) && TP(a.view)
            } else
                c.removeClass("toolbarContainer--active toolbarContainer--noAnimation")
        })
    };
    Ey.prototype.render = function () {
        this.$el.html('\x3cdiv class\x3d"toolbarContainer__inner"\x3e\x3c/div\x3e');
        return this.$el
    };

    function mQ(a) {
        function b(a) {
            return 100 - a
        }

        function c() {
            return this.vf() ? this.rr(this.Ib()) : 0
        }

        function d() {
            return this.vf() ? this.$k(this.Ib()) : 0
        }
        iQ = YQ([{
            name: "transparency",
            displayName: a.Ob(),
            method: Z.prototype.wE,
            Cx: ZQ(Z.prototype.Il, "transparency", b),
            Ix: $Q(Z.prototype.wE, "transparency", "transparency", !1),
            cM: b
        }]);
        jQ = YQ([{
            name: "gridSpacing",
            displayName: "Spacing",
            method: eB.prototype.le,
            Cx: ZQ(eB.prototype.gq, "gridSpacing"),
            Ix: $Q(eB.prototype.le, "gridSpacing", "spacing", !1)
        }]);
        kQ = YQ([{
            name: "letterSpacing",
            displayName: a.letterSpacing(),
            method: c,
            Cx: ZQ(function (a) {
                return this.vf() && this.$v(this.Ib(), a)
            }, "letterSpacing"),
            Ix: $Q(c, "letterSpacing", "letterSpacing", !0)
        }, {
            name: "lineHeight",
            displayName: a.lineHeight(),
            method: d,
            Cx: ZQ(function (a) {
                return this.vf() && this.aw(this.Ib(), a)
            }, "lineHeight", function (a) {
                return 100 * a
            }),
            Ix: $Q(d, "lineHeight", "lineHeight", !0),
            cM: function (a) {
                return .01 * a
            }
        }])
    }

    function XQ() {
        S.trigger("hideContextualControlsRequested")
    }

    function CQ() {
        lQ || (lQ = T || Rl());
        return lQ
    }

    function aR(a, b, c, d, e) {
        var g = (new UAParser).getResult().browser.name,
            g = "IE" === g || "Edge" === g,
            h = c / H.Go;
        c = Bz(Jb, b);
        G.CA();
        e = gQ({
            Cy: b,
            n0: Ib.ba.get(Pf),
            o0: !!Ib.ba.get(eg),
            m0: Jb,
            AX: g,
            sf: e,
            C_: G.fonts.slice()
        });
        d = hQ(h, d);
        a.nC("fontFamily", e);
        a.nC("fontSize", d);
        c ? VP(a.view, "fontFamily", b, c.family) : VP(a.view, "fontFamily", "");
        e.on("select", function (b, c, d) {
            c && -1 !== b && (bR(c),
                b = function () {
                    var b = a.qd;
                    a.remove();
                    cR(b, xc(Kb))
                },
                d.shiftKey || TP(a.view, 100).then(b))
        });
        d.on("select", function (b, c, d) {
            c && -1 !== b && ("keydown" === d.type ? EQ(d) : dR(c),
                d.shiftKey || TP(a.view, 100))
        });
        d.on("activeChange", function (b) {
            VP(a.view, "fontSize", b.element.data("text"))
        });
        a.view.on("openSubmenu", function (a, b) {
            a && a.hasClass("toolbar__item--fontSize") && (a = b.parents(".toolbar").data("element"),
                (a && a.data("canvaElement")) instanceof up && eR.UW(a))
        });
        a.view.on("closeSubmenu", function (a) {
            (a && a.data("canvaElement")) instanceof up && eR.RW(a)
        })
    }

    function rQ(a) {
        Oo();
        var b = $(a).closest(".toolbar__item"),
            c = G.Oa();
        a = c.hb();
        var c = cO(c, a),
            d = $("#layerGraph");
        if (0 >= d.length)
            for (var d = $('\x3col id\x3d"layerGraph" class\x3d"toolbar--layerGraph"\x3e\x3c/ol\x3e'), e = 0; e < c.length + 1; e++)
                d.append("\x3cli\x3eLayer " + e + "\x3c/li\x3e");
        else
            d.css("opacity", "");
        $("#overlays").append(d);
        b = b.closest(".toolbar").offset();
        d.css("top", b.top + 25);
        d.css("left", b.left - 15);
        if (!d.data("locked") && (d.stop(),
                window.clearTimeout(d.data("fadeTimer")),
                0 !== a.length)) {
            var b = a[0],
                g = b.ea(),
                c = c.filter(function (a) {
                    return a.ea() > g
                });
            if (a = c[0])
                a.xb() && (a = VE(a)),
                b.insertAfter(a),
                b.lb(),
                b = {
                    oldElementIndex: g,
                    elementIndex: b.ea(),
                    pageIndex: Mo(G, b.ha())
                },
                I.register(new Y(4, b));
            var b = $("li", d),
                h = b.eq(c.length),
                k = h.prev(),
                c = b.first().outerHeight(!0);
            h.addClass("selected");
            a && (d.data("locked", !0),
                h.animate({
                    left: -c / 2
                }, {
                    duration: J.Na.tp / 2,
                    Mk: "linear",
                    queue: !1,
                    complete: function () {
                        $(this).animate({
                            left: 0
                        }, {
                            duration: J.Na.tp / 2,
                            Mk: "linear",
                            queue: !1,
                            complete: function () {
                                k.before(h);
                                h.css("left", "").css("top", "");
                                k.css("top", "");
                                d.removeData("locked")
                            }
                        })
                    }
                }).animate({
                    top: -c
                }, {
                    duration: J.Na.tp,
                    queue: !1
                }),
                k.animate({
                    top: c
                }, J.Na.tp));
            a = window.setTimeout(function () {
                d.animate({
                    opacity: 0
                }, J.Na.gU, function () {
                    $(this).remove()
                })
            }, J.Na.hU);
            d.data("fadeTimer", a)
        }
    }

    function qQ(a) {
        Oo();
        var b = $(a).closest(".toolbar__item");
        a = G.Oa();
        var c = a.hb();
        a = cO(a, c);
        var d = $("#layerGraph");
        if (0 >= d.length)
            for (var d = $('\x3col id\x3d"layerGraph" class\x3d"toolbar--layerGraph"\x3e\x3c/ol\x3e'), e = 0; e < a.length + 1; e++)
                d.append("\x3cli\x3eLayer " + e + "\x3c/li\x3e");
        else
            d.css("opacity", "");
        $("#overlays").append(d);
        b = b.closest(".toolbar").offset();
        d.css("top", b.top + 25);
        d.css("left", b.left - 15);
        if (!d.data("locked") && (d.stop(),
                window.clearTimeout(d.data("fadeTimer")),
                0 !== c.length)) {
            var e = c[0],
                g = e.ea(),
                b = a.filter(function (a) {
                    return a.ea() < g
                }).reverse();
            if (c = b[0])
                e.insertBefore(c),
                e.lb(),
                e = {
                    oldElementIndex: g,
                    elementIndex: e.ea(),
                    pageIndex: Mo(G, e.ha())
                },
                I.register(new Y(4, e));
            var e = $("li", d),
                h = e.eq(a.length - b.length),
                k = h.next();
            a = e.first().outerHeight(!0);
            h.addClass("selected");
            c && (d.data("locked", !0),
                h.animate({
                    left: -a / 2
                }, {
                    duration: J.Na.tp / 2,
                    Mk: "linear",
                    queue: !1,
                    complete: function () {
                        $(this).animate({
                            left: 0
                        }, {
                            duration: J.Na.tp / 2,
                            Mk: "linear",
                            queue: !1,
                            complete: function () {
                                k.after(h);
                                h.css("left", "").css("top", "");
                                k.css("top", "");
                                d.removeData("locked")
                            }
                        })
                    }
                }).animate({
                    top: a
                }, {
                    duration: J.Na.tp,
                    queue: !1
                }),
                k.animate({
                    top: -a
                }, J.Na.tp));
            a = setTimeout(function () {
                d.animate({
                    opacity: 0
                }, J.Na.gU, function () {
                    $(this).remove()
                })
            }, J.Na.hU);
            d.data("fadeTimer", a)
        }
    }

    function sQ() {
        S.trigger("hideContextualControlsRequested");
        Oo();
        S.trigger("hideContextualControlsRequested");
        var a = [];
        G.hb().forEach(function (b) {
            var c = b.clone(),
                d = b.ha() || G.Oa();
            b.yz && !1 === b.yz() && c.EP && c.EP();
            pB(c, J.bC);
            qB(c, J.bC);
            c.appendTo(d);
            c.Bc();
            a.push(c)
        });
        jJ();
        a.forEach(vg);
        bh();
        kJ();
        setTimeout(function () {
            IJ(a)
        }, J.Qc)
    }

    function tQ(a) {
        (a = $(a).parents(".toolbar").last().data("toolbar")) && a.remove(!0);
        S.trigger("hideContextualControlsRequested");
        jJ();
        G.hb().forEach(function (a) {
            a.vf() && a.yw();
            eM(a);
            a instanceof gG && Gl(CQ(), "delete_chart");
            a.remove()
        });
        kJ();
        $(".multipleSelectionBox").remove()
    }

    function vQ() {
        HJ()
    }

    function wQ() {
        GJ()
    }

    function xQ() {
        S.trigger("hideContextualControlsRequested");
        G.hb().forEach(function (a) {
            fR(a)
        })
    }

    function yQ(a) {
        return $(a).parents(".toolbar").last().data("element").data("canvaElement")
    }

    function bR(a) {
        function b(a) {
            e.qd && (a ? g.is(".focused") || (jJ(),
                k.forEach(c),
                kJ()) : alert("Sorry, there was a problem trying to apply the font " + h + ". Please let us know about it."))
        }

        function c(a) {
            var b = a.index,
                c = l.gc(b);
            a = {
                elementIndex: l.ea(),
                pageIndex: Mo(G, l.ha()),
                textIndex: b,
                "new": c,
                old: a
            };
            I.register(new bN(1, a))
        }
        var d = a.element.parents(".toolbar"),
            e = d.data("toolbar");
        if (e) {
            var g = e.O();
            d.find(".toolbar__button--fontFamily");
            var h = a.element.data("name");
            a.element.data("family");
            a.element.parents(".menuList").find(".toolbar__button--selected").removeClass("toolbar__button--selected");
            a.element.addClass("toolbar__button--selected");
            var k = [];
            if (g) {
                var l = e.qd;
                a = l.Ib();
                if (-1 !== a)
                    k = [l.gc(a)],
                    l.Zj(a, h, b);
                else if (l.xb() && l.ne())
                    k = LE(l),
                    l.JG(h, b);
                else
                    return;
                OC(e);
                gR(e, l)
            }
        }
    }

    function dR(a) {
        var b = a.element.parents(".toolbar").last().data("element"),
            c = b.data("toolbar");
        if (c) {
            var d = parseFloat(a.element.data("text"));
            VP(c.view, "fontSize", parseFloat(d));
            a.element.parents(".menuList").find(".toolbar__button--selected").removeClass("toolbar__button--selected");
            a.element.addClass("toolbar__button--selected");
            if (b) {
                var e = b.data("canvaElement"),
                    d = parseFloat(d * H.Go);
                !e.xb() || e.vf() || e.jT() || d === gD ? hR(e, function () {
                    d === gD ? e.dK() : (e.pD(),
                        e.$A(d))
                }) : (a = d / OE(e),
                    iR(e, a))
            }
        }
    }

    function DQ(a) {
        a = $(a.currentTarget);
        a.find(".active").removeClass("active");
        a.find(".toolbar__button--selected").parents(".selectable").addClass("active")
    }

    function EQ(a) {
        a.preventDefault();
        a.stopPropagation();
        var b = $(a.target),
            c = b.parents(".toolbar").last();
        if (c && (c = c.data("element"))) {
            var d = c.data("canvaElement");
            if (13 === a.which) {
                if (a = c.data("toolbar")) {
                    var c = b.closest(".toolbar__item").find(".menuList"),
                        e = Math.min(Math.max(1, parseFloat(b.val())), 400);
                    "" === b.val() || isNaN(e) ? b.val(d.dd(0)) : (b.val() !== e.toString() && b.val(e.toString()),
                        VP(a.view, "fontSize", e.toString()),
                        c.find(".toolbar__button--selected").removeClass("toolbar__button--selected"),
                        c.find('[data-text\x3d"' + e + '"]').addClass("toolbar__button--selected"),
                        TP(a.view),
                        e = parseFloat(e * H.Go),
                        d.xb() && !d.vf() ? (b = e / OE(d),
                            iR(d, b)) : hR(d, function () {
                            d.$A(e)
                        }))
                }
            } else
                27 === a.which && b.val(d.dd(0))
        }
    }

    function VQ(a, b) {
        var c = $(a).parents(".toolbar").last(),
            d = c.data("element").data("canvaElement");
        d.RE();
        var e = !!c.data("isFxPanelVisible");
        S.trigger("hideContextualControlsRequested");
        if (!e) {
            S.once("hideContextualControlsRequested", function () {
                c.removeData("isFxPanelVisible")
            });
            c.data("isFxPanelVisible", !0);
            var g = new jR({
                model: d.Id(),
                tN: LH,
                sf: b
            });
            kR(g, a.getBoundingClientRect());
            a.parentElement.classList.add("toolbar__item--submenuExpanded");
            g.$el.removeClass("appeared").addClass("appearing");
            g.$el.appendTo("#content");
            $(".fxPanel").show();
            window.setTimeout(function () {
                g.$el.removeClass("appearing").addClass("appeared")
            }, J.Na.s_)
        }
    }

    function UQ(a) {
        function b(a) {
            k.removeClass("valid invalid");
            a ? (u.text(xc(Kb).format("editorToolbarElementLinkDescription")),
                k.addClass("valid")) : (u.text(xc(Kb).format("editorToolbarElementLinkInvalid")),
                k.addClass("invalid"))
        }

        function c() {
            var a = k.find(".toolbar__list");
            a.addClass("toolbar__list--linkShakeInvalid");
            P.delay(300).then(function () {
                a.removeClass("toolbar__list--linkShakeInvalid")
            })
        }

        function d(a) {
            "" === a || kB.et.test(a) || null !== a.match(/^(http)/) || (a = "http://" + a);
            r.val(a);
            lB(n, a);
            a = r.get(0);
            var b = $(a).data("element"),
                c = $(a).data("lastLinkState");
            c != b.Fm() && (c = {
                    elementIndex: b.ea(),
                    pageIndex: Mo(G, b.ha()),
                    "new": {
                        link: b.Fm()
                    },
                    old: {
                        link: c || ""
                    }
                },
                I.register(new Y(10, c)),
                $(a).data("lastLinkState", b.Fm()));
            h.toggleClass("hasLink", !!n.Fm());
            TP(m.view)
        }

        function e() {
            var a = r.val().trim(),
                e = kB.URL.test(a) || kB.et.test(a),
                e = "" === a || e;
            b(e);
            e ? d(a) : c()
        }

        function g(a) {
            var e = $(a.target).val().trim(),
                g = kB.URL.test(e) || kB.et.test(e),
                g = "" === e || g;
            b(g);
            13 === a.which && (g ? d(e) : c())
        }
        a = $(a);
        var h = a.parents(".toolbar").last(),
            k = h.find(".toolbar--link"),
            l = h.data("element"),
            m = l.data("toolbar"),
            n = l.data("canvaElement"),
            p = n.Fm();
        a.parents(".toolbar--more").length && (h = a.parents(".toolbar--more").next(".toolbar"));
        var r = h.find(".toolbar__input--link"),
            u = h.find(".toolbar__inputLabel--link"),
            v = h.find(".toolbar__submit--link");
        (function (a) {
            a.val(p).data("element", n).data("lastLinkState", p).focus().select();
            var c = kB.URL.test(p) || kB.et.test(p);
            b("" === p || c);
            a.data("linkKeyup") || (a.data("linkKeyup", g).on("keyup", g),
                v.on("click", e))
        })(r)
    }

    function zQ() {
        jJ();
        G.hb().forEach(function (a) {
            if (a.lp()) {
                var b = a.mc,
                    c = b ^ 1;
                a.Cs(c);
                a = {
                    pageIndex: Mo(G, a.ha()),
                    elementIndex: a.ea(),
                    "new": {
                        flipOrientation: c
                    },
                    old: {
                        flipOrientation: b
                    }
                };
                I.register(new Y(No, a))
            }
        });
        kJ()
    }

    function AQ() {
        jJ();
        G.hb().forEach(function (a) {
            if (a.lp()) {
                var b = a.mc,
                    c = b ^ 2;
                a.Cs(c);
                a = {
                    pageIndex: Mo(G, a.ha()),
                    elementIndex: a.ea(),
                    "new": {
                        flipOrientation: c
                    },
                    old: {
                        flipOrientation: b
                    }
                };
                I.register(new Y(No, a))
            }
        });
        kJ()
    }

    function YQ(a) {
        return function () {
            function b(a, b) {
                var c = a.get(0),
                    d;
                a.on("input", function () {
                    d !== a.val() && (b.call(c),
                        d = a.val())
                });
                b.call(c)
            }

            function c(a, b) {
                var c = a.get(0);
                a.off("change input");
                b.call(c)
            }
            if (!$(this).hasClass("disabled")) {
                var d = $(this).parents(".toolbar").first();
                d.hasClass("toolbar--more") && (d = d.next(".toolbar"));
                var e = $(this).parents(".toolbar").last().data("element").data("canvaElement"),
                    g = d;
                a.forEach(function (a) {
                    function k() {
                        m.off("blur", k);
                        c(l, a.Ix)
                    }
                    var l = $(".toolbar__slider--" + a.name, d),
                        m = $(".toolbar__sliderValue--" + a.name, d),
                        n = a.method.call(e) || 0,
                        n = ("function" == typeof a.cM ? a.cM(n) : n).toFixed(1).toString().replace(".0", "");
                    g.addClass(a.name + "SliderPresent");
                    l.val(n);
                    m.val(n);
                    l.addClass(a.name + "SliderInput");
                    l.data("element", e);
                    l.data(lR(a.name), a.method.call(e));
                    var p = !1;
                    l.on("mousedown", function () {
                        if (!p) {
                            p = !0;
                            b(l, a.Cx);
                            var d = function () {
                                $(document).off("mouseup", d);
                                c(l, a.Ix);
                                p = !1
                            };
                            $(document).on("mouseup", d)
                        }
                    });
                    m.on("change", function () {
                        var c = m.val();
                        l.val() !== c && "" !== c && (l.val(m.val().toString()),
                            b(l, a.Cx))
                    });
                    m.on("blur", k)
                })
            }
        }
    }

    function ZQ(a, b, c) {
        return function () {
            var d = parseFloat($(this).val()),
                e = "function" == typeof c ? c(d) : d,
                g = $(this).data("element");
            $(".toolbar__sliderValue--" + b).val(d.toString());
            g && void 0 !== e && a.call(g, e)
        }
    }

    function lR(a) {
        return "last" + a.charAt(0).toUpperCase() + a.slice(1) + "State"
    }

    function $Q(a, b, c, d) {
        return function () {
            var e = lR(b),
                g = $(this).data("element");
            if (g) {
                var h = $(this).data(e),
                    k = a.call(g);
                if (h != k) {
                    var l = {
                        elementIndex: g.ea(),
                        pageIndex: Mo(G, g.ha()),
                        "new": {},
                        old: {}
                    };
                    d && g instanceof up ? (l.textIndex = 0,
                        l["new"] = g.gc(0),
                        l.old = g.gc(0),
                        l["new"][c] = k,
                        l.old[c] = h,
                        I.register(new bN(1, l))) : (l["new"][c] = k,
                        l.old[c] = h,
                        I.register(new Y(No, l)));
                    $(this).data(e, k)
                }
            }
        }
    }

    function IQ(a, b) {
        var c = a.data("toolbar"),
            d = a.data("canvaElement"),
            e = d.Ib(),
            g = ["left", "right", "center"];
        g.splice(g.indexOf(b), 1);
        hR(d, function () {
            d.ai(e, b);
            c.view.NQ(b).MR.apply(c.view, g)
        })
    }

    function FQ(a) {
        var b = $(a).parents("li"),
            c = $(a).parents(".toolbar").last().data("element").data("canvaElement"),
            d = c.Ib(),
            e = c.ze();
        0 === e.length && c.xb() && c.ne() && (e = TE(c));
        var g = !!e.data("bold");
        mR(c, function () {
            c.Jn(d, !g);
            wz(e, !0);
            g = !!e.data("bold");
            b.toggleClass("toolbar__item--active", g)
        })
    }

    function GQ(a) {
        a = $(a).parents("li");
        var b = G.hb()[0],
            c = b.Ib(),
            d = b.pE(c);
        hR(b, function () {
            b.hq(c, d ? void 0 : "uppercase");
            wz(b.qb(c), !0)
        });
        a.toggleClass("toolbar__item--active", d)
    }

    function HQ(a) {
        var b = $(a).parents("li"),
            c = $(a).parents(".toolbar").last().data("element"),
            d = c.data("canvaElement"),
            e = d.Ib(),
            g = d.ze();
        0 === g.length && d.xb() && d.ne() && (g = TE(d));
        var h = !!g.data("italic");
        mR(d, function () {
            d.Ln(e, !h);
            wz(c, !0);
            h = !!g.data("italic");
            b.toggleClass("toolbar__item--active", h)
        })
    }

    function JQ(a) {
        var b = $(a).parents("li"),
            c = $(a).parents(".toolbar").last().data("element").data("canvaElement"),
            d = c.Ib(),
            e = c.ze(),
            g = !!e.data("list");
        mR(c, function () {
            c.bw(d, !g);
            g = !!e.data("list");
            b.toggleClass("toolbar__item--active", g)
        })
    }

    function mR(a, b) {
        var c = a.ze(),
            d = c.is(".focused"),
            c = "true" === c.find(".inner").attr("contenteditable");
        d && c ? b() : nR(a, b)
    }

    function hR(a, b) {
        nR(a, b)
    }

    function CB(a, b) {
        if (a && b) {
            a.view.Mf("crop", !(b.kp && b.kp()));
            a.view.Mf("filter", !(!b.pp || !b.pp()));
            var c = pe();
            if (!(!b.ob || !b.ob().length || a.element && a.element.hasClass("multiSelected") || b instanceof eB || b instanceof iB || b instanceof Ko && b.ze().length))
                dQ(a, b.ob(), c);
            else if (b instanceof iB) {
                var d = b.kd;
                d instanceof up ? XP(a.view, dD(d), c, 0) : d ? d && d.Jd() && dQ(a, d.ob(), c) : XP(a.view, SE(b), c, 0)
            }
            b.zz && !b.Hc ? (a.view.$el.find(".toolbar__item").removeClass("enabled").addClass("disabled"),
                a.view.Wt("delete")) : oR(a, b);
            b.ix() && (c = b.O().data("sideDrawer")) && GB(c, b.vL());
            b instanceof iB && !(b instanceof gG) && (c = b.kd,
                a.view.Mf("elementDelete", !!c), !b.xb() || !c || c instanceof up || a.view.JE("color--text", "fontFamily", "fontSize", "bold", "italic", "textAlign", "uppercase", "list", "textSpacing"))
        }
    }

    function oR(a, b) {
        var c = cO(b.ha(), b),
            d = b.ea(),
            e = c.filter(function (a) {
                return a.ea() > d
            }),
            c = c.filter(function (a) {
                return a.ea() < d
            });
        b = b.UE() || 0 !== e.length || 0 !== c.length;
        a.view.Mf("forward", 0 !== e.length);
        a.view.Mf("back", 0 !== c.length);
        a.view.Mf("arrange", b)
    }

    function OC(a) {
        if (!a.element || !a.element.hasClass("multiSelected")) {
            var b = a.qd;
            if (b.ne()) {
                var c = b.ze();
                if (b instanceof Ko) {
                    if (0 === c.length) {
                        a.zn("font");
                        return
                    }
                    a.view.Mf("textSpacing", !1)
                }
                if (b.xb() && !b.ne())
                    a.zn("font");
                else {
                    if (1 === c.length) {
                        var d = yz(c);
                        0 === d.Te.length && (d = mz(c))
                    } else
                        b.xb() && b.ne() && (d = QE(b),
                            c = TE(b));
                    var e = function (a) {
                            return d.Te.reduce(function (b, c) {
                                return b && a(c)
                            }, !0)
                        },
                        g = e(function (a) {
                            return (a = Bz(Jb, a)) && !0 === a.K.bold
                        }),
                        h = e(function (a) {
                            return (a = Bz(Jb, a)) && !0 === a.K.v
                        }),
                        e = e(function (a) {
                            return (a = Bz(Jb, a)) && !0 === a.K.w
                        }),
                        k = function (a) {
                            var b;
                            if (!(b = !!c.data(a)))
                                try {
                                    b = document.queryCommandState(a)
                                } catch (d) {
                                    b = !1
                                }
                            return b
                        };
                    a.eE();
                    a.view.Mf("bold", !!c.data("italic") && h && e || !(c.data("italic") && h) && g);
                    WP(a.view, "bold", k("bold"));
                    a.view.Mf("italic", !!c.data("bold") && g && e || !(c.data("bold") && g) && h);
                    WP(a.view, "italic", k("italic"));
                    a.view.Mf("uppercase", !0);
                    WP(a.view, "uppercase", "uppercase" === c.data("textTransform"));
                    g = c.data("justification") || "left";
                    a.view.MR("left", "center", "right");
                    a.view.NQ(g);
                    WP(a.view, "list", !!c.data("list"));
                    g = b.Ib();
                    g = b.dd(g);
                    b.xb() && !b.vf() && (UE(b) ? g = 0 : 0 !== ME(b) || (g = OE(b)));
                    g /= H.Go;
                    b.xz() ? VP(a.view, "fontSize", xc(Kb).Gd()) : 0 !== g ? VP(a.view, "fontSize", g) : VP(a.view, "fontSize", "");
                    pR(a, b);
                    XP(a.view, d.tf, xc(Kb).format("editorToolbarTextPickAColor"));
                    c.data("fontFamily") ? (g = c.data("fontName") || d.Te[0],
                        h = d.Te.filter(function (a) {
                            return null !== Bz(Jb, a)
                        }),
                        g = (1 < h.length ? "" : h[0]) || g,
                        (h = Bz(Jb, g)) && h.displayName && (g = h.displayName),
                        h ? VP(a.view, "fontFamily", g, h.family) : VP(a.view, "fontFamily", "")) : 1 === d.Te.length ? (g = d.Te[0],
                        (h = Bz(Jb, g)) && h.displayName && (g = h.displayName),
                        h ? VP(a.view, "fontFamily", g, h.family) : VP(a.view, "fontFamily", "")) : 1 < d.Te.length && VP(a.view, "fontFamily", xc(Kb).format("editorToolbarTextMultipleFonts"), "Open Sans");
                    b.ne() && !b.vf() && a.view.JE("textAlign", "uppercase", "list", "textSpacing");
                    b = c.children(".inner");
                    1 === b.length && (b = !0 === b.get(0).isContentEditable,
                        a.view.Mf("list", b))
                }
            }
        }
    }

    function gR(a, b) {
        var c = b.ou(),
            d = c.map(function (a) {
                a = Bz(Jb, a);
                return a.name || a.family
            }).filter(function (a) {
                return !BG(Jb, a)
            });
        0 < d.length ? (UP(a.view, !0),
            BI(Jb, d, function () {
                var d = new Set(b.ou()),
                    g;
                a: if (g = new Set(c),
                        d.size !== g.size)
                        g = !1;
                    else {
                        for (var d = ka(d), h = d.next(); !h.done; h = d.next())
                            if (!g.has(h.value)) {
                                g = !1;
                                break a
                            }
                        g = !0
                    }
                g && UP(a.view, !1)
            })) : UP(a.view, !1)
    }

    function KQ(a) {
        if ((a = $(a).parents(".toolbar").last().data("element")) && a.data("canvaElement") instanceof iB)
            return a.data("canvaElement")
    }

    function TQ(a, b) {
        $(b);
        var c = $(b).parents(".toolbar").last().data("element");
        b = c.data("toolbar");
        if (c = c.data("canvaElement")) {
            switch (a) {
                case "top":
                    zJ(c);
                    break;
                case "middle":
                    AJ(c);
                    break;
                case "bottom":
                    BJ(c)
            }
            b && pR(b, c)
        }
    }

    function BB(a) {
        var b = a.view.$el,
            c = b.data("element");
        c && c.data("canvaElement") && (a.eE(),
            clearTimeout(qR),
            qR = setTimeout(function () {
                var a = b.data("fxPanelView");
                a && kR(a, b.get(0).getBoundingClientRect())
            }, J.Qc + 100))
    }

    function rR(a, b) {
        var c = $(".toolbarContainer");
        b = [new FP("group", b.format("editorToolbarElementGroup"), {
            enabled: !0
        }), new FP("copy", b.format("editorToolbarElementCopy")), new FP("arrange", b.format("editorToolbarElementArrange"), {
            enabled: !1
        }), new FP("transparency", de(b), {
            icon: !0,
            Lf: [new HP("transparency", de(b))],
            enabled: !1
        }), new FP("link", b.format("editorToolbarElementLink"), {
            icon: !0,
            enabled: !1
        }), new FP("delete", ce(b), {
            icon: !0
        })];
        b = $P({
            aa: Rk,
            pi: "right",
            name: "element",
            items: b,
            element: a,
            Ge: S
        });
        a.is(".background, .group") && b.view.Mf("group", !1);
        b.tx(c, $(window));
        b.save()
    }

    function LN(a, b) {
        var c = a.data("canvaElement"),
            d = $(".toolbarContainer");
        if (1 === a.length && c && c.wo()) {
            var e = a.data("toolbar");
            e && e.remove();
            a = $P({
                aa: Rk,
                pi: "right",
                name: "element",
                items: NP(c.nr(), c.UE() ? c.PS() : [], b),
                element: a,
                Ge: S
            });
            if (c.lC())
                bQ(a, $P({
                    aa: Rk,
                    name: "image",
                    element: c.O(),
                    items: LP(c, b),
                    Ge: S
                }));
            else if (c.PQ()) {
                var g = "group",
                    h = [],
                    e = c.pu();
                c instanceof gG && (g = "chart",
                    h = [new FP("chartData", b.format("editorToolbarElementData"), {
                        enabled: !0
                    }), new DP, new JP(c.ob()[0].Ca(), ne(b))],
                    h.push(new FP("chartStyle", b.format("editorToolbarElementStyle"), {
                        enabled: !0
                    })));
                var k = !1;
                if (c.vf()) {
                    var k = c.ze(),
                        l = k.data("fontName"),
                        m = k.data("fontFamily"),
                        l = l || m,
                        m = c.dd(c.Ib());
                    c.xz() && (m = gD);
                    (k = k.data("canvaElement")) && (e = k.pu());
                    h = h.concat(fQ(l, m, b));
                    k = !0
                } else
                    !c.zu() && c.ne() && (m = c.Gy(),
                        l = m.fontName,
                        m = m.fontFamily,
                        l = l || m,
                        PE(c) ? m = gD : UE(c) ? m = 0 : (m = ME(c),
                            0 === m && (m = OE(c))),
                        h = h.concat(fQ(l, m, b)),
                        k = !0);
                g = $P({
                    aa: Rk,
                    name: g,
                    element: c.O(),
                    items: h,
                    Ge: S
                });
                k && (aR(g, l, m, e, b),
                    OC(g),
                    gR(g, c));
                bQ(a, g)
            } else
                c.yq() ? bQ(a, $P({
                    aa: Rk,
                    name: "image",
                    element: c.O(),
                    items: LP(c, b),
                    Ge: S
                })) : c.kt() ? (e = c.ze(),
                    g = e.data("fontName"),
                    l = e.data("fontFamily"),
                    g = g || l || "Glegoo",
                    l = c.dd(c.Ib()),
                    m = c.pu(),
                    h = fQ(g, l, b),
                    e = $P({
                        aa: Rk,
                        name: "font",
                        element: e,
                        items: h,
                        Ge: S
                    }),
                    c.xz() && (l = gD),
                    aR(e, g, l, m, b),
                    OC(e),
                    gR(e, c),
                    bQ(a, e)) : c.QQ() && bQ(a, $P({
                    aa: Rk,
                    name: "shape",
                    element: c.O(),
                    items: [new JP("", ne(b))],
                    Ge: S
                }));
            c.ix() && WQ(c, b);
            a.tx(d, $(window));
            a.save();
            eQ(a);
            c.lb()
        }
    }

    function SB(a) {
        var b = $(".toolbarContainer"),
            c = a.data("confirmationToolbar");
        c || (c = $P({
                aa: Rk,
                name: "crop",
                OC: "elementToolbar",
                element: a,
                items: [new FP("ok", "Ok", {
                    icon: !0,
                    Ie: " Enter"
                }), new FP("cancel", "Cancel", {
                    icon: !0
                })]
            }),
            c.tx(b, $(window)),
            c.save("confirmationToolbar"))
    }

    function WQ(a, b) {
        if (a.ix()) {
            var c = a.O(),
                d = c.data("sideDrawer");
            if (!d) {
                var e = [b.format("editorToolbarElementDataLabelColumnHeader"), b.format("editorToolbarElementDataValueColumnHeader")];
                b = kP(a.getData(), a.cT(e), b);
                b.bc.on("change", function (b, c) {
                    a.Nr(b);
                    a.o_({
                        KL: c
                    })
                });
                var g = a.getData();
                b.bc.on("commit", function (b) {
                    var c = {
                        pageIndex: Mo(G, a.ha()),
                        elementIndex: a.ea(),
                        "new": {
                            data: b
                        },
                        old: {
                            data: g
                        }
                    };
                    I.register(new Y(15, c));
                    g = b
                });
                d = new AP;
                d.lt(b.view);
                GB(d, !1);
                $("#objectPanel section.content").after(d.$el);
                c.data("sideDrawer", d);
                var h = function () {
                    a.Ut = !1;
                    GB(d, !1)
                };
                S.on("objectPanel:tabClicked", h);
                d.on("remove", function () {
                    return S.off("objectPanel:tabClicked", h)
                })
            }
            return d
        }
    }

    function pR(a, b) {
        if (b = b.ze().data("canvaElement"))
            switch (WP(a.view, "textVerticalAlignTop", !1),
                WP(a.view, "textVerticalAlignMiddle", !1),
                WP(a.view, "textVerticalAlignBottom", !1),
                b.te || "top") {
                case "top":
                    WP(a.view, "textVerticalAlignTop", !0);
                    break;
                case "middle":
                    WP(a.view, "textVerticalAlignMiddle", !0);
                    break;
                case "bottom":
                    WP(a.view, "textVerticalAlignBottom", !0)
            }
    }

    function iR(a, b) {
        var c = a.Ba(),
            d = LE(a);
        a.pD();
        a.setSize(a.D() * b, a.F() * b, !0);
        a.Oq();
        b = a.Ba();
        em(c, b) || (jJ(),
            d.forEach(function (b) {
                var c = b.index,
                    d = a.gc(c);
                d.fontSize = b.fontSize;
                b = {
                    elementIndex: a.ea(),
                    pageIndex: Mo(G, a.ha()),
                    textIndex: c,
                    "new": d,
                    old: b
                };
                I.register(new bN(1, b))
            }),
            c = c.serialize(),
            d = b.serialize(),
            c = {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                old: c,
                "new": d,
                proportionalSetSize: !0
            },
            I.register(new Y(No, c)),
            kJ())
    }
    var qR = 0;

    function pQ(a, b) {
        var c = sR[a];
        return function (a) {
            return c && c.call(this, a, b)
        }
    }
    var nQ = Object.keys({
            mQ: "CLICK_FILL_COLOR",
            nQ: "CLICK_TEXT_COLOR"
        }),
        oQ = {
            mQ: [".toolbar__button--color.toolbar__target--fill"],
            nQ: [".toolbar__button--color.toolbar__target--text"]
        };

    function tR(a, b) {
        function c(a) {
            var c = a.index === b.index,
                d = a.type === b.type;
            return !(a.element === b.element && c && d)
        }
        if (!a)
            return [];
        var d = [];
        a instanceof Om && (d = tp(a).filter(c));
        d.forEach(function (a) {
            "FILL" === a.type && (a.initial = uR(a.element, a.index));
            "TEXT" === a.type && (a.initial = a.element.gc(a.index))
        });
        return d
    }

    function vR(a) {
        a.forEach(function (a) {
            if ("FILL" === a.type) {
                var c = uR(a.element, a.index);
                I.register(new Y(fM, {
                    elementIndex: a.element.ea(),
                    pageIndex: a.element.ha().ea(),
                    old: a.initial,
                    "new": c
                }));
                a.initial = c
            }
            "TEXT" === a.type && (c = a.element.gc(a.index),
                I.register(new bN(1, {
                    elementIndex: a.element.ea(),
                    pageIndex: a.element.ha().ea(),
                    textIndex: a.index,
                    old: a.initial,
                    "new": c
                })),
                a.initial = c)
        })
    }

    function wR(a, b) {
        a.forEach(function (a) {
            "TEXT" === a.type && a.element.setColor(a.index, b);
            "FILL" === a.type && a.element.ce(a.index, b)
        })
    }

    function xR(a, b) {
        return a instanceof eB ? a.Zo(b).ah() : a.Jd() > b ? (a = a.ob()[b],
            a === nA ? null : a) : null
    }

    function uR(a, b) {
        if (a instanceof eB)
            return {
                index: b,
                placementData: a.al(b)
            };
        var c = a instanceof Ko ? nA : "";
        a = xR(a, b);
        return {
            index: b,
            color: a ? a.Ca() : c
        }
    }
    var sR = {
        mQ: function (a, b) {
            function c(a) {
                var b = a ? xR(l, m) : n;
                (u = a) && r.forEach(function (a) {
                    a.element.Vp()
                });
                b && (wR(r, b),
                    jJ(),
                    vR(r),
                    kJ());
                a || r.forEach(function (a) {
                    a.element.Uj()
                })
            }

            function d(a, b) {
                k.removeClass("noColor");
                k.css("background-color", a.Ca());
                b && wR(r, a);
                l.ce(m, a)
            }

            function e(a) {
                var b = uR(l, m),
                    c = l.ha();
                c && b !== p && (jJ(),
                    a && vR(r),
                    I.register(new Y(fM, {
                        elementIndex: l.ea(),
                        pageIndex: c.ea(),
                        old: p,
                        "new": b
                    })),
                    kJ(),
                    p = b)
            }

            function g() {
                h.removeData("colorPalette");
                h.removeData("activeColorPaletteToolbarButton");
                v.remove();
                e(u);
                l.Uj();
                r.forEach(function (a) {
                    a.element.Uj()
                })
            }
            var h = $(this).closest(".toolbar"),
                k = $(this),
                l = h.data("element").data("canvaElement");
            if (l) {
                l.xb() && l.kd && (l = l.kd);
                var m = 1 === l.Jd() ? 0 : l instanceof Ko || l instanceof cB || l instanceof dB || l instanceof iB && l.kd ? k.data("colorindex") : l instanceof eB ? l.Tc() : -1;
                if (-1 !== m) {
                    var n = xR(l, m),
                        p = uR(l, m);
                    a = h.data("activeColorPaletteToolbarButton");
                    var r = tR(n, {
                        element: l,
                        index: m,
                        type: "FILL"
                    });
                    S.trigger("hideContextualControlsRequested");
                    if (a !== this) {
                        l.Vp();
                        a = 1 <= r.length;
                        var u = !1,
                            v = new xn({
                                Hx: yR,
                                xt: b.jj && b.jj.Gx || [],
                                kl: tc(b.u),
                                zi: pc(b.u),
                                vl: l.ha().Nb,
                                UA: !0,
                                qC: !0,
                                Xb: xR(l, m),
                                Dg: a,
                                px: n,
                                H: b.H,
                                ja: Ib
                            });
                        v.on("preview", d);
                        v.on("confirm", e);
                        v.on("changeApplyAll", c);
                        v.listenTo(I, "beforeOperationStackPop", g);
                        v.listenTo(S, "hideContextualControlsRequested", g);
                        v.render();
                        v.$el.addClass("toolbar--overlay");
                        zR.Nl(v.$el, $(this));
                        v.pB();
                        h.data("colorPalette", v);
                        h.data("activeColorPaletteToolbarButton", this)
                    }
                }
            }
        },
        nQ: function (a, b) {
            function c(a) {
                var b = a ? gh(p.gc(u).color) : v;
                (N = a) && y.forEach(function (a) {
                    a.element.Vp()
                });
                b && (wR(y, b),
                    jJ(),
                    vR(y),
                    kJ());
                a || y.forEach(function (a) {
                    a.element.Uj()
                })
            }

            function d(a, b) {
                K = a;
                n.removeClass("noColor");
                n.css("background-color", a.Ca());
                b && wR(y, a);
                p.setColor(u, a)
            }

            function e(a) {
                !(r = p.ha()) || B === K || B && B.equals(K) || (B = K,
                    jJ(),
                    a && vR(y),
                    vR(q),
                    x = [],
                    E.forEach(g),
                    kJ(),
                    E = x)
            }

            function g(a) {
                var b = a.index,
                    c = p.gc(b);
                a = {
                    elementIndex: p.ea(),
                    pageIndex: Mo(G, r),
                    textIndex: b,
                    old: a,
                    "new": c
                };
                x.push(c);
                I.register(new bN(1, a))
            }

            function h() {
                m.removeData("colorPalette");
                m.removeData("activeColorPaletteToolbarButton");
                Q.remove();
                e(N);
                y.forEach(function (a) {
                    a.element.Uj()
                })
            }

            function k(a) {
                return 0 < a.Jd()
            }

            function l(a, b) {
                return a.concat(b.ob().map(function (a, c) {
                    return {
                        element: b,
                        index: c,
                        type: "FILL",
                        initial: uR(b, c)
                    }
                }))
            }
            var m = $(this).parents(".toolbar"),
                n = $(this);
            a = m.data("element");
            var p = a.data("canvaElement");
            p.xb() && p.kd && (p = p.kd);
            var r = p.ha(),
                u = p.xb() ? p.kd ? p.elements.indexOf(p.kd) : -1 : p.Ib(),
                v = gh(a.data("fill")),
                y = tR(v, {
                    element: p,
                    index: u,
                    type: "TEXT"
                }),
                q = [],
                x = [];
            if (-1 !== u)
                var E = [p.gc(u)];
            else if (p.xb())
                E = LE(p),
                q = p.xa().filter(k).reduce(l, []);
            else
                return;
            a = m.data("activeColorPaletteToolbarButton");
            S.trigger("hideContextualControlsRequested");
            if (a !== this) {
                var B = null,
                    K = null;
                a = b.jj && b.jj.Gx || [];
                var C = 1 <= y.length,
                    N = !1,
                    Q = new xn({
                        Hx: yR,
                        kl: tc(b.u),
                        zi: pc(b.u),
                        vl: p.ha().Nb,
                        xt: a,
                        UA: !0,
                        qC: !0,
                        Xb: v,
                        Dg: C,
                        px: v,
                        H: b.H,
                        ja: Ib
                    });
                Q.on("preview", d);
                Q.on("confirm", e);
                Q.on("changeApplyAll", c);
                Q.listenTo(I, "beforeOperationStackPop", h);
                Q.listenTo(S, "hideContextualControlsRequested", h);
                Q.render();
                Q.$el.addClass("toolbar--overlay");
                zR.Nl(Q.$el, n);
                Q.pB();
                m.data("colorPalette", Q);
                m.data("activeColorPaletteToolbarButton", this)
            }
        }
    };

    function AR(a) {
        a.appendTo("#overlays")
    }

    function BR() {
        return $("#canvaDocument")
    }
    var zR = new ay({
            jx: AR,
            Xy: BR,
            margin: J.GQ,
            uB: $x
        }),
        yR = new ay({
            jx: AR,
            Xy: BR,
            margin: J.oQ,
            uB: $x
        });

    function CR(a) {
        soy.asserts.assertType(goog.isString(a.J) || a.J instanceof goog.soy.data.SanitizedContent, "classes", a.J, "string|goog.soy.data.SanitizedContent");
        var b = a.J;
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        var c = a.disabled;
        soy.asserts.assertType(a.zs instanceof soydata.SanitizedHtml || a.zs instanceof soydata.UnsanitizedText || goog.isString(a.zs), "selectContent", a.zs, "soydata.SanitizedHtml");
        var d = a.zs;
        goog.asserts.assertArray(a.options, "expected parameter 'options' of type list\x3chtml\x3e.");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"listbox' + (c ? " listbox--disabled" : "") + " " + soy.$$escapeHtmlAttribute(b) + '" tabindex\x3d"-1"\x3e\x3cdiv class\x3d"listbox__select"\x3e' + soy.$$escapeHtml(d) + '\x3c/div\x3e\x3cdiv class\x3d"listbox__options"\x3e' + DR(a) + "\x3c/div\x3e\x3c/div\x3e")
    }

    function DR(a) {
        var b = "";
        a = goog.asserts.assertArray(a.options, "expected parameter 'options' of type list\x3chtml\x3e.");
        for (var c = a.length, d = 0; d < c; d++)
            b += soy.$$escapeHtml(a[d]);
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)
    };

    function ER(a, b, c) {
        var d = this;
        L.call(this, a);
        this.dj = c.dj;
        this.aC = b;
        this.LU = this.Z1.bind(this);
        a.on("keydown", function (a) {
            return d.Hp(a)
        });
        b.on("click", this.LU);
        a.on("click", function (a) {
            $(a.target).closest("a")[0] || (d.$el.toggleClass("listbox--open"),
                d.trigger(FR, d.$el.hasClass("listbox--open")))
        });
        a.on("click", ".listbox__option", function (a) {
            $(a.target).closest("a")[0] || (a = d.dj($(a.target).closest(".listbox__option")),
                d.trigger(GR, a))
        });
        a.on("mousemove", ".listbox__option", function (a) {
            return d.PM(a)
        });
        a.on("mouseout", ".listbox__option", function (a) {
            d.trigger(HR, d.dj($(a.target).closest(".listbox__option")))
        })
    }
    t(ER, L);

    function IR(a, b) {
        return new ER(a, $(document), b)
    }
    f = ER.prototype;
    f.remove = function () {
        L.prototype.remove.call(this);
        this.aC.off("click", this.LU)
    };
    f.At = function () {
        this.$el.removeClass("listbox--open");
        this.$el.blur()
    };
    f.Z1 = function (a) {
        this.$el[0] !== $(a.target).closest(".listbox")[0] && this.trigger(JR)
    };

    function KR(a, b) {
        a.$el.find(".listbox__select").empty().append(b.toString())
    }
    f.dg = function (a) {
        this.$el.toggleClass("listbox--disabled", !a)
    };
    f.cB = function (a) {
        a = $(DR({
            options: a.map(function (a) {
                return soydata.VERY_UNSAFE.ordainSanitizedHtml(a.$el.prop("outerHTML"))
            })
        }).toString());
        this.$el.find(".listbox__options").empty().append(a)
    };
    f.rj = function () {
        var a = this;
        return this.$el.find(".listbox__option").toArray().map(function (b) {
            return a.dj($(b))
        })
    };
    f.length = function () {
        return this.rj().length
    };

    function LR(a) {
        return a.rj().findIndex(function (a) {
            return a.$el.hasClass("listbox__option--hover")
        })
    }

    function MR(a) {
        return a.dj(a.$el.find(".listbox__option--hover"))
    }
    f.Hp = function (a) {
        27 === a.keyCode ? (a.preventDefault(),
            this.trigger(NR)) : 38 === a.keyCode ? (a.preventDefault(),
            this.trigger(OR)) : 40 === a.keyCode ? (a.preventDefault(),
            this.trigger(PR)) : 13 === a.keyCode && (a.preventDefault(),
            this.trigger(QR))
    };
    f.PM = function (a) {
        this.trigger(RR, this.dj($(a.target).closest(".listbox__option")))
    };
    var FR = "CLICK",
        GR = "OPTION_SELECT",
        JR = "BLUR",
        RR = "HOVER",
        HR = "UNHOVER",
        OR = "PRESS_UP",
        PR = "PRESS_DOWN",
        QR = "PRESS_ENTER",
        NR = "PRESS_ESC";

    function SR(a) {
        fc.apply(this, arguments)
    }
    t(SR, fc);
    SR.prototype.oc = function () {
        var a = this.$el.attr("data-value");
        return w(a && a.toString(), "value must be present on the option")
    };
    SR.prototype.$j = function (a) {
        this.$el.toggleClass("listbox__option--selected", a)
    };

    function TR(a, b) {
        a.$el.toggleClass("listbox__option--hover", b)
    }
    SR.prototype.zf = function () {
        return this.$el.hasClass("listbox__option--selected")
    };

    function UR(a) {
        var b = this;
        this.view = a;
        this.HF = null;
        this.view.on(FR, function (a) {
            return b.Bf(a)
        });
        this.view.on(GR, function (a) {
            return VR(b, a)
        });
        this.view.on(JR, function () {
            return b.At()
        });
        this.view.on(RR, function (a) {
            return b.PM(a)
        });
        this.view.on(HR, function (a) {
            return TR(a, !1)
        });
        this.view.on(OR, function () {
            var a = LR(b.view);
            TR(MR(b.view), !1);
            0 >= a ? (a = b.view.length() - 1,
                a = b.view.rj()[a],
                TR(a, !0)) : TR(b.view.rj()[a - 1], !0)
        });
        this.view.on(PR, function () {
            var a = LR(b.view);
            TR(MR(b.view), !1);
            a === b.view.length() - 1 ? TR(b.view.rj()[0], !0) : TR(b.view.rj()[a + 1], !0)
        });
        this.view.on(NR, function () {
            return b.At()
        });
        this.view.on(QR, function () {
            VR(b, MR(b.view));
            b.At()
        })
    }

    function WR(a) {
        Da(0 < a.length, "Need at least one option to render the listbox");
        a = a.filter(function (a) {
            return a.zf()
        });
        Da(1 === a.length, 'Expected one option to be selected but found "{}"', a.length);
        return a[0].uj()
    }
    f = UR.prototype;
    f.cB = function (a) {
        KR(this.view, WR(a));
        this.view.cB(a)
    };

    function XR(a, b) {
        Da(!a.HF, "onOptionChanged listener already registered");
        a.HF = b
    }
    f.Bf = function (a) {
        a || this.At()
    };
    f.At = function () {
        this.view.At();
        TR(MR(this.view), !1)
    };
    f.PM = function (a) {
        TR(MR(this.view), !1);
        TR(a, !0)
    };

    function VR(a, b) {
        a.rj().filter(function (a) {
            return a.zf()
        }).forEach(function (a) {
            return a.$j(!1)
        });
        b.$j(!0);
        KR(a.view, b.uj());
        null != a.HF && a.HF(b)
    }

    function YR(a) {
        return a.rj().find(function (a) {
            return a.zf()
        })
    }
    f.rj = function () {
        return this.view.rj()
    };
    f.oc = function () {
        return w(YR(this), "At least one option must have been selected").oc()
    };
    f.dg = function (a) {
        this.view.dg(a)
    };
    f.destroy = function () {
        this.view.remove()
    };

    function ZR(a) {
        this.d_ = a
    }

    function $R() {
        return new ZR(function () {
            return new FormData
        })
    }

    function cL(a) {
        var b = $R();
        return new P(function (c, d) {
            var e = b.d_();
            Object.keys(a.KS).forEach(function (b) {
                e.append(b, a.KS[b])
            });
            e.append("file", a.file);
            var g = new XMLHttpRequest;
            g.onerror = d;
            g.onreadystatechange = function () {
                if (4 === g.readyState) {
                    var b = nk(g.status),
                        e = b && (a.tT || g.getResponseHeader("x-amz-version-id"));
                    b && e ? c(e) : d()
                }
            };
            g.upload.addEventListener("progress", a.progress || function () {});
            g.open("POST", a.url, !0);
            g.send(e)
        })
    };

    function dl(a) {
        return Math.max.apply(Math, a)
    }

    function cl(a) {
        return Math.min.apply(Math, a)
    }

    function aS(a, b, c) {
        !c && (c = function (a, b) {
            return a - b
        });
        for (var d = 0, e, g = a.length, h; 0 < g;)
            e = d + (h = g / 2 | 0),
            0 > c(a[e], b) ? (d = ++e,
                g -= h + 1) : g = h;
        return d
    }

    function bS(a, b, c) {
        !c && (c = function (a, b) {
            return a - b
        });
        for (var d = 0, e, g = a.length, h; 0 < g;)
            e = d + (h = g / 2 | 0),
            0 <= c(b, a[e]) ? (d = ++e,
                g -= h + 1) : g = h;
        return d
    };

    function Zg(a) {
        var b, c, d, e, g, h;
        if (!a.src)
            return 0;
        if ("data:image/svg+xml" === a.src.substring(0, 18))
            return 1;
        c = a.naturalHeight;
        b = a.naturalWidth;
        d = b * c;
        if (isNaN(d) || 0 >= d)
            return 0;
        e = document.createElement("canvas");
        e.width = b;
        e.height = c;
        e = e.getContext("2d");
        e.drawImage(a, 0, 0);
        a = e.getImageData(0, 0, b, c).data;
        for (h = e = 0; h < c; h++)
            for (g = 0; g < b; g++)
                0 >= a[4 * (g + h * b) + 3] && e++;
        return e / d
    }

    function CM(a, b) {
        a = a.get(0).getBoundingClientRect();
        b = b.get(0).getBoundingClientRect();
        return Vg(a, b)
    }

    function Vg(a, b) {
        return !a || !b || a.left + a.width <= b.left || a.top + a.height <= b.top || a.left >= b.left + b.width || a.top >= b.top + b.height ? !1 : !0
    }

    function NB(a, b) {
        a = a instanceof U ? a : cm(a);
        return {
            transform: Jo({
                hi: a.Y(),
                ii: a.N(),
                Mv: b || 0
            }),
            left: "",
            top: "",
            width: a.D(),
            height: a.F()
        }
    }

    function RB(a, b, c) {
        var d = {
            ts: 0,
            Lv: 0,
            Mv: 0
        };
        null != b && (d.hi = b.Y(),
            d.ii = b.N(),
            a.css("width", b.D() + "px"),
            a.css("height", b.F() + "px"));
        a.each(function () {
            var a = $(this);
            d.ts = a.data("FlipTransformation_rotateX") || 0;
            d.Lv = a.data("FlipTransformation_rotateY") || 0;
            !!(c & 2) != (0 != d.ts % 360) && (d.ts += 180,
                a.data("FlipTransformation_rotateX", d.ts));
            !!(c & 1) != (0 != d.Lv % 360) && (d.Lv += 0 == d.ts % 360 ? 180 : -180,
                a.data("FlipTransformation_rotateY", d.Lv));
            a.css("transform", Jo(d))
        })
    }

    function QB(a) {
        var b = a.attr("style"),
            c, d;
        (c = b.match(/translate(3d)?\((-?[.\d]+)[^-.\d]+(-?[.\d]+)/)) ? (d = parseFloat(c[2]),
            c = parseFloat(c[3])) : (d = parseFloat(a.css("left")),
            c = parseFloat(a.css("top")));
        var e = b.match(/width: ([.\d]+)/),
            g = b.match(/height: ([.\d]+)/),
            b = e ? parseFloat(e[1]) : a.width();
        a = g ? parseFloat(g[1]) : a.height();
        return new U(d, c, b, a)
    }

    function MA(a) {
        a = a.get(0).getAttribute("viewBox").split(" ");
        return new U(parseFloat(a[0]), parseFloat(a[1]), parseFloat(a[2]), parseFloat(a[3]))
    }

    function Jo(a) {
        var b = void 0 === a.Gn ? 1 : a.Gn,
            c = void 0 === a.Yp ? 1 : a.Yp,
            d = a.ts || 0,
            e = a.Lv || 0,
            g = a.Mv || 0;
        a = "" + ("translate(" + (a.hi || 0) + "px," + (a.ii || 0) + "px)");
        if (1 != b || 1 != c)
            a += " scale(" + b + "," + c + ") ";
        0 != d && (a += " rotateX(" + d + "deg)");
        0 != e && (a += " rotateY(" + e + "deg)");
        0 != g && (a += " rotateZ(" + g + "deg)");
        return a
    }

    function cS(a) {
        a = window.getComputedStyle(a);
        return a.getPropertyValue("transform") || a.getPropertyValue("-webkit-transform")
    }

    function el(a) {
        if (a = /^matrix(?:3d)?\(([^)]*)\)$/.exec(cS(a))) {
            a = a[1].split(",");
            if (6 == a.length)
                return {
                    Gn: parseFloat(a[0]),
                    skewX: parseFloat(a[1]),
                    skewY: parseFloat(a[2]),
                    Yp: parseFloat(a[3]),
                    hi: parseFloat(a[4]),
                    ii: parseFloat(a[5])
                };
            if (16 == a.length)
                return {
                    Gn: parseFloat(a[0]),
                    skewX: parseFloat(a[1]),
                    skewY: parseFloat(a[4]),
                    Yp: parseFloat(a[5]),
                    hi: parseFloat(a[12]),
                    ii: parseFloat(a[13])
                }
        }
        return {
            Gn: 0,
            skewX: 0,
            skewY: 0,
            Yp: 0,
            hi: 0,
            ii: 0
        }
    }

    function Ug(a, b, c) {
        var d = el(a),
            e;
        for (e in b)
            b.hasOwnProperty(e) && d.hasOwnProperty(e) && (d[e] = c ? d[e] + b[e] : b[e]);
        b = [d.Gn, d.skewX, d.skewY, d.Yp, d.hi, d.ii];
        $(a).css("transform", "matrix(" + b.join(",") + ")")
    }

    function LC(a, b) {
        return Math.round(1E5 * a) / 1E5 == Math.round(1E5 * b) / 1E5
    }

    function dS(a) {
        switch (/(\s|^)(tl|t|tr|r|br|b|bl|l)(\s|$)/gi.exec(a.className)[2]) {
            case "tl":
                return 0;
            case "t":
                return 1;
            case "tr":
                return 2;
            case "r":
                return 4;
            case "br":
                return 7;
            case "b":
                return 6;
            case "bl":
                return 5;
            case "l":
                return 3;
            default:
                return null
        }
    }

    function EB(a, b) {
        b = Math.round(um(b) / 45);
        8 > b || (b = 0);
        if (a) {
            for (var c = 0; 8 !== c; c++)
                a.removeClass("octant" + c);
            a.addClass("octant" + b)
        }
    }

    function jI(a, b, c, d) {
        function e(a, b) {
            var c = a * a,
                d = 1 - a,
                e = d * d;
            return b[0] * e * d + 3 * b[1] * e * a + 3 * b[2] * d * c + b[3] * c * a
        }
        for (var g, h, k = 0, l = []; 1 > k;)
            g = e(k, [a.x, b.x, c.x, d.x]),
            h = e(k, [a.y, b.y, c.y, d.y]),
            l.push({
                x: g,
                y: h
            }),
            k += 5E-5;
        var m = [{
                x: a.x,
                y: a.y
            }],
            n = .05,
            p = null;
        l.forEach(function (a) {
            null !== p && a.x > n && (m.push(p),
                n += .05);
            p = a
        });
        m.push({
            x: d.x,
            y: d.y
        });
        return m
    }

    function eS() {
        var a = $("#canvaDocument"),
            b, c, d, e;
        Py || $("body").hasClass("fullscreenMode") ? (e = c = 0,
            d = $(window).width(),
            a = $(window).height()) : (e = J.cY,
            d = J.bY,
            b = J.$X,
            c = J.aY,
            d = a.width() - c - d,
            a = a.height() - e - b);
        return new U(c, e, d, a)
    }

    function fS() {
        var a = J.jC;
        return km(eS().translate(a, a), -2 * a, -2 * a)
    }

    function gS() {
        var a = J.GQ;
        return km(eS().translate(a, a), -2 * a, -2 * a)
    };
    var Qy = !1,
        Py = !1;

    function hS(a, b) {
        function c() {
            var c = a.slice(0);
            b.forEach(function (a) {
                a = GO(a.uh.eg).filter(d).map(e(a.name));
                c = c.concat(a)
            });
            return new EO({
                gi: c
            })
        }

        function d(a) {
            return "start" !== a.name
        }

        function e(a) {
            return function (b) {
                return {
                    name: b.name,
                    from: a + ":" + b.from,
                    to: a + ":" + b.to
                }
            }
        }
        this.Co = null;
        this.ZG = (b || []).slice(0);
        this.eg = new EO;
        this.OD = null;
        var g = this,
            h;
        0 < this.ZG.length ? (h = c(),
            HO(this.eg, h.gi),
            this.ZG.forEach(function (a) {
                g.listenTo(a.uh, "change:state", g.h4)
            })) : a && HO(this.eg, a);
        this.listenTo(this.eg, "state:enter", this.g4)
    }
    hS.prototype.trigger = Backbone.Events.trigger;
    hS.prototype.listenTo = Backbone.Events.listenTo;
    hS.prototype.on = Backbone.Events.on;
    hS.prototype.off = Backbone.Events.off;
    _.extend(hS.prototype, Backbone.Events);
    hS.prototype.start = function () {
        this.eg.start()
    };
    hS.prototype.cancel = function () {
        this.Co && this.Co.cancel ? (this.Co.cancel(),
            this.Co = null) : this.Co && this.Co.abort && (this.Co.abort(),
            this.Co = null);
        this.ZG.forEach(function (a) {
            a.uh.cancel()
        })
    };
    hS.prototype.h4 = function (a, b, c, d) {
        var e = this.ZG.filter(function (b) {
            return b.uh === a
        })[0].name + ":" + b;
        this.eg.Uy() !== e && JO(this.eg, e);
        var g = Array.prototype.slice.call(arguments, 2),
            e = ["change:state", this, e].concat(g);
        this.trigger.apply(this, e)
    };
    hS.prototype.g4 = function (a, b) {
        this.trigger("change:state", this, b)
    };

    function mO(a) {
        a.stopPropagation()
    }

    function iS(a) {
        a.preventDefault()
    }

    function jS() {
        return !1
    }
    var FM = "createTouch" in document,
        DM = !1;

    function Po(a) {
        this.el = $(a);
        this.BH = {};
        this.KR = ""
    }

    function aM(a) {
        return 0 <= a.KR.indexOf("touch")
    }
    Po.prototype.selected = function (a) {
        var b = this,
            c = null;
        return function (d) {
            var e = d.type;
            b.KR = e;
            null === c && (c = e);
            return e !== c ? !0 : a.call(this, d)
        }
    };

    function kS(a) {
        return a.split("|").filter(function (a) {
            return "" !== a
        })
    }

    function lS(a) {
        return a.split(/[|+]/).filter(function (a) {
            return "" !== a
        })
    }

    function mS(a, b, c, d) {
        if (a.BH[b + "_" + c])
            throw a = 'An event handler already exists for "' + b + '"',
                c && (a += ' and selector "' + c + '"'),
                Error(a);
        a.BH[b + "_" + c] = d
    }
    Po.prototype.on = function (a, b, c) {
        var d = this,
            e;
        "function" === typeof c ? (e = b,
            b = c) : e = "";
        if (0 <= a.indexOf("|")) {
            var g = this.selected(b);
            b.QX = g;
            mS(this, a, e, g);
            kS(a).forEach(function (a) {
                if (e)
                    d.el.on(a, e, g);
                else
                    d.el.on(a, g)
            })
        } else if (mS(this, a, e, b),
            e)
            this.el.on(a, e, b);
        else
            this.el.on(a, b);
        return this
    };
    Po.prototype.off = function (a, b, c) {
        var d = this,
            e;
        "function" === typeof c ? (e = b,
            b = c) : e = "";
        var g = this.BH[a + "_" + e];
        if (g) {
            if (g !== (b.QX || b))
                throw Error('The given handler is not listening to event "' + a + '"');
            b.QX = null;
            lS(a).forEach(function (a) {
                e ? d.el.off(a, e, g) : d.el.off(a, g)
            });
            delete this.BH[a + "_" + e]
        }
        return this
    };

    function nS(a) {
        Error.captureStackTrace && Error.captureStackTrace(this, this.constructor);
        this.message = a
    }
    nS.prototype = Object.create(Error.prototype);
    nS.prototype.constructor = nS;

    function Gi(a) {
        switch (a) {
            case "card_declined":
                return new oS;
            case "expired_card":
                return new pS;
            case "incorrect_cvc":
                return new qS;
            case "incorrect_number":
                return new rS;
            case "invalid_cvc":
                return new sS;
            case "invalid_expiry_month":
                return new tS;
            case "invalid_expiry_year":
                return new uS;
            case "invalid_number":
                return new vS;
            case "missing":
                return new wS;
            case "processing_error":
                return new xS;
            default:
                return new yS(a)
        }
    }

    function oS() {
        nS.call(this, "credit card declined")
    }
    oS.prototype = Object.create(nS.prototype);
    oS.prototype.constructor = oS;

    function pS() {
        nS.call(this, "credit card expired")
    }
    pS.prototype = Object.create(nS.prototype);
    pS.prototype.constructor = pS;

    function qS() {
        nS.call(this, "credit card cvc incorrect")
    }
    qS.prototype = Object.create(nS.prototype);
    qS.prototype.constructor = qS;

    function rS() {
        nS.call(this, "credit card number incorrect")
    }
    rS.prototype = Object.create(nS.prototype);
    rS.prototype.constructor = rS;

    function sS() {
        nS.call(this, "credit card cvc invalid")
    }
    sS.prototype = Object.create(nS.prototype);
    sS.prototype.constructor = sS;

    function tS() {
        nS.call(this, "credit card expiry month invalid")
    }
    tS.prototype = Object.create(nS.prototype);
    tS.prototype.constructor = tS;

    function uS() {
        nS.call(this, "credit card expiry year invalid")
    }
    uS.prototype = Object.create(nS.prototype);
    uS.prototype.constructor = uS;

    function vS() {
        nS.call(this, "credit card number invalid")
    }
    vS.prototype = Object.create(nS.prototype);
    vS.prototype.constructor = vS;

    function wS() {
        nS.call(this, "credit card missing but required")
    }
    wS.prototype = Object.create(nS.prototype);
    wS.prototype.constructor = wS;

    function xS() {
        nS.call(this, "credit card processing error")
    }
    xS.prototype = Object.create(nS.prototype);
    xS.prototype.constructor = xS;

    function yS(a) {
        nS.call(this, "unknown credit card processing error " + a);
        this.errorCode = a
    }
    yS.prototype = Object.create(nS.prototype);
    yS.prototype.constructor = yS;

    function zS() {
        nS.call(this, "no credit card entered")
    }
    zS.prototype = Object.create(nS.prototype);
    zS.prototype.constructor = zS;

    function AS(a, b) {
        if (b instanceof oS)
            return a.format("creditCardDeclined");
        if (b instanceof pS)
            return a.format("creditCardExpired");
        if (b instanceof qS)
            return a.format("creditCardCvcIncorrect");
        if (b instanceof rS)
            return a.format("creditCardNumberIncorrect");
        if (b instanceof sS)
            return a.format("creditCardCvcIncorrect");
        if (b instanceof tS)
            return a.format("creditCardExpiryMonthIncorrect");
        if (b instanceof uS)
            return a.format("creditCardExpiryYearIncorrect");
        if (b instanceof vS)
            return a.format("creditCardNumberIncorrect");
        if (b instanceof wS)
            return a.format("creditCardMissingButRequired");
        if (b instanceof xS)
            return a.format("creditCardProcessingError");
        if (b instanceof yS)
            return a.format("creditCardUnknownProcessingError", b.errorCode);
        if (b instanceof zS)
            return a.format("creditCardNoCardEntered");
        throw Error("unrecognized CreditCardError");
    };

    function BS() {
        var a = window.stripeConfig;
        switch (a.impl) {
            case "local":
                return new CS;
            case "stripe":
                return new DS(a.publishableKey, window.Stripe || null);
            default:
                throw Error('unexpected stripe impl "' + a.impl + '"');
        }
    }

    function CS() {}
    CS.prototype.createToken = P.method(function (a) {
        return JSON.stringify({
            stripeId: "card_ " + Math.random(),
            brand: "Visa",
            expMonth: a.pS,
            expYear: a.qS,
            last4: a.Qi.slice(-4)
        })
    });

    function DS(a, b) {
        (this.Kf = b) && this.Kf.setPublishableKey(a)
    }
    DS.prototype.createToken = function (a) {
        return new P(function (b, c) {
                if (!this.Kf)
                    throw Error("Stripe API is unavailable");
                a = {
                    cvc: a.Wq,
                    exp_month: a.pS,
                    exp_year: a.qS,
                    number: a.Qi
                };
                this.Kf.createToken(a, function (a, e) {
                    if (e.error) {
                        var g;
                        try {
                            g = e.error.code || ""
                        } catch (h) {
                            g = ""
                        }
                        c(Gi(g))
                    } else
                        b(e.id)
                })
            }
            .bind(this))
    };

    function gO(a) {
        var b = this,
            c = window.MutationObserver || window.WebKitMutationObserver;
        this.gv = null;
        this.cz = {
            nodeinserted: [],
            noderemoved: [],
            characterdatamodified: [],
            attrmodified: []
        };
        this.config = a ? a : {
            attributes: !1,
            childList: !0,
            characterData: !0,
            subtree: !0
        };
        this.Kk = new c(function (a) {
            a.forEach(function (a) {
                b.handle(a)
            })
        })
    }
    gO.prototype.normalize = function (a) {
        return a.toLowerCase()
    };
    gO.prototype.on = function (a, b) {
        a = this.normalize(a);
        this.cz.hasOwnProperty(a) || (this.cz[a] = []);
        this.cz[a].push(b);
        return this
    };
    gO.prototype.handle = function (a) {
        function b(b) {
            var e = c.normalize(b),
                g = new jQuery.Event(b);
            c.gv && (g.target = a.target,
                g.currentTarget = c.gv.get(0),
                c.cz.hasOwnProperty(e) && c.cz[e].forEach(function (a) {
                    a.call(c.gv, g)
                }))
        }
        var c = this;
        "childList" === a.type ? (a.addedNodes && 0 < a.addedNodes.length ? b("nodeInserted") : a.removedNodes && 0 < a.removedNodes.length && b("nodeRemoved"),
            b("subtreeModified")) : "attributes" === a.type ? b("attrModified") : "characterData" === a.type && b("characterDataModified")
    };
    gO.prototype.observe = function (a) {
        var b = $(a).get(0);
        if (this.gv)
            throw Error("Already observing an element");
        b && (this.Kk.observe(b, this.config),
            this.gv = $(a))
    };

    function iO(a) {
        a.Kk.disconnect();
        a.gv = null
    };

    function op(a, b, c) {
        this.text = b || null;
        b = lc(a);
        this.text && this.text.toLocaleLowerCase() === b.format("documentUntitledDesign").toLocaleLowerCase() && (this.text = null);
        this.Qt = c || null;
        this.u = a
    }
    op.prototype.on = Backbone.Events.on;
    op.prototype.off = Backbone.Events.off;
    op.prototype.trigger = Backbone.Events.trigger;

    function ES(a) {
        return a.text ? (a.text.match(/#[a-z0-9_-]+/gi) || []).map(function (a) {
            return a.slice(1).trim()
        }) : []
    }

    function GS(a) {
        return null === a.text || "" === a.text
    }
    op.prototype.ep = function () {
        return this.text
    };

    function HS(a, b) {
        var c;
        if (c = b) {
            b = b.trim().replace(/\s+/g, " ");
            c = J.jo;
            var d = "";
            b = b.trim();
            if (b.length <= c)
                c = b;
            else {
                void 0 === d && (d = "");
                var e = b.substr(0, c - d.length),
                    g = b.substr(c - d.length).match(/^\S+/),
                    h = e.match(/\S+$/);
                h && g && (e = e.substr(0, e.length - h[0].length));
                e = e.trim();
                "" === e && (e = b.substr(0, c - d.length));
                c = e = e.trim() + d
            }
        }
        b = c;
        a.text !== b && (a.text = b,
            a.trigger("change"))
    }

    function IS(a, b) {
        var c = jc(a.u);
        a = lc(a.u);
        return -1 != [a.nh(), a.format("documentSvgPlaceholderText"), Pd(c), Qd(c), c.format("objectPanelTextPanelAddBody")].indexOf(b)
    }

    function QN(a, b) {
        var c = a.text || lc(a.u).format("documentUntitledDesign");
        b = b && !!b.L0;
        a.Qt && (GS(a) || b) && (c = a.Qt + "  " + c);
        return c
    };

    function JS(a) {
        this.media = a.media;
        this.Ng = a.Ng;
        this.Kc = a.Kc;
        this.Su = a.Su;
        this.Ye = a.Ye;
        this.YA = null;
        this.LS = a.Ol && this.media.Ku()
    }
    f = JS.prototype;
    f.init = function () {
        var a = KS(this);
        0 < a.length && !this.Hu() && !this.Mm() && (this.YA = a[0].Hj);
        return this
    };
    f.Mm = function () {
        var a = this;
        return this.Kc.some(function (b) {
            return 0 <= a.Ye.indexOf(b.type)
        })
    };

    function LS(a) {
        return a.Mm() ? a.Kc[0].type : null
    }
    f.WE = function () {
        return "DESIGN" == this.media.Ab()
    };
    f.Hu = function () {
        var a = YD(this.media.Va());
        return !a || MS(this) ? !0 : Object.keys(a).every(function (b) {
            return 0 == a[b]
        })
    };

    function MS(a) {
        return a.LS && a.Ye.some(function (a) {
            return "ONE_USE" === a
        })
    }
    f.Hm = function () {
        var a = this.media.Va().Dc()[aC];
        return a ? a.Aa() : null
    };

    function NS(a) {
        if (a.LS)
            return Infinity;
        var b = a.Kc.map(function (b) {
            return (b.oK || b.py || Infinity) - a.Su
        });
        return Math.min.apply(Math, [].concat(la(b)))
    }
    f.HL = function () {
        return !/\.png$/.test(this.Hm())
    };
    f.Um = function (a) {
        return 0 <= this.Ye.indexOf(a)
    };

    function KS(a) {
        var b = YD(a.media.Va());
        if (!b || a.Hu())
            return [];
        var c = Object.keys(b).filter(function (b) {
            return 0 <= a.Ye.indexOf(b) && 0 > OS(a).indexOf(b)
        }).map(function (c) {
            return {
                Hj: c,
                Za: b[c],
                zf: a.YA == c
            }
        });
        return _.sortBy(c, function (a) {
            return a.Za
        })
    }

    function OS(a) {
        return a.Kc.map(function (a) {
            return a.type
        })
    }
    f.Jb = function () {
        return this.media.Va().Jb()
    };
    f.Ky = function () {
        return this.media.G()
    };
    f.Ly = function () {
        return this.media.Va().getVersion()
    };

    function PS(a) {
        if (a.Mm())
            return 0;
        a = KS(a).filter(function (a) {
            return a.zf
        }).map(function (a) {
            return a.Za
        });
        return 0 < a.length ? a[0] : 0
    }

    function QS(a, b) {
        function c(a) {
            return a.WE() ? 0 : a.Hu() ? a.Mm() ? 2 : 1 : a.Mm() ? (a = OS(a),
                0 <= a.indexOf("ONE_USE") ? 5 : 0 <= a.indexOf("ROYALTY_FREE") ? 4 : 3) : 6
        }
        return c(b) - c(a)
    }

    function RS() {
        this.Vh = []
    }

    function SS(a, b) {
        TS(a, b.items.map(function (a) {
            return new JS({
                media: a.media,
                Ng: a.Ng,
                Kc: a.Kc,
                Ye: b.Ye,
                Su: b.Su,
                Ol: b.Ol
            })
        }))
    }

    function TS(a, b) {
        a.Vh = b;
        a.Vh.forEach(function (a) {
            return a.init()
        });
        a.Vh.sort(QS)
    }
    RS.prototype.Um = function (a) {
        return this.Vh.some(function (b) {
            return b.Um(a)
        })
    };

    function US(a) {
        return a.Vh.filter(function (a) {
            return !a.Mm()
        })
    }

    function VS(a) {
        return a.Vh.reduce(function (a, c) {
            return a + PS(c)
        }, 0)
    }

    function WS(a) {
        return Math.min.apply(Math, [].concat(la(a.Vh.map(function (a) {
            return NS(a)
        }))))
    }

    function XS(a, b, c, d) {
        var e = [];
        d && e.push(new zh({
            Z: b,
            items: [new Oh({
                gJ: ph(d)
            })],
            currency: "USD"
        }));
        e.push(new zh({
            Z: b,
            items: YS(a, c),
            currency: "USD"
        }));
        return e
    }

    function YS(a, b) {
        return US(a).map(function (a) {
            return new Oh({
                vp: new Hh({
                    media: a.Ky(),
                    version: a.Ly(),
                    document: b,
                    Hj: a.YA || "ONE_USE"
                })
            })
        })
    };

    function ZS(a) {
        this.$el = a
    }
    t(ZS, fc);

    function $S(a, b, c, d, e) {
        this.Ia = a.Ia;
        this.Eb = a.Eb;
        this.pc = a.pc;
        this.ka = a.ka;
        this.cc = e;
        this.view = b;
        this.Mb = c;
        this.sV = d;
        this.open = !1
    }

    function aT(a, b) {
        return new P(function (c) {
            a.sV.once("paymentComplete", c);
            bT(a, b).then(function () {
                return a.show()
            })
        })
    }
    $S.prototype.close = function () {
        this.Mb.remove();
        this.open = !1
    };
    $S.prototype.show = function () {
        Da(!this.open, "the watermark remove dialog is already open");
        this.open = !0;
        this.sV.refresh();
        this.Mb.show()
    };

    function bT(a, b) {
        var c = ["ROYALTY_FREE", "EXTENDED"],
            d, e, g, h = new vD({
                types: c,
                status: ["ACTIVATED"],
                Z: a.Ia,
                media: b
            });
        b = (new eE).fQ(b).ho().XB();
        return P.all([GD(a.pc, b), a.Eb.cE(h)]).then(function (b) {
            var c = ka(b);
            b = c.next().value;
            c = c.next().value;
            d = b;
            e = c.Kc;
            g = c.Al;
            return P.all(d.media.map(function (b) {
                return a.ka.wa(b.wa())
            }))
        }).then(function (b) {
            var h = d.media.map(function (a) {
                return new JS({
                    media: a,
                    Ng: b.find(function (b) {
                        return b.id === a.wa()
                    }).displayName,
                    Kc: e.filter(function (b) {
                        return b.media === a.G()
                    }),
                    P9: g,
                    Ye: c,
                    Ol: !1
                })
            });
            TS(a.cc, h)
        })
    };

    function cT(a, b, c, d, e, g, h, k) {
        var l = GM;
        void 0 === k && (k = !0);
        var m = Math.max(J.DQ, J.DQ / d());
        k = dT(a, c, m, b, h);
        if (void 0 !== h && null != k.Js && null != k.Ks) {
            var n = Math.abs(a.nc() - k.Js),
                p = Math.abs(a.xc() - k.Ks);
            n > p ? k.Ks = null : k.Js = null
        }
        null != k.Js && (!a.eb() && 1 === k.Zn.length && !k.Zn[0].eb() && Math.abs(k.Zn[0].Y() - a.Y()) < m ? !h && a.wb(k.Zn[0].Y()) : !h && a.wb(k.Js));
        null != k.Ks && (!a.eb() && 1 === k.Zn.length && !k.Zn[0].eb() && Math.abs(k.Zn[0].N() - a.N()) < m ? !h && a.rb(k.Zn[0].N()) : !h && a.rb(k.Ks));
        !h || null == k.Js && null == k.Ks || (k = dT(a, c, 1, b, h));
        l();
        b = [].concat([a], la(k.Zn));
        if (null != k.Js) {
            c = Math.max.apply(Math, [].concat(la(b.map(function (a) {
                return a.ud()
            }))));
            h = Math.min.apply(Math, [].concat(la(b.map(function (a) {
                return a.xc()
            }))));
            var r = Math.abs(c - h) * d(),
                u = Math.min.apply(Math, [].concat(la(b.map(function (a) {
                    return g(a)
                })))),
                v = [];
            k.nt.hl && v.push(e(a) - 1);
            k.nt.r && v.push(e(a) + a.eh() * d());
            k.nt.cy && v.push(e(a) + a.eh() / 2 * d());
            Tg().write(function () {
                v.forEach(function (a, b) {
                    $("#overlays .vertical.align").eq(b).addClass("on").css("top", Math.round(u)).css("left", Math.round(a)).css("height", Math.round(r))
                })
            })
        }
        if (null != k.Ks) {
            c = Math.max.apply(Math, [].concat(la(b.map(function (a) {
                return a.Ld()
            }))));
            h = Math.min.apply(Math, [].concat(la(b.map(function (a) {
                return a.nc()
            }))));
            var y = Math.abs(c - h) * d(),
                q = Math.min.apply(Math, [].concat(la(b.map(function (a) {
                    return e(a)
                })))),
                x = [];
            k.nt.t && x.push(g(a) - 1);
            k.nt.b && x.push(g(a) + a.dh() * d());
            k.nt.cx && x.push(g(a) + a.dh() / 2 * d());
            Tg().write(function () {
                x.forEach(function (a, b) {
                    $("#overlays .horizontal.align").eq(b).addClass("on").css("top", Math.round(a)).css("left", Math.round(q)).css("width", Math.round(y))
                })
            })
        }
    }

    function dT(a, b, c, d, e) {
        function g(a) {
            function b(c, d) {
                return a(c) - a(d)
            }
            var c, d = [];
            Q.slice(0).sort(b).forEach(function (e) {
                c && 0 == b(c.Ce[0], e) ? (c.Ce.push(e),
                    c.ll = Math.min(c.ll, e.ll),
                    c.ml = Math.min(c.ml, e.ml),
                    c.$m = Math.max(c.$m, e.$m),
                    c.an = Math.max(c.an, e.an)) : d.push(c = {
                    Ce: [e],
                    pos: a(e),
                    ll: e.ll,
                    ml: e.ml,
                    $m: e.$m,
                    an: e.an,
                    zJ: NaN
                })
            });
            return d
        }

        function h(a, b) {
            return a.pos - b.pos
        }

        function k(a, b) {
            return a.zJ < b.zJ ? a : b
        }

        function l(a, b, d) {
            var e = aS(b, {
                    pos: d - c
                }, h),
                g = bS(b, {
                    pos: d + c
                }, h);
            b = b.slice(e, g);
            b.forEach(function (a) {
                a.zJ = Math.abs(d - a.pos)
            });
            b.length && a.push(b.reduce(k))
        }
        var m = null,
            n = null,
            p = [],
            r = {
                hl: !1,
                r: !1,
                cy: !1,
                t: !1,
                b: !1,
                cx: !1
            },
            u = a.eh(),
            v = a.dh(),
            y, q, x, E, B, K, C, N;
        y = a.nc();
        q = a.xc();
        x = a.Ld();
        E = a.ud();
        B = a.eh();
        K = a.dh();
        C = y + B / 2;
        N = q + K / 2;
        var Q = b.map(function (a) {
            var b = a.nc(),
                c = a.Ld(),
                d = (b + c) / 2,
                e = a.xc(),
                g = a.ud();
            return {
                object: a,
                ll: b,
                ml: e,
                oF: d,
                pF: (e + g) / 2,
                $m: c,
                an: g
            }
        });
        d.jp || (d.jp = !0,
            d.Kl = {
                ll: g(function (a) {
                    return a.ll
                }),
                oF: g(function (a) {
                    return a.oF
                }),
                $m: g(function (a) {
                    return a.$m
                }),
                ml: g(function (a) {
                    return a.ml
                }),
                pF: g(function (a) {
                    return a.pF
                }),
                an: g(function (a) {
                    return a.an
                })
            });
        b = 0;
        var M = null;
        b = [];
        if (void 0 === e || e.hl)
            if (M = null,
                b = [],
                l(b, d.Kl.ll, y),
                l(b, d.Kl.$m, y),
                M = b.length && b.reduce(k))
                for (m = M.pos,
                    r.hl = !0,
                    b = 0; b < M.Ce.length; ++b)
                    p.push(M.Ce[b].object);
        if (void 0 === e || e.r)
            if (M = null,
                b = [],
                l(b, d.Kl.ll, x),
                l(b, d.Kl.$m, x),
                M = b.length && b.reduce(k))
                for (m = M.pos - B,
                    r.r = !0,
                    b = 0; b < M.Ce.length; ++b)
                    p.push(M.Ce[b].object);
        if (void 0 === e || e.d)
            if (M = null,
                b = [],
                l(b, d.Kl.ml, q),
                l(b, d.Kl.an, q),
                M = b.length && b.reduce(k))
                for (n = M.pos,
                    r.t = !0,
                    b = 0; b < M.Ce.length; ++b)
                    p.push(M.Ce[b].object);
        if (void 0 === e || e.u7)
            if (M = null,
                b = [],
                l(b, d.Kl.ml, E),
                l(b, d.Kl.an, E),
                M = b.length && b.reduce(k))
                for (n = M.pos - K,
                    r.b = !0,
                    b = 0; b < M.Ce.length; ++b)
                    p.push(M.Ce[b].object);
        (function () {
            var b;
            b = [];
            l(b, d.Kl.oF, C);
            if (b = b.length && b.reduce(k)) {
                m = b.pos - B / 2;
                r.cy = !0;
                for (var c = 0; c < b.Ce.length; ++c)
                    p.push(b.Ce[c].object);
                var g = (c = e && e.ll) ? a.Ld() : a.nc();
                u = 2 * Math.abs(b.oF - g);
                c && (m -= (u - B) / 2)
            }
        })();
        (function () {
            var a;
            a = [];
            l(a, d.Kl.pF, N);
            if (a = a.length && a.reduce(k)) {
                n = a.pos - K / 2;
                r.cx = !0;
                for (var b = 0; b < a.Ce.length; ++b)
                    p.push(a.Ce[b].object);
                b = e && e.ml;
                v = 2 * Math.abs(a.pF - (b ? E : q));
                b && (n -= (v - K) / 2)
            }
        })();
        y = a.Y() - a.nc();
        x = a.N() - a.xc();
        null !== m && m > a.Y() ? m += y : null !== m && m < a.Y() && (m += y);
        null !== n && n > a.N() ? n += x : null !== n && n < a.N() && (n += x);
        null !== m && 0 === Math.round(10 * m) / 10 && (m = 0);
        null !== n && 0 === Math.round(10 * n) / 10 && (n = 0);
        return {
            Js: m,
            Ks: n,
            z8: u,
            y8: v,
            Zn: p,
            nt: r
        }
    };
    var bB = "screen";

    function HN(a, b, c) {
        var d = yb,
            e = Hb;
        a = new kt(b.id, 2, 0, a, b.version, b.session, b.timestamp, b.content || {}, nq(b.extensions), null != b.conversionLoss ? Zr("conversionLoss", b.conversionLoss) : null);
        c = new dt(d, e, a, new Zk, c);
        c.mp = !0;
        ub = c;
        Ib.ba.get(Cf) && ub.start();
        ub.MO(eT);
        Xb = 0;
        return ub
    }

    function Dy(a) {
        $("#canvaDocument").on("mousedown", ".page img, .cropControls img, a", iS);

        $("#canvaDocument").on("mouseup", GM);
        $("#canvaDocument").on("click", ".hasWatermark .removeWatermark", fT(a));
        $("#content").on("keydown", ".element.text.focused", gT);
        $("#content").on("keydown", ".element.text.focused", hT);
        $("#content").on("input", ".element.text.focused", iT);
        $("#canvaDocument").on("DOMNodeInserted", ".element.text.focused", jT);
        if (!FM)
            $("#canvaDocument").on("click", ".page .element:not(.focused)", !1);
        $("#content").on("dblclick", ".selectionBox:not(.multipleSelectionBox)", kT);
        
        (new Po("#canvaDocument")).on("mousedown", ".selectionBox, .element", Yb)
        .on("touchstart", ".selectionBox, .element", Yb);
        
        (new Po("#canvaDocument")).on("click", ".element.focused", mO)
        .on("mousedown", ".element.focused", mO)
        .on("touchstart", ".element.focused", mO)
        .on("mousedown", ".element:not(.focused, .multiSelected)", lT)
        .on("touchstart", ".element:not(.focused, .multiSelected)", lT);
        
        (new Po("#content"))
        .on("click", ".selectionBox.multipleSelectionBox", jS)
        .on("click", ".element.multiSelected", jS)
        .on("mousedown", ".selectionBox.multipleSelectionBox", mT)
        .on("touchstart", ".selectionBox.multipleSelectionBox", mT)
        .on("mousedown", ".element.multiSelected", mT)
        .on("touchstart", ".element.multiSelected", mT);

        (new Po("#content")).on("click", ".selectionBox", jS).on("mousedown", ".selectionBox", nT)
        .on("touchstart", ".selectionBox", nT);

        (new Po("#content")).on("click", ".selectionBox .handle", jS)
        .on("mousedown", ".selectionBox:not(.multipleSelectionBox, .text.freeResize) .handle", oT)
        .on("touchstart", ".selectionBox:not(.multipleSelectionBox, .text.freeResize) .handle", oT);

        (new Po("#content")).on("click", ".selectionBox .handle", jS)
        .on("mousedown", ".selectionBox.text.freeResize .handle.br", pT)
        .on("touchstart", ".selectionBox.text.freeResize .handle.br", pT);
        (new Po("#content")).on("mousedown", ".multipleSelectionBox .handle", qT)
        .on("touchstart", ".multipleSelectionBox .handle", qT);

        (new Po("#content")).on("click", ".cropControls", jS)
        .on("mousedown", ".cropControls", rT).on("touchstart", ".cropControls", rT);
        (new Po("#content")).on("click", ".cropControls .handle", jS)
        .on("mousedown", ".cropControls .handle", sT).on("touchstart", ".cropControls .handle", sT);
        (new Po("#content")).on("click", ".viewPort .frameHandle", jS)
        .on("mousedown", ".viewPort .frameHandle", tT).on("touchstart", ".viewPort .frameHandle", tT);
        (new Po("#content")).on("click", ".selectionBox .rotate", jS)
        .on("mousedown", ".selectionBox .rotate", Io).on("touchstart", ".selectionBox .rotate", Io);
        
        (new Po("#objectPanel")).on("mousedown", uT).on("touchstart", uT)
        .on("mousedown", ".gallery a", uT).on("touchstart", ".gallery a", uT);

        $("#canvaDocument").on("mouseenter", ".unapproved, .failed", vT);
        if (FM)
            $("#content").on("click", wT);
        $("#null").keydown(function () {
            $(this).blur()
        })
    }

    function xT() {
        var a = G;

        function b(a) {
            a.TB(vb)
        }
        Py || Jp(a).forEach(b)
    }

    function yT(a, b, c, d, e, g) {
        function h() {
            return new zT({
                pk: (new UAParser).getBrowser().name,
                document: a,
                ja: b,
                La: ub,
                Er: Date.now(),
                Tg: new At(Hb),
                DJ: new st,
                zk: d,
                u: g
            })
        }

        function k(a) {
            document.title = a
        }
        if (Py)
            H = new AT({
                u: g,
                model: a,
                aa: Rk
            });
        else {
            Tb = new NN({
                model: a,
                ja: b,
                La: ub,
                yc: $b,
                Ei: c,
                lH: k,
                YH: e,
                ZI: h,
                mg: d.mg,
                u: g,
                zk: d,
                H: w(T)
            });
            c = c.kh() ? BT : void 0;
            H = new AT({
                u: g,
                model: a,
                aa: Rk,
                GH: c
            });
            Zb = new CT({
                model: a,
                Gk: H,
                u: g
            });
            var l = new PO(a, H);
            Rb = function () {
                return l
            }
        }
    }

    function Cy(a, b, c, d, e, g) {
        function h(a) {
            -1 === l.indexOf(a) && (l.push(a),
                m())
        }
        G && (bh(),
            G.off(),
            H.remove(),
            Py || (Tb.remove(),
                Zb.remove()));
        var k = _.flatten(_.pluck(a.pages, "elements")).length,
            l = [],
            m = _.after(k + 1, function () {
                if (G && G.xa) {
                    var a = 10 * G.xa().length;
                    S.off("elementLoaded", h);
                    S.off("elementLoadingError", h);
                    window.setTimeout(function () {
                        G.qL = !0;
                        S.trigger("documentRendered");
                        window.setTimeout(function () {
                            $("#canvaDocument").addClass("rendered")
                        }, 2E3);
                        g && (g.Ga("rendered"),
                            g.done());
                        G.on("change", G.rG);
                        G.listenTo(S, "elementLoaded:graphic", G.rG);
                        G.listenTo(S, "elementLoaded:svg", G.rG);
                        G.rG();
                        G.on("change", G.CA);
                        G.listenTo(S, "elementLoaded:text", G.CA);
                        G.listenTo(S, "elementLoaded:svg", G.CA);
                        G.CA()
                    }, 100 + a)
                }
            });
        S.on("elementLoaded", h);
        S.on("elementLoadingError", h);
        S.on("pageTimeoutWaitingForElements", function () {
            TM("S7")
        });
        G = new mp(a, b, d);
        G.on("change", Vb);
        yT(G, Ib, c, Lb, e ? e() : [], d);
        G.Rb().forEach(function (a) {
            a.xa().forEach(function (b) {
                a.trigger("element:add", a, b)
            })
        });
        m();
        I = new VM;
        xT()
    }

    function vg(a) {
        var b = a.ha();
        if (null == b)
            throw Error("cannot register element add operation - element must first be added to a page");
        a = dN(a.serialize());
        a.pageIndex = Mo(G, b);
        I.register(new Y(ZM, a))
    }

    function DT(a) {
        var b = [];
        a.elements.forEach(function (a) {
            a = a.elementIndex; -
            1 !== a && b.push(a)
        });
        return [Math.min.apply(null, b), Math.max.apply(null, b)]
    }

    function ET(a) {
        var b = a.ha();
        if (null == b)
            throw Error("cannot register element group operation - group has no page");
        a = a.serialize();
        var c = dN(a);
        c.pageIndex = Mo(G, b);
        c.childRange = DT(a);
        I.register(new Y(13, c))
    }

    function FT(a) {
        var b = a.ha();
        if (null == b)
            throw Error("cannot register element ungroup operation - group has no page");
        a = a.serialize();
        var c = dN(a);
        c.pageIndex = Mo(G, b);
        c.childRange = DT(a);
        I.register(new Y(14, c))
    }

    function eM(a) {
        var b = a.ha();
        if (null != b) {
            var c = dN(a.serialize());
            c.pageIndex = Mo(G, b);
            wB(a) && (b = xB(a)) && (c.groupElementIndex = b.ea(),
                c.groupIndex = b.xa().indexOf(a));
            I.register(new Y($M, c))
        }
    }

    function GT(a) {
        if (a.xI()) {
            var b = a.ha(),
                c = Mo(G, b),
                d = b.Ba();
            qm(a.Ba(), d) ? (jJ(),
                b.xa().forEach(function (b) {
                    b !== a && b.Ac() && (eM(b),
                        b.remove())
                }),
                a.Ac() || (b = a.ea(),
                    Ep(a),
                    I.register(new Y(kM, {
                        backgroundColor: a.ah(),
                        elementIndex: a.ea(),
                        oldElementIndex: b,
                        pageIndex: c
                    })),
                    bh(),
                    wg(a)),
                kJ()) : a.Ac() && (b = a.ea(),
                d = a.ah(),
                iC(a),
                I.register(new Y(jM, {
                    backgroundColor: d,
                    elementIndex: a.ea(),
                    oldElementIndex: b,
                    pageIndex: c
                })))
        }
    }
    (function () {
        var a = 0,
            b = !1;
        Vb = function () {
            if (ub && ub.mp) {
                var c = G.serialize();
                OK(c);
                var d = Np(c);
                if (d.result)
                    Xb = ub.post(Xb, c),
                    null == Xb && RM("S3"),
                    a = 0;
                else if (G.qL)
                    if (Pp())
                        S.once("pageLayoutLoaded", Vb);
                    else
                        3 <= a && (TM("S2", d.description),
                            ub.close()),
                        a += 1;
                else
                    b || (b = !0,
                        S.once("documentRendered", Vb))
            } else
                TM("S1")
        }
    })();
    var HT = 0;

    function eT(a) {
        window.clearTimeout(HT);
        ub && ub.mp ? (1 == a ? HT = window.setTimeout(function () {
                TM("S5")
            }, J.bx) : 2 == a ? (1 === Xb && 2 === ub.be() && window.opener && "/" === window.opener.location.pathname && window.opener.location.reload(),
                SM()) : 3 == a && (RM("S4"),
                ub.close()),
            S.trigger("session:sync", a)) : TM("S1")
    }
    (function () {
        function a() {
            b = [];
            $(document).off("keyup", a)
        }
        var b = [];
        Yb = function (c) {
            var d = void 0 !== c.clientX ? c.clientX : c.originalEvent.touches[0].clientX,
                e = void 0 !== c.clientY ? c.clientY : c.originalEvent.touches[0].clientY;
            if (c.metaKey) {
                $(document).on("keyup", a);
                var g = [],
                    h = null;
                $("#canvaDocument .page.selected .element").each(function () {
                    var a = this.getBoundingClientRect();
                    a.left < d && a.right > d && a.top < e && a.bottom > e ? (a = $(this).data("canvaElement"),
                        g.push(a), -1 === b.indexOf(a) && (a.zf() ? (jN(a),
                            b.unshift(a)) : b.push(a))) : h = $(this).data("canvaElement")
                });
                b.forEach(function (a, c) {
                    -1 === g.indexOf(a) && b.splice(c, 1)
                });
                h && -1 !== b.indexOf(h) && b.unshift(h);
                var k = b.pop();
                if (k)
                    return bh(),
                        wg(k),
                        b.unshift(k),
                        c.stopPropagation(),
                        c.preventDefault(), !1
            }
            return !0
        }
    })();

    function IT() {
        return G.Rb().map(function (a) {
            return {
                rect: Rg(hC(H, a)),
                page: a
            }
        })
    }

    function fT(a) {
        return function (b) {
            var c = ax(a.Ta).wa(),
                c = {
                    H: T,
                    ya: bx(a.Ta).G(),
                    Ia: c.G(),
                    ma: zb,
                    pc: Bb,
                    ka: Cb,
                    Eb: a.Eb,
                    sb: a.sb,
                    u: Kb,
                    Xe: c.Ph(),
                    sa: a.sa
                },
                d = c.u;
            d.cQ || (d.cQ = new Te(d.config));
            var e = d.cQ,
                d = new RS,
                g = {
                    H: c.H,
                    ma: c.ma,
                    ka: c.ka,
                    sb: c.sb,
                    Eb: c.Eb,
                    u: c.u,
                    ya: c.ya,
                    Ia: c.Ia,
                    df: !1,
                    If: e.If(),
                    cc: d,
                    Xe: c.Xe,
                    sa: c.sa
                },
                h = JT({
                    Z: g.Ia,
                    Zl: g.ma,
                    Re: !1,
                    Kf: g.sb,
                    ec: Zc(g.u)
                }),
                h = new KT({
                    Ad: h.bc,
                    Qg: h.view
                }),
                g = (new LT({
                    view: h,
                    H: g.H,
                    ya: g.ya,
                    Ia: g.Ia,
                    ma: g.ma,
                    ka: g.ka,
                    Eb: g.Eb,
                    jc: g.jc,
                    u: g.u,
                    df: g.df,
                    If: g.If,
                    cc: g.cc,
                    zb: g.zb,
                    Xe: g.Xe,
                    sa: g.sa
                })).init(),
                k = e.title(),
                e = $;
            soy.asserts.assertType(goog.isString(k) || k instanceof goog.soy.data.SanitizedContent, "title", k, "string|goog.soy.data.SanitizedContent");
            k = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csection class\x3d"watermarkRemovalDialog__content"\x3e\x3cheader class\x3d"watermarkRemovalDialog__header"\x3e\x3ch2\x3e' + soy.$$escapeHtml(k) + '\x3c/h2\x3e\x3c/header\x3e\x3cdiv class\x3d"watermarkRemovalDialog__body"\x3e\x3cdiv class\x3d"watermarkRemovalDialog__paymentPage"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/section\x3e');
            e = e(k.toString());
            e.find(".watermarkRemovalDialog__paymentPage").append(h.$el);
            h = new ZS(e);
            e = new Uo({
                content: h.$el,
                aa: Rk,
                cf: !0,
                className: "watermarkRemovalDialog"
            });
            c = new $S(c, h, e, g, d);
            b = $(b.target).parent(".selectionBox");
            d = b.data("element");
            if (d.data("canvaElement"))
                return d = d.data("canvaElement"),
                    MT(c, d, b)
        }
    }

    function MT(a, b, c) {
        var d = G;

        function e(a, b) {
            if (b.Ju()) {
                var c = b.Jy();
                if (0 < c.length && c.map(function (a) {
                        return a.Ub()
                    }).some(h.bind(null, a)))
                    return !0
            }
            return b.Cj() ? h(a, b.Ub()) : !1
        }

        function g(a) {
            return a.Fv ? a.Fv() : P.resolve()
        }

        function h(a, b) {
            return a.some(function (a) {
                return null != a && null != b && a.id === b.id && a.version === b.version
            })
        }
        var k = [];
        if (b.Ju()) {
            var l = b.Jy();
            0 < l.length && (k = l.map(function (a) {
                return a.Ub()
            }).filter(NT))
        }
        b.Cj() && NT(b.Ub()) && k.push(b.Ub());
        b = k.filter(function (a) {
            return null != a
        }).map(function (a) {
            return a.id
        });
        aT(a, b).then(function (a) {
                a = d.xa().filter(e.bind(null, a)).map(g);
                return P.all(a)
            }
            .bind(null, k)).then(function () {
            a.close();
            c.removeClass("hasWatermark")
        })
    }

    function OT(a) {
        if (a.Ju()) {
            var b = a.Jy();
            if (0 < b.length && b.some(function (a) {
                    return NT(a.Ub())
                }))
                return !0
        }
        return a.Cj() ? NT(a.Ub()) : !1
    }

    function NT(a) {
        var b;
        a && (b = (a = Gb.Uc(a.id, a.version)) && a[Fg]);
        return b && b.watermarked || !1
    }

    function Oo() {
        $("#overlays .element.text.focused").each(function () {
            fA($(this))
        })
    }

    function lT(a) {
        function b(a) {
            Ml = !!a.shiftKey;
            xb = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            Db = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            qc = q.O().get(0).getBoundingClientRect();
            ie.read(c);
            return !1
        }

        function c() {
            var a = !1;
            if (q.Cj()) {
                var b = q.Ub();
                b && !Lp(vb, b) && (a = !0)
            }
            if (!q.zz || q.Hc || a) {
                a = xb - B;
                b = Db - K;
                ra && q.xb() && q.xi();
                if (ra) {
                    var c = Pg(H, Qg(qc));
                    (c = PT(c, h)) && c.page ? (ef && (ef = !1,
                            q.O().removeClass("outsidePage")),
                        q.zx() && !q.Ou(q.ha()) ? (Nb && c.page != Nb && Nb.$el.removeClass("hotspotHover"),
                            Nb = hC(H, c.page),
                            Nb.$el.addClass("hotspotHover")) : Nb && Nb.$el.removeClass("hotspotHover")) : (q.O().addClass("outsidePage"),
                        ef = !0)
                }
                if (ra || Math.abs(a) > J.Rc || Math.abs(b) > J.Rc) {
                    ra = !0;
                    q.setPosition(ca + a / W, V + b / W);
                    Ml || Oa.hasClass("placing") ? GM() : Yg(q, Ka, ma);
                    b = $(".page.selected.on");
                    c = $("#overlays");
                    if (1 === b.length && 1 === c.length && 1 === C.length) {
                        var a = C.get(0).getBoundingClientRect(),
                            b = b.get(0).getBoundingClientRect(),
                            d = c.get(0).getBoundingClientRect(),
                            c = a.left - d.left,
                            d = a.top - d.top,
                            g = Math.round((a.left - b.left) / W),
                            a = Math.round((a.top - b.top) / W);
                        e.addClass("positionIndicatorShowing").addClass("positionIndicatorMoving").css("transform", "translate(" + c + "px," + d + "px)").text(g + ", " + a)
                    }
                    q.lb()
                }
                ra && !aa && (a = Oa.find("img"),
                    a.attr("data-screen-width", q.D()).attr("data-screen-height", q.F()),
                    q.zz && a.attr("data-media-approved", q.Hc),
                    Oa.addClass("clone"), !q.KC() && q instanceof aB && Oa.addClass("cutout"),
                    b = Dg({
                        id: q.ua,
                        version: q.va,
                        origin: q.origin ? q.origin.Ab() : "CANVA",
                        files_: [{
                            quality: "THUMBNAIL",
                            page: 0,
                            url: a.attr("src")
                        }, {
                            quality: "SCREEN",
                            page: 0,
                            url: a.attr("src")
                        }]
                    }),
                    c = $("\x3cli\x3e\x3c/li\x3e"),
                    c.data("result", b).append(a.clone()),
                    Oa.data("li", c),
                    q.KC() || q.gh()) && (ch(Oa, null, aM(rc)),
                    aa = !0)
            }
        }

        function d(a) {
            rc.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            yd.read(function () {
                var b = q.O().get(0).getBoundingClientRect();
                yd.write(function () {
                    var c;
                    e.remove();
                    C.remove();
                    q.gg = !1;
                    $("#hotspots").remove();
                    Nb && Nb.$el.removeClass("hotspotHover");
                    $("#overlays .align").removeClass("on");
                    if (ra) {
                        if (q.ha())
                            if (q.Ou(q.ha()))
                                jJ(),
                                GT(q),
                                c = {
                                    elementIndex: q.ea(),
                                    pageIndex: Mo(G, q.ha()),
                                    "new": {
                                        left: q.Y(),
                                        top: q.N()
                                    },
                                    old: {
                                        left: ca,
                                        top: V
                                    }
                                },
                                c = new Y(No, c),
                                I.register(c),
                                kJ();
                            else {
                                q.vf() && fA(q.ze());
                                c = Pg(H, Qg(b));
                                var d = PT(c, h);
                                d && q.zx() ? (jJ(),
                                    c = QT(q, c, d, ca, V),
                                    GT(c),
                                    kJ(),
                                    E && RT([c])) : (c = dN(q.serialize()),
                                    c.pageIndex = Mo(G, q.ha()),
                                    c.left = ca,
                                    c.top = V,
                                    c = new Y($M, c),
                                    jJ(),
                                    I.register(c),
                                    q.remove(),
                                    kJ())
                            }
                    } else if (!p || r && !m || n)
                        c = !1,
                        u && (d = k.closest(".text"),
                            x ? fA(d) : a.shiftKey || (q instanceof Ko ? (sJ(d, !0),
                                LN(v, xc(g)),
                                c = !0) : q instanceof gG || (q instanceof iB ? (q.xi(),
                                d.is(".element") && sJ(d, !1),
                                q.zn(),
                                LN(v, xc(g)),
                                c = !0) : sJ(d)))), !(q instanceof gG) && q instanceof iB && y && (JE(q, y),
                            (d = q.O().data("toolbar")) && CB(d, q)),
                        wg(q, c);
                    Oa.removeClass("clone cutout").removeData("startLeft").removeData("startTop").removeData("li");
                    Oa.find("img").removeAttr("data-screen-width").removeAttr("data-screen-height")
                })
            })
        }
        if (a.which == J.wh || a.ctrlKey)
            return !0;
        $("#overlays .positionIndicator").remove();
        var e = $('\x3cdiv class\x3d"positionIndicator"\x3e\x3c/div\x3e');
        $("#overlays").append(e);
        var g = Kb,
            h = IT(),
            k = $(a.target),
            l = 0 !== k.parents(".group").length,
            m = k.is(".group"),
            n = k.is(".chart"),
            p = k.is(".group .elements"),
            r = k.is(".chart .elements"),
            u = k.is(".text") || 0 < k.parents(".text").length,
            v = u ? k.closest(".element") : $(this),
            y;
        l && (y = v.data("canvaElement"),
            v = k.parents(".group").first());
        if (v.data("canvaElement")) {
            var q = v.data("canvaElement");
            if (l = q.ha()) {
                if (!q.JC())
                    return a.preventDefault(),
                        a.stopImmediatePropagation(), !1;
                S.trigger("hideContextualControlsRequested");
                a.altKey && (Oo(),
                    q = q.clone(),
                    q.appendTo(l),
                    q.Bc(),
                    v = q.O());
                var x = v.hasClass("focused"),
                    E = q.zf(),
                    B = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
                    K = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
                if ($(document.elementFromPoint(B, K)).is(".handle.on"))
                    return !0;
                if (a.shiftKey && 0 === G.hb().length || q.Ac() && !E || q.vg() && !E)
                    return Zb.Sz(a, !0);
                var C = $("\x3cdiv\x3e\x3c/div\x3e"),
                    l = um(q.eb());
                45 < l && 135 >= l ? C.css({
                    position: "absolute",
                    bottom: 0,
                    left: 0
                }) : 135 < l && 225 >= l ? C.css({
                    position: "absolute",
                    bottom: 0,
                    right: 0
                }) : 225 < l && 315 >= l ? C.css({
                    position: "absolute",
                    top: 0,
                    right: 0
                }) : C.css({
                    position: "absolute",
                    top: 0,
                    left: 0
                });
                q.O().append(C);
                l = !(1 === G.hb().length && G.hb()[0] === q);
                a.shiftKey || E || !l || bh();
                if (q instanceof Ko)
                    l = $("#overlays .svg.text.focused"),
                    0 < l.length && (fA(l),
                        q.WN(),
                        LN(v, xc(g))),
                    l = k.siblings("image").filter(function () {
                        return this.classList.contains("placeholder") && this.getAttribute("xlink:href") != J.ko
                    }),
                    k.is("image.placeholder") && k.attr("xlink:href") != J.ko ? q.As(k) : k.is(".outline") && 1 === l.length && q.As(l);
                else if (q instanceof eB)
                    k.is(".placeholder") && q.ng() !== k && q.As(k);
                else if (q instanceof iB) {
                    a = y === q;
                    var N = y instanceof up,
                        Q = !N && q.kd instanceof up,
                        M = N && y !== q.kd;
                    if (Q || M || N && l || a)
                        (M || Q || a) && q.kd instanceof up && fA(q.kd.O()),
                        q.xi(),
                        q.WN(),
                        a || !m && !p || LN(v, xc(g))
                }
                var ca = q.Y(),
                    V = q.N(),
                    ra = !1,
                    Ka = {},
                    ma = Xg(q),
                    aa = !1,
                    Oa = q.O();
                Oa.data("startLeft", ca).data("startTop", V);
                var xb = 0,
                    Db = 0,
                    qc = v.get(0).getBoundingClientRect(),
                    ie = Tg(),
                    yd = Tg(),
                    ef = !1,
                    Nb, Ml = !1;
                q.gg = !0;
                var rc = new Po($(document));
                rc.on("mousemove|touchmove", b).on("mouseup|touchend", d);
                return !1
            }
        }
    }

    function QT(a, b, c, d, e) {
        var g = (b.Y() - c.rect.Y()) / W;
        b = (b.N() - c.rect.N()) / W;
        var h = dN(a.serialize());
        h.pageIndex = Mo(G, a.ha());
        h.left = d;
        h.top = e;
        d = new Y($M, h);
        jJ();
        I.register(d);
        d = a.clone();
        a.remove();
        d.Ac() && iC(d);
        d.appendTo(c.page);
        d.setPosition(g, b);
        vg(d);
        kJ();
        return d
    }

    function PT(a, b) {
        for (var c = 0; c != b.length; c++)
            if (Sg(a, b[c].rect))
                return b[c];
        return null
    }

    function ST(a, b) {
        return G.hb().filter(function (c) {
            c = c.O().get(0).getBoundingClientRect();
            return c.left < a && c.right > a && c.top < b && c.bottom > b
        }).sort(function (a, b) {
            return a.ea() - b.ea()
        })
    }

    function TT(a) {
        var b = Kb;
        2 > G.hb().length || (jN(a),
            a = G.hb(),
            1 < a.length ? (a.forEach(function (a) {
                    a.O().removeData("toolbar")
                }),
                lJ(xc(b), zc(b))) : 1 === a.length && ($(".multipleSelectionBox").remove(),
                bh(),
                a[0].O().removeClass("multiSelected"),
                EM(a[0]),
                a[0].lb()))
    }

    function UT(a) {
        function b(a, b) {
            return a.ea() - b.ea()
        }
        if (2 > a.length)
            return null;
        for (var c = a[0].ha(), d = c.ea(), e = 1; e !== a.length; e++)
            if (!c || !a[e].ha() || a[e].ha() !== c)
                return null;
        var g = GE(new iB, a);
        jJ();
        (function (a) {
            a.sort(b);
            for (var c = a[0], e = 1; e !== a.length; e++) {
                var g = a[e].ea();
                a[e].insertAfter(c);
                var c = a[e],
                    n = a[e].ea();
                g !== n && I.register(new Y(4, {
                    oldElementIndex: g,
                    elementIndex: n,
                    pageIndex: d
                }))
            }
            return a
        })(a);
        g.insertBefore(a[0]);
        a.forEach(function (a) {
            g.addElement(a);
            var b = (new Hm).translate(-1 * g.Y(), -1 * g.N());
            a.transform(b);
            g.O().find(".elements").append(a.O())
        });
        ET(g);
        kJ();
        return g
    }

    function HJ() {
        function a(a) {
            return a.elements && 0 !== a.elements.length
        }

        function b(a) {
            return a.Ac()
        }

        function c(a) {
            return wB(a)
        }
        var d = G.hb();
        if (!(1 >= d.length || 0 < d.filter(a).length || 0 < d.filter(b).length || 0 < d.filter(c).length)) {
            for (var e = d[0].ha(), g = 1; g !== d.length; g++)
                if (!e || !d[g].ha() || d[g].ha() !== e)
                    return;
            bh();
            (d = UT(d)) && wg(d)
        }
    }

    function nR(a, b) {
        var c = a.O().data("toolbar"),
            d = a.Ib();
        if (-1 !== d)
            d = [a.gc(d)];
        else if (a.xb() && a.ne())
            d = LE(a),
            c && OC(c);
        else
            return;
        b();
        jJ();
        d.forEach(function (b) {
            var c = b.index,
                d = a.gc(c);
            b = {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                textIndex: c,
                "new": d,
                old: b
            };
            I.register(new bN(1, b))
        });
        kJ();
        c && OC(c)
    }

    function uJ(a) {
        function b(a) {
            if (0 === a.eb()) {
                var b = a.Ba();
                a.wb(0);
                a.za(c);
                var h = a.Ba();
                em(b, h) || I.register(new Y(No, {
                    elementIndex: a.ea(),
                    pageIndex: d,
                    old: b.serialize(),
                    "new": h.serialize(),
                    proportionalSetSize: !1
                }))
            }
        }
        if (a.xb()) {
            var c = a.D(),
                d = Mo(G, a.ha());
            jJ();
            IE(a).forEach(b);
            kJ()
        }
    }

    function vJ(a) {
        a.xb() && (jJ(),
            IE(a).forEach(function (b) {
                nR(b, function () {
                    a.hq(0, "uppercase");
                    wz(a.qb(0), !1)
                })
            }),
            kJ())
    }

    function wJ(a) {
        a.xb() && (jJ(),
            IE(a).forEach(function (a) {
                nR(a, function () {
                    a.ai(0, "left");
                    wz(a.qb(0), !1)
                })
            }),
            kJ())
    }

    function xJ(a) {
        a.xb() && (jJ(),
            IE(a).forEach(function (a) {
                nR(a, function () {
                    a.ai(0, "right");
                    wz(a.qb(0), !1)
                })
            }),
            kJ())
    }

    function yJ(a) {
        a.xb() && (jJ(),
            IE(a).forEach(function (a) {
                nR(a, function () {
                    a.ai(0, "center");
                    wz(a.qb(0), !1)
                })
            }),
            kJ())
    }

    function VT(a, b, c) {
        var d = a.xa().slice(),
            e = b(a),
            g = a.kd;
        g && (e = b(g));
        jJ();
        b = a.ze();
        1 === b.length && fA(b);
        FT(a);
        eN(a);
        d.forEach(function (a) {
            var b = a.Y(),
                d = a.N();
            c(a, e);
            I.register(new Y(No, {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                "new": {
                    left: a.Y(),
                    top: a.N()
                },
                old: {
                    left: b,
                    top: d
                }
            }))
        });
        (a = UT(d)) && EM(a);
        kJ()
    }

    function LQ(a) {
        VT(a, function (a) {
            return a.nc()
        }, function (a, c) {
            nB(a, a.nc() - c)
        })
    }

    function MQ(a) {
        VT(a, function (a) {
            return a.Ld()
        }, function (a, c) {
            pB(a, c - a.Ld())
        })
    }

    function NQ(a) {
        VT(a, function (a) {
            return a.nc() + a.eh() / 2
        }, function (a, c) {
            var d = a.nc() + a.eh() / 2;
            nB(a, d - c)
        })
    }

    function OQ(a) {
        VT(a, function (a) {
            return a.xc()
        }, function (a, c) {
            oB(a, a.xc() - c)
        })
    }

    function PQ(a) {
        VT(a, function (a) {
            return a.ud()
        }, function (a, c) {
            qB(a, c - a.ud())
        })
    }

    function QQ(a) {
        VT(a, function (a) {
            return a.xc() + a.dh() / 2
        }, function (a, c) {
            var d = a.xc() + a.dh() / 2;
            oB(a, d - c)
        })
    }

    function SQ(a) {
        var b = a.xa().slice();
        jJ();
        FT(a);
        eN(a);
        a = b.slice().sort(function (a, b) {
            return a.nc() > b.nc()
        });
        var c = a.shift().Ld(),
            d = a.pop().nc(),
            e = a.reduce(function (a, b) {
                return b.eh() + a
            }, 0),
            g = (d - c - e) / (a.length + 1),
            h = c;
        a.forEach(function (a) {
            var b = a.Y(),
                c = a.N();
            nB(a, a.nc() - h - g);
            h = a.Ld();
            I.register(new Y(No, {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                "new": {
                    left: a.Y(),
                    top: a.N()
                },
                old: {
                    left: b,
                    top: c
                }
            }))
        });
        (b = UT(b)) && EM(b);
        kJ()
    }

    function RQ(a) {
        var b = a.xa().slice();
        jJ();
        FT(a);
        eN(a);
        a = b.slice().sort(function (a, b) {
            return a.xc() > b.xc()
        });
        var c = a.shift().ud(),
            d = a.pop().xc(),
            e = a.reduce(function (a, b) {
                return b.dh() + a
            }, 0),
            g = (d - c - e) / (a.length + 1),
            h = c;
        a.forEach(function (a) {
            var b = a.Y(),
                c = a.N();
            oB(a, a.xc() - h - g);
            h = a.ud();
            I.register(new Y(No, {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                "new": {
                    left: a.Y(),
                    top: a.N()
                },
                old: {
                    left: b,
                    top: c
                }
            }))
        });
        (b = UT(b)) && EM(b);
        kJ()
    }

    function eN(a) {
        var b = [].concat(a.xa()).reverse(),
            c = rB(a);
        a.xi();
        b.forEach(function (b) {
            a.Ui(b);
            var e = DE(c, rB(b), !0);
            b.insertAfter(a);
            b.O().insertAfter(a.O());
            b.Il(e.Ob);
            b.setPosition(e.left, e.top);
            b.Hl(e.rotation)
        });
        a.remove();
        bh();
        IJ(b)
    }

    function GJ() {
        var a = G.hb(),
            b;
        if (b = 1 === a.length)
            b = -1 !== a[0].nr().indexOf("ungroup");
        b && (bh(),
            jJ(),
            a = a[0],
            FT(a),
            eN(a),
            kJ())
    }

    function mT(a) {
        function b(a) {
            q = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            x = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            B.read(c);
            return !1
        }

        function c() {
            var a = q - k,
                b = x - l,
                c = $(".multipleSelectionBox").get(0).getBoundingClientRect(),
                c = Pg(H, Qg(c)),
                c = PT(c, E);
            if (y || Math.abs(a) > J.Rc || Math.abs(b) > J.Rc)
                y = !0,
                h.setPosition(n + a / W, p + b / W),
                Yg(h, u, v),
                c && c.page && c.page !== h.ha() && !h.Ou(h.ha()) ? hC(H, c.page).$el.addClass("hotspotHover") : $(".page").removeClass("hotspotHover"),
                lJ(xc(e), zc(e))
        }

        function d() {
            C.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            K.read(function () {
                var a = $(".multipleSelectionBox").get(0).getBoundingClientRect(),
                    b = Pg(H, Qg(a));
                K.write(function () {
                    var a = PT(b, E);
                    $(".page").removeClass("hotspotHover");
                    $("#overlays .align").removeClass("on");
                    WT(g, !1);
                    if (y) {
                        jJ();
                        if (h.Ou(h.ha()))
                            g.forEach(function (a, b) {
                                a = {
                                    elementIndex: a.ea(),
                                    pageIndex: Mo(G, a.ha()),
                                    "new": {
                                        left: a.Y(),
                                        top: a.N()
                                    },
                                    old: {
                                        left: r[b].left,
                                        top: r[b].top
                                    }
                                };
                                I.register(new Y(No, a))
                            });
                        else if (a) {
                            for (var c = [], d = g.length - 1; 0 <= d; d--) {
                                var e = g[d];
                                if (e.zx()) {
                                    var k = e.O().get(0).getBoundingClientRect(),
                                        k = Pg(H, Qg(k)),
                                        e = QT(e, k, a, r[d].left, r[d].top);
                                    c.push(e)
                                }
                            }
                            bh();
                            IJ(c)
                        } else
                            g.forEach(function (a, b) {
                                var c = dN(a.serialize());
                                c.left = r[b].left;
                                c.top = r[b].top;
                                c.pageIndex = Mo(G, a.ha());
                                I.register(new Y($M, c));
                                a.remove()
                            }),
                            $(".multipleSelectionBox").remove();
                        kJ()
                    }
                })
            })
        }
        var e = Kb;
        if (a.which == J.wh || a.ctrlKey)
            return !0;
        var g = G.hb().sort(function (a, b) {
                return b.ea() - a.ea()
            }),
            h = new bl(g),
            k = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            l = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            m = ST(k, l)[0];
        if (a.shiftKey && m)
            return TT(m), !1;
        WT(g, !0);
        var n = h.Y(),
            p = h.N(),
            r = g.map(function (a) {
                return {
                    left: a.Y(),
                    top: a.N()
                }
            }),
            u = {},
            v = Xg(g),
            y = !1,
            q = 0,
            x = 0,
            E = IT(),
            B = Tg(),
            K = Tg(),
            C = new Po($(document));
        C.on("mousemove|touchmove", b).on("mouseup|touchend", d);
        return !1
    }
    $(function () {
        ac = new gO;
        ac.on("nodeInserted", XT).on("nodeInserted", ZT).on("nodeRemoved", ZT).on("characterDataModified", ZT)
    });

    function nJ() {
        if (1 === G.hb().length) {
            var a = G.hb()[0];
            if (a.xb()) {
                var b = a.Ib(),
                    c;
                a: {
                        for (c = a.Ib() + 1; c != a.elements.length; c++)
                            if (KE(a, c))
                                break a;
                        b: {
                            for (c = 0; c != a.elements.length; c++)
                                if (KE(a, c))
                                    break b;
                            c = -1
                        }
                    } -
                    1 !== c && c !== b && (b = a.qb(c),
                        c = b.data("canvaElement")) && (fA(a.ze()),
                        a.xi(),
                        sJ(b),
                        JE(a, c),
                        a.lb())
            }
        }
    }

    function sJ(a, b) {
        if (!a.hasClass("focused")) {
            var c = a.data("canvaElement");
            if (c && c.wo()) {
                var d = a.parents(".page").hasClass("dark");
                d && a.addClass("dark");
                Tb && ($T(Tb),
                    aU(Tb));
                var e = !!a.parents(".page").length;
                if (a.is(".svg .text"))
                    d = a.parents(".element").first(),
                    e && a.data("precedingElement", d.prevAll(".element").first()),
                    a.addClass("focused svg element"),
                    d.appendTo("#overlays"),
                    c.setPosition(),
                    Lo(c);
                else if (a.is(".group .text")) {
                    var g = a.parents(".group").first();
                    e && (e = g.prevAll(".element").first(),
                        a.data("precedingElement", e),
                        g.data("precedingElement", e));
                    a.addClass("focused");
                    d && g.find(".text").addClass("dark");
                    g.appendTo("#overlays");
                    g.data("canvaElement").setPosition()
                } else
                    e && a.data("precedingElement", a.prevAll(".element").first()),
                    a.appendTo("#overlays").addClass("focused"),
                    c.setPosition();
                d = c.Ib();
                a.removeClass("focused");
                c = c.gc(d);
                a.data("oldTextData", c);
                a.addClass("focused");
                xz(a);
                c = a.children(".inner");
                c.attr("contentEditable", "true");
                c.focus();
                c.off("paste").on("paste", bU);
                iO(ac);
                ac.observe(a);
                eR.RW(a);
                d = lc(Kb);
                a = a.data("placeholderText") || d.nh();
                a = c.text() == a;
                (b || a) && Qz(c)
            }
        }
    }

    function Qz(a, b) {
        window.setTimeout(function () {
            var c, d;
            window.getSelection && document.createRange ? (d = document.createRange(),
                d.selectNodeContents(a.get(0)),
                c = window.getSelection(),
                c.removeAllRanges(),
                c.addRange(d)) : document.body.createTextRange && (d = document.body.createTextRange(),
                d.moveToElementText(a.get(0)),
                d.select());
            b && b()
        }, 1)
    }

    function bU(a) {
        if (document.queryCommandSupported("ms-pasteContentOnly"))
            document.execCommand("ms-pasteContentOnly");
        else if (document.queryCommandSupported("insertHTML") && a.originalEvent.clipboardData) {
            var b = a.originalEvent.clipboardData.getData("text/plain"),
                b = _.escape(b).replace(/\r?\n/g, "\x3cbr\x3e").replace(/ {2}/g, " \x26nbsp;");
            document.execCommand("insertHTML", !1, b)
        } else
            throw Error("Beware! Unsupported browser. Sneaking around.");
        a.preventDefault()
    }

    function XT(a) {
        function b(a) {
            var b = a.attr("style");
            b && -1 < b.indexOf("Glegoo, Helvetica, Arial, sans-serif") && a.attr("style", "")
        }
        a = $(a.target);
        b(a);
        a.children().each(function () {
            b($(this))
        })
    }
    var cU = !1;

    function ZT(a) {
        var b = $(this),
            c = b.data("textChangeCount") || 0;
        b.data("textChangeCount", ++c);
        if (cU)
            cU = !1;
        else {
            var c = b.data("designObject") || null,
                d = b.data("Canva.textElementUpdated:lastCalledAt") || 0;
            5 < a.timeStamp - d && (b.data("Canva.textElementUpdated:lastCalledAt", a.timeStamp),
                c && b.is(".svg") && zC(c));
            a = /[\uE000-\uF8FF]/g;
            c = b.html();
            a.test(c) && (cU = !0,
                b.html(c.replace(a, "")))
        }
    }
    var eR = function () {
        function a(a) {
            a.get(0) === e && (0 !== d && (window.cancelAnimationFrame(d),
                    d = 0),
                $(e).off("keydown mousemove", b),
                e = null,
                h = 0)
        }

        function b() {
            g = Date.now();
            0 === d && (d = window.requestAnimationFrame(c))
        }

        function c() {
            var a = Date.now();
            if (5E3 < a - g)
                d = 0;
            else if (e) {
                if (100 < a - h) {
                    var b = jQuery.data(e, "toolbar");
                    b && OC(b);
                    h = a
                }
                d = window.requestAnimationFrame(c)
            }
        }
        var d = 0,
            e = null,
            g = 0,
            h = 0;
        return {
            RW: function (c) {
                c = c.get(0);
                c !== e && (null !== e && a($(e)),
                    e = c,
                    b(),
                    $(e).on("keydown mousemove", b))
            },
            UW: a
        }
    }();

    function fA(a) {
        var b = a.data("canvaElement");
        if (b && a.is(".focused")) {
            a.data("textChangeCount", 0);
            var c = a.data("precedingElement"),
                d = a.children(".inner"),
                e = b.ha() || G.Oa(),
                g = hC(H, e),
                h = b.Ib(),
                k = !1,
                l = !a.parents(".page").length;
            eR.UW(a);
            Tb && dU(Tb);
            a.removeClass("dark");
            if (a.is(".svg.text"))
                k = a.parents(".element").first(),
                l && (c && 0 < c.length ? k.insertAfter(c) : eU(g, k)),
                a.removeData("precedingElement").removeClass("focused svg element"),
                d.attr("contentEditable", "false"),
                Lo(b),
                gz(b, h),
                k = !0,
                (c = b.O().data("toolbar")) && c.zn("font");
            else if (a.is(".group .text")) {
                var m = a.parents(".group").first();
                m.find(".text").removeClass("dark");
                var n = m.data("canvaElement"),
                    c = m.data("precedingElement");
                l && (c && 1 === c.length && 0 >= m.has(c[0]).length ? m.insertAfter(c) : eU(g, m));
                m.removeData("precedingElement");
                a.removeData("precedingElement");
                a.text().match(/^\s*$/) && n ? ((c = a.data("oldTextData")) && b.Wi(h, c),
                    uQ(n)) : (gz(b, h),
                    k = !0);
                n.xi();
                d.attr("contentEditable", "false");
                n.Bc();
                (c = n.O().data("toolbar")) && c.zn("font")
            } else
                0 < a.length && (l && (c && 0 < c.length ? a.insertAfter(c) : eU(g, a)),
                    a.removeClass("focused"),
                    d.attr("contentEditable", "false"),
                    a.text().match(/^\s*$/) ? ((c = a.data("oldTextData")) && b.Wi(h, c),
                        jJ(),
                        eM(b),
                        b.remove(),
                        kJ()) : (gz(b, h),
                        k = !0));
            d.off("paste", bU);
            iO(ac);
            b.Bc();
            $("#null").focus();
            window.setTimeout(function () {
                $("#null").blur()
            }, 0);
            if (k) {
                if (d = a.data("oldTextData"))
                    k = b.gc(h),
                    e = {
                        elementIndex: b.ea(),
                        pageIndex: Mo(G, e),
                        textIndex: h,
                        "new": k,
                        old: d
                    },
                    e = new bN(1, e),
                    jJ(),
                    I.register(e),
                    b.rH = !0,
                    kJ();
                b = G.Jb();
                e = a.text();
                GS(b) && HS(b, IS(b, e) ? "" : e)
            }
            a.removeData("oldTextData")
        }
    }

    function nT(a) {
        var b;
        if (/touch/gi.test(a.type) || !$(this).hasClass("multipleSelectionBox")) {
            var c = $(this).data("element");
            if (!c)
                return;
            b = c.get(0);
            if (b && (c = c.data("canvaElement")))
                if (c instanceof up)
                    a.target = b;
                else {
                    $(this).css("visibility", "hidden");
                    var c = document.elementFromPoint(void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX, void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY),
                        d = $(c).closest(".element").get(0);
                    d ? (a.target = c,
                        b = d) : a.target = b;
                    $(this).css("visibility", "")
                }
            else
                return;
            lT.call(b, a)
        }
        return !1
    }

    function kT(a) {
        var b = $(this).data("element"),
            c = $(b).data("canvaElement");
        if (!c || a.metaKey)
            return !1;
        b.hasClass("text") ? sJ(b) : c.gm ? fR(c) : c.ix() && (c.Ut = !c.Ut,
            c.lb());
        return !1
    }
    var fU = !1;

    function wg(a, b) {
        function c(a) {
            var b = a.O();
            a.ph();
            b.is(".text.focused") && fA(b);
            b.addClass("multiSelected")
        }
        fU = !1;
        var d = Kb,
            e = a.O(),
            g = G.hb();
        if (a.wo()) {
            var h = !1;
            g.forEach(function (b) {
                b.ha() === a.ha() && (h = !0)
            });
            if (!(0 < g.length) || h) {
                if (wB(a))
                    if (e = e.parents(".group"),
                        1 === e.length && e.data("canvaElement"))
                        a = e.data("canvaElement"),
                        HE(a),
                        a.xi(),
                        a.zn();
                    else
                        return;
                a.zf() ? a.xb() && !b && cR(a, xc(d)) : (a.$j(!0),
                    0 === g.length ? (gU(e), !b && cR(a, xc(d))) : wB(a) || (g.forEach(c),
                        e.addClass("multiSelected"),
                        lJ(xc(d), zc(d))))
            }
        }
    }

    function cR(a, b) {
        LN(a.O(), b)
    }

    function EM(a) {
        var b = G.hb();
        if (1 != b.length || -1 == b.indexOf(a))
            bh(),
            wg(a)
    }

    function KJ(a) {
        var b = G.hb(),
            c = G.Oa(),
            d = c.xa().length - 1;
        if (0 !== a && 1 === b.length && (b = c.elements.indexOf(b[0]), -1 !== b)) {
            b += a;
            0 > b && (b = d);
            b > d && (b = 0);
            var e = c.elements[b] || null;
            e && (e.Ac() && (0 < a ? (b += 1,
                    b > d && (b = 0)) : (--b,
                    0 > b && (b = d))),
                (a = c.elements[b] || null) && EM(a))
        }
    }
    var hU = _.template('\x3cdiv class\x3d"selectionBox cornerHandles"\x3e\x3cdiv class\x3d"inner"\x3e\x3c/div\x3e\x3ca class\x3d"handle tl" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle t" href\x3d"#" title\x3d"\x3c%- stretch %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle tr" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle l" href\x3d"#" title\x3d"\x3c%- stretch %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle r" href\x3d"#" title\x3d"\x3c%- stretch %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle br" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle b" href\x3d"#" title\x3d"\x3c%- stretch %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle bl" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"rotate" href\x3d"#" title\x3d"\x3c%- rotate %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"move" href\x3d"#"\x3e\x3c/a\x3e\x3ca class\x3d"removeWatermark" href\x3d"#"\x3e\x3c%- removeWatermark %\x3e\x3c/a\x3e\x3c/div\x3e');

    function gU(a) {
        function b() {
            e.removeClass("initialHover");
            e.off("mousemove", b)
        }
        var c = Kb,
            d = $("#overlays"),
            e = a.data("selectionBox"),
            g = a.data("canvaElement") || null;
        a.addClass("selected");
        e || (e = $(hU({
                resize: zc(c).resize(),
                stretch: zc(c).stretch(),
                rotate: zc(c).rotate(),
                removeWatermark: zc(c).D5()
            })),
            e.data("element", a).appendTo(d),
            a.hasClass("text") && e.addClass("text"),
            a.hasClass("svg") && e.addClass("svg"),
            a.hasClass("graphic") && e.addClass("graphic"),
            a.hasClass("unapproved") && e.addClass("unapproved"),
            a.hasClass("group") && e.addClass("group"),
            a.data("selectionBox", e));
        g && (Ib.ba.get(Vf) && (OT(g) ? (e.addClass("hasWatermark"),
                e.addClass("initialHover"),
                e.on("mousemove", b)) : e.removeClass("hasWatermark")),
            g.lb())
    }

    function jN(a) {
        var b = a.O(),
            c = b.find(".text.focused");
        a.$j(!1);
        a.ph();
        b.removeClass("selected").removeClass("multiSelected");
        b.is(".text.focused") ? fA(b) : a instanceof iB ? 1 === c.length && fA(c) : a instanceof Ko && 1 === c.length && fA(c);
        a.xi();
        (b = a.ha()) && !a.Ou(b) && (eM(a),
            a.remove())
    }

    function iU(a) {
        jN(a);
        wg(a)
    }

    function IJ(a) {
        for (var b = 0; b !== a.length; b++)
            if (!a[b].wo())
                return;
        if (1 === a.length)
            wg(a[0]);
        else
            for (b = 0; b !== a.length; b++)
                wg(a[b], !0)
    }

    function RT(a) {
        function b(a) {
            !1 === fU ? c() : (a = d.indexOf(a), -1 !== a && d.splice(a, 1),
                0 === d.length && (c(),
                    IJ(e)))
        }

        function c() {
            S.off("elementLoaded", b);
            S.off("elementLoadingError", b)
        }
        var d = a.filter(function (a) {
                return a.Iu()
            }),
            e = a.filter(function (b) {
                return 0 === a.filter(function (a) {
                    return a.xb() && -1 !== a.elements.indexOf(b)
                }).length
            });
        0 < d.length ? (fU = !0,
            S.on("elementLoaded", b),
            S.on("elementLoadingError", b)) : IJ(e)
    }

    function bh() {
        S.trigger("hideContextualControlsRequested");
        G.hb().forEach(jN);
        $(".multipleSelectionBox").remove();
        $(document.activeElement).is("input, textarea") || window.getSelection().removeAllRanges()
    }

    function oJ(a) {
        var b = Rn(),
            c = b.elements[0],
            d = -1;
        b.Ul && 0 === b.Ul.elementIndex && (d = b.Ul.filterableIndex);
        var e = -1;
        b.Wl && 0 === b.Wl.elementIndex && (e = b.Wl.textIndex);
        var g = Mo(G, a.ha()),
            h = a.ea();
        if (b && c && b.Mu) {
            jJ();
            I.register(new Y(No, {
                elementIndex: h,
                pageIndex: g,
                "new": {
                    transparency: c.Ob
                },
                old: {
                    transparency: a.Ob
                }
            }));
            a.Il(c.Ob);
            c.cL() && a.cL() && (I.register(new Y(No, {
                    elementIndex: h,
                    pageIndex: g,
                    "new": {
                        border: c.Nh()
                    },
                    old: {
                        border: a.Nh()
                    }
                })),
                fD(a, c.Nh()));
            c.fL() && a.fL() && (I.register(new Y(No, {
                    elementIndex: h,
                    pageIndex: g,
                    "new": {
                        padding: c.padding
                    },
                    old: {
                        padding: a.padding
                    }
                })),
                a.dB(c.padding));
            c.ez() && a.ez() && (I.register(new Y(No, {
                    elementIndex: h,
                    pageIndex: g,
                    "new": {
                        spacing: c.le()
                    },
                    old: {
                        spacing: a.le()
                    }
                })),
                a.gq(c.le()));
            if (c.gp() && a.gp()) {
                var b = a.Fy(),
                    k = c.So(d),
                    d = a.Id();
                if (k && d) {
                    var k = gC(k),
                        l = gC(d),
                        h = new Y(11, {
                            elementIndex: h,
                            pageIndex: g,
                            placeholderIndex: b,
                            "new": {
                                filter: k
                            },
                            old: {
                                filter: l
                            }
                        });
                    WH(d, k);
                    I.register(h)
                }
            }
            h = c.Jd();
            b = a.Jd();
            0 !== h && h === b && c.ob().forEach(function (b, c) {
                if (null !== b) {
                    var d = {
                            index: c
                        },
                        e = {
                            index: c
                        };
                    a instanceof eB ? d.placementData = a.al(c) : d.color = a.ob()[c];
                    a.ce(c, b);
                    a instanceof eB ? e.placementData = a.al(c) : e.color = a.ob()[c];
                    b = new Y(fM, {
                        elementIndex: a.ea(),
                        pageIndex: g,
                        old: d,
                        "new": e
                    });
                    I.register(b)
                }
            });
            c.ne() && a.ne() && (h = a.Ib(), -1 !== e && -1 !== h && (b = a.gc(h),
                (c = c.gc(e)) && b && (a.Jn(h, c.bold),
                    a.Zj(h, c.fontFamily),
                    c.fontMedia && a.aq(h, Gm(c.fontMedia)),
                    a.qe(h, c.fontSize),
                    a.Ln(h, c.italic),
                    a.ai(h, c.justification),
                    a.$v(h, c.letterSpacing),
                    a.aw(h, c.lineHeight),
                    a.hq(h, c.textTransform),
                    a.setColor(h, gh(c.color))),
                c = a.gc(h),
                c = new bN(1, {
                    elementIndex: a.ea(),
                    pageIndex: g,
                    textIndex: h,
                    "new": c,
                    old: b
                }),
                I.register(c)));
            kJ();
            a.lb()
        }
    }

    function EJ(a) {
        void 0 === a && (a = G.hb());
        if (0 < a.length) {
            var b = a.map(function (a) {
                return a.clone()
            });
            Qn(b, a[a.length - 1])
        }
    }

    function FJ() {
        function a(a) {
            if (a.Cj()) {
                var b = a.Ub();
                b && !Lp(vb, b) && ED(Bb, b.id, (new jC).jk(b.version)).then(function (b) {
                    Kg(vb, b.G(), b.Va().getVersion(), b.Va().Dc());
                    a.Fv()
                }).catch($.noop)
            }
        }

        function b(b) {
            b.xb() ? b.xa().forEach(a) : a(b);
            e ? (pB(b, J.bC),
                qB(b, J.bC),
                b.insertAfter(e),
                e = b) : b.appendTo(d);
            h++;
            h === g.length && (jJ(),
                g.forEach(vg),
                bh(),
                kJ(),
                RT(g),
                EJ(g))
        }
        var c = Rn();
        if (c && !c.Mu) {
            var d = G.Oa(),
                e = c.tv;
            !e || -1 < d.elements.indexOf(e) || (e = null);
            e && e.xb() && (e = VE(e));
            var g = c.elements.filter(function (a) {
                    return !!a
                }),
                h = 0;
            g.forEach(b)
        }
    }

    function rT(a) {
        function b(a) {
            p = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            r = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            n.write(c);
            return !1
        }

        function c() {
            var a = pn(e.eb()),
                b = (p - g) * Math.cos(a) - (h - r) * Math.sin(a) + g - g,
                a = -1 * (h - r) * Math.cos(a) - (p - g) * Math.sin(a) + h - h;
            if (m || Math.abs(b) > J.Rc || Math.abs(a) > J.Rc)
                m = !0,
                b /= W,
                a /= W,
                e.CO(k + b, l + a),
                e.lb()
        }

        function d() {
            u.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            e.gg = !1
        }
        if (a.which == J.wh || a.ctrlKey || $(a.target).is(".handle"))
            return !0;
        var e = $(this).data("canvaElement");
        if (!e)
            return !0;
        var g = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            h = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
        a = e.Xf();
        var k = a.Y(),
            l = a.N(),
            m = !1,
            n = Tg(),
            p = 0,
            r = 0;
        e.gg = !0;
        var u = new Po($(document));
        u.on("mousemove|touchmove", b).on("mouseup|touchend", d);
        return !1
    }

    function sT(a) {
        function b(a) {
            ca = a.shiftKey ? !1 : !0;
            Q = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            M = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            V.read(c);
            return !1
        }

        function c() {
            u = gm(Qg($(".cropControls").get(0).getBoundingClientRect()));
            V.write(function () {
                var a, b, c = 0,
                    d = 0;
                b = a = 0;
                var k = NO({
                        x: Q,
                        y: M
                    }, r),
                    u = sn(n, p, Q, M),
                    V = Math.cos(pn(k - v)) * u;
                ca && (k = v,
                    u = V);
                V = UA(k, g.eb());
                switch (dS(e.get(0))) {
                    case 2:
                        c = V - OO("TR");
                        b = u * Math.cos(pn(c));
                        a = u * Math.sin(pn(c));
                        ca && (b = a / m);
                        c = y;
                        d = q - b;
                        a = x + a;
                        b = E + b;
                        break;
                    case 7:
                        c = V - OO("BR");
                        b = u * Math.sin(pn(c));
                        a = u * Math.cos(pn(c));
                        ca && (b = a / m);
                        c = y;
                        d = q;
                        a = x + a;
                        b = E + b;
                        break;
                    case 5:
                        c = V - OO("BL");
                        b = u * Math.cos(pn(c));
                        a = u * Math.sin(pn(c));
                        ca && (b = a / m);
                        c = y - a;
                        d = q;
                        a = x + a;
                        b = E + b;
                        break;
                    case 0:
                        c = V - OO("TL"),
                            b = u * Math.sin(pn(c)),
                            a = u * Math.cos(pn(c)),
                            ca && (b = a / m),
                            c = y - a,
                            d = q - b,
                            a = x + a,
                            b = E + b
                }
                var u = l.Y() + l.D(),
                    V = l.N() + l.F(),
                    k = Math.floor(d) > l.N(),
                    ra = Math.floor(c) > l.Y(),
                    Ka = Math.ceil(c + a) < u,
                    Nb = Math.ceil(d + b) < V;
                k && (l.N(),
                    C === l.N() ? (d = C,
                        b = N,
                        ca && (c = B,
                            a = K)) : (d = l.N(),
                        b = N + (C - d),
                        ca && (a = b * m,
                            c = B,
                            Math.ceil(c + a) < u && (a = u,
                                b = a / m))));
                ra && (l.Y(),
                    B === l.Y() ? (c = B,
                        a = K,
                        ca && (b = N,
                            d = C)) : (c = l.Y(),
                        a = K + (B - c),
                        ca && (b = a / m,
                            d = C,
                            Math.ceil(d + b) < V && (b = V,
                                a = b * m))));
                Ka && (B + K === u ? (a = K,
                    c = B,
                    ca && (d = C,
                        b = N)) : (a = u - c,
                    ca && (b = a / m,
                        d = C)));
                Nb && (C + N === V ? (b = N,
                    d = C,
                    ca && (c = B,
                        a = K)) : (b = V - d,
                    ca && (a = b * m,
                        c = B)));
                isNaN(1 * b) || isNaN(1 * a) || isNaN(1 * d) || isNaN(1 * c) || (b < V && (d = C,
                        c = B,
                        b = V,
                        ca && (a = b * m)),
                    a < u && (c = B,
                        d = C,
                        a = u,
                        ca && (b = a / m)),
                    k = Math.floor(d) > l.N(),
                    ra = Math.floor(c) > l.Y(),
                    Ka = Math.ceil(c + a) < u,
                    Nb = Math.ceil(d + b) < V,
                    k || ra || Ka || Nb || (h.wb(c / W).rb(d / W).za(a / W).oa(b / W),
                        g.El(h),
                        g.lb(),
                        B = c,
                        C = d,
                        K = a,
                        N = b))
            })
        }

        function d() {
            Ka.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            ra.write(function () {
                e.removeClass("on");
                g.gg = !1
            })
        }
        var e = $(this),
            g = G.hb()[0],
            h = g.Xf(),
            k = g.Xf().scale(W),
            l = g.sd().scale(W);
        l.wb(0).rb(0);
        var m = hm(k),
            n = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            p = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            r = {
                x: n,
                y: p
            };
        a = gm(Qg(e.get(0).getBoundingClientRect()));
        var u = gm(Qg($(".cropControls").get(0).getBoundingClientRect())),
            v = NO(a, u),
            y = k.Y(),
            q = k.N(),
            x = k.D(),
            E = k.F(),
            B = k.Y(),
            K = k.D(),
            C = k.N(),
            N = k.F(),
            Q = 0,
            M = 0,
            ca = !0,
            V = Tg(),
            ra = Tg();
        g.gg = !0;
        var Ka = new Po($(document));
        Ka.on("mousemove|touchmove", b).on("mouseup|touchend", d);
        return !1
    }

    function tT(a) {
        function b(a) {
            E = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            B = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            K.read(c);
            return !1
        }

        function c() {
            var a, b, c, d, C = 0,
                N = 0,
                ma = h.clone(),
                aa = sn(l, m, E, B),
                C = UA(NO({
                    x: E,
                    y: B
                }, n), e.eb()),
                Oa = 0;
            switch (dS(g.get(0))) {
                case 2:
                    Oa = C - OO("TR");
                    N = aa * Math.cos(pn(Oa));
                    C = aa * Math.sin(pn(Oa));
                    a = h.Y();
                    c = h.N() - N;
                    b = h.D() + C;
                    d = h.F() + N;
                    break;
                case 7:
                    Oa = C - OO("BR");
                    N = aa * Math.sin(pn(Oa));
                    C = aa * Math.cos(pn(Oa));
                    a = h.Y();
                    c = h.N();
                    b = h.D() + C;
                    d = h.F() + N;
                    break;
                case 5:
                    Oa = C - OO("BL");
                    C = aa * Math.sin(pn(Oa));
                    N = aa * Math.cos(pn(Oa));
                    a = h.Y() - C;
                    c = h.N();
                    b = h.D() + C;
                    d = h.F() + N;
                    break;
                case 0:
                    Oa = C - OO("TL"),
                        N = aa * Math.sin(pn(Oa)),
                        C = aa * Math.cos(pn(Oa)),
                        a = h.Y() - C,
                        c = h.N() - N,
                        b = h.D() + C,
                        d = h.F() + N
            }
            aa = k.N();
            c < aa && (q === aa ? (c = q,
                d = x) : (c = aa,
                d = x + (q - c)));
            aa = k.Y();
            a < aa && (v === aa ? (a = v,
                b = y) : (a = aa,
                b = y + (v - a)));
            aa = k.F() + k.N();
            c + d > aa && (q + x === aa ? (d = x,
                c = q) : d = aa - c);
            aa = k.D() + k.Y();
            a + b > aa && (v + y === aa ? (b = y,
                a = v) : b = aa - a);
            20 > b ? b = 20 : 20 > d ? d = 20 : isNaN(1 * d) || isNaN(1 * b) || isNaN(1 * c) || isNaN(1 * a) || (ma.wb(a).rb(c).za(b).oa(d),
                v = a,
                q = c,
                y = b,
                x = d,
                K.write(function () {
                    al(e, ma.scale(1 / W));
                    u && Yg(u, p, r);
                    e.lb()
                }))
        }

        function d() {
            N.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            C.write(function () {
                $("#overlays .align").removeClass("on");
                g.removeClass("on");
                e.gg = !1
            })
        }
        var e = G.hb()[0],
            g = $(this);
        e.lb();
        var h = e.sd();
        h.scale(W);
        var k = e.Xf();
        k.scale(W).translate(h.Y(), h.N());
        var l = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            m = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            n = {
                x: l,
                y: m
            },
            p = {},
            r = Xg(e),
            u = e instanceof aB ? new $k(e) : null,
            v = h.Y(),
            y = h.D(),
            q = h.N(),
            x = h.F(),
            E = 0,
            B = 0,
            K = Tg(),
            C = Tg();
        e.gg = !0;
        var N = new Po($(document));
        N.on("mousemove|touchmove", b).on("mouseup|touchend", d);
        return !1
    }

    function qT(a) {
        function b(a) {
            var b = (void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX) - n;
            a = (void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY) - p;
            var d = Math.sqrt(Math.pow(r + b, 2) + Math.pow(u + a, 2));
            C = e(E);
            10 > r + b || 10 > u + a || (B = d / v,
                c(),
                x.css("-webkit-transform", "scale(" + B + ")").css("transform", "scale(" + B + ")"))
        }

        function c() {
            var a = $("#overlays").offset();
            K.css("top", C.top - a.top + "px").css("left", C.left - a.left + "px").css("width", C.width + "px").css("height", C.height + "px")
        }

        function d() {
            M.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            WT(y, !1);
            k();
            x.remove();
            h();
            K.remove()
        }

        function e(a) {
            var b = Infinity,
                c = Infinity,
                d = 0,
                e = 0;
            a.each(function (a, g) {
                a = g.getBoundingClientRect();
                a.top < b && (b = a.top);
                a.left < c && (c = a.left);
                a.bottom > e && (e = a.bottom);
                a.right > d && (d = a.right)
            });
            return {
                top: b,
                left: c,
                right: d,
                bottom: e,
                width: d - c,
                height: e - b
            }
        }

        function g() {
            E = $($(".multiSelected").map(function (a) {
                $(this).data("multi-id", a);
                return this
            })).clone(!0).off();
            E.each(function () {
                $(this).removeAttr("id");
                $(this).find("*").removeAttr("id")
            });
            E.removeClass(".multiSelected");
            x = $('\x3cdiv class\x3d"ghost element"\x3e\x3c/div\x3e');
            $(".multipleSelectionBox").css("visibility", "hidden");
            $(".multiSelected").css("opacity", "0");
            E.appendTo(x);
            var a = G.hb()[0].O().parent(".elements");
            x.appendTo(a);
            m.hasClass("br") ? x.addClass("fixTopLeft") : m.hasClass("bl") ? x.addClass("fixTopRight") : m.hasClass("tr") ? x.addClass("fixBottomLeft") : m.hasClass("tl") && x.addClass("fixBottomRight")
        }

        function h() {
            $(".multipleSelectionBox").css("visibility", "visible");
            $(".multiSelected").each(function () {
                var a = $(this).data("canvaElement");
                $(this).css("opacity", 1 - a.Ob / 100)
            })
        }

        function k() {
            var a = x.get(0).getBoundingClientRect(),
                b = a.left,
                c = a.top;
            jJ();
            E.each(function () {
                function a() {
                    0 == v && h.setPosition(q / W, u / W)
                }

                function d() {
                    var a = h.Ba();
                    if (!em(n, a)) {
                        var b = n.serialize(),
                            a = a.serialize();
                        h.fz() && (b.transformDependentData = p,
                            a.transformDependentData = h.Vy());
                        b = {
                            elementIndex: h.ea(),
                            pageIndex: r,
                            old: b,
                            "new": a
                        };
                        I.register(new Y(No, b))
                    }
                }
                var e = $(this).data("multi-id"),
                    g = $(".multiSelected").filter(function () {
                        return $(this).data("multi-id") == e
                    }).first(),
                    h = g.data("canvaElement"),
                    k = g.get(0).getBoundingClientRect(),
                    m = $(this).get(0).getBoundingClientRect(),
                    n = h.Ba(),
                    p = h.fz() ? h.Vy() : null,
                    r = Mo(G, h.ha()),
                    g = (m.right - m.left) / (k.right - k.left),
                    k = (m.bottom - m.top) / (k.bottom - k.top),
                    q = m.left - b + Q,
                    u = m.top - c + N,
                    v = h.eb();
                $(this).remove();
                if (h instanceof up) {
                    var m = h.dd(0),
                        m = parseFloat(parseFloat(m * B)),
                        y = h.D() * g,
                        k = h.gc(0),
                        g = h.Gd;
                    h.Gd = !1;
                    h.qe(0, m);
                    h.za(y);
                    h.oa();
                    h.mb();
                    a();
                    m = h.gc(0);
                    m = {
                        elementIndex: h.ea(),
                        pageIndex: r,
                        textIndex: 0,
                        "new": m,
                        old: k
                    };
                    I.register(new bN(1, m));
                    d();
                    g && eD(h)
                } else
                    h.setSize(h.D() * g, h.F() * k),
                    a(),
                    d();
                h.mb();
                lJ(xc(l), zc(l))
            });
            kJ()
        }
        var l = Kb,
            m = $(this),
            n = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
            p = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
            r = $(".multipleSelectionBox").width(),
            u = $(".multipleSelectionBox").height(),
            v = Math.sqrt(Math.pow(r, 2) + Math.pow(u, 2)),
            y = G.hb();
        if (!(0 >= y.length)) {
            a = y[0].ha();
            for (var q = 0; q !== y.length; q++)
                if (y[q].ha() !== a)
                    return;
            m.addClass("on");
            S.trigger("hideContextualControlsRequested");
            WT(y, !0);
            var x, E, B = 1,
                K = $('\x3cdiv id\x3d"ghostSelectionBox" class\x3d"cornerHandles"\x3e\x3cdiv class\x3d"inner"\x3e\x3c/div\x3e\x3ca class\x3d"handle tl"\x3e\x3c/a\x3e\x3ca class\x3d"handle tr"\x3e\x3c/a\x3e\x3ca class\x3d"handle br"\x3e\x3c/a\x3e\x3ca class\x3d"handle bl"\x3e\x3c/a\x3e\x3c/div\x3e');
            g();
            var C = e(E),
                q = hC(H, w(a));
            a = q.$el.offset().top;
            var q = q.$el.offset().left,
                N = C.top - a,
                Q = C.left - q;
            x.css("left", Q + "px").css("top", N + "px");
            E.each(function (a, b) {
                Ug(b, {
                    hi: -Q,
                    ii: -N
                }, !0)
            });
            $("#overlays").append(K);
            c();
            var M = new Po($(document));
            M.on("mousemove|touchmove", b).on("mouseup|touchend", d);
            return !1
        }
    }

    function pT(a) {
        function b(a) {
            var b = (g || 0) + Math.sqrt(Math.pow(void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX, 2) + Math.pow(void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY, 2)) - h;
            0 < b ? e.dB(b / W) : e.dB();
            e.lb();
            a.preventDefault();
            a.stopPropagation();
            return !1
        }

        function c() {
            k.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            e.Ij && e.Ij();
            e.gg = !1;
            var a = {
                elementIndex: e.ea(),
                pageIndex: Mo(G, e.ha()),
                "new": {
                    padding: e.padding
                },
                old: {
                    padding: g
                }
            };
            I.register(new Y(No, a))
        }
        var d = $(this);
        d.addClass("on");
        var e = d.parents(".selectionBox").data("element").data("canvaElement");
        if (e) {
            var g = e.padding,
                h = Math.sqrt(Math.pow(void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX, 2) + Math.pow(void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY, 2));
            e.gg = !0;
            var k = new Po($(document));
            k.on("mousemove|touchmove", b).on("mouseup|touchend", c)
        }
    }

    function oT(a) {
        function b(a) {
            Vq = k instanceof Ko || k instanceof cB ? B : k.xb() ? B : a.shiftKey ? !B : B;
            lm = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            mm = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            fN.read(c);
            return !1
        }

        function c() {
            uq = Qo(k);
            var a = NO({
                    x: lm,
                    y: mm
                }, E),
                b = sn(q, x, lm, mm),
                c = Math.cos(pn(a - YK)) * b,
                d = 0,
                g = 0,
                l = 0;
            Vq && (a = YK,
                b = c);
            if (!(aL && 3 > Math.abs($K - lm) || bL && 3 > Math.abs(ZK - mm))) {
                aL = bL = !1;
                var m = dS(e.get(0)),
                    n, B, of = !1,
                    a = UA(a, k.eb());
                switch (m) {
                    case 4:
                        d = c;
                        n = qc;
                        B = aa;
                        break;
                    case 3:
                        d = c;
                        n = aa;
                        B = qc;
                        break;
                    case 1:
                        g = c;
                        n = xb;
                        B = Ka;
                        break;
                    case 6:
                        g = c;
                        n = Ka;
                        B = xb;
                        break;
                    case 2:
                        of = !0;
                        n = Db;
                        B = ma;
                        l = a - OO("TR");
                        d = b * Math.sin(pn(l));
                        g = b * Math.cos(pn(l));
                        break;
                    case 7:
                        of = !0;
                        n = ra;
                        B = Oa;
                        l = a - OO("BR");
                        g = b * Math.sin(pn(l));
                        d = b * Math.cos(pn(l));
                        break;
                    case 5:
                        of = !0;
                        n = ma;
                        B = Db;
                        l = a - OO("BL");
                        d = b * Math.sin(pn(l));
                        g = b * Math.cos(pn(l));
                        break;
                    case 0:
                        of = !0,
                        n = Oa,
                            B = ra,
                            l = a - OO("TL"),
                            g = b * Math.sin(pn(l)),
                            d = b * Math.cos(pn(l))
                }
                k instanceof up && (3 === m ? (n = ma,
                    B = qc,
                    SA(k) && (n = yd),
                    TA(k) && (n = Oa)) : 4 === m && (n = ra,
                    B = aa,
                    SA(k) && (n = ie),
                    TA(k) && (n = Db)));
                var nm = n.get(0).getBoundingClientRect(),
                    gN = Q.scrollLeft,
                    hN = Q.scrollTop;
                Vq && of && (0 === d ? d = g * y : g = d / y);
                var Iy;
                Iy = 0 === d ? k.D() : of ? Math.max(u + d, C) / W : Math.max(u + d, K * W, ef) / W;
                var Jy;
                Jy = 0 === g ? k.F() : of ? Math.max(v + g, N) / W : Math.max(v + g, K * W, Nb) / W;
                k.elements && 0 !== k.elements.length || Yg(k, U4, V4, {
                    d: !0,
                    hl: !0,
                    r: !0,
                    u7: !0
                }, Vq);
                c = $("#overlays").get(0).getBoundingClientRect();
                B = B.get(0).getBoundingClientRect();
                a = B.left - c.left;
                c = B.top - c.top;
                B.left < uq.x && V.addClass("positionIndicatorScalingFromLeft");
                B.top > uq.y && V.addClass("positionIndicatorScalingFromBottom");
                V.addClass("positionIndicatorShowing").addClass("positionIndicatorScaling").css("transform", "translate(" + a + "px," + c + "px)").html(Iy.toFixed(0) + "  " + Jy.toFixed(0));
                fN.write(function () {
                    Ky = of ;
                    k.setSize(Iy, Jy, Ky);
                    var a = n.get(0).getBoundingClientRect(),
                        b = hN - ca,
                        c = gN - M;
                    ca = hN;
                    M = gN;
                    Ml += nm.top - a.top - b;
                    rc += nm.left - a.left - c;
                    a = k;
                    b = (r + Ml) / W;
                    mB(a, (p + rc) / W);
                    uB(a, b);
                    k instanceof up && 0 !== k.eb() ? (k.za(),
                        k.Bc()) : k.mb();
                    jU(k);
                    (a = h.data("toolbar")) && k.xb() && k.ne() && OC(a)
                });
                $K = lm;
                ZK = mm
            }
        }

        function d() {
            nm.off("mousemove|touchmove", b).off("mouseup|touchend", d);
            t7.write(function () {
                V.remove();
                $("#overlays .align").removeClass("on");
                e.removeClass("on");
                k instanceof up ? window.setTimeout(function () {
                    k.Ij();
                    wz(h, !0);
                    k.gg = !1
                }, 0) : k.gg = !1;
                var a = k.Ba();
                if (!em(l, a)) {
                    jJ();
                    GT(k);
                    var b = l.serialize(),
                        a = a.serialize();
                    k.fz() && (b.transformDependentData = m,
                        a.transformDependentData = k.Vy());
                    b = {
                        elementIndex: k.ea(),
                        pageIndex: Mo(G, k.ha()),
                        old: b,
                        "new": a,
                        proportionalSetSize: Ky
                    };
                    I.register(new Y(No, b));
                    n && (b = {
                            elementIndex: k.ea(),
                            pageIndex: Mo(G, k.ha()),
                            old: n,
                            "new": k.gc(k.Ib()),
                            textIndex: k.Ib()
                        },
                        I.register(new bN(1, b)));
                    kJ()
                }
                ra.remove();
                Ka.remove();
                ma.remove();
                aa.remove();
                Oa.remove();
                xb.remove();
                Db.remove();
                qc.remove();
                ie.remove();
                yd.remove()
            })
        }
        var e = $(this),
            g = Kb,
            h = e.parents(".selectionBox").data("element"),
            k = h.data("canvaElement");
        if (k) {
            e.addClass("on");
            var l = k.Ba(),
                m = k.fz() ? k.Vy() : null,
                n = k instanceof up && k.Gd ? k.gc(k.Ib()) : null,
                p = Math.round(k.left * W),
                r = Math.round(k.top * W),
                u = vB(k),
                v = Ro(k),
                y = u / v,
                q = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
                x = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
                E = {
                    x: q,
                    y: x
                },
                B = !(k instanceof up || k instanceof eB),
                K = J.RH;
            k instanceof iB && (K = J.$w);
            k instanceof gG && (K = J.nY);
            a = (new U(0, 0, K, K)).scale(W);
            a = pm(new U(0, 0, y, 1), a);
            var C = a.D(),
                N = a.F(),
                Q = $("#canvaDocument").get(0),
                M = Q.scrollLeft,
                ca = Q.scrollTop,
                V = $('\x3cdiv class\x3d"positionIndicator"\x3e\x3c/div\x3e');
            $("#overlays").append(V);
            S.trigger("hideContextualControlsRequested");
            Oo();
            k.xb() && k.ne() && (k.zn(),
                LN(h, xc(g)));
            var ra = $("\x3cdiv\x3e\x3c/div\x3e");
            ra.css({
                position: "absolute",
                top: 0,
                left: 0
            });
            k.O().append(ra);
            var Ka = $("\x3cdiv\x3e\x3c/div\x3e");
            Ka.css({
                position: "absolute",
                top: 0,
                left: "50%"
            });
            k.O().append(Ka);
            var ma = $("\x3cdiv\x3e\x3c/div\x3e");
            ma.css({
                position: "absolute",
                top: 0,
                right: 0
            });
            k.O().append(ma);
            var aa = $("\x3cdiv\x3e\x3c/div\x3e");
            aa.css({
                position: "absolute",
                top: "50%",
                right: 0
            });
            k.O().append(aa);
            var Oa = $("\x3cdiv\x3e\x3c/div\x3e");
            Oa.css({
                position: "absolute",
                bottom: 0,
                right: 0
            });
            k.O().append(Oa);
            var xb = $("\x3cdiv\x3e\x3c/div\x3e");
            xb.css({
                position: "absolute",
                bottom: 0,
                left: "50%"
            });
            k.O().append(xb);
            var Db = $("\x3cdiv\x3e\x3c/div\x3e");
            Db.css({
                position: "absolute",
                bottom: 0,
                left: 0
            });
            k.O().append(Db);
            var qc = $("\x3cdiv\x3e\x3c/div\x3e");
            qc.css({
                position: "absolute",
                top: "50%",
                left: 0
            });
            k.O().append(qc);
            var ie = $("\x3cdiv\x3e\x3c/div\x3e");
            ie.css({
                position: "absolute",
                top: "50%",
                left: 0
            });
            k.O().append(ie);
            var yd = $("\x3cdiv\x3e\x3c/div\x3e");
            yd.css({
                position: "absolute",
                top: "50%",
                right: 0
            });
            k.O().append(yd);
            var ef = 0,
                Nb = 0;
            k instanceof Ko && (g = k.Fb ? $.extend(!0, {}, k.Fb) : null) && (ef = (g.left + g.right) * KC(k).scale * W,
                Nb = (g.top + g.bottom) * KC(k).scale * W);
            var Ml = 0,
                rc = 0,
                uq = Qo(k),
                g = gm(Qg(e.get(0).getBoundingClientRect())),
                YK = NO(g, uq),
                ZK = x,
                $K = q,
                aL = !1,
                bL = !1,
                U4 = {},
                V4 = Xg(k),
                lm = 0,
                mm = 0,
                Vq = B,
                Ky = !1,
                fN = Tg(),
                t7 = Tg();
            k.gg = !0;
            var nm = new Po($(document));
            nm.on("mousemove|touchmove", b).on("mouseup|touchend", d);
            return !1
        }
    }

    function jU(a) {
        if (a instanceof up && a.Gd) {
            for (var b = a.dd(0), c = a.O().children(".inner"), d = c.parent().outerHeight() / W, e = c.parent().outerWidth() / W; c.outerHeight() <= d && Number(c.prop("scrollWidth")) <= e && b < J.lY;)
                b++,
                a.qe(0, b, !0);
            for (;
                (c.outerHeight() > d || .95 * Number(c.prop("scrollWidth")) > e) && b > J.QH;)
                b--,
                a.qe(0, b, !0);
            b === J.QH && c.outerHeight() > d && a.oa(c.outerHeight());
            a.O().removeData("cachedLineLengths")
        }
    }
    var kU = _.template('\x3cdiv class\x3d"selectionBox multipleSelectionBox"\x3e\x3cdiv class\x3d"inner"\x3e\x3c/div\x3e\x3ca class\x3d"handle tl" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle tr" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle br" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"handle bl" href\x3d"#" title\x3d"\x3c%- resize %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"rotate" href\x3d"#" title\x3d"\x3c%- rotate %\x3e"\x3e\x3c/a\x3e\x3ca class\x3d"move" href\x3d"#"\x3e\x3c/a\x3e\x3c/div\x3e');

    function lJ(a, b) {
        if (G && G.hb) {
            var c = G.hb();
            if (!(2 > c.length)) {
                var d = $("#overlays"),
                    e = $(".selectionBox.multipleSelectionBox");
                0 == e.length && (e = $(kU({
                        resize: b.resize(),
                        rotate: b.rotate()
                    })),
                    e.appendTo(d));
                0 === c.filter(function (a) {
                    return 0 !== a.eb()
                }).length && e.addClass("cornerHandles");
                b = lU(c);
                e.css("left", b.Y()).css("top", b.N()).css("width", b.D()).css("height", b.F());
                var g = $();
                c.map(function (a) {
                    g.push(a.O().get(0))
                });
                rR(g, a)
            }
        }
    }

    function lU(a) {
        function b(a, b) {
            return tB(H.Xa[a ? a.ea() : 0]) + b * W
        }

        function c(a, b) {
            return yB(H.Xa[a ? a.ea() : 0]) + b * W
        }
        var d = a.map(function (a) {
                return b(a.ha(), a.nc())
            }),
            e = a.map(function (a) {
                return c(a.ha(), a.xc())
            }),
            d = cl(d),
            e = cl(e),
            g = dl(a.map(function (a) {
                return b(a.ha(), a.Ld())
            }));
        a = dl(a.map(function (a) {
            return c(a.ha(), a.ud())
        }));
        return new U(d, e, g - d, a - e)
    }

    function mU() {
        var a = $(this),
            b = a.data("canvaElement");
        if (b && b.wo() && !(0 < a.parents(".group").length)) {
            var c = G.hb(),
                d = G.Rb().filter(function (a) {
                    a = hC(H, a);
                    return CM(a.$el, $("#marquee"))
                }),
                e = CM(a, $("#marquee")),
                d = -1 !== d.indexOf(b.ha()),
                g = 0 === c.length;
            c.forEach(function (a) {
                b.ha() === a.ha() && (g = !0)
            });
            e && d && g ? b.Ac() || b.vg() ? (c = a.get(0).getBoundingClientRect(),
                e = $("#marquee").get(0).getBoundingClientRect(),
                e.top + 10 < c.top && e.left + 10 < c.left ? (b.$j(!0),
                    a.addClass("multiSelected")) : (b.$j(!1),
                    a.removeClass("multiSelected"))) : (b.$j(!0),
                a.addClass("multiSelected")) : (b.$j(!1),
                a.removeClass("multiSelected"))
        }
    }

    function jT(a) {
        a = a.target;
        "SPAN" == a.tagName && (a.style.removeProperty("font-size"),
            a.style.removeProperty("background-color"),
            a.style.removeProperty("line-height"),
            a.style.removeProperty("letter-spacing"))
    }

    function gT(a) {
        (function (a) {
            if (13 !== a.keyCode || !document.queryCommandSupported("insertLineBreak") || a.ctrlKey || a.metaKey)
                return !1;
            if (a.shiftKey || a.altKey)
                return !0;
            if (document.queryCommandState("insertUnorderedList") || document.queryCommandState("insertOrderedList"))
                return !1;
            a = document.queryCommandValue("formatBlock");
            return "" !== a && "div" !== a && "p" !== a ? !1 : !0
        })(a) && (document.execCommand("insertLineBreak", !1, null),
            a.preventDefault())
    }

    function hT() {
        if (nU)
            $("#content").off("keydown", ".element.text.focused", hT);
        else {
            var a = $(this);
            oU(a)
        }
    }

    function iT() {
        nU = !0;
        var a = $(this);
        oU(a)
    }
    var nU = !1;

    function oU(a) {
        function b() {
            a.data("handleTextElementInputTimerId", 0);
            pU(a);
            wz(a, !0)
        }
        if (!qU(a)) {
            var c = a.data("handleTextElementInputTimerId") || 0;
            0 === c && (c = nU ? requestAnimationFrame(b) : window.setTimeout(b, J.Qc),
                a.data("handleTextElementInputTimerId", c))
        }
    }

    function pU(a) {
        var b = a.data("canvaElement");
        if (b) {
            var c = b.Ib();
            0 < Object.keys(b.pr(c)).length && rU(function () {
                b.qo(c)
            })
        }
    }

    function qU(a) {
        return a.hasClass("svg") || 0 < a.closest(".element.svg").length
    }

    function rU(a) {
        var b = window.getSelection(),
            c = document.createElement("span");
        c.classList.add("fauxCaret");
        c.appendChild(document.createTextNode(""));
        if (b.rangeCount) {
            var d = b.getRangeAt(0);
            d.collapse(!1);
            d.insertNode(c)
        }
        a();
        b = window.getSelection();
        b.rangeCount && (d = document.createRange(),
            d.setStart(c.childNodes[0], 0),
            d.collapse(!0),
            b.removeAllRanges(),
            b.addRange(d));
        c.parentNode.removeChild(c)
    }

    function wz(a, b) {
        function c() {
            h.mb();
            k && (m.TN(h, K),
                m.mb())
        }

        function d(a, b) {
            return a.nc() + b > a.ha().Ld()
        }

        function e(a) {
            return a.nc() <= a.ha().nc()
        }
        var g = !!b;
        if (!qU(a)) {
            var h = a.data("canvaElement");
            if (h && (h.Iu() && (g = !1),
                    b = a.children(".inner"),
                    0 !== b.length)) {
                var k = 0 < a.parents(".element.group").length,
                    l = 0;
                if (k) {
                    var m = a.parents(".group").first().data("canvaElement"),
                        l = m.eb();
                    h.Ij()
                }
                100 < b.text().length && h.ps(h.Ib());
                var n = g && !h.yz();
                n && (b.css("width", "0"),
                    b.addClass("explicitLineBreaksLayoutMode"));
                var p = b.prop("scrollWidth"),
                    r = el(b[0]).Gn;
                r && 1 < r && (p /= r);
                var r = a.data("justification"),
                    u = h.D(),
                    v = h.Y();
                if (n) {
                    var y = u;
                    a.data("ephemeralStartWidth") ? y = a.data("ephemeralStartWidth") : a.data("ephemeralStartWidth", h.D());
                    a = Math.max(y, p + 2);
                    h.ha() && (r && "left" !== r ? "right" === r ? (h.wb(v + u - a),
                        e(h) && (a = u,
                            h.wb(0),
                            h.Ij())) : "center" === r && (h.wb(v + (u - a) / 2),
                        e(h) || d(h, a)) && (h.wb(v),
                        a = u,
                        h.Ij()) : d(h, a) && (a = h.ha().Ld() - h.nc(),
                        h.Ij()))
                } else
                    a = Math.max(u, p);
                r = p = 0;
                if (g = (0 !== um(l) - um(h.eb()) || !(!h.te || "top" === h.te)) && g) {
                    var q = $('\x3cspan class\x3d"shim"\x3e\x26nbsp;\x3c/span\x3e');
                    h.O().find(".shim").remove();
                    h.O().prepend(q);
                    q.css("position", "absolute").css("left", 0);
                    h.te && "top" !== h.te ? TA(h) ? q.css("top", "100%") : SA(h) && q.css("top", "50%") : q.css("top", 0);
                    var x = q.get(0).getBoundingClientRect(),
                        E = h.N(),
                        B = h.Y()
                }
                n && b.removeClass("explicitLineBreaksLayoutMode");
                h.za(a);
                var K = h.Ba();
                b = h.F();
                h.mb();
                g && b !== h.F() ? (b = q.get(0).getBoundingClientRect(),
                    q.remove(),
                    p = b.top - x.top,
                    r = b.left - x.left,
                    wB(h) && (q = Jm(Im([r, p]).rotate(m.eb())),
                        r = q[0],
                        p = q[1]),
                    0 == p && 0 == r || h.setPosition(B - r / W, E - p / W),
                    window.setTimeout(c, 0)) : (c(),
                    q && q.remove());
                jU(h)
            }
        }
    }

    function JJ() {
        var a = G.hb(),
            b, c, d = J.wQ * J.dC,
            e, g;
        (c = G.Oa()) && 1 === a.length && (b = a[0],
            jN(b),
            a = b.Ba(),
            b instanceof eB ? (e = c.Ba(),
                e.rb(e.N() - d),
                e.za(e.D() + 2 * d),
                e.oa(e.F() + 2 * d),
                e.wb(e.Y() - d)) : e = $g(a.clone(), c.Ba()),
            b instanceof up ? (jJ(),
                d = b.gc(0),
                g = b.dd(0) * (e.F() / a.F()),
                b.qe(0, g),
                window.setTimeout(function () {
                    b.za(e.D());
                    b.oa();
                    b.mb()
                }, 0),
                b.setPosition(e.Y(), e.N()),
                g = b.gc(0),
                d = {
                    elementIndex: b.ea(),
                    pageIndex: Mo(G, c),
                    textIndex: 0,
                    "new": g,
                    old: d
                },
                d = new bN(1, d),
                I.register(d)) : (b.yd(e),
                b.mb()),
            c = {
                elementIndex: b.ea(),
                pageIndex: Mo(G, c),
                "new": e.serialize(),
                old: a.serialize()
            },
            c = new Y(No, c),
            I.register(c),
            b instanceof up && kJ(),
            wg(b))
    }

    function vy() {
        var a = $(".toolbarContainer .toolbar__button--cancel");
        0 < $("#overlays \x3e .mask.on").length && 0 < a.length && a.trigger("click")
    }

    function uT() {
        vy()
    }

    function vT(a) {
        function b(a) {
            if ($(a.target).is("#cutoutMessage") || 0 < $(a.target).parents("#cutoutMessage").length || $("#overlays").hasClass("shakeOverlays"))
                return !0;
            clearTimeout(v);
            $("#overlays").addClass("shakeOverlays");
            v = setTimeout(function () {
                $("#overlays").removeClass("shakeOverlays")
            }, 300)
        }

        function c(a) {
            $(a.target).hasClass("buttonCutoutMessageEditText") && (a = u,
                a.vy = !1,
                a.O().toggleClass("failed", a.vy),
                a.aq(0),
                a.aB(0),
                a.Zj(0, "Glegoo"),
                a.ls = !0,
                xz(a.O(), !0),
                a.mb(),
                wg(u),
                sJ(u.O(), !0),
                u.lb(),
                d())
        }

        function d() {
            $(n).off("mousedown", b).off("mouseleave", d);
            $("#cutoutMessage").on("transitionend", e).addClass("disappear")
        }

        function e() {
            $(this).remove()
        }

        function g() {
            var a = r.get(0) === n;
            if (a = r.data("triggerElement") !== n && !a) {
                var a = $("#overlays").find(".text.focused"),
                    b;
                0 < a.length ? (a = Qg(a.get(0).getBoundingClientRect()),
                    b = Qg(n.getBoundingClientRect()),
                    a = Sg(a, b)) : a = !1;
                a = !a
            }
            return a
        }
        var h, k, l;
        l = 200;
        var m = 85,
            n = a.currentTarget;
        a = lc(Kb);
        h = n.classList.contains("unapproved");
        k = a.format("documentMediaLoadFailedError");
        var p = n.classList.contains("failed"),
            r = $("#cutoutMessage"),
            u = $(n).data("canvaElement");
        if (u) {
            0 >= r.length && (r = $('\x3cdiv id\x3d"cutoutMessage"\x3e\x3c/div\x3e'));
            p && (l = 240,
                m = 100,
                k = a.format("documentFontLoadFailedError"));
            r.data("canvaElement", u).html(k).toggleClass("unapproved", h).toggleClass("failed", p).off("transitionend").removeClass("disappear");
            $(n).on("mousedown", b);
            g() && (a = Qg(n.getBoundingClientRect()),
                h = Qg($("#overlays").get(0).getBoundingClientRect()),
                k = $("#canvaDocument").offset(),
                k = gS().translate(k.left, k.top).translate(-h.Y(), -h.N()),
                l = new U(0, 0, l, m),
                rm(om(l, a).translate(-h.Y(), -h.N()), k),
                r.css(l.serialize()).appendTo("#overlays").data("triggerElement", n).on("click", c));
            $(n).on("mouseleave", d);
            var v
        }
    }

    function wT(a) {
        $(a.target).is("#content, #canvaDocument, #canvaDocument \x3e .inner, #canvaDocument \x3e .inner \x3e .page, #canvaDocument \x3e .inner \x3e .page .page__elements") && ($(a.target).is("input") || $(document.activeElement).blur(),
            bh())
    }

    function ch(a, b, c) {
        function d(a) {
            DM = !0;
            window.clearTimeout(Q);
            Q = window.setTimeout(function () {
                DM = !1
            }, 1E3);
            var b = document.elementFromPoint(a.originalEvent.touches[0].clientX, a.originalEvent.touches[0].clientY);
            M.forEach(function (a) {
                a != b && l.call(a)
            });
            var c = $(b),
                d = 0 <= M.indexOf(b);
            !d && 0 < c.parents("#hotspots").length && c.is(".element.hotspot") ? (N = b,
                g.call(b, a),
                M = [b]) : M = d ? [b] : []
        }

        function e(a) {
            $(document).off("touchmove", d).off("touchend", e);
            var b = $(N);
            0 < b.parents("#hotspots").length && b.is(".element.hotspot") && m.call(N, a);
            window.setTimeout(function () {
                DM = !1
            }, 300)
        }

        function g(b) {
            if (b && b.shiftKey)
                y = !1;
            else if (a.hasClass("svg") || a.hasClass("cutout")) {
                q = y = !1;
                var c = $("#cutoutMessage");
                0 >= c.length && (c = $('\x3cdiv id\x3d"cutoutMessage"\x3e').text(p.format("documentCutoutInFrameWarning")),
                    c.appendTo("#content"));
                c.off("transitionend").removeClass("disappear")
            } else if (u && null === u.Ub())
                q = y = !1;
            else {
                var d = r.clone(!0);
                d.css("width", "").css("height", "");
                b = $(this).data("canvaElement");
                var e = $(this).data("placeholderIndex");
                a.data("placedInElement", b).addClass("placing").addClass("draggedMediaOverHotspot");
                var g = a.data("li"),
                    h = g.data("result"),
                    k = g.find("img").data("mediaApproved"),
                    g = h.G(),
                    h = h.getVersion(),
                    l = b.Gm(e),
                    d = new U(0, 0, u ? vB(u) : parseInt(d.data("screenWidth"), 10), u ? Ro(u) : parseInt(d.data("screenHeight"), 10));
                pm(d, l).translate(-l.Y(), -l.N());
                d = {
                    type: "image",
                    index: e,
                    mediaId: g,
                    mediaVersion: h,
                    origin: u ? u.Ve() : null,
                    imageBox: d.serialize(),
                    flipOrientation: u ? u.mc : 0,
                    mediaApproved: void 0 === k ? !0 : k
                };
                K = b.al(e);
                C = gC(b.So(e));
                g === K.mediaId ? y = !1 : (b.fq(e, d),
                    u && ((g = u.O().data("selectionBox")) && g.hide(),
                        u.gp() && u.Id() && (c = gC(u.Id()))),
                    b = b.So(e),
                    b.remove(),
                    WH(b, c || gC(b)))
            }
        }

        function h() {
            B.read(k)
        }

        function k() {
            var b = a.offset();
            B.write(function () {
                $("#cutoutMessage").css("left", b.left + a.width() / 2 - $("#cutoutMessage").outerWidth() / 2).css("top", b.top + a.height() / 2 - $("#cutoutMessage").outerHeight() / 2)
            })
        }

        function l() {
            var b = $(this).data("canvaElement"),
                c = $(this).data("placeholderIndex"),
                d = b.So(c);
            a.removeData("placedInElement").removeClass("placing").removeClass("draggedMediaOverHotspot");
            $("#cutoutMessage").on("transitionend", n).addClass("disappear");
            y && (b.fq(c, K),
                d.remove(),
                WH(d, C),
                u && (b = u.O().data("selectionBox")) && b.show())
        }

        function m(b) {
            if (a.data("li") && (!b || !b.shiftKey) && ($("#cutoutMessage").on("transitionend", n).addClass("disappear"),
                    q)) {
                b = a.data("li").data("result");
                var c = $(this).data("canvaElement"),
                    d = $(this).data("placeholderIndex"),
                    e = c.Qy(d);
                EM(c);
                var g = {
                        elementIndex: c.ea(),
                        pageIndex: Mo(G, c.ha()),
                        placeholderIndex: d,
                        "new": c.al(d),
                        old: K
                    },
                    h = {
                        elementIndex: c.ea(),
                        pageIndex: Mo(G, c.ha()),
                        placeholderIndex: d,
                        "new": {
                            filter: gC(c.So(d))
                        },
                        old: {
                            filter: C
                        }
                    },
                    g = new Y(YM, g),
                    h = new Y(11, h);
                jJ();
                I.register(g);
                I.register(h);
                c.rH = !0;
                c.As(e);
                a.one("transitionend", n).addClass("disappeared").removeClass("draggedMediaOverHotspot").removeClass("placing");
                x.remove();
                e.removeData("oldPlacement");
                u && (u.wb(a.data("startLeft")),
                    u.rb(a.data("startTop")),
                    eM(u),
                    u.remove(),
                    u instanceof aB && c instanceof Ko && 0 != u.mc && setTimeout(function () {
                        function a(c) {
                            c.target != l.get(0) && (clearTimeout(v),
                                c.target == l.find("a")[0] ? ($(document).on("mouseout mouseup", b),
                                    c.preventDefault()) : k())
                        }

                        function b() {
                            $(document).off("mouseout mouseup", b);
                            k()
                        }

                        function e() {
                            $(document).off("mousemove", e);
                            u = setTimeout(function () {
                                l.on("mouseenter", g).on("mouseleave", h)
                            }, 100)
                        }

                        function g() {
                            clearTimeout(v)
                        }

                        function h() {
                            clearTimeout(v);
                            v = setTimeout(k, 1E3)
                        }

                        function k() {
                            clearTimeout(u);
                            $(document).off("mousedown", a).off("mousemove", e);
                            l.off("mouseenter", g).off("mouseleave", h);
                            l.on("transitionend", n).addClass("disappear")
                        }
                        var l = $("#cutoutMessage");
                        0 == l.length && (l = $('\x3cdiv id\x3d"cutoutMessage"\x3e\x3c/div\x3e'));
                        var m = hC(H, w(c.ha()));
                        l.off("transitionend").addClass("closeable").removeClass("disappear").text(p.format("documentCutoutFlippedImageWarning")).append('\x3ca href\x3d"#" class\x3d"close"\x3eClose\x3c/a\x3e');
                        sU(m, l);
                        var r = c.Ba(),
                            q = c.Gm(d),
                            m = r.N() + q.N() + q.F() / 2,
                            m = m * W,
                            m = m - l.outerHeight() / 2,
                            r = r.Y() + q.Y() + q.D() / 2,
                            r = r * W,
                            r = r - l.outerWidth() / 2;
                        l.css("top", m).css("left", r);
                        $(document).on("mousedown", a).on("mousemove", e);
                        var u = 0,
                            v = setTimeout(k, 1E4)
                    }, 200));
                kJ();
                b && (e = b.Ve(),
                    e !== Eg && "GOOGLE" !== e || xg(Gb, b, c.Zo(d)),
                    SJ(fK(b, v)))
            }
        }

        function n() {
            $(this).remove()
        }
        b = b || G.Oa();
        var p = lc(Kb),
            r = $("img", a),
            u = a.data("canvaElement"),
            v = !!a.data("isOrganicSearchResult"),
            y = !0,
            q = !0,
            x = $('\x3csection id\x3d"hotspots"\x3e\x3c/section\x3e'),
            E = lD(H, b);
        x.css(E.serialize());
        var B = Tg();
        b.xa().forEach(function (a) {
            if ((a instanceof Ko || a instanceof eB) && !wB(a)) {
                var b = $('\x3cdiv class\x3d"container"\x3e\x3c/div\x3e'),
                    d = a.Ba();
                b.css(d.scale(W).round().serialize()).css("transform", "rotate(" + a.eb().toString() + "deg)");
                for (var d = a.Zf(), e = 0; e < d; e++) {
                    var k = a.Gm(e);
                    k.scale(W).round();
                    var n = $('\x3cdiv class\x3d"element hotspot"\x3e\x3c/div\x3e');
                    n.css(k.serialize()).data("canvaElement", a).data("placeholderIndex", e).appendTo(b);
                    !1 === c && n.mouseover(g).mousemove(h).mouseout(l).mouseup(m)
                }
                b.appendTo(x)
            }
        });
        x.appendTo("#content");
        b = hC(H, b).$el;
        x.css("left", b.offset().left).css("top", b.offset().top);
        var K = null,
            C = null,
            N = null,
            Q = null;
        if (!0 === c) {
            var M = [];
            $(document).on("touchmove", d).on("touchend", e)
        }
    }

    function $L(a, b) {
        function c(a) {
            a = {
                left: a.originalEvent.touches[0].clientX,
                top: a.originalEvent.touches[0].clientY,
                width: 0,
                height: 0
            };
            for (var b = {
                    left: r,
                    top: u,
                    width: 0,
                    height: 0
                }, c = 0; c < p.length; c++) {
                var d = p[c];
                Vg(a, d) && !Vg(b, d) ? e.call(d.element) : Vg(b, d) && !Vg(a, d) && g.call(d.element)
            }
            r = a.left;
            u = a.top
        }

        function d(b) {
            $(document).off("touchmove", c).off("touchend", d);
            for (var e = {
                    left: b.originalEvent.changedTouches[0].clientX,
                    top: b.originalEvent.changedTouches[0].clientY,
                    width: 0,
                    height: 0
                }, g = 0; g < p.length; g++) {
                var l = p[g];
                if (Vg(e, l)) {
                    var m = $(".page", k).index(l.element);
                    $(l.element).data("page", $("#canvaDocument \x3e .inner \x3e .page").eq(m));
                    h.call(l.element, b, a)
                }
            }
        }

        function e() {
            var b = $(this).data("page");
            b && (b.addClass("hotspotHover"),
                $(this).addClass("hover"),
                a.addClass("placing"))
        }

        function g() {
            var b = $(this).data("page");
            b && b.removeClass("hotspotHover");
            $(this).removeClass("hover");
            a.removeClass("placing")
        }

        function h(b, c) {
            function d(a) {
                function b() {
                    h.off("unpacked", b);
                    $N({
                        zo: ZN(h),
                        Pe: G.pb(),
                        page: h
                    });
                    c(h.serialize())
                }

                function c(b) {
                    n && (e = new Dm({
                            type: kA,
                            id: n.id,
                            version: n.version
                        }),
                        tU(a, e));
                    var d = {};
                    a.layout && (d.id = a.layout.id,
                        d.version = a.layout.version);
                    p && (d.id = p.id,
                        d.version = p.version);
                    b = zm(new xm(d), b);
                    var d = {
                            "new": b,
                            old: Ka,
                            pageIndex: ra.ea()
                        },
                        g = Np(b.xg()),
                        h = T,
                        k = b.serialize();
                    !g && h && k && Bl(h, k.id);
                    kN(ra, b, l, e);
                    I.register(new iN(4, d))
                }
                var e;
                l && (ra.clear(),
                    UN(ra, l));
                if (a.width !== ra.D() || a.height !== ra.F()) {
                    var g = zm(new xm, a),
                        h = new qp(G, {});
                    kN(h, g, null, null, !0);
                    h.on("unpacked", b)
                } else
                    c(a)
            }

            function e(a) {
                return a.getDocument().Ue().content.pages[r.pageIndex]
            }
            bh();
            2 == arguments.length && (a = c);
            var g = a.data("li"),
                h = $(this).data("page");
            if (g && h) {
                h = $("#canvaDocument \x3e .inner \x3e .page").index(h);
                rp(G, h);
                var l, m = !!a.data("isOrganicSearchResult"),
                    n = g.find("a").data("documentProperties"),
                    p = g.find("a").data("layoutProperties"),
                    r = g.find("a").data("pageTemplateRequest"),
                    u = g.find("a").data("pageTemplateRequest"),
                    V = g.find("a").data("pageTemplate"),
                    ra = G.Oa(),
                    Ka = ra.st();
                n && n.previewUrl && (l = n.previewUrl);
                p && p.previewUrl && (l = p.previewUrl);
                if (r || u || V)
                    hL.Kx(ra, Kb).then(function (a) {
                        a && (r ? (ra.clear(),
                            UN(ra, n.previewUrl),
                            a = new Bs({
                                Fk: n.id
                            }),
                            yb.getDocument(a).then(e).then(d)) : u ? (ra.clear(),
                            $.getJSON(u.url, function (a) {
                                (a = a.content.pages[0]) && d(a)
                            })) : V && d(V))
                    });
                else if (0 < g.parents(".backgroundGallery").length)
                    gM(a.data("li")),
                    (h = g.data("result")) && SJ(fK(h, m));
                else if (0 < g.parents(".templateGallery").length) {
                    var ma = g.data("layoutItem"),
                        m = g.data("designItem"),
                        h = g.data("searchResult"),
                        aa = g.parents(".results").data("view"),
                        Oa = g.find("a");
                    uU(aa, Oa, !0);
                    m ? (g = g.data("usablePreview"),
                        vU(aa, m, g)) : ma ? wU(aa, ma) : h && JN(aa, h)
                }
            }
            k.remove();
            a.remove();
            $("#canvaDocument \x3e .inner \x3e .page").removeClass("hotspotHover")
        }
        var k = $('\x3cdiv id\x3d"hotspots"\x3e\x3c/div\x3e'),
            l = parseInt($("#canvaDocument").offset().left, 10),
            m = parseInt($("#canvaDocument").offset().top, 10),
            n = $("#canvaDocument").get(0).scrollTop;
        k.css("left", l).css("top", m - n).css("z-index", "99999").appendTo("#content");
        $("#canvaDocument \x3e .inner \x3e .page").each(function () {
            var a = $(this);
            a.clone().css("width", a.outerWidth()).css("height", a.outerHeight()).data("page", a).empty().appendTo(k)
        });
        if (b) {
            var p = [],
                r = 0,
                u = 0;
            $(".page", k).each(function () {
                var a = $(this).offset(),
                    b = $(this).outerWidth(),
                    c = $(this).outerHeight();
                p.push({
                    element: this,
                    left: a.left,
                    top: a.top,
                    width: b,
                    height: c
                })
            });
            $(document).on("touchmove", c).on("touchend", d)
        } else
            $(".page", k).mouseover(e).mouseout(g).mouseup(h)
    }

    function fR(a) {
        function b() {
            h.data("selectionBox") ? ($("#overlays \x3e .mask").addClass("on"),
                h.addClass("cropping"),
                a.lb(),
                $(".cropControls img.uncropped").css("opacity", .5),
                $(".cropControls .cropBox").css("background-color", "rgba(255, 255, 255, 0.5)"),
                EB($(".cropControls"), a.eb())) : e()
        }

        function c(a) {
            13 === a.which ? d() : 27 === a.which && e()
        }

        function d() {
            var b = a.Y(),
                c = a.N();
            a.Sq();
            b = {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                placeholderIndex: a.Tc(),
                "new": {
                    placeholderBox: a.sd().serialize(),
                    imageBox: a.Xf().serialize(),
                    cropped: !0,
                    left: a.Y(),
                    top: a.N()
                },
                old: {
                    placeholderBox: l.serialize(),
                    imageBox: k.serialize(),
                    cropped: m || a instanceof aB,
                    left: b,
                    top: c
                }
            };
            I.register(new Y(6, b));
            $("#overlays \x3e .mask").removeClass("on");
            $(".cropControls .cropBox").css("background-color", "rgba(255, 255, 255, 0)");
            a.mb();
            LN(h, xc(Kb));
            g();
            T && Cl("crop_confirm")
        }

        function e() {
            a instanceof aB ? (l && al(a, l),
                a.El(k),
                a.jH = !1,
                h.removeClass("cropping")) : (a.El(k),
                a.Sq());
            var b = h.data("toolbar");
            a.zf() && b && b.show();
            $("#overlays \x3e .mask").removeClass("on");
            $(".cropControls .cropBox").css("background-color", "rgba(255, 255, 255, 0)");
            a.mb();
            a.zf() && LN(h, xc(Kb));
            g();
            Cl("crop_cancel")
        }

        function g() {
            $("#content").off("click", ".toolbar--crop .toolbar__button--ok", d).off("click", ".toolbar--crop .toolbar__button--cancel", e);
            $(document).off("keydown", c)
        }
        if (a.gm && a.gL()) {
            var h = a.O(),
                k = a.Xf(),
                l = a.sd(),
                m = !!a.yk;
            $("#content").on("click", ".toolbar--crop .toolbar__button--ok", d).on("click", ".toolbar--crop .toolbar__button--cancel", e);
            $(document).on("keydown", c);
            a.pG(a.Tc(), b)
        }
    }

    function GM() {
        Tg().write(function () {
            $("#overlays .align").removeClass("on")
        })
    }

    function Yg(a, b, c, d, e) {
        function g(a) {
            var b = null;
            if (a instanceof Z || a instanceof bl)
                b = a.ha();
            return b ? hC(H, b) : ah(H)
        }
        cT(a, b, c, function () {
            return W
        }, function (a) {
            return tB(g(a)) + Math.round(a.nc() * W)
        }, function (a) {
            return yB(g(a)) + Math.round(a.xc() * W)
        }, d, e)
    }

    function Xg(a) {
        var b = [];
        void 0 !== a && (a instanceof Z ? b.push(a) : a instanceof Array && (b = a));
        var c = 0 == b.length ? G.Oa() : b[0].ha();
        if (!c)
            return [];
        a = c.xa();
        a = a.filter(function (a) {
            return -1 === b.indexOf(a) && !a.Ac() && !wB(a)
        });
        a.push(c);
        var d = [];
        Rb && Rb() && (d = TO());
        c = VO(c) || [];
        return a.concat(d).concat(c)
    }

    function QM() {
        Tb && UM();
        $("body").addClass("blockDocument");
        bh();
        $("#search").blur()
    }

    function OM() {
        if (Tb) {
            var a = Tb;
            a.CC = !1;
            a.$el.removeClass("blockEditorControls");
            xU(a, a.St)
        }
        $("body").removeClass("blockDocument")
    }

    function qJ(a, b) {
        var c = a.Nh();
        c && fD(a, c + 105 * b / 2);
        a = {
            elementIndex: a.ea(),
            pageIndex: Mo(G, a.ha()),
            "new": {
                borderWidth: a.Nh()
            },
            old: {
                borderWidth: c
            }
        };
        I.register(new Y(No, a))
    }

    function rJ(a, b) {
        var c = a.le();
        b = c + 5 * b;
        0 <= b && 50 >= b && (a.gq(b),
            a = {
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                "new": {
                    spacing: a.le()
                },
                old: {
                    spacing: c
                }
            },
            I.register(new Y(No, a)))
    }

    function pJ(a) {
        var b = a.Nh();
        b ? fD(a, 0) : fD(a, 105);
        a = {
            elementIndex: a.ea(),
            pageIndex: Mo(G, a.ha()),
            "new": {
                borderWidth: a.Nh()
            },
            old: {
                borderWidth: b
            }
        };
        I.register(new Y(No, a))
    }

    function yU(a, b) {
        I.register(new Y(No, {
            elementIndex: a.ea(),
            pageIndex: Mo(G, a.ha()),
            "new": {
                verticalAlignment: a.te || "top"
            },
            old: {
                verticalAlignment: b
            }
        }))
    }

    function zJ(a) {
        var b = a.te || "top";
        a.zP();
        yU(a, b)
    }

    function AJ(a) {
        var b = a.te || "top";
        a.jM();
        yU(a, b)
    }

    function BJ(a) {
        var b = a.te || "top";
        a.qI();
        yU(a, b)
    }

    function tJ(a, b) {
        function c() {
            a.NR && a.NR()
        }

        function d() {
            a.xT && a.xT()
        }

        function e() {
            a.xW && a.xW(0)
        }
        var g = a.qb(a.Ib());
        0 === bz(g) && (1 === b ? rU(d) : -1 === b ? rU(c) : 0 === b && rU(e),
            wz(g, !0))
    }

    function uQ(a) {
        var b = a.kd,
            c = _.sortBy(a.xa(), function (a) {
                return a.N()
            }),
            d = c.filter(function (a) {
                return a !== b
            });
        if (b) {
            a.vf() && a.yw();
            jJ();
            var e = [],
                g;
            if (b instanceof up) {
                var h = b.Ba(),
                    k = c.indexOf(b) - 1,
                    l = c.indexOf(b) + 1;
                g = b.te || "top";
                var m = a.N(),
                    n = h.clone(),
                    p;
                c.length > l && c[l] instanceof up ? (p = h.Ha() - c[l].N(),
                    n.oa(p)) : 1 < c.length && c[k] instanceof up ? (p = c[k].Ha() - h.N(),
                    n.oa(p)) : n.oa(0);
                d.forEach(function (a) {
                    var b = {
                        pageIndex: Mo(G, a.ha())
                    };
                    b.old = a.Ba();
                    e.push(b)
                });
                Object.freeze(d);
                Object.freeze(e);
                a.TN(b, h, n);
                if (0 === a.eb()) {
                    c = m;
                    switch (g) {
                        case "middle":
                            c = m - p / 2;
                            break;
                        case "bottom":
                            c = m - p
                    }
                    g = {
                        elementIndex: a.ea(),
                        pageIndex: Mo(G, a.ha()),
                        "new": {
                            top: c
                        },
                        old: {
                            top: m
                        }
                    };
                    g = new Y(No, g);
                    I.register(g);
                    a.rb(c)
                }
            }
            eM(b);
            a.Ui(b);
            b.remove();
            g = a.Oq(d[0]);
            g.proportionalSetSize = !1;
            g = new Y(No, g);
            I.register(g);
            d.forEach(function (a, b) {
                e[b] && (e[b].elementIndex = a.ea(),
                    e[b]["new"] = a.Ba(),
                    e[b].proportionalSetSize = !1)
            });
            e.forEach(function (a) {
                I.register(new Y(No, a))
            });
            1 === a.xa().length && (jN(a),
                FT(a),
                eN(a));
            kJ()
        }
    }

    function WT(a, b) {
        a.forEach(function (a) {
            a.gg = b
        })
    }

    function DJ() {
        var a = $(".element [contenteditable\x3dtrue]");
        if (1 === a.length) {
            var b = a.data("textChangeCount") || 0;
            if (0 < b && document.execCommand("undo", !1, null)) {
                a.data("textChangeCount", --b);
                return
            }
            Oo()
        }
        a = I;
        if (0 != a.xd.length) {
            a.trigger("beforeOperationStackPop");
            a.DP = !0;
            if (0 < a.Km.length)
                throw Error("cannot undo while a grouped operation is being collected");
            var b = a.xd.pop(),
                c = b.invert();
            c.vn();
            a.Dv.push(b);
            bh();
            RT(aN(c));
            a.DP = !1;
            G.trigger("change")
        }
    }

    function CJ() {
        if (1 === $(".element [contenteditable\x3dtrue]").length) {
            if (document.execCommand("redo", !1, null))
                return;
            Oo()
        }
        var a = I;
        if (0 != a.Dv.length) {
            a.trigger("beforeOperationStackPop");
            a.SN = !0;
            if (0 < a.Km.length)
                throw Error("cannot undo while a grouped operation is being collected");
            var b = a.Dv.pop();
            b.vn();
            a.xd.push(b);
            bh();
            RT(aN(b));
            a.SN = !1;
            G.trigger("change")
        }
    }

    function zU(a) {
        var b = new mN(1, {
                "new": {
                    docType: Ot(a.doctype),
                    doctypeSpec: a.Hk ? wp(a.Hk) : null
                },
                old: {
                    docType: Ot(a.Nb.pb()),
                    doctypeSpec: a.Nb.Hk ? wp(a.Nb.Hk) : null,
                    model: a.Nb.serialize()
                }
            }),
            c = w(a.doctype.getName()),
            d = a.Nb.Jb();
        d.Qt = c;
        d.trigger("change");
        bh();
        a.xd.register(b);
        b.vn()
    };

    function AU(a, b, c) {
        return location.protocol + "//" + location.host + "/design/" + encodeURIComponent(a) + (c ? "/" + encodeURIComponent(c) : "") + (b ? "/" + encodeURIComponent(b) : "")
    }

    function BU(a, b) {
        return AU(a, "view", b)
    }

    function CU(a, b, c, d) {
        return BU(a, b) + "?" + DU(a, c, d)
    }

    function DU(a, b, c) {
        return ["utm_content\x3d" + encodeURIComponent(a), "utm_campaign\x3d" + encodeURIComponent("designshare"), "utm_medium\x3d" + encodeURIComponent(c), "utm_source\x3d" + encodeURIComponent(b)].join("\x26")
    };

    function EU() {}
    EU = Backbone.View.extend({
        className: "switch"
    });
    f = EU.prototype;
    f.events = function () {
        return {
            "blur input": this.Qr,
            "change input": this.O1,
            dragstart: this.Sr,
            "focus input": this.iv,
            mousedown: this.Tr
        }
    };
    f.initialize = function (a) {
        a = _.defaults({}, a, {
            sl: null,
            on: !1,
            Nj: null
        });
        this.sl = a.sl;
        this.ut = void 0 === a.ut || !!a.ut;
        this.xF = this.xF.bind(this);
        this.yF = this.yF.bind(this);
        this.Nj = a.Nj;
        this.OM = a.on
    };

    function FU(a) {
        return !!a.input.prop("checked")
    }
    f.Qr = function () {
        this.$el.removeClass("switchFocused")
    };
    f.O1 = function () {
        var a = FU(this);
        this.$el.toggleClass("switchOn", a);
        this.trigger("toggle", a)
    };
    f.xF = function (a) {
        var b = this.handle.offset().left,
            c = b + this.handle.outerWidth(),
            b = FU(this) && a.pageX < b;
        a = !FU(this) && a.pageX > c;
        if (b || a)
            this.handle.removeClass("switchHandlePressed"),
            GU(this),
            this.toggle()
    };
    f.yF = function (a) {
        $(a.target).closest(this.el).length && (this.trigger("click"),
            this.ut && this.toggle());
        this.handle.removeClass("switchHandlePressed");
        GU(this)
    };
    f.Sr = function (a) {
        a.preventDefault()
    };
    f.iv = function () {
        this.$el.addClass("switchFocused")
    };
    f.Tr = function (a) {
        a.target === this.handle[0] && ($(document).on("mousemove", this.xF),
            this.handle.addClass("switchHandlePressed"));
        $(document).on("mouseup", this.yF)
    };
    f.remove = function () {
        Backbone.View.prototype.remove.call(this);
        GU(this)
    };

    function GU(a) {
        $(document).off({
            mousemove: a.xF,
            mouseup: a.yF
        })
    }
    f.render = function () {
        var a;
        this.OM ? (a = this.OM,
            delete this.OM) : a = !(!this.input || !this.input.prop("checked"));
        var b, c = {
                sl: this.sl,
                Nj: this.Nj
            },
            d, c = c || {};
        soy.asserts.assertType(null == c.Nj || c.Nj instanceof goog.soy.data.SanitizedContent || goog.isString(c.Nj), "onLabel", c.Nj, "null|string|undefined");
        b = c.Nj;
        soy.asserts.assertType(null == c.sl || c.sl instanceof goog.soy.data.SanitizedContent || goog.isString(c.sl), "offLabel", c.sl, "null|string|undefined");
        c = c.sl;
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cinput type\x3d"checkbox"\x3e\x3cdiv class\x3d"switchContent"\x3e\x3cdiv class\x3d"switchLabelOn"\x3e' + soy.$$escapeHtml(null == (d = b) ? "" : d) + '\x3c/div\x3e\x3cdiv class\x3d"switchHandle"\x3e\x3c/div\x3e\x3cdiv class\x3d"switchLabelOff"\x3e' + soy.$$escapeHtml(null == (d = c) ? "" : d) + "\x3c/div\x3e" + (c ? '\x3cdiv class\x3d"switchLabelOffSpacer"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e" : "") + "\x3c/div\x3e");
        this.$el.html(b.toString());
        this.$el.toggleClass("switchOn", a);
        this.handle = this.$(".switchHandle");
        this.input = this.$("input");
        this.input.prop("checked", a);
        return this
    };
    f.toggle = function (a) {
        void 0 === a && (a = !this.input.prop("checked"));
        a !== this.input.prop("checked") && (this.input.prop("checked", a),
            this.input.change())
    };

    function $N(a) {
        function b(a) {
            a.translate(-g.Y(), -g.N());
            im(a, r, u, p);
            a.translate(q, x)
        }
        var c = a.page,
            d = c.Ba(),
            e = function (a) {
                a = Lg(a.tb);
                return new U(0, 0, a.D(), a.F())
            }(a.Pe),
            g = a.zo || d;
        a = g.D();
        var h = g.F(),
            k = e.D(),
            l = e.F(),
            m = k / a,
            n = l / h,
            p = Math.min(m, n),
            r = a / 2,
            u = h / 2,
            v = k / 2,
            y = l / 2,
            q = v - r,
            x = y - u;
        c.xa().forEach(function (a) {
            if (!a.rh && !wB(a)) {
                var c;
                if (a instanceof eB && 1 === a.Zf()) {
                    var g = a.le();
                    c = a.Ba();
                    g = Cm(d.D(), d.F(), g, !1);
                    c = qm(c, g)
                } else
                    c = a instanceof aB ? a.qp() && a.Ac() : !1;
                if (c)
                    a instanceof eB ? (a.yd(Cm(k, l, a.le(), !1)),
                        a.mb()) : a.yd(e.clone());
                else if (a.Ac()) {
                    c = a.Ba();
                    g = 1;
                    b(c);
                    if (m < n)
                        var g = c.N(),
                            h = l - c.Ha(),
                            g = l / (l - 2 * Math.max(0, g, h));
                    else
                        m > n && (g = c.Y(),
                            h = k - c.kb(),
                            g = k / (k - 2 * Math.max(0, g, h)));
                    1 < g && im(c, v, y, g);
                    a.yd(c)
                } else
                    c = a.Ba(),
                    a instanceof up && (g = p * a.dd(0),
                        a.yz() ? a.qe(0, g) : (a.Ij(),
                            a.qe(0, g),
                            a.EP())),
                    b(c),
                    a.yd(c),
                    a instanceof eB && a.mb()
            }
        });
        c.za(k);
        c.oa(l);
        return $g(g.clone(), e)
    };

    function HU() {}
    HU = Backbone.View.extend({
        className: "tileListBusyIndicator"
    });
    f = HU.prototype;
    f.initialize = function () {
        this.transitionDelay = -1;
        this.gH = 0
    };
    f.hide = function () {
        IU(this, function () {
            this.$el.removeClass("tileListBusyIndicatorOn")
        })
    };
    f.render = function () {
        this.$el.html(this.template());
        return this
    };

    function IU(a, b) {
        0 != a.gH && (window.clearTimeout(a.gH),
            a.gH = 0);
        0 <= a.transitionDelay ? a.gH = window.setTimeout(b.bind(a), a.transitionDelay) : b.call(a)
    }
    f.show = function () {
        IU(this, function () {
            this.$el.addClass("tileListBusyIndicatorOn")
        })
    };
    f.template = function () {
        return _.range(8).map(function () {
            return "\x3cspan\x3e\x3c/span\x3e"
        }).join("")
    };

    function JU(a, b) {
        this.$el = a;
        this.cm = b.cm || "";
        this.Mg = b.Mg
    }

    function KU(a) {
        var b = $(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"masonryLayout"\x3e\x3c/div\x3e').toString());
        return new JU(b, a)
    }
    f = JU.prototype;
    f.add = function (a, b) {
        var c = this;
        this.Da || LU(this, this.Xk());
        var d = MU(this);
        this.Da.eq(0).append(a);
        var e = a.get().map(this.F, this);
        a.each(function (a, h) {
            var k = NU(c, d);
            d[k] += e[a];
            b ? c.Da.eq(k).prepend(h) : c.Da.eq(k).append(h)
        })
    };

    function OU(a, b) {
        var c = a.Xk();
        if (void 0 !== b.Da) {
            if (b.Da.length !== c)
                throw Error("Cannot merge masonry layouts with different column counts.");
            a.Da || LU(a, c);
            a.Da.each(function (a, c) {
                b.Da.eq(a).children().appendTo(c)
            })
        }
    }
    f.contains = function (a) {
        return !(!this.Da || !this.Da.children().filter(a).length)
    };

    function LU(a, b) {
        var c = "masonryLayoutColumn " + a.cm;
        a.Da = _.range(b).map(function () {
            return $("\x3cdiv\x3e").addClass(c).width(100 / b + "%")
        }).reduce($.merge);
        a.Da.appendTo(a.$el)
    }
    f.jK = function (a) {
        var b = this.$el.width() / this.Xk();
        return Math.floor(a / b) * this.Xk() + this.Xk()
    };
    f.Xk = function () {
        var a;
        "function" === typeof this.Mg ? (a = this.$el.width(),
            a = this.Mg(a)) : a = this.Mg;
        return Math.max(a, 1)
    };

    function MU(a) {
        return a.Da.get().map(function (a) {
            var c = $(a).children();
            if (!c.length)
                return 0;
            var c = c.last().get(0),
                d = window.getComputedStyle(c),
                d = parseInt(d.marginBottom, 10) || 0;
            return c.getBoundingClientRect().bottom + d - a.getBoundingClientRect().top
        })
    }

    function NU(a, b) {
        b || (b = MU(a));
        return _.min(_.range(b.length), function (a) {
            return b[a]
        })
    }
    f.F = function (a) {
        var b = window.getComputedStyle(a);
        a = a.getBoundingClientRect().height;
        var c = Math.pow(10, 2);
        return Math.round(a * c) / c + (parseInt(b.marginBottom, 10) || 0) + (parseInt(b.marginTop, 10) || 0)
    };
    f.uf = function () {
        var a = this.Da && this.Da.children().get() || [];
        a.sort(function (a, c) {
            return a.offsetTop !== c.offsetTop ? a.offsetTop - c.offsetTop : a.offsetLeft - c.offsetLeft
        });
        return $(a)
    };
    f.ru = function (a) {
        function b(a) {
            return a.offsetHeight + a.offsetTop
        }
        if (!this.contains(a))
            throw Error("The given element is not an item in the masonry layout.");
        var c = b(a[0]);
        return $(this.Da.children().get().filter(function (a) {
            return b(a) > c
        }))
    };
    f.bl = function () {
        if (this.Da) {
            var a = NU(this),
                a = this.Da.get(a);
            return $(a)
        }
        return null
    };
    f.isEmpty = function () {
        return !(this.Da && this.Da.children().length)
    };
    f.push = function (a) {
        this.add(a)
    };
    f.mb = function () {
        var a = this.Xk(),
            a = this.Da && a !== this.Da.length;
        this.Da && a && (a = this.uf().detach(),
            this.Da && this.Da.remove(),
            this.Da = void 0,
            this.push(a),
            this.trigger("redraw"))
    };
    f.remove = function (a) {
        this.Da && this.Da.children().filter(a).remove()
    };
    f.removeAll = function () {
        this.Da && this.Da.children().remove()
    };
    f.split = function (a) {
        if (!this.contains(a))
            throw Error("The given element is not an item in the masonry layout.");
        var b = this.ru(a);
        if (0 === b.length)
            return null;
        var c = KU({
            cm: this.cm,
            Mg: this.Mg
        });
        LU(c, this.Da.length);
        this.Da.each(function (a, e) {
            e = $(e).children().filter(b);
            c.Da.eq(a).append(e)
        });
        return c
    };
    f.unshift = function (a) {
        this.add(a, !0)
    };
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;

    function PU(a) {
        this.children = [];
        this.cm = a.cm;
        this.Mg = a.Mg;
        this.$el = $("\x3cdiv\x3e")
    }
    f = PU.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.trigger = Backbone.Events.trigger;

    function QU(a) {
        return KU({
            cm: a.cm,
            Mg: a.Mg
        })
    }
    f.jK = function (a) {
        var b = this.$el.width() / this.Xk();
        return Math.ceil(a / b) * this.Xk() + this.Xk()
    };
    f.Xk = function () {
        var a;
        "function" === typeof this.Mg ? (a = this.$el.width(),
            a = this.Mg(a)) : a = this.Mg;
        return Math.max(a, 1)
    };
    f.uf = function () {
        var a = [];
        this.children.forEach(function (b) {
            b instanceof JU ? a = a.concat(b.uf().get()) : a.push(b)
        });
        return $(a)
    };

    function RU(a, b) {
        return SU(a).filter(function (a) {
            return a.contains(b)
        })[0] || null
    }

    function SU(a) {
        return a.children.filter(function (a) {
            return a instanceof JU
        })
    }
    f.bl = function () {
        var a = SU(this).slice(-1)[0];
        return a && a.bl() || null
    };

    function TU(a, b, c) {
        var d, e;
        d = RU(a, b);
        if (!d)
            throw Error("The given element is not an item in the masonry layout.");
        c.insertAfter(d.$el);
        e = a.children.indexOf(d);
        a.children.splice(e + 1, 0, c[0]);
        d.ru(b).length && (a.trigger("beforeSplit", d.Da),
            b = d.split(b),
            b.$el.insertAfter(c),
            a.children.splice(e + 2, 0, b),
            a.trigger("afterSplit", d.Da, b.Da))
    }
    f.push = function (a) {
        if (!(this.children.slice(-1)[0] instanceof JU)) {
            var b;
            b = QU(this);
            b.$el.appendTo(this.$el);
            this.children.push(b)
        }
        this.children.slice(-1)[0].push(a)
    };
    f.mb = function () {
        function a() {
            b = !0
        }
        var b = !1;
        SU(this).forEach(function (b) {
            b.on("redraw", a);
            b.mb();
            b.off("redraw", a)
        });
        b && this.trigger("redraw")
    };
    f.remove = function (a) {
        this.children = this.children.reduce(function (b, c) {
            c instanceof JU ? (c.remove(a),
                c.isEmpty() ? c.$el.remove() : b.push(c)) : b.push(c);
            return b
        }, [])
    };

    function UU(a, b) {
        var c = a.children.indexOf(b[0]),
            d, e;
        if (0 > c)
            throw Error("The given element is not a block in the layout.");
        d = a.children[c + 1];
        e = a.children[c - 1];
        d instanceof JU && e instanceof JU && (a.trigger("beforeMerge", e.Da, d.Da),
            OU(e, d),
            d.$el.remove(),
            a.children.splice(a.children.indexOf(d), 1));
        b.remove();
        a.children.splice(c, 1)
    }
    f.unshift = function (a) {
        if (!(this.children[0] instanceof JU)) {
            var b;
            b = QU(this);
            b.$el.prependTo(this.$el);
            this.children.unshift(b)
        }
        this.children[0].unshift(a)
    };

    function VU(a) {
        this.Lo = a;
        this.Y_ = $.isWindow(this.Lo[0]);
        this.hT = _.throttle(this.dispatchEvent.bind(this), 200)
    }
    f = VU.prototype;
    f.eF = function () {
        this.stopListening();
        this.Lo.on("scroll", this.hT)
    };
    f.stopListening = function () {
        this.Lo.off("scroll", this.hT)
    };

    function WU(a, b, c) {
        c = _.defaults({}, c, {
            oL: !1
        });
        var d = b.offset().top;
        c = c.oL ? parseInt(b.css("margin-bottom"), 10) : 0;
        b = b.outerHeight();
        d = d + b + c;
        b = a.Y_ ? a.Lo.scrollTop() : a.Lo.offset().top + parseInt(a.Lo.css("border-top-width"), 10);
        a = a.Lo.innerHeight();
        return d - (b + a)
    }
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;
    f.dispatchEvent = function () {
        this.trigger("scroll", this)
    };

    function XU(a) {
        soy.asserts.assertType(null == a.il || a.il instanceof goog.soy.data.SanitizedContent || goog.isString(a.il), "licensePrice", a.il, "null|string|undefined");
        var b = a.il;
        soy.asserts.assertType(null == a.wp || goog.isBoolean(a.wp) || 1 === a.wp || 0 === a.wp, "licenseFree", a.wp, "boolean|null|undefined");
        var c = a.wp;
        soy.asserts.assertType(goog.isString(a.Ru) || a.Ru instanceof goog.soy.data.SanitizedContent, "licenseWithMarkup", a.Ru, "string|goog.soy.data.SanitizedContent");
        var d = a.Ru;
        soy.asserts.assertType(goog.isString(a.Qu) || a.Qu instanceof goog.soy.data.SanitizedContent, "licenseDescription", a.Qu, "string|goog.soy.data.SanitizedContent");
        var e = a.Qu;
        soy.asserts.assertType(goog.isString(a.Hd) || a.Hd instanceof goog.soy.data.SanitizedContent, "free", a.Hd, "string|goog.soy.data.SanitizedContent");
        a = a.Hd;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli\x3e\x3cdiv class\x3d"license"\x3e\x3cdiv class\x3d"license__name"\x3e' + soy.$$escapeHtml(d) + '\x3c/div\x3e\x3cdiv class\x3d"license__price"\x3e' + (null != c && c ? soy.$$escapeHtml(a) : soy.$$escapeHtml(b)) + '\x3c/div\x3e\x3c/div\x3e\x3cp class\x3d"priceSummary"\x3e' + soy.$$escapeHtml(e) + "\x3c/p\x3e\x3c/li\x3e")
    }

    function YU(a) {
        soy.asserts.assertType(goog.isBoolean(a.QA) || 1 === a.QA || 0 === a.QA, "royaltyFreeEnabled", a.QA, "boolean");
        var b = !!a.QA;
        soy.asserts.assertType(goog.isBoolean(a.sy) || 1 === a.sy || 0 === a.sy, "extendedEnabled", a.sy, "boolean");
        var c = !!a.sy;
        soy.asserts.assertType(null == a.gA || a.gA instanceof goog.soy.data.SanitizedContent || goog.isString(a.gA), "oneUsePrice", a.gA, "null|string|undefined");
        var d = a.gA;
        soy.asserts.assertType(null == a.RA || a.RA instanceof goog.soy.data.SanitizedContent || goog.isString(a.RA), "royaltyFreePrice", a.RA, "null|string|undefined");
        var e = a.RA;
        soy.asserts.assertType(null == a.ty || a.ty instanceof goog.soy.data.SanitizedContent || goog.isString(a.ty), "extendedPrice", a.ty, "null|string|undefined");
        var g = a.ty;
        soy.asserts.assertType(goog.isString(a.Hd) || a.Hd instanceof goog.soy.data.SanitizedContent, "free", a.Hd, "string|goog.soy.data.SanitizedContent");
        var h = a.Hd;
        soy.asserts.assertType(goog.isString(a.jE) || a.jE instanceof goog.soy.data.SanitizedContent, "freeDescription", a.jE, "string|goog.soy.data.SanitizedContent");
        var k = a.jE;
        soy.asserts.assertType(a.fA instanceof soydata.SanitizedHtml || a.fA instanceof soydata.UnsanitizedText || goog.isString(a.fA), "oneTimeUseWithMarkup", a.fA, "soydata.SanitizedHtml");
        var l = a.fA;
        soy.asserts.assertType(goog.isString(a.Vc) || a.Vc instanceof goog.soy.data.SanitizedContent, "oneTimeUseDescription", a.Vc, "string|goog.soy.data.SanitizedContent");
        var m = a.Vc;
        soy.asserts.assertType(goog.isString(a.GC) || a.GC instanceof goog.soy.data.SanitizedContent, "c4wFreeMediaTitle", a.GC, "string|goog.soy.data.SanitizedContent");
        var n = a.GC;
        soy.asserts.assertType(a.SA instanceof soydata.SanitizedHtml || a.SA instanceof soydata.UnsanitizedText || goog.isString(a.SA), "royaltyFreeWithMarkup", a.SA, "soydata.SanitizedHtml");
        var p = a.SA;
        soy.asserts.assertType(goog.isString(a.Xc) || a.Xc instanceof goog.soy.data.SanitizedContent, "royaltyFreeDescription", a.Xc, "string|goog.soy.data.SanitizedContent");
        var r = a.Xc;
        soy.asserts.assertType(a.uy instanceof soydata.SanitizedHtml || a.uy instanceof soydata.UnsanitizedText || goog.isString(a.uy), "extendedWithMarkup", a.uy, "soydata.SanitizedHtml");
        var u = a.uy;
        soy.asserts.assertType(goog.isString(a.Ud) || a.Ud instanceof goog.soy.data.SanitizedContent, "extendedDescription", a.Ud, "string|goog.soy.data.SanitizedContent");
        var v = a.Ud;
        soy.asserts.assertType(null == a.mv || goog.isBoolean(a.mv) || 1 === a.mv || 0 === a.mv, "oneUseFree", a.mv, "boolean|null|undefined");
        var y = a.mv;
        soy.asserts.assertType(null == a.Nv || goog.isBoolean(a.Nv) || 1 === a.Nv || 0 === a.Nv, "royaltyFreeFree", a.Nv, "boolean|null|undefined");
        var q = a.Nv;
        soy.asserts.assertType(null == a.Zt || goog.isBoolean(a.Zt) || 1 === a.Zt || 0 === a.Zt, "extendedFree", a.Zt, "boolean|null|undefined");
        var x = a.Zt;
        soy.asserts.assertType(goog.isBoolean(a.uz) || 1 === a.uz || 0 === a.uz, "isC4wFreeMedia", a.uz, "boolean");
        a = !!a.uz;
        b = "" + (null != d && !y || b && null != e && !q || c && null != g && !x ? "\x3cul\x3e" + (null != d ? (a ? "\x3cli\x3e\x3cp\x3e" + soy.$$escapeHtml(n) + "\x3c/p\x3e\x3c/li\x3e" : "") + XU({
            il: d,
            wp: y,
            Ru: l,
            Qu: m,
            Hd: h
        }) : "") + (b && null != e ? XU({
            il: e,
            wp: q,
            Ru: p,
            Qu: r,
            Hd: h
        }) : "") + (c && null != g ? XU({
            il: g,
            wp: x,
            Ru: u,
            Qu: v,
            Hd: h
        }) : "") + "\x3c/ul\x3e" : "\x3cp\x3e" + soy.$$escapeHtml(h) + '\x3c/p\x3e\x3cp class\x3d"priceSummary"\x3e' + soy.$$escapeHtml(k) + "\x3c/p\x3e");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)
    };

    function zM() {}
    zM = Backbone.View.extend({
        className: "infoPanel",
        template: _.template('\x3ca class\x3d"close" href\x3d"#" title\x3d"\x3c%- close %\x3e"\x3e\x3c%- close %\x3e\x3c/a\x3e\x3ch3 class\x3d"infoPanelTitle"\x3e\x3c%- title %\x3e\x3c/h3\x3e'),
        i6: _.template('\x3ca class\x3d"close" href\x3d"#" title\x3d"\x3c%- close %\x3e"\x3e\x3c%- close %\x3e\x3c/a\x3e\x3ch3 class\x3d"infoPanelTitle"\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3ch4 class\x3d"infoPanelSubtitle brandInfo"\x3e\x3cspan class\x3d"brand"\x3e\x3c/span\x3e\x3cspan class\x3d"spinner on"\x3e\x26hellip;\x3c/span\x3e\x3c/h4\x3e\x3cdiv class\x3d"sectionTitle"\x3e\x3c%- purchase %\x3e\x3c/div\x3e\x3cdiv class\x3d"prices"\x3e\x3c/div\x3e\x3c% if (hasComponentMedia) { %\x3e\x3cdiv class\x3d"sectionTitle"\x3e\x3c%- includedAssets %\x3e\x3c/div\x3e\x3cul class\x3d"componentItems componentMedia threeCol"\x3e\x3c/ul\x3e\x3c% } %\x3e\x3cdiv class\x3d"sectionTitle"\x3e\x3c%- details %\x3e\x3c/div\x3e\x3cdiv class\x3d"details"\x3e\x3cp class\x3d"id"\x3e\x3c%- idTag %\x3e\x3ca target\x3d"_blank" href\x3d"\x3c%- url %\x3e"\x3e\x3c%- id %\x3e\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e\x3c% if (hasKeywords) { %\x3e\x3cdiv class\x3d"sectionTitle"\x3e\x3c%- keywords %\x3e\x3c/div\x3e\x3cp class\x3d"keywords"\x3e\x3c/p\x3e\x3c% } %\x3e'),
        q_: _.template('\x3ca class\x3d"close" href\x3d"#" title\x3d"\x3c%- closeThisInfoPanel %\x3e"\x3e\x3c%- close %\x3e\x3c/a\x3e\x3ch3 class\x3d"infoPanelTitle"\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3ch4 class\x3d"infoPanelSubtitle layoutsInfo"\x3e\x3cspan class\x3d"infoPanelLayoutsCount"\x3e\x3c%- count %\x3e\x3c/span\x3e\x3c/h4\x3e\x3c% if (hasComponentDesignPages) { %\x3e\x3cul class\x3d"componentItems componentLayouts twoCol"\x3e\x3c/ul\x3e\x3c% } %\x3e'),
        C1: _.template('\x3ca class\x3d"close" href\x3d"#" title\x3d"\x3c%- closeThisInfoPanel %\x3e"\x3e\x3c%- close %\x3e\x3c/a\x3e\x3ch3 class\x3d"infoPanelTitle"\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3ch4 class\x3d"infoPanelSubtitle brandInfo layoutsInfo"\x3e\x3cspan class\x3d"infoPanelLayoutsCount"\x3e\x3c%- count %\x3e\x3c/span\x3e \x3cspan class\x3d"brand"\x3e\x3c/span\x3e\x3cspan class\x3d"spinner on"\x3e\x26hellip;\x3c/span\x3e\x3c/h4\x3e\x3cul class\x3d"componentItems componentLayouts twoCol"\x3e\x3c/ul\x3e'),
        G7: _.template('\x3ca class\x3d"close" href\x3d"#" title\x3d"\x3c%- closeThisInfoPanel %\x3e"\x3e\x3c%- close %\x3e\x3c/a\x3e\x3ch3 class\x3d"infoPanelTitle"\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3c% if (isUnapproved) { %\x3e\x3cp class\x3d"unapproved error"\x3e\x3c%- uploadError %\x3e\x3cbr\x3e\x3c%- imageRequirementsTitle %\x3e\x3c/p\x3e\x3cul class\x3d"unapproved error"\x3e\x3cli\x3e\x3c%- imageRequirementsSize %\x3e\x3c/li\x3e\x3cli\x3e\x3c%- imageRequirementsExt %\x3e\x3c/li\x3e\x3cli\x3e\x3c%- imageRequirementsRgb %\x3e\x3c/li\x3e\x3c/ul\x3e\x3c% } %\x3e\x3cp class\x3d"delete removeUpload" data-media-id\x3d"\x3c%- id %\x3e" data-version\x3d"\x3c%- version %\x3e"\x3e\x3cspan class\x3d"icon" title\x3d"\x3c%- deleteMsg %\x3e"\x3e\x3c/span\x3e\x3c%- deleteMsg %\x3e\x3c/p\x3e'),
        OI: _.template('\x3cli class\x3d"componentItem fetchingComponentItem componentItem\x3c%- id %\x3e"\x3e\x3cspan class\x3d"componentItemLinkLoading"\x3e\x3c/span\x3e\x3ca class\x3d"componentItemLink" target\x3d"_blank" href\x3d"\x3c%- url %\x3e"\x3e\x3c%- id %\x3e\x3c/a\x3e\x3c% if (hasPrice) { %\x3e\x3cspan class\x3d"componentItemPrice"\x3e\x3c%- price %\x3e\x3c/span\x3e\x3c% } %\x3e\x3c/li\x3e'),
        Y0: _.template('\x3cspan class\x3d"mediaKeyword"\x3e\x3c%- keyword %\x3e\x3c/span\x3e', {
            variable: "keyword"
        })
    });
    f = zM.prototype;
    f.initialize = function (a) {
        this.u = a.u;
        this.ja = a.ja;
        this.da = jc(a.u);
        this.title = a.title || this.model.Jb && this.model.Jb() || Jd(this.da);
        this.document = null;
        this.nb = a.nb;
        this.JL = a.JL;
        this.Dj = a.Dj;
        this.GL = a.GL;
        this.uL = a.uL;
        this.IL = a.IL;
        this.SM = a.SM;
        this.Yb = a.Yb;
        this.Ir = a.Ir;
        this.xo = new Map;
        this.RG = a.RG
    };
    f.events = function () {
        return {
            "mousedown .componentLayouts .componentItem a": this.F_,
            "click .componentLayouts .componentItem a": this.$Q,
            "click .brandInfo a": this.d6,
            "click .mediaKeyword": this.g6,
            "click .removeUpload": this.C5,
            "click .close": this.close
        }
    };
    f.render = function () {
        this.$el.html(this.template({
            title: this.title,
            close: Hd(this.da)
        }));
        if (this.JL)
            this.$el.html(this.G7({
                title: this.title || Jd(this.da),
                id: this.model.G(),
                version: this.model.getVersion(),
                isUnapproved: this.IL,
                close: Hd(this.da),
                closeThisInfoPanel: Id(this.da),
                uploadError: this.da.format("objectPanelInfoUploadError"),
                imageRequirementsTitle: this.da.format("objectPanelInfoImageRequirementsTitle"),
                imageRequirementsSize: this.da.format("objectPanelInfoImageRequirementsSize"),
                imageRequirementsExt: this.da.format("objectPanelInfoImageRequirementsExt"),
                imageRequirementsRgb: this.da.format("objectPanelInfoImageRequirementsRgb"),
                deleteMsg: this.da.format("objectPanelInfoDelete")
            }));
        else if (this.uL)
            this.$el.html(this.q_({
                title: this.title,
                count: Kd(this.da, Number(this.model.Ue().pageCount)),
                hasComponentDesignPages: this.lT(),
                close: Hd(this.da),
                closeThisInfoPanel: Id(this.da)
            })),
            this.lT() && ZU(this);
        else if (this.Dj)
            this.$el.html(this.C1({
                title: this.title,
                count: Kd(this.da, Number(this.model.wc())),
                close: Hd(this.da),
                closeThisInfoPanel: Id(this.da)
            })),
            YJ(this.model) && 0 < this.model.wc() && $U(this);
        else if (this.GL) {
            this.$el.html(this.i6({
                title: this.title,
                id: this.model.G(),
                url: "/media/" + encodeURIComponent(this.model.G()),
                hasComponentMedia: this.dL(),
                hasKeywords: this.mT(),
                close: Hd(this.da),
                purchase: this.da.format("objectPanelInfoPurchase"),
                includedAssets: this.da.format("objectPanelInfoIncludedAssets"),
                details: this.da.format("objectPanelInfoDetails"),
                keywords: this.da.format("objectPanelInfoKeywords"),
                idTag: this.da.format("objectPanelInfoIDTag")
            }));
            if (this.mT()) {
                var a = this.model.Zk().map(this.Y0).join(", ");
                this.$(".keywords").html(a)
            }
            this.dL() && aV(this);
            this.model.wa && this.model.wa() && bV(this);
            var b, c, d = 0;
            this.dL() ? (d = this.model.sE() / 100,
                a = 0 === d ? 0 : 100) : a = VJ(this.model);
            b = 10 * a;
            c = 100 * a;
            this.$(".prices").html(YU({
                QA: !1,
                sy: !1,
                gA: cV(this, a, d),
                RA: cV(this, b, d),
                ty: cV(this, c, d),
                Hd: this.da.format("objectPanelInfoFree"),
                jE: this.da.format("objectPanelInfoFreeDescription"),
                fA: this.da.format("objectPanelInfoOneUse"),
                Vc: this.da.format("objectPanelInfoOneUsePriceDescription"),
                GC: this.da.format("objectPanelInfoC4WFreeMedia"),
                SA: this.da.Pc(),
                Xc: this.da.format("objectPanelInfoRoyaltyFreePriceDescription"),
                uy: this.da.Fd(),
                Ud: this.da.format("objectPanelInfoExtendedPriceDescription"),
                mv: 0 === a,
                Nv: 0 === b,
                Zt: 0 === c,
                uz: this.model.Ku()
            }).toString())
        }
        return this
    };

    function aV(a) {
        function b(a, b) {
            function d() {
                var a = $(this).attr("src");
                $(this).remove();
                k++;
                u.removeClass("fetchingComponentItem");
                u.find(".componentItemLink").css("background-image", "url(" + a + ")");
                k >= h && dV(c)
            }
            if (200 === a) {
                a = 0;
                var e = b.Va().Dc(),
                    e = e.THUMBNAIL_LARGE || e[aC],
                    g = YD(b.Va());
                g && (a = 100 * YD(b.Va()).ONE_USE || 0);
                var u = $(c.OI({
                    url: "/media/" + b.G(),
                    id: b.G(),
                    hasPrice: g,
                    price: eV(c, a)
                }));
                c.$(".componentMedia").append(u);
                $("\x3cimg/\x3e").attr("src", e.Aa()).one("load", d)
            }
        }
        var c = a,
            d = a.model.IK(),
            e = Math.ceil(d.length / 3),
            g = .21 * $(".infoPanelGallery").width() + 20;
        a = a.$(".componentMedia");
        var h = d.length,
            k = 0;
        fV(c);
        a.css("height", e * g + "px");
        d.forEach(function (a) {
            Bb.ac(a.id, (new jC).jk(a.version), b)
        })
    }

    function gV(a, b) {
        function c() {
            return null
        }
        var d = Cb.wa(a.model.wa()).catch(c);
        a = "DESIGN" == WJ(a.model) && a.model.Qa && a.model.Qa() ? Cb.Qa(a.model.Qa()).then(function (a) {
            return a.Tb() || a.rg()
        }).catch(c) : a.model.QS();
        P.all([d, a]).spread(b)
    }

    function bV(a) {
        gV(a, function (b, c) {
            var d = "DESIGN" == WJ(a.model) ? $("\x3cspan\x3e") : $("\x3ca\x3e").attr("href", "#");
            if (b) {
                var e = b.Tb() || b.HK(),
                    g = a.da.format("objectPanelInfoBrand") + " " + b.G();
                c ? b.Ph() && !e ? d.text(a.da.format("objectPanelInfoByUser", c)) : d.text(a.da.format("objectPanelInfoByUserFromBrand", c, e || g)) : d.text(a.da.format("objectPanelInfoByBrand", e || g))
            } else
                d.text(a.da.format("objectPanelInfoByUnknownBrand"));
            a.$(".brandInfo .brand").append(d).addClass("on");
            a.$(".brandInfo .infoPanelLayoutsCount").addClass("on");
            a.$(".brandInfo .spinner").removeClass("on").addClass("off")
        })
    }

    function $U(a) {
        function b(a) {
            var b = d.model.getFile("THUMBNAIL_LARGE", a) || d.model.getFile(aC, a),
                c = "https://static.canva.com/static/images/default_thumbnail.gif",
                e = $(d.OI({
                    url: "#",
                    id: a,
                    hasPrice: !1
                })).css("padding-top", d.RG * l * 100 + "%");
            b && (c = b.url);
            g.append(e);
            $("\x3cimg/\x3e").attr("src", c).one("load", function () {
                var a = $(this).attr("src");
                $(this).remove();
                h++;
                e.removeClass("fetchingComponentItem");
                e.find(".componentItemLink").css("background-image", "url(" + a + ")");
                h >= k && dV(d)
            })
        }

        function c(a, b) {
            var c = [];
            Array.isArray(b.media) && (c = b.media.map(Ja).map(Gm));
            0 < c.length && (b = fE(new eE, c).XB(),
                FD(Bb, b, function (b, c) {
                    var e = 0;
                    200 === b && (e = c.media.reduce(function (a, b) {
                        return a + (YD(b.Va()).ONE_USE || 0)
                    }, 0));
                    0 !== e && d.$(".componentLayouts .componentItem" + a).append('\x3cspan class\x3d"componentItemPrice unlistedPrice"\x3e$\x3c/span\x3e')
                }))
        }
        var d = a,
            e = a.model.wc(),
            g = a.$(".componentLayouts"),
            h = 0,
            k = e,
            e = $(".infoPanelGallery").width(),
            l = (e - 10) / e / 2;
        fV(a);
        bV(a);
        XJ(a.model).sort(function (a, b) {
            return a - b
        }).forEach(function (a) {
            b(a);
            hV(d, a, function (b) {
                c(a, b)
            })
        })
    }

    function ZU(a) {
        function b(a) {
            var b = !1,
                d = "https://static.canva.com/static/images/default_thumbnail.gif";
            e[a] && (b = !0,
                d = e[a].url);
            var m = $(c.OI({
                url: "#",
                id: a,
                hasPrice: !1
            })).css("padding-top", c.RG * n * 100 + "%");
            m.toggleClass("componentItemThumbnailUpdating", !b || g);
            h.append(m);
            $("\x3cimg/\x3e").attr("src", d).one("load", function () {
                var a = $(this).attr("src");
                $(this).remove();
                k++;
                m.removeClass("fetchingComponentItem");
                m.find(".componentItemLink").css("background-image", "url(" + a + ")");
                k >= l && dV(c)
            })
        }
        var c = a,
            d = a.model.Ue().imageSets.thumbnail,
            e = d.images,
            g = a.model.getVersion() > d.version,
            d = a.model.Ue().pageCount,
            h = a.$(".componentLayouts"),
            k = 0,
            l = d,
            m = $(".infoPanelGallery").width(),
            n = (m - 10) / m / 2;
        fV(a);
        for (a = 0; a < d; a++)
            b(a)
    }

    function fV(a) {
        a.$el.addClass("infoPanelLoading")
    }

    function dV(a) {
        window.setTimeout(function () {
            a.$el.removeClass("infoPanelLoading").addClass("infoPanelLoaded")
        }, J.Na.N0)
    }
    f.mT = function () {
        return this.model.Zk && 0 < (this.model.Zk() || []).length
    };
    f.lT = function () {
        return this.model.Ue && 1 < this.model.Ue().pageCount
    };
    f.dL = function () {
        return this.model.IK && 0 < (this.model.IK() || []).length
    };

    function cV(a, b, c) {
        return null === b ? null : 0 === b ? a.da.format("objectPanelInfoFree") : null != c && 0 < c ? a.da.format("objectPanelInfoComponentsPrice", c, (b / 100).toFixed(0)) : a.da.format("objectPanelInfoPrice", (b / 100).toFixed(0))
    }

    function eV(a, b) {
        b = cV(a, b);
        null === b && (b = a.da.format("objectPanelInfoPriceUnavailable"));
        return b
    }
    f.close = function () {
        BM.call(this.$(".close").get(0))
    };
    f.d6 = function () {
        $("#search").val("brand:" + this.model.wa());
        GL = null;
        eL(this.u)
    };
    f.g6 = function (a) {
        $("#search").val(a.currentTarget.textContent);
        GL = null;
        eL(this.u)
    };
    f.C5 = function (a) {
        this.close(a);
        a = (new JD).io(this.model.G()).jk(this.model.getVersion()).Zs(!0);
        HD(Bb, a, this.SM)
    };
    f.TK = function (a) {
        var b;
        if (!(this.model instanceof Pq))
            throw Error("attempted to get a page from a non-design");
        try {
            b = this.model.Ue().content.pages[a]
        } catch (c) {}
        if (!b && this.document)
            try {
                b = this.document.Ue().content.pages[a]
            } catch (c) {}
        b ? this.Yb && this.Ir && (a = {},
            a[this.Ir.$b()] = "#" + this.Yb,
            b = iV(null, b, a)) : b = null;
        return b
    };

    function hV(a, b, c) {
        var d = a.model.getFile("ORIGINAL", b).Aa();
        $.getJSON(d, function (d) {
            a.xo.set(b, d);
            c && c(d)
        })
    }

    function jV(a, b) {
        if (a = a.xo.get(b))
            return a.content.pages[0]
    }

    function kV(a) {
        var b = new Bs({
            Fk: a.model.G(),
            OE: !0
        });
        return a.nb.getDocument(b).then(function (a) {
                return this.document = a.getDocument()
            }
            .bind(a))
    }
    f.$Q = function (a, b) {
        function c(a) {
            function b() {
                $N({
                    zo: ZN(v),
                    Pe: G.pb(),
                    page: v
                });
                c(v.serialize())
            }

            function c(b) {
                var g = {};
                a.layout && (g.id = a.layout.id,
                    g.version = a.layout.version);
                d.model instanceof UJ && (g.id = d.model.G(),
                    g.version = d.model.getVersion());
                b = zm(new xm(g), b);
                var g = {
                        "new": b,
                        old: l,
                        pageIndex: h.ea()
                    },
                    n = Np(b.xg()),
                    p = T,
                    u = b.serialize();
                !n && p && u && Bl(p, u.id);
                kN(h, b, k, e);
                I.register(new iN(4, g))
            }
            if (d.model instanceof Pq) {
                var e = new Dm({
                    type: kA,
                    id: d.model.G(),
                    version: d.model.getVersion()
                });
                tU(a, e)
            }
            if (a.width !== h.D() || a.height !== h.F()) {
                var g = zm(new xm, a),
                    v = new qp(G, {});
                kN(v, g, null, null, !0);
                d.listenToOnce(v, "unpacked", b)
            } else
                c(a)
        }
        var d = this,
            e = parseInt(a.currentTarget.textContent, 10),
            g = this.Dj ? jV(this, e) : this.TK(e),
            h = G.Oa();
        if (b) {
            var k = this.model instanceof Pq ? Qq(this.model, e) : this.model.getFile(aC, e).Aa(),
                l = h.st();
            h.clear();
            k && UN(h, k);
            g ? c(g) : this.Dj ? hV(this, e, function (a) {
                return c(a)
            }) : kV(this).then(this.TK.bind(this, e)).then(c.bind(this))
        } else
            hL.Kx(h, this.u).then(function (b) {
                    b && this.$Q(a, !0)
                }
                .bind(this))
    };
    f.F_ = function (a) {
        var b, c, d, e = parseInt($(a.currentTarget).text(), 10),
            g = {
                url: "https://static.canva.com/static/images/default_thumbnail.gif"
            };
        this.Dj ? (b = jV(this, e),
            c = this.model.getFile("THUMBNAIL_LARGE", e) || this.model.getFile(aC, e),
            d = {
                url: c.Aa()
            },
            c = {
                draft: {
                    content: {
                        pages: []
                    },
                    imageSets: {
                        thumbnail: {
                            images: [d || g]
                        }
                    }
                }
            }) : (b = this.TK(e),
            c = $.extend(!0, {}, this.model),
            d = c.draft.imageSets.thumbnail.images[e],
            c.draft.imageSets.thumbnail.images[0] = d || g);
        b ? (c.draft.content.pages = [],
            c.draft.content.pages[0] = $.extend(!0, {}, b),
            b = {
                pageTemplate: b
            }) : b = this.Dj ? {
            cdfRequest: {
                url: this.model.getFile("ORIGINAL", e).Aa()
            }
        } : {
            pageTemplateRequest: {
                pageIndex: e
            }
        };
        this.model instanceof Pq ? b.documentProperties = {
            id: this.model.G(),
            version: this.model.getVersion(),
            previewUrl: Qq(this.model, e)
        } : this.model instanceof UJ && (b.layoutProperties = {
            id: this.model.G(),
            version: this.model.getVersion(),
            previewUrl: this.model.getFile(aC, e).Aa()
        });
        e = lV(jk(c), jc(this.u));
        e.$el.children("a").data(b).css("width", $(a.currentTarget).css("width")).css("height", $(a.currentTarget).css("height"));
        $(a.currentTarget).parents("li").data("view", e);
        return BL.call(a.currentTarget, a)
    };

    function lV(a, b, c) {
        if (a instanceof UJ)
            return "DESIGN" === WJ(a) && mV(function () {
                    a.sj()
                }),
                new qO({
                    model: a,
                    query: c || void 0,
                    da: b,
                    ja: Ib
                });
        if (a instanceof zH)
            return new nV({
                model: a
            });
        if (a instanceof Pq)
            return new oV({
                model: a
            });
        if ("string" === typeof a && -1 < _.keys(vm).indexOf(a))
            return new pV({
                model: a
            });
        if ("string" === typeof a && -1 < _.keys(wm).indexOf(a))
            return new qV({
                model: a,
                da: b
            });
        throw new TypeError("Unknown galleryObject type: " + typeof a);
    }
    var mV = function () {
        var a = Date.now();
        return function (b) {
            var c = Date.now(),
                d = Math.max(0, 500 - (c - a));
            window.setTimeout(b, d);
            a = c + d
        }
    }();

    function rV() {}
    rV = Backbone.View.extend({});
    rV.R8 = function () {};
    rV.prototype.xc = function () {
        return Math.round(this.$el.offset().top)
    };
    rV.prototype.ud = function () {
        return Math.round(this.$el.offset().top + this.$el.height())
    };

    function sV(a) {
        return Math.round(parseInt(a.$el.css("left"), 10) + a.$el.width() / 2)
    }
    rV.prototype.Kg = function (a, b) {
        b ? this.$el.css("top", "+\x3d" + a) : this.$el.addClass("doNotTransition").css("top", "+\x3d" + a).removeClass("doNotTransition")
    };

    function tV(a, b, c) {
        var d = a.$el.data("originalTop");
        c ? a.$el.css("top", d + b) : a.$el.addClass("doNotTransition").css("top", d + b).removeClass("doNotTransition")
    }
    rV.prototype.Px = function () {
        var a = this.$el.children("a"),
            b = a.offset(),
            c = a.width(),
            d = a.height(),
            e = $('\x3cdiv class\x3d"clone"\x3e\x3c/div\x3e'),
            a = a.children().first().clone();
        a.hasClass("multiPageLayoutItem") && (a = a.find("img"));
        a.css("width", c).css("height", d).appendTo(e);
        e.data("li", this.$el).css("left", b.left).css("top", b.top).css("width", c).css("height", d);
        return e
    };

    function pV() {}
    pV = rV.extend({
        tagName: "li",
        className: "newSearch grid",
        template: _.template('\x3ca href\x3d"#"\x3e\x3c/a\x3e')
    });
    pV.prototype.initialize = function (a) {
        this.eT = this.model;
        this.r0 = vm[this.eT];
        !a.el && this.render();
        this.$el.data("view", this)
    };
    pV.prototype.render = function () {
        this.$el.html(this.template()).attr("data-grid-name", this.eT);
        this.$("a").append(iD(this.r0.items));
        return this
    };

    function qV() {}
    qV = rV.extend({
        tagName: "li",
        className: "newSearch chart",
        template: _.template('\x3ca href\x3d"#"\x3e\x3c/a\x3e')
    });
    qV.prototype.initialize = function (a) {
        this.da = a.da;
        this.sR = this.model;
        this.fZ = JSON.parse(JSON.stringify(wm[this.sR]));
        !a.el && this.render();
        this.$el.data("view", this)
    };
    qV.prototype.render = function () {
        this.$el.html(this.template()).attr("data-chart-name", this.sR);
        var a = kG(this.fZ);
        a.setAttribute("style", "max-height: 72px");
        this.$("a").append(a);
        this.$("a").append('\x3cspan class\x3d"edit"\x3e' + this.da.format("objectPanelInfoEdit") + "\x3c/span\x3e");
        return this
    };

    function nV() {}
    nV = rV.extend({
        tagName: "li",
        className: "newSearch loading",
        template: _.template('\x3ca href\x3d"#" title\x3d"\x3c%\x3d name %\x3e"\x3e\x3cimg src\x3d"\x3c%\x3d thumbnail.url %\x3e" width\x3d"\x3c%\x3d thumbnail.width %\x3e" height\x3d"\x3c%\x3d thumbnail.height %\x3e" \x3e\x3c/a\x3e'),
        s0: _.template('\x3ca href\x3d"#" title\x3d"\x3c%\x3d name %\x3e"\x3e\x3c/a\x3e')
    });
    nV.prototype.initialize = function (a) {
        !a.el && this.render();
        this.$el.data("view", this)
    };
    nV.prototype.render = function () {
        var a = this,
            b = this.model.getContent();
        AH(this.model) ? (this.$el.addClass("grid").html(this.s0(this.model)),
            this.$("a").append(iD(b.elements[0].items)),
            this.$el.removeClass("loading")) : (this.$el.html(this.template(this.model)),
            this.$("img").on("load", function () {
                a.$el.removeClass("loading")
            }));
        this.$el.data("layoutItem", this.model);
        return this
    };
    nV.prototype.Px = function () {
        var a = rV.prototype.Px.call(this),
            b = a.children().first();
        a.addClass("template");
        AH(this.model) && (a.addClass("draggableGridItem dragging"),
            b.find(".item \x3e .content").addBack().css("left", 1).css("right", 1).css("top", 1).css("bottom", 1));
        return a
    };

    function oV() {}
    oV = nV.extend({
        className: "designGalleryItem newSearch loading",
        tagName: "li"
    });
    oV.prototype.initialize = function () {
        this.render()
    };
    oV.prototype.render = function () {
        var a = this,
            b = this.model.draft,
            c = uV(this);
        this.$el.data({
            designItem: this.model,
            usablePreview: c,
            view: this
        });
        this.$el.html(this.template({
            pageCount: b.pageCount,
            name: b.content.title,
            thumbnail: Aq(a.model.draft.imageSets.thumbnail)
        }));
        this.$el.toggleClass("designItemThumbnailUpdating", c);
        this.$("img").on("load", function () {
            a.$el.removeClass("loading")
        });
        return this
    };

    function uV(a) {
        var b;
        try {
            b = a.model.Ue().imageSets.thumbnail.version
        } catch (c) {
            b = -1
        }
        return a.model.getVersion() > b
    }
    oV.prototype.Px = function () {
        var a, b, c;
        a = rV.prototype.Px.call(this);
        a.addClass("template");
        b = a.find(".designItem");
        1 === b.length && (c = a.find("img"),
            c.css("width", a.width()),
            c.css("height", a.height()),
            b.remove(),
            a.append(c));
        return a
    };
    oV.prototype.template = _.template('\x3ca href\x3d"#" title\x3d"\x3c%\x3d name %\x3e"\x3e\x3c% if (pageCount \x3e 1) { %\x3e\x3cdiv class\x3d"designItem multiPageDesignItem" style\x3d"background-image: url(\x3c%\x3d thumbnail.images[0].url %\x3e);"\x3e\x3cdiv class\x3d"multiPageDesignItemPageCount"\x3e\x3c%\x3d pageCount %\x3e\x3c/div\x3e\x3cimg src\x3d"\x3c%\x3d thumbnail.images[0].url %\x3e" width\x3d"\x3c%\x3d thumbnail.width %\x3e" height\x3d"\x3c%\x3d thumbnail.height %\x3e" \x3e\x3c/div\x3e\x3c% } else { %\x3e\x3cimg src\x3d"\x3c%\x3d thumbnail.images[0].url %\x3e" width\x3d"\x3c%\x3d thumbnail.width %\x3e" height\x3d"\x3c%\x3d thumbnail.height %\x3e" \x3e\x3c% } %\x3e\x3c/a\x3e');

    function qO() {}
    qO = rV.extend();
    qO.prototype.initialize = function (a) {
        this.Ei = new dh(window.viewConfig);
        this.query = a.query;
        this.da = a.da;
        this.ja = a.ja;
        this.render()
    };
    qO.prototype.render = function () {
        this.$el = this.createElement();
        this.$el.data("view", this);
        this.$el.data("searchResult", this.model);
        this.$el.data("result", this.model);
        return this
    };
    qO.prototype.Dj = function () {
        return YJ(this.model)
    };
    qO.prototype.createElement = function () {
        function a() {
            var a;
            if (c.query && /^\w+$/.test(c.query)) {
                var b = c.query.toLowerCase();
                a = c.model.XK();
                var e = !1;
                if (a)
                    for (var g = 0; g < a.length; g++)
                        if (a[g].toLowerCase() == b) {
                            e = !0;
                            break
                        }
                a = '\x3cspan class\x3d"superKeyword ' + (e ? "superHit" : "superMiss") + '" title\x3d"' + (e ? "Remove superKeyword " : "Add superKeyword ") + "'" + b + "'\" \x3eS\x3c/span\x3e ";
                d.data("superKeywordAdd", !e);
                d.data("query", b);
                d.find(".searchResultItem__info").append($(a))
            }
        }

        function b() {
            var a = $('\x3cdiv class\x3d"multiPageLayoutItem"\x3e\x3c/div\x3e'),
                b = $('\x3cdiv class\x3d"multiPageLayoutItemPageCount"\x3e\x3c/div\x3e'),
                e = c.model.getFile("THUMBNAIL_LARGE", 0) || c.model.getFile(aC, 0);
            a.css("background-image", "url(" + e.Aa() + ")");
            b.text(String(c.model.wc()));
            d.find("a \x3e *").wrapAll(a);
            d.find(".multiPageLayoutItem").append(b)
        }
        var c = this,
            d = $('\x3cli class\x3d"newSearch loading"\x3e\x3ca href\x3d"#"\x3e\x3cimg\x3e\x3c/a\x3e\x3c/li\x3e'),
            e = this.model.getFile("THUMBNAIL_LARGE") || this.model.getFile(aC),
            g = this.model.getFile(Fg),
            h = this.da.format("objectPanelSearchResultItemViewShowMoreInfo");
        switch (WJ(this.model)) {
            case "ELEMENT_GROUP":
                qO.e7(function () {
                    c.model.sj()
                });
                d.addClass("elementGroupSearchResult");
                break;
            case Bg:
                d.addClass("vectorSearchResult");
                break;
            case zg:
                d.addClass("rasterSearchResult")
        }
        (function () {
            var a = $("img", d);
            OB(PB, a, e.Aa()).then(function () {
                d.removeClass("loading")
            }).catch(function () {
                var a = c;
                a.$el.addClass("failed");
                a.$el.find(".multiPageLayoutItem").removeClass("multiPageLayoutItem");
                a.$el.find(".multiPageLayoutItemPageCount").remove();
                a.$el.find(".price").remove();
                a.$el.find(".info").remove()
            });
            a.data("screen-url", g.Aa()).data("screen-width", g.D()).data("screen-height", g.F()).attr("width", e.D()).attr("height", e.F());
            WJ(c.model) === Bg && (c.model.Ty() ? a.addClass("graphic") : a.addClass("svg"))
        })();
        (function () {
            var a = VJ(c.model),
                b = (a / 100).toFixed(0),
                e = c.model.sE(),
                g = !!c.ja.ba.get(hg) && c.model.Ku(),
                a = (e = !!e) && "$" || (0 === a || g) && Ud(c.da) || vV(c) && c.da.format("objectPanelMediaItemCostPro") || null !== a && "$" + b + " USD" || null;
            $("a", d).append(wV({
                Hs: h,
                Nf: e,
                qf: xV(c) || vV(c) || g,
                Za: a
            }).toString())
        })();
        c.Dj() && (b(),
            $(".info", d).remove());
        "CANVA" !== c.model.Ve() && $(".info", d).remove();
        c.model.restricted || c.model.status == LD || ($(".info", d).remove(),
            $(".price", d).remove(),
            $("img", d).addClass("inMarketplaceReview"));
        this.Ei.hg.get("quickKeywordEditEnabled", void 0) && a();
        return d
    };

    function xV(a) {
        if (0 !== VJ(a.model) || ["text", "lines", "shapes", "frames", "Canva"].some(function (b) {
                return b === a.query
            }))
            return !1;
        switch (WJ(a.model)) {
            case "DESIGN":
                return a.ja.ba.get(dg);
            case zg:
                return a.ja.ba.get(ig);
            case Bg:
                return a.ja.ba.get(ig);
            default:
                return !1
        }
    }

    function vV(a) {
        var b = VJ(a.model);
        if (!a.model.Ku() || 0 === b || null == b)
            return !1;
        switch (WJ(a.model)) {
            case zg:
                return a.ja.ba.get(lg);
            case Bg:
                return a.ja.ba.get(lg);
            default:
                return !1
        }
    }
    qO.e7 = function () {
        var a = Date.now();
        return function (b) {
            var c = Date.now(),
                d = Math.max(0, 500 - (c - a));
            window.setTimeout(b, d);
            a = c + d
        }
    }();

    function yV() {}
    yV = Backbone.View.extend({
        className: "searchGroup"
    });
    f = yV.prototype;
    f.initialize = function (a) {
        this.hu = a.hu;
        this.MS = [];
        this.Ov = a.model;
        this.listenTo(this.Ov, {
            "results:willFetch": this.VB,
            "results:didFetch": this.Zq,
            "results:clear": this.lZ
        });
        this.u = a.u;
        this.YN = !1;
        a.el || this.render();
        this.$el.data("view", this)
    };
    f.render = function () {
        this.$el.html(this.template({
            title: this.Ov.Jb()
        }));
        this.$(".gallery").addClass(this.hu);
        "" === this.Ov.Jb() && this.$("h2").remove();
        return this
    };
    f.VB = function () {};
    f.Zq = function (a, b, c) {
        function d(b) {
            return lV(b, p, a.x5)
        }

        function e(a) {
            a.$el.appendTo(n)
        }

        function g(a) {
            return a instanceof UJ && "DESIGN" === WJ(a)
        }

        function h(a) {
            return a instanceof pV
        }

        function k(a) {
            return a instanceof qV
        }

        function l(a) {
            return a instanceof nV
        }

        function m() {
            n.addClass("templateGallery").removeClass("photoGallery")
        }
        var n, p = jc(this.u);
        c || (n = this.$(".gallery"),
            this.$el.addClass("hasContent"),
            0 < b.length ? (c = b.map(d),
                c.forEach(e),
                c.some(k) && n.addClass("chartGallery").removeClass("photoGallery"),
                c.some(h) && n.addClass("gridGallery").removeClass("photoGallery"),
                c.some(l) && m(),
                b.some(g) && m(),
                this.MS = this.MS.concat(c),
                this.ta(),
                this.trigger("results:render")) : 0 === this.Ov.My() && (n.remove(),
                this.$(".noResults,.layoutsTab__noResults").remove(),
                this.$el.append(this.bK())))
    };
    f.lZ = function () {
        this.$(".gallery").find("li").each(function () {
            $(this).data("view").remove()
        })
    };
    f.ta = function () {
        Sy(this.$(".gallery"), !1)
    };
    f.compact = function () {
        Ty(this.$el, !0)
    };
    f.oa = function (a, b) {
        var c = 0 === a ? 0 : "";
        b ? this.$el.css("height", a).css("padding", c) : this.$el.addClass("doNotTransition").css("height", a).css("padding", c).removeClass("doNotTransition")
    };

    function zV(a, b) {
        a.$el.addClass("doNotTransition").css("height", "+\x3d" + b).removeClass("doNotTransition")
    }
    f.ru = function (a) {
        var b = a.ud();
        return a.$el.nextAll().toArray().filter(function (a) {
            a = a.getBoundingClientRect();
            return (a.top + a.bottom) / 2 > b
        }).map(function (a) {
            return $(a).data("view")
        })
    };

    function AV(a, b) {
        b = a.ru(b);
        if (0 === b.length)
            return 0;
        a = b.slice(0).sort(function (a, b) {
            return a.xc() - b.xc()
        });
        b = b.slice(0).sort(function (a, b) {
            return b.ud() - a.ud()
        });
        a = a[0];
        return b[0].ud() - a.xc()
    }

    function BV(a) {
        return a.$el.outerHeight(!0) - a.$el.height()
    }
    f.my = function () {};
    f.yR = function () {};
    f.bK = function () {
        return $("\x3cp\x3e").addClass("noResults").text(jc(this.u).format("objectPanelSearchNoResults"))
    };
    f.template = _.template('\x3ch2\x3e\x3c%- title %\x3e\x3c/h2\x3e\x3cul class\x3d"gallery"\x3e\x3c/ul\x3e');

    function CV() {}
    CV = yV.extend();
    CV.prototype.initialize = function (a) {
        this.u = a.u;
        this.wz = a.wz;
        yV.prototype.initialize.call(this, a)
    };
    CV.prototype.bK = function () {
        var a = $("\x3cp\x3e");
        this.wz ? a.addClass("layoutsTab__noResults layoutsTab__noResults--folder").text(jc(this.u).format("objectPanelFolderNoResults")) : a.addClass("layoutsTab__noResults layoutsTab__noResults--yourDesigns").text(jc(this.u).format("objectPanelYourDesignsNoResults"));
        return a
    };

    function DV() {}
    DV = yV.extend();
    DV.prototype.initialize = function (a) {
        this.u = a.u;
        yV.prototype.initialize.call(this, a)
    };
    DV.prototype.bK = function () {
        return $("\x3cp\x3e").addClass("layoutsTab__noResults layoutsTab__noResults--templates").html(jc(this.u).format("objectPanelTemplateNoResults"))
    };

    function EV() {}
    EV = yV.extend({});
    EV.prototype.initialize = function (a) {
        this.tw = null;
        this.rS = 0;
        yV.prototype.initialize.apply(this, arguments);
        a.el && this.$(".gallery li").each(function () {
            var a = new rV({
                el: this
            });
            $(this).data("view", a)
        })
    };
    EV.prototype.my = function (a, b) {
        var c = a.$el,
            d = this.ru(a),
            e = c.height(),
            e = c.data("originalTop") + e,
            g = FV(this, e);
        this.$el.addClass("folderExpanded");
        c.addClass("folderExpanded");
        d.forEach(function (a) {
            tV(a, Math.min(b, g), !0)
        });
        b > g && window.setTimeout(function () {
            d.forEach(function (a) {
                tV(a, b, !1)
            })
        }, J.Na.Dy);
        this.oa(e, !0);
        this.rS = b;
        null === this.tw && (a = AV(this, a),
            c = this.$el.next(),
            this.tw = $('\x3cdiv class\x3d"spacer"\x3e\x3c/div\x3e'),
            this.tw.css("height", a).insertAfter(c))
    };
    EV.prototype.yR = function (a) {
        var b = this.ru(a),
            c = this.rS - FV(this);
        0 < c && b.forEach(function (a) {
            a.Kg(-c, !1)
        });
        this.$el.removeClass("folderExpanded");
        a.$el.removeClass("folderExpanded");
        b.forEach(function (a) {
            tV(a, 0, !0)
        });
        var d = this;
        window.setTimeout(function () {
            d.compact();
            d.tw && d.tw.remove();
            d.tw = null
        }, J.Na.Dy * J.Xw)
    };

    function FV(a, b) {
        void 0 === b && (b = a.$el.height());
        var c = a.$el.parents(".layer").outerHeight(!0);
        a = a.$el.position().top;
        return c - (a + b)
    };

    function GV() {}
    GV = yV.extend({
        className: "inlineFolderGroup searchGroup",
        template: _.template('\x3cul class\x3d"gallery"\x3e\x3c/ul\x3e')
    });
    GV.Zw = 150;
    f = GV.prototype;
    f.initialize = function (a) {
        this.model = a.model;
        this.fh = null;
        yV.prototype.initialize.apply(this, arguments);
        this.render();
        this.oa(0, !1)
    };
    f.remove = function () {
        function a() {
            yV.prototype.remove.apply(b, arguments);
            b.YN = !1
        }
        var b = this,
            c = this.$(".infoPanel .close"),
            d = 0 < c.length,
            e = this.$el.parent();
        this.YN = !0;
        d && c.trigger("click");
        if (this.fh)
            this.fh.css("opacity", 0).one("transitionend", function () {
                $(this).remove();
                b.fh = null
            });
        if (0 < e.length) {
            var g = this.$el.offset(),
                c = g.top + this.$el.outerHeight(),
                d = e.offset().top + e.outerHeight(),
                c = c - d;
            if (0 < c) {
                zV(this, -c);
                var h = e.outerHeight() - g.top;
                this.$(".gallery li").each(function () {
                    var a = $(this).data("originalTop");
                    (a >= h || a < -g.top) && $(this).remove()
                })
            }
            this.$el.one("transitionend", a).addClass("disappearing")
        } else
            a()
    };
    f.VB = function () {
        0 === this.Ov.My() && UL(this.$el);
        yV.prototype.VB.apply(this, arguments)
    };
    f.Zq = function (a, b, c) {
        YL(this.$el);
        yV.prototype.Zq.apply(this, arguments);
        var d = this;
        window.setTimeout(function () {
            d.compact()
        }, J.Na.R5)
    };
    f.compact = function () {
        if (0 !== this.model.My()) {
            var a = this;
            yV.prototype.compact.apply(this, arguments);
            window.setTimeout(function () {
                a.$el.height() < GV.Zw && a.oa(GV.Zw, !0)
            }, J.Na.Dy)
        }
    };

    function HV(a) {
        if (null === a.fh) {
            var b = a.$el.parents(".layer");
            a.fh = $('\x3cdiv class\x3d"folder header clone"\x3e\x3ca class\x3d"close" href\x3d"#" title\x3d"Close this folder"\x3eClose\x3c/a\x3e\x3ch2\x3e\x3cspan\x3e' + _.escape(a.Ov.Jb()) + "\x3c/span\x3e\x3c/h2\x3e\x3c/div\x3e");
            a.fh.css("opacity", 0).insertAfter(b);
            P.delay(J.Qc).then(function () {
                a.fh.css("opacity", "")
            });
            a.fh.find("a.close").one("click", function () {
                a.trigger("headerClose:click", a)
            })
        }
    }

    function IV(a) {
        if (null !== a.fh) {
            var b = a.fh;
            a.fh = null;
            b.css("opacity", 0).one("transitionend", function () {
                $(this).remove()
            })
        }
    };

    function JV() {}
    JV = Backbone.View.extend({
        tagName: "section",
        className: "layer"
    });
    JV.xk = function (a, b) {
        return new yV({
            model: a,
            hu: "infoPanelGallery photoGallery",
            u: b
        })
    };
    f = JV.prototype;
    f.events = function () {
        return {
            scroll: _.throttle(this.scroll, 200)
        }
    };
    f.initialize = function (a) {
        this.u = a.u;
        this.VA = this.model = a.model;
        this.ae = [];
        this.DG = [];
        this.xk = a.xk || JV.xk;
        this.rL = !1;
        this.listenTo(this.VA, "searchGroup:add", this.lk);
        this.listenTo(this.VA, "searchGroup:remove", this.IA);
        this.listenTo(this.VA, "results:willFetch", this.VB);
        this.listenTo(this.VA, "results:didFetch", this.Zq);
        this.$el.data("view", this)
    };
    f.render = function () {
        this.$el.empty();
        this.ae.forEach(function (a) {
            this.$el.append(a.$el)
        }, this);
        this.$el.append('\x3cdiv class\x3d"searchLoaderHolder"\x3e\x3c/div\x3e');
        return this
    };
    f.scroll = function () {
        0 < this.ae.filter(function (a) {
            return a.YN
        }).length || this.QE()
    };
    f.QE = function () {
        var a = this.$el.parent(),
            b = this.ae[this.ae.length - 1],
            c = tO(this.VA);
        if (0 !== a.length && b && c && !this.rL) {
            var d = function () {
                var c = b.$el.offset().top + b.$el.outerHeight(),
                    d = a.offset().top + a.outerHeight();
                return c - d
            };
            Tg(this).read(function () {
                if (c.Rz && d() <= a.outerHeight() * J.vQ) {
                    var b = this.$("\x3e .inner \x3e .searchGroup .gallery li").length;
                    b > J.hC && Tg(this).write(function () {
                        JM(this.$el, b - J.hC)
                    });
                    this.rL = !0;
                    c.Jh(KV(this))
                }
                c.Rz || Tg(this).write(function () {
                    this.$el.data("userPreparedSearch", !0)
                })
            })
        }
    };
    f.lk = function (a, b, c) {
        (a = this.ae[c - 1]) && a.compact();
        b = this.xk(b, this.u);
        this.ae.splice(c, 0, b);
        a ? b.$el.insertAfter(a.$el) : b.$el.appendTo(this.$el.children(".inner"))
    };
    f.IA = function (a, b, c) {
        a = this.ae[c];
        this.ae.splice(c, 1);
        a.remove()
    };
    f.VB = function (a) {
        this.DG.push(a);
        UL(this.$el)
    };
    f.Zq = function (a, b) {
        var c = this.DG.indexOf(a); -
        1 < c && this.DG.splice(c, 1);
        0 === this.DG.length && YL(this.$el);
        this.rL = !1;
        if (a.Rz) {
            var d = this;
            setTimeout(function () {
                a === tO(d.model) && d.QE()
            }, b.length * J.Na.ev + J.Na.Tz)
        }
    };

    function KV(a) {
        a = a.$el.parent();
        return WL(a, a.height())
    };

    function LV() {}
    LV = JV.extend({});
    f = LV.prototype;
    f.events = function () {
        var a = JV.prototype.events.apply(this, arguments);
        a["mousedown .albumGallery a"] = this.pZ;
        a["click .albumGallery a"] = function () {
            return !1
        };
        a["mousedown .albumGallery a img"] = function (a) {
            a.preventDefault()
        };
        a["click .inlineFolderGroup \x3e .header a.close"] = this.wR;
        a.mousedown = this.yZ;
        return a
    };
    f.initialize = function (a) {
        JV.prototype.initialize.call(this, a);
        this.RC = !1;
        this.UD = 0;
        this.oz = $();
        this.listenTo(S, "infoPanelToggle", this.O0)
    };

    function MV(a) {
        a = a.ae.filter(function (a) {
            return a instanceof GV
        });
        return 0 < a.length ? a[0] : null
    }
    f.scroll = function (a) {
        JV.prototype.scroll.apply(this, arguments);
        var b = MV(this);
        b && Tg().read(function (a) {
            var d = parseInt(b.$el.css("margin-top"), 10),
                e = parseInt(b.$el.css("margin-bottom"), 10),
                g = b.$el.outerHeight(!1),
                d = b.$el.position().top + d,
                h = 0 < d,
                k = d + g < e;
            a.write(function () {
                h || k ? IV(b) : HV(b)
            })
        })
    };
    f.QE = function () {
        this.$el.data("userPreparedSearch") ? KL.call(this.el) : JV.prototype.QE.apply(this, arguments)
    };
    f.yZ = function (a) {
        if (a.target === this.el || "li" === a.target.nodeName.toLowerCase() && 0 < $(a.target).parents(".browseCategories").length)
            return (a = this.ae[0].$("li.folderExpanded").data("view")) && NV(this, a), !1
    };
    f.pZ = function (a) {
        var b = this.ae[0];
        a = $(a.currentTarget).parent().data("view");
        var c = b.$el.hasClass("folderExpanded") && !a.$el.hasClass("folderExpanded");
        a.$el.hasClass("folderExpanded") ? NV(this, a) : c ? (b = b.$("li.folderExpanded").data("view"),
            NV(this, b)) : this.RC || OV(this, a);
        return !1
    };
    f.wR = function () {
        var a = this.$(".gallery .folderExpanded").data("view");
        !this.RC && NV(this, a)
    };

    function OV(a, b) {
        var c = a.ae[0],
            d = a.model,
            e = b.$el.children("a"),
            g = e.attr("title"),
            e = e.data("query"),
            h = uO(e),
            k = new mL(h, g, e);
        sO(d, k, 1);
        a.trigger("folder:expand", e);
        d = a.ae[1];
        d.$el.attr("data-query", e);
        PV(a, GV.Zw);
        c.my(b, a.UD);
        0 === AV(c, b) && d.$el.addClass("end");
        a.listenTo(d, "headerClose:click", function () {
            a.wR()
        });
        a.oz.remove();
        a.oz = $('\x3cdiv class\x3d"inlineFolderPointer"\x3e\x3c/div\x3e');
        a.oz.css("left", sV(b) + parseInt(a.$el.css("padding-left"), 10)).insertBefore(d.$el);
        UL(d.$el);
        setTimeout(function () {
            k.Jh(KV(a))
        }, J.Na.Dy * J.Xw);
        a.$el.removeData("userPreparedSearch")
    }

    function NV(a, b) {
        var c = a.ae[0],
            d = a.model;
        if (1 < d.getLength()) {
            a.RC = !0;
            var e = tO(d),
                g = MV(a);
            a.stopListening(g);
            d.IA(e);
            a.oz && setTimeout(function () {
                a.oz.remove();
                a.RC = !1
            }, J.Na.Dy)
        }
        c.yR(b);
        PV(a, 0);
        a.$el.data("userPreparedSearch", !0)
    }
    f.lk = function (a, b, c) {
        (a = this.ae[c - 1]) && a.compact();
        var d = new GV({
            model: b,
            hu: "infoPanelGallery photoGallery",
            u: this.u
        });
        this.ae.splice(c, 0, d);
        d.$el.insertAfter(a.$el);
        P.delay(J.Qc).then(function () {
            d.oa(GV.Zw - 72, !0)
        })
    };
    f.Zq = function (a, b, c) {
        JV.prototype.Zq.apply(this, arguments);
        nO(this, !0)
    };

    function nO(a, b) {
        var c = a.ae[0],
            d = MV(a),
            e = c.$("li.folderExpanded").data("view");
        if (e) {
            var g = BV(d),
                h = d.$el.data("contentHeight") || 0,
                g = g + h,
                k = yM(d.$el),
                l = Math.max(g, GV.Zw),
                m = c.$el.find("li");
            b ? c.my(e, l + k) : (m.addClass("doNotTransition"),
                P.delay(J.Qc).then(function () {
                    c.my(e, l + k);
                    P.delay(J.Qc).then(function () {
                        m.removeClass("doNotTransition")
                    })
                }));
            PV(a, l)
        }
    }
    f.O0 = function (a, b) {
        var c = MV(this);
        c && c.el === a.get(0) && (a = this.ae[0],
            c = a.$("li.folderExpanded").data("view"),
            a.my(c, this.UD + b))
    };

    function PV(a, b) {
        var c = b - a.UD;
        a.UD = b;
        var d = a.ae[0].$el.nextAll(".searchGroup:not(.inlineFolderGroup)").find(".infoPanel, .infoPanelPointer");
        d.one("transitionend", function () {
            $(this).removeClass("transitionTop")
        }).addClass("transitionTop");
        P.delay(J.Qc).then(function () {
            d.css("top", "+\x3d" + c)
        })
    };

    function fL() {}
    fL = Backbone.View.extend({
        className: "textControls"
    });
    fL.wY = 1.02;
    f = fL.prototype;
    f.events = function () {
        return {
            "mousedown a.add": this.p1,
            "click a.add": this.nZ
        }
    };
    f.initialize = function (a) {
        this.jj = a.jj;
        this.u = a.u;
        this.LC = !1;
        this.listenTo(this.model, "change:defaultFont", this.C7);
        this.render()
    };
    f.template = _.template("\x3c% if (hasBrandKit) { %\x3e\x3cp\x3e\x3c%- brandFontLabel %\x3e\x3c/p\x3e\x3c% } else { %\x3e\x3cp\x3e\x3c%- fontLabel %\x3e\x3c/p\x3e\x3c% } %\x3e\x3cul\x3e\x3c/ul\x3e");
    f.c1 = _.template('\x3cli style\x3d"color: \x3c%- color %\x3e; text-align: \x3c%- justification %\x3e;"\x3e\x3ca class\x3d"add" data-style\x3d"\x3c%- style %\x3e"href\x3d"#" style\x3d"color: \x3c%\x3d color %\x3e; font-family: \'\x3c%- fontFamily %\x3e\'; font-size: \x3c%- fontSizePercentage %\x3e%; font-style: \x3c%- italic ? "italic" : "normal"%\x3e; font-weight: \x3c%- bold ? "bold" : "normal"%\x3e;"\x3e\x3c%- placeholderText %\x3e\x3c/a\x3e\x3c/li\x3e');
    f.render = function () {
        var a, b = this;
        this.$el.html(this.template(function () {
            var a = jc(b.u);
            return {
                hasBrandKit: !!b.jj,
                fontLabel: a.format("objectPanelTextPanelFontLabel"),
                brandFontLabel: a.format("objectPanelTextPanelBrandFontLabel")
            }
        }()));
        a = this.$el.children("ul");
        for (var c in dc)
            a.append(QV(this, dc[c]));
        RV(this, this.M5.bind(this));
        return this
    };
    f.M5 = function () {
        var a;
        this.$(".add").each(function () {
            a = a || Math.min(1, this.parentElement.offsetWidth / this.offsetWidth);
            this.style.fontSize = parseFloat(this.style.fontSize) * a + "%"
        })
    };

    function RV(a, b) {
        function c() {
            d++;
            3 === d && b && b()
        }
        var d = 0;
        Object.keys(dc).forEach(function (a) {
            a = this.mr(dc[a]).fontFamily;
            AI(a, c)
        }, a)
    }

    function QV(a, b) {
        b = a.mr(b);
        return $(a.c1(b))
    }
    f.mr = function (a) {
        var b = {
                title: 32,
                subtitle: 18,
                body: 14
            },
            c = $.extend(!0, {}, this.model.qH[a]),
            d = $.extend(!0, {}, this.model.Hq[a]),
            e = SV(this, a),
            g = jc(this.u);
        switch (a) {
            case "title":
                g = Pd(g);
                break;
            case "subtitle":
                g = Qd(g);
                break;
            case "body":
                g = g.format("objectPanelTextPanelAddBody");
                break;
            default:
                throw Error("Unknown TextElementStyle " + a);
        }
        g = {
            bold: !1,
            italic: !1,
            justification: "center",
            color: "auto",
            placeholderText: g,
            style: a
        };
        c = _.extend({}, g, d, c, e);
        (e = Bz(Jb, c.fontFamily)) ? c.fontFamily = e.family: c = _.extend({}, g, d);
        void 0 === c.fontSize && (c.fontSize = b[a]);
        c.fontSizePercentage = c.fontSize * J.oi;
        return c
    };

    function SV(a, b) {
        var c;
        try {
            c = a.jj.EB[0].GB || []
        } catch (d) {
            c = []
        }
        return c.filter(function (a) {
            return !!a.font && a.getName() === b
        }).map(function (a) {
            a = a.font;
            return {
                bold: a.bold,
                italic: a.v,
                fontFamily: a.family,
                fontSize: a.cp()
            }
        })[0]
    }
    f.C7 = function (a, b, c) {
        var d = this.$el.find("[data-style\x3d" + b + "]").parent(),
            e = QV(this, b);
        AI(c.fontFamily, function () {
            d.replaceWith(e)
        })
    };
    f.nZ = function (a) {
        function b(a) {
            a.Lk(d);
            vg(a)
        }
        var c = this.model;
        a = $(a.currentTarget).data("style");
        var d = c.Oa();
        this.cD(a).then(b, b);
        this.LC = !0;
        return !1
    };
    f.cD = function (a) {
        var b = this.$(".add[data-style\x3d" + a + "]"),
            c = this.mr(a);
        c.fontSize *= H.Go;
        var d = TV(this, b);
        d.find("a").css("font-size", c.fontSize * J.oi + "%");
        d.css("font-size", "100%").css("opacity", 0).appendTo("#content");
        var e = d.width();
        d.remove();
        var g = _.defaults({
            style: a,
            lockedWidth: !1,
            width: e * fL.wY,
            html: b.text(),
            placeholderText: b.text()
        }, c);
        return new P(function (a, b) {
            new up(g, function (c, d) {
                d ? a(c) : b(c)
            })
        })
    };

    function TV(a, b) {
        var c = a.model.Oa().ug(),
            d = a.mr(b.data("style")),
            e = b.clone();
        a = UV(a);
        var g = parseFloat(b.get(0).style.fontSize || 100) / 100,
            d = d.color && "auto" !== d.color ? d.color : "inherit";
        e.css("width", b.width()).css("height", b.height()).css("white-space", "nowrap").css("color", d).css("font-size", a * g * 100 + "%");
        b = $('\x3cdiv class\x3d"textControls clone text"\x3e\x3c/div\x3e');
        b.css("font-size", 100 * W + "%").css("color", c ? "white" : "black").append(e);
        return b
    }
    f.p1 = function (a) {
        function b(a) {
            var h = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            if (d.LC)
                return B.off("mousemove|touchmove", b).off("mouseup|touchend", c),
                    l && l.remove(),
                    g.removeClass("pickedUp"),
                    d.LC = !1;
            if (null == l)
                if (aM(B)) {
                    var m = rn(q, x, h, a);
                    if (300 < m || 60 > m)
                        l = TV(d, e),
                        $("#content").append(l),
                        g.addClass("pickedUp");
                    else
                        return !0
                } else if (Math.abs(h - q) > J.Rc || Math.abs(a - x) > J.Rc)
                l = TV(d, e),
                $("#content").append(l),
                g.addClass("pickedUp");
            null != l && (m = k.top + a - x,
                l.css("left", k.left + h - q).css("top", m),
                m = Math.min(1, Math.sqrt(Math.pow(h - q, 2) + Math.pow(a - x, 2)) / E),
                l.css("font-size", 100 * (1 + (u - 1) * m) + "%").css("color", hn(Q, M, m).Ca()),
                (h < n.left || h > n.left + p || a < n.top || a > n.top + r) && CM(v.$el, l) ? (null == K && (K = new Wg(l, y)),
                    Yg(K, N, C)) : $("#overlays .align").removeClass("on"));
            return !1
        }

        function c(a) {
            function h() {
                l.remove();
                g.removeClass("pickedUp");
                l.hasClass("returning") || k()
            }

            function k() {
                e.one("transitionend", function () {
                    $(this).removeClass("reappearing")
                }).addClass("reappearing")
            }

            function m(a) {
                a.setPosition(K.Y(), K.N());
                a.appendTo(d.model.Oa());
                vg(a);
                wg(a);
                sJ(a.O())
            }
            B.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            $("#overlays .align").removeClass("on");
            $("#content").trigger("mousedown");
            bh();
            var u = void 0 !== a.clientX ? a.clientX : a.originalEvent.changedTouches[0].clientX;
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.changedTouches[0].clientY;
            if (null == l && Math.abs(u - q) < J.Rc && Math.abs(a - x) < J.Rc)
                return !1;
            null != l && ((u < n.left || u > n.left + p || a < n.top || a > n.top + r) && CM(v.$el, l) ? (u = e.data("style"),
                d.cD(u).then(m).finally(h)) : (u = e.offset(),
                l.addClass("returning"),
                l.one("transitionend", h).css("left", u.left).css("top", u.top).css("font-size", "100%").css("color", Q.Ca())))
        }
        if (a.which !== J.wh) {
            var d = this,
                e = $(a.currentTarget),
                g = e.parent("li"),
                h = $(a.currentTarget).data("style"),
                k = e.offset(),
                l = null,
                m = $("#objectPanel"),
                n = m.offset(),
                p = m.outerWidth(),
                r = m.outerHeight(),
                h = this.mr(h);
            h.fontSize *= H.Go;
            var u = 1 / (parseFloat(e.get(0).style.fontSize) / J.oi * UV(this) / h.fontSize) * W,
                v = ah(H),
                y = v.$el.find(".page__content").get(0).getBoundingClientRect(),
                q = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
                x = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
                E = Math.abs(q - (n.left + p)),
                B = new Po($(document));
            B.on("mousemove|touchmove", b).on("mouseup|touchend", c);
            var K = null,
                C = Xg(),
                N = {};
            a = this.model.Oa().ug();
            var Q = Qm(new Om, 255, 255, 255),
                M = new Om;
            h.color && "auto" !== h.color ? M = gh(h.color) || M : a ? Qm(M, 255, 255, 255) : Qm(M, 0, 0, 0);
            this.LC = !1;
            return FM
        }
    };

    function UV(a) {
        return parseFloat(getComputedStyle(a.el.querySelector("ul")).fontSize) / parseFloat(getComputedStyle(a.el).fontSize)
    };

    function oL() {}
    oL = JV.extend();
    oL.prototype.initialize = function (a) {
        this.limit = 0;
        this.da = jc(a.u);
        a.model = new rO;
        a.xk = oL.xk;
        JV.prototype.initialize.call(this, a);
        this.model.lk(VV())
    };
    oL.xk = function (a, b) {
        return new DV({
            model: a,
            hu: "infoPanelGallery photoGallery",
            u: b
        })
    };

    function VV() {
        var a = ax(Yw()).wa(),
            b = w(G.pb().G());
        return new mL(new DO({
            Ia: a.G(),
            nb: yb,
            AJ: b,
            ki: new vH(Hb)
        }))
    }
    oL.prototype.Jh = function (a) {
        this.limit = a;
        tO(this.model).Jh(a)
    };
    oL.prototype.reset = function () {
        for (var a = this.model; tO(a);)
            a.IA(tO(a));
        this.model.lk(VV())
    };

    function jL() {}
    jL = JV.extend();
    jL.xk = function (a, b, c) {
        return new CV({
            model: b,
            wz: a,
            hu: "infoPanelGallery photoGallery",
            u: c
        })
    };
    jL.prototype.initialize = function (a) {
        a.model = new rO;
        a.xk = jL.xk.bind(null, a.wz);
        JV.prototype.initialize.call(this, a);
        this.model.lk(new mL(a.r_))
    };
    jL.prototype.Jh = function (a) {
        tO(this.model).Jh(a)
    };

    function lL() {}
    lL = JV.extend();
    lL.prototype.initialize = function (a) {
        this.bD = a.bD;
        a.model = new rO;
        JV.prototype.initialize.call(this, a);
        this.model.lk(this.bD())
    };
    lL.prototype.Jh = function (a) {
        tO(this.model).Jh(a)
    };
    lL.prototype.reset = function () {
        this.model.IA(tO(this.model));
        this.model.lk(this.bD())
    };

    function hL() {}
    hL = Backbone.View.extend();
    f = hL.prototype;
    f.initialize = function (a) {
        this.Yb = a.Yb;
        this.lJ = a.lJ;
        this.Vq = bM;
        this.ZC = a.ZC;
        this.bJ = a.bJ;
        this.YI = a.YI;
        this.cJ = a.cJ;
        this.nb = a.nb;
        this.uc = a.uc;
        this.ld = null;
        this.IS = !1;
        this.TO = a.TO;
        this.VO = a.VO;
        this.Hz = this.up = this.ei = null;
        this.Ir = a.g1.reduce(function (a, c) {
            a[c.template] = wM(c);
            return a
        }, {});
        this.EG = null;
        this.u = a.u;
        this.da = jc(this.u);
        this.render();
        WV(this);
        this.$el.data("view", this);
        this.listenTo(this.model, "resize", this.gW)
    };
    f.events = function () {
        return {
            "click .templateGallery .info .moreInfo": this.CZ,
            "click .templateGallery a": this.JZ,
            "click .tabDropdown": this.IZ
        }
    };
    f.remove = function () {
        this.Hz && this.Hz.remove();
        Backbone.View.prototype.remove.call(this)
    };
    f.J4 = _.template('\x3csection class\x3d"layoutTabPanel"\x3e\x3csection class\x3d"layer scrollPane"\x3e\x3cdiv class\x3d"inner"\x3e\x3cdiv class\x3d"searchLoaderHolder"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/section\x3e\x3c/section\x3e');
    f.template = _.template('\x3c% if (showTabMenu) { %\x3e\x3cdiv class\x3d"layoutsControls"\x3e\x3cdiv class\x3d"select tabDropdown"\x3e\x3c/div\x3e\x3c/div\x3e\x3c% } %\x3e\x3csection class\x3d"layoutsContainer layoutsContainer"\x3e\x3c/section\x3e');

    function WV(a) {
        var b = ak((new Zj).ct(a.lJ), [Ej]).iQ().Ig(100);
        a.uc.ES(b).then(function (b) {
            a.ld = b.To().filter(function (a) {
                var b;
                if (b = "undefined" !== typeof a.Cm())
                    b = ["OWNER", "ADMIN", "EDITOR", "VIEWER"],
                    b = b.indexOf(a.Cm()) <= b.indexOf("EDITOR");
                return b
            }).sort(XV);
            a.ei && a.ld && YV(a.ei, a.ld)
        }).catch(function () {
            a.IS = !0;
            a.ei && ZV(a.ei)
        })
    }
    f.Jh = function (a) {
        this.EG && this.EG.Jh(a)
    };
    f.JZ = function (a) {
        bh();
        if ($(a.target).is(".moreInfo"))
            return !1;
        a = $(a.currentTarget);
        var b = a.parents("li").data("view"),
            c = b.model;
        this.$(".gallery li.on").removeClass("on");
        if (uU(this, a))
            return !1;
        c.getContent ? (wU(this, c),
            b.$el.addClass("on")) : c.Dc ? (JN(this, c),
            b.$el.addClass("on")) : c.Ue && 1 === c.Ue().pageCount && (vU(this, c),
            b.$el.addClass("on"));
        return !1
    };

    function uU(a, b, c) {
        var d = b.parents("li").data("view"),
            e = d.model;
        return d.Dj && d.Dj() || e.Ue && e.Ue() && 1 < e.Ue().pageCount ? (d = !1 !== c && !b.hasClass("infoOpen"), !0 !== c && b.hasClass("infoOpen") ? Ry() : d && (c = document.createElement("span"),
            $(c).css("visibility", "hidden").css("width", 0).css("height", 0),
            b.append(c),
            EL.call(c, a.u)), !0) : !1
    }
    f.CZ = function (a) {
        return EL.call(a.currentTarget, this.u)
    };
    hL.Kx = function (a, b) {
        if ((new dh(window.viewConfig)).kh())
            b = P.resolve(!0);
        else {
            b.XJ || (b.XJ = new Zd(b.config));
            b = b.XJ;
            a = WN(a);
            var c = Cb,
                d = new $V({
                    aa: Rk,
                    bQ: b.bQ(),
                    z_: b.Bh(),
                    E1: b.tF(),
                    J5: b.vk(),
                    aQ: b.aQ()
                });
            b = (new aW({
                u: b,
                dN: a,
                ka: c
            }, d)).confirm()
        }
        return b
    };

    function vU(a, b, c, d) {
        function e(a) {
            return a.getDocument()
        }

        function g(a) {
            function d() {
                $N({
                    zo: ZN(g),
                    Pe: G.pb(),
                    page: g
                });
                bW(G.Oa(), ym(g.serialize()), p, Qq(a, 0), m)
            }
            n.clear();
            r && c && UN(n, r);
            l = a.Ue().content.pages[0];
            m = new Dm({
                type: kA,
                id: a.G(),
                version: a.getVersion()
            });
            tU(l, m);
            null !== k.Yb && k.Ir.hasOwnProperty(b.G()) && iV(null, l, h());
            if (l.width !== n.D() || l.height !== n.F()) {
                var e = zm(new xm, l),
                    g = new qp(G, {});
                kN(g, e, null, null, !0);
                k.listenToOnce(g, "unpacked", d)
            } else
                bW(G.Oa(), ym(l), p, Qq(a, 0), m)
        }

        function h() {
            var a = {};
            a[k.Ir[b.G()].$b()] = "#" + k.Yb;
            return a
        }
        var k = a,
            l, m, n = G.Oa(),
            p = n.st(),
            r = Qq(b, 0);
        if (d) {
            var u;
            try {
                u = b.Ue().content.pages[0]
            } catch (v) {}
            u ? g(b) : (n.clear(),
                r && c && UN(n, r),
                d = new Bs({
                    Fk: b.G(),
                    OE: !0
                }),
                a.nb.getDocument(d).then(e).then(g))
        } else
            hL.Kx(n, a.u).then(function (a) {
                    a && vU(this, b, c, !0)
                }
                .bind(a))
    }

    function wU(a, b, c) {
        var d = G.Oa();
        c ? (a = b.getContent(),
            a = zm(new xm, a),
            AH(b) && Bm(a, d.D(), d.F()),
            bW(d, a)) : hL.Kx(d, a.u).then(function (a) {
                a && wU(this, b, !0)
            }
            .bind(a))
    }

    function JN(a, b, c) {
        function d(a) {
            function c() {
                $N({
                    zo: ZN(n),
                    Pe: G.pb(),
                    page: n
                });
                bW(g, ym(n.serialize()), null, b.Hm())
            }
            if (a && a.content && a.content.pages) {
                var d = {
                        id: b.G(),
                        version: b.getVersion(),
                        price: VJ(b),
                        title: b.Jb(),
                        keywords: b.Zk()
                    },
                    d = Am(new xm(d), a),
                    m = G.Oa();
                a = a.content.pages[0];
                if (a.width !== m.D() || a.height !== m.F()) {
                    var n = new qp(G, {});
                    kN(n, d, null, null, !0);
                    e.listenToOnce(n, "unpacked", c)
                } else
                    bW(g, d, null, b.Hm())
            }
        }
        var e = a,
            g = G.Oa();
        c ? (b.sj(d),
            SJ(fK(b))) : hL.Kx(g, a.u).then(function (a) {
                a && JN(this, b, !0)
            }
            .bind(a))
    }

    function bW(a, b, c, d, e) {
        c = {
            "new": b,
            old: c || a.st(),
            pageIndex: a.ea()
        };
        var g = Np(b.xg()),
            h = T,
            k = b.serialize();
        !g && h && k && Bl(h, k.id);
        kN(a, b, d, e);
        I.register(new iN(4, c))
    }
    hL.prototype.render = function () {
        this.$el.html(this.template({
            layoutsLabelText: this.da.format("objectPanelLayoutsPanelLayoutsTabLabel"),
            yourDesignsLabelText: Rd(this.da),
            showTabMenu: this.VO
        }));
        cW(this);
        return this
    };
    hL.prototype.gW = function () {
        this.up.reset && this.up.reset();
        this.EG === this.up && this.Jh(WL(this.$el, this.$el.height()))
    };
    hL.prototype.IZ = function () {
        var a = this;
        this.ei = this.cJ(this.Vq);
        this.ei.on("select", function (b) {
            a.Vq !== b && (a.Vq = b,
                cW(a))
        });
        this.ei.on("hide", function () {
            a.$el.removeClass("resultsLayout--fadeResults")
        });
        this.ei.on("remove", function () {
            a.ei.off();
            a.ei = null
        });
        this.ei.ci(this.$(".tabDropdown"));
        this.$el.addClass("resultsLayout--fadeResults");
        this.IS ? ZV(this.ei) : this.ld && YV(this.ei, this.ld);
        WV(this)
    };

    function cW(a) {
        var b = a.$(".tabDropdown"),
            c = $(a.J4()),
            d = c.find(".layer");
        a.$(".layoutsContainer").empty().append(c);
        a.Hz && a.Hz.remove();
        a.Hz = (new Dn(c.find(".scrollPane"))).render();
        switch (a.Vq) {
            case bM:
                a.up = a.bJ(d);
                b.text(Sd(a.da));
                break;
            case cM:
                a.up = a.YI(d);
                b.text(Td(a.da));
                break;
            case dM:
                a.up = a.ZC(d, null);
                b.text(Rd(a.da));
                break;
            default:
                a.up = a.ZC(d, a.Vq),
                    b.text(a.ld.filter(function (b) {
                        return b.G() === a.Vq
                    })[0].getName() || "")
        }
        a.TO && (c = $(document.createElement("span")).addClass("newFeatureLabel").text(od(a.u).dn()),
            b.append(c));
        b.attr("data-selected", a.Vq);
        a.EG = a.up;
        a.Jh(WL(a.$el, a.$el.height()))
    };
    var bM = "CANVA_LAYOUTS",
        cM = "TEAM_TEMPLATES",
        dM = "YOUR_DESIGNS";

    function iL() {}
    iL = dy.extend({
        className: "layoutsTabMenu"
    });
    f = iL.prototype;
    f.initialize = function (a) {
        this.da = a.da;
        this.Nt = a.Nt;
        this.gd = a.gd;
        this.jw = a.jw;
        this.Cl = null;
        dy.prototype.initialize.call(this, {
            content: this.$N(),
            lw: !1,
            nv: !0,
            Qn: !1,
            position: gp
        })
    };
    f.events = function () {
        function a(a, d) {
            b.trigger("select", a);
            b.$(".layoutsTabMenu__item--selected").removeClass("layoutsTabMenu__item--selected");
            $(d.currentTarget).addClass("layoutsTabMenu__item--selected layoutsTabMenu__item--activated");
            b.aa.setTimeout(function () {
                return b.remove()
            }, 100)
        }
        var b = this;
        return {
            "click .layoutsTabMenu__item--canvaLayouts": function (b) {
                return a(bM, b)
            },
            "click .layoutsTabMenu__item--teamTemplates": function (b) {
                return a(cM, b)
            },
            "click .layoutsTabMenu__item--yourDesigns": function (b) {
                return a(dM, b)
            },
            "click .layoutsTabMenu__item--folder": function (b) {
                return a($(b.currentTarget).attr("data-id"), b)
            },
            "click .layoutsTabMenu__upgrade": function () {
                var a = b.gd;
                a.H.Ga(Tl("object_panel_layouts", "folders_dropdown", "design_templates"));
                var d;
                a.ja.ba.get(Yf) ? (window.open("https://about.canva.com/pricing", "_blank"),
                    d = !0) : d = !1;
                d || qo(a, dW);
                b.remove()
            }
        }
    };
    f.Xo = function () {
        return eW
    };
    f.remove = function () {
        this.Cl && this.Cl.remove();
        dy.prototype.remove.call(this)
    };
    f.render = function () {
        dy.prototype.render.call(this);
        this.Cl || (this.Cl = (new Dn(this.$(".selectMenu"))).render());
        return this
    };
    f.$N = function () {
        var a = $,
            b;
        b = this.da.format("objectPanelLayoutsPanelFoldersLoading");
        var c = soydata.VERY_UNSAFE.ordainSanitizedHtml(this.da.format("objectPanelLayoutsPanelUpgradeCta"));
        soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "loadingMsg", b, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(c instanceof soydata.SanitizedHtml || c instanceof soydata.UnsanitizedText || goog.isString(c), "upgradeHtml", c, "soydata.SanitizedHtml");
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"selectMenu layoutsTabMenu"\x3e\x3cdiv class\x3d"layoutsTabMenu__loading"\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"layoutsTabMenu__upgradeCta"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e\x3c/div\x3e");
        a = a(b.toString());
        b = a.find(".layoutsTabMenu__loading");
        b.before(fW({
            Or: "canvaLayouts",
            selected: this.Nt === bM,
            label: Sd(this.da),
            locked: !1
        }).toString());
        b.before(fW({
            Or: "teamTemplates",
            selected: this.Nt === cM,
            label: Td(this.da),
            locked: this.jw
        }).toString());
        b.before(fW({
            Or: "yourDesigns",
            selected: this.Nt === dM,
            label: Rd(this.da),
            locked: this.jw
        }).toString());
        a.toggleClass("layoutsTabMenu--demoMode", this.jw);
        return a
    };

    function YV(a, b) {
        b.length ? a.$(".layoutsTabMenu__loading").remove() : a.$(".layoutsTabMenu__loading").text(a.da.format("objectPanelLayoutsPanelFoldersEmpty"));
        a.$(".layoutsTabMenu__item--folder").remove();
        b.forEach(function (b) {
            a.$(".layoutsTabMenu__upgradeCta").before(fW({
                Or: "folder",
                selected: a.Nt === b.G(),
                label: b.getName() || "",
                fw: b.shared,
                vw: b.fp() && b.fp().starred,
                Ay: b.G(),
                locked: a.jw
            }).toString())
        })
    }

    function ZV(a) {
        a.$(".layoutsTabMenu__loading").text(a.da.format("objectPanelLayoutsPanelFoldersError"))
    };

    function fW(a) {
        soy.asserts.assertType(goog.isString(a.Or) || a.Or instanceof goog.soy.data.SanitizedContent, "modifierName", a.Or, "string|goog.soy.data.SanitizedContent");
        var b = a.Or;
        soy.asserts.assertType(goog.isBoolean(a.selected) || 1 === a.selected || 0 === a.selected, "selected", a.selected, "boolean");
        var c = !!a.selected;
        soy.asserts.assertType(goog.isString(a.label) || a.label instanceof goog.soy.data.SanitizedContent, "label", a.label, "string|goog.soy.data.SanitizedContent");
        var d = a.label;
        soy.asserts.assertType(goog.isBoolean(a.locked) || 1 === a.locked || 0 === a.locked, "locked", a.locked, "boolean");
        var e = !!a.locked;
        soy.asserts.assertType(null == a.fw || goog.isBoolean(a.fw) || 1 === a.fw || 0 === a.fw, "sharedFolder", a.fw, "boolean|null|undefined");
        var g = a.fw;
        soy.asserts.assertType(null == a.vw || goog.isBoolean(a.vw) || 1 === a.vw || 0 === a.vw, "starredFolder", a.vw, "boolean|null|undefined");
        var h = a.vw;
        soy.asserts.assertType(null == a.Ay || a.Ay instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ay), "folderId", a.Ay, "null|string|undefined");
        a = a.Ay;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"selectMenu__item layoutsTabMenu__item layoutsTabMenu__item--' + soy.$$escapeHtmlAttribute(b) + (c ? " layoutsTabMenu__item--selected" : "") + (e ? " layoutsTabMenu__item--locked" : "") + '"' + (a ? ' data-id\x3d"' + soy.$$escapeHtmlAttribute(a) + '"' : "") + "\x3e" + (a ? g ? gW({
            Ma: "layoutsTabMenu__icon",
            mi: h
        }) : hW({
            Ma: "layoutsTabMenu__icon",
            mi: h
        }) : "") + soy.$$escapeHtml(d) + "\x3c/div\x3e")
    };

    function wL(a) {
        this.CM = this.CM.bind(this);
        this.gn = this.gn.bind(this);
        this.element = a;
        this.element.on({
            dragover: this.CM,
            drop: this.gn
        });
        this.PL = null;
        this.iU = -1
    }
    _.extend(wL.prototype, Backbone.Events);
    wL.prototype.trigger = Backbone.Events.trigger;
    wL.prototype.CM = function (a) {
        var b = this;
        a.originalEvent.dataTransfer && (a.originalEvent.dataTransfer.dropEffect = "copy",
            a.preventDefault(),
            clearTimeout(this.iU),
            this.PL || (this.PL = Date.now(),
                1 === $("#objectPanel \x3e menu \x3e .uploads.on").length ? this.trigger("dragenter") : ($("#objectPanel \x3e menu \x3e .uploads \x3e a").click(),
                    setTimeout(function () {
                        b.trigger("dragenter")
                    }, 300))),
            this.iU = setTimeout(function () {
                b.trigger("dragleave");
                b.PL = null
            }, 500))
    };
    wL.prototype.gn = function (a) {
        var b;
        try {
            b = a.originalEvent.dataTransfer.files
        } catch (c) {}
        a.preventDefault();
        a.stopPropagation();
        b && b.length && this.trigger("drop", b);
        return !1
    };

    function iW() {}
    iW = Backbone.View.extend({
        className: "uploadsFolderItem"
    });
    f = iW.prototype;
    f.events = function () {
        return {
            click: this.Bf,
            dragstart: this.Sr,
            mousedown: this.Tr
        }
    };
    f.initialize = function (a) {
        this.$a = a.$a;
        this.model = a.model;
        this.root = a.root
    };
    f.Bf = function () {
        this.$a.RQ(this.model)
    };
    f.Sr = function (a) {
        a.preventDefault();
        return !1
    };
    f.Tr = function (a) {
        return a.which === J.wh || this.hP(a)
    };
    f.NM = function (a, b) {
        function c() {
            d.$el.removeClass("uploadsFolderItemDragging")
        }
        var d = this;
        b ? setTimeout(c, 600) : (this.Bf(),
            c())
    };
    f.render = function () {
        this.$el.addClass("uploadsFolderItemLoading");
        this.$el.html(this.template());
        this.LA();
        return this
    };
    f.LA = function () {
        var a, b, c = this;
        a = this.model.Vd().F() / this.model.Vd().D();
        b = this.$(".uploadsFolderItemThumbnail");
        b.css("padding-bottom", 100 * a + "%");
        a = b.find("img");
        a.one("load", function () {
            c.$el.removeClass("uploadsFolderItemLoading")
        });
        OB(PB, a, this.model.Vd().Aa())
    };
    f.hP = function (a) {
        var b = this.el.getBoundingClientRect(),
            c = a.clientX,
            d = a.clientY,
            e = this.$el.clone().off(),
            c = new U(c, d, c, d),
            b = Qg(b);
        if (this.root) {
            this.$el.addClass("uploadsFolderItemDragging");
            var d = this.$a,
                g = this.model;
            Og(d, yg(g), b, e, c, d.RQ.bind(d, g));
            this.$P(a)
        }
        return !1
    };
    f.template = _.template('\x3cdiv class\x3d"uploadsFolderItemThumbnail"\x3e\x3cimg\x3e\x3c/div\x3e');
    f.$P = function (a) {
        function b(c) {
            3 < Math.sqrt(Math.pow(c.clientX - a.clientX, 2) + Math.pow(c.clientY - a.clientY, 2)) && (e = !0,
                d.root.off("mousemove", b))
        }

        function c(a) {
            d.root.off("mousemove", b);
            d.root.off("mouseup", c);
            d.NM(a, e)
        }
        var d = this,
            e = !1;
        d.root.on("mouseup", c);
        d.root.on("mousemove", b)
    };

    function jW(a) {
        this.$a = a.$a;
        this.Qk = a.Qk;
        this.Kh = !1;
        this.eL = !0;
        this.ta = new kW;
        this.offset = 0;
        this.Af = a.Af;
        this.view = new lW({
            da: a.da
        });
        this.view.on({
            retry: this.fetch,
            signIn: this.authorize
        }, this)
    }
    f = jW.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.on = Backbone.Events.on;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.authorize = function () {
        pH(this.Qk).then(this.view.lX.bind(this.view, !1)).then(this.fetch.bind(this)).catch(function () {})
    };
    f.gZ = function () {
        return qH(this.Qk).catch(function () {
            throw new mW;
        })
    };
    f.fetch = function () {
        function a() {
            b.Kh = !1
        }
        var b = this;
        this.Af ? !b.Kh && b.eL && (this.Kh = !0,
            this.view.Fg(!0),
            this.view.Rs(!1),
            this.K7().bind(this).then(this.gZ).then(this.h0).finally(a).then(this.K3).catch(mW, this.G3).catch(oW, this.V3).catch(this.L3)) : nW(this.view)
    };
    f.wy = function () {
        this.fetch()
    };
    f.h0 = function () {
        return tH(this.offset, 25)
    };
    f.getElement = function () {
        return this.view.$el
    };
    f.bl = function () {
        return this.ta.bl()
    };
    f.yr = function () {
        return this.eL
    };
    f.G3 = function () {
        this.view.Fg(!1);
        this.view.lX(!0)
    };
    f.K3 = function (a) {
        var b, c = this;
        b = $(a.map(function (a) {
            return (new iW({
                $a: c.$a,
                model: a,
                root: $(window)
            })).render()
        }).map(function (a) {
            return a.el
        }));
        Hg(this.$a, a);
        this.eL = 0 < a.length;
        pW("uploadsItemAppearing", b, 2200);
        this.ta.push(b);
        this.offset += a.length;
        this.view.Fg(!1);
        this.view.Qs(1 > this.ta.uf().length && 1 > a.length);
        this.trigger("fetch")
    };
    f.L3 = function () {
        this.view.Fg(!1);
        this.view.Rs(!0)
    };
    f.V3 = function () {
        this.view.Fg(!1);
        this.view.Rs(!0)
    };
    f.remove = function () {
        this.stopListening()
    };
    f.render = function () {
        this.view.render();
        this.view.$el.prepend(this.ta.$el);
        return this
    };
    f.K7 = P.method(function () {
        function a() {
            return P.try(function () {
                return mH() || P.delay(500).then(a).cancellable()
            })
        }
        return a().timeout(2500).catch(P.TimeoutError, function () {
            throw new oW;
        })
    });

    function mW() {}
    mW.prototype = Object.create(Error.prototype);

    function oW() {}
    oW.prototype = Object.create(Error.prototype);

    function lW() {}
    lW = Backbone.View.extend({
        className: "facebookPhotos uploadsFolderContent"
    });
    f = lW.prototype;
    f.S_ = _.template('\x3cp class\x3d"uploadsFolderContentEmptyMessage"\x3e\x3c%- message %\x3e\x3c/p\x3e');
    f.PD = _.template('\x3cp class\x3d"uploadsFolderContentErrorMessage"\x3e\x3c%- message %\x3e\x3cbutton class\x3d"button facebookPhotosRetry"\x3e\x3c%- buttonLabel %\x3e\x3c/button\x3e\x3c/p\x3e');
    f.events = function () {
        return {
            "click .buttonFacebook": this.T2,
            "click .facebookPhotosRetry": this.Q3
        }
    };
    f.initialize = function (a) {
        this.vi = new HU;
        this.da = a.da
    };
    f.T2 = function () {
        this.trigger("signIn")
    };
    f.Q3 = function () {
        this.trigger("retry")
    };
    f.render = function () {
        this.$el.append(this.vi.render().$el);
        return this
    };
    f.E6 = _.template('\x3cdiv class\x3d"facebookPhotosSignIn"\x3e\x3cp\x3e\x3c%- message %\x3e\x3c/p\x3e\x3cbutton class\x3d"button buttonFacebook"\x3e\x3c%- buttonLabel %\x3e\x3c/button\x3e\x3c/div\x3e');
    f.l1 = _.template('\x3cp class\x3d"facebookUploadDisabled feedback feedback--error"\x3e\x3c%\x3d label %\x3e\x3c/p\x3e');
    f.Fg = function (a) {
        a ? this.vi.show() : this.vi.hide()
    };
    f.Qs = function (a) {
        var b = this.$(".uploadsFolderContentEmptyMessage");
        a ? 1 > b.length && this.$el.append(this.S_({
            message: this.da.format("objectPanelUploadsPanelFacebookFolderEmptyMessage")
        })) : b.remove()
    };
    f.Rs = function (a) {
        var b = this.$(".uploadsFolderContentErrorMessage");
        a ? 1 > b.length && this.$el.append(this.PD({
            buttonLabel: this.da.format("objectPanelUploadsPanelFacebookFolderTryAgainButtonLabel"),
            message: this.da.format("objectPanelUploadsPanelFacebookFolderErrorMessage")
        })) : b.remove()
    };
    f.lX = function (a) {
        var b = this.$(".facebookPhotosSignIn");
        a ? 1 > b.length && this.$el.append(this.E6({
            buttonLabel: this.da.format("objectPanelUploadsPanelFacebookFolderAuthorizeButton"),
            message: this.da.format("objectPanelUploadsPanelFacebookFolderSignInMessage")
        })) : b.remove()
    };

    function nW(a) {
        a.$(".facebookUploadDisabled");
        var b = $(a.l1({
            label: Ld(a.da)
        }));
        a.$el.prepend(b)
    };

    function pW(a, b, c) {
        b.addClass(a);
        b.on("animationend", function e() {
            $(this).off("animationend", e);
            $(this).removeClass(a)
        });
        setTimeout(function () {
            b.removeClass(a)
        }, c)
    };

    function qW() {}
    qW = Backbone.View.extend({
        className: "uploadsFolderInfo uploadsInfo"
    });
    f = qW.prototype;
    f.events = function () {
        return {
            "click .uploadsInfoTrash": this.trigger.bind(this, "trash")
        }
    };
    f.initialize = function (a) {
        this.gb = a.gb;
        this.u = a.u;
        this.ya = a.ya;
        this.Af = a.Af
    };
    f.render = function () {
        this.$el.html(this.template(this.Zh()));
        return this
    };
    f.Zh = function () {
        var a = jc(this.u),
            b = new EH(this.gb, a),
            c = this.gb.Qa() === this.ya,
            d = this.gb.shared,
            b = b.Tb(),
            b = a.format("objectPanelUploadsPanelFolderInfoHeader", b);
        return {
            isOwner: c,
            isShared: d,
            headerMessage: b,
            itemCount: a.format("objectPanelUploadsPanelFolderInfoItemCount", this.gb.itemCount),
            youSharedMessage: a.format("objectPanelUploadsPanelFolderInfoYouShared"),
            sharedWithYouMessage: a.format("objectPanelUploadsPanelFolderInfoSharedWithYou"),
            trashLabel: a.format("objectPanelUploadsPanelFolderInfoTrashLabel"),
            mediaWritesEnabled: this.Af
        }
    };
    f.template = _.template('\x3ch3\x3e\x3c%- headerMessage %\x3e\x3c/h3\x3e\x3cp class\x3d"uploadsFolderInfoItemCount"\x3e\x3c%- itemCount %\x3e\x3c/p\x3e\x3c% if (isShared \x26\x26 isOwner) { %\x3e\x3cp class\x3d"uploadsFolderInfoShared"\x3e\x3c%- youSharedMessage %\x3e\x3c/p\x3e\x3c% } else if (isShared) { %\x3e\x3cp class\x3d"uploadsFolderInfoShared"\x3e\x3c%- sharedWithYouMessage %\x3e\x3c/p\x3e\x3c% } %\x3e\x3c% if (isOwner \x26\x26 mediaWritesEnabled) { %\x3e\x3cbutton class\x3d"button buttonPlain uploadsInfoTrash"\x3e\x3c%- trashLabel %\x3e\x3c/button\x3e\x3c% } %\x3e');

    function rW() {}
    rW = Backbone.View.extend({
        className: "uploadsFolderItemInfo uploadsInfo"
    });
    f = rW.prototype;
    f.events = function () {
        return {
            "click .uploadsInfoDownload": this.trigger.bind(this, "download"),
            "click .uploadsInfoTrash": this.trigger.bind(this, "trash"),
            "change select": this.q7
        }
    };
    f.initialize = function (a) {
        this.NJ = a.NJ;
        this.rM = a.rM;
        this.gb = a.gb;
        this.sq = a.sq || [];
        this.item = a.item;
        this.da = a.da;
        this.Af = a.Af;
        this.title = a.title || this.item.getName();
        this.item.ac() && (this.title = this.item.ac().importFilename)
    };

    function sW(a) {
        var b = a.$("select").val();
        return a.sq.filter(function (a) {
            return a.G() === b
        })[0]
    }
    f.render = function () {
        this.$el.html(this.template(this.Zh()));
        this.$("select").val(this.gb.G());
        return this
    };
    f.Zh = function () {
        var a = this;
        return {
            title: this.title,
            downloadLink: this.NJ,
            moveOptions: this.rM,
            downloadOriginalTitle: this.da.format("objectPanelUploadsPanelItemInfoDownloadOriginal"),
            options: this.sq.map(function (b) {
                return _.extend({}, b, {
                    name: (new EH(b, a.da)).Tb()
                })
            }).map(this.t4),
            trashLabel: this.da.format("objectPanelUploadsPanelItemInfoTrash"),
            mediaWritesEnabled: this.Af
        }
    };
    f.q7 = function () {
        this.trigger("move", sW(this))
    };
    f.t4 = _.template('\x3coption value\x3d"\x3c%- id %\x3e"\x3e\x3c%- name %\x3e\x3c/option\x3e');
    f.template = _.template('\x3c% if (title) { %\x3e\x3ch3\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3c% } %\x3e\x3c% if (mediaWritesEnabled) { %\x3e\x3cbutton class\x3d"button buttonPlain uploadsInfoTrash"\x3e\x3c%- trashLabel %\x3e\x3c/button\x3e\x3c% } %\x3e\x3c% if (moveOptions) { %\x3e\x3cselect\x3e\x3c%\x3d options %\x3e\x3c/select\x3e\x3c% } %\x3e\x3c% if (downloadLink) { %\x3e\x3ca class\x3d"uploadsInfoDownload" title\x3d"\x3c%- downloadOriginalTitle %\x3e"\x3e\x26#11015;\x3c/a\x3e\x3c% } %\x3e');

    function tW() {
        var a = {
                Ma: "printOrderError__headerIcon"
            },
            a = a || {};
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        a = a.Ma;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg " + (a ? 'class\x3d"' + soy.$$escapeHtmlAttribute(a) + '"' : "") + ' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 95.8"\x3e\x3cpath d\x3d"M.4 90.2L46.6 2C48-.7 51.9-.7 53.3 2l46.2 88.2c1.3 2.5-.5 5.5-3.4 5.5H3.8c-2.9.1-4.7-3-3.4-5.5z"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M45.1 73.7c0-1.6.4-2.8 1.3-3.7.9-.8 2.1-1.2 3.8-1.2 1.6 0 2.8.4 3.7 1.3.9.8 1.3 2.1 1.3 3.6s-.4 2.7-1.3 3.6c-.9.9-2.1 1.3-3.7 1.3s-2.9-.4-3.8-1.3c-.9-.9-1.3-2.1-1.3-3.6zm8.6-9.9h-7l-1.5-28.2h10l-1.5 28.2z"/\x3e\x3c/svg\x3e')
    }

    function uW(a) {
        a = a || {};
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        a = a.Ma;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg " + (a ? 'class\x3d"' + soy.$$escapeHtmlAttribute(a) + '"' : "") + ' version\x3d"1.2" baseProfile\x3d"tiny" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 100 100"\x3e\x3ccircle cx\x3d"50" cy\x3d"50" r\x3d"50"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M69.5 25.8l-26 35.4L30.1 54c-3.3-2.1-5.6 2.9-3.8 4.6 1.8 1.7 18.2 16.6 18.2 16.6.5.4 1.2.4 1.7.1.2-.1.4-.3.5-.5 0 0 24.7-40.9 26.9-44.6 2.3-3.8-1.6-7.8-4.1-4.4z"/\x3e\x3c/svg\x3e')
    }

    function vW() {
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"18px" height\x3d"18px" viewBox\x3d"0 0 18 18" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg fill-rule\x3d"evenodd"\x3e\x3cpath d\x3d"M2.5 9c0 3.588 2.912 6.5 6.5 6.5s6.5-2.912 6.5-6.5S12.588 2.5 9 2.5A6.503 6.503 0 0 0 2.5 9zm14 0c0 4.14-3.36 7.5-7.5 7.5-4.14 0-7.5-3.36-7.5-7.5 0-4.14 3.36-7.5 7.5-7.5 4.14 0 7.5 3.36 7.5 7.5z"/\x3e\x3cpath d\x3d"M9.75 6.75h-1.5v-1.5h1.5v1.5zm0 6h-1.5v-4.5h1.5v4.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e')
    }

    function wW(a) {
        var b;
        b = {};
        soy.asserts.assertType(goog.isString(a.Se) || a.Se instanceof goog.soy.data.SanitizedContent, "fileType", a.Se, "string|goog.soy.data.SanitizedContent");
        var c = a.Se;
        soy.asserts.assertType(goog.isString(a.color) || a.color instanceof goog.soy.data.SanitizedContent, "color", a.color, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"32" height\x3d"40" viewBox\x3d"0 0 32 40" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cpath d\x3d"M-8-4h48v48H-8z"/\x3e\x3cpath d\x3d"M4 0C1.8 0 .02 1.8.02 4L0 36c0 2.2 1.78 4 3.98 4H28c2.2 0 4-1.8 4-4V12L20 0H4z" fill\x3d"' + soy.$$escapeHtmlAttribute(a.color) + '"/\x3e\x3cpath d\x3d"M20 0l12 12h-8.004A4 4 0 0 1 20 8.004V0z" fill-opacity\x3d".5" fill\x3d"#FFF" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + 'mix-blend-mode:lighten"/\x3e\x3ctext width\x3d"32" height\x3d"12" x\x3d"16" y\x3d"35" text-anchor\x3d"middle" fill\x3d"#FFF" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + "font-size: 10px; font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;\"\x3e" + soy.$$escapeHtml(c) + "\x3c/text\x3e\x3c/g\x3e\x3c/svg\x3e")
    }

    function hW(a) {
        a = a || {};
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        var b = a.Ma;
        soy.asserts.assertType(null == a.mi || goog.isBoolean(a.mi) || 1 === a.mi || 0 === a.mi, "withStar", a.mi, "boolean|null|undefined");
        a = a.mi;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg " + (b ? 'class\x3d"' + soy.$$escapeHtmlAttribute(b) + '"' : "") + '  width\x3d"20" height\x3d"15" viewBox\x3d"0 0 20 15" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath class\x3d"folderIcon__folder" fill\x3d"#FFF" d\x3d"M15.5 3H0v8.5c0 .828.672 1.5 1.5 1.5h14c.828 0 1.5-.672 1.5-1.5v-7c0-.828-.672-1.5-1.5-1.5M2 2h7L7 0H0v2h1"/\x3e' + (a ? '\x3cpath class\x3d"folderIcon__star" d\x3d"M17.83 9.827l-.51-1.074c-.476-1-1.242-1.007-1.72 0l-.51 1.074-1.065.16c-1.094.167-1.356.935-.573 1.728l.795.807-.197 1.196c-.18 1.087.467 1.536 1.423 1.013l.987-.538.987.54c.964.527 1.6.073 1.422-1.014l-.198-1.196.795-.807c.778-.788.527-1.56-.572-1.727l-1.066-.16z" fill\x3d"#F3B600"/\x3e' : "") + "\x3c/svg\x3e")
    }

    function gW(a) {
        a = a || {};
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        var b = a.Ma;
        soy.asserts.assertType(null == a.mi || goog.isBoolean(a.mi) || 1 === a.mi || 0 === a.mi, "withStar", a.mi, "boolean|null|undefined");
        a = a.mi;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg " + (b ? 'class\x3d"' + soy.$$escapeHtmlAttribute(b) + '"' : "") + ' width\x3d"18" height\x3d"15" viewBox\x3d"0 0 18 15" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath class\x3d"folderIcon__folder" d\x3d"M10.32 8.842c.127-.214.2-.466.2-.736V7.64c-.267-.33-.48-.713-.606-1.127-.027-.083-.04-.18-.115-.233-.742-.998-.093-1.186-.102-1.27 0-.418-.003-.837.002-1.254.016-.387.278-1.937 2.163-1.943h.01c1.885.006 2.147 1.556 2.163 1.943.006.417 0 .836.002 1.254-.01.084.64.272-.1 1.27-.076.053-.09.15-.117.233-.127.414-.34.796-.607 1.128v.466c0 .605.37 1.12.89 1.315.142.055 1.31.27 1.762.634.303.245.69.525 1.004 1.057.088.15.23 1.19.23 1.19 0 .387-.276.7-.65.7h-3.846l.092-.336s-.006-.782-.134-1.197c-.085-.33-.254-1.277-.674-1.614-.53-.422-.76-.68-1.57-1.01zm.408.735c-.523-.424-1.883-.674-2.05-.736-.6-.226-1.032-.825-1.032-1.528v-.54c.312-.386.558-.83.706-1.31.032-.097.048-.21.134-.272.86-1.16.106-1.378.117-1.475-.002-.486.004-.972-.003-1.457C8.582 1.808 8.277.008 6.087 0 3.883.007 3.58 1.807 3.56 2.258c-.006.485 0 .97-.002 1.457.01.097-.744.316.117 1.475.086.062.102.175.134.272.147.48.393.924.704 1.31v.54c0 .703-.43 1.302-1.032 1.53-.167.06-1.526.31-2.05.735-.35.284-.802.61-1.166 1.228C.163 10.98 0 12.187 0 12.187c0 .45.32.813.752.813h10.656c.433 0 .753-.363.753-.813 0 0-.163-1.208-.265-1.382-.172-.666-.815-.944-1.167-1.228z" fill\x3d"#FFF"/\x3e' + (a ? '\x3cpath class\x3d"folderIcon__star" d\x3d"M15.83 9.827l-.51-1.074c-.476-1-1.242-1.007-1.72 0l-.51 1.074-1.065.16c-1.094.167-1.356.935-.573 1.728l.795.807-.197 1.196c-.18 1.087.467 1.536 1.423 1.013l.987-.538.987.54c.964.527 1.6.073 1.422-1.014l-.198-1.196.795-.807c.778-.788.527-1.56-.572-1.727l-1.066-.16z" fill\x3d"#F3B600"/\x3e' : "") + "\x3c/svg\x3e")
    }

    function xW() {
        var a = {
                Ma: "addressDetailsAddress__expandAddressButtonIcon"
            },
            a = a || {};
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        a = a.Ma;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg  " + (a ? 'class\x3d"' + soy.$$escapeHtmlAttribute(a) + '"' : "") + ' viewBox\x3d"0 0 17 17" width\x3d"17" height\x3d"17" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cpath d\x3d"M8.783 14.483c-3.385 0-6.14-2.754-6.14-6.14 0-3.384 2.755-6.138 6.14-6.138 3.384 0 6.138 2.754 6.138 6.14 0 3.384-2.753 6.138-6.137 6.138m0-14.167C4.35.316.755 3.91.755 8.344s3.594 8.028 8.028 8.028c4.433 0 8.027-3.595 8.027-8.028S13.216.316 8.783.316"/\x3e\x3cpath d\x3d"M13.066 8.344c0-.522-.422-.944-.944-.944H9.727V5.005c0-.522-.422-.944-.944-.944-.523 0-.945.423-.945.945V7.4H5.444c-.523 0-.945.422-.945.944 0 .26.105.497.276.668.17.17.407.276.668.276h2.394v2.395c0 .26.106.497.277.668.17.172.407.278.668.278.522 0 .944-.423.944-.945V9.288h2.395c.522 0 .944-.422.944-.944"/\x3e\x3c/svg\x3e')
    }

    function ap(a) {
        a = a || {};
        soy.asserts.assertType(null == a.color || a.color instanceof goog.soy.data.SanitizedContent || goog.isString(a.color), "color", a.color, "null|string|undefined");
        var b = a.color;
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        a = a.Ma;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3csvg " + (a ? 'class\x3d"' + soy.$$escapeHtmlAttribute(a) + '" ' : "") + 'fill\x3d"' + soy.$$escapeHtmlAttribute(null == b ? "#FFF" : b) + '" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"-505 380 12 10"\x3e\x3cpath d\x3d"M-503 388h8v1h-8zM-494 382.2c-.4 0-.8.3-.8.8 0 .1 0 .2.1.3l-2.3.7-1.5-2.2c.3-.2.5-.5.5-.8 0-.6-.4-1-1-1s-1 .4-1 1c0 .3.2.6.5.8l-1.5 2.2-2.3-.8c0-.1.1-.2.1-.3 0-.4-.3-.8-.8-.8s-.8.4-.8.8.3.8.8.8h.2l.8 3.3h8l.8-3.3h.2c.4 0 .8-.3.8-.8 0-.4-.4-.7-.8-.7z"/\x3e\x3c/svg\x3e')
    };

    function XV(a, b) {
        var c = a.fp() && a.fp().starred,
            d = b.fp() && b.fp().starred;
        return c ^ d ? c ? -1 : 1 : (a.getName() || "").toLowerCase().localeCompare((b.getName() || "").toLowerCase())
    };

    function yW() {}
    yW = Backbone.View.extend({
        className: "uploadsFolderItem"
    });
    f = yW.prototype;
    f.initialize = function (a) {
        this.$a = a.$a;
        this.disabled = !1;
        this.model = a.model;
        this.av = a.av;
        this.di = a.di;
        this.da = a.da;
        this.Tj = void 0;
        this.root = a.root;
        (this.se = a.se) && this.listenTo(this.se, {
            complete: this.o4,
            fail: this.p4,
            update: this.qq
        })
    };
    f.events = function () {
        return {
            click: this.Bf,
            dragstart: this.Sr,
            mousedown: this.Tr
        }
    };
    f.Bf = function (a) {
        var b = a.target.classList.contains("uploadsInfoButton");
        if (!this.disabled)
            if (b)
                this.trigger("infoClick", this.model);
            else {
                var b = !1,
                    c = this.model.ac();
                a.target && $(a.target).is("img") ? b = Zg(a.target) > J.PH : 1 === $(a.target).find("img").length && (b = Zg($(a.target).find("img").get(0)) > J.PH);
                c ? this.$a.SQ(c, void 0, void 0, b) : this.se && this.se.ac() && this.$a.TQ(this.se, void 0, void 0, b)
            }
    };
    f.o4 = function () {
        this.Tj.remove();
        this.Tj = void 0;
        this.stopListening(this.se)
    };
    f.p4 = function () {
        this.fk(!0);
        this.Tj.$el.addClass("uploadProgressBarFail");
        this.stopListening(this.se);
        setTimeout(this.EW.bind(this), 1E3);
        setTimeout(this.trigger.bind(this, "uploadFail"), 5350)
    };
    f.Sr = function (a) {
        a.preventDefault();
        return !1
    };
    f.Tr = function (a) {
        vy();
        var b = a.target.classList.contains("uploadsInfoButton"),
            c = a.which == J.wh;
        return this.disabled || c || b || a.ctrlKey || this.hP(a)
    };
    f.NM = function (a, b) {
        function c() {
            d.$el.removeClass("uploadsFolderItemDragging")
        }
        var d = this,
            e = this.el.getBoundingClientRect();
        b ? (Ng(this.$a, Qg(e)),
            setTimeout(c, 600)) : (this.Bf(a),
            c())
    };
    f.render = function () {
        this.$el.addClass("uploadsFolderItemLoading");
        var a = this.model.XS(),
            b = this.el,
            a = a && a.type,
            c = this.da.vp(this.da.format("objectPanelLicenseExtended")),
            d = this.da.vp(this.da.format("objectPanelLicenseRoyaltyFree")),
            e = this.di;
        soy.asserts.assertType(null == a || a instanceof goog.soy.data.SanitizedContent || goog.isString(a), "licenseType", a, "null|string|undefined");
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "licenseTitleExtended", c, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "licenseTitleRoyaltyFree", d, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(e) || 1 === e || 0 === e, "showControls", e, "boolean");
        var e = !!e,
            g = '\x3cdiv class\x3d"uploadsFolderItemThumbnail"\x3e\x3cimg\x3e\x3c/div\x3e';
        if (null != a) {
            g += '\x3cdiv class\x3d"uploadsFolderItemLicense"';
            switch (goog.isObject(a) ? a.toString() : a) {
                case "ROYALTY_FREE":
                    g += 'title\x3d"' + soy.$$escapeHtmlAttribute(d) + '"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"24" height\x3d"24" viewBox\x3d"0 0 24 24" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3cdefs\x3e\x3cpath d\x3d"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0z" id\x3d"a"/\x3e\x3cfilter x\x3d"-50%" y\x3d"-50%" width\x3d"200%" height\x3d"200%" filterUnits\x3d"objectBoundingBox" id\x3d"b"\x3e\x3cfeOffset dy\x3d"1" in\x3d"SourceAlpha" result\x3d"shadowOffsetOuter1"/\x3e\x3cfeGaussianBlur stdDeviation\x3d"1" in\x3d"shadowOffsetOuter1" result\x3d"shadowBlurOuter1"/\x3e\x3cfeComposite in\x3d"shadowBlurOuter1" in2\x3d"SourceAlpha" operator\x3d"out" result\x3d"shadowBlurOuter1"/\x3e\x3cfeColorMatrix values\x3d"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" in\x3d"shadowBlurOuter1"/\x3e\x3c/filter\x3e\x3cmask id\x3d"c" x\x3d"0" y\x3d"0" width\x3d"20" height\x3d"20" fill\x3d"#fff"\x3e\x3cuse xlink:href\x3d"#a"/\x3e\x3c/mask\x3e\x3c/defs\x3e\x3cg fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cg transform\x3d"translate(2 2)"\x3e\x3cuse fill\x3d"#000" filter\x3d"url(#b)" xlink:href\x3d"#a"/\x3e\x3cuse stroke\x3d"#FFF" mask\x3d"url(#c)" stroke-width\x3d"2" fill\x3d"#9F72D7" xlink:href\x3d"#a"/\x3e\x3c/g\x3e\x3cpath d\x3d"M6 6h12v12H6z"/\x3e\x3cpath d\x3d"M15.3 9c-.72 0-1.4.295-1.885.806L12 11.128l-.76.705h.005L9.9 13.092a1.64 1.64 0 0 1-1.2.521c-.935 0-1.695-.795-1.695-1.78 0-.984.76-1.78 1.695-1.78.455 0 .88.185 1.22.543l.565.526.755-.705-.63-.585A2.618 2.618 0 0 0 8.7 9C7.21 9 6 10.274 6 11.833c0 1.56 1.21 2.834 2.7 2.834.72 0 1.4-.295 1.885-.806L12 12.544l.005.006.755-.717h-.005l1.345-1.258a1.64 1.64 0 0 1 1.2-.522c.935 0 1.695.796 1.695 1.78 0 .985-.76 1.78-1.695 1.78-.45 0-.88-.184-1.22-.542l-.57-.532-.755.706.635.59c.51.531 1.185.826 1.91.826 1.49 0 2.7-1.269 2.7-2.833C18 10.264 16.79 9 15.3 9z" fill\x3d"#FFF"/\x3e\x3c/g\x3e\x3c/svg\x3e');
                    break;
                case "EXTENDED":
                    g += 'title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"24" height\x3d"24" viewBox\x3d"0 0 24 24" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3cdefs\x3e\x3cpath d\x3d"M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0z" id\x3d"a"/\x3e\x3cfilter x\x3d"-50%" y\x3d"-50%" width\x3d"200%" height\x3d"200%" filterUnits\x3d"objectBoundingBox" id\x3d"b"\x3e\x3cfeOffset dy\x3d"1" in\x3d"SourceAlpha" result\x3d"shadowOffsetOuter1"/\x3e\x3cfeGaussianBlur stdDeviation\x3d"1" in\x3d"shadowOffsetOuter1" result\x3d"shadowBlurOuter1"/\x3e\x3cfeComposite in\x3d"shadowBlurOuter1" in2\x3d"SourceAlpha" operator\x3d"out" result\x3d"shadowBlurOuter1"/\x3e\x3cfeColorMatrix values\x3d"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0" in\x3d"shadowBlurOuter1"/\x3e\x3c/filter\x3e\x3cmask id\x3d"c" x\x3d"0" y\x3d"0" width\x3d"20" height\x3d"20" fill\x3d"#fff"\x3e\x3cuse xlink:href\x3d"#a"/\x3e\x3c/mask\x3e\x3c/defs\x3e\x3cg fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cg transform\x3d"translate(2 2)"\x3e\x3cuse fill\x3d"#000" filter\x3d"url(#b)" xlink:href\x3d"#a"/\x3e\x3cuse stroke\x3d"#FFF" mask\x3d"url(#c)" stroke-width\x3d"2" fill\x3d"#399BE6" xlink:href\x3d"#a"/\x3e\x3c/g\x3e\x3cpath d\x3d"M5 6h14v12H5z"/\x3e\x3cpath d\x3d"M14 10.762a1.7 1.7 0 0 0-.4.313l-1.34 1.258-.76.711-1.415 1.317a2.597 2.597 0 0 1-1.885.806c-1.49 0-2.7-1.275-2.7-2.834C5.5 10.774 6.71 9.5 8.2 9.5c.72 0 1.4.295 1.91.832l.63.585-.755.705-.565-.526a1.658 1.658 0 0 0-1.22-.543c-.935 0-1.695.796-1.695 1.78 0 .985.76 1.78 1.695 1.78.455 0 .88-.184 1.2-.521l1.34-1.259.76-.705 1.415-1.322c.3-.316.673-.549 1.085-.681v1.137zM16.372 13c-.251.653-.86 1.113-1.572 1.113-.45 0-.88-.184-1.22-.542l-.57-.532-.755.706.635.59c.51.531 1.185.826 1.91.826 1.27 0 2.336-.92 2.624-2.161h-1.052zM19 9.5h-1.5V8h-1v1.5H15v1h1.5V12h1v-1.5H19v-1z" fill\x3d"#FFF"/\x3e\x3c/g\x3e\x3c/svg\x3e');
                    break;
                default:
                    g += "\x3e"
            }
            g += "\x3c/div\x3e"
        }
        a = soydata.VERY_UNSAFE.ordainSanitizedHtml(g + (e ? '\x3cdiv class\x3d"uploadsControls"\x3e\x3cbutton class\x3d"button buttonPlain uploadsInfoButton"\x3ei\x3c/button\x3e\x3c/div\x3e' : ""));
        b.innerHTML = a;
        this.$el.toggleClass("uploadsFolderItemMovable", this.av);
        this.LA();
        this.se && !this.se.Tf && (b = this.$(".uploadsControls"),
            this.Tj || (this.Tj = new zW),
            this.Tj.render().$el.insertBefore(b));
        if (b = this.se)
            b = this.se,
            b = b.Tf && !b.media;
        b && this.EW();
        return this
    };
    f.LA = function () {
        function a() {
            d.off("load", a);
            e.$el.removeClass("uploadsFolderItemLoading")
        }
        var b, c, d, e = this;
        b = this.model.Vd().F() / this.model.Vd().D();
        c = this.$(".uploadsFolderItemThumbnail");
        c.css("padding-bottom", 100 * b + "%");
        d = c.find("img");
        d.on("load", a);
        b = this.model.Vd().Aa();
        OB(PB, d, b)
    };
    f.show = function () {
        this.Tj && this.qq()
    };
    f.hP = function (a) {
        var b, c, d = this.model.ac();
        b = a.clientX;
        c = a.clientY;
        var e = this.$el.clone().off();
        e.find(".uploadProgressBar").remove();
        e.find(".uploadsFolderItemLicense").remove();
        e.find(".uploadsControls").remove();
        this.trigger("pickedUp", this.model, e.find("img"));
        if (this.root) {
            b = new U(b, c, b, c);
            c = Qg(this.el.getBoundingClientRect());
            this.$el.addClass("uploadsFolderItemDragging");
            var g = !1;
            if (d) {
                var g = this.$a,
                    h;
                h = d.Va().Dc()[Fg];
                h = Dg({
                    id: d.G(),
                    version: d.Va().getVersion(),
                    files_: [{
                        page: 0,
                        quality: "THUMBNAIL",
                        url: e.find("img").attr("src")
                    }, {
                        page: 0,
                        quality: "SCREEN",
                        url: h.Aa(),
                        width: h.D(),
                        height: h.F()
                    }]
                });
                Og(g, h, c, e, b, g.SQ.bind(g, d));
                g = !0
            } else if (this.se) {
                d = this.$a;
                g = this.se;
                h = e.find("img").attr("src");
                var k = g.ac();
                k ? (h = Dg({
                        id: k.G(),
                        version: 1,
                        files_: [{
                            page: 0,
                            quality: "THUMBNAIL",
                            url: h
                        }, {
                            page: 0,
                            quality: "SCREEN",
                            url: h,
                            width: g.tb.width,
                            height: g.tb.height
                        }]
                    }),
                    Og(d, h, c, e, b, d.TQ.bind(d, g)),
                    g = !0) : g = !1
            }
            g && this.$P(a)
        }
        return !0
    };
    f.fk = function (a) {
        this.disabled = a
    };

    function AW(a, b) {
        a.av = b;
        a.$el.toggleClass("uploadsFolderItemMovable", a.av)
    }
    f.EW = function () {
        this.Tj && this.Tj.remove();
        this.Tj = void 0;
        this.$el.addClass("uploadsFolderItemFailed");
        this.$el.find("img").attr("title", this.da.format("objectPanelUploadsPanelUploadFailed"));
        AW(this, !1);
        this.fk(!0)
    };
    f.Gw = P.method(function (a, b) {
        var c = this;
        return a ? P.try(function () {
            c.$el.toggleClass("doNotAnimate", !!b).addClass("doNotTransition").height(c.$el.height())
        }).delay(J.Qc).then(function () {
            c.$el.removeClass("doNotTransition").addClass("uploadsFolderItemHidden").height("")
        }).delay(350) : (this.$el.removeClass("doNotAnimate uploadsFolderItemHidden"),
            P.resolve())
    });
    f.qq = function () {
        BW(this.Tj, this.se.un)
    };
    f.$P = function (a) {
        function b(c) {
            3 < Math.sqrt(Math.pow(c.clientX - a.clientX, 2) + Math.pow(c.clientY - a.clientY, 2)) && (e = !0,
                d.root.off("mousemove", b))
        }

        function c(a) {
            d.root.off("mousemove", b);
            d.root.off("mouseup", c);
            d.NM(a, e)
        }
        var d = this,
            e = !1;
        d.root.on("mouseup", c);
        d.root.on("mousemove", b)
    };

    function CW(a) {
        this.$a = a.$a;
        this.pc = a.pc;
        this.na = null;
        this.zp = !0
    }
    CW.prototype.fetch = function (a) {
        function b(a) {
            return Tj({
                id: a.G(),
                media: a,
                thumbnail: a.Va().Dc()[aC],
                type: "MEDIA"
            })
        }
        var c = this;
        a = aE((new $D).bt(!0).Zs(!1).ho(), [zg, Bg]).Ig(a);
        null != c.na && a.aj(c.na);
        return CD(this.pc, a).then(function (a) {
            0 !== a.media.length && Jg(c.$a, a.media);
            c.na = a.na;
            c.zp = null != c.na;
            return P.resolve(a.media.map(b))
        })
    };
    CW.prototype.yr = function () {
        return this.zp
    };

    function DW(a) {
        this.$a = a.$a;
        this.ki = a.ki;
        this.ZP = a.ZP;
        this.na = null;
        this.zp = !0
    }
    DW.prototype.fetch = function (a) {
        function b(a) {
            return Tj(a)
        }
        var c = this;
        a = (new BH).ik(this.ZP).Ig(a).aj(this.na);
        return yH(this.ki, a).tap(function (a) {
            c.na = a.dc();
            c.zp = !!c.na
        }).tap(function (a) {
            a = (a.uf() || []).map(function (a) {
                return a.ac()
            }).filter(Boolean);
            Jg(c.$a, a)
        }).then(function (a) {
            return (a.uf() || []).map(b)
        })
    };
    DW.prototype.yr = function () {
        return this.zp
    };

    function EW(a) {
        this.$a = a.$a;
        this.uc = a.uc;
        this.gb = a.gb;
        this.na = null;
        this.zp = !0
    }
    EW.prototype.fetch = function (a) {
        function b(a) {
            return a.uf() || []
        }
        var c = this;
        a = Vj((new Uj).aj(this.na).ik(Mg(this.gb))).Ig(a);
        return this.uc.Kz(a).tap(function (a) {
            c.na = a.dc();
            c.zp = !!c.na
        }).tap(function (a) {
            a = b(a).map(function (a) {
                return a.ac()
            });
            Jg(c.$a, a)
        }).then(b)
    };
    EW.prototype.yr = function () {
        return this.zp
    };

    function FW(a) {
        this.mn = this.Z = void 0;
        this.Lu = a.ya === a.gb.Qa();
        this.$a = a.$a;
        this.ja = a.ja;
        this.BS = this.Kh = !1;
        this.gb = a.gb;
        this.sq = a.sq;
        this.uc = a.uc;
        this.nz = !1;
        this.Qh = [];
        this.ta = new kW;
        this.pc = a.pc;
        this.da = a.da;
        this.ka = a.ka;
        this.Vs = a.Vs;
        this.Of = a.Of;
        this.listenTo(this.Of, "create", this.x7);
        this.ya = a.ya;
        this.Ch = a.Ch;
        this.fE = a.fE;
        this.oo = a.oo;
        this.di = a.di;
        this.view = new GW({
            disabled: a.disabled,
            model: this.gb,
            da: this.da,
            oo: a.oo,
            Nk: a.Nk,
            Af: this.ja.ba.get(ag)
        });
        this.listenTo(this.view, {
            upload: this.pH,
            share: this.v6
        })
    }
    f = FW.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.Eh = function () {
        this.zT = void 0;
        this.$f && (UU(this.ta, this.$f.$el),
            this.$f = void 0)
    };
    f.fetch = function (a) {
        a = a || 25;
        this.Kh || this.nz || !this.yr() || (this.Kh = !0,
            this.view.Fg(!0),
            this.fE.fetch(a).bind(this).then(this.j3).catch(this.l3))
    };
    f.wy = function (a) {
        a = this.ta.jK(a);
        isFinite(a) ? this.fetch(a) : this.fetch()
    };
    f.getElement = function () {
        return this.view.$el
    };

    function HW(a, b) {
        for (var c = 0; c < a.Qh.length; c++) {
            var d = a.Qh[c];
            if (d.model === b || d.se === b)
                return d
        }
        return null
    }
    f.bl = function () {
        return this.ta.bl()
    };

    function IW(a) {
        return a.Of.tE(a.gb.G()).filter(function (b) {
            return !HW(a, b)
        }).filter(function (b) {
            return b.Tf && !b.media ? !1 : b.Tf && b.ac() ? -1 === a.Vs.indexOf(b.ac().G()) : !0
        })
    }
    f.yr = function () {
        return this.fE.yr()
    };
    f.moveItem = function (a, b, c) {
        var d = HW(this, a);
        d && (this.Eh(),
            this.view.Qs(1 === this.Qh.length),
            b = wj(xj(new vj, Mg(this.gb)).MX([a.G()]), Mg(b)),
            P.settle([this.uc.t1(b), d.Gw(!0, c)]).then(function (b) {
                    b[0].isFulfilled() ? this.removeItem(a) : JW(this, a)
                }
                .bind(this)))
    };
    f.SU = function (a) {
        var b;
        if (a === this.zT)
            this.Eh();
        else {
            var c;
            c = (new rW({
                NJ: this.ja.ba.get(Mf),
                rM: this.gb !== Jj,
                gb: this.gb,
                sq: this.sq,
                item: a,
                title: a.getName() || "",
                da: this.da,
                Af: this.ja.ba.get(ag)
            })).render();
            c.on({
                move: this.moveItem.bind(this, a),
                trash: this.p7.bind(this, a),
                download: this.E_.bind(this, a)
            });
            b = HW(this, a);
            this.Eh();
            c = (new KW({
                ri: !1,
                Jq: !0,
                content: c.$el,
                da: this.da,
                target: b.$el
            })).render();
            c.on("close", this.Eh, this);
            this.$f = c;
            TU(this.ta, b.$el, this.$f.$el);
            this.$f.show();
            this.zT = a;
            this.Ch && this.Ch(this.$f.getContent(), !0)
        }
    };
    f.j3 = function (a) {
        this.BS = !0;
        this.Kh = !1;
        LW(this, IW(this).map(this.cW, this));
        LW(this, a.filter(this.V0, this).map(this.F5, this));
        this.view.Fg(!1);
        this.view.Qs(1 > this.Qh.length);
        a = this.view;
        var b = a.$(".uploadsFolderContentUploadButton");
        if (!a.Af)
            b.remove(),
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml(Ld(a.da)),
            soy.asserts.assertType(b instanceof soydata.SanitizedHtml || b instanceof soydata.UnsanitizedText || goog.isString(b), "label", b, "soydata.SanitizedHtml"),
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"feedback feedback--error"\x3e' + soy.$$escapeHtml(b) + "\x3c/p\x3e").toString(),
            a.$el.prepend(b);
        else if (a.oo && 1 > b.length) {
            var b = a.da.format("objectPanelUploadsPanelUploadButtonLabel"),
                c = !!a.disabled;
            soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "label", b, "string|goog.soy.data.SanitizedContent");
            soy.asserts.assertType(goog.isBoolean(c) || 1 === c || 0 === c, "disabled", c, "boolean");
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cbutton class\x3d"button buttonBlock uploadsFolderContentUploadButton" ' + (c ? "disabled" : "") + "\x3e" + soy.$$escapeHtml(b) + "\x3c/button\x3e").toString();
            a.$el.prepend(b)
        }
        this.trigger("fetch")
    };
    f.V0 = function (a) {
        function b(a) {
            var b = "MEDIA" === a.Ab(),
                c = a.ac();
            a = "FONT" !== a.ac().Ab();
            return b && (!c || a)
        }
        var c = this;
        return function (a) {
            return c.Qh.every(function (b) {
                return b.se && b.se.ac() ? b.se.ac().G() !== a.G() : !0
            })
        }(a) && -1 === c.Vs.indexOf(a.G()) && b(a)
    };

    function MW(a) {
        function b() {
            if (!e.Lu)
                return e.ka.Qa(e.gb.Qa())
        }

        function c() {
            NW(e.view, !1)
        }

        function d(a, b) {
            a && (e.Lu || b) && (e.mn = b ? b : void 0,
                e.Z = a,
                NW(e.view, !0),
                OW(e.view, !1, PW(e)))
        }
        var e = a,
            g;
        g = (new Xj).ik(Mg(a.gb));
        a.uc.Gc(g).then(function (a) {
            a = a.Gc();
            var g = a.Cm();
            a && (e.gb = a);
            a = "ADMIN" === g;
            var g = "OWNER" === g,
                l = e.gb.me(),
                m = e.gb === Ij;
            !a && !g || l || m ? c() : P.all([e.ka.wa(e.gb.wa()), b()]).spread(d).catch(c)
        }).catch(c)
    }
    f.l3 = function () {
        this.Kh = !1;
        this.nz = !0;
        this.view.Fg(!1);
        this.view.Rs(!0)
    };
    f.EF = function (a) {
        this.removeItem(a);
        this.trigger("trash", a.G())
    };
    f.r4 = function (a) {
        var b = HW(this, a);
        b && (b.model = b.model.Fx({
                id: a.ac().G()
            }),
            b.fk(!1),
            AW(b, !0))
    };

    function LW(a, b) {
        var c = $(b.map(function (a) {
            return a.el
        }));
        a.Qh = a.Qh.concat(b);
        pW("uploadsItemAppearing", c, 2200);
        a.ta.push(c);
        b.forEach(function (a) {
            a.show()
        })
    }
    f.remove = function () {
        this.Qh.forEach(function (a) {
            a.remove()
        });
        this.iq && this.iq.remove();
        this.stopListening()
    };
    f.removeItem = function (a) {
        a = HW(this, a);
        a.remove();
        this.Qh.splice(this.Qh.indexOf(a), 1);
        this.view.Qs(1 > this.Qh.length)
    };
    f.render = function () {
        this.view.render();
        this.view.$el.prepend(this.ta.$el);
        this.view.Fg(!0);
        return this
    };
    f.F5 = function (a) {
        a = (new yW({
            $a: this.$a,
            model: a,
            av: !0,
            di: this.di,
            da: this.da,
            root: $(window)
        })).render();
        this.listenTo(a, {
            infoClick: this.SU,
            pickedUp: this.trigger.bind(this, "pickedUp")
        });
        return a
    };
    f.cW = function (a) {
        var b = (new yW({
            $a: this.$a,
            model: Tj({
                id: "",
                thumbnail: {
                    height: a.tb.height,
                    url: a.Hm(),
                    width: a.tb.width
                },
                type: "MEDIA"
            }),
            av: !1,
            di: !0,
            da: this.da,
            root: $(window),
            se: a
        })).render();
        this.listenTo(b, {
            infoClick: this.SU,
            pickedUp: this.trigger.bind(this, "pickedUp")
        });
        this.listenTo(a, "start", this.r4);
        return b
    };

    function JW(a, b) {
        if (b = HW(a, b))
            b.Gw(!1),
            a.view.Qs(!1)
    }
    f.x7 = function () {
        function a(a) {
            a.fk(!0)
        }
        var b = IW(this);
        !this.dz() || 1 > b.length || (b = b.map(this.cW, this),
            b.forEach(a),
            QW(this, b),
            this.view.Qs(!1))
    };
    f.dz = function () {
        return this.BS
    };

    function QW(a, b) {
        var c = $(b.map(function (a) {
            return a.el
        }));
        a.Qh = b.concat(a.Qh);
        pW("uploadsItemUploading", c, 600);
        a.ta.unshift(c);
        b.forEach(function (a) {
            a.show()
        })
    }
    f.pH = function (a) {
        var b = this.gb === Jj;
        this.oo && (b ? 0 < a.length && this.$a.Qx(this.gb, "button").upload(a) : this.$a.pH(this.gb, a, "button"))
    };
    f.v6 = function (a, b) {
        function c(a, b) {
            "UNSHARED" === a ? PW(d) && (d.Lu || window.confirm(d.da.format("objectPanelUploadsPanelSharePopOverUnshareConfirmation"))) && (RW(d, d.Z.G(), !1),
                d.view.fk(!d.Lu),
                d.trigger("disabled", !d.Lu)) : (RW(d, a, b),
                d.view.fk(!1),
                d.trigger("disabled", !1))
        }
        var d = this,
            e;
        this.Z && (e = d.Lu ? this.da.format("objectPanelUploadsPanelSharePopOverPrivateLabel") : Nd(this.da, this.mn.Tb() || this.mn.rg()),
            e = [{
                id: "UNSHARED",
                wP: !PW(this),
                title: e
            }, {
                id: this.Z.G(),
                wP: PW(this),
                title: this.Z.Tb() || this.da.format("objectPanelUploadsPanelSharePopOverPublicLabel")
            }],
            this.iq && (d.stopListening(this.iq),
                this.iq.remove()),
            this.iq = new SW({
                title: this.da.format("objectPanelUploadsPanelSharePopOverTitle")
            }),
            TW(this.iq, e),
            this.iq.iw(a, b),
            this.listenTo(this.iq, "change", c))
    };

    function RW(a, b, c) {
        function d() {
            OW(e.view, !1, PW(e))
        }
        var e = a;
        c = c ? "EDITOR" : void 0;
        OW(e.view, !0);
        b = Qj(a.gb, b, c);
        a.uc.GP(b).then(function (a) {
            a && a.Gc() && a.Gc().G() === e.gb.G() ? (e.gb = a.Gc(),
                OW(e.view, !1, PW(e))) : d()
        }).catch(d)
    }

    function PW(a) {
        return 0 < (a.gb.Wf() && a.gb.Wf().getEntries() || []).filter(function (b) {
            return a.Z && b.wa() === a.Z.G() && "EDITOR" === b.Cm()
        }).length
    }
    f.p7 = function (a) {
        function b() {
            return c().then(function (a) {
                return KD(g.pc, a.G(), a.Va().getVersion())
            })
        }

        function c() {
            return P.try(function () {
                return a.ac() || ED(g.pc, a.G(), dE(new jC))
            })
        }

        function d(b) {
            b.isFulfilled() ? g.EF(a) : JW(g, a)
        }
        var e = HW(this, a),
            g = this;
        e && (this.Eh(),
            P.settle([b(), e.Gw(!0)]).get(0).then(d))
    };
    f.E_ = function (a) {
        var b = this;
        (function () {
            var c = a.G(),
                d = new jC;
            d.includeImportFileUrl = !0;
            d = dE(d);
            return ED(b.pc, c, d)
        })().then(function (a) {
            a = a.Va().importFileUrl;
            var b = $("#canvaDownloadIframe");
            1 > b.length && (b = $("\x3ciframe /\x3e", {
                id: "canvaDownloadIframe"
            }).appendTo("body"));
            b.attr("src", a)
        })
    };

    function GW() {}
    GW = Backbone.View.extend({
        className: "uploadsFolderContent"
    });
    f = GW.prototype;
    f.events = function () {
        return {
            "change .uploadsFolderContentFileInput": this.U2,
            "click .uploadsFolderContentUploadButton": this.n4,
            "click .uploadsFolderContentShareButton:not(.buttonSpinner)": this.W3
        }
    };
    f.initialize = function (a) {
        this.DY = "image/jpeg,image/png,image/raw,image/svg+xml,image/x-fuji-raf";
        this.vi = new HU;
        this.oo = a.oo;
        this.disabled = a.disabled;
        this.da = a.da;
        this.Nk = a.Nk || this.da.format("objectPanelUploadsPanelDragIn");
        this.model = a.model;
        this.Af = a.Af
    };
    f.render = function () {
        var a = this;
        this.Af && this.$el.html(UW({
            accept: this.DY
        }).toString());
        this.$el.toggleClass("uploadsFolderContentChristmas", function () {
            var b = a.model.getName() ? a.model.getName().toLowerCase() : "";
            return -1 < ["christmas", "xmas", "x-mas"].indexOf(b)
        }());
        this.$el.append(this.vi.render().$el);
        this.fk(this.disabled);
        return this
    };
    f.U2 = function () {
        var a;
        a = this.$(".uploadsFolderContentFileInput")[0].files;
        a.length && this.trigger("upload", a)
    };
    f.W3 = function (a) {
        var b = a.target.getBoundingClientRect();
        this.trigger("share", b.right, b.top + b.height / 2);
        $(a.target).blur()
    };
    f.n4 = function () {
        this.$(".uploadsFolderContentFileInput").click()
    };
    f.Fg = function (a) {
        a ? this.vi.show() : this.vi.hide()
    };
    f.fk = function (a) {
        this.disabled = a;
        this.$el.toggleClass("uploadsFolderContentDisabled", a);
        this.$el.find(".uploadsFolderContentUploadButton").prop("disabled", a)
    };
    f.Qs = function (a) {
        var b = this.$(".uploadsFolderContentEmptyMessage");
        a && this.Af ? 1 > b.length && this.$el.append(VW({
            Nk: this.Nk
        }).toString()) : b.remove();
        this.$el.toggleClass("uploadsFolderContentEmpty", a)
    };
    f.Rs = function (a) {
        var b = this.$(".uploadsFolderContentErrorMessage");
        a ? 1 > b.length && this.$el.append(WW({
            message: this.da.format("objectPanelUploadsPanelFolderContentLoadingError")
        }).toString()) : b.remove()
    };

    function NW(a, b) {
        var c = a.$(".uploadsFolderContentShareButton");
        b ? 1 > c.length && a.$el.prepend(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cbutton class\x3d"button buttonBlock uploadsFolderContentShareButton"\x3e\x3cspan class\x3d"spinner"\x3e\x3c/span\x3e\x3c/button\x3e').toString()) : c.remove();
        a.$el.toggleClass("uploadsFolderContentShareable", b)
    }

    function OW(a, b, c) {
        a = a.$(".uploadsFolderContentShareButton");
        a.toggleClass("buttonSpinner", b);
        a.toggleClass("uploadsFolderContentShareButtonShared", c)
    };

    function UW(a) {
        soy.asserts.assertType(goog.isString(a.accept) || a.accept instanceof goog.soy.data.SanitizedContent, "accept", a.accept, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cinput class\x3d"uploadsFolderContentFileInput" type\x3d"file" accept\x3d"' + soy.$$escapeHtmlAttribute(a.accept) + '" multiple\x3e\x3cdiv class\x3d"uploadsFolderContentDropOverlay"\x3e\x3c/div\x3e\x3cdiv class\x3d"uploadsFolderDropIcon"\x3e\x3c/div\x3e')
    }

    function WW(a) {
        soy.asserts.assertType(goog.isString(a.message) || a.message instanceof goog.soy.data.SanitizedContent, "message", a.message, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"uploadsFolderContentErrorMessage"\x3e' + soy.$$escapeHtml(a.message) + "\x3c/p\x3e")
    }

    function VW(a) {
        soy.asserts.assertType(goog.isString(a.Nk) || a.Nk instanceof goog.soy.data.SanitizedContent, "emptyPrompt", a.Nk, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"uploadsFolderContentEmptyMessage"\x3e' + soy.$$escapeHtml(a.Nk) + "\x3c/p\x3e")
    };

    function XW() {}
    XW = Backbone.View.extend({
        className: "uploadsFolder"
    });
    f = XW.prototype;
    f.close = function () {
        this.$el.removeClass("uploadsFolderOpen")
    };
    f.events = function () {
        return {
            "blur .uploadsFolderName \x3e input": this.B3,
            "click .uploadsFolderName \x3e span": this.A3,
            "click .uploadsFolderThumbnail": this.YU,
            dragenter: this.L2,
            dragleave: this.M2,
            dragstart: this.Sr,
            drop: this.gn,
            "mouseover .uploadsFolderThumbnail": this.m4,
            "mouseout .uploadsFolderThumbnail": this.l4,
            "focus .uploadsFolderName \x3e input": this.C3,
            "keypress .uploadsFolderName \x3e input": this.D3
        }
    };
    f.initialize = function (a) {
        this.ri = a.ri;
        this.nx = a.nx;
        this.Yb = a.Yb;
        this.disabled = !1;
        this.model = a.model;
        this.cv = !1;
        this.da = a.da;
        this.PF = -1;
        this.aW = !1;
        this.di = a.di;
        this.aa = a.aa
    };

    function YW(a, b, c) {
        a = a.el.getBoundingClientRect();
        return b >= a.left && b <= a.right && c >= a.top && c <= a.bottom
    }

    function ZW(a) {
        function b() {
            return k.model.G().split("").reduce(function (a, b) {
                return a + b.charCodeAt(0)
            }, 0)
        }
        var c = "rgba(159, 109, 218, 1);rgba(250, 204, 51, 1);rgba(235, 78, 135, 1);rgba(80, 154, 210, 1);rgba(243, 149, 48, 1);rgba(226, 70, 51, 1);rgba(126, 198, 100, 1);rgba(49, 70, 146, 1)".split(";"),
            d = !!a.model.G(),
            e = !!a.model.Vd(),
            g = !!a.model.me(),
            h = "LOGOS" === a.model.me(),
            k = a;
        return e ? "" : h && a.Yb ? "#" + a.Yb : d && !g ? c[b() % c.length] : "rgba(217, 218, 221, 1)"
    }

    function $W(a, b, c) {
        return a.ri && YW(a, b, c) && !a.mp()
    }
    f.mp = function () {
        return this.$el.hasClass("uploadsFolderOpen")
    };
    f.L2 = function (a) {
        this.ri && (this.$el.addClass("uploadsFolderDropping"),
            this.mp() || (this.aa.clearTimeout(this.PF),
                this.PF = this.aa.setTimeout(this.YU.bind(this, a), 1E3)))
    };
    f.M2 = function (a) {
        YW(this, a.originalEvent.clientX, a.originalEvent.clientY) || (this.aa.clearTimeout(this.PF),
            this.PF = -1,
            this.$el.removeClass("uploadsFolderDropping"))
    };
    f.Sr = function (a) {
        a.preventDefault();
        return !1
    };
    f.gn = function (a) {
        var b;
        try {
            b = a.originalEvent.dataTransfer.files
        } catch (c) {}
        this.$el.removeClass("uploadsFolderDropping");
        b && b.length && this.ri && !this.disabled && (a.preventDefault(),
            a.stopPropagation(),
            this.trigger("drop", this.model, b))
    };
    f.A3 = function () {
        this.disabled || (this.nx ? aX(this, !0) : this.trigger("click", this.model))
    };
    f.B3 = function () {
        this.cv && (this.cv = !1,
            bX(this))
    };
    f.C3 = function () {
        this.cv = !0
    };
    f.D3 = function (a) {
        13 === a.which && bX(this)
    };
    f.YU = function (a) {
        this.disabled || (a = a.target.classList.contains("uploadsInfoButton"),
            this.trigger(a ? "infoClick" : "click", this.model))
    };
    f.m4 = function () {
        this.$el.addClass("uploadsFolderHover")
    };
    f.l4 = function () {
        this.$el.removeClass("uploadsFolderHover")
    };
    f.open = function () {
        this.$el.addClass("uploadsFolderOpen")
    };
    f.render = function () {
        var a = !this.nx || this.disabled,
            b = new EH(this.model, this.da),
            c = this.model.me();
        this.cv = !1;
        this.$el.toggleClass("uploadsFolderAllowDrop", this.ri);
        this.$el.toggleClass("uploadsFolderStaticName", a);
        this.$el.attr("title", b.Tb());
        c ? this.$el.attr("data-system-folder", c) : this.$el.removeAttr("data-system-folder");
        this.$el.html(this.template(this.Zh()));
        this.LA();
        aX(this, this.aW);
        return this
    };
    f.LA = function () {
        function a() {
            c.off("load", a);
            e.$el.removeClass("uploadsFolderLoading")
        }
        var b, c, d = !1,
            e = this;
        b = this.$(".uploadsFolderThumbnail");
        b.addClass(function () {
            var a = e.model.Vd();
            return a && a.F() > a.D() ? "uploadsFolderThumbnailPortrait" : "uploadsFolderThumbnailLandscape"
        }());
        b.css("background-color", ZW(this));
        b.toggleClass("uploadsFolderThumbnailDefault", !this.model.Vd());
        d = "LOGOS" === this.model.me();
        c = b.children("img");
        c.on("load", a);
        OB(PB, c, function () {
            var a = e.model.Vd();
            return a ? a.Aa() : d ? "https://static.canva.com/static/images/logos_folder_thumbnail_transparent_bg.png" : "https://static.canva.com/static/images/default_folder_thumbnail_transparent_bg.png"
        }())
    };
    f.Zh = function () {
        return _.extend({}, this.model, {
            name: (new EH(this.model, this.da)).Tb(),
            shared: this.model.shared,
            showControls: this.di
        })
    };
    f.show = function () {
        this.$el.addClass("uploadsFolderLoading")
    };
    f.YQ = function () {
        var a = this;
        this.$el.addClass("uploadsFolderZoomIn");
        this.aa.setTimeout(function () {
            a.$el.removeClass("uploadsFolderTransparent");
            a.$el.removeClass("uploadsFolderZoomIn")
        }, 500)
    };
    f.template = _.template('\x3cdiv class\x3d"uploadsFolderThumbnail"\x3e\x3cimg\x3e\x3c% if (showControls) { %\x3e\x3cdiv class\x3d"uploadsControls"\x3e\x3c% if (shared) { %\x3e\x3cspan class\x3d"uploadsInfoShared"\x3eshared\x3c/span\x3e\x3c% } %\x3e\x3cbutton class\x3d"button buttonPlain uploadsInfoButton"\x3ei\x3c/button\x3e\x3c/div\x3e\x3c% } %\x3e\x3c/div\x3e\x3cdiv class\x3d"uploadsFolderName"\x3e\x3cinput type\x3d"text" value\x3d"\x3c%- name %\x3e"\x3e\x3cspan\x3e\x3c%- name %\x3e\x3c/span\x3e\x3c/div\x3e');
    f.fk = function (a) {
        this.disabled = a
    };
    f.Gw = P.method(function (a) {
        var b = this;
        return a ? P.try(function () {
            b.$el.addClass("doNotTransition");
            b.$el.height(b.$el.height())
        }).delay(J.Qc).then(function () {
            b.$el.removeClass("doNotTransition");
            b.$el.addClass("uploadsFolderHidden");
            b.$el.height("")
        }).delay(300) : (this.$el.removeClass("uploadsFolderHidden"),
            P.resolve())
    });

    function aX(a, b) {
        a.cv = !1;
        a.aW = b;
        a.$el.toggleClass("uploadsFolderRenaming", b);
        b && (b = a.$(".uploadsFolderName \x3e input"),
            b.val(a.model.getName()),
            b.select(),
            a.cv = !0)
    }

    function cX(a) {
        var b;
        b = a.$(".uploadsFolderThumbnail");
        b.css("background-color", "rgba(217, 218, 221, 1)");
        a.aa.setTimeout(function () {
            b.css("background-color", ZW(a))
        }, J.Qc)
    }

    function bX(a) {
        var b = Md(a.da),
            b = a.$(".uploadsFolderName \x3e input").val().trim() || b;
        a.trigger("rename", a.model, b)
    };

    function dX(a) {
        this.Yb = a.Yb;
        this.$a = a.$a;
        this.na = null;
        this.QJ = this.zD = void 0;
        this.Qk = a.Qk;
        this.ly = a.ly;
        this.Ok = a.Ok;
        this.ja = a.ja;
        this.Kh = !1;
        this.uc = a.uc;
        this.ki = a.ki;
        this.Fi = [];
        this.nz = !1;
        this.ta = new kW;
        this.listenTo(this.ta, "redraw", this.r3);
        this.pc = a.pc;
        this.u = a.u;
        this.pM = !0;
        this.MF = this.MF.bind(this);
        this.ka = a.ka;
        this.Vs = [];
        this.Of = a.Of;
        this.ya = a.ya;
        this.rD = [];
        this.aa = a.aa;
        this.Ch = a.Ch;
        this.gd = a.gd;
        this.view = new eX({
            da: jc(this.u),
            Rn: this.ja.ba.get(Pf) && !this.Ok,
            root: a.root
        });
        this.listenTo(this.view, {
            close: this.hv,
            drop: this.gn,
            drag: this.K2,
            dragScroll: this.N2,
            folderUpgradeCta: this.b3
        });
        this.Ok && (a = new fX({
                u: this.u
            }),
            this.listenTo(a, "click", this.F3),
            this.Cp = a)
    }

    function gX(a, b, c) {
        return a.Fi.filter(function (a) {
                return !hX(this, a.model) && $W(a, b, c)
            }
            .bind(a))[0]
    }
    f = dX.prototype;
    f.b3 = function () {
        var a = this.gd;
        a.H.Ga(Tl("object_panel_uploads", "top", "photo_folders"));
        qo(a, iX)
    };
    f.hv = function () {
        this.Eh()
    };
    f.K2 = function (a, b) {
        function c() {
            e && d.view.br.addClass("uploadsFolderItemCloneOverTarget").removeClass("uploadsFolderItemCloneNotOverTarget")
        }
        var d = this;
        jX(this, a, b);
        var e = gX(this, a, b);
        e !== this.zD && (this.zD && this.view.br.addClass("uploadsFolderItemCloneNotOverTarget").removeClass("uploadsFolderItemCloneOverTarget"),
            this.zD = e,
            this.QJ && clearTimeout(this.QJ),
            this.QJ = setTimeout(c, 300))
    };
    f.N2 = function (a) {
        this.hN && this.trigger("dragScroll", a)
    };
    f.gn = function (a, b) {
        function c() {
            kX(e.view, "uploadsFolderItemCloneDropping");
            d.$el.toggleClass("uploadsFolderDroppedOn", !0);
            setTimeout(function () {
                d.$el.toggleClass("uploadsFolderDroppedOn", !1)
            }, 500)
        }
        var d, e = this,
            g = this.hN,
            h = this.wV,
            k = this.vV;
        jX(this, -1, -1);
        this.hN = this.vV = this.wV = this.zD = void 0;
        a = (d = gX(this, a, b)) && d.model;
        g && a && a !== k && !hX(e, a) ? (c(),
            h.moveItem(g, a, !0)) : e.Jp || kX(this.view, "uploadsFolderItemCloneHidden")
    };
    f.off = Backbone.Events.off;
    f.listenTo = Backbone.Events.listenTo;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.Eh = function () {
        var a;
        this.yT = void 0;
        this.$f && (UU(this.ta, this.$f.$el),
            this.Q0 = this.$f.yl,
            this.$f = void 0,
            lX(this) || this.sw());
        this.Jp && (a = this.Gc(this.Jp),
            this.cu.remove(),
            this.cu = void 0,
            mX(this, a).close(),
            this.Jp = void 0,
            nX(this.view, !1))
    };
    f.GR = function (a) {
        var b = XW,
            c = a.Qa() === this.ya,
            d = !!a.me();
        a = new b({
            ri: !0,
            nx: c && !d,
            Yb: this.Yb,
            model: a,
            da: jc(this.u),
            di: !a.me(),
            aa: this.aa
        });
        this.listenTo(a, {
            click: this.HM,
            drop: this.MP,
            infoClick: this.Y2,
            rename: this.E5
        });
        a.render().show();
        return a
    };
    f.$I = function (a) {
        var b;
        b = a.getName();
        b = (new ck).$s(b);
        b.type = "MEDIA";
        b = b.ct(this.ya);
        this.uc.$I(b).then(this.W2.bind(this, a)).catch(this.X2.bind(this, a))
    };
    f.aJ = function (a) {
        function b(b, d, h, k) {
            return new FW({
                $a: c.$a,
                ja: c.ja,
                gb: a,
                sq: c.To().filter(function (a) {
                    return oX(c, a)
                }),
                uc: c.uc,
                pc: c.pc,
                da: jc(c.u),
                ka: c.ka,
                Vs: c.Vs,
                Of: c.Of,
                ya: c.ya,
                disabled: hX(c, a),
                Ch: c.Ch,
                fE: b,
                oo: d,
                di: h,
                Nk: k
            })
        }
        var c = this,
            d;
        switch (a) {
            case Ij:
                d = new jW({
                    $a: c.$a,
                    Qk: c.Qk,
                    da: jc(c.u),
                    Af: c.ja.ba.get(ag)
                });
                break;
            case Jj:
                d = b(new CW({
                    $a: this.$a,
                    pc: this.pc
                }), !0, !0);
                this.listenTo(d, {
                    trash: c.EF,
                    pickedUp: c.TU.bind(c, d, a),
                    disabled: c.PU.bind(c, a)
                });
                break;
            case Kj:
                d = b(new DW({
                    $a: this.$a,
                    ki: this.ki,
                    ZP: "/media/unlimited_use_purchases"
                }), !1, !1, jc(this.u).format("objectPanelUploadsPanelPurchasedUnlimitedUseFolderEmpty"));
                break;
            default:
                d = b(new EW({
                        $a: this.$a,
                        uc: this.uc,
                        gb: a
                    }), !0, !0),
                    this.listenTo(d, {
                        trash: c.EF,
                        pickedUp: c.TU.bind(c, d, a),
                        disabled: c.PU.bind(c, a)
                    }),
                    c.ly && MW(d)
        }
        d.fetch();
        d.render();
        return d
    };
    f.fetch = function (a) {
        if (!this.Kh && !this.nz && this.pM)
            if (this.Ok) {
                var b = ak((new Zj).aj(this.na), ["MEDIA"]);
                b.includeSystemFolders = !0;
                b.includeThumbnails = !0;
                a = b.ct(this.ya).Ig(a || 25);
                this.Kh = !0;
                this.view.Fg(!0);
                this.uc.ES(a).bind(this).then(this.d3).catch(this.e3)
            } else
                this.Gc(Jj.G()) || pX(this, Jj),
                this.Gc(Kj.G()) || pX(this, Kj),
                this.Gc(Ij.G()) || pX(this, Ij),
                this.pM = !1,
                this.view.Fg(!1),
                this.trigger("fetch")
    };
    f.wy = function (a) {
        a = this.ta.jK(a);
        isFinite(a) ? this.fetch(a) : this.fetch(25)
    };
    f.Gc = function (a) {
        return this.To().filter(function (b) {
            return b.G() === a
        })[0]
    };
    f.To = function () {
        return this.Fi.map(function (a) {
            return a.model
        })
    };
    f.bl = function () {
        return this.ta.bl()
    };
    f.me = function (a) {
        return this.To().filter(function (b) {
            return (b = b.me()) && b === a
        })[0]
    };

    function lX(a) {
        function b() {
            var a = mX(h, Ij);
            return !a || g.eq(2).is(a.$el) || g.eq(3).is(a.$el)
        }

        function c(a) {
            return a.childNodes.length
        }

        function d() {
            var a = h.me("UNFOLDERED"),
                a = a && mX(h, a);
            return !a || g.eq(1).is(a.$el) || g.eq(2).is(a.$el)
        }

        function e() {
            var a = h.me("LOGOS"),
                a = a && mX(h, a);
            return !a || g.eq(1).is(a.$el)
        }
        var g = a.ta.uf(),
            h = a;
        return function () {
            var a = h.ta.$el.find(".uploadsLayoutColumn").get().map(c),
                b = [].concat(a).sort().reverse();
            if (b = _.isEqual(a, b))
                b = 2 > Math.max.apply(Math, a) - Math.min.apply(Math, a);
            return b
        }() && b() && (!h.Cp || g.first().is(h.Cp.$el)) && d() && e()
    }
    f.getElement = function () {
        return this.view.$el
    };

    function mX(a, b) {
        return a.Fi.filter(function (a) {
            return a.model === b
        })[0]
    }

    function qX(a) {
        return a.Jp ? a.Gc(a.Jp) : void 0
    }

    function hX(a, b) {
        return _.contains(a.rD, b.G())
    }

    function oX(a, b) {
        var c = -1 !== _.values(Lj).map(function (a) {
            return a.G()
        }).indexOf(b.G());
        return !hX(a, b) && !c
    }
    f.HM = function (a) {
        a.G() === this.Jp ? this.Eh() : (this.Eh(),
            mX(this, a).open(),
            nX(this.view, !0),
            this.cu = this.aJ(a),
            this.Jp = a.G(),
            rX(this, {
                Jq: !1,
                content: this.cu.getElement(),
                gb: a
            }),
            this.trigger("open"),
            this.Ch(mX(this, a).$el))
    };
    f.W2 = function (a, b) {
        b = b.Gc();
        a = mX(this, a);
        a.model = b;
        a.fk(!1);
        a.render();
        cX(a)
    };
    f.X2 = function (a, b) {
        a = w(mX(this, a));
        window.alert(b instanceof Array && b[0] && "quota exceeded" == b[0].error ? jc(this.u).format("objectPanelUploadsPanelCreateFolderQuotaExceededError") : jc(this.u).format("objectPanelUploadsPanelCreateFolderError"));
        this.stopListening(a);
        this.Fi.splice(this.Fi.indexOf(a), 1);
        this.ta.remove(a.$el);
        this.sw()
    };
    f.Y2 = function (a) {
        var b = a.G() === this.yT;
        this.Eh();
        b || (this.yT = a.G(),
            b = (new qW({
                gb: a,
                u: this.u,
                ya: this.ya,
                Af: this.ja.ba.get(ag)
            })).render(),
            b.on("trash", this.o7.bind(this, a)),
            rX(this, {
                Jq: !0,
                content: b.$el,
                gb: a
            }),
            this.Ch(this.$f.getContent(), !0))
    };
    f.a3 = function (a) {
        var b;
        b = this.Gc(a.G());
        b = mX(this, b);
        b.model = a;
        b.render()
    };
    f.d3 = function (a) {
        var b = a.To();
        b.length && sX(this, b);
        this.Gc(Ij.G()) || pX(this, Ij);
        this.Gc(Kj.G()) || pX(this, Kj);
        this.Ok && this.Cp && this.ta.push(this.Cp.$el);
        this.na = a.dc();
        this.Kh = !1;
        this.pM = !!this.na;
        this.sw();
        this.view.Fg(!1);
        this.trigger("fetch")
    };
    f.e3 = function () {
        this.Kh = !1;
        this.nz = !0;
        this.view.Fg(!1);
        this.view.Rs(!0)
    };
    f.PU = function (a, b) {
        b ? this.rD.push(a.G()) : this.rD = _.without(this.rD, a.G())
    };
    f.EF = function (a) {
        this.Vs.push(a)
    };
    f.TU = function (a, b, c, d) {
        this.wV = a;
        this.vV = b;
        this.hN = c;
        this.view.br = d
    };
    f.r3 = function () {
        this.Eh();
        this.sw()
    };
    f.F3 = function () {
        var a = this,
            b;
        b = function () {
            var b;
            b = Cj({
                name: Md(jc(a.u)),
                user: a.ya
            });
            b = a.GR(b);
            b.$el.addClass("uploadsFolderTransparent");
            a.Fi.push(b);
            a.ta.push(b.$el);
            b.fk(!0);
            aX(b, !0);
            return b
        }();
        this.Ch(b.$el).then(function () {
            b.YQ()
        });
        T && T.track("new_upload_folder")
    };
    f.MF = function () {
        this.ta.mb()
    };
    f.bV = function () {
        var a, b;
        b = (a = this.Ok ? this.me("UNFOLDERED") : Jj) && a.G() === this.Jp;
        a && !b && this.HM(a)
    };

    function pX(a, b) {
        b = new XW({
            ri: !1,
            nx: !1,
            Yb: a.Yb,
            model: b,
            da: jc(a.u),
            di: !1,
            aa: a.aa
        });
        a.listenTo(b, "click", a.HM);
        b.render().show();
        a.Fi.push(b);
        a.ta.push(b.$el)
    }

    function sX(a, b) {
        b = b.map(a.GR, a);
        a.Fi = a.Fi.concat(b);
        b = $(b.map(function (a) {
            return a.el
        }));
        a.ta.push(b)
    }
    f.remove = function () {
        $(window).off("resize", this.MF);
        this.stopListening();
        this.view.remove()
    };
    f.E5 = function (a, b) {
        var c, d;
        c = a.Fx({
            name: b
        });
        d = mX(this, a);
        d.model = c;
        d.render();
        aX(d, !1);
        a.G() ? (b = (new Nj).ik(Mg(a)).$s(b),
            this.uc.GP(b).catch(this.a3.bind(this, a))) : this.$I(c)
    };
    f.render = function () {
        this.Cp && this.Cp.render();
        this.view.render();
        this.view.$el.prepend(this.ta.$el);
        var a = this.view;
        a.Rn && a.$el.prepend(a.F7({
            folderUpgradePrompt: a.da.format("objectPanelUploadsPanelFolderUpgradePrompt"),
            learnMoreButtonLabel: a.da.format("objectPanelUploadsPanelLearnMoreButtonLabel")
        }));
        return this
    };

    function jX(a, b, c) {
        a.Fi.forEach(function (a) {
                hX(this, a.model) || a.$el.toggleClass("uploadsFolderDropping", $W(a, b, c))
            }
            .bind(a))
    }
    f.show = function () {
        $(window).on("resize", this.MF)
    };

    function rX(a, b) {
        var c = b.gb === Ij,
            d = mX(a, b.gb).$el;
        a.$f = (new KW({
            ri: !c,
            Jq: b.Jq,
            content: b.content,
            da: jc(a.u),
            yl: a.Q0,
            target: d
        })).render();
        a.$f.on({
            close: a.Eh,
            drop: a.MP.bind(a, b.gb)
        }, a);
        TU(a.ta, d, a.$f.$el);
        a.$f.show()
    }
    f.sw = function () {
        function a() {
            var a = e.me("LOGOS");
            if (a = a && mX(e, a))
                g.splice(g.indexOf(a.el), 1),
                g.unshift(a.el)
        }

        function b() {
            var a = mX(e, Ij);
            a && (g.splice(g.indexOf(a.el), 1),
                g.unshift(a.el))
        }

        function c() {
            var a = mX(e, Kj);
            a && (g.splice(g.indexOf(a.el), 1),
                g.unshift(a.el))
        }

        function d() {
            var a = e.me("UNFOLDERED");
            if (a = a && mX(e, a))
                g.splice(g.indexOf(a.el), 1),
                g.unshift(a.el)
        }
        var e = this;
        if (this.Ok && !this.$f) {
            var g = this.ta.uf().detach().toArray();
            b();
            c();
            d();
            a();
            g.splice(g.indexOf(e.Cp.el), 1);
            g.unshift(e.Cp.el);
            this.ta.push($(g))
        }
    };
    f.o7 = function (a) {
        function b() {
            var b = a.itemCount,
                d = jc(c.u);
            return window.confirm(d.format("objectPanelUploadsPanelTrashFolderConfirmation", b))
        }
        var c = this,
            d;
        0 < a.itemCount && !b() || (this.Eh(),
            d = Pj((new Nj).ik(Mg(a))),
            P.settle([this.uc.GP(d), mX(c, a).Gw(!0).bind(c).then(c.sw)]).then(function (b) {
                    b[0].isFulfilled() ? (b = mX(this, a),
                        b.remove(),
                        this.stopListening(b),
                        this.Fi.splice(this.Fi.indexOf(b), 1)) : (mX(this, a).Gw(!1),
                        this.sw())
                }
                .bind(this)))
    };
    f.MP = function (a, b, c) {
        this.ja.ba.get(ag) && (oX(this, a) ? this.$a.pH(a, b, c || "drop") : hX(this, a) || 0 < b.length && this.$a.Qx(a, c || "drop").upload(b))
    };

    function eX() {}
    eX = Backbone.View.extend({
        className: "uploadsFolders"
    });
    eX.prototype.initialize = function (a) {
        this.vi = new HU;
        this.br = $();
        this.da = a.da;
        this.root = a.root || $(window);
        this.Rn = a.Rn
    };
    eX.prototype.events = function () {
        return {
            mousedown: this.Tr,
            "click .folderUpgradeCta .buttonLearnMore": this.o2
        }
    };
    eX.prototype.o2 = function () {
        this.trigger("folderUpgradeCta")
    };
    eX.iY = 50;
    eX.xY = 100;
    eX.yY = 5;
    f = eX.prototype;
    f.Tr = function (a) {
        function b() {
            function b(a) {
                var h = a.clientX;
                a = a.clientY;
                d.trigger("drag", h, a);
                h < eX.iY ? (e || d.trigger("close"),
                    e = !0,
                    d.trigger("dragScroll", 0)) : h > g ? d.trigger("dragScroll", 0) : Math.abs(l - a) > eX.yY ? d.trigger("dragScroll", c(h, a)) : d.trigger("dragScroll", 0);
                return !1
            }

            function k(a) {
                d.root.off("mousemove", b);
                d.root.off("mouseup", k);
                d.trigger("dragScroll", 0);
                d.trigger("drop", a.clientX, a.clientY)
            }
            var l = a.clientY;
            d.root.on("mousemove", b);
            d.root.on("mouseup", k);
            return !1
        }

        function c(a, b) {
            var c;
            c = eX.xY;
            b = new U(a, b, 0, 0);
            a = d.$el.parent(".scrollPane").get(0).getBoundingClientRect();
            var e = Qg(a);
            a = b.N() - (e.N() + c);
            c = b.Ha() - (e.Ha() - c);
            return 0 > a ? Math.max(Math.floor(a / 10), -10) : 0 < c ? Math.min(Math.ceil(c / 10), 10) : 0
        }
        var d = this,
            e = !1,
            g = this.el.getBoundingClientRect().right;
        return function () {
            var b = 0 < $(a.target).parents(".uploadsFolderItemMovable").length,
                c = $(a.target).hasClass("uploadsFolderItemMovable");
            return a.which == J.wh || !(c || b)
        }() || b()
    };
    f.render = function () {
        this.vi.render();
        this.$el.append(this.vi.$el);
        return this
    };

    function kX(a, b) {
        var c;
        c = a.br.clone();
        c.removeClass().addClass(b);
        b = a.br.get(0).getBoundingClientRect();
        c.css("top", b.top + "px").css("left", b.left + "px").css("width", b.width + "px").css("height", b.height + "px");
        $("body").append(c);
        a.br.remove();
        a.br = $();
        setTimeout(function () {
            c.remove()
        }, 500)
    }
    f.Fg = function (a) {
        a ? this.vi.show() : this.vi.hide()
    };
    f.Rs = function (a) {
        var b = this.$(".uploadsFoldersError");
        a ? 1 > b.length && this.$el.append(this.PD({
            message: this.da.format("objectPanelUploadsPanelFoldersFetchError")
        })) : b.remove()
    };

    function nX(a, b) {
        a.$el.toggleClass("uploadsFoldersFolderOpen", b)
    }
    f.PD = _.template('\x3cp class\x3d"uploadsFoldersError"\x3e\x3c%- message %\x3e\x3c/p\x3e');
    f.F7 = _.template('\x3cdiv class\x3d"folderUpgradeCta"\x3e\x3cspan class\x3d"folderUpgradePrompt"\x3e\x3c%- folderUpgradePrompt %\x3e\x3c/span\x3e\x3cbutton class\x3d"button buttonSmall buttonLearnMore"\x3e\x3c%- learnMoreButtonLabel %\x3e\x3c/button\x3e\x3c/div\x3e');

    function KW() {}
    KW = Backbone.View.extend({
        className: "inlineContent"
    });
    KW.rY = 14.14;
    f = KW.prototype;
    f.events = function () {
        return {
            "click .inlineContentClose": this.trigger.bind(this, "close"),
            drop: this.gn
        }
    };
    f.initialize = function (a) {
        this.ri = a.ri;
        this.ZQ = !1;
        this.Jq = !!a.Jq;
        this.content = a.content;
        this.da = a.da;
        this.yl = a.yl;
        this.target = a.target
    };
    f.getContent = function () {
        return this.content
    };
    f.gn = function (a) {
        var b;
        try {
            b = a.originalEvent.dataTransfer.files
        } catch (c) {}
        b && b.length && this.ri && (a.preventDefault(),
            a.stopPropagation(),
            this.trigger("drop", b))
    };

    function tX(a) {
        function b() {
            var a = KW.rY / 2,
                b = d.target.offset().left + d.target.outerWidth() / 2,
                e = d.$el.offset().left;
            c(b - e - a)
        }

        function c(a) {
            d.yl = a;
            e.css("transform", "translateX(" + a + "px) rotate(-45deg)")
        }
        var d = a,
            e;
        e = a.$(".inlineContentPointer");
        e.addClass("doNotTransition");
        void 0 !== a.yl ? c(a.yl) : b();
        window.setTimeout(function () {
            e.removeClass("doNotTransition");
            b()
        }, J.Qc)
    }
    f.render = function () {
        this.$el.html(this.template(this.Zh()));
        this.$el.toggleClass("inlineContentAppearing", !this.ZQ);
        this.$(".inlineContentContent").append(this.content);
        return this
    };
    f.Zh = function () {
        return {
            closeButton: this.Jq,
            closeTitle: this.da.format("objectPanelUploadsPanelInlineContentCloseTitle")
        }
    };
    f.show = function () {
        this.ZQ = !0;
        tX(this);
        uX(this)
    };

    function uX(a) {
        var b;
        P.try(function () {
            a.$el.height("auto");
            b = a.$el.height();
            a.$el.height(0)
        }).delay(J.Qc).then(function () {
            a.$el.removeClass("inlineContentAppearing");
            a.$el.height(b)
        }).delay(200).then(function () {
            a.$el.addClass("doNotTransition");
            a.$el.height("")
        }).delay(J.Qc).then(function () {
            a.$el.removeClass("doNotTransition")
        })
    }
    f.template = _.template('\x3cdiv class\x3d"inlineContentPointer"\x3e\x3c/div\x3e\x3c% if (closeButton) { %\x3e\x3ca class\x3d"inlineContentClose" href\x3d"#" title\x3d"\x3c%- closeTitle %\x3e"\x3e\x3c/a\x3e\x3c% } %\x3e\x3cdiv class\x3d"inlineContentContent"\x3e\x3c/div\x3e');

    function kW() {
        PU.call(this, {
            Mg: function (a) {
                return Math.floor(a / 90)
            },
            cm: "uploadsLayoutColumn"
        });
        this.listenTo(this, {
            afterSplit: this.NY,
            beforeMerge: this.TY,
            beforeSplit: this.UY
        })
    }
    kW.prototype = Object.create(PU.prototype);
    kW.prototype.NY = function (a, b) {
        b.addClass("doNotTransition");
        b.each(function (b, d) {
                d = $(d);
                d.css("margin-top", vX(a.eq(b)) - d.offset().top)
            }
            .bind(this));
        b.height();
        b.removeClass("doNotTransition");
        setTimeout(function () {
            a.children().add(b).add(b.children()).css("margin-top", "")
        }, J.Qc)
    };
    kW.prototype.UY = function (a) {
        wX(a.children())
    };

    function vX(a) {
        function b(a) {
            return a.offset().top + a.outerHeight()
        }
        return a.children().length ? b(a.children().last()) : b(a)
    }

    function wX(a) {
        var b = a.get().map(function (a) {
            return window.getComputedStyle(a)
        });
        a.each(function (a, d) {
            d.style.marginTop = d.previousSibling ? Math.max(parseInt(b[a - 1].marginBottom, 10) || 0, parseInt(b[a].marginTop, 10) || 0) + "px" : (parseInt(b[a].marginTop, 10) || 0) + "px"
        })
    }
    kW.prototype.TY = function (a, b) {
        var c;
        c = b.children();
        c.addClass("doNotTransition");
        wX(c);
        (function () {
            return b.get().map(function (a) {
                return a.firstChild
            })
        })().forEach(function (b, c) {
                b && (b = $(b),
                    b.css("margin-top", b.offset().top - vX(a.eq(c))).addClass("closing-transition").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend", function () {
                        $(this).removeClass("closing-transition")
                    }))
            }
            .bind(this));
        c.height();
        c.removeClass("doNotTransition");
        setTimeout(function () {
            c.css("margin-top", "")
        }, J.Qc)
    };

    function fX() {}
    fX = Backbone.View.extend({
        className: "newUploadsFolder"
    });
    f = fX.prototype;
    f.events = function () {
        return {
            click: this.trigger.bind(this, "click")
        }
    };
    f.initialize = function (a) {
        this.u = a.u
    };
    f.YQ = function () {
        this.$el.addClass("newUploadsFolderAppearing");
        setTimeout(function () {
                this.$el.removeClass("newUploadsFolderAppearing")
            }
            .bind(this), 450)
    };
    f.render = function () {
        var a = jc(this.u);
        this.$el.html(this.template({
            label: a.format("objectPanelUploadsPanelNewFolderButtonLabel")
        }));
        return this
    };
    f.template = _.template('\x3cdiv class\x3d"newUploadsFolderThumbnail"\x3e\x3c/div\x3e\x3cdiv class\x3d"newUploadsFolderLabel"\x3e\x3c%- label %\x3e\x3c/div\x3e');

    function vL(a) {
        this.$a = a.$a;
        this.Tt = 0;
        this.element = $("\x3cdiv\x3e").addClass("layer scrollPane uploadsPanel");
        this.gd = a.gd;
        this.ld = new dX({
            Yb: a.Yb,
            $a: a.$a,
            ly: a.ly,
            Ok: a.Ok,
            Qk: a.Qk,
            ja: a.ja,
            uc: a.uc,
            ki: a.ki,
            pc: a.pc,
            u: a.u,
            ka: a.ka,
            Of: a.Of,
            ya: a.ya,
            aa: a.aa,
            Ch: this.Ch.bind(this),
            gd: this.gd,
            aJ: a.aJ
        });
        this.ld.on({
            fetch: this.CI,
            open: this.Z2,
            dragScroll: this.c3
        }, this);
        this.ld.once("fetch", this.ld.bV, this.ld);
        this.eU = -1;
        a.ja.ba.get(ag) && this.listenTo(a.I_, {
            dragenter: this.O2,
            dragleave: this.P2,
            drop: this.Q2
        })
    }
    f = vL.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.c3 = function (a) {
        a !== this.Tt ? (this.Tt = a,
            this.AG && clearInterval(this.AG),
            0 !== this.Tt && (this.AG = setInterval(this.W4.bind(this), 10))) : 0 === a && this.AG && clearInterval(this.AG)
    };
    f.Ch = function (a, b) {
        var c = this.element.height(),
            d = WU(this.vs, a, {
                oL: !0
            }),
            e = c + d - a.outerHeight(!0);
        a = c / 3;
        var g = null;
        this.element.find(".closing-transition").each(function (a, b) {
                a = parseInt(b.style.marginTop, 10) - 10;
                if (WU(this.vs, $(b), {
                        oL: !0
                    }) < d && 0 < a)
                    return e -= a,
                        d -= a, !1
            }
            .bind(this));
        if (b && 0 < d)
            g = this.element.scrollTop() + d + 10;
        else if (!b && e > a || 0 > e)
            g = this.element.scrollTop() + e - a;
        return new P(function (a) {
                null !== g ? this.element.animate({
                    scrollTop: g
                }, 200, "linear", a) : a()
            }
            .bind(this))
    };
    f.CI = function () {
        var a = this.ld.cu,
            b = a && a.bl();
        a && a.yr() && b && 800 > WU(this.vs, b) && 0 === this.Tt ? this.ld.cu.wy(800) : (a = this.ld.bl()) && 800 > WU(this.vs, a) && this.ld.wy(800)
    };
    f.getElement = function () {
        return this.element
    };
    f.O2 = function () {
        var a = qX(this.ld);
        a && a !== Ij && a !== Kj || this.ld.bV();
        this.element.addClass("uploadsPanelDropTarget")
    };
    f.P2 = function () {
        xX(this)
    };

    function xX(a) {
        a.element.removeClass("uploadsPanelDropTarget")
    }
    f.Z2 = function () {
        this.ld.cu.on("fetch", this.CI, this)
    };
    f.T3 = function () {
        var a = this.vs.Lo.scrollTop();
        a > this.eU && this.CI();
        this.eU = a
    };
    f.W4 = function () {
        var a = 1 * this.element.scrollTop();
        (function () {
            return 0 === a && 0 > this.Tt
        })() || this.element.scrollTop(a + this.Tt)
    };
    f.render = function () {
        this.ld.getElement().appendTo(this.element);
        this.ld.render();
        return this
    };
    f.show = function () {
        var a = Number(this.element.height()),
            b = 800;
        isNaN(a) || (b += a);
        var a = this.element,
            a = $(a),
            c = a.data("CANVA_SCROLL_TARGET");
        c || (c = new VU(a),
            c.eF(),
            a.data("CANVA_SCROLL_TARGET", c));
        this.vs = c;
        this.vs.on("scroll", this.T3, this);
        this.vs.eF();
        this.ld.show();
        this.ld.wy(b)
    };
    f.Q2 = function (a) {
        xX(this);
        var b = this.ld,
            c = qX(b);
        c && b.MP(c, a, "drop")
    };

    function zW() {}
    zW = Backbone.View.extend({
        className: "uploadProgressBar"
    });
    zW.prototype.initialize = function () {
        this.mh = 0
    };
    zW.prototype.render = function () {
        this.$el.html(this.template());
        BW(this, this.mh);
        return this
    };

    function BW(a, b) {
        var c;
        c = a.$(".uploadProgressBarFill");
        c.css("transform", "translateX(" + Math.max(c.height() / a.$el.width() * 100, b) + "%)");
        a.mh = b
    }
    zW.prototype.template = _.template('\x3cdiv class\x3d"uploadProgressBarFill"\x3e\x3c/div\x3e');

    function xL(a) {
        this.$el = $('\x3cdiv class\x3d"uploadProgressPorthole"\x3e\x3cdiv class\x3d"uploadProgressPortholeFill"\x3e\x3c/div\x3e\x3c/div\x3e');
        this.root = a.root;
        this.root.append(this.$el);
        this.lN = this.un = 0;
        this.xw = Date.now();
        this.eX = 0;
        this.Of = a.Of;
        this.kf = a.kf
    }
    f = xL.prototype;
    f.off = Backbone.Events.off;
    f.listenTo = Backbone.Events.listenTo;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.start = function () {
        this.xw = Date.now() - 100;
        this.stopListening(this.Of);
        this.listenTo(this.Of, {
            create: this.UG,
            fail: function (a) {
                yX(this, a, this.kf)
            }
        })
    };
    f.UG = function () {
        this.lN = setTimeout(this.XT.bind(this), 50)
    };
    f.XT = function () {
        function a() {
            var a = Math.random();
            .025 > a && (c.$el.addClass("showRubberDucky"),
                .005 > a && c.$el.addClass("showNautilus"),
                setTimeout(function () {
                    c.$el.removeClass("showRubberDucky showNautilus")
                }, 9E3))
        }
        var b = wK(this.Of, this.xw),
            c = this;
        clearTimeout(this.eX);
        clearTimeout(this.lN);
        this.root.addClass("showUploadsProgressPorthole");
        100 === b ? this.finish() : (this.un = Math.round(.7 * b + .05),
            zX(this),
            a(),
            this.lN = setTimeout(this.XT.bind(this), 1E3))
    };
    f.finish = function () {
        var a = this;
        this.eX = setTimeout(function () {
            a.xw = Date.now() - 2E3 - 100;
            a.un = 100;
            zX(a);
            setTimeout(a.reset.bind(a), 1100)
        }, 2E3)
    };

    function yX(a, b, c) {
        var d = a.$el.find(".uploadProgressPortholeFill");
        d.addClass("uploadProgressPortholeFillFailure");
        setTimeout(function () {
            d.removeClass("uploadProgressPortholeFillFailure")
        }, 650);
        b && qK.show(b, c)
    }

    function zX(a) {
        var b = a.$el.find(".uploadProgressPortholeFill"),
            c = "translateY(" + (100 - a.un) + "%)";
        b.css("transform", c + " rotate(2deg)");
        setTimeout(function () {
            b.css("transform", c + " rotate(-2deg)")
        }, 1050);
        setTimeout(function () {
            b.css("transform", c)
        }, 2100)
    }
    f.reset = function () {
        this.un = 0;
        this.xw = Date.now();
        this.root && this.root.removeClass("showUploadsProgressPorthole");
        zX(this)
    };
    f.remove = function () {
        this.reset();
        this.stopListening(this.Of);
        this.$el.remove()
    };

    function AX(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".searchMenu__toggle", function () {
            return b.trigger(BX)
        })
    }
    t(AX, L);

    function CX() {
        var a = $(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"searchMenu"\x3e\x3cdiv class\x3d"select searchMenu__toggle"\x3e\x3c/div\x3e\x3c/div\x3e').toString());
        return new AX(a)
    }
    var BX = "SHOW_OVERLAY";

    function DX(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".searchMenu__item", function (a) {
            return b.GM(a)
        });
        a.on("click", ".searchMenu__freeFilterCta", function () {
            return b.trigger(EX)
        })
    }
    t(DX, L);
    DX.prototype.GM = function (a) {
        a = $(a.target).closest(".searchMenu__item").data("filterType");
        this.trigger(FX, a)
    };
    var FX = "FILTER_CHANGE",
        EX = "FREE_FILTER_CTA";

    function GX(a) {
        dy.call(this, {
            className: "searchMenuPopOver",
            content: a.content,
            lw: !1,
            position: gp
        })
    }
    t(GX, dy);
    GX.prototype.Xo = function () {
        return eW
    };
    var HX = new yf("gd", !1),
        IX = new yf("go", !1);

    function JX(a, b, c) {
        var d = this;
        this.Dl = a.Dl;
        this.view = b;
        this.e5 = c;
        this.Sp = this.Rp = null;
        this.uK = a.uK;
        this.XA = "NONE";
        this.QC = a.QC;
        this.anchor = a.anchor;
        this.H = a.H;
        this.view.on(BX, function () {
            KX(d);
            d.Rp.ci(d.anchor)
        })
    }

    function qL(a) {
        var b = CX();
        return {
            bc: LX(a, b, function (b) {
                var d = [],
                    e;
                d.push({
                    type: "NONE",
                    label: a.Dl.format("searchMenuMostRelevant"),
                    qf: !1
                });
                a.ba.get(HX) ? d.push({
                    type: "FREE",
                    label: a.Dl.$g(),
                    qf: !0
                }) : a.ba.get(IX) && (e = a.Dl.Ua("searchMenuFreeFilterCtaHtml", 3E5),
                    d.push({
                        type: "FREE_CTA",
                        label: a.Dl.$g(),
                        qf: !0,
                        disabled: !0
                    }));
                var g = $;
                soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "selectedFilterType", b, "string|goog.soy.data.SanitizedContent");
                d = goog.asserts.assertArray(d, "expected parameter 'filters' of type list\x3c[crownTag: bool|null, label: string, selected: bool|null, type: string]\x3e.");
                soy.asserts.assertType(null == e || e instanceof soydata.SanitizedHtml || e instanceof soydata.UnsanitizedText || goog.isString(e), "footerCta", e, "?soydata.SanitizedHtml|string|undefined");
                for (var h = '\x3cdiv class\x3d"searchMenu__overlay"\x3e\x3cdiv class\x3d"selectMenu"\x3e', k = d.length, l = 0; l < k; l++) {
                    var m = d[l],
                        n, p = m.type == b,
                        r = m.qf;
                    n = m.label;
                    m = m.type;
                    soy.asserts.assertType(null == p || goog.isBoolean(p) || 1 === p || 0 === p, "selected", p, "boolean|null|undefined");
                    soy.asserts.assertType(null == r || goog.isBoolean(r) || 1 === r || 0 === r, "crownTag", r, "boolean|null|undefined");
                    soy.asserts.assertType(goog.isString(n) || n instanceof goog.soy.data.SanitizedContent, "label", n, "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(goog.isString(m) || m instanceof goog.soy.data.SanitizedContent, "type", m, "string|goog.soy.data.SanitizedContent");
                    n = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"selectMenu__item searchMenu__item' + (p ? " searchMenu__item--selected" : "") + '" data-filter-type\x3d"' + soy.$$escapeHtmlAttribute(m) + '"\x3e' + soy.$$escapeHtml(n) + (r ? ap({
                        Ma: "searchMenu__crown",
                        color: "#3f4652"
                    }) : "") + "\x3c/div\x3e");
                    h += n
                }
                h += (e ? '\x3cdiv class\x3d"searchMenu__footerCta"\x3e' + soy.$$escapeHtml(e) + "\x3c/div\x3e" : "") + "\x3c/div\x3e\x3c/div\x3e";
                b = soydata.VERY_UNSAFE.ordainSanitizedHtml(h);
                g = g(b.toString());
                g = new DX(g);
                b = new GX({
                    content: g.$el
                });
                return {
                    Sp: g,
                    Rp: b
                }
            }),
            view: b
        }
    }

    function LX(a, b, c) {
        return new JX(a, b, c)
    }

    function MX(a) {
        return X(X(X(X(new Hl("filter_changed"), "section", "editor"), "subsection", "object_panel"), "location", "search_menu"), "type", a)
    }
    JX.prototype.GM = function (a) {
        if ("FREE_CTA" === a)
            this.Rp.cancel(),
            this.QC();
        else {
            this.XA = a;
            var b = this.Sp,
                c = this.XA;
            b.$el.find(".searchMenu__item--selected").removeClass("searchMenu__item--selected");
            b.$el.find('.searchMenu__item[data-filter-type\x3d"' + c + '"]').addClass("searchMenu__item--selected");
            this.Rp.cancel();
            this.uK();
            this.H.Ga(MX(a.toString()))
        }
    };

    function KX(a) {
        var b = a.e5(a.XA),
            c = b.Rp,
            d = b.Sp;
        a.Sp = d;
        a.Rp = c;
        a.Sp.on(FX, function (b) {
            return a.GM(b)
        });
        a.Sp.on(EX, function () {
            a.Rp.cancel();
            a.QC()
        });
        a.Rp.once("remove", function () {
            d.remove();
            a.Sp === d && (a.Sp = null)
        })
    };

    function sL() {}
    sL = Backbone.View.extend({});
    sL.prototype.events = function () {
        return {
            "click .searchFilterMediaTypeOption__link": this.w0
        }
    };
    sL.prototype.initialize = function (a) {
        var b = this,
            c = new rO;
        this.listenTo(c, "results:didFetch", function (a, c, d) {
            b.trigger("results:didFetch", a, c, d)
        });
        var d = new mL(new zO);
        c.lk(d);
        this.ZE = new LV({
            model: c,
            el: this.$(".layer"),
            u: a.u
        });
        c = new EV({
            model: d,
            el: this.$(".browseCategories"),
            u: a.u
        });
        this.ZE.ae.push(c);
        !a.el && this.render()
    };
    sL.prototype.Wo = function () {
        return this.$el.find(".searchFilterMediaTypeOption--selected").data("mediaTypes")
    };
    sL.prototype.w0 = function (a) {
        this.$el.find(".searchFilterMediaTypeOption").removeClass("searchFilterMediaTypeOption--selected");
        $(a.target).closest(".searchFilterMediaTypeOption").addClass("searchFilterMediaTypeOption--selected");
        this.trigger("searchFilterMediaType")
    };

    function uL() {}
    uL = Backbone.View.extend({});
    uL.prototype.initialize = function (a) {
        var b = this,
            c = new rO;
        this.listenTo(c, "results:didFetch", function (a, c, d) {
            b.trigger("results:didFetch", a, c, d)
        });
        var d = new mL(new zO);
        c.lk(d);
        this.ZE = new LV({
            model: c,
            el: this.$(".layer"),
            u: a.u
        });
        c = new EV({
            model: d,
            el: this.$(".browseCategories"),
            u: a.u
        });
        this.ZE.ae.push(c);
        this.ZE.on("folder:expand", function (a) {
            b.trigger("folder:expand", a)
        });
        !a.el && this.render();
        a.A6 && (c = $('\x3cspan class\x3d"badgeContainer"\x3e'),
            d = $("\x3cspan\x3e").addClass("newFeatureLabel").text(od(a.u).dn()),
            c.append(d),
            this.$("a[data-query\x3dcharts]").append(c));
        a = NX({
            label: Ud(jc(a.u))
        });
        a = $('\x3cspan class\x3d"badgeContainer"\x3e').append($(a.toString()));
        this.$("a[data-crowntag\x3dtrue]").append(a)
    };

    function OX(a) {
        var b = this;
        this.We = a.We || $(document);
        this.Le = a.Le || $("body");
        this.HE = function () {
            return b.hide()
        };
        this.element = null;
        this.pw = !1
    }
    f = OX.prototype;
    f.show = function () {
        this.element || (this.element = $("\x3cdiv\x3e"),
            this.element.css("height", "100%").css("left", "0").css("position", "fixed").css("top", "0").css("width", "100%").css("z-index", "1000").css("opacity", "0"));
        this.element.on("click", this.HE);
        this.Le.append(this.element);
        this.We.on("keydown", this.HE);
        this.pw = !0
    };
    f.hide = function () {
        this.pw && (this.pw = !1,
            this.element.off("click", this.HE),
            this.element.remove(),
            this.trigger("close"),
            this.We.off("keydown", this.HE));
        return !1
    };
    f.remove = function () {
        this.hide();
        this.element && this.element.remove()
    };
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;
    var RL = "contextTipRoyaltyFreeFolder";

    function PX(a) {
        var b = this;
        this.We = a.We;
        this.Le = a.Le;
        this.Mx = a.Mx;
        this.pd = a.pd;
        this.WV = function () {
            return b.remove()
        };
        this.width = a.width;
        this.style = a.style;
        this.Zm = new OX({
            We: this.We,
            Le: this.Le
        });
        this.Zm.on("close", this.WV);
        this.element = null
    }

    function QX(a) {
        switch (a.key) {
            case RL:
                return new PX({
                    We: a.We,
                    Le: a.Le,
                    Mx: a.u.format("unlimitedUseFolderContextTipContentText"),
                    pd: a.u.format("unlimitedUseFolderContextTipButtonText"),
                    width: 215,
                    style: "contextTipOnboarding"
                });
            case "contextTipRoyaltyFreePaymentOption":
                return new PX({
                    We: a.We,
                    Le: a.Le,
                    Mx: a.u.format("royaltyFreePaymentOptionContextTipContentText"),
                    pd: a.u.format("royaltyFreePaymentOptionContextTipButtonText"),
                    width: 215,
                    style: "contextTipOnboarding"
                });
            default:
                throw Error('Unknown ContextTipKey "' + a.key + '" when creating ContextTip');
        }
    }
    f = PX.prototype;
    f.iw = function (a, b, c) {
        c = void 0 === c ? !0 : c;
        var d = this,
            e = $('\x3cspan class\x3d"contextTipContent"\x3e').text(this.Mx),
            g = $('\x3cbutton class\x3d"button buttonBlock contextTipButton"\x3e').text(this.pd),
            h = this.createElement();
        g.on("click", function () {
            return d.remove()
        });
        this.Zm.show();
        h.empty().append(e).append(g).appendTo(this.Le).css("width", this.width).css("left", a).css("top", c ? b - h.height() / 2 : b).removeClass("contextTipOff").addClass("contextTipOn");
        return new P(function (a) {
            return d.on("remove", a)
        })
    };
    f.remove = function () {
        var a = this;
        this.Zm.remove();
        this.Zm.off("close", this.WV);
        if (this.element)
            this.element.removeClass("contextTipOn").addClass("contextTipOff").on("animationend", function () {
                return a.element.remove()
            });
        this.trigger("remove")
    };
    f.createElement = function () {
        this.element || (this.element = $('\x3cdiv class\x3d"contextTip"\x3e'),
            this.element.addClass(this.style));
        return this.element
    };
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;

    function RX(a) {
        this.ka = a.ka;
        this.u = a.u;
        this.wk = a.wk;
        this.YC = a.YC;
        this.root = a.root;
        this.VC = null;
        this.Ws = {};
        this.rN = new Map
    }
    RX.prototype.start = function () {
        Jv(this.ka).bind(this).tap(this.WW).then(this.IW);
        return this
    };

    function QL(a, b, c) {
        -1 !== a.wk.indexOf(b) && a.rN.set(b, c)
    }

    function SX(a, b) {
        return -1 !== a.wk.indexOf(b) && !1 === a.Ws[b] ? TX(a, b) : P.resolve()
    }

    function UX(a) {
        var b = RL;
        VX(a, b).then(function () {
            return SX(a, b)
        })
    }

    function VX(a, b) {
        function c() {
            return !0 !== this.Ws[b] ? (this.Ws[b] = !1,
                Kv(this.ka, b, !1)) : P.resolve()
        }
        return a.Ws.hasOwnProperty(b) ? c.call(a) : Jv(a.ka).bind(a).tap(a.WW).then(c)
    }
    RX.prototype.IW = function () {
        var a = this,
            b = WX(this);
        this.VC && this.VC.remove();
        b && TX(this, b).then(function () {
            return a.IW()
        })
    };

    function WX(a) {
        for (var b = 0; b !== a.wk.length; b++)
            if (!1 === a.Ws[a.wk[b]])
                return a.wk[b];
        return null
    }
    RX.prototype.WW = function (a) {
        this.Ws = a
    };

    function TX(a, b) {
        var c = a.wk.indexOf(b);
        if (0 <= c) {
            a.VC = a.YC(b);
            var d = XX(a, b);
            if (d)
                return YX(a, b).then(function () {
                    return a.VC.iw(d.x, d.y)
                });
            a.wk.splice(c, 1)
        }
        return P.resolve()
    }

    function YX(a, b) {
        a.Ws[b] = !0;
        return Kv(a.ka, b, !0)
    }

    function XX(a, b) {
        return a.rN.has(b) && (a = a.rN.get(b)) ? a() : null
    };

    function SW(a) {
        this.We = a.We || $(document);
        this.items = [];
        this.Le = a.Le || $("body");
        this.title = a.title;
        this.view = this.fJ();
        this.Zm = new OX({
            We: this.We,
            Le: this.Le
        });
        this.Zm.on("close", this.remove.bind(this))
    }
    f = SW.prototype;
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;
    f.fJ = function () {
        var a = new ZX;
        a.on("toggle", this.Mf.bind(this));
        return a
    };
    f.remove = function () {
        var a = this.view;
        this.Zm.hide();
        a.hide();
        setTimeout(function () {
            a.remove()
        }, 300)
    };

    function TW(a, b) {
        a.items = b;
        a.view.render({
            items: a.items,
            title: a.title
        })
    }
    f.iw = function (a, b) {
        this.Zm.hide();
        this.Le.append(this.view.getElement());
        this.Zm.show();
        this.view.iw(a, b)
    };
    f.Mf = function (a) {
        var b = this.items.filter(function (b) {
            return b.title === a
        })[0];
        this.remove();
        b && this.trigger("change", b.id, !b.wP)
    };

    function ZX() {}
    ZX = Backbone.View.extend({
        className: "contextMenu"
    });
    f = ZX.prototype;
    f.events = function () {
        return {
            "click .contextMenuItem": this.i3
        }
    };
    f.getElement = function () {
        return this.$el
    };
    f.hide = function () {
        var a = this.$el;
        a.removeClass("contextMenuOn").addClass("contextMenuOff");
        setTimeout(function () {
                a.css("left", "-9999em").css("top", "-9999em")
            }
            .bind(this), 400)
    };
    f.i3 = function (a) {
        this.trigger("toggle", $(a.target).text())
    };
    f.render = function (a) {
        var b = this.$el,
            c = $('\x3cstrong class\x3d"contextMenuInfo"/\x3e').text(a.title),
            d = $('\x3cul class\x3d"contextMenuItems"/\x3e');
        a.items.forEach(function (a) {
            var b = $('\x3cli class\x3d"contextMenuItem"/\x3e').text(a.title);
            a.wP && b.addClass("contextMenuItemTicked");
            d.append(b)
        });
        b.empty().append(c).append(d);
        return this
    };
    f.iw = function (a, b) {
        this.$el.css("left", a).css("top", b).removeClass("contextMenuOff").addClass("contextMenuOn")
    };

    function $X() {}
    $X = Backbone.View.extend({
        className: "dropdownPane"
    });
    $X.prototype.initialize = function () {
        this.once("show", this.render)
    };
    $X.prototype.show = function () {
        this.$el.hasClass("focus") || (this.trigger("show", this),
            this.$el.siblings().removeClass("focus"),
            this.$el.addClass("focus"))
    };

    function aY() {}
    aY = dy.extend({
        className: "dropdownMenuPopoverContainer"
    });
    f = aY.prototype;
    f.initialize = function (a) {
        dy.prototype.initialize.call(this, _.defaults(a, {
            Ef: {
                top: -4
            }
        }));
        this.nn = [];
        this.mo = null;
        this.on("show", this.y6);
        this.on("remove", this.z5)
    };
    f.render = function () {
        dy.prototype.render.call(this);
        this.$("h2, .buttonContainer").remove();
        var a = this.$(".content");
        this.nn.forEach(function (b) {
            b.$el.appendTo(a)
        });
        return this
    };
    f.lt = function (a) {
        this.listenTo(a, "show", this.o6);
        this.listenTo(a, "show", this.Xp);
        this.listenTo(a, "resize", this.Xp.bind(this, a));
        this.nn.push(a)
    };
    f.Xp = function (a) {
        var b = window.innerHeight - 108,
            c = a.$el.hasClass("focus");
        c && a.$el.removeClass("focus");
        var d = a.$el.prop("offsetHeight");
        c && a.$el.addClass("focus");
        this.$(".content").css("height", Math.min(d, b))
    };
    f.Nl = function () {
        dy.prototype.Nl.call(this);
        this.mo && this.Xp(this.mo);
        return this
    };
    f.o6 = function (a) {
        this.mo = a
    };
    f.y6 = function () {
        0 < this.nn.length && this.nn[0].show()
    };
    f.z5 = function () {
        this.mo = null;
        this.nn.forEach(function (a) {
            a.remove()
        });
        this.nn.length = 0
    };

    function zT() {}
    zT = aY.extend({
        className: "dropdownMenuPopoverContainer brandPrimaryColorStyled"
    });
    f = zT.prototype;
    f.initialize = function (a) {
        aY.prototype.initialize.call(this, a);
        this.pk = a.pk;
        this.document = a.document;
        this.ja = a.ja;
        this.La = a.La;
        this.Cc = this.document.pb();
        this.rA = null;
        this.tL = this.zL = !1;
        this.Tg = a.Tg;
        this.DJ = a.DJ;
        this.zk = a.zk;
        this.u = a.u;
        this.ZR = this.CJ = this.$q = null;
        var b = w(this.Cc.G()),
            c = w(this.Cc.getName()),
            d = w(this.Cc.tb),
            e = bY,
            g = this.ja.ba.get(Gf),
            h = this.ja.bM(),
            k = this.ja.ba.get(Pf);
        a = a.Er;
        var l = this.u;
        l.Ug || (l.Ug = new Wd(l.config));
        this.CS = new e({
            nm: c,
            Fo: b,
            FJ: d,
            cK: g,
            eK: h,
            hK: k,
            Er: a,
            Ug: l.Ug
        });
        c = cY;
        e = this.u;
        e.Jk || (e.Jk = new Xd(e.config));
        this.Ik = new c({
            Ak: b,
            Jk: e.Jk
        });
        this.qW = d.wj();
        this.gD = new dY({
            sJ: d.D(),
            nJ: d.F(),
            rJ: d.wj(),
            lm: vc(this.u)
        });
        d = eY;
        c = this.u;
        c.ih || (c.ih = new Yd(c.config));
        this.wg = new d({
            Ak: b,
            ih: c.ih
        });
        this.lt(this.CS);
        this.lt(this.Ik);
        this.lt(this.gD);
        this.lt(this.wg);
        this.listenTo(this.CS, "show", this.y7);
        this.AV()
    };
    f.events = function () {
        var a = aY.prototype.events.call(this);
        a["click .documentSaveButton"] = this.A2;
        a["click .documentCopyButton"] = this.c2;
        a["click .documentResizePaneButton"] = this.i2;
        a["click .documentResizeButton"] = this.g2;
        a["click .customDimensionsPaneButton"] = this.e2;
        a["keydown .customDimensionsWidth, .customDimensionsHeight"] = this.m3;
        a["change .customDimensionsUnits"] = this.S1;
        a["click .customDimensionsResizeButton"] = this.f2;
        a["click .magicResizePaneButton"] = this.t2;
        a["change .magicResizePane input"] = this.V1;
        a["click .magicResizeButton:enabled"] = this.s2;
        a["click .button.retry"] = this.AV;
        a["click .resizeUpgradeCta .buttonLearnMore"] = this.h2;
        return a
    };
    f.Ag = function (a, b) {
        this.trigger("documentResizeRequested", a, b)
    };

    function fY(a) {
        switch (a) {
            case "PIXELS":
                return "PIXELS";
            case "MILLIMETERS":
                return "MILLIMETERS";
            case "CENTIMETERS":
                return "CENTIMETERS";
            case "INCHES":
                return "INCHES";
            default:
                throw Error("Unknown units " + a);
        }
    }

    function gY(a) {
        var b = a.$(".customDimensionsUnits").prop("value"),
            c = "PIXELS" === b ? 0 : 3,
            d = +parseFloat(a.$(".customDimensionsWidth").val()).toFixed(c),
            c = +parseFloat(a.$(".customDimensionsHeight").val()).toFixed(c),
            e = a.Cc.tb,
            g = e.D(),
            h = e.F(),
            e = e.wj();
        if (d === g && c === h && b == e)
            a.cancel();
        else {
            var k = new ls({
                width: d,
                height: c,
                units: fY(b)
            });
            a.ja.ba.get(ng) ? (g = gu(d, c, b),
                a.Ag(g, k),
                a.ok()) : (g = new Bu({
                    tb: new hu({
                        width: d,
                        height: c,
                        units: b
                    }),
                    pl: !0
                }),
                a.Tg.createDocumentType(g).then(function (a) {
                        this.Ag(a.Cc, k);
                        this.ok()
                    }
                    .bind(a)))
        }
        null != T && tl(T, "change_design_dimension", null, null, "editor", {
            resize_type: "custom",
            new_units: b,
            new_width: d.toString(),
            new_height: c.toString()
        })
    }

    function hY(a) {
        a.rA || (a.rA = Uy(J.bx),
            a.rA.finally(function () {
                a.rA = null
            }));
        return a.rA
    }
    f.AV = function () {
        this.vX({});
        Ii(this.DJ.fa, "/documentcreationoption/expanded?creationOptionSubset\x3d" + (new xt).k_).get(0).then(Ja).then(zt).bind(this).tap(function (a) {
            this.CJ = a.AE;
            this.ZR = _.flatten(a.AE.map(function (a) {
                return a.options
            }))
        }).then(this.f1).catch(this.gT)
    };
    f.f1 = function () {
        var a = [];
        this.CJ.forEach(function (b) {
            b.options.forEach(function (b) {
                a.push(b.nm)
            })
        });
        Et(this.Tg, new Fu({
            Aj: a
        })).bind(this).tap(function (a) {
            this.$q = a.$q
        }).then(this.j5).then(this.vX).catch(this.gT)
    };
    f.h2 = function () {
        var a = this.zk;
        a.H.Ga(Sl());
        qo(a, to)
    };
    f.vX = function (a) {
        this.Ik.GO(a);
        this.mo === this.Ik && (this.Ik.render(),
            this.Xp(this.Ik));
        this.wg.GO(a);
        this.mo === this.wg && (this.wg.render(),
            this.Xp(this.wg),
            iY(this))
    };
    f.gT = function () {
        this.Ik.HO();
        this.mo === this.Ik && (this.Ik.render(),
            this.Xp(this.Ik));
        this.wg.HO();
        this.mo === this.wg && (this.wg.render(),
            this.Xp(this.wg))
    };
    f.y7 = function () {
        if (!this.tL) {
            var a = this;
            this.tL = !0;
            hY(this).then(function () {
                var b = a.$(".documentCopyButton");
                b.prop("disabled", !1);
                b.removeClass("disabled");
                b.parent().removeAttr("title");
                a.tL = !1
            })
        }
    };

    function iY(a) {
        a.zL || (a.zL = !0,
            hY(a).then(function () {
                var b = 0 < a.$(".magicResizePane input:checked").length;
                a.$(".magicResizeButton").prop("disabled", !b).toggleClass("disabled", !b);
                a.zL = !1
            }))
    }
    f.A2 = function (a) {
        var b = this;
        a = $(a.currentTarget);
        a.addClass("active");
        a.one("animationend", function () {
            b.trigger("documentSaveRequested");
            b.ok()
        })
    };
    f.c2 = function () {
        this.trigger("documentCopyRequested");
        this.ok()
    };
    f.i2 = function () {
        this.Ik.show()
    };
    f.g2 = function (a) {
        var b = this;
        a = $(a.currentTarget);
        var c = a.prop("value");
        a.addClass("active");
        a.one("animationend", function () {
            if (c === b.document.pb().G())
                b.cancel();
            else {
                var a = _.find(b.$q, function (a) {
                        return a.G() === c
                    }),
                    e = _.find(b.ZR, function (a) {
                        return a.nm === c
                    });
                w(e.Fo);
                w(a);
                b.Ag(a, new ks({
                    id: e.Fo,
                    version: 1
                }));
                b.ok()
            }
        });
        null != T && tl(T, "change_design_dimension", null, null, "editor", {
            resize_type: "preset",
            resize_doctype_id: c
        })
    };
    f.e2 = function () {
        this.gD.show()
    };
    f.m3 = function (a) {
        13 === a.keyCode && gY(this)
    };
    f.S1 = function () {
        var a = this.$(".customDimensionsUnits").prop("value"),
            b = this.$(".customDimensionsWidth").prop("value"),
            c = this.$(".customDimensionsHeight").prop("value");
        a: {
            c = new hu({
                units: this.qW,
                width: b,
                height: c
            });
            b = Lg(c);
            switch (a) {
                case "PIXELS":
                    break a;
                case "CENTIMETERS":
                    c = b.D() / 96 * 2.54;
                    b = b.F() / 96 * 2.54;
                    break;
                case "INCHES":
                    c = b.D() / 96;
                    b = b.F() / 96;
                    break;
                case "MILLIMETERS":
                    c = b.D() / 96 * 25.4;
                    b = b.F() / 96 * 25.4;
                    break;
                default:
                    throw Error("Unknown units: " + c.wj());
            }
            b = new hu({
                width: c,
                height: b,
                units: a
            })
        }
        c = "PIXELS" === a ? 0 : 3;
        this.$(".customDimensionsWidth").val(+b.D().toFixed(c));
        this.$(".customDimensionsHeight").val(+b.F().toFixed(c));
        this.qW = a
    };
    f.f2 = function () {
        var a = this.$(".customDimensionsUnits").prop("value"),
            b = this.$(".customDimensionsWidth").val(),
            c = this.$(".customDimensionsHeight").val(),
            d, e = Math.floor(1E3 * jY(J.kY, a)) / 1E3,
            g = Math.ceil(1E3 * jY(J.mY, a)) / 1E3;
        if (b < g || c < g)
            d = vc(this.u).format("customDimensionsPaneDimensionUnder", g, a);
        else if (b > e || c > e)
            d = vc(this.u).format("customDimensionsPaneDimensionOver", e, a);
        if (d)
            return this.gD.ef(d);
        this.gD.tg();
        gY(this)
    };
    f.t2 = function () {
        this.wg.show();
        iY(this)
    };
    f.V1 = function () {
        iY(this)
    };
    f.s2 = function (a) {
        var b = [],
            c = this.$(".magicResizePane input:checked:enabled"),
            d = $(a.currentTarget);
        d.blur();
        d.prop("disabled", !0);
        var e = c.toArray().map(function (a) {
            return AU(this.La.Fc(), "remix", jt(this.La)) + "?resizeTo\x3d" + encodeURIComponent(a.value)
        }, this);
        this.wg.$(".errorMessage").remove();
        var g = function () {
                var a = window.open(e.shift());
                a && b.push(a);
                null == a ? (b.forEach(function (a) {
                        a.close()
                    }),
                    b = [],
                    d.prop("disabled", !1),
                    this.UO(),
                    T && Gl(T, "magic_resize")) : 0 === e.length ? (this.ok(),
                    T && Gl(T, "magic_resize")) : 0 < navigator.userAgent.indexOf("Safari") && 0 < navigator.userAgent.indexOf("Version/11") ? setTimeout(g, 1100) : g()
            }
            .bind(this);
        g()
    };
    f.UO = function () {
        kY.X6(this.pk) ? (new kY({
            pk: this.pk
        })).show() : (this.wg.UO(),
            this.Xp(this.wg))
    };
    f.j5 = function () {
        var a = {};
        this.CJ.forEach(function (b) {
            a[b.yE] = b.options.map(function (a) {
                return {
                    id: a.nm,
                    displayName: a.displayName,
                    displayDimensions: a.vJ,
                    category: b.yE
                }
            })
        });
        return a
    };

    function bY() {}
    bY = $X.extend({
        className: "dropdownPane fileMenuPane",
        template: _.template('\x3cheader\x3e\x3ch3 class\x3d"fileMenuPaneTitle" data-doctype\x3d"\x3c%- data.doctypeId %\x3e"\x3e\x3c%- data.doctypeName %\x3e\x3c/h3\x3e\x3cdiv class\x3d"documentDimensions"\x3e\x3c%- data.documentDimensions %\x3e\x3c/div\x3e\x3c% if (data.enableDocumentResize) { %\x3e\x3cul class\x3d"menuActionsList"\x3e\x3cli\x3e\x3cbutton class\x3d"button documentResizePaneButton"\x3e\x3c%- data.changeDimensionsLabel %\x3e\x3c/button\x3e\x3c/li\x3e\x3c% if (data.enableMagicResize) { %\x3e\x3cli\x3e\x3cbutton class\x3d"button magicResizePaneButton"\x3e\x3c%- data.magicResizeLabel %\x3e\x3c/button\x3e\x3c/li\x3e\x3c% } %\x3e\x3c/ul\x3e\x3c% } else if (data.showUpgradeCta) { %\x3e\x3cdiv class\x3d"resizeUpgradeCta"\x3e\x3cspan\x3e\x3c%- data.resizeUpgradePrompt %\x3e\x3c/span\x3e\x3cbutton class\x3d"button buttonSmall buttonLearnMore"\x3e\x3c%- data.learnMoreButtonLabel %\x3e\x3c/button\x3e\x3c/div\x3e\x3c% } %\x3e\x3c/header\x3e\x3csection\x3e\x3cul class\x3d"menuActionsList"\x3e\x3cli\x3e\x3cbutton class\x3d"button documentSaveButton" data-syncstatus\x3d"\x3c%- data.lastSavedLabel %\x3e"\x3e\x3c%- data.saveLabel %\x3e\x3c/button\x3e\x3c/li\x3e\x3cli title\x3d"\x3c%- data.waitingForSaveTitle %\x3e"\x3e\x3cbutton class\x3d"button documentCopyButton disabled" disabled\x3e\x3c%- data.makeACopyLabel %\x3e\x3c/button\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/section\x3e', {
            variable: "data"
        })
    });
    bY.prototype.initialize = function (a) {
        $X.prototype.initialize.call(this);
        this.nm = a.nm;
        this.Fo = a.Fo;
        this.FJ = a.FJ;
        this.cK = a.cK;
        this.eK = a.eK;
        this.hK = a.hK;
        this.Er = a.Er;
        this.Ug = a.Ug
    };
    bY.prototype.render = function () {
        var a = moment(this.Er).fromNow();
        this.$el.html(this.template({
            documentDimensions: this.FJ.print(),
            enableDocumentResize: this.cK,
            enableMagicResize: this.eK,
            doctypeName: this.nm,
            doctypeId: this.Fo,
            magicResizeLabel: this.Ug.format("editorFileMenuPaneMagicResize"),
            changeDimensionsLabel: this.Ug.format("editorFileMenuPaneChangeDimensions"),
            saveLabel: this.Ug.save(),
            makeACopyLabel: this.Ug.format("editorFileMenuPaneMakeACopy"),
            waitingForSaveTitle: this.Ug.format("editorFileMenuPaneWaitingForSave"),
            showUpgradeCta: this.hK,
            resizeUpgradePrompt: this.Ug.N5(),
            learnMoreButtonLabel: this.Ug.TL(),
            lastSavedLabel: this.Ug.Z0(a)
        }));
        return this
    };

    function cY() {}
    cY = $X.extend({
        className: "dropdownPane documentResizePane",
        template: _.template('\x3csection class\x3d"scrollParent"\x3e\x3cdiv class\x3d"scrollContent"\x3e\x3cul class\x3d"menuActionsList"\x3e\x3cli\x3e\x3cbutton class\x3d"button customDimensionsPaneButton"\x3e\x3c%- data.useCustomDimensions %\x3e\x3c/button\x3e\x3c/li\x3e\x3c/ul\x3e\x3c% if (data.fetchFailed) { %\x3e\x3cdiv class\x3d"notification error message"\x3e\x3c%- data.couldNotBeLoaded %\x3e\x3cbr\x3e\x3cbutton class\x3d"button retry"\x3e\x3c%- data.tryLoadingAgain %\x3e\x3c/button\x3e\x3c/div\x3e\x3c% } else if (Object.keys(data.documentTypes).length \x3d\x3d\x3d 0) { %\x3e\x3cp class\x3d"documentTypeLoading"\x3e\x3c%- data.fetchingDesignTypes %\x3e\x3c/p\x3e\x3c% } else { %\x3e\x3c% for (var sectionName in data.documentTypes) { %\x3e\x3ch4\x3e\x3c%- sectionName %\x3e\x3c/h4\x3e\x3cul class\x3d"menuActionsList"\x3e\x3c% data.documentTypes[sectionName].forEach(function (documentType) { %\x3e\x3cli\x3e\x3cbutton class\x3d"button documentResizeButton" value\x3d"\x3c%- documentType.id %\x3e"\x3e\x3c%- documentType.displayName %\x3e \x3cspan class\x3d"documentTypeDimensions menuOptionsListSubLabel"\x3e\x3c%- documentType.displayDimensions %\x3e\x3c/span\x3e\x3c/button\x3e\x3c/li\x3e\x3c% }); %\x3e\x3c/ul\x3e\x3c% } %\x3e\x3c% } %\x3e\x3c/div\x3e\x3c/section\x3e', {
            variable: "data"
        })
    });
    cY.prototype.initialize = function (a) {
        $X.prototype.initialize.call(this);
        this.by = {};
        this.Ak = a.Ak;
        this.ir = !1;
        this.Jk = a.Jk
    };
    cY.prototype.render = function () {
        this.$el.html(this.template({
            documentTypes: this.by,
            fetchFailed: this.ir,
            useCustomDimensions: this.Jk.H7(),
            couldNotBeLoaded: this.Jk.WI(),
            tryLoadingAgain: this.Jk.BP(),
            fetchingDesignTypes: this.Jk.rK()
        }));
        if ("custom" !== this.Ak)
            for (var a = this.$(".documentResizeButton"), b = 0; b < a.length; b++)
                if (a[b].value === this.Ak) {
                    a.eq(b).addClass("selected");
                    break
                }
        return this
    };
    cY.prototype.GO = function (a) {
        this.ir = !1;
        this.by = a
    };
    cY.prototype.HO = function () {
        this.ir = !0
    };

    function dY() {}
    dY = $X.extend({
        className: "dropdownPane customDimensionsPane"
    });
    f = dY.prototype;
    f.initialize = function (a) {
        $X.prototype.initialize.call(this);
        this.sJ = a.sJ;
        this.nJ = a.nJ;
        this.lm = a.lm;
        this.rJ = a.rJ;
        this.on("show", this.l0)
    };
    f.render = function () {
        var a = this;
        this.$el.html(this.template({
            defaultWidth: this.sJ,
            defaultHeight: this.nJ,
            actionResize: this.lm.GY(),
            times: this.lm.times(),
            pixelsUnit: this.lm.a5(),
            dimOptions: ["PIXELS", "INCHES", "CENTIMETERS", "MILLIMETERS"].map(function (b) {
                return {
                    value: b,
                    selected: b === a.rJ,
                    name: Au(b)
                }
            })
        }));
        return this
    };
    f.l0 = function () {
        var a = this;
        this.$el.one("transitionend", function () {
            a.$(".customDimensionsWidth").focus()
        })
    };
    f.ef = function (a) {
        var b = this.$(".customDimensions__error");
        b.text(a);
        b.addClass("customDimensions__error--visible");
        this.trigger("resize")
    };
    f.tg = function () {
        this.$(".customDimensions__error").removeClass("customDimensions__error--visible")
    };
    f.template = _.template('\x3cfieldset\x3e\x3cinput class\x3d"customDimensionsWidth textInput" type\x3d"number" value\x3d"\x3c%- defaultWidth %\x3e"\x3e \x3c%- times %\x3e \x3cinput class\x3d"customDimensionsHeight textInput" type\x3d"number" value\x3d"\x3c%- defaultHeight %\x3e"\x3e\x3cspan class\x3d"select"\x3e\x3cselect class\x3d"customDimensionsUnits"\x3e\x3c% for (var i \x3d 0; i \x3c dimOptions.length; ++i) { %\x3e\x3coption value\x3d"\x3c%- dimOptions[i].value %\x3e" \x3c% if (dimOptions[i].selected) { %\x3e selected \x3c% } %\x3e \x3e\x3c%- dimOptions[i].name %\x3e\x3c/option\x3e\x3c% } %\x3e\x3c/select\x3e\x3cspan\x3e\x3c/fieldset\x3e\x3cdiv class\x3d"customDimensions__error feedback feedback--warning"\x3e\x3c/div\x3e\x3cfieldset\x3e\x3cbutton class\x3d"button buttonBlock customDimensionsResizeButton"\x3e\x3c%- actionResize %\x3e\x3c/button\x3e\x3c/fieldset\x3e');

    function lY(a, b, c) {
        this.Bm = a;
        this.ao = b;
        this.dm = c
    }
    var mY = [];

    function nY(a, b) {
        if ("INCHES" == a)
            throw Error('Cannot define measurement unit conversion from "INCHES" to itself');
        if (0 == b)
            throw Error("Cannot define measurement unit conversion with conversionFactor \x3d 0");
        var c = new lY("INCHES", a, b);
        a = new lY(a, "INCHES", 1 / b);
        b = [c, a];
        oY(c, b, 1);
        oY(a, b, 0);
        Array.prototype.push.apply(mY, b)
    }

    function jY(a, b) {
        if ("PIXELS" == b)
            return a;
        for (var c = 0; c < mY.length; c++) {
            var d = mY[c];
            if ("PIXELS" == d.Bm && d.ao == b)
                return d.dm * a
        }
        throw Error('Unknown measurement unit conversion from "PIXELS" to "' + b + '"');
    }

    function oY(a, b, c) {
        var d, e, g;
        for (e = 0; e < mY.length; e++) {
            var h = mY[e];
            if (h.Bm == a.ao) {
                if (d = new lY(a.Bm, h.ao, a.dm * h.dm),
                    b.push(d),
                    0 != c)
                    for (g = 0; g < mY.length; g++)
                        h = mY[g],
                        d.Bm == h.ao && b.push(new lY(d.ao, h.Bm, 1 / (h.dm * d.dm)))
            } else if (h.ao == a.Bm && (d = new lY(h.Bm, a.ao, h.dm * a.dm),
                    b.push(d),
                    0 != c))
                for (g = 0; g < mY.length; g++)
                    h = mY[g],
                    d.ao == h.Bm && b.push(new lY(d.Bm, h.ao, d.dm * h.dm))
        }
    }
    nY("MILLIMETERS", 25.4);
    nY("PIXELS", 96);
    nY("CENTIMETERS", 2.54);

    function eY() {}
    eY = $X.extend({
        className: "dropdownPane magicResizePane",
        template: _.template('\x3cheader\x3e\x3ch3\x3e\x3c%- data.copyAndResize %\x3e\x3c/h3\x3e\x3c/header\x3e\x3csection class\x3d"scrollParent"\x3e\x3cdiv class\x3d"scrollContent"\x3e\x3c% if (data.fetchFailed) { %\x3e\x3cdiv class\x3d"notification error message"\x3e\x3c%- data.couldNotBeLoaded %\x3e.\x3cbr\x3e\x3cbutton class\x3d"button retry"\x3e\x3c%- data.tryLoadingAgain %\x3e\x3c/button\x3e\x3c/div\x3e\x3c% } else if (Object.keys(data.documentTypes).length \x3d\x3d\x3d 0) { %\x3e\x3cp class\x3d"documentTypeLoading"\x3e\x3c%- data.fetchingDesignTypes %\x3e\x3c/p\x3e\x3c% } else { %\x3e\x3c% for (var sectionName in data.documentTypes) { %\x3e\x3ch4\x3e\x3c%- sectionName %\x3e\x3c/h4\x3e\x3cul class\x3d"menuOptionsList"\x3e\x3c% data.documentTypes[sectionName].forEach(function (documentType) { %\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox" value\x3d"\x3c%- documentType.id %\x3e"\x3e \x3c%- documentType.displayName %\x3e \x3c% if (documentType.id \x3d\x3d data.currentDocumentTypeId) { %\x3e\x3cspan class\x3d"documentTypeCurrentDesign menuOptionsListSubLabel"\x3e\x3c%- data.currentDesignSize %\x3e\x3c/span\x3e\x3c% } else { %\x3e\x3cspan class\x3d"documentTypeDimensions menuOptionsListSubLabel"\x3e\x3c%- documentType.displayDimensions %\x3e\x3c/span\x3e\x3c% } %\x3e\x3c/label\x3e\x3c% }); %\x3e\x3c/ul\x3e\x3c% } %\x3e\x3c% } %\x3e\x3c/div\x3e\x3c/section\x3e\x3cfooter\x3e\x3cbutton class\x3d"button magicResizeButton disabled" disabled\x3e\x3cimg class\x3d"iconWand" src\x3d"https://static.canva.com/static/images/icon_wand.svg" alt\x3d"Magic wand" /\x3e\x3cimg class\x3d"iconWand black" src\x3d"https://static.canva.com/static/images/icon_wand_black.svg" alt\x3d"Magic wand" /\x3e \x3c%- data.abracadabraResize %\x3e\x3c/button\x3e\x3c/footer\x3e', {
            variable: "data"
        }),
        g5: _.template('\x3cp class\x3d"errorMessage"\x3e\x3cstrong\x3e\x3c%- data.ohSnap %\x3e\x3c/strong\x3e \x3c%- data.multipleTabs %\x3e\x3c/p\x3e', {
            variable: "data"
        })
    });
    f = eY.prototype;
    f.initialize = function (a) {
        $X.prototype.initialize.call(this);
        this.Ak = a.Ak;
        this.by = {};
        this.ir = !1;
        this.ih = a.ih
    };
    f.render = function () {
        this.$el.html(this.template({
            documentTypes: this.by,
            currentDocumentTypeId: this.Ak,
            fetchFailed: this.ir,
            copyAndResize: this.ih.$Z(),
            couldNotBeLoaded: this.ih.WI(),
            tryLoadingAgain: this.ih.BP(),
            fetchingDesignTypes: this.ih.rK(),
            currentDesignSize: this.ih.m_(),
            abracadabraResize: this.ih.CY()
        }));
        this.$('input:not([value\x3d"' + this.Ak + '"])').slice(0, 3).prop("checked", !0);
        this.$('input[value\x3d"' + this.Ak + '"]').prop("disabled", !0).parent("label").addClass("menuOptionsListDisabled");
        return this
    };
    f.GO = function (a) {
        this.ir = !1;
        this.by = a
    };
    f.HO = function () {
        this.ir = !0
    };
    f.UO = function () {
        this.$("footer").prepend(this.g5({
            ohSnap: this.ih.J1(),
            multipleTabs: this.ih.D1()
        }))
    };

    function pY(a) {
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        var b = a.message;
        soy.asserts.assertType(goog.isString(a.no) || a.no instanceof goog.soy.data.SanitizedContent, "alertClass", a.no, "string|goog.soy.data.SanitizedContent");
        var c = a.no;
        soy.asserts.assertType(a.Om instanceof soydata.SanitizedHtml || a.Om instanceof soydata.UnsanitizedText || goog.isString(a.Om), "iconHtml", a.Om, "soydata.SanitizedHtml");
        var d = a.Om;
        soy.asserts.assertType(null == a.ad || goog.isBoolean(a.ad) || 1 === a.ad || 0 === a.ad, "showDismiss", a.ad, "boolean|null|undefined");
        var e = a.ad;
        soy.asserts.assertType(null == a.title || a.title instanceof soydata.SanitizedHtml || a.title instanceof soydata.UnsanitizedText || goog.isString(a.title), "title", a.title, "?soydata.SanitizedHtml|string|undefined");
        var g = a.title;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var h = a.J;
        soy.asserts.assertType(null == a.global || goog.isBoolean(a.global) || 1 === a.global || 0 === a.global, "global", a.global, "boolean|null|undefined");
        var k = a.global;
        soy.asserts.assertType(null == a.Hb || goog.isBoolean(a.Hb) || 1 === a.Hb || 0 === a.Hb, "withIcon", a.Hb, "boolean|null|undefined");
        var l = a.Hb;
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        a = a.small;
        l = null == l ? !0 : l;
        b = "" + ('\x3cdiv class\x3d"feedbackAlert ' + soy.$$escapeHtmlAttribute(c) + (k ? " feedbackAlert--global" : "") + (l ? " feedbackAlert--withIcon" : "") + (e ? " feedbackAlert--dismissible" : "") + (a ? " feedbackAlert--small" : "") + (h ? " " + soy.$$escapeHtmlAttribute(h) : "") + '"\x3e\x3cdiv class\x3d"feedbackAlert__message"\x3e\x3cdiv class\x3d"feedbackAlert__iconContainer"\x3e' + (l ? soy.$$escapeHtml(d) : "") + "\x3c/div\x3e" + (g ? '\x3cstrong class\x3d"feedbackAlert__title"\x3e' + soy.$$escapeHtml(g) + "\x3c/strong\x3e " : "") + '\x3cdiv class\x3d"feedbackAlert__messageBody"\x3e' + soy.$$escapeHtml(b) + "\x3c/div\x3e\x3c/div\x3e" + (e ? '\x3cbutton type\x3d"button" class\x3d"feedbackAlert__closeButton"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg xmlns\x3d"http://www.w3.org/2000/svg" width\x3d"24" height\x3d"24" viewBox\x3d"0 0 24 24"\x3e\x3cpolygon points\x3d"19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12"/\x3e\x3c/svg\x3e') + "\x3c/button\x3e" : "") + "\x3c/div\x3e");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)
    }

    function qY(a) {
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        soy.asserts.assertType(null == a.title || a.title instanceof soydata.SanitizedHtml || a.title instanceof soydata.UnsanitizedText || goog.isString(a.title), "title", a.title, "?soydata.SanitizedHtml|string|undefined");
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        soy.asserts.assertType(null == a.ad || goog.isBoolean(a.ad) || 1 === a.ad || 0 === a.ad, "showDismiss", a.ad, "boolean|null|undefined");
        soy.asserts.assertType(null == a.global || goog.isBoolean(a.global) || 1 === a.global || 0 === a.global, "global", a.global, "boolean|null|undefined");
        soy.asserts.assertType(null == a.Hb || goog.isBoolean(a.Hb) || 1 === a.Hb || 0 === a.Hb, "withIcon", a.Hb, "boolean|null|undefined");
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(pY(soy.$$assignDefaults({
            no: "feedbackAlert--success",
            Om: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + rY())
        }, a)))
    }

    function sY(a) {
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        soy.asserts.assertType(null == a.title || a.title instanceof soydata.SanitizedHtml || a.title instanceof soydata.UnsanitizedText || goog.isString(a.title), "title", a.title, "?soydata.SanitizedHtml|string|undefined");
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        soy.asserts.assertType(null == a.ad || goog.isBoolean(a.ad) || 1 === a.ad || 0 === a.ad, "showDismiss", a.ad, "boolean|null|undefined");
        soy.asserts.assertType(null == a.global || goog.isBoolean(a.global) || 1 === a.global || 0 === a.global, "global", a.global, "boolean|null|undefined");
        soy.asserts.assertType(null == a.Hb || goog.isBoolean(a.Hb) || 1 === a.Hb || 0 === a.Hb, "withIcon", a.Hb, "boolean|null|undefined");
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(pY(soy.$$assignDefaults({
            no: "feedbackAlert--info",
            Om: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + tY())
        }, a)))
    }

    function uY(a) {
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        soy.asserts.assertType(null == a.title || a.title instanceof soydata.SanitizedHtml || a.title instanceof soydata.UnsanitizedText || goog.isString(a.title), "title", a.title, "?soydata.SanitizedHtml|string|undefined");
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        soy.asserts.assertType(null == a.ad || goog.isBoolean(a.ad) || 1 === a.ad || 0 === a.ad, "showDismiss", a.ad, "boolean|null|undefined");
        soy.asserts.assertType(null == a.global || goog.isBoolean(a.global) || 1 === a.global || 0 === a.global, "global", a.global, "boolean|null|undefined");
        soy.asserts.assertType(null == a.Hb || goog.isBoolean(a.Hb) || 1 === a.Hb || 0 === a.Hb, "withIcon", a.Hb, "boolean|null|undefined");
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(pY(soy.$$assignDefaults({
            no: "feedbackAlert--warning",
            Om: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + vY())
        }, a)))
    }

    function wY(a) {
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        soy.asserts.assertType(null == a.title || a.title instanceof soydata.SanitizedHtml || a.title instanceof soydata.UnsanitizedText || goog.isString(a.title), "title", a.title, "?soydata.SanitizedHtml|string|undefined");
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        soy.asserts.assertType(null == a.ad || goog.isBoolean(a.ad) || 1 === a.ad || 0 === a.ad, "showDismiss", a.ad, "boolean|null|undefined");
        soy.asserts.assertType(null == a.global || goog.isBoolean(a.global) || 1 === a.global || 0 === a.global, "global", a.global, "boolean|null|undefined");
        soy.asserts.assertType(null == a.Hb || goog.isBoolean(a.Hb) || 1 === a.Hb || 0 === a.Hb, "withIcon", a.Hb, "boolean|null|undefined");
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(pY(soy.$$assignDefaults({
            no: "feedbackAlert--danger",
            Om: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + vY())
        }, a)))
    }

    function tY() {
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M12,2 C17.52,2 22,6.48 22,12 C22,17.52 17.52,22 12,22 C6.48,22 2,17.52 2,12 C2,6.48 6.48,2 12,2 Z M12,3.33333333 C7.21637967,3.33333333 3.33333333,7.21637967 3.33333333,12 C3.33333333,16.7836203 7.21637967,20.6666667 12,20.6666667 C16.7836203,20.6666667 20.6666667,16.7836203 20.6666667,12 C20.6666667,7.21637967 16.7836203,3.33333333 12,3.33333333 Z M13,17 L11,17 L11,11 L13,11 L13,17 Z M13,9 L11,9 L11,7 L13,7 L13,9 Z"/\x3e\x3c/svg\x3e')
    }
    goog.DEBUG && (tY.MW = "FeedbackTemplates.infoIcon");

    function rY() {
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M10,0 C15.52,0 20,4.48 20,10 C20,15.52 15.52,20 10,20 C4.48,20 0,15.52 0,10 C0,4.48 4.48,0 10,0 Z M10,1.33333333 C5.21637967,1.33333333 1.33333333,5.21637967 1.33333333,10 C1.33333333,14.7836203 5.21637967,18.6666667 10,18.6666667 C14.7836203,18.6666667 18.6666667,14.7836203 18.6666667,10 C18.6666667,5.21637967 14.7836203,1.33333333 10,1.33333333 Z M6,10 L5,11 L8,14 L15,7 L14,6 L8,12 L6,10 Z" transform\x3d"translate(2,2)"/\x3e\x3c/svg\x3e')
    }
    goog.DEBUG && (rY.MW = "FeedbackTemplates.successIcon");

    function vY() {
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg class\x3d"feedbackAlert__icon" xmlns\x3d"http://www.w3.org/2000/svg" viewBox\x3d"0 0 24 24"\x3e\x3cpath d\x3d"M12,2 C17.52,2 22,6.48 22,12 C22,17.52 17.52,22 12,22 C6.48,22 2,17.52 2,12 C2,6.48 6.48,2 12,2 Z M12,3.33333333 C7.21637967,3.33333333 3.33333333,7.21637967 3.33333333,12 C3.33333333,16.7836203 7.21637967,20.6666667 12,20.6666667 C16.7836203,20.6666667 20.6666667,16.7836203 20.6666667,12 C20.6666667,7.21637967 16.7836203,3.33333333 12,3.33333333 Z M13,17 L11,17 L11,11 L13,11 L13,17 Z M13,9 L11,9 L11,7 L13,7 L13,9 Z" transform\x3d"rotate(180 12 12)"/\x3e\x3c/svg\x3e')
    }
    goog.DEBUG && (vY.MW = "FeedbackTemplates.warningIcon");

    function xY(a, b) {
        this.$el = a;
        this.vh = b
    }
    t(xY, fc);

    function yY(a) {
        Ba(!(a.global ^ 0), "$globalContainer is required for global alerts");
        var b = a.type.lL();
        a = pY({
            no: a.type.Ma,
            J: a.J,
            global: a.global,
            Om: b,
            message: a.message,
            ad: a.ad,
            small: a.small,
            title: a.title,
            Hb: a.Hb
        });
        return zY($(a.toString()), void 0)
    }

    function zY(a, b) {
        Ba(a.hasClass("feedbackAlert"), '$el must have "feedbackAlert" in its classList');
        Ba(!a.hasClass("feedbackAlert--global") || !!b, "$globalContainer must only be used with global alerts");
        return new xY(a, b)
    }
    xY.prototype.De = function () {
        this.vh && (Da(!this.vh.hasClass("globalFeedbackAlertContainer"), "the global container already has a global alert"),
            this.vh.data("gcpt", this.vh.get(0).style["padding-top"]),
            this.vh.css("padding-top", parseFloat(this.vh.css("padding-top")) + this.$el.outerHeight()),
            this.vh.addClass("globalFeedbackAlertContainer"))
    };
    xY.prototype.remove = function () {
        if (this.vh) {
            this.vh.removeClass("globalFeedbackAlertContainer");
            this.vh.css("padding-top", "");
            var a = parseFloat(this.vh.data("gcpt"));
            a && this.vh.css("padding-top", a);
            this.vh.removeData("gcpt")
        }
        fc.prototype.remove.call(this)
    };
    var AY = {
            Ma: "feedbackAlert--info",
            lL: tY
        },
        BY = {
            Ma: "feedbackAlert--warning",
            lL: vY
        },
        CY = {
            Ma: "feedbackAlert--danger",
            lL: vY
        };

    function DY(a, b, c) {
        var d = this;
        this.yh = a.yh;
        this.H = a.H;
        this.H0 = b;
        c.on(EY, function (a) {
            return d.onMessage(a)
        });
        c.on(FY, function () {
            return c.hide()
        })
    }

    function GY(a) {
        var b = HY(a.zb, a.B_),
            c = $,
            d;
        soy.asserts.assertType(goog.isString(a.yh) || a.yh instanceof goog.soy.data.SanitizedContent, "animatorUrl", a.yh, "string|goog.soy.data.SanitizedContent");
        d = soydata.VERY_UNSAFE.ordainSanitizedHtml(IY({
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3ciframe src\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(a.yh)) + '" class\x3d"animatorFrame" scrolling\x3d"no" frameborder\x3d"0" marginheight\x3d"0" marginwidth\x3d"0" /\x3e')
        }));
        c = c(d.toString());
        d = new JY(c, $(document));
        c = new KY(c, d);
        return {
            bc: new DY(a, b, c),
            view: c
        }
    }

    function HY(a, b) {
        return P.resolve($.get(AU(a, "render", b))).then(function (a) {
            return a.toString()
        })
    }
    DY.prototype.onMessage = function (a) {
        if (a.origin === this.yh && "string" === typeof a.data.type)
            switch (a.data.type) {
                case LY:
                    MY(this, a);
                    break;
                case NY:
                    a = Ja(a.data.event);
                    a = new OY({
                        location: D("location", a),
                        type: D("type", a)
                    });
                    "error" === a.location ? this.H.track("animator_error", {
                        section: "editor",
                        subsection: "animator",
                        type: a.type
                    }) : tl(this.H, a.type, "editor", "animator", a.location);
                    break;
                default:
                    throw Error("unknown message type: " + a.data.type);
            }
    };

    function MY(a, b) {
        a.H0.then(function (a) {
            return new PY(a)
        }).catch(QY).then(function (a) {
            return b.source.postMessage({
                type: "ANIMATE_DESIGN",
                html: ib("html", a.html)
            }, b.origin)
        })
    }
    var LY = "ANIMATOR_LOADED",
        NY = "TRACKING";

    function PY(a) {
        this.html = a
    }

    function QY() {
        return new PY(null)
    }

    function OY(a) {
        this.location = a.location;
        this.type = a.type
    };

    function KY(a, b) {
        var c = this;
        L.call(this, a);
        this.Dk = b;
        this.onMessage = this.onMessage.bind(this);
        b.on(RY, function () {
            return c.trigger(FY)
        });
        window.addEventListener("message", this.onMessage)
    }
    t(KY, L);
    KY.prototype.show = function () {
        this.Dk.show()
    };
    KY.prototype.hide = function () {
        var a = this;
        this.Dk.hide().then(function () {
            a.remove()
        })
    };
    KY.prototype.onMessage = function (a) {
        this.trigger(EY, a)
    };
    KY.prototype.remove = function () {
        L.prototype.remove.call(this);
        window.removeEventListener("message", this.onMessage)
    };
    var FY = "CLOSE",
        EY = "MESSAGE";

    function SY(a) {
        a = a || {};
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"fileTypesDialog__icon"\x3e' + wW(a) + "\x3c/div\x3e")
    };

    function TY(a) {
        Uo.call(this, {
            aa: a.aa,
            title: a.bu.title(),
            content: UY(a.bu)
        })
    }
    t(TY, Uo);

    function UY(a) {
        var b = $,
            c;
        c = a.uA();
        var d = a.c5(),
            e = a.Bz(),
            g = a.X0(),
            h = a.U4(),
            k = soydata.VERY_UNSAFE.ordainSanitizedHtml(a.V4()),
            l = a.S4(),
            m = soydata.VERY_UNSAFE.ordainSanitizedHtml(a.T4());
        a = a.ZK();
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "png", c, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "pngDescription", d, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(e) || e instanceof goog.soy.data.SanitizedContent, "jpg", e, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(g) || g instanceof goog.soy.data.SanitizedContent, "jpgDescription", g, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(h) || h instanceof goog.soy.data.SanitizedContent, "pdfStandard", h, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(k instanceof soydata.SanitizedHtml || k instanceof soydata.UnsanitizedText || goog.isString(k), "pdfStandardDescription", k, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(l) || l instanceof goog.soy.data.SanitizedContent, "pdfPrint", l, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(m instanceof soydata.SanitizedHtml || m instanceof soydata.UnsanitizedText || goog.isString(m), "pdfPrintDescription", m, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(a) || a instanceof goog.soy.data.SanitizedContent, "gotIt", a, "string|goog.soy.data.SanitizedContent");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csection\x3e\x3csection class\x3d"fileTypesDialog__typeSection"\x3e' + SY({
            Se: "PNG",
            color: "#3F6BD1"
        }) + '\x3cp class\x3d"fileTypesDialog__description"\x3e\x3cstrong\x3e' + soy.$$escapeHtml(c) + "\x3c/strong\x3e " + soy.$$escapeHtml(d) + '\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"fileTypesDialog__typeSection"\x3e' + SY({
            Se: "JPG",
            color: "#399BE6"
        }) + '\x3cp class\x3d"fileTypesDialog__description"\x3e\x3cstrong\x3e' + soy.$$escapeHtml(e) + "\x3c/strong\x3e " + soy.$$escapeHtml(g) + '\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"fileTypesDialog__typeSection"\x3e' + SY({
            Se: "PDF",
            color: "#00C4CC"
        }) + '\x3cp class\x3d"fileTypesDialog__description"\x3e\x3cstrong\x3e' + soy.$$escapeHtml(h) + "\x3c/strong\x3e " + soy.$$escapeHtml(k) + '\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"fileTypesDialog__typeSection"\x3e' + SY({
            Se: "PDF",
            color: "#26B45A"
        }) + '\x3cp class\x3d"fileTypesDialog__description"\x3e\x3cstrong\x3e' + soy.$$escapeHtml(l) + "\x3c/strong\x3e " + soy.$$escapeHtml(m) + '\x3c/p\x3e\x3c/section\x3e\x3cfooter class\x3d"fileTypesDialog__footer"\x3e\x3cbutton class\x3d"button close fileTypesDialog__gotItButton"\x3e' + soy.$$escapeHtml(a) + "\x3c/button\x3e\x3c/footer\x3e\x3c/section\x3e");
        return b(c.toString())
    }
    TY.prototype.render = function () {
        Uo.prototype.render.call(this);
        this.$(".dialog").addClass("fileTypesDialog");
        return this
    };

    function VY(a) {
        Uo.call(this, {
            aa: a.aa,
            content: WY(a.Tx),
            cf: !1
        })
    }
    t(VY, Uo);

    function WY(a) {
        var b = $,
            c;
        c = a.title();
        var d = a.Xn(),
            e = soydata.VERY_UNSAFE.ordainSanitizedHtml(a.l_()),
            g = soydata.VERY_UNSAFE.ordainSanitizedHtml(a.ZY());
        a = a.ZK();
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "title", c, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "subtitle", d, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(e instanceof soydata.SanitizedHtml || e instanceof soydata.UnsanitizedText || goog.isString(e), "cropMarksDescription", e, "soydata.SanitizedHtml");
        soy.asserts.assertType(g instanceof soydata.SanitizedHtml || g instanceof soydata.UnsanitizedText || goog.isString(g), "bleedAreaDescription", g, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(a) || a instanceof goog.soy.data.SanitizedContent, "gotIt", a, "string|goog.soy.data.SanitizedContent");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cimg class\x3d"cropAndBleedDialog__headerImage" src\x3d"https://static.canva.com/static/images/crop_and_bleed_dialog_header.png"\x3e\x3csection class\x3d"cropAndBleedDialog__content"\x3e\x3cheader class\x3d"cropAndBleedDialog__header"\x3e\x3ch2\x3e' + soy.$$escapeHtml(c) + "\x3c/h2\x3e\x3cp\x3e" + soy.$$escapeHtml(d) + '\x3c/p\x3e\x3c/header\x3e\x3csection class\x3d"cropAndBleedDialog__section"\x3e\x3cdiv class\x3d"cropAndBleedDialog__icon"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"64" height\x3d"64" viewBox\x3d"0 0 64 64" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3ctitle\x3eIcon\x3c/title\x3e\x3cdefs\x3e\x3crect id\x3d"path-1" width\x3d"64" height\x3d"64" rx\x3d"4"/\x3e\x3cpath id\x3d"path-3" d\x3d"M32 32h32v32H32z"/\x3e\x3cmask id\x3d"mask-4" x\x3d"-8" y\x3d"-8" width\x3d"48" height\x3d"48"\x3e\x3cpath fill\x3d"#fff" d\x3d"M24 24h48v48H24z"/\x3e\x3cuse xlink:href\x3d"#path-3"/\x3e\x3c/mask\x3e\x3c/defs\x3e\x3cg id\x3d"Page-1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cg id\x3d"On-boarding-Dialog---Bleed" transform\x3d"translate(-444 -506)"\x3e\x3cg id\x3d"Message" transform\x3d"translate(404 162)"\x3e\x3cg id\x3d"Group" transform\x3d"translate(40 344)"\x3e\x3cg id\x3d"Icon"\x3e\x3cmask id\x3d"mask-2" fill\x3d"#fff"\x3e\x3cuse xlink:href\x3d"#path-1"/\x3e\x3c/mask\x3e\x3cuse id\x3d"Rectangle-214" fill\x3d"#EBECED" xlink:href\x3d"#path-1"/\x3e\x3cg id\x3d"Rectangle-214" mask\x3d"url(#mask-2)"\x3e\x3cuse fill\x3d"#F5F5F5" xlink:href\x3d"#path-3"/\x3e\x3cuse stroke\x3d"#D9D9D9" mask\x3d"url(#mask-4)" stroke-width\x3d"16" xlink:href\x3d"#path-3"/\x3e\x3c/g\x3e\x3cpath id\x3d"Rectangle-214" fill\x3d"#00C4CC" mask\x3d"url(#mask-2)" d\x3d"M32 4h2v16h-2z"/\x3e\x3cpath id\x3d"Rectangle-214" fill\x3d"#00C4CC" mask\x3d"url(#mask-2)" d\x3d"M4 32h16v2H4z"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e') + '\x3c/div\x3e\x3cp class\x3d"cropAndBleedDialog__description"\x3e' + soy.$$escapeHtml(e) + '\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"cropAndBleedDialog__section"\x3e\x3cdiv class\x3d"cropAndBleedDialog__icon"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"64" height\x3d"64" viewBox\x3d"0 0 64 64" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\x3cdefs\x3e\x3crect id\x3d"path-1" width\x3d"64" height\x3d"64" rx\x3d"4"/\x3e\x3c/defs\x3e\x3cg id\x3d"Page-1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3cg id\x3d"On-boarding-Dialog---Bleed" transform\x3d"translate(-444 -590)"\x3e\x3cg id\x3d"Message" transform\x3d"translate(404 162)"\x3e\x3cg id\x3d"Group" transform\x3d"translate(40 428)"\x3e\x3cg id\x3d"Icon"\x3e\x3cmask id\x3d"mask-2" fill\x3d"#fff"\x3e\x3cuse xlink:href\x3d"#path-1"/\x3e\x3c/mask\x3e\x3cuse id\x3d"Rectangle-214" fill\x3d"#EBECED" xlink:href\x3d"#path-1"/\x3e\x3cpath id\x3d"Rectangle-214" fill\x3d"#00C4CC" mask\x3d"url(#mask-2)" d\x3d"M24 24h40v40H24z"/\x3e\x3cpath id\x3d"Rectangle-214" fill\x3d"#F5F5F5" mask\x3d"url(#mask-2)" d\x3d"M32 32h32v32H32z"/\x3e\x3cpath id\x3d"Rectangle-214" fill\x3d"#D9D9D9" mask\x3d"url(#mask-2)" d\x3d"M32 4h2v16h-2z"/\x3e\x3cpath id\x3d"Rectangle-214" fill\x3d"#D9D9D9" mask\x3d"url(#mask-2)" d\x3d"M4 32h16v2H4z"/\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/g\x3e\x3c/svg\x3e') + '\x3c/div\x3e\x3cp class\x3d"cropAndBleedDialog__description"\x3e' + soy.$$escapeHtml(g) + '\x3c/p\x3e\x3c/section\x3e\x3cfooter class\x3d"cropAndBleedDialog__footer"\x3e\x3cbutton class\x3d"button close cropAndBleedDialog__gotItButton"\x3e' + soy.$$escapeHtml(a) + "\x3c/button\x3e\x3c/footer\x3e\x3c/section\x3e");
        return b(c.toString())
    }
    VY.prototype.render = function () {
        Uo.prototype.render.call(this);
        this.$(".dialog").addClass("cropAndBleedDialog");
        return this
    };

    function XY(a) {
        this.H = a.H
    }

    function YY(a, b) {
        a.track("download_page_range_change", {
            pageRange: b
        })
    }

    function ZY(a, b) {
        a.track("download_button_click", {
            filetype: b
        })
    }
    XY.prototype.LB = function (a) {
        this.track("close", {
            type: a
        })
    };
    XY.prototype.track = function (a, b) {
        this.H.track(a, _.extend(this.GK(), b))
    };
    XY.prototype.GK = function () {
        return {
            section: "editor",
            subsection: "download_menu",
            version: "2016-09"
        }
    };

    function $Y(a) {
        var b;
        b = b || {};
        soy.asserts.assertType(goog.isString(a.title) || a.title instanceof goog.soy.data.SanitizedContent, "title", a.title, "string|goog.soy.data.SanitizedContent");
        var c = a.title;
        soy.asserts.assertType(goog.isString(a.au) || a.au instanceof goog.soy.data.SanitizedContent, "fileTypeInfoLinkTitle", a.au, "string|goog.soy.data.SanitizedContent");
        var d = a.au;
        soy.asserts.assertType(goog.isString(a.ot) || a.ot instanceof goog.soy.data.SanitizedContent, "allPages", a.ot, "string|goog.soy.data.SanitizedContent");
        var e = a.ot;
        soy.asserts.assertType(goog.isString(a.WF) || a.WF instanceof goog.soy.data.SanitizedContent, "pageRangePlaceholder", a.WF, "string|goog.soy.data.SanitizedContent");
        var g = a.WF;
        soy.asserts.assertType(goog.isString(a.Kt) || a.Kt instanceof goog.soy.data.SanitizedContent, "cropMarksAndBleed", a.Kt, "string|goog.soy.data.SanitizedContent");
        var h = a.Kt;
        soy.asserts.assertType(goog.isString(a.Hw) || a.Hw instanceof goog.soy.data.SanitizedContent, "transparentBackground", a.Hw, "string|goog.soy.data.SanitizedContent");
        var k = a.Hw;
        soy.asserts.assertType(goog.isString(a.aF) || a.aF instanceof goog.soy.data.SanitizedContent, "learnMore", a.aF, "string|goog.soy.data.SanitizedContent");
        var l = a.aF;
        soy.asserts.assertType(goog.isString(a.download) || a.download instanceof goog.soy.data.SanitizedContent, "download", a.download, "string|goog.soy.data.SanitizedContent");
        var m = a.download;
        soy.asserts.assertType(goog.isNumber(a.Bd), "pageCount", a.Bd, "number");
        var n = a.Bd;
        soy.asserts.assertType(goog.isBoolean(a.$x) || 1 === a.$x || 0 === a.$x, "displayRemoveCanvasOption", a.$x, "boolean");
        var p = !!a.$x;
        soy.asserts.assertType(goog.isBoolean(a.Rn) || 1 === a.Rn || 0 === a.Rn, "showUpgradeCta", a.Rn, "boolean");
        var r = !!a.Rn;
        soy.asserts.assertType(goog.isString(a.TE) || a.TE instanceof goog.soy.data.SanitizedContent, "invalidPageRange", a.TE, "string|goog.soy.data.SanitizedContent");
        var u = a.TE,
            v = goog.asserts.assertArray(a.je, "expected parameter 'exportOptions' of type list\x3c[disabled: null, selected: bool, text: string, value: string]\x3e.");
        soy.asserts.assertType(goog.isString(a.Jt) || a.Jt instanceof goog.soy.data.SanitizedContent, "cropAndBleedInfoLinkTitle", a.Jt, "string|goog.soy.data.SanitizedContent");
        var y = a.Jt;
        soy.asserts.assertType(goog.isString(a.Eo) || a.Eo instanceof goog.soy.data.SanitizedContent, "defaultExportOption", a.Eo, "string|goog.soy.data.SanitizedContent");
        a = a.Eo;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cheader class\x3d"exportPopOver__header"\x3e\x3ch2 class\x3d"exportPopOver__title"\x3e' + soy.$$escapeHtml(c) + '\x3c/h2\x3e\x3ca href\x3d"#" class\x3d"exportPopOver__infoLink" title\x3d"' + soy.$$escapeHtmlAttribute(d) + '"\x3e' + vW() + '\x3c/a\x3e\x3c/header\x3e\x3csection class\x3d"exportPopOver__container"\x3e\x3csection class\x3d"exportPopOver__option"\x3e' + aZ({
            options: v,
            block: !0,
            J: "exportPopOver__fileTypeSelect"
        }) + '\x3c/section\x3e\x3csection class\x3d"exportPopOver__settingsContainer exportPopOver__settingsContainer--expanded exportPopOver__settingsContainer--notransitions" data-export-type\x3d"' + soy.$$escapeHtmlAttribute(a) + '" data-design-pages\x3d"' + soy.$$escapeHtmlAttribute(n) + '" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + 'height: 0"\x3e\x3csection class\x3d"exportPopOver__section exportPopOver__pageSettings"\x3e\x3clabel class\x3d"exportPopOver__option"\x3e\x3cinput type\x3d"radio" name\x3d"pageRangeOption" class\x3d"exportPopOver__allPagesOption" checked\x3e' + soy.$$escapeHtml(e) + '\x3c/label\x3e\x3cdiv class\x3d"exportPopOver__option exportPopOver__pageRangeOption"\x3e\x3cinput type\x3d"radio" name\x3d"pageRangeOption" class\x3d"exportPopOver__radio"\x3e\x3cinput type\x3d"text" class\x3d"textInput exportPopOver__input" placeholder\x3d"' + soy.$$escapeHtmlAttribute(g) + '"\x3e\x3c/div\x3e\x3c/section\x3e\x3csection class\x3d"exportPopOver__section exportPopOver__option exportPopOver__printSettings"\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox" name\x3d"cropsAndBleed" class\x3d"exportPopOver__cropMarksAndBleedInput"\x3e' + soy.$$escapeHtml(h) + '\x3c/label\x3e\x3ca href\x3d"#" class\x3d"exportPopOver__questionMarkIcon exportPopOver__cropAndBleedQuestionIcon" title\x3d"' + soy.$$escapeHtmlAttribute(y) + '"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg width\x3d"18" height\x3d"18" viewBox\x3d"0 0 18 18" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg fill-rule\x3d"evenodd"\x3e\x3cpath d\x3d"M15.5 9a6.5 6.5 0 1 0-13 0 6.5 6.5 0 0 0 13 0zm-14 0a7.5 7.5 0 1 1 15 0 7.5 7.5 0 0 1-15 0z"/\x3e\x3cpath d\x3d"M9.75 12.75h-1.5v-1.5h1.5v1.5zm-1.5-2.25c0-.466.065-.948.178-1.224.113-.277.32-.549.622-.817.301-.268.502-.486.602-.654.1-.168.15-.346.15-.532 0-.563-.26-.844-.78-.844-.246 0-.443.075-.591.227-.149.151-.226.36-.233.627H6.75c.007-.636.212-1.134.617-1.494.404-.36.956-.539 1.655-.539.706 0 1.254.17 1.644.512.39.341.584.823.584 1.446 0 .283-.063.55-.19.801-.126.252-.348.53-.664.837l-.405.385c-.132.15-.241.301-.241.925v.344h-1.5z"/\x3e\x3c/g\x3e\x3c/svg\x3e') + "\x3c/a\x3e\x3c/section\x3e" + (p || r ? '\x3csection class\x3d"exportPopOver__section exportPopOver__option exportPopOver__pngSettings"\x3e\x3clabel class\x3d"exportPopOver__transparentBackgroundCheckbox ' + (r ? "disabled" : "") + '"\x3e\x3cinput type\x3d"checkbox" name\x3d"removeCanvas" class\x3d"exportPopOver__transparentBackgroundCheckbox__input" ' + (r ? "disabled" : "") + "\x3e" + soy.$$escapeHtml(k) + "\x3c/label\x3e" + (r ? bZ({
            tagName: "a",
            J: "exportPopOver__questionMarkIcon exportPopOver__transparentBackgroundLearnMoreButton",
            small: !0,
            href: "#",
            text: l
        }) : "") + "\x3c/section\x3e" : "") + '\x3c/section\x3e\x3cdiv class\x3d"exportPopOver__pageRangeError"\x3e' + soy.$$escapeHtml(u) + '\x3c/div\x3e\x3c/section\x3e\x3cfooter\x3e\x3cbutton class\x3d"button buttonBlock buttonSubmittable exportPopOver__downloadButton"\x3e' + soy.$$escapeHtml(m) + "\x3c/button\x3e\x3c/footer\x3e")
    };

    function cZ() {}
    cZ = dy.extend();
    cZ.prototype.events = function () {
        var a = dy.prototype.events.call(this);
        a["input .exportPopOver__pageRangeOption .exportPopOver__input"] = this.g3;
        a["change input[name\x3dpageRangeOption]"] = this.X1;
        a["focus .exportPopOver__pageRangeOption .exportPopOver__input"] = this.V2;
        a["blur .exportPopOver__pageRangeOption .exportPopOver__input"] = this.M1;
        a["change .exportPopOver__pageRangeOption .exportPopOver__input"] = this.W1;
        a["change .exportPopOver__fileTypeSelect \x3e select"] = this.T1;
        a["click .exportPopOver__downloadButton"] = this.j2;
        a["click .exportPopOver__transparentBackgroundLearnMoreButton"] = this.D2;
        a["change .exportPopOver__transparentBackgroundCheckbox__input"] = this.Y1;
        a["click .exportPopOver__cropAndBleedQuestionIcon"] = this.d2;
        a["change .exportPopOver__cropMarksAndBleedInput"] = this.R1;
        a["click .exportPopOver__header .exportPopOver__infoLink"] = this.n2;
        return a
    };
    cZ.rQ = new yf("gf", !1);
    cZ.fY = new yf("gg", !1);
    f = cZ.prototype;
    f.initialize = function (a) {
        this.ja = a.ja;
        this.model = a.model;
        this.de = a.de;
        this.tl = a.tl;
        this.gd = a.gd;
        this.Fa = a.Fa;
        this.sc = a.sc;
        this.sb = a.sb;
        this.ma = a.ma;
        this.ka = a.ka;
        this.hd = a.hd;
        this.Eb = a.Eb;
        this.rc = a.rc;
        this.Od = a.Od;
        this.Ta = a.Ta;
        this.H = a.H;
        this.Qb = a.Qb;
        this.aa = a.aa;
        var b = this.u = a.u;
        b.fc || (b.fc = new Ce(b.config));
        this.fc = b.fc;
        this.jc = a.jc;
        this.Ih = a.Ih;
        this.Dd = a.Dd;
        this.yh = a.yh;
        this.ba = a.ba;
        this.zd = a.zd;
        this.Ic = a.Ic;
        this.cV = !0;
        this.Vi = a.Vi;
        this.Wa = a.Wa;
        this.je = [{
            value: dZ,
            text: this.fc.Bz()
        }, {
            value: eZ,
            text: this.fc.uA()
        }, {
            value: fZ,
            text: this.fc.format("exportPopOverStandardPdf")
        }, {
            value: gZ,
            text: this.fc.format("exportPopOverPrintPdf")
        }];
        this.ba.get(cZ.fY) && this.ba.get(cZ.rQ) && a.yh && this.je.push({
            value: hZ,
            text: this.fc.format("exportPopOverAnimation")
        });
        var c, b = this.model.pb().jD;
        c = eZ;
        "IMAGE" === b ? (b = this.model.pb().dl,
            c = "JPG" === b.Se ? dZ : eZ) : "PDF" === b && (b = this.model.pb().tn,
            c = 96 >= b.cd ? fZ : gZ);
        this.GV = this.Eo = c;
        a = _.defaults(a, {
            Qe: "",
            Ef: {
                top: -4
            },
            content: $($Y({
                title: this.fc.Se(),
                au: this.fc.au(),
                ot: this.fc.ot(),
                WF: this.fc.format("exportPopOverInRangePagesPlaceholder"),
                Kt: this.fc.Kt(),
                Hw: this.fc.Hw(),
                aF: this.fc.format("exportPopOverLearnMoreButton"),
                download: this.fc.download(),
                Bd: this.model.wc(),
                $x: this.ja.ba.get(Nf),
                Rn: !this.ja.ba.get(Nf) && this.ja.ba.get(Pf),
                TE: this.fc.format("exportPopOverInvalidPageRangeInput"),
                je: iZ(this),
                Jt: this.fc.Jt(),
                Eo: this.Eo
            }).toString())
        });
        dy.prototype.initialize.call(this, a)
    };
    f.render = function () {
        function a() {
            Mp(this.model) || (this.$el.removeClass("exportPopOver--disabled"),
                this.$(".exportPopOver__downloadButton").prop("disabled", !1),
                this.$(".exportPopOver__message").remove(),
                this.stopListening(this.model, "change", a))
        }
        dy.prototype.render.call(this);
        this.$(".dialog \x3e h2").remove();
        this.$(".buttonContainer").remove();
        this.$(".dialog").addClass("exportPopOver");
        Sk(function () {
                jZ(this, this.$(".exportPopOver__settingsContainer"))
            }
            .bind(this));
        var b = "";
        this.model.isEmpty() ? b = this.fc.format("exportPopOverEmptyDesignError") : Mp(this.model) ? (b = this.fc.format("exportPopOverDownloadsInProgressError"),
            this.listenTo(this.model, "change", a)) : (kZ(this),
            lZ(this),
            mZ(this));
        b && (yY({
                type: BY,
                J: "exportPopOver__message",
                message: b,
                Hb: !1
            }).$el.appendTo(this.$(".exportPopOver__header")),
            this.$el.addClass("exportPopOver--disabled"),
            this.$(".exportPopOver__downloadButton").prop("disabled", !0));
        return this
    };

    function kZ(a) {
        a.$(".exportPopOver__warning").remove();
        a.$(".exportPopOver__downloadButton").prop("disabled", !1)
    }
    f.cancel = _.debounce(function () {
        dy.prototype.cancel.call(this);
        this.Ih.LB("pressed_esc")
    }, 10, !0);
    f.blur = function (a) {
        dy.prototype.blur.call(this, a);
        this.Ih.LB("clicked_mask")
    };

    function nZ(a) {
        w(a.yh);
        var b = a.$(".exportPopOver__downloadButton"),
            c = GY({
                zb: a.Qb.Fc(),
                B_: jt(a.Qb),
                H: a.H,
                yh: a.yh
            }).view;
        b.addClass("submitting");
        oZ(a.Dd).finally(function () {
                c.$el.appendTo("body");
                c.show();
                this.ok();
                b.removeClass("submitting")
            }
            .bind(a))
    }

    function pZ(a) {
        function b() {
            this.$el.removeClass("exportPopOver--withPageRangeError")
        }
        var c, d;
        c = a.$(".exportPopOver__pageRangeOption .exportPopOver__input");
        d = c.val().trim();
        if ("" === d || cZ.IQ.test(d))
            return b.call(a),
                c.removeClass("exportPopOver__input--withError"), !0;
        d = a.$(".exportPopOver__pageRangeError");
        a.$el.addClass("exportPopOver--withPageRangeError");
        c.addClass("exportPopOver__input--withError");
        d.css("top", c.position().top - c.outerHeight() - 6 + "px");
        c.one("blur", b.bind(a));
        return !1
    }
    f.j2 = function (a) {
        a.preventDefault();
        if (!this.$(".exportPopOver__pageRangeOption .exportPopOver__radio").prop("checked") || pZ(this)) {
            this.$(".exportPopOver__cropMarksAndBleedInput").not(":visible").prop("checked", !1);
            this.$(".exportPopOver__transparentBackgroundCheckbox__input").not(":visible").prop("checked", !1);
            var b = qZ(this);
            a = {
                UT: b === gZ
            };
            if (b === hZ)
                nZ(this),
                ZY(this.Ih, b);
            else {
                var c;
                var d = this.$(".exportPopOver__pageRangeOption .exportPopOver__input").val();
                c = Bp(this.model).length;
                if (cZ.IQ.test(d)) {
                    for (var e = [], d = d.split(","), g = 0; g < d.length; g++) {
                        var h = d[g].split("-"),
                            k = parseInt(h[0], 10);
                        if (!isNaN(k)) {
                            var l = k = Math.max(1, Math.min(k, c));
                            1 < h.length && (l = parseInt(h[1], 10),
                                l = isNaN(l) ? c : Math.max(1, Math.min(l, c)));
                            var h = k,
                                m = l;
                            m < h && (h = l,
                                m = k);
                            for (k = 0; e[k] < h;)
                                k++;
                            for (; h <= m;)
                                e[k] !== h && e.splice(k, 0, h),
                                k++,
                                h++
                        }
                    }
                    c = e
                } else
                    c = _.range(1, c + 1);
                e = !!this.$(".exportPopOver__cropMarksAndBleedInput").prop("checked");
                d = b != dZ ? !!this.$(".exportPopOver__transparentBackgroundCheckbox \x3e input").prop("checked") : !1;
                k = this.model.pb();
                g = k.dl;
                l = k.tn;
                k = null;
                switch (b) {
                    case dZ:
                        b = "JPG";
                        l = g && g.cd || 96;
                        k = g && g.rp || k;
                        break;
                    case eZ:
                        b = "PNG";
                        l = g && g.cd || 96;
                        break;
                    case fZ:
                        b = "PDF";
                        l = Math.min(l && l.cd || 96, 96);
                        break;
                    case gZ:
                        b = "PDF";
                        l = l && l.cd || 96;
                        96 >= l && (l = 300);
                        break;
                    default:
                        throw Error("Unknown export option", b);
                }
                b = {
                    format: b,
                    ia: c,
                    Tq: e,
                    wt: e,
                    ns: d,
                    Bw: k,
                    Jr: l
                };
                rZ({
                    de: this.de,
                    tl: this.tl,
                    u: this.u,
                    Fa: this.Fa,
                    sc: this.sc,
                    sb: this.sb,
                    ma: this.ma,
                    ka: this.ka,
                    hd: this.hd,
                    rc: this.rc,
                    Eb: this.Eb,
                    Od: this.Od,
                    Ta: this.Ta,
                    H: this.H,
                    document: this.model,
                    Qb: this.Qb,
                    aa: this.aa,
                    jc: this.jc,
                    je: b,
                    Dd: this.Dd,
                    ba: this.ba,
                    ja: this.ja,
                    pt: a,
                    zd: this.zd,
                    Ic: this.Ic,
                    Wa: this.Wa
                }).start();
                this.ok();
                ZY(this.Ih, b.format)
            }
        }
    };

    function sZ(a, b) {
        b.val().trim().length && YY(a.Ih, b.val().toString())
    }
    f.T1 = function (a) {
        var b;
        b = $(a.currentTarget).val().toString();
        a = this.$(".exportPopOver__settingsContainer");
        a.attr("data-export-type", b);
        kZ(this);
        lZ(this);
        mZ(this);
        if (qZ(this) === hZ) {
            var c;
            this.Vi.qs ? 10 < this.model.wc() && (c = this.fc.Ua("exportPopOverAnimationPageLimitWarningHtml")) : c = this.fc.Ua("exportPopOverAnimationRendererErrorHtml");
            c ? (yY({
                    message: c,
                    type: CY,
                    Hb: !1,
                    J: "exportPopOver__warning"
                }).$el.prependTo(this.$(".exportPopOver__settingsContainer")),
                this.$(".exportPopOver__downloadButton").prop("disabled", !0)) : this.Vi.wH ? yY({
                message: this.fc.Ua("exportPopOverAnimationFilterWarningHtml"),
                type: BY,
                Hb: !1,
                J: "exportPopOver__warning"
            }).$el.prependTo(this.$(".exportPopOver__settingsContainer")) : yY({
                message: this.fc.Ua("exportPopOverAnimationBetaWarningHtml"),
                type: BY,
                Hb: !1,
                J: "exportPopOver__warning"
            }).$el.prependTo(this.$(".exportPopOver__settingsContainer"))
        }
        c = qZ(this) === hZ ? this.fc.format("exportPopOverPreviewAnimation") : this.fc.download();
        this.$(".exportPopOver__downloadButton").text(c);
        jZ(this, a);
        this.Ih.track("download_file_type_change", {
            from_filetype: this.GV,
            to_filetype: b
        });
        this.GV = b
    };

    function jZ(a, b) {
        var c = 0,
            d;
        b.removeClass("exportPopOver__settingsContainer--expanded");
        b.children(":visible").each(function (a, b) {
            c += $(b).outerHeight(!0)
        });
        d = parseInt(b.css("height"), 10);
        a.cV ? (a.cV = !1,
            b.css("height", c),
            b.addClass("exportPopOver__settingsContainer--expanded"),
            b.css("height"),
            b.removeClass("exportPopOver__settingsContainer--notransitions")) : d === c ? b.addClass("exportPopOver__settingsContainer--expanded") : (b.css("height", c),
            b.one("transitionend", function () {
                b.addClass("exportPopOver__settingsContainer--expanded")
            }))
    }
    f.g3 = function () {
        this.$(".exportPopOver__pageRangeOption .exportPopOver__radio").prop("checked", !0);
        pZ(this)
    };
    f.V2 = function () {
        pZ(this)
    };
    f.M1 = function (a) {
        a = $(a.currentTarget);
        0 === a.val().trim().length && (a.val(""),
            this.$(".exportPopOver__allPagesOption").prop("checked", !0))
    };
    f.W1 = function (a) {
        sZ(this, $(a.currentTarget))
    };
    f.X1 = function () {
        var a = this.$(".exportPopOver__pageRangeOption .exportPopOver__radio"),
            b = this.$(".exportPopOver__pageRangeOption .exportPopOver__input");
        a.prop("checked") ? (b.focus().select(),
            pZ(this),
            sZ(this, b)) : (b.removeClass("exportPopOver__input--withError"),
            YY(this.Ih, "all"))
    };
    f.D2 = function () {
        var a = this.gd;
        a.H.Ga(Tl("export_pop_over", "png_export_options", "transparent_background"));
        qo(a, tZ)
    };
    f.Y1 = function () {
        this.Ih.track("transparent_bg_click")
    };
    f.d2 = function () {
        (new VY({
            aa: this.aa,
            Tx: Lc(this.u)
        })).render().show();
        this.Ih.track("tooltip_click", {
            type: "crop_marks_info",
            location: "pdf_print_hover"
        })
    };
    f.R1 = function () {
        this.Ih.track("crop_marks_click")
    };
    f.n2 = function () {
        (new TY({
            aa: this.aa,
            bu: Jc(this.u)
        })).render().show();
        this.Ih.track("tooltip_click", {
            type: "file_type_info"
        })
    };

    function iZ(a) {
        var b;
        return a.je.map(function (a) {
                b = a.value === this.Eo;
                return {
                    value: a.value,
                    text: b ? this.fc.format("exportPopOverRecommended", a.text) : a.text,
                    selected: b
                }
            }
            .bind(a))
    }

    function qZ(a) {
        return a.$(".exportPopOver__fileTypeSelect \x3e select").val()
    }

    function lZ(a) {
        function b() {
            return this.model.xa().some(function (a) {
                return a.Fm()
            })
        }
        (function () {
            var a = qZ(this);
            return a === dZ || a == eZ
        }).call(a) && b.call(a) && yY({
            message: soydata.VERY_UNSAFE.ordainSanitizedHtml(uZ(a)),
            type: BY,
            Hb: !1,
            J: "exportPopOver__warning"
        }).$el.prependTo(a.$(".exportPopOver__settingsContainer"))
    }

    function mZ(a) {
        function b() {
            switch (d) {
                case dZ:
                    return this.fc.Bz();
                case eZ:
                    return this.fc.uA();
                default:
                    throw Error("Unknown export value", d);
            }
        }

        function c() {
            return 1 < this.model.wc()
        }
        var d = qZ(a);
        (function () {
            return d === dZ || d == eZ
        }).call(a) && c.call(a) && yY({
            message: soydata.VERY_UNSAFE.ordainSanitizedHtml(De(a.fc, b.call(a))),
            type: BY,
            Hb: !1,
            J: "exportPopOver__warning"
        }).$el.prependTo(a.$(".exportPopOver__settingsContainer"))
    }

    function uZ(a) {
        var b = ["KABpChgmirA", "KABpCl3wNm4"],
            c = a.model.pb().nf;
        return c && 0 <= b.indexOf(c) ? a.fc.format("exportPopOverSocialMediaLinksExportWarningHtml", "https://support.canva.com/creating-your-design/page-setup/hyperlinks/") : a.fc.format("exportPopOverLinksExportWarning")
    }
    cZ.IQ = /^\s*\d+\s*(?:-\s*(?:\d+\s*)?)?(?:,\s*(?:\d+\s*(?:-\s*(?:\d+\s*)?)?)?)*$/;
    var dZ = "jpg",
        eZ = "png",
        fZ = "standardPdf",
        gZ = "printPdf",
        hZ = "animation";

    function vZ() {}
    vZ = dy.extend();
    vZ.prototype.events = function () {
        var a = dy.prototype.events.call(this);
        a["click .resubmitLayout"] = this.z2;
        return a
    };
    vZ.prototype.initialize = function (a) {
        this.Q5 = a.resubmit;
        var b = "in layout review";
        this.options.forSale && (b = "for sale as a layout");
        b = {
            title: b.charAt(0).toUpperCase() + b.slice(1),
            content: $(vZ.KH({
                status: b
            })),
            Qe: ""
        };
        dy.prototype.initialize.call(this, _.extend({}, b, a))
    };
    vZ.prototype.render = function () {
        dy.prototype.render.call(this);
        this.$(".buttonContainer").remove();
        return this
    };
    vZ.prototype.z2 = function () {
        this.Q5();
        this.remove()
    };
    vZ.KH = _.template('\x3cp\x3eThis design is \x3c%- status %\x3e.\x3c/p\x3e\x3cbr\x3e\x3cdiv class\x3d"layoutThumbnail"\x3e\x3c/div\x3e\x3cdiv class\x3d"exportButtons"\x3e\x3cbutton class\x3d"button buttonBlock resubmitLayout"\x3eResubmit\x3c/button\x3e\x3c/div\x3e');

    function wZ() {}
    wZ = Backbone.View.extend({
        className: "shareViaEmailForm",
        tagName: "form"
    });
    wZ.prototype.events = function () {
        return {
            "click button": this.send,
            submit: this.send
        }
    };
    wZ.prototype.initialize = function (a) {
        this.mode = a.mode;
        this.Zg = a.Zg;
        this.Jf = a.Jf
    };
    wZ.prototype.render = function () {
        this.$el.html(wZ.template({
            sendLabel: this.Jf.send(),
            placeholder: this.Jf.Vg()
        }));
        return this
    };
    wZ.prototype.send = function (a) {
        a.preventDefault();
        a = this.$("input").val().replace(/[ ,;]+/g, ",").split(",").map(bH).filter(Boolean);
        0 === a.length ? alert("Enter some email addresses!") : (this.$("button").prop("disabled", !0),
            this.trigger("sendClicked", {
                Q_: a,
                mode: this.mode,
                Zg: this.Zg
            }))
    };
    wZ.template = _.template('\x3cdiv data-input-placeholder\x3d"\x3c%- placeholder %\x3e"\x3e\x3cinput class\x3d"textInput" placeholder\x3d"\x3c%- placeholder %\x3e" type\x3d"text"\x3e\x3c/div\x3e\x3cbutton class\x3d"button"\x3e\x3c%- sendLabel %\x3e\x3c/button\x3e');

    function xZ() {}
    xZ = dy.extend({
        className: "descriptionPopOver"
    });
    xZ.jo = 254;
    f = xZ.prototype;
    f.initialize = function (a) {
        this.u = a.u;
        var b;
        b = Bc(this.u).format("editorControlsTitleTooLongError", xZ.jo + 1);
        this.TX = yY({
            type: CY,
            message: b,
            Hb: !1,
            J: "descriptionPopOver__error"
        }).$el;
        b = {
            title: Bc(a.u).format("editorControlsPopoverHeadingDesignTitle"),
            Qe: Bc(a.u).format("editorControlsPopoverDoneButton"),
            content: $("\x3ctextarea\x3e").addClass("textInput").attr("maxlength", xZ.jo).after($("\x3cdiv\x3e").addClass("descriptionPopOver__errorContainer"))
        };
        a = _.extend({}, b, a);
        dy.prototype.initialize.call(this, a);
        this.on("hide", this.I2)
    };
    f.events = function () {
        var a = dy.prototype.events.apply(this, arguments);
        a["keydown textarea"] = this.n3;
        a["keypress textarea"] = this.o3;
        a["paste textarea"] = this.J3;
        return a
    };
    f.render = function () {
        dy.prototype.render.call(this);
        var a = this.model.Jb();
        GS(a) ? this.$("textarea").val("") : this.$("textarea").val(a.ep());
        return this
    };
    f.ci = function (a) {
        dy.prototype.ci.call(this, a);
        this.$("textarea").autosize({
            append: ""
        }).focus().select();
        return this
    };

    function yZ(a) {
        a.$(".descriptionPopOver__errorContainer").append(a.TX)
    }

    function zZ(a) {
        a.$(".descriptionPopOver__errorContainer").empty()
    }
    f.I2 = function (a) {
        var b = this.$("textarea"),
            c = this.model.Jb(),
            b = b.val().trim();
        2 !== a && 0 !== a || b === c.ep() || (T && (a = T,
                a.track("design", {
                    title: b,
                    source: "typed",
                    template: a.Ci
                })),
            HS(c, b));
        zZ(this)
    };
    f.n3 = function (a) {
        zZ(this);
        var b = a.altKey || a.shiftKey;
        13 !== a.which || b || (a.preventDefault(),
            this.ok())
    };
    f.J3 = function () {
        zZ(this);
        this.$("textarea").val().length >= xZ.jo && yZ(this)
    };
    f.o3 = function () {
        this.$("textarea").val().length >= xZ.jo && this.$(".descriptionPopOver__errorContainer").is(":empty") && yZ(this)
    };

    function AZ() {}
    AZ = Backbone.View.extend({
        className: "shareView"
    });
    f = AZ.prototype;
    f.events = function () {
        return {
            "click .shareButtonSocial": this.B2,
            "click .shareButtonEmail": this.m2
        }
    };
    f.initialize = function (a) {
        this.location = a.location;
        this.Qb = a.Qb;
        this.$J = new wZ({
            mode: "default",
            Zg: jt(this.Qb),
            Jf: a.Jf
        });
        this.Jf = a.Jf;
        this.NB = ["Take a look at my new @Canva creation!", "Check out my new @Canva design!", "I just made this fantastic design with @Canva!", "How great does my new @Canva design look?"]
    };
    f.render = function () {
        Backbone.View.prototype.render.call(this);
        var a = AZ.KH;
        this.$el.append(a({
            shareOnFacebookTitle: this.Jf.format("shareViewShareOnFacebook"),
            shareOnTwitterTitle: this.Jf.format("shareViewShareOnTwitter"),
            postLabel: this.Jf.post(),
            tweetLabel: this.Jf.format("shareViewTweet"),
            emailLabel: this.Jf.email()
        }));
        this.$(".shareEmail").append(this.$J.render().el);
        this.listenTo(this.$J, "sendClicked", this.l2);
        this.listenTo(this, "emailSendingError", this.x_);
        return this
    };
    f.NO = function () {
        this.trigger("shareClicked")
    };
    f.B2 = function (a) {
        a.preventDefault();
        this.NO()
    };
    f.m2 = function (a) {
        a.preventDefault();
        this.$(".shareEmail").show();
        this.trigger("shareViewResize")
    };
    f.l2 = function (a) {
        this.trigger("emailSend", a)
    };
    f.x_ = function (a) {
        var b = this.$J.$("button");
        b.prop("disabled", !1);
        b.attr("class", "");
        this.$(".shareEmail h2").append('\x3cp class\x3d"error"\x3e' + a + "\x3c/p\x3e");
        this.trigger("shareViewResize")
    };
    AZ.KH = _.template('\x3cdiv class\x3d"shareButtons"\x3e\x3cbutton class\x3d"button buttonFacebook shareButtonSocial" title\x3d"\x3c%- shareOnFacebookTitle %\x3e"\x3e\x3c%- postLabel %\x3e\x3c/button\x3e\x3cbutton class\x3d"button buttonTwitter shareButtonSocial" title\x3d"\x3c%- shareOnTwitterTitle %\x3e"\x3e\x3c%- tweetLabel %\x3e\x3c/button\x3e\x3cbutton class\x3d"button shareButtonEmail"\x3e\x3c%- emailLabel %\x3e\x3c/button\x3e\x3c/div\x3e\x3cdiv class\x3d"shareEmail"\x3e\x3ch2\x3e\x3c%- emailLabel %\x3e\x3c/h2\x3e\x3c/div\x3e');
    AZ.openWindow = function (a, b, c) {
        window.open(a, "", "scrollbars\x3dyes,resizable\x3dyes,toolbar\x3dno,location\x3dyes,width\x3d" + b + ",height\x3d" + c + ",left\x3d445,top\x3d240")
    };

    function AT() {}
    var AT = Backbone.View.extend({
            el: "#canvaDocument"
        }),
        BT = "fit",
        ny = {
            "10%": "10%",
            "25%": "25%",
            "50%": "50%",
            "75%": "75%",
            "100%": "100%",
            "125%": "125%",
            "150%": "150%",
            "175%": "175%",
            "200%": "200%",
            "300%": "300%",
            "400%": "400%",
            "500%": "500%",
            X7: "fill",
            Y7: BT
        };
    AT.u_ = function () {
        $("#addNewPage").remove();
        AT.KY = !0
    };
    f = AT.prototype;
    f.events = function () {
        return {
            "click #addNewPage .addPage": this.mZ,
            "click #addNewPage .makeNewDesign": this.BZ,
            "click #addNewPage .copyDesign": this.qZ,
            "click \x3e .inner \x3e .page": function () {
                return !1
            },
            "mousedown \x3e .inner \x3e .page": this.qM,
            mousemove: this.mousemove,
            mouseout: this.mouseout,
            scroll: this.a6
        }
    };
    f.remove = function () {
        this.undelegateEvents();
        this.stopListening();
        this.Xa.forEach(function (a) {
            a.remove()
        })
    };
    f.initialize = function (a) {
        this.listenTo(this.model, {
            "page:add": this.A4,
            "page:move": this.C4,
            "page:remove": this.D4,
            resize: this.Mz
        });
        this.listenTo(S, {
            "pageView:copyButton:click": this.jV,
            "pageView:deleteButton:click": this.jV,
            "pageView:toolbar:mouseout": this.G4
        });
        this.Xa = [];
        var b = this;
        this.model.Rb().forEach(function (c) {
            b.Xa.push(new BZ({
                model: c,
                Vr: Dc(a.u),
                zN: Fc(a.u)
            }))
        });
        this.u = a.u;
        this.aa = a.aa;
        this.lf = _.object(_.values(ny), _.map(ny, function (a) {
            return parseInt(a, 10) / 100
        }));
        this.GH = BT;
        this.Vf = !1;
        this.Uq = this.Rg = 0;
        this.Mc = null;
        this.Gj = this.jz = this.xf = this.yN = 0;
        this.eI = !1;
        this.q1 = Tg(this);
        this.Go = function () {
            var a = b.model.ia[0],
                a = Math.max(a.D(), a.F());
            return Math.max(1, Math.min(a / J.dY))
        }();
        this.render()
    };
    f.render = function () {
        var a = this.$el.children(".inner"),
            b = this;
        this.Xa.forEach(function (c, d) {
            c.render();
            a.append(c.$el);
            CZ(c, DZ(b, d));
            c.$el.addClass("on")
        });
        var c = this.Xa[this.Xa.length - 1].$el,
            d = this.$("#addNewPage");
        AT.KY ? (d.hide(),
            this.$el.removeClass("multiPage")) : (d.css("top", DZ(this, this.Xa.length)),
            d.insertAfter(c),
            this.$el.removeClass("multiPage"),
            this.model.pb().pl && (this.$el.addClass("multiPage"),
                1 < this.model.Rb().length && this.model.Rb().length >= J.ax && (this.$("#addNewPage").addClass("off"),
                    EZ(this))));
        var c = DZ(this, 0),
            d = FZ(this),
            e = fS();
        a.css("height", c + d + ($(window).height() - e.Ha()));
        this.Mz(!0);
        return this
    };
    f.mZ = function (a) {
        a = $(a.currentTarget);
        if (!a.is(":animated") && !a.is(".off")) {
            a = Cp(this.model);
            var b = dN(a.serialize());
            b.pageIndex = Mo(this.model, a);
            I.register(new iN(1, b))
        }
        GZ(this);
        return !1
    };
    f.BZ = function () {
        var a = {
                type: this.model.pb().G()
            },
            b = "/design?create";
        null != a.type && (b += "\x26type\x3d" + encodeURIComponent(a.type));
        null != a.width && (b += "\x26width\x3d" + encodeURIComponent(String(a.width)));
        null != a.height && (b += "\x26height\x3d" + encodeURIComponent(String(a.height)));
        null != a.v7 && (b += "\x26units\x3d" + encodeURIComponent(String(a.v7)));
        null != a.nf && (b += "\x26category\x3d" + encodeURIComponent(String(a.nf)));
        window.open(b, "");
        return !1
    };
    f.qZ = function () {
        S.trigger("documentView:copyDocument");
        return !1
    };
    f.a6 = function () {
        var a = this.$el.scrollTop() || 0,
            b = DZ(this, 0),
            c = fS(),
            d = Ap(this.model),
            e = this.Xa[d].$el.offset(),
            g = this.yN < a ? "down" : "up",
            h = -1;
        S.trigger("documentView:scroll", a);
        this.yN = 1 * a;
        HZ(this);
        this.aa.clearTimeout(this.jz);
        if (!this.$el.hasClass("modifying")) {
            d = $(window).height();
            if (this.Rg > d / 2)
                for (c = 0; c < this.Xa.length - 1; c++) {
                    h = b + c * (this.Rg + this.Uq);
                    if (h < a) {
                        if (e = h + this.Rg - a,
                            0 >= e) {
                            h = c + 1;
                            continue
                        }
                    } else
                        e = a + d - h;
                    h = e > a + d - (h + this.Rg) ? c : c + 1;
                    break
                }
            else
                "up" == g && e.top + this.Rg > c.Ha() ? h = Math.floor((a + $(window).height() - (b - this.Uq)) / (this.Rg + this.Uq)) - 1 : "down" == g && 0 > e.top && (h = Math.ceil((a - b) / (this.Rg + this.Uq)));
            0 == a ? h = 0 : a >= this.$el.children(".inner").height() - this.$el.prop("clientHeight") && (h = this.model.Rb().length - 1);
            0 <= h && (h = Math.min(this.model.Rb().length - 1, h),
                h = Math.max(0, h),
                rp(this.model, h))
        }
    };
    f.mousemove = function (a) {
        this.q1.read(function () {
            var b = (void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY) + this.$el.scrollTop();
            this.Xa.forEach(function (a) {
                var d = a.Ba();
                Tg().write(function () {
                    b > d.N() && b < d.Ha() ? a.$el.addClass("pseudoHover") : a.$el.removeClass("pseudoHover")
                })
            })
        })
    };
    f.mouseout = function (a) {
        -1 < $(a.relatedTarget || a.toElement).parents().addBack().index(this.$el.children(".inner")) || this.Xa.forEach(function (a) {
            a.$el.removeClass("pseudoHover")
        })
    };
    f.qM = function (a) {
        function b(a) {
            var b = (void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX) - e;
            a = (void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY) - g;
            if (k || Math.abs(b) > J.Rc || Math.abs(a) > J.Rc) {
                k || (k = !0,
                    d.$el.addClass("dragging doNotAnimate"),
                    rp(p, Mo(p, r)));
                for (var b = -1, c = 0; c < m.length && !(h + a < m[c]); c++)
                    b++;
                0 > b && (b = 0);
                Fp(p, r, b);
                b = a = h + a;
                a < x ? (b = (x - a) / (x - y),
                    b = 2 >= b ? x - (x - a) * (1 - b / 4) : y) : a > E && (b = (a - E) / (q - E),
                    b = 2 >= b ? E + (a - E) * (1 - b / 4) : q);
                CZ(d, b)
            }
            return !1
        }

        function c() {
            l.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            if (k) {
                d.$el.removeClass("doNotAnimate");
                var a = r.ea(),
                    e = DZ(v, a);
                d.$el.animate({
                    top: e
                }, J.Na.iV, "easeOutBack", function () {
                    CZ(d, e);
                    d.$el.removeClass("dragging")
                });
                I.register(new iN(5, {
                    pageIndex: a,
                    oldPageIndex: u
                }))
            }
        }
        if (!(0 === $(a.target).closest(".pageToolbar").length || 0 < $(a.target).closest("a").length)) {
            var d = null;
            this.Xa.forEach(function (b) {
                b.$el.get(0) == a.currentTarget && (d = b)
            });
            var e = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
                g = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
                h = yB(d),
                k = !1,
                l = new Po($(document));
            l.on("mousemove|touchmove", b).on("mouseup|touchend", c);
            for (var m = [], n = 0; n < this.Xa.length; n++)
                m.push(DZ(this, n) - this.Rg / 2);
            var p = this.model,
                r = d.model,
                u = Mo(p, r),
                v = this,
                y = DZ(this, -1),
                q = DZ(this, this.Xa.length),
                x = DZ(this, 0),
                E = DZ(this, this.Xa.length - 1);
            return !1
        }
    };
    f.D4 = function (a, b, c) {
        bh();
        var d = this,
            e = this.Xa[c];
        this.aa.clearTimeout(this.jz);
        this.xf && rp(a, Math.min(a.Rb().length - 1, c));
        b = {
            height: 0,
            top: DZ(this, c) + this.Gj * (this.Rg + this.Uq)
        };
        this.xf && c == a.Rb().length && (b.top += this.Rg);
        this.$el.addClass("modifying");
        e.$el.addClass("removing").animate(b, {
            duration: J.Na.Pj,
            Mk: "easeOutSine",
            queue: !1,
            complete: function () {
                e.remove();
                d.$el.removeClass("modifying");
                d.xf ? FM && (d.jz = d.aa.setTimeout(function () {
                    HZ(d)
                }, J.CQ)) : EZ(d)
            }
        });
        this.Xa.splice(c, 1);
        IZ(this, c);
        this.$el.hasClass("holding") || JZ(this, c)
    };
    f.A4 = function (a, b, c, d) {
        bh();
        this.model.Rb().length >= J.ax && (this.$("#addNewPage").addClass("off"),
            EZ(this));
        var e = !0;
        !1 === d && (e = !1);
        var g = Mo(this.model, b);
        a = this.Xa[0];
        this.Xa.splice(g, 0, new BZ({
            model: b,
            Vr: Dc(this.u),
            zN: Fc(this.u)
        }));
        var h = this.Xa[g];
        b = a.KK();
        var k = this;
        null != this.Mc && h.NG(this.Mc);
        h.bi(this.yv());
        c = DZ(this, g, this.model.Rb().length - 1);
        KZ(h, b, c + this.Gj * (this.Rg + this.Uq));
        this.aa.clearTimeout(this.jz);
        this.xf ? rp(this.model, g - 1) : e && rp(this.model, g);
        0 == g ? h.$el.insertBefore(a.$el) : h.$el.insertAfter(this.Xa[g - 1].$el);
        k.$el.addClass("modifying");
        var l = DZ(this, g);
        h.$el.addClass("newPage");
        h.$el.addClass("on");
        this.aa.requestAnimationFrame(function () {
                var a = h.$el.height();
                h.$el.css("height", 0);
                h.$el.animate({
                    height: a,
                    top: l
                }, {
                    duration: J.Na.Pj,
                    Mk: "easeOutSine",
                    queue: !1,
                    complete: function () {
                        h.$el.css("height", "");
                        h.$el.removeClass("newPage");
                        CZ(h, l);
                        k.$el.removeClass("modifying");
                        k.xf && FM && (k.jz = k.aa.setTimeout(function () {
                            HZ(k)
                        }, J.CQ))
                    }
                }).css("overflow", "");
                IZ(this, g);
                e && !this.$el.hasClass("holding") && JZ(this, g)
            }
            .bind(this))
    };
    f.C4 = function (a, b, c, d) {
        function e(a, b) {
            return function () {
                CZ(a, b)
            }
        }
        bh();
        a = this.Xa[c];
        b = this.Xa[d];
        c < d ? a.$el.insertAfter(b.$el) : c > d && a.$el.insertBefore(b.$el);
        this.Xa.splice(d, 0, this.Xa.splice(c, 1)[0]);
        c > d && (a = c,
            c = d,
            d = a);
        for (; c <= d; c++)
            a = this.Xa[c],
            a.$el.hasClass("dragging") || (b = DZ(this, c),
                a.$el.animate({
                    top: b
                }, J.Na.iV, e(a, b)));
        JZ(this, d)
    };
    f.jV = function () {
        bh();
        this.xf = this.xf || this.model.Rb().length;
        this.$el.addClass("holding");
        this.model.Rb().length <= J.ax && (this.$("#addNewPage").removeClass("off"),
            EZ(this))
    };
    f.G4 = function () {
        HZ(this)
    };

    function HZ(a) {
        a.xf && !a.$el.hasClass("modifying") && (a.xf = 0,
            a.Gj = 0,
            IZ(a, 0, !0),
            a.$el.removeClass("holding"))
    }

    function EZ(a) {
        if (!Py) {
            var b = fS(),
                c = a.Xa[0],
                d = LZ(c),
                e = MZ(c),
                g;
            d.D() <= b.D() ? (g = b.Y() + Math.round((b.D() - d.D()) / 2),
                a.$el.children(".inner").css("width", "")) : (g = 50,
                a.$el.children(".inner").css("width", g + e.D() + g));
            var h = Math.abs(lu(a.model.pb())) * W;
            a.Xa.forEach(function (b, c) {
                c = DZ(a, c);
                KZ(b, g + h, c)
            });
            var e = MZ(c),
                c = a.$("#addNewPage"),
                k = c.is(".off") ? 450 : 220,
                k = Math.max(e.D(), k),
                e = e.Y() - h;
            k > d.D() && (e = (b.D() + 2 * b.Y() - k) / 2);
            c.css("top", DZ(a, a.Xa.length)).css("left", e).css("width", k)
        }
    }

    function DZ(a, b, c) {
        var d = BZ.wI(a.model.pb(), a.yv(), a.Mc) * W;
        void 0 === c && (c = a.model.Rb().length);
        a.xf && (c = a.xf);
        var e = fS(),
            g = Math.round(J.ft * W);
        c = FZ(a, c);
        var h = e.N();
        Py || a.Vf ? h = 0 : c <= e.F() && (h += (e.F() - c) / 2);
        return h + (d + g) * b
    }

    function FZ(a, b) {
        var c = BZ.wI(a.model.pb(), a.yv(), a.Mc) * W;
        void 0 === b && (b = a.model.Rb().length);
        a.xf && (b = Math.max(a.xf, b));
        var d = W,
            e = a.$("#addNewPage");
        b = b * c + (b - 1) * J.ft * d;
        a.model.Cc.pl && !$("body").hasClass("blockDocument") && (b += J.ft * d + e.outerHeight());
        return Math.round(b)
    }

    function NZ(a, b) {
        var c = fS(),
            d = FZ(a);
        if (d > c.F()) {
            var e = a.$el.prop("clientHeight"),
                d = DZ(a, 0) + d + (e - c.Ha());
            a.Rg > c.F() && (d += c.D() / 6)
        } else
            d = a.$el.prop("clientHeight");
        b ? a.$el.children(".inner").animate({
            height: d
        }, {
            duration: J.Na.Pj,
            Mk: "easeOutSine",
            queue: !1
        }) : a.$el.children(".inner").css("height", d)
    }

    function IZ(a, b, c) {
        var d = BZ.wI(a.model.pb(), a.yv(), a.Mc);
        void 0 === b && (b = 0);
        void 0 === c && (c = 0 < a.xf);
        NZ(a, c);
        var e = 0;
        a.xf && b == a.model.Rb().length ? (c = (a.Gj || a.xf) - b,
            a.Gj != c - 1 && (c = a.Gj + 1,
                a.Gj = b),
            e += (d + J.ft * W) * c,
            a.Gj = c) : a.Gj && (c = a.Gj,
            e += (d + J.ft * W) * c);
        a.$("#addNewPage").animate({
            top: DZ(a, a.Xa.length) + e
        }, {
            duration: J.Na.Pj,
            Mk: "easeOutSine",
            queue: !1
        });
        var g = a.$el.scrollTop() || 0,
            h = g + a.$el.prop("clientHeight");
        a.Xa.forEach(function (a, b) {
            var c = DZ(this, b) + e;
            b = c + d;
            !this.xf && !this.Gj || b > g && c < h ? a.$el.addClass("transitioning").animate({
                top: c
            }, {
                duration: J.Na.Pj,
                Mk: "easeOutSine",
                queue: !1,
                complete: function () {
                    CZ(a, c)
                }
            }) : CZ(a, c)
        }, a);
        a.aa.setTimeout(function () {
            for (var b = 0; b < a.Xa.length; b++)
                a.Xa[b].$el.removeClass("transitioning")
        }, J.Na.Pj)
    }

    function JZ(a, b) {
        b = Math.max(0, Math.min(a.Xa.length - 1, b));
        var c = a.$el.scrollTop() || 0;
        if (b == a.Xa.length - 1)
            c = fS(),
            c = DZ(a, a.model.Rb().length) + a.$("#addNewPage").height() - c.Ha();
        else {
            b = DZ(a, b);
            var d = b + a.Rg,
                e = a.$el.prop("clientHeight"),
                e = c + e,
                g = J.jC;
            e < d ? c += d - e + g : c > d && (c -= c - b + g)
        }
        a.eI || c == a.$el.scrollTop() || (a.eI = !0,
            a.$el.animate({
                scrollTop: c
            }, J.Na.Pj, "easeOutSine", function () {
                a.eI = !1
            }))
    }
    f.Mz = function (a) {
        var b;
        b = b || this.model.Oa();
        var c = fS(),
            d = MZ(this.Xa[b.ea()]).scale(1 / W);
        b = d.D();
        d = d.F();
        this.lf.fill = Math.max(c.D() / b, this.lf["10%"]);
        this.lf[BT] = d * this.lf.fill > c.F() ? Math.max(c.F() / d, this.lf["10%"]) : this.lf.fill;
        c = this.Vf ? BT : this.GH;
        b = this.model.Oa();
        var e = MZ(this.Xa[b.ea()]).scale(1 / W),
            d = e.D(),
            e = e.F();
        a = a && "PIXELS" !== this.model.wj();
        if (Py || 0 === d || 0 === e)
            c = ny["100%"];
        Ay(this, c, b, a)
    };

    function ty(a, b) {
        a.Vf = b;
        a.Mz()
    }

    function lD(a, b) {
        for (var c = 0; c < a.Xa.length; c++)
            if (a.Xa[c].model == b)
                return a.Xa[c].Ba();
        return null
    }

    function Ay(a, b, c, d) {
        c = c || a.model.Oa();
        a.$el.addClass("zooming");
        c = a.Xa[c.ea()];
        a.GH = a.Vf ? a.GH : b;
        var e = W = a.lf[b];
        a.Uq = Math.round(J.ft * e);
        a.Rg = Math.round(LZ(c).F());
        UO();
        S.trigger("documentView:zoom", b, e);
        EZ(a);
        NZ(a, !1);
        b = fS();
        e = a.$el.children(".inner").width();
        c = Rg(c);
        e > b.D() && (e = Math.round(c.Y() + c.D() / 2),
            e = Math.round(e - b.Y() - b.D() / 2),
            c.D() < b.D() && (e += (b.D() - c.D()) / 2),
            a.$el.scrollLeft(e));
        !d && FZ(a) > b.F() && (d = Math.round(c.N() + c.F() / 2),
            a.yN = 1 * (a.$el.scrollTop() || 0),
            a.$el.scrollTop(Math.round(d - b.Ha() / 2)));
        a.model.xa().forEach(function (a) {
            a.mb()
        });
        lJ(xc(a.u), zc(a.u));
        a.$el.removeClass("zooming")
    }

    function yy(a) {
        return OZ(a, function (a) {
            return a[1]
        }, function (a) {
            return a[1] > W
        })
    }

    function zy(a) {
        return OZ(a, function (a) {
            return -1 * a[1]
        }, function (a) {
            return a[1] < W
        })
    }

    function OZ(a, b, c) {
        if (b = _.chain(a.lf).pairs().sortBy(b).find(c).value())
            return Ay(a, b[0]),
                b[0]
    }

    function GZ(a) {
        a.$el.focus().blur();
        window.getSelection().removeAllRanges()
    }

    function uy(a, b) {
        a.$el.find(".inner").scrollTop(a.$el.find(".inner").scrollTop() + a.$el.find(".page").eq(b).position().top);
        rp(a.model, b)
    }
    f.Oa = function () {
        var a = Ap(this.model);
        if (a >= this.Xa.length)
            throw Error("No page view exists for selected page index " + a + ".");
        return 0 <= a ? this.Xa[a] : null
    };

    function ah(a) {
        return a.Oa() || a.Xa[0]
    }
    f.bi = function (a) {
        this.$el.toggleClass("document--printMarkingsEnabled", a);
        this.Xa.forEach(function (b) {
            b.bi(a)
        })
    };
    f.yv = function () {
        return this.$el.hasClass("document--printMarkingsEnabled")
    };

    function Pg(a, b) {
        var c = a.$el.offset(),
            d = c.left - a.$el.scrollLeft();
        a = c.top - a.$el.scrollTop();
        return b.clone().translate(-d, -a)
    }

    function hC(a, b) {
        b = b.ea();
        if (0 > b || b >= a.Xa.length)
            throw Error("No page view exists for selected page index " + b + ".");
        return a.Xa[b]
    }
    f.NG = function (a) {
        this.Mc = a;
        this.Xa.forEach(function (b) {
            b.NG(a)
        })
    };

    function hp() {}
    hp = dy.extend();
    hp.prototype.initialize = function (a) {
        this.H = a.H;
        this.mf = a.mf;
        this.Ge = a.Ge;
        this.anchor = a.anchor;
        this.rC = a.rC;
        this.AB = a.AB;
        this.$W = 0;
        a = _.extend({}, {
            Qn: !0,
            position: "topLeft",
            Ef: {
                left: 10,
                top: -14
            }
        }, a);
        dy.prototype.initialize.call(this, a);
        0 < this.AB ? (this.listenTo(this.Ge, "session:sync", this.iT),
            this.H && this.H.track("experiment_enroll", {
                type: this.mf,
                section: "editor",
                subsection: "header",
                location: "publish_pop_over"
            })) : PZ(this)
    };
    hp.prototype.iT = function (a) {
        2 == a && (a = 0 === $(".modalContent").length,
            this.$W++,
            a && this.$W >= this.AB && (PZ(this),
                this.stopListening(this.Ge, "session:sync", this.iT)))
    };

    function PZ(a) {
        a.ci(a.anchor);
        QZ(a);
        a.H && a.H.track("dialog_show", {
            type: a.mf,
            section: "editor",
            subsection: "header",
            location: "publish_pop_over"
        })
    }

    function QZ(a) {
        a.anchor.one("click", function () {
            a.H && yl(a.H, a.rC, "header", a.mf + "_dialog")
        })
    }
    hp.prototype.Xo = function () {
        return RZ
    };
    hp.prototype.remove = function () {
        this.H && zl(this.H, this.mf, "header", "publish_pop_over");
        Uo.prototype.remove.call(this)
    };

    function SZ(a, b, c) {
        this.context = a;
        this.active = !!c;
        this.Jc = b
    }
    SZ.prototype.getContext = function () {
        return this.context
    };

    function TZ(a) {
        switch (a.context) {
            case "PUBLIC_STREAM":
                return a.Jc.format("editorControlsPublicationPublic");
            case "TEAM_STREAM":
                return a.Jc.format("editorControlsPublicationShowing");
            case "TEAM_TEMPLATE":
                return a.Jc.format("editorControlsPublicationTemplated");
            case "MARKETPLACE_LAYOUT":
            case "MARKETPLACE_TEXT":
                return a.Jc.format("editorControlsPublicationMarketplace");
            default:
                throw Error("Unknown PublicationContext " + a.context);
        }
    }

    function UZ(a) {
        switch (a.context) {
            case "PUBLIC_STREAM":
                return a.Jc.format("editorControlsPublicationMakeActivePublic");
            case "TEAM_STREAM":
                return a.Jc.format("editorControlsPublicationMakeActiveShowTeam");
            case "TEAM_TEMPLATE":
                return a.Jc.format("editorControlsPublicationMakeActivePublishAsTemplate");
            case "MARKETPLACE_LAYOUT":
                return a.Jc.format("editorControlsPublicationMakeActivePublishAsLayout");
            case "MARKETPLACE_TEXT":
                return a.Jc.format("editorControlsPublicationMakeActivePublishAsGroup");
            default:
                throw Error("Unknown PublicationContext " + a.context);
        }
    }
    SZ.prototype.toggle = function (a) {
        return new SZ(this.context, this.Jc, void 0 !== a ? a : !this.active)
    };
    var VZ = {
            PUBLIC_STREAM: 2,
            TEAM_STREAM: 0,
            TEAM_TEMPLATE: 1
        },
        WZ = {
            PUBLIC_STREAM: "switchMakePublic",
            TEAM_STREAM: "switchShowTeam",
            TEAM_TEMPLATE: "switchPublishTemplate",
            MARKETPLACE_LAYOUT: "switchPublishLayout",
            MARKETPLACE_TEXT: "switchPublishText"
        };

    function XZ() {}
    XZ = dy.extend({
        className: "docPublisherPopOver"
    });
    XZ.prototype.initialize = function (a) {
        dy.prototype.initialize.call(this, _.defaults(a, {
            Ef: {
                top: -4
            }
        }));
        this.Jc = a.Jc
    };

    function YZ(a, b) {
        function c(a, c) {
            return new SZ(b[c].getContext(), d.Jc, FU(a))
        }
        var d = a,
            e = b.map(function (a) {
                return new EU({
                    on: a.active
                })
            }),
            g = e.map(function (a, c) {
                var e = $(d.Z6({
                    label: UZ(b[c])
                }));
                e.addClass(WZ[b[c].context]);
                a.render().$el.appendTo(e);
                return e
            }),
            h = a.$(".buttonContainer");
        g.forEach(function (a) {
            a.insertBefore(h)
        });
        return new P(function (a, b) {
            d.once("hide", function (d) {
                return 2 === d ? a(e.map(c)) : b(new ZZ)
            })
        })
    }
    XZ.prototype.PD = _.template('\x3cp class\x3d"error"\x3e\x3c%- message %\x3e\x3c/p\x3e');
    XZ.prototype.Z6 = _.template('\x3cdiv class\x3d"switchContainer"\x3e\x3clabel\x3e\x3c%- label %\x3e\x3c/label\x3e\x3c/div\x3e');

    function $Z(a) {
        var b = this;
        this.H = a.H;
        this.document = a.document;
        this.La = a.getSession();
        this.yc = a.yc;
        this.hd = a.hd;
        this.Jc = a.Jc;
        this.iK = hh(a.Ei);
        this.KV = this.iK.map(function (c) {
            var d = a.Ei.hg.get("activePublicationContexts", []);
            return new SZ(c, b.Jc, 0 <= d.indexOf(c))
        });
        this.s5 = a_(this);
        this.w7 = b_(this);
        this.$H = null;
        this.yC = a.Ei.hg.get("associatedMedia", null);
        this.vt = a.vt;
        this.Pw = a.Pw
    }
    f = $Z.prototype;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.trigger = Backbone.Events.trigger;
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.yI = function (a) {
        return 0 < a.filter(function (a) {
            return a.active
        }).length && this.document.isEmpty() ? P.reject(Error(this.Jc.format("editorControlsPublishErrorNoContent"))) : P.resolve(a)
    };

    function c_(a) {
        return [].concat(a.KV).map(Object.freeze)
    }
    f.JP = function (a) {
        var b = this,
            c = c_(this).slice().sort(function (a, b) {
                return eh.indexOf(a.context) - eh.indexOf(b.context)
            }),
            d = a.slice().sort(function (a, b) {
                return eh.indexOf(a.context) - eh.indexOf(b.context)
            });
        this.trigger("processingStateChange", !0);
        return Uy(1E3).then(function () {
            return d_(b, d, c)
        }).tap(function (a) {
            return e_(b, a)
        }).then(function (a) {
            return a.map(function (a, b) {
                return a ? a : c[b]
            }).sort(function (a, c) {
                a = b.iK.indexOf(a.getContext());
                c = b.iK.indexOf(c.getContext());
                return a - c
            })
        }).then(function (a) {
            return b.KV = a.slice()
        }).finally(function () {
            return b.trigger("processingStateChange", !1)
        })
    };

    function f_(a) {
        var b = (new jC).Uw(!0);
        return a.yC ? ED(Bb, a.yC, b).then(function (a) {
            return a.Va().Oh()
        }) : null !== a.yC ? P.resolve("PENDING_REVIEW") : P.resolve(null)
    }

    function a_(a) {
        var b = {};
        b.PUBLIC_STREAM = a.es.bind(a);
        b.TEAM_STREAM = a.tI.bind(a);
        b.TEAM_TEMPLATE = a.DB.bind(a);
        b.MARKETPLACE_LAYOUT = a.t5.bind(a);
        b.MARKETPLACE_TEXT = function () {
            return g_(a).then(a.u5.bind(a))
        };
        return b
    }

    function b_(a) {
        var b = {};
        b.PUBLIC_STREAM = a.Mw.bind(a);
        b.TEAM_STREAM = a.uI.bind(a);
        b.TEAM_TEMPLATE = a.OB.bind(a);
        b.MARKETPLACE_TEXT = function () {
            return P.resolve()
        };
        b.MARKETPLACE_LAYOUT = function () {
            return P.resolve()
        };
        return b
    }
    f.tI = function () {
        return this.La.es("BRAND")
    };
    f.es = function () {
        return this.La.es("GLOBAL").tap(function () {
                var a = this.H;
                a.track("design_public", {
                    design: this.La.Fc(),
                    template: a.Ci
                })
            }
            .bind(this))
    };
    f.DB = function () {
        return this.La.DB().tap(function () {
                var a = this.H;
                a.track("design_templatify", {
                    design: this.La.Fc(),
                    template: a.Ci
                })
            }
            .bind(this))
    };
    f.uI = function () {
        return this.La.Mw("BRAND")
    };
    f.Mw = function () {
        return this.La.Mw("GLOBAL").tap(function () {
                var a = this.H;
                a.track("design_private", {
                    design: this.La.Fc(),
                    template: a.Ci
                })
            }
            .bind(this))
    };
    f.OB = function () {
        return this.La.OB().tap(function () {
                var a = this.H;
                a.track("design_untemplatify", {
                    design: this.La.Fc(),
                    template: a.Ci
                })
            }
            .bind(this))
    };

    function h_(a, b, c, d, e, g) {
        if (GS(a.document.Jb()))
            return P.reject(new i_("You cannot publish an untitled design as a layout - please title your design."));
        var h = new j_({
            workflow: b,
            typeDescription: d,
            document: a.document,
            availableLocales: a.vt,
            userLocale: a.Pw,
            showProgress: e,
            keywords: g
        });
        return new P(function (d, e) {
            function g(b, e) {
                "submitted" == e && d(new SZ(c, a.Jc, !0))
            }
            b.on("change:state", g);
            h.on("remove", function () {
                b.off("change:state", g);
                e(Error("No action specified"))
            });
            h.show()
        })
    }
    f.u5 = function () {
        var a = new k_({
                La: this.La,
                document: this.document,
                yc: this.yc
            }),
            a = new l_(a.submit.bind(a), ["text"]),
            b = this.document.fonts.slice();
        return h_(this, a, "MARKETPLACE_TEXT", "text group", !1, b)
    };

    function g_(a) {
        var b = [];
        1 < a.document.wc() && b.push("Text groups cannot be more than one page.");
        var c = a.document.xa().filter(function (a) {
                return a.xb()
            }).filter(function (a) {
                return !wB(a)
            }),
            d = a.document.xa().filter(function (a) {
                return !a.xb()
            }).filter(function (a) {
                return !wB(a)
            });
        1 === c.length && 0 === d.length || b.push("All elements must be in the same group.");
        (c[0].F() > yp(a.document) || c[0].D() > zp(a.document)) && b.push("Text groups cannot be taller or wider than the page. This includes the boundaries of each element, and not just the visible parts.");
        0 < a.document.fonts.slice().filter(function (a) {
            return void 0 !== Fz(a)
        }).length && b.push("Text groups do cannot include uploaded custom fonts.");
        var e = gh("#000000");
        a.document.xa().filter(function (a) {
            if (a.Jd())
                return a.ob().filter(function (a) {
                    return a === nA || a instanceof Om && !a.equals(e)
                }).length
        }).length && b.push("Only black color is allowed.");
        0 < a.document.xa().filter(function (a) {
            return !a.xb()
        }).filter(function (a) {
            return !(a instanceof up) && !(a instanceof aB) && !(a instanceof Ko) && !(a instanceof cB) && !(a instanceof dB)
        }).length && b.push("Only text elements are currently supported.");
        0 < a.document.xa().filter(function (a) {
            return a.xb()
        }).filter(function (a) {
            return 0 !== a.eb()
        }).length && b.push("Rotated groups are not currently supported.");
        return 0 < b.length ? (a = "Sorry, your text group could not be published. " + b.join(" "),
            P.reject(new i_(a))) : P.resolve()
    }
    f.t5 = function () {
        var a = new m_({
                La: this.La,
                document: this.document,
                yc: this.yc
            }),
            a = new l_(a.submit.bind(a));
        return h_(this, a, "MARKETPLACE_LAYOUT", "layout", !0)
    };

    function n_(a) {
        var b = new Ou({
            Di: a.La.Fc(),
            ay: a.La.be(),
            kind: "IMAGESETS",
            mG: "MEDIUM",
            us: "web-1"
        });
        return a.hd.Ox(b)
    }

    function d_(a, b, c) {
        var d = b.filter(function (a) {
            return a.active
        }).map(function (a) {
            return a.getContext()
        });
        return 0 < d.indexOf("MARKETPLACE_LAYOUT") && 0 < d.indexOf("MARKETPLACE_TEXT") ? P.reject(new i_("Design cannot be both a layout and a text group.")) : P.reduce(b, function (b, d, h) {
            return o_(a, d, c[h]).then(function (a) {
                return b.concat(a ? d : null)
            })
        }, [])
    }

    function e_(a, b) {
        !a.$H && 0 < b.filter(function (a) {
            return a && a.active
        }).length && (a.$H = n_(a).finally(function () {
            a.$H = null
        }))
    }

    function o_(a, b, c) {
        return b.active === c.active ? P.resolve(!1) : (a = b.active ? a.s5[b.getContext()] : a.w7[b.getContext()]) ? a().then(function () {
            return !0
        }) : P.resolve(!1)
    }

    function i_(a) {
        Error.captureStackTrace && Error.captureStackTrace(this, this.constructor);
        this.message = a
    }
    i_.prototype = Object.create(Error.prototype);
    i_.prototype.constructor = i_;

    function ZZ() {
        Error.captureStackTrace && Error.captureStackTrace(this, this.constructor);
        this.message = "Cancelled document publication"
    }
    ZZ.prototype = Object.create(Error.prototype);
    ZZ.prototype.constructor = ZZ;

    function m_(a) {
        this.La = a.La;
        this.yc = a.yc;
        this.document = a.document
    }
    m_.prototype.submit = function (a) {
        var b = this.document.qg();
        if (!b)
            throw Error("no locale");
        var c = dJ().zH(b);
        a.forEach(function (a) {
            var e = "PAID" === a.price ? aJ : $I,
                g = "PAID" === a.price ? "STANDARD" : "FREE",
                h = (a.keywords || []).map(function (a) {
                    return new VD(b || "", a)
                });
            cJ(c, gJ(fJ(a.media).jk(a.version), a.title).HX(a.description).yH(h).gQ(e).hQ(g))
        });
        SI(this.yc, this.La.Fc(), this.La.be(), c, function (a) {
            if (200 != a)
                throw Error("success not indicated");
            PM()
        }, this.document.pb().G())
    };

    function k_(a) {
        this.La = a.La;
        this.yc = a.yc;
        this.document = a.document
    }
    k_.prototype.submit = function (a) {
        Ba(0 === a.length, "Cannot publish text groups containing new media (not yet implemented).");
        w(this.document.qg(), "The document requires a locale.");
        Da(this.document.Zk().some(function (a) {
            return "text" === a.toLowerCase()
        }), 'The document requires the "text" keyword.');
        a = new NI({
            id: this.La.Fc(),
            version: this.La.be()
        });
        TI(this.yc, new OI({
            document: a,
            locale: this.document.qg()
        }))
    };

    function l_(a, b) {
        hS.call(this, [{
            name: "start",
            from: "none",
            to: "pricing"
        }, {
            name: "price",
            from: "pricing",
            to: "pricingChildren"
        }, {
            name: "price",
            from: "pricingChildren",
            to: "reviewingSubmission"
        }, {
            name: "submit",
            from: "reviewingSubmission",
            to: "submitted"
        }, {
            name: "submit",
            from: "submitted",
            to: "submitted"
        }, {
            name: "success",
            from: "submitted",
            to: "completed"
        }, {
            name: "error",
            from: "pricing",
            to: "failed"
        }, {
            name: "error",
            from: "pricingChildren",
            to: "failed"
        }, {
            name: "error",
            from: "reviewingSubmission",
            to: "failed"
        }, {
            name: "error",
            from: "submitted",
            to: "failed"
        }, {
            name: "error",
            from: "failed",
            to: "failed"
        }]);
        this.document = G;
        this.U6 = a;
        this.JY = b || [];
        this.EI = []
    }
    l_.prototype = new hS;
    l_.prototype.start = function () {
        this.eg.start()
    };

    function p_(a, b) {
        b.title && HS(a.document.Jb(), b.title);
        b.keywords && xp(a.document, _.union(b.keywords, a.JY));
        b.locale && a.document.setLocale(b.locale);
        Uy(J.bx).then(function () {
            a.eg.transition("price")
        }, function (b) {
            a.eg.transition("error");
            throw b;
        })
    }
    l_.prototype.lO = function () {
        this.eg.transition("review")
    };

    function q_(a, b) {
        function c(a, c) {
            200 === a && c && c.media && 0 !== c.media.length ? b(c.media) : b && b([])
        }
        a = Kp(a.document).map(function (a) {
            return a.id
        });
        0 === a.length ? b && b([]) : (a = aE((new $D).bt(!0).Zs(!1), [zg, Bg]).JX().fQ(a),
            AD(Bb, a, c))
    };

    function r_(a, b) {
        return a.hg.get("editorActions", []).map(function (a) {
            return (a = s_[a] || null) ? a(b) : null
        })
    }

    function t_(a, b) {
        function c() {
            a.H.Ga(X(new Hl("share_button_user_input_focus"), "location", "editor"))
        }

        function d() {
            function b(a) {
                var c = {
                    cH: h,
                    KD: k,
                    Gi: l,
                    Vg: d.dH(),
                    PG: !1,
                    Mi: m
                };
                return new u_(c, a)
            }
            var c = a.ba.get(new yf("ie", !1)),
                d = Nc(a.u),
                e = dx(ax(a.Ta)) + cx(ax(a.Ta)) + n,
                g = a.ja.ba.get(Of) - e;
            if (c && !(0 >= g)) {
                var h = new v_({
                        ma: a.ma,
                        Z: ax(a.Ta).wa(),
                        kD: Xl,
                        Qz: w_(a.Od),
                        ka: a.ka,
                        rc: a.rc,
                        zw: ax(a.Ta).getSubscription(),
                        tq: bx(a.Ta).Tb()
                    }),
                    k = new x_({
                        Mh: Xc(a.u)
                    }),
                    l = new y_,
                    m = {
                        tJ: 3,
                        kJ: e,
                        jl: a.ja.ba.get(Of),
                        hF: 5
                    },
                    c = z_({
                        la: d,
                        f_: b,
                        H: a.H,
                        Mi: m
                    });
                $("body").append(c.view.$el);
                c.bc.De();
                c.bc.show()
            }
        }
        a.getSession().save();
        var e = A_(a.ja.He(), a.document, a.Ze.getKeys()),
            g = a.ba.get(new yf("iq", !1)),
            h = B_({
                u: Nc(a.u)
            }),
            k = null,
            l = null,
            m = null;
        g ? (l = new x_({
                Mh: Xc(a.u)
            }),
            k = C_({
                J: "shareDialog__emailInput",
                placeholder: Nc(a.u).format("shareDesignDialogInviteEmailPlaceholder")
            }),
            l = D_({
                TP: l,
                iv: c
            }, k)) : (m = E_({
                nh: Nc(a.u).format("shareDesignDialogInvitePlaceholder"),
                ka: a.ka,
                Z: ax(a.Ta).wa(),
                Ap: !0,
                xB: !0,
                Sk: nc(a.u)
            }),
            m.view.on("focus", c));
        b = F_({
            rl: BU(a.getSession().Fc()),
            aa: a.aa,
            ja: a.ja,
            qs: e.qs,
            ym: m && m.view,
            Vt: k,
            Ct: h.view,
            u: a.u,
            zc: b
        });
        var n = 0;
        b.once("remove", function () {
            0 < n && d()
        });
        return G_({
            Cv: mh(a.config).$O,
            Lz: H_,
            zb: a.getSession().Fc(),
            lc: a.getSession().be(),
            ky: a.document.isEmpty(),
            Ta: a.Ta,
            Vi: e,
            R0: a.ja.ba.get(cg),
            jl: a.ja.ba.get(Of),
            H: a.H,
            nb: a.nb,
            He: a.ja.He(),
            ka: a.ka,
            hd: a.hd,
            rc: a.rc,
            ma: a.ma,
            sb: a.sb,
            sc: a.sc,
            Eb: a.Eb,
            jr: m,
            yt: function (b, c) {
                var d = a.getSession().Fc(),
                    e = a.document.Rb()[0].D(),
                    g = a.document.Rb()[0].F(),
                    h = soydata.VERY_UNSAFE.ordainSanitizedTrustedResourceUri(a.config.hg.get("embedScriptUrl", ""));
                b = soydata.VERY_UNSAFE.ordainSanitizedHtml(hf(md(a.u), a.document.Jb() ? _.escape(QN(a.document.Jb())) : _.escape(md(a.u).format("newLightboxUntitled")), CU(a.getSession().Fc(), null, "link", "embeds"), location.protocol + "//" + location.host + ("/" + encodeURIComponent(c)) + "?" + ["utm_campaign\x3d" + encodeURIComponent("designshare"), "utm_medium\x3d" + encodeURIComponent("embeds"), "utm_source\x3d" + encodeURIComponent("link")].join("\x26"), _.escape(b)));
                var k;
                k = k || {};
                soy.asserts.assertType(h instanceof soydata.SanitizedTrustedResourceUri || h instanceof soydata.UnsanitizedText || goog.isString(h), "embedScriptUrl", h, "soydata.SanitizedTrustedResourceUri");
                soy.asserts.assertType(goog.isNumber(g), "thumbnailHeight", g, "number");
                soy.asserts.assertType(goog.isNumber(e), "thumbnailWidth", e, "number");
                soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "designId", d, "string|goog.soy.data.SanitizedContent");
                soy.asserts.assertType(b instanceof soydata.SanitizedHtml || b instanceof soydata.UnsanitizedText || goog.isString(b), "byLineHtml", b, "soydata.SanitizedHtml");
                return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"canva-embed" data-height-ratio\x3d"' + soy.$$escapeHtmlAttribute(Math.round(g / e * 1E4) / 1E4) + '" data-design-id\x3d"' + soy.$$escapeHtmlAttribute(d) + '" style\x3d"' + (k.kc ? "/*" + k.kc + "*/" : "") + "padding:" + soy.$$escapeHtmlAttribute(soy.$$filterCssValue(Math.round(g / e * 1E4) / 1E4 * 100)) + '% 5px 5px 5px;background:rgba(0,0,0,0.03);border-radius:8px;"\x3e\x3c/div\x3e\x3cscript async src\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterTrustedResourceUri(h)) + '"' + (k.kc ? ' nonce\x3d"' + k.kc + '"' : "") + "\x3e\x3c/script\x3e" + soy.$$escapeHtml(b)).toString()
            },
            Nn: a.Nn,
            eo: jt(a.getSession()),
            EX: a.getSession().context.nu().cl(),
            cr: a.getSession().context.nu().VS(),
            u: a.u,
            aa: a.aa,
            Bt: h.bc,
            Fa: a.Fa,
            Dd: I_({
                document: a.document,
                Qb: a.getSession()
            }),
            view: b,
            ba: a.ba,
            kn: function () {
                n++
            },
            Io: l
        })
    }

    function A_(a, b, c) {
        if (!a)
            return {
                qs: !1,
                wH: !1
            };
        var d, e;
        try {
            e = b.serialize();
            d = er(e);
            var g = J_(d, c),
                h = g.some(function (a) {
                    return a.level === K_
                }),
                k = g.some(function (a) {
                    return a.level === L_
                });
            return {
                qs: !h,
                wH: k
            }
        } catch (l) {
            return {
                qs: !1,
                wH: !1
            }
        }
    }
    var s_ = {
        UPGRADE: function (a) {
            var b = new M_({
                Jc: Bc(a.u)
            });
            b.on("click", function () {
                var b = a.Od,
                    d = ax(a.Ta).wa(),
                    e = N_({
                        ma: zb,
                        ka: Cb,
                        H: a.H,
                        Z: d,
                        sv: O_(b),
                        sb: a.sb,
                        qw: !1,
                        Lq: !1,
                        rk: !!a.rk,
                        Bo: !!a.Bo,
                        u: a.u,
                        ba: a.ba,
                        Ta: a.Ta,
                        ja: a.ja
                    });
                e.on("signup", function () {
                    window.location = e.dG
                });
                e.show()
            });
            return b
        },
        SHARE: function (a) {
            var b = Bc(a.u),
                c = new Backbone.View({
                    tagName: "button",
                    className: "button editorActionShare",
                    events: {
                        click: function () {
                            a.H.Ga(X(new Hl("share_button_click"), "location", "editor"));
                            t_(a).show()
                        }
                    }
                });
            c.$el.text(b.cw());
            return c
        },
        EXPORT: function (a) {
            var b, c;
            b = Bc(a.u);
            c = new Backbone.View({
                tagName: "button",
                className: "button editorActionExport",
                events: {
                    click: function (b) {
                        var c = {
                            model: a.document,
                            ja: a.ja,
                            de: -1 !== ["DESIGN_TUTORIAL", "FREE_NEW_USER"].indexOf(a.config.kh()),
                            tl: function () {
                                var b = t_(a, P_);
                                Q_(b);
                                b.show()
                            },
                            H: a.H,
                            gd: a.zk,
                            Fa: a.Fa,
                            Qb: a.getSession(),
                            ma: a.ma,
                            hd: a.hd,
                            sc: a.sc,
                            sb: a.sb,
                            ka: a.ka,
                            Eb: a.Eb,
                            rc: a.rc,
                            Ta: a.Ta,
                            Od: a.Od,
                            u: a.u,
                            aa: a.aa,
                            jc: a.jc,
                            Ih: new XY({
                                H: a.H
                            }),
                            Dd: I_({
                                document: a.document,
                                Qb: a.getSession()
                            }),
                            Vi: A_(a.ba.get(cZ.rQ), a.document, a.Ze.getKeys()),
                            yh: a.config.hg.get("animatorUrl", null),
                            ba: a.ba,
                            zd: a.zd,
                            Ic: a.Ic,
                            Wa: a.Wa
                        };
                        (new cZ(c)).ci($(b.target));
                        a.H.track("download_button_click", {
                            section: "editor",
                            location: "menu_bar"
                        })
                    }
                }
            });
            b = b.download();
            c.$el.text(b);
            return c
        },
        PRINT: function (a) {
            var b = R_({
                    Bq: function (a) {
                        return (new Dn(a)).render()
                    },
                    H: a.H,
                    ma: a.ma,
                    Ia: ax(a.Ta).wa().id,
                    nb: a.nb,
                    Pe: a.document.pb(),
                    Tg: a.Tg,
                    Yg: function () {
                        return Uy(J.bx)
                    },
                    gu: $l(),
                    kr: a.ja.kr(),
                    mu: function () {
                        return a.document.wc()
                    },
                    Dm: function () {
                        return new S_(H.$el)
                    },
                    vc: function () {
                        return new T_({
                            id: a.getSession().Fc(),
                            version: a.getSession().be()
                        })
                    },
                    LK: function () {
                        return QN(a.document.Jb())
                    },
                    qu: function () {
                        var a = function () {
                            var a = [];
                            G.xa().forEach(function (b) {
                                var c = b.ha() ? b.ha().ea() : -1;
                                switch (b.constructor) {
                                    case eB:
                                    case Ko:
                                        b.ib.forEach(function (b) {
                                            b instanceof $A && !b.isEmpty() && b.Ub() && a.push({
                                                Xr: c,
                                                rI: b
                                            })
                                        });
                                        break;
                                    case aB:
                                        b.Ub() && a.push({
                                            Xr: c,
                                            rI: b
                                        })
                                }
                            });
                            return a
                        }();
                        return function (a) {
                            return new P(function (b) {
                                lK(vb, a, !1, b)
                            })
                        }(function (a) {
                            a = a.map(function (a) {
                                return a.Ub()
                            });
                            return _.uniq(a, !1, function (a) {
                                return a.G() + ":" + a.getVersion()
                            })
                        }(a.map(function (a) {
                            return a.rI
                        }).filter(function (a) {
                            a = a.Ub();
                            a = vb.Uc(a.G(), a.getVersion());
                            return !a || !a[cC] || !a[aC]
                        }))).then(function () {
                            return a.map(function (a) {
                                var b = a.rI,
                                    c;
                                c = b.Ub();
                                c = vb.Uc(c.G(), c.getVersion());
                                return {
                                    kF: {
                                        AQ: c[cC],
                                        ex: c[aC]
                                    },
                                    Ra: b.Xf ? b.Xf() : b.Em(),
                                    Xr: a.Xr
                                }
                            })
                        })
                    },
                    bp: function () {
                        return U_()
                    },
                    hz: function () {
                        H.$el.removeClass("document--canPrintOnePage").removeClass("document--canPrintTwoPages")
                    },
                    sz: function (b, c) {
                        return V_(a.document, b, c)
                    },
                    Xe: ax(a.Ta).wa().Ph(),
                    u: a.u,
                    cA: function () {
                        H.Mz()
                    },
                    Wa: a.Wa,
                    Ag: function (b) {
                        var c = null;
                        if (a.ja.ba.get(pg)) {
                            var g = new Map([
                                    ["realEstateFlyer", "TACQ-ujqN6g"],
                                    ["posterUS", "TACQ-oYd_9A"],
                                    ["businessCard", "TACQ-vRWTmU"],
                                    ["a4", "TACQ-j4WGew"],
                                    ["poster", "TACQ-jGq9fY"]
                                ]),
                                c = b.id;
                            if (null == c)
                                throw Error("The doctype to resize must have an id");
                            g = g.get(c);
                            if ("T" !== c[0] && null == g)
                                throw Error("Unexpected doctype with deprecated id format: " + c);
                            c = new ks({
                                id: g || c,
                                version: 1
                            })
                        }
                        zU({
                            doctype: b,
                            Hk: c,
                            Nb: a.document,
                            xd: I
                        })
                    },
                    l6: Bc(a.u).print(),
                    Xj: function (a) {
                        H.NG(a)
                    },
                    bi: function (a) {
                        H.bi(a)
                    },
                    kw: function (a) {
                        var b = H;
                        Da(1 === a || 2 === a, 'pageCount can be either 1 or 2 but found "{}"', a);
                        1 === a ? b.$el.removeClass("document--canPrintTwoPages").addClass("document--canPrintOnePage") : 2 === a && b.$el.removeClass("document--canPrintOnePage").addClass("document--canPrintTwoPages")
                    },
                    sb: a.sb,
                    Ol: !!a.ja.ba.get(hg),
                    ge: bx(a.Ta)
                }),
                c = new Backbone.View;
            c.setElement(b.view.$el);
            a.document.on("change", function () {
                b.bc.QM();
                b.bc.IM();
                b.bc.AM()
            });
            a.document.on("resize", function () {
                var c = a.document.pb();
                W_(b.bc, c)
            });
            return c
        }
    };
    s_.PUBLISH_TO_STREAM = function (a) {
        function b() {
            return c_(l).filter(function (a) {
                return a.active
            }).sort(function (a, b) {
                a = VZ[a.getContext()] || 0;
                b = VZ[b.getContext()] || 0;
                return a === b ? 0 : a > b ? -1 : 1
            })[0]
        }

        function c(a) {
            null !== a && (a === LD ? m.$el.addClass("publishToStreamSwitchForSale") : (m.$el.addClass("publishToStreamSwitchInReview"),
                PM()))
        }

        function d(b) {
            var c = Bc(a.u);
            b instanceof Error || (b = Error(c.format("editorControlsErrorFlippingSwitch")));
            (new by({
                title: c.format("editorControlsPublishErrorTitle"),
                content: $("\x3cp\x3e" + b.message + "\x3c/p\x3e")
            })).show().$el.addClass("docPublisherError")
        }

        function e(b) {
            var c = Bc(a.u),
                e = c_(l).map(function (a, d) {
                    return new SZ(a.getContext(), c, b && 0 === d ? b : a.active)
                }),
                h = new XZ({
                    Qe: c.format("editorControlsPublicationSaveChanges"),
                    Jc: c
                }),
                k = h.remove.bind(h);
            return YZ(h.ci(m.$el), e).then(l.yI.bind(l)).then(l.JP.bind(l)).finally(g).tap(k).catch(ZZ, k).catch(d)
        }

        function g() {
            var a = b() || c_(l)[0];
            if (a) {
                n = !0;
                try {
                    var c = m,
                        d = TZ(a);
                    c.Nj = d;
                    c.$(".switchLabelOn").text(d);
                    m.toggle(a.active)
                } finally {
                    n = !1
                }
            }
        }

        function h(a) {
            var b = c_(l).map(function (b) {
                return b.toggle(a)
            });
            return l.yI(b).then(l.JP.bind(l)).finally(g).catch(d)
        }
        var k = hh(a.config),
            l = new $Z({
                H: a.H,
                getSession: a.getSession,
                document: a.document,
                yc: a.yc,
                hd: a.hd,
                Jc: Bc(a.u),
                vt: a.vt,
                Ei: a.config,
                Pw: bx(a.Ta).qg()
            }),
            m = function () {
                var a = c_(l),
                    c = a[0],
                    d = b() || c;
                (a = d ? new EU({
                    on: d.active,
                    Nj: TZ(d),
                    sl: UZ(c),
                    ut: 1 === a.length || !d.active
                }) : null) && a.$el.addClass("publishToStreamSwitch");
                return a
            }(),
            n = !1;
        if (!m)
            return null;
        0 <= k.indexOf("MARKETPLACE_LAYOUT") && f_(l).then(c);
        m.on("toggle", function (a) {
            var b = c_(l),
                c = 1 < b.length ? e : h;
            m.ut = 1 === b.length || !a;
            if (!n)
                return c(a)
        });
        m.on("click", function () {
            ub && ub.save();
            m.ut || e()
        });
        l.on("processingStateChange", function (a) {
            m.$el.toggleClass("switchProcessing", a)
        });
        a.Nn.on(X_, function () {
            var a = c_(l).map(function (a) {
                return "PUBLIC_STREAM" === a.getContext() ? a.toggle(!0) : a
            });
            return l.yI(a).then(l.JP.bind(l)).finally(g).catch(d)
        });
        return m
    };

    function M_() {}
    M_ = Backbone.View.extend({
        tagName: "button",
        className: "button buttonUpgrade"
    });
    M_.prototype.initialize = function (a) {
        this.Jc = a.Jc
    };
    M_.prototype.events = function () {
        return {
            click: this.trigger.bind(this, "click")
        }
    };
    M_.prototype.render = function () {
        this.$el.html(this.template({
            upgrade: this.Jc.oH()
        }));
        return this
    };
    M_.prototype.template = _.template('\x3cdiv class\x3d"buttonUpgradeSparkle"\x3e\x26starf;\x3c% _.times(5, function() { %\x3e\x3cspan\x3e\x3c/span\x3e\x3c% }); %\x3e\x3c/div\x3e\x3c%- upgrade %\x3e');

    function NN() {}
    NN = Backbone.View.extend({
        el: "#editorControls"
    });
    NN.prototype.initialize = function (a) {
        this.listenTo(this.model, "change:title", this.xP);
        this.listenTo(this.model, "resize", this.xP);
        this.listenTo(this.model, "change", this.A_);
        this.listenTo(S, "documentView:scroll", this.D_);
        this.listenTo(S, "documentView:copyDocument", this.FR);
        this.listenTo(S, "session:sync", this.BO);
        this.listenTo(S, "documentSaveRequested", this.xU);
        this.ja = a.ja;
        this.mg = a.mg;
        this.Ei = a.Ei;
        this.La = a.La;
        this.St = 2;
        this.KJ = !1;
        this.Er = Date.now();
        this.lH = a.lH;
        this.YH = a.YH;
        this.ZI = a.ZI;
        this.u = a.u;
        this.zk = a.zk;
        this.H = a.H;
        this.AL = this.CC = !1;
        this.render();
        Y_(this)
    };
    NN.prototype.events = function () {
        return {
            "click #documentFileMenuButton": this.rZ,
            "click #documentTitle .content": this.wZ,
            "mousedown #documentTitle .content": function (a) {
                a.stopPropagation();
                a.preventDefault();
                return !1
            },
            "click #documentFileMenuUndoButton": this.vZ,
            "click #documentFileMenuRedoButton": this.tZ,
            "click #documentFileMenuResizeButton": this.uZ,
            "click #editorLogo": this.sZ
        }
    };

    function Z_() {
        var a = Tb;
        a.AL = !0;
        xU(a, a.St)
    }

    function UM() {
        var a = Tb;
        a.$el.addClass("blockEditorControls");
        a.CC = !0
    }
    NN.UR = function () {
        $(".helpMenuButton").remove();
        NN.D0 = !0
    };
    NN.w_ = function () {
        $("#yourDesigns").remove();
        NN.N7 = !0
    };
    NN.t6 = function (a) {
        $("#documentTitle").addClass("nonInteractive");
        $("#documentTitle .content").text(a);
        NN.SW = a
    };
    NN.hL = function () {
        return void 0 !== NN.SW
    };
    f = NN.prototype;
    f.remove = function () {
        this.undelegateEvents();
        this.stopListening();
        return this
    };
    f.render = function () {
        this.xP();
        NN.D0 && this.$(".helpMenuButton").remove();
        NN.hL() && (this.$("#documentTitle").addClass("nonInteractive"),
            this.$("#documentTitle .content").text(NN.SW));
        NN.N7 && this.$("#yourDesigns").remove();
        this.YH.forEach(function (a, b) {
            var c = a && $("\x3cli\x3e\x3c/li\x3e");
            a && (a.render().$el.addClass("prerollAnimation prerollDelay" + (b + 3)).appendTo(c),
                $("#documentMenu").append(c))
        });
        return this
    };
    f.rZ = function (a) {
        $_(this, $(a.target))
    };

    function $_(a, b) {
        var c = a.ZI();
        c.ci(b);
        a.listenTo(c, "documentSaveRequested", a.xU);
        a.listenTo(c, "documentResizeRequested", a.Ag);
        a.listenTo(c, "documentCopyRequested", a.FR);
        return c
    }
    f.wZ = function (a) {
        NN.hL() || (new xZ({
            model: this.model,
            u: this.u
        })).ci($(a.currentTarget))
    };
    f.vZ = function () {
        $("#documentBlocker").hasClass("on") || DJ()
    };
    f.tZ = function () {
        $("#documentBlocker").hasClass("on") || CJ()
    };
    f.uZ = function () {
        this.H.track("exp_editor_menu_magic_resize_click", {
            magicResizeIsEnabled: this.ja.bM()
        });
        if (this.ja.bM())
            $_(this, this.$("#documentFileMenuResizeButton")).wg.show();
        else {
            var a = this.zk;
            a.H.Ga(Sl());
            qo(a, to)
        }
    };
    f.sZ = function () {
        -1 != fh.indexOf(this.Ei.kh()) && T && Gl(T, "minichallenge_leave");
        this.$el.off("mouseout", "#documentMenu li")
    };

    function $T(a) {
        a.$("#primaryNavigation").removeClass("undoDisabled")
    }

    function aU(a) {
        a.$("#primaryNavigation").removeClass("redoDisabled")
    }

    function dU(a) {
        0 < I.xd.length ? $T(a) : (a.$("#primaryNavigation").addClass("undoDisabled"),
            a.$("#documentFileMenuUndoButton").blur());
        0 < I.Dv.length ? aU(a) : (a.$("#primaryNavigation").addClass("redoDisabled"),
            a.$("#documentFileMenuRedoButton").blur())
    }
    f.A_ = function () {
        dU(this)
    };
    f.D_ = function (a) {
        var b = this.$("#documentMenu");
        a ? b.addClass("dark") : b.removeClass("dark")
    };
    f.xP = function () {
        var a = this.model.Jb();
        NN.hL() || (this.$("#documentTitle .content").text(QN(a)),
            this.lH && this.lH(QN(a, {
                L0: !0
            })))
    };
    f.BO = function (a) {
        var b = this;
        2 === a && (this.Er = Date.now());
        this.St = a;
        this.KJ || (xU(this, a),
            window.setTimeout(function () {
                b.St !== a && xU(b, b.St);
                b.KJ = !1
            }, 600),
            this.KJ = !0)
    };

    function xU(a, b) {
        var c = Bc(a.u),
            d = $("#documentSyncStatus");
        a.AL ? (d.addClass("offline"),
            d.text(c.format("editorControlsOffline"))) : (d.removeClass("offline"),
            a.CC ? 0 === b && null != a.La.Vl && d.text(Vd(c)) : 0 === b && null != a.La.Vl ? d.text(Vd(c)) : 1 === b ? d.text(c.format("editorControlsSaving")) : 2 === b ? d.text(c.format("editorControlsAllChangesSaved")) : d.text(""))
    }
    f.xU = function () {
        this.La.save();
        this.CC || null == this.La.Vl || this.La.Ji() || (this.BO(1),
            this.BO(2))
    };
    f.Ag = function (a, b) {
        b = this.ja.ba.get(pg) ? b : null;
        zU({
            doctype: a,
            Hk: b,
            Nb: this.model,
            xd: I
        })
    };
    f.FR = function () {
        var a = this.La.Fc(),
            b = jt(this.La),
            c = QN(this.model.Jb()),
            c = lc(this.u).format("documentCopyDesignTitle", c);
        c.length > J.jo && (c = c.substring(0, J.jo));
        window.open(AU(a, "remix", b) + "?title\x3d" + encodeURIComponent(c), "")
    };

    function Y_(a) {
        function b() {
            $_(this, this.$("#documentFileMenuButton")).wg.show();
            this.mg.Fa.removeItem(no)
        }
        lo(a.mg) && Rk.setTimeout(b.bind(a), 1500)
    };

    function CT() {}
    CT = Backbone.View.extend({
        tagName: "div",
        id: "overlays",
        template: _.template('\x3cdiv class\x3d"mask"\x3e\x3c/div\x3e\x3cdiv class\x3d"vertical align"\x3e\x3c/div\x3e\x3cdiv class\x3d"vertical align"\x3e\x3c/div\x3e\x3cdiv class\x3d"vertical align"\x3e\x3c/div\x3e\x3cdiv class\x3d"horizontal align"\x3e\x3c/div\x3e\x3cdiv class\x3d"horizontal align"\x3e\x3c/div\x3e\x3cdiv class\x3d"horizontal align"\x3e\x3c/div\x3e\x3cdiv class\x3d"rotation align"\x3e\x3c/div\x3e\x3cdiv class\x3d"rotationGuide"\x3e\x3c/div\x3e')
    });
    f = CT.prototype;
    f.initialize = function (a) {
        this.Gk = a.Gk;
        this.u = a.u;
        this.listenTo(this.model, {
            "page:change:selected": this.render
        });
        this.Sz = this.Sz.bind(this);
        this.qD = this.qD.bind(this);
        this.MD = this.MD.bind(this);
        this.Gk.$el.on("mousedown", this.Sz);
        this.Gk.$el.on("touchstart", this.qD);
        this.Gk.$el.on("touchend", this.MD);
        this.$el.html(this.template());
        this.render();
        this.$el.prependTo(this.Gk.$el.children(".inner"))
    };
    f.aL = function (a) {
        (a = $(a.target).parents(".element").last().data("toolbar")) && OC(a)
    };
    f.events = function () {
        this.aL = _.debounce(this.aL, 100);
        return {
            'keydown [contenteditable\x3d"true"]': this.aL
        }
    };
    f.remove = function () {
        Backbone.View.prototype.remove.call(this);
        this.Gk.$el.off("mousedown", this.Sz);
        this.Gk.$el.off("touchstart", this.qD);
        this.Gk.$el.off("touchend", this.MD)
    };
    f.render = function () {
        this.model.xa().forEach(function (a) {
            a.oe && a.lb()
        });
        return this
    };
    f.qD = function () {
        this.ST = !0
    };
    f.MD = function () {
        this.ST = !1
    };
    f.Sz = function (a, b) {
        function c(a) {
            n || a.shiftKey || bh();
            n = !0;
            var b = e(a) - r;
            a = g(a) - u;
            0 > b && x.css("left", v + b);
            0 > a && x.css("top", y + a);
            x.css("display", "").css("width", Math.abs(b)).css("height", Math.abs(a));
            $(B).each(function (a, b) {
                mU.call(b)
            });
            return !1
        }

        function d(a) {
            E.off("mousemove|touchmove", c).off("mouseup|touchend", d);
            $("#marquee").remove();
            a.shiftKey && q.forEach(iU);
            n && (a = G.hb(),
                0 === a.length ? bh() : 1 == a.length ? (bh(),
                    wg(a[0])) : lJ(xc(h.u), zc(h.u)))
        }

        function e(a) {
            a = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX;
            return a -= p.left
        }

        function g(a) {
            a = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY;
            return a -= p.top
        }
        var h = this;
        if (h.ST || a.which == J.wh || a.ctrlKey)
            return !0;
        var k = $(a.target).is("#content, #canvaDocument, #canvaDocument \x3e .inner, .bg, .elements"),
            l = $(a.target).is(".elements .background.image.element, .elements .background.image.element img"),
            m = $(a.target).closest(".elements .element").data("canvaElement"),
            m = m && m.vg();
        if (!(k || l || m || b))
            return !0;
        if ($(".toolbar__item--submenuExpanded, .colorPalette.on.toolbar--overlay").length)
            return S.trigger("hideContextualControlsRequested"), !0;
        var n = !1,
            p = $("#canvaDocument").offset(),
            r = e(a),
            u = g(a);
        b = document.getElementById("canvaDocument");
        var v = r + b.scrollLeft,
            y = u + b.scrollTop,
            q = G.hb();
        $(a.target).is("input") || $("*:focus").blur();
        a.shiftKey || bh();
        var x = $('\x3cdiv id\x3d"marquee"\x3e\x3c/div\x3e');
        x.css("display", "none").css("left", v).css("top", y).appendTo(this.$el);
        var E = new Po($(document));
        E.on("mousemove|touchmove", c).on("mouseup|touchend", d);
        var B = $("#content .element");
        GZ(h.Gk);
        a.preventDefault()
    };

    function a0(a) {
        soy.asserts.assertType(goog.isString(a.Ql) || a.Ql instanceof goog.soy.data.SanitizedContent, "actionCopy", a.Ql, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Rl) || a.Rl instanceof goog.soy.data.SanitizedContent, "actionDelete", a.Rl, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Sl) || a.Sl instanceof goog.soy.data.SanitizedContent, "actionMoveDown", a.Sl, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Tl) || a.Tl instanceof goog.soy.data.SanitizedContent, "actionMoveUp", a.Tl, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.Sm) || 1 === a.Sm || 0 === a.Sm, "isFirst", a.Sm, "boolean");
        soy.asserts.assertType(goog.isBoolean(a.Tm) || 1 === a.Tm || 0 === a.Tm, "isLast", a.Tm, "boolean");
        soy.asserts.assertType(goog.isBoolean(a.Vm) || 1 === a.Vm || 0 === a.Vm, "isPageNumMax", a.Vm, "boolean");
        soy.asserts.assertType(goog.isNumber(a.mA), "pageNumber", a.mA, "number");
        soy.asserts.assertType(goog.isBoolean(a.co) || 1 === a.co || 0 === a.co, "toolbarDisabled", a.co, "boolean");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"crops"\x3e\x3cdiv class\x3d"tlcrop"\x3e\x3c/div\x3e\x3cdiv class\x3d"trcrop"\x3e\x3c/div\x3e\x3cdiv class\x3d"brcrop"\x3e\x3c/div\x3e\x3cdiv class\x3d"blcrop"\x3e\x3c/div\x3e\x3c/div\x3e') + b0({
            J: "page__bleedAreaLine"
        }) + '\x3cdiv class\x3d"page__clipRegion"\x3e\x3cdiv class\x3d"page__content"\x3e\x3cdiv class\x3d"page__elements elements"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"page__overlays"\x3e\x3cdiv class\x3d"page__furniture"\x3e\x3c/div\x3e' + b0({
            J: "page__safeAreaLine"
        }) + '\x3c/div\x3e\x3cdiv class\x3d"page__editBlocker"\x3e\x3c/div\x3e' + c0(a))
    }

    function c0(a) {
        soy.asserts.assertType(goog.isString(a.Ql) || a.Ql instanceof goog.soy.data.SanitizedContent, "actionCopy", a.Ql, "string|goog.soy.data.SanitizedContent");
        var b = a.Ql;
        soy.asserts.assertType(goog.isString(a.Rl) || a.Rl instanceof goog.soy.data.SanitizedContent, "actionDelete", a.Rl, "string|goog.soy.data.SanitizedContent");
        var c = a.Rl;
        soy.asserts.assertType(goog.isString(a.Sl) || a.Sl instanceof goog.soy.data.SanitizedContent, "actionMoveDown", a.Sl, "string|goog.soy.data.SanitizedContent");
        var d = a.Sl;
        soy.asserts.assertType(goog.isString(a.Tl) || a.Tl instanceof goog.soy.data.SanitizedContent, "actionMoveUp", a.Tl, "string|goog.soy.data.SanitizedContent");
        var e = a.Tl;
        soy.asserts.assertType(goog.isBoolean(a.Sm) || 1 === a.Sm || 0 === a.Sm, "isFirst", a.Sm, "boolean");
        var g = !!a.Sm;
        soy.asserts.assertType(goog.isBoolean(a.Tm) || 1 === a.Tm || 0 === a.Tm, "isLast", a.Tm, "boolean");
        var h = !!a.Tm;
        soy.asserts.assertType(goog.isBoolean(a.Vm) || 1 === a.Vm || 0 === a.Vm, "isPageNumMax", a.Vm, "boolean");
        var k = !!a.Vm;
        soy.asserts.assertType(goog.isNumber(a.mA), "pageNumber", a.mA, "number");
        var l = a.mA;
        soy.asserts.assertType(goog.isBoolean(a.co) || 1 === a.co || 0 === a.co, "toolbarDisabled", a.co, "boolean");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cmenu class\x3d"pageToolbar ' + soy.$$escapeHtmlAttribute(a.co ? "disabled" : "") + '"\x3e\x3cli class\x3d"pageToolbarUp ' + soy.$$escapeHtmlAttribute(g ? "disabled" : "enabled") + '"\x3e\x3ca href\x3d"#" title\x3d"' + soy.$$escapeHtmlAttribute(e) + '"\x3e' + soy.$$escapeHtml(e) + '\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pageToolbarDown ' + soy.$$escapeHtmlAttribute(h ? "disabled" : "enabled") + '"\x3e\x3ca href\x3d"#" title\x3d"' + soy.$$escapeHtmlAttribute(d) + '"\x3e' + soy.$$escapeHtml(d) + '\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pageToolbarCopy ' + soy.$$escapeHtmlAttribute(k ? "disabled" : "enabled") + '"\x3e\x3ca href\x3d"#" title\x3d"' + soy.$$escapeHtmlAttribute(b) + '"\x3e' + soy.$$escapeHtml(b) + '\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pageToolbarDelete ' + soy.$$escapeHtmlAttribute(g && h ? "disabled" : "enabled") + '"\x3e\x3ca href\x3d"#" title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e' + soy.$$escapeHtml(c) + '\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"pageNumber"\x3e' + soy.$$escapeHtml(l) + "\x3c/li\x3e\x3c/menu\x3e")
    }

    function b0(a) {
        soy.asserts.assertType(goog.isString(a.J) || a.J instanceof goog.soy.data.SanitizedContent, "classes", a.J, "string|goog.soy.data.SanitizedContent");
        var b = a.J;
        soy.asserts.assertType(null == a.highlighted || goog.isBoolean(a.highlighted) || 1 === a.highlighted || 0 === a.highlighted, "highlighted", a.highlighted, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"page__printLine' + (a.highlighted ? " page__printLine--highlight" : "") + " " + soy.$$escapeHtmlAttribute(b) + '"\x3e\x3cdiv class\x3d"page__printLineInner"\x3e\x3c/div\x3e\x3c/div\x3e')
    };

    function BZ() {}
    BZ = Backbone.View.extend({
        tagName: "section",
        className: "page"
    });
    BZ.v_ = function () {
        $(".pageToolbar").addClass("disabled").hide();
        $(".pageToolbarCopy").removeClass("enabled").addClass("disabled");
        BZ.F4 = !0
    };
    f = BZ.prototype;
    f.events = function () {
        return {
            "mousedown .page__elements": this.qM,
            "mouseout .pageToolbar": this.s1,
            "click .pageToolbarCopy.enabled": this.LZ,
            "click .pageToolbarDelete.enabled": this.MZ,
            "click .pageToolbarDown.enabled": this.NZ,
            "click .pageToolbarUp.enabled": this.OZ,
            click: this.DZ
        }
    };
    f.initialize = function (a) {
        this.AN = null;
        this.Tp = "";
        this.Vr = a.Vr;
        this.zN = a.zN;
        this.listenTo(S, "documentView:zoom", this.LJ);
        this.listenTo(this.model, {
            change: this.YZ,
            "change:background": this.dR,
            "change:selected": this.nW,
            "change:preview": this.m5,
            "element:add": this.M_,
            "element:move": this.O_,
            "element:remove": this.P_,
            resize: this.O5,
            willchange: this.ZZ
        });
        this.listenTo(this.model.Nb, {
            "page:add": this.JJ,
            "page:move": this.JJ,
            "page:remove": this.JJ
        });
        this.render()
    };
    f.render = function () {
        var a = this.model.Nb,
            b = this.model.ea();
        this.$el.html(a0({
            Ql: this.Vr.Ql(),
            Rl: this.Vr.Rl(),
            Sl: this.Vr.Sl(),
            Tl: this.Vr.Tl(),
            mA: b + 1,
            Sm: !!a && 0 == b,
            Tm: !!a && b == a.Rb().length - 1,
            Vm: !!a && a.Rb().length >= J.ax,
            co: !!BZ.F4
        }).toString());
        this.LJ();
        this.nW(0, Ap(a) === b);
        this.dR();
        return this
    };

    function tB(a) {
        var b = parseFloat(a.$el.css("left"));
        a = a.$el.find(".page__content").position().left;
        return b + a
    }

    function yB(a) {
        var b = parseFloat(a.$el.css("top"));
        a = a.$el.find(".page__content").position().top;
        return b + a
    }
    f.KK = function () {
        return parseFloat(this.$el.css("left"))
    };

    function CZ(a, b) {
        a.$el.css("top", b)
    }

    function KZ(a, b, c) {
        a.$el.css("left", b);
        CZ(a, c)
    }
    f.qM = function (a) {
        function b(a) {
            var b = (void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX) - g;
            a = (void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY) - h;
            !k && (Math.abs(b) > J.Rc || Math.abs(a) > J.Rc) && (k = !0)
        }

        function c() {
            l.off("mousemove|touchmove", b).off("mouseup|touchend", c);
            if (!(k || 0 < e.hb().length)) {
                var a = Dp(e),
                    d = bO(e);
                0 !== d.length ? wg(d.pop()) : 0 < a.length && IJ(a)
            }
        }

        function d() {
            var b = $(a.target).closest(".element.grid").data("canvaElement");
            return b && b.vg()
        }
        if (a.target === a.currentTarget || 0 !== $(a.target).closest(".element.background.image").length || d()) {
            var e = this.model;
            if (!(0 < e.hb().length)) {
                var g = void 0 !== a.clientX ? a.clientX : a.originalEvent.touches[0].clientX,
                    h = void 0 !== a.clientY ? a.clientY : a.originalEvent.touches[0].clientY,
                    k = !1,
                    l = new Po($(document));
                l.on("mousemove|touchmove", b).on("mouseup|touchend", c)
            }
        }
    };
    f.DZ = function (a) {
        if (!(0 < $(a.target).parents(".pageToolbar").length)) {
            a = this.model.Nb;
            var b = Mo(a, this.model);
            rp(a, b)
        }
    };
    f.OZ = function () {
        var a = this.model.Nb;
        if (a) {
            var b = this.model.ea();
            1 > b || (Fp(a, this.model, b - 1),
                I.register(new iN(5, {
                    pageIndex: b - 1,
                    oldPageIndex: b
                })),
                GZ(H))
        }
    };
    f.NZ = function () {
        var a = this.model.Nb;
        if (a) {
            var b = this.model.ea();
            b >= a.Rb().length - 1 || (Fp(a, this.model, b + 1),
                I.register(new iN(5, {
                    pageIndex: b + 1,
                    oldPageIndex: b
                })),
                GZ(H))
        }
    };
    f.LZ = function () {
        S.trigger("pageView:copyButton:click");
        var a = this.model.ea(),
            b = this.model.clone();
        Fp(this.model.Nb, b, a + 1);
        b = dN(this.model.serialize());
        b.pageIndex = a + 1;
        I.register(new iN(1, b));
        GZ(H)
    };
    f.MZ = function () {
        S.trigger("pageView:deleteButton:click");
        var a = this.model.ea(),
            b = dN(this.model.serialize());
        b.pageIndex = a;
        this.model.remove();
        I.register(new iN(2, b));
        GZ(H)
    };
    f.s1 = function (a) {
        0 == $(a.relatedTarget || a.toElement).closest(".pageToolbar").length && S.trigger("pageView:toolbar:mouseout")
    };
    f.ZZ = function () {
        this.$r && this.$r.remove();
        this.$r = this.$el.clone();
        this.$r.addClass("doNotAnimate").insertAfter(this.$el)
    };
    f.YZ = function () {
        var a = this;
        window.setTimeout(function () {
            a.$el.addClass("on").css("opacity", "");
            a.$r.remove()
        }, 800);
        this.$r && 0 < this.$r.parents().length && this.$el.css("opacity", 1).removeClass("on").insertAfter(this.$r)
    };
    f.dR = function () {
        this.model.ug() ? this.$el.addClass("dark") : this.$el.removeClass("dark")
    };
    f.nW = function (a, b) {
        this.$el.toggleClass("selected", b)
    };
    f.M_ = function (a, b, c, d) {
        function e() {
            bh();
            g.removeClass("dropping");
            wg(b);
            g.hasClass("text") && sJ(g, !0)
        }
        var g = b.O(),
            h = d0(this, b),
            h = h && h.O();
        c && (g.one("animationend", e),
            b.setPosition((a.D() - b.D()) / 2, (a.F() - b.F()) / 2),
            g.addClass("dropping"));
        d && g.addClass("appearing");
        b instanceof fB ? g.appendTo(this.$el.find(".page__furniture")) : h && h.closest(".page").length ? g.insertBefore(h) : g.appendTo(this.$el.find(".page__elements"));
        b.oe = this.$el;
        b.mb()
    };

    function d0(a, b) {
        b = a.model.elements.indexOf(b);
        return a.model.xa().slice(b + 1).filter(function (a) {
            return !(a instanceof fB) && !wB(a)
        })[0]
    }
    f.P_ = function (a, b, c, d) {
        var e = b.O();
        b.ph();
        d ? (e.addClass("disappearing"),
            P.delay(J.Na.ZJ).then(function () {
                e.remove()
            })) : e.remove()
    };
    f.O_ = function (a, b) {
        wB(b) || (a = b.O(),
            (b = d0(this, b)) ? a.insertBefore(b.O()) : a.appendTo(this.$el.find(".page__elements")))
    };
    f.JJ = function () {
        this.$(".pageNumber").text((this.model.ea() + 1).toString());
        this.$("li").removeClass("disabled").addClass("enabled");
        var a = this.model.Nb,
            b = this.model.ea(),
            c = a && 0 == b,
            a = a && b == a.Rb().length - 1;
        c && this.$(".pageToolbarUp").removeClass("enabled").addClass("disabled");
        a && this.$(".pageToolbarDown").removeClass("enabled").addClass("disabled");
        c && a && this.$(".pageToolbarDelete").removeClass("enabled").addClass("disabled");
        H.model.Rb().length >= J.ax && this.$(".pageToolbarCopy").removeClass("enabled").addClass("disabled")
    };
    f.LJ = function () {
        e0(this);
        var a = this.model.F() * W,
            b = this.$(".pageToolbar");
        this.$el.find(".page__content").css("width", this.model.D() * W).css("height", a);
        if (a > J.AY) {
            b.addClass("vertical");
            var c = a / 2 + Qb + J.zY;
            c > a ? b.css("margin-top", +Qb - (c - a)) : b.css("margin-top", "")
        } else
            b.removeClass("vertical").css("margin-top", "");
        b.data("leftOffset") || (a = this.model.pb(),
            a = lu(a) + ou(a) - this.model.D(),
            b.data("leftOffset", a));
        a = b.data("leftOffset");
        0 < a && b.css("margin-left", a * W)
    };
    f.Ba = function () {
        var a = this.$(".pageToolbar"),
            a = a.is(":visible") ? Math.round(a.outerWidth(!0)) : 0;
        return km(Rg(this), a, 0)
    };

    function LZ(a) {
        var b = a.$(".pageToolbar"),
            b = b.is(":visible") ? Math.round(b.outerWidth(!0)) : 0;
        return km(MZ(a), b, 0)
    }

    function Rg(a) {
        return new U(tB(a), yB(a), parseInt(a.$el.find(".page__content").css("width"), 10), parseInt(a.$el.find(".page__content").css("height"), 10))
    }

    function MZ(a) {
        if (!a.model || !a.model.pb())
            return new U(0, 0, 0, 0);
        var b = a.model.pb(),
            c = Lg(b.tb),
            d = ou(b) - c.D(),
            b = nu(b) - c.F(),
            d = parseInt(a.$el.find(".page__content").css("width"), 10) + Math.round(d * W),
            b = parseInt(a.$el.find(".page__content").css("height"), 10) + Math.round(b * W);
        if (isNaN(d) || !isFinite(d) || 0 >= d)
            d = c.D();
        if (isNaN(b) || !isFinite(b) || 0 >= b)
            b = c.F();
        return new U(tB(a), yB(a), d, b)
    }
    BZ.wI = function (a, b, c) {
        return b ? (b = Lg(a.tb).F(),
            c = w(c, "Cannot draw print markings without a PaperSize"),
            c = BZ.mR(b, c),
            a = nu(a) - b,
            b + Math.max(a, 2 * c.Fq)) : nu(a)
    };
    BZ.prototype.O5 = function () {
        this.LJ();
        this.model.xa().forEach(function (a) {
            a.mb()
        })
    };
    BZ.prototype.m5 = function () {
        var a = this,
            b = this.Tp;
        (this.Tp = this.model.Tp) ? this.$el.find(".page__content").css("background-image", "url(" + this.Tp + ")").css("background-size", "cover"): b ? window.setTimeout(function () {
            a.$el.find(".page__content").css("background-image", "none").css("background-size", "")
        }, 300) : this.$el.find(".page__content").css("background-image", "none").css("background-size", "")
    };
    BZ.prototype.bi = function (a) {
        this.$el.toggleClass("page--printMarkingsEnabled", a);
        a && w(this.AN, "Cannot enable print markings without print markings sizes");
        e0(this)
    };
    BZ.prototype.yv = function () {
        return this.$el.hasClass("page--printMarkingsEnabled")
    };
    BZ.mR = function (a, b) {
        a /= b.Ki;
        return {
            Fq: a * BZ.MH,
            Z5: a * BZ.MH
        }
    };

    function e0(a) {
        if (a.yv()) {
            var b = w(a.AN, "Cannot draw print markings without print markings sizes"),
                c = b.Z5 * W,
                b = b.Fq * W;
            a.$el.find(".page__safeAreaLine").css("top", c + "px").css("right", c + "px").css("bottom", c + "px").css("left", c + "px");
            a.$el.find(".page__clipRegion").css("padding", b + "px");
            a.$el.find(".page__overlays").css("top", b + "px").css("right", b + "px").css("bottom", b + "px").css("left", b + "px")
        } else
            a.$el.find(".page__safeAreaLine").css("padding", ""),
            a.$el.find(".page__clipRegion").css("padding", ""),
            a.$el.find(".page__furniture").css("padding", "")
    }

    function hM(a, b) {
        a.$el.find(".page__elements").append(b)
    }

    function eU(a, b) {
        a.$el.find(".page__elements").prepend(b)
    }

    function sU(a, b) {
        a.$el.find(".page__content").append(b)
    }
    BZ.prototype.NG = function (a) {
        this.AN = BZ.mR(this.model.F(), a);
        e0(this)
    };
    BZ.MH = 3175;

    function kY() {}
    kY = Uo.extend({
        className: "popupBlocked"
    });
    kY.uY = {
        Chrome: !0,
        IE: !0
    };
    kY.X6 = function (a) {
        return a in kY.uY
    };
    f = kY.prototype;
    f.initialize = function (a) {
        Uo.prototype.initialize.call(this, {
            aa: Rk,
            cf: !1,
            Qn: !1
        });
        this.pk = a.pk
    };
    f.events = function () {
        return {
            "click .popupBlockedFileMenuLink": this.ok
        }
    };
    f.render = function () {
        Uo.prototype.render.call(this);
        this.$(".content").html(this.E0());
        var a = this.$(".popupBlockedStepDirections").eq(0);
        if ("Chrome" === this.pk)
            a.append(this.kZ),
            this.$el.addClass("popupBlockedChrome");
        else if ("IE" === this.pk)
            a.append(this.J0),
            this.$el.addClass("popupBlockedIE");
        else
            throw Error('Unsupported browser "' + this.pk + '"');
        return this
    };
    f.show = function () {
        Uo.prototype.show.call(this);
        var a = this.$el.parent().prevAll(".modalContent:not(.modalContentPreviousSibling)");
        a.addClass("modalContentPreviousSibling");
        this.once("remove", function () {
            a.removeClass("modalContentPreviousSibling")
        });
        return this
    };
    f.E0 = _.template('\x3cheader class\x3d"popupBlockedHeader"\x3e\x3ch1 class\x3d"popupBlockedTitle"\x3eYou\x26rsquo;re almost there!\x3c/h1\x3e\x3ch2 class\x3d"popupBlockedSubTitle"\x3eCanva just needs permission to open multiple tabs in your browser.\x3c/h2\x3e\x3c/header\x3e\x3col class\x3d"popupBlockedSteps"\x3e\x3cli class\x3d"popupBlockedStep"\x3e\x3ch3 class\x3d"popupBlockedStepLabel"\x3eStep 1\x3c/h3\x3e\x3cp class\x3d"popupBlockedStepDirections"\x3e\x3c/p\x3e\x3c/li\x3e\x3cli class\x3d"popupBlockedStep"\x3e\x3ch3 class\x3d"popupBlockedStepLabel"\x3eStep 2\x3c/h3\x3e\x3cp class\x3d"popupBlockedStepDirections"\x3eTry resizing again by hitting the magic button in the \x3cbutton class\x3d"buttonLink button popupBlockedFileMenuLink"\x3eFile menu\x3c/button\x3e\x3c/p\x3e\x3c/li\x3e\x3c/ol\x3e');
    f.kZ = _.template("\x3cspan\x3eClick the pop-up blocker icon at the top of your browser and allow pop-ups.\x3c/span\x3e");
    f.J0 = _.template("\x3cspan\x3eClick \x3cstrong\x3e\x26lsquo;Options for this site\x26rsquo;\x3c/strong\x3e and then \x3cstrong\x3e\x26lsquo;Always allow\x26rsquo;\x3c/strong\x3e in the Internet Explorer alert below.\x3c/span\x3e");

    function j_() {}
    j_ = Backbone.View.extend({
        id: "submitLayoutDialog",
        template: _.template('\x3cdiv class\x3d"dialog preparing"\x3e\x3cdiv class\x3d"flowProgress"\x3e\x3c/div\x3e\x3ch2 class\x3d"dialogTitle"\x3eSubmit your \x3c%\x3d typeDescription %\x3e\x3c/h2\x3e\x3cdiv class\x3d"content"\x3e\x3c/div\x3e\x3c/div\x3e'),
        m1: _.template('\x3cfieldset class\x3d"appears layoutMetadata"\x3e\x3clabel\x3eTitle of your \x3c%\x3d typeDescription %\x3e\x3c/label\x3e\x3cinput class\x3d"layoutMetadataTitle textInput" name\x3d"layoutTitle" value\x3d"\x3c%\x3d title %\x3e"\x3e\x3clabel\x3eKeywords (comma separated)\x3c/label\x3e\x3ctextarea class\x3d"layoutMetadataKeywords textInput" name\x3d"layoutKeywords" rows\x3d"3" placeholder\x3d"Help your \x3c%\x3d typeDescription %\x3e to be found when searching"\x3e\x3c%\x3d keywords %\x3e\x3c/textarea\x3e\x3clabel\x3eLocale\x3c/label\x3e\x3cdiv class\x3d"submitLayoutClear"\x3e\x3c/div\x3e\x3cspan class\x3d"select"\x3e\x3cselect class\x3d"layoutMetadataLocale"\x3e\x3c% locales.forEach(function(locale) { %\x3e\x3coption data-locale\x3d"\x3c%- locale.key %\x3e" \x3c%- locale.key \x3d\x3d\x3d documentLocale ? "selected" : "" %\x3e\x3e\x3c%- locale.description %\x3e\x3c/option\x3e\x3c% }); %\x3e\x3c/select\x3e\x3c/span\x3e\x3c/fieldset\x3e'),
        iZ: _.template('\x3cfieldset class\x3d"appears elementMetadata"\x3e\x3cdiv class\x3d"thumb"\x3e\x3c%\x3d thumb %\x3e\x3c/div\x3e\x3cdiv class\x3d"labels"\x3e\x3clabel for\x3d"elementTitle\x3c%\x3d index %\x3e"\x3eTitle\x3c/label\x3e\x3clabel for\x3d"elementDescription\x3c%\x3d index %\x3e"\x3eDescription\x3c/label\x3e\x3clabel for\x3d"elementKeywords\x3c%\x3d index %\x3e"\x3eKeywords\x3c/label\x3e\x3c/div\x3e\x3cdiv class\x3d"inputs"\x3e\x3cinput type\x3d"hidden" class\x3d"elementMetadataMedia" name\x3d"elementMedia\x3c%\x3d index %\x3e" value\x3d"\x3c%\x3d media %\x3e" /\x3e\x3cinput type\x3d"hidden" class\x3d"elementMetadataVersion" name\x3d"elementVersion\x3c%\x3d index %\x3e" value\x3d"\x3c%\x3d version %\x3e" /\x3e\x3cinput class\x3d"elementMetadataTitle" name\x3d"elementTitle\x3c%\x3d index %\x3e" /\x3e\x3cinput class\x3d"elementMetadataDescription" name\x3d"elementDescription\x3c%\x3d index %\x3e" /\x3e\x3cinput class\x3d"elementMetadataKeywords" name\x3d"elementKeywords\x3c%\x3d index %\x3e" /\x3e\x3c/div\x3e\x3cspan class\x3d"select"\x3e\x3cselect class\x3d"elementMetadataPrice" name\x3d"elementPrice\x3c%\x3d index %\x3e" id\x3d"elementPriceSelect"\x3e\x3coption value\x3d"FREE"\x3eFREE\x3c/option\x3e\x3coption value\x3d"PAID"\x3ePAID\x3c/option\x3e\x3c/select\x3e\x3c/span\x3e\x3c/fieldset\x3e')
    });
    f = j_.prototype;
    f.events = function () {
        return {
            "click .button.ok": this.ok,
            "click .button.reviewElements": this.lO,
            "click .button.submitChildrenMetadata": this.S6,
            "click .button.submitMetadata": this.T6,
            "click .close": this.cancel
        }
    };
    f.remove = function () {
        var a = this;
        this.$(".dialog").addClass("disappearing");
        this.Nd.hide();
        this.trigger("hide");
        window.setTimeout(function () {
            a.trigger("remove", a);
            Backbone.View.prototype.remove.call(a)
        }, 300)
    };
    f.initialize = function (a) {
        function b() {
            c.uh.cancel();
            c.off("hide", b)
        }
        var c = this;
        this.Nd = new Tx({
            style: Ux,
            aa: Rk
        });
        this.listenTo(this.Nd, "maskClick", this.cancel);
        this.document = a.document;
        this.uh = a.workflow;
        this.Iw = a.typeDescription;
        this.JW = a.showProgress;
        this.Be = a.keywords;
        this.on("hide", b);
        this.mU = new f0({
            O6: Object.freeze([{
                J: ["pricing"],
                label: this.Iw
            }, {
                J: ["pricingChildren"],
                label: "Media"
            }, {
                J: ["complete"],
                label: "Complete"
            }])
        });
        this.listenTo(this.uh, "change:state", this.f4);
        var d = a.availableLocales || {};
        this.locales = Object.keys(d).sort().map(function (a) {
            return {
                key: a,
                description: d[a]
            }
        });
        this.Pw = a.userLocale
    };
    f.render = function () {
        this.$el.html(this.template({
            typeDescription: this.Iw
        }));
        return this
    };

    function g0(a, b, c) {
        b = $('\x3cform class\x3d"metadataForm"\x3e' + b + "\x3c/form\x3e");
        a.$(".content").empty().append(b);
        h0(a);
        i0(a, c)
    }

    function j0(a) {
        var b = a.document.Jb(),
            c = a.Be && 0 < a.Be.length ? a.Be : a.document.Zk(),
            d = a.document.qg();
        0 === c.length && (c = ES(b));
        d || (d = a.Pw ? a.Pw : a.locales[0].key);
        b = a.m1({
            title: b.ep(),
            typeDescription: a.Iw,
            keywords: c.join(", "),
            locales: a.locales,
            documentLocale: d
        });
        window.setTimeout(function () {
            a.$(".dialog").removeClass("preparing")
        }, 300);
        g0(a, b, "submitMetadata")
    }

    function k0(a) {
        function b(a, b) {
            var c = a.Va(),
                l = c.Dc()[aC],
                m = new U(0, 0, l.D(), l.F());
            $g(m, e);
            m = "width:" + m.D() + "px;height:" + m.F() + "px;margin-top:" + m.N() + "px;margin-left:" + m.Y() + "px;";
            m = $('\x3cimg class\x3d"thumbImage" style\x3d"' + m + '"\x3e');
            m.attr("src", l.Aa());
            return d.iZ({
                media: a.G(),
                version: c.getVersion(),
                index: b,
                thumb: m.clone().wrap("\x3cdiv\x3e\x3c/div\x3e").parent().html()
            })
        }

        function c() {
            window.setTimeout(function () {
                d.$(".thumbImage").addClass("appeared")
            }, 1E3)
        }
        var d = a,
            e = new U(0, 0, 118, 118);
        q_(a.uh, function (a) {
            a && 0 !== a.length ? (d.$(".dialog").css("width", "45em"),
                g0(d, a.map(b).join(""), "submitChildrenMetadata"),
                2 < a.length && (d.$(".metadataForm").css("height", "24em").addClass("scrolling"),
                    d.$(".content").prepend('\x3cp class\x3d"elementCount"\x3ePlease provide information for these ' + a.length + " elements. Scroll down.\x3c/p\x3e")),
                c()) : (a = d.uh,
                a.EI = [],
                a.eg.transition("price"))
        })
    }

    function h0(a) {
        window.setTimeout(function () {
            a.$(".appears").addClass("appeared")
        }, 300)
    }

    function l0(a) {
        a.$(".dialog").css("width", "30em");
        a.$(".dialogTitle").text(a.Iw + " submitted!");
        a.$(".content").html('\x3cdiv class\x3d"reviewNotice"\x3e\x3cp\x3e\x3cstrong\x3eYour ' + a.Iw + " has been submitted!\x3c/strong\x3e\x3cbr\x3e\x3c/p\x3e\x3c/div\x3e");
        window.setTimeout(function () {
            var b = $('\x3cdiv class\x3d"appears button ok awesome"\x3eAwesome!\x3c/div\x3e');
            a.$(".content").append(b);
            h0(a)
        }, 300)
    }

    function i0(a, b) {
        var c = $('\x3cdiv class\x3d"appears button forward ' + b + '"\x3eNext \x26rarr;\x3c/div\x3e');
        window.setTimeout(function () {
            a.$(".content").append(c);
            h0(a)
        }, 300)
    }
    f.f4 = function (a, b) {
        switch (b) {
            case "pricing":
                j0(this);
                break;
            case "pricingChildren":
                k0(this);
                break;
            case "reviewingSubmission":
                a = this.uh;
                a.eg.transition("submit");
                try {
                    a.U6(a.EI),
                        a.eg.transition("success")
                } catch (c) {
                    throw a.eg.transition("error"),
                        c;
                }
                break;
            case "submitted":
                this.$(".dialog").css("width", "30em");
                this.$(".content").html('\x3cdiv class\x3d"reviewNotice"\x3e\x3cp\x3e\x3cstrong\x3eYour ' + this.Iw + " is being packaged up for our reviewers.\x3c/strong\x3e\x3cbr\x3e\x3c/p\x3e\x3c/div\x3e");
                break;
            case "completed":
                l0(this);
                break;
            case "failed":
                this.$(".dialog").css("width", "30em"),
                    a = this.$(".content"),
                    a.html('\x3cdiv class\x3d"reviewNotice"\x3e\x3cp\x3eSomething went wrong submitting your design.\x3cbr\x3e\x3cbr\x3ePlease try again later.\x3c/p\x3e\x3c/div\x3e'),
                    a.find(".reviewNotice").css("text-align", "center")
        }
        this.mU.render(b)
    };
    f.show = function () {
        this.render();
        this.Nd.show(this.el);
        this.JW && this.mU.show(this.$el.find(".flowProgress"));
        this.uh.start()
    };
    f.cancel = function () {
        this.remove()
    };
    f.ok = function () {
        this.remove()
    };
    f.T6 = function () {
        var a = this;
        m0(this.$(".layoutMetadata"), function (b) {
            p_(a.uh, b)
        })
    };
    f.lO = function () {
        this.uh.lO()
    };
    f.S6 = function () {
        var a = [],
            b = this,
            c = this.$(".elementMetadata"),
            d = _.after(c.length, function () {
                var c = b.uh;
                c.EI = a;
                c.eg.transition("price")
            });
        c.each(function () {
            var b = $(this);
            n0(b, function (b) {
                a.push(b);
                d()
            })
        })
    };

    function n0(a, b) {
        var c = "" + a.find(".elementMetadataMedia").val(),
            d = parseFloat("" + a.find(".elementMetadataVersion").val()),
            e = "" + a.find(".elementMetadataTitle").val(),
            g = "" + a.find(".elementMetadataDescription").val(),
            h = o0("" + a.find(".elementMetadataKeywords").val());
        a = a.find(".elementMetadataPrice").val();
        b({
            media: c,
            version: d,
            title: e,
            description: g,
            keywords: h,
            price: a
        })
    }

    function m0(a, b) {
        var c = a.find(".layoutMetadataTitle").val(),
            d = o0("" + a.find(".layoutMetadataKeywords").val());
        a = a.find(".layoutMetadataLocale :selected").data("locale");
        b({
            title: c,
            keywords: d,
            locale: a
        })
    }

    function o0(a) {
        return a ? a.split(/[,;]+/g).filter(Boolean).map(function (a) {
            return a.trim()
        }) : []
    };

    function p0(a) {
        this.Zl = a.Zl;
        this.Z = a.Z;
        this.ie = a.ie || void 0;
        this.Re = a.Re;
        this.Kf = a.Kf;
        this.view = a.view;
        this.listenTo(this.view, "input", this.Mj);
        this.listenTo(this.view, "requestSubmit", function () {
            this.trigger("requestSubmit")
        })
    }

    function JT(a) {
        var b = new q0({
            ux: !1 !== a.ux,
            ec: a.ec
        });
        return {
            bc: new p0({
                Zl: a.Zl,
                Z: a.Z,
                ie: a.ie,
                Re: a.Re,
                Kf: a.Kf,
                view: b
            }),
            view: b
        }
    }
    f = p0.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.refresh = function () {
        this.view.render();
        this.view.Xv(this.Re);
        this.ie && this.view.Fl(this.ie);
        return this
    };
    f.remove = function () {
        this.stopListening();
        this.view.remove()
    };
    f.Fl = function (a) {
        this.ie = a;
        this.view.Fl(a);
        return this
    };
    f.Xv = function (a) {
        this.Re = a;
        this.view.Xv(a);
        return this
    };
    f.Ny = P.method(function (a) {
        function b(a) {
            return a.Gh
        }
        return !this.ie || this.view.ED || a ? (a = r0(this.view),
            s0(a),
            this.A7(a).then(b).tap(this.Fl.bind(this))) : this.ie
    });
    f.Mj = function () {
        this.ie && !r0(this.view) && this.Fl(this.ie);
        this.trigger("input", this.view.ED)
    };
    f.A7 = P.method(function (a) {
        var b = this;
        return this.Kf.createToken({
            Wq: a.Wq,
            pS: a.VD,
            qS: a.WD,
            Qi: a.Qi
        }).then(function (a) {
            var d = b.Zl,
                e = b.Z;
            return Qi(d.fa, "/billing/brands/" + encodeURIComponent(e) + "/account", {
                brand: e,
                stripeToken: a
            }).catch(Ji).get(0).get("account").then(nh).catch(d.vz, d.Lm)
        })
    });

    function s0(a) {
        if (!a)
            throw new zS;
        if (!(a.Wq && 3 <= a.Wq.length && 4 >= a.Wq.length))
            throw new sS;
        if (! function () {
                var b = a.VD && parseInt(a.VD, 10);
                return b && 1 <= b && 12 >= b
            }())
            throw new tS;
        if (!a.WD || !parseInt(a.WD, 10))
            throw new uS;
        if (! function () {
                var b = a.Qi && a.Qi.replace(/[\s-]+/g, "");
                return b && 13 <= b.length && 19 >= b.length
            }())
            throw new vS;
    };

    function t0(a) {
        soy.asserts.assertType(goog.isString(a.tk) || a.tk instanceof goog.soy.data.SanitizedContent, "cardNumberPlaceholder", a.tk, "string|goog.soy.data.SanitizedContent");
        var b = a.tk;
        soy.asserts.assertType(goog.isString(a.Ck) || a.Ck instanceof goog.soy.data.SanitizedContent, "cvcPlaceholder", a.Ck, "string|goog.soy.data.SanitizedContent");
        var c = a.Ck;
        soy.asserts.assertType(goog.isString(a.ol) || a.ol instanceof goog.soy.data.SanitizedContent, "monthPlaceholder", a.ol, "string|goog.soy.data.SanitizedContent");
        var d = a.ol;
        soy.asserts.assertType(goog.isString(a.Pl) || a.Pl instanceof goog.soy.data.SanitizedContent, "yearPlaceholder", a.Pl, "string|goog.soy.data.SanitizedContent");
        a = a.Pl;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(u0({
            id: "ccNumber",
            name: "ccNumber",
            type: "text",
            placeholder: b,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-9]{4}([ -]+[0-9]{1,4}){3,5} ?" maxlength\x3d"23" autocomplete\x3d"cc-number" required')
        }) + "\x3cspan class\x3d'creditCardExpiry'\x3e" + u0({
            id: "expMonth",
            name: "expMonth",
            type: "text",
            placeholder: d,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[01]?[0-9]" maxlength\x3d"2" autocomplete\x3d"cc-exp-month" required')
        }) + u0({
            id: "expYear",
            name: "expYear",
            type: "text",
            placeholder: a,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-3][0-9]" maxlength\x3d"2" autocomplete\x3d"cc-exp-year" required')
        }) + "\x3c/span\x3e" + u0({
            id: "cvc",
            name: "cvc",
            type: "text",
            placeholder: c,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('pattern\x3d"[0-9]{3,4}" maxlength\x3d"4" autocomplete\x3d"cc-csc" required')
        }))
    };

    function q0(a) {
        Backbone.View.call(this, {
            className: "creditCardEditor"
        });
        this.ED = !1;
        this.ec = a.ec;
        this.ux = a.ux
    }
    t(q0, Backbone.View);
    f = q0.prototype;
    f.events = function () {
        return {
            "input #ccNumber": this.N1,
            "keydown #expMonth": this.v3,
            "input #expMonth": this.u3,
            input: this.Mj,
            "keydown input": this.LM,
            "focus input:not([readonly])": this.iv,
            "blur input": this.Qr
        }
    };

    function r0(a) {
        a = {
            Wq: a.$("#cvc").val().trim(),
            VD: a.$("#expMonth").val().trim(),
            WD: a.$("#expYear").val().trim(),
            Qi: a.$("#ccNumber").val().trim()
        };
        return a.Wq.length || a.VD.length || a.WD.length || a.Qi.length ? a : null
    }
    f.Fl = function (a) {
        this.$el.addClass("prefilled");
        this.$("#ccNumber").val("").attr("placeholder", "" + a.Dz);
        this.$("#expMonth").val("").attr("placeholder", "");
        this.$("#expYear").val("").attr("placeholder", "");
        this.$("#cvc").val("").attr("placeholder", "");
        this.ED = !1;
        this.$("#ccNumber").removeAttr("autofocus")
    };
    f.Xv = function (a) {
        this.$("input").prop("readonly", !a);
        v0(this)
    };
    f.render = function () {
        var a;
        a = {
            tk: this.ec.tk(),
            ol: this.ec.ol(),
            Pl: this.ec.Pl(),
            Ck: this.ec.Ck()
        };
        soy.asserts.assertType(goog.isString(a.tk) || a.tk instanceof goog.soy.data.SanitizedContent, "cardNumberPlaceholder", a.tk, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Ck) || a.Ck instanceof goog.soy.data.SanitizedContent, "cvcPlaceholder", a.Ck, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.ol) || a.ol instanceof goog.soy.data.SanitizedContent, "monthPlaceholder", a.ol, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Pl) || a.Pl instanceof goog.soy.data.SanitizedContent, "yearPlaceholder", a.Pl, "string|goog.soy.data.SanitizedContent");
        a = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"creditCardEditView creditCardInput"\x3e' + t0(a) + "\x3c/div\x3e");
        this.$el.html(a.toString());
        v0(this);
        return this
    };

    function v0(a) {
        var b = 0 === a.$("input").filter(function () {
                return this.readOnly
            }).length,
            c = a.$("#ccNumber");
        a.ux && b ? c.prop("autofocus", !0) : c.removeAttr("autofocus")
    }

    function w0(a) {
        a.$("#ccNumber").attr("placeholder", a.ec.tk());
        a.$("#expMonth").attr("placeholder", a.ec.ol());
        a.$("#expYear").attr("placeholder", a.ec.Pl());
        a.$("#cvc").attr("placeholder", a.ec.Ck())
    }
    f.Mj = function (a) {
        a = $(a.target);
        var b = a.data("oldValue"),
            c = a.val();
        b !== c ? (a.data("oldValue", c),
            a = !0) : a = !1;
        a && (this.$el.hasClass("prefilled") && w0(this),
            this.$el.removeClass("prefilled"),
            this.ED = !0,
            this.trigger("input"))
    };
    f.LM = function (a) {
        13 === a.keyCode && (this.trigger("requestSubmit"),
            a.preventDefault())
    };
    f.iv = function () {
        this.$el.addClass("focused");
        w0(this)
    };
    f.Qr = function () {
        this.$el.removeClass("focused")
    };
    f.N1 = function (a) {
        if ("IE" != UAParser().browser.name) {
            a = a.target;
            var b = a.selectionEnd,
                c = a.value.length;
            a.value = a.value.replace(/[^\d]/g, "").replace(/(.{4})/g, "$1 ").trim();
            var d = c !== a.value.length,
                c = " " === a.value.charAt(c - 1);
            a.selectionEnd = b + (" " === a.value.charAt(b - 1) && c && d ? 1 : 0)
        }
    };
    f.v3 = function (a) {
        var b = this.$("#expMonth"),
            c = b.val(),
            d = this.$("#expYear"),
            e = String.fromCharCode(a.which);
        "" === c && e.match(/[2-9]/) ? (a.preventDefault(),
            b.val("0" + e),
            d.focus()) : -1 < [191, 32, 9].indexOf(a.which) && (a.preventDefault(),
            1 === c.length && b.val("0" + c),
            d.focus())
    };
    f.u3 = function () {
        2 === this.$("#expMonth").val().length && this.$("#expYear").focus()
    };

    function aZ(a) {
        soy.asserts.assertType(null == a.block || goog.isBoolean(a.block) || 1 === a.block || 0 === a.block, "block", a.block, "boolean|null|undefined");
        var b = a.block;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var c = a.J;
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        var d = a.disabled;
        soy.asserts.assertType(null == a.id || a.id instanceof goog.soy.data.SanitizedContent || goog.isString(a.id), "id", a.id, "null|string|undefined");
        var e = a.id;
        soy.asserts.assertType(null == a.name || a.name instanceof goog.soy.data.SanitizedContent || goog.isString(a.name), "name", a.name, "null|string|undefined");
        var g = a.name;
        a = goog.asserts.assertArray(a.options, "expected parameter 'options' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");
        d = '\x3cspan class\x3d"select' + (b ? " selectBlock" : "") + (c ? " " + soy.$$escapeHtmlAttribute(c) : "") + '"\x3e\x3cselect ' + (d ? " disabled" : "") + (e ? ' id\x3d"' + soy.$$escapeHtmlAttribute(e) + '"' : "") + (g ? ' name\x3d"' + soy.$$escapeHtmlAttribute(g) + '"' : "") + "\x3e";
        b = a.length;
        for (c = 0; c < b; c++) {
            var h = a[c];
            soy.asserts.assertType(null == h.disabled || goog.isBoolean(h.disabled) || 1 === h.disabled || 0 === h.disabled, "disabled", h.disabled, "boolean|null|undefined");
            e = h.disabled;
            soy.asserts.assertType(null == h.selected || goog.isBoolean(h.selected) || 1 === h.selected || 0 === h.selected, "selected", h.selected, "boolean|null|undefined");
            g = h.selected;
            soy.asserts.assertType(goog.isString(h.text) || h.text instanceof goog.soy.data.SanitizedContent, "text", h.text, "string|goog.soy.data.SanitizedContent");
            var k = h.text;
            soy.asserts.assertType(null == h.value || h.value instanceof goog.soy.data.SanitizedContent || goog.isString(h.value), "value", h.value, "null|string|undefined");
            h = h.value;
            e = soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3coption " + (e ? " disabled" : "") + (g ? " selected" : "") + (h || "" == h ? ' value\x3d"' + soy.$$escapeHtmlAttribute(h) + '"' : "") + "\x3e" + soy.$$escapeHtml(k) + "\x3c/option\x3e");
            d += e
        }
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(d + "\x3c/select\x3e\x3c/span\x3e")
    };

    function x0(a) {
        soy.asserts.assertType(goog.isString(a.title) || a.title instanceof goog.soy.data.SanitizedContent, "title", a.title, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.$$escapeHtml(a.title))
    }

    function y0(a) {
        var b;
        b = b || {};
        soy.asserts.assertType(goog.isString(a.lo) || a.lo instanceof goog.soy.data.SanitizedContent, "actionCloseHint", a.lo, "string|goog.soy.data.SanitizedContent");
        var c = a.lo;
        soy.asserts.assertType(goog.isString(a.Jg) || a.Jg instanceof goog.soy.data.SanitizedContent, "actionClose", a.Jg, "string|goog.soy.data.SanitizedContent");
        a = a.Jg;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"dialog fluidDialog preparing"\x3e\x3ch2 class\x3d"center"\x3e\x3c/h2\x3e\x3cdiv class\x3d"content"\x3e\x3c/div\x3e\x3cdiv class\x3d"dialog__footer" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + 'display: none;"\x3e\x3cdiv class\x3d"dialog__footer__content"\x3e\x3c/div\x3e\x3c/div\x3e\x3ca class\x3d"close" href\x3d"#" title\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e' + soy.$$escapeHtml(a) + "\x3c/a\x3e\x3c/div\x3e")
    };

    function z0(a) {
        var b = this;
        Backbone.View.call(this, {
            id: a.id,
            className: a.className,
            events: {
                "click .close": function () {
                    b.trigger("cancel")
                }
            }
        });
        this.Nd = a.Nd;
        this.aa = a.aa;
        this.iJ = this.jg = null;
        this.OV = 0;
        this.Nd.on("maskClick", function () {
            b.trigger("cancel")
        })
    }
    t(z0, Backbone.View);
    f = z0.prototype;
    f.v2 = function () {
        this.trigger("ok")
    };
    f.yM = function () {
        this.trigger("retry")
    };

    function A0(a, b) {
        var c = b.cl ? b.cl() : b;
        if (c === a.jg)
            return P.resolve(!1);
        a.jg && a.stopListening(a.jg);
        a.jg = c;
        a.iJ = b;
        a.listenTo(a.jg, "contentResize", a.Dt);
        a.listenTo(a.jg, "done", a.v2);
        a.listenTo(a.jg, "retry", a.yM);
        return a.iJ.refresh().return(!0)
    }
    f.render = function (a) {
        this.$el.html(y0(a).toString());
        return this
    };

    function B0(a, b) {
        return new P(function (c) {
            var d = a.$(".dialog");
            d.hasClass("preparing") && (a.Nd.show(a.el),
                a.aa.requestAnimationFrame(function () {
                    d.removeClass("preparing")
                }));
            a.$el.queue("pageQueue", function (e) {
                A0(a, b).then(function (b) {
                    C0(a);
                    var h = d.find(".content"),
                        k = null;
                    h.is(":empty") ? h.append(a.jg.$el) : b && (k = $('\x3cdiv class\x3d"content new"\x3e').append(a.jg.$el));
                    a.Dt(k).then(c);
                    a.aa.setTimeout(function () {
                        a.OV--;
                        e()
                    }, 1E3)
                })
            });
            1 == ++a.OV && a.$el.dequeue("pageQueue")
        })
    }

    function C0(a) {
        var b = a.jg.Ao(a.iJ.Im());
        a.$(".dialog \x3e h2").html(b)
    }

    function D0(a, b) {
        a.$(".dialog__footer__content").html(b)
    }
    f.iz = function () {
        this.$(".dialog__footer").addClass("dialog__footer--hide").removeClass("dialog__footer--appear");
        this.Dt()
    };
    f.mw = function () {
        this.$(".dialog__footer").show().removeClass("dialog__footer--hide").addClass("dialog__footer--appear");
        this.Dt()
    };
    f.Dt = function (a) {
        var b = this.$(".dialog__footer"),
            c = !1;
        b.hasClass("dialog__footer--appear") ? b.hasClass("dialog__footer--pinned") && (c = !0,
            b.removeClass("dialog__footer--pinned")) : b.addClass("dialog__footer--pinned");
        a = E0(this, a).then(function () {
            b.hasClass("dialog__footer--appear") && b.addClass("dialog__footer--pinned")
        });
        b.hasClass("dialog__footer--appear") ? c && b.addClass("dialog__footer--pinned") : b.removeClass("dialog__footer--pinned");
        return a
    };

    function E0(a, b) {
        return new P(function (c) {
            var d = a.$(".dialog");
            if (!(0 < d.find(".content.replacing").length) || b) {
                var e = d.outerHeight();
                d.css({
                    transition: "none",
                    height: "auto"
                });
                var g;
                g = b ? F0(a, b) : d.outerHeight();
                var h = wf(d[0]);
                d.css({
                    height: e
                });
                vf(d);
                d.css({
                    transition: "",
                    height: g
                });
                c(h)
            }
        })
    }

    function F0(a, b) {
        var c = a.$(".dialog"),
            d = c.find(".content");
        a = d.outerHeight();
        var e = $('\x3cdiv class\x3d"content new"\x3e');
        b.insertBefore(d);
        d.addClass("onTop beingReplaced");
        var c = c.outerHeight(),
            g = b.outerHeight(!0);
        b.addClass("onTop");
        e.insertAfter(d).css("height", a);
        vf(e);
        wf(e[0]).then(function () {
            d.remove();
            e.remove();
            b.removeClass("onTop")
        });
        e.css("height", g);
        Sk(function () {
            b.removeClass("new");
            e.removeClass("new")
        });
        return c
    }
    f.remove = function () {
        var a = this;
        return new P(function (b) {
            a.Nd.hide();
            a.$el.children(".dialog").addClass("disappearing");
            a.aa.setTimeout(function () {
                Backbone.View.prototype.remove.call(a);
                b()
            }, Uo.tQ)
        })
    };

    function G0(a) {
        Backbone.View.apply(this, arguments)
    }
    t(G0, Backbone.View);
    G0.prototype.Ao = function () {
        return ""
    };
    Object.defineProperties(G0, {
        extend: {
            configurable: !0,
            enumerable: !0,
            get: function () {
                return Backbone.View.extend.bind(G0)
            }
        }
    });

    function H0(a) {
        this.H = a.H;
        this.sK = a.sK
    }
    H0.prototype.LB = function (a) {
        this.track("close", {
            action: a
        })
    };
    H0.prototype.track = function (a, b) {
        this.H.track("publish_flow_" + a, _.extend(this.GK(), b))
    };
    H0.prototype.GK = function () {
        return {
            fileFormat: this.sK
        }
    };

    function I0(a) {
        soy.asserts.assertType(goog.isBoolean(a.ee) || 1 === a.ee || 0 === a.ee, "showOneTimeUse", a.ee, "boolean");
        var b = !!a.ee;
        soy.asserts.assertType(null == a.wd || a.wd instanceof goog.soy.data.SanitizedContent || goog.isString(a.wd), "oneTimeUse", a.wd, "null|string|undefined");
        var c = a.wd;
        soy.asserts.assertType(null == a.Vc || a.Vc instanceof goog.soy.data.SanitizedContent || goog.isString(a.Vc), "oneTimeUseDescription", a.Vc, "null|string|undefined");
        var d = a.Vc;
        soy.asserts.assertType(goog.isBoolean(a.fe) || 1 === a.fe || 0 === a.fe, "showRoyaltyFree", a.fe, "boolean");
        var e = !!a.fe;
        soy.asserts.assertType(null == a.Pc || a.Pc instanceof goog.soy.data.SanitizedContent || goog.isString(a.Pc), "royaltyFree", a.Pc, "null|string|undefined");
        var g = a.Pc;
        soy.asserts.assertType(null == a.Xc || a.Xc instanceof goog.soy.data.SanitizedContent || goog.isString(a.Xc), "royaltyFreeDescription", a.Xc, "null|string|undefined");
        var h = a.Xc;
        soy.asserts.assertType(goog.isBoolean(a.Eg) || 1 === a.Eg || 0 === a.Eg, "showExtended", a.Eg, "boolean");
        var k = !!a.Eg;
        soy.asserts.assertType(null == a.Fd || a.Fd instanceof goog.soy.data.SanitizedContent || goog.isString(a.Fd), "extended", a.Fd, "null|string|undefined");
        var l = a.Fd;
        soy.asserts.assertType(null == a.Ud || a.Ud instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ud), "extendedDescription", a.Ud, "null|string|undefined");
        var m = a.Ud;
        soy.asserts.assertType(goog.isString(a.Xd) || a.Xd instanceof goog.soy.data.SanitizedContent, "noLicenseOptionDescription", a.Xd, "string|goog.soy.data.SanitizedContent");
        a = a.Xd;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"licensesDescription"\x3e\x3cdiv class\x3d"licensesDescription__options"\x3e' + (b || e || k ? (b ? '\x3cdiv class\x3d"licensesDescription__option licensesDescription__option--oneTime"\x3e\x3ch3\x3e' + soy.$$escapeHtml(c) + "\x3c/h3\x3e\x3cp\x3e" + soy.$$escapeHtml(d) + "\x3c/p\x3e\x3c/div\x3e" : "") + (e ? '\x3cdiv class\x3d"licensesDescription__option licensesDescription__option--royaltyFree"\x3e\x3ch3\x3e' + soy.$$escapeHtml(g) + "\x3c/h3\x3e\x3cp\x3e" + soy.$$escapeHtml(h) + "\x3c/p\x3e\x3c/div\x3e" : "") + (k ? '\x3cdiv class\x3d"licensesDescription__option licensesDescription__option--extended"\x3e\x3ch3\x3e' + soy.$$escapeHtml(l) + "\x3c/h3\x3e\x3cp\x3e" + soy.$$escapeHtml(m) + "\x3c/p\x3e\x3c/div\x3e" : "") : '\x3cdiv class\x3d"licensesDescription__noOption"\x3e' + soy.$$escapeHtml(a) + "\x3c/div\x3e") + "\x3c/div\x3e\x3c/div\x3e")
    };

    function J0(a) {
        this.$el = a
    }
    t(J0, fc);
    J0.prototype.show = function () {
        if (this.hh())
            return P.resolve();
        var a = wf(this.$el[0]);
        this.$el.addClass("paymentRestrictedOverlay--visible");
        return a
    };
    J0.prototype.hide = function () {
        if (this.hh()) {
            var a = wf(this.$el[0]);
            this.$el.removeClass("paymentRestrictedOverlay--visible");
            return a
        }
        return P.resolve()
    };
    J0.prototype.hh = function () {
        return this.$el.hasClass("paymentRestrictedOverlay--visible")
    };

    function KT(a) {
        var b = this;
        G0.call(this, {
            className: "payment",
            events: {
                "change input[name\x3dpurchaseCreditPack]": function (a) {
                    a = "yes" == $(a.target).val();
                    var d = b.$(".creditPackOptions option:selected").val();
                    b.trigger("creditPackChange", a, d)
                },
                "change .price select": function (a) {
                    a = $(a.target);
                    var d = a.closest(".license").index();
                    b.trigger("priceChange", d, a.val())
                },
                "click .licensesMore": function () {
                    return b.xM()
                },
                "click .creditPackOptions select": function (a) {
                    return K0(b, a)
                },
                "change .creditPackOptions select": function (a) {
                    return K0(b, a)
                },
                "submit .publishPagePaymentForm": function (a) {
                    a.preventDefault();
                    b.trigger("submitPayment")
                },
                "click .draft": function () {
                    b.trigger("clickDraft")
                },
                "click .paymentRestrictedOverlay__cancelButton": function () {
                    b.trigger("done")
                },
                "click .paymentRestrictedOverlay__downloadDraftButton": function () {
                    b.trigger("clickOverlayDraftButton")
                }
            }
        });
        this.Ad = a.Ad;
        this.Qg = a.Qg;
        this.lP = this.sn = null
    }
    t(KT, G0);
    f = KT.prototype;
    f.Ny = function () {
        return this.Ad.Ny()
    };
    f.render = function (a) {
        var b = this.el,
            c;
        c = c || {};
        soy.asserts.assertType(goog.isString(a.fm) || a.fm instanceof goog.soy.data.SanitizedContent, "creditAvailable", a.fm, "string|goog.soy.data.SanitizedContent");
        var d = a.fm;
        soy.asserts.assertType(a.KB instanceof soydata.SanitizedHtml || a.KB instanceof soydata.UnsanitizedText || goog.isString(a.KB), "totalCost", a.KB, "soydata.SanitizedHtml");
        var e = a.KB;
        soy.asserts.assertType(a.Pp instanceof soydata.SanitizedHtml || a.Pp instanceof soydata.UnsanitizedText || goog.isString(a.Pp), "payOption", a.Pp, "soydata.SanitizedHtml");
        var g = a.Pp;
        soy.asserts.assertType(goog.isString(a.Hd) || a.Hd instanceof goog.soy.data.SanitizedContent, "free", a.Hd, "string|goog.soy.data.SanitizedContent");
        var h = a.Hd;
        soy.asserts.assertType(goog.isString(a.hs) || a.hs instanceof goog.soy.data.SanitizedContent, "purchased", a.hs, "string|goog.soy.data.SanitizedContent");
        var k = a.hs;
        soy.asserts.assertType(goog.isString(a.Pu) || a.Pu instanceof goog.soy.data.SanitizedContent, "layoutTitle", a.Pu, "string|goog.soy.data.SanitizedContent");
        var l = a.Pu;
        soy.asserts.assertType(goog.isString(a.SG) || a.SG instanceof goog.soy.data.SanitizedContent, "specialOffer", a.SG, "string|goog.soy.data.SanitizedContent");
        var m = a.SG;
        soy.asserts.assertType(a.rz instanceof soydata.SanitizedHtml || a.rz instanceof soydata.UnsanitizedText || goog.isString(a.rz), "introHtml", a.rz, "soydata.SanitizedHtml");
        var n = a.rz;
        soy.asserts.assertType(goog.isString(a.If) || a.If instanceof goog.soy.data.SanitizedContent, "purchaseButton", a.If, "string|goog.soy.data.SanitizedContent");
        var p = a.If;
        soy.asserts.assertType(goog.isString(a.En) || a.En instanceof goog.soy.data.SanitizedContent, "restrictedOverlayHeading", a.En, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Bg) || a.Bg instanceof goog.soy.data.SanitizedContent, "restrictedOverlayMessage", a.Bg, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Dn) || a.Dn instanceof goog.soy.data.SanitizedContent, "restrictedOverlayDraftButton", a.Dn, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Cn) || a.Cn instanceof goog.soy.data.SanitizedContent, "restrictedOverlayCancelButton", a.Cn, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.df) || 1 === a.df || 0 === a.df, "showDraft", a.df, "boolean");
        var r = goog.asserts.assertArray(a.Vh, "expected parameter 'purchaseLicenses' of type list\x3c[contributedBy: string, expirationLabel: null|string, hasPaidLicense: bool, isFree: bool, isLayout: bool, paidLicenseTypeLabel: string, purchaseOptions: list\x3c[disabled: null, selected: bool, text: string, value: string]\x3e, thumbnailClass: string, thumbnailUrl: string, title: string]\x3e."),
            u = goog.asserts.assertArray(a.Sx, "expected parameter 'creditPacks' of type list\x3c[disabled: null, selected: null, text: string, value: string]\x3e.");
        soy.asserts.assertType(goog.isString(a.En) || a.En instanceof goog.soy.data.SanitizedContent, "restrictedOverlayHeading", a.En, "string|goog.soy.data.SanitizedContent");
        var v = a.En;
        soy.asserts.assertType(goog.isString(a.Bg) || a.Bg instanceof goog.soy.data.SanitizedContent, "restrictedOverlayMessage", a.Bg, "string|goog.soy.data.SanitizedContent");
        var y = a.Bg;
        soy.asserts.assertType(goog.isString(a.Dn) || a.Dn instanceof goog.soy.data.SanitizedContent, "restrictedOverlayDraftButton", a.Dn, "string|goog.soy.data.SanitizedContent");
        var q = a.Dn;
        soy.asserts.assertType(goog.isString(a.Cn) || a.Cn instanceof goog.soy.data.SanitizedContent, "restrictedOverlayCancelButton", a.Cn, "string|goog.soy.data.SanitizedContent");
        var x = a.Cn;
        soy.asserts.assertType(goog.isBoolean(a.df) || 1 === a.df || 0 === a.df, "showDraft", a.df, "boolean");
        a = !!a.df;
        n = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"paymentRestrictedOverlay"\x3e\x3csection class\x3d"paymentRestrictedOverlay__inner"\x3e\x3cspan class\x3d"paymentRestrictedOverlay__icon"\x3e' + vW() + "\x3c/span\x3e\x3ch2\x3e" + soy.$$escapeHtml(v) + "\x3c/h2\x3e\x3cp\x3e" + soy.$$escapeHtml(y) + '\x3c/p\x3e\x3cdiv class\x3d"paymentRestrictedOverlay__buttons"\x3e' + (a ? bZ({
            J: "paymentRestrictedOverlay__downloadDraftButton",
            text: q
        }) : "") + bZ({
            J: soydata.$$markUnsanitizedTextForInternalBlocks((a ? "buttonSecondary " : "") + "paymentRestrictedOverlay__cancelButton"),
            text: x
        }) + "\x3c/div\x3e\x3c/section\x3e\x3c/div\x3e") + '\x3csection class\x3d"info"\x3e\x3cp class\x3d"intro"\x3e' + soy.$$escapeHtml(n) + '\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"itemList"\x3e\x3ctable id\x3d"itemList"\x3e';
        v = r.length;
        for (y = 0; y < v; y++)
            q = r[y],
            n += '\x3ctr class\x3d"license"\x3e\x3ctd class\x3d"thumbnail"\x3e\x3cdiv class\x3d"inner ' + soy.$$escapeHtmlAttribute(q.f7) + '" style\x3d"' + (c.kc ? "/*" + c.kc + "*//*" + c.kc + "*/" : "") + "background-image: url('" + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(q.fg)) + '\');"\x3e\x3c/div\x3e\x3c/td\x3e\x3ctd class\x3d"info"\x3e' + (q.WE ? '\x3cdiv class\x3d"title"\x3e' + soy.$$escapeHtml(l) + "\x3c/span\x3e\x3c/div\x3e" : '\x3cdiv class\x3d"title"\x3e' + soy.$$escapeHtml(q.title) + '\x3c/div\x3e\x3cdiv class\x3d"by"\x3e' + soy.$$escapeHtml(q.Pq) + "\x3c/div\x3e") + '\x3c/td\x3e\x3ctd class\x3d"price"\x3e' + (q.Hu ? soy.$$escapeHtml(h) : q.Mm ? '\x3cdiv class\x3d"state"\x3e' + soy.$$escapeHtml(k) + '\x3c/div\x3e\x3cdiv class\x3d"type"\x3e' + soy.$$escapeHtml(q.XF) + (q.oy ? " - " + soy.$$escapeHtml(q.oy) : "") + "\x3c/div\x3e" : 1 == q.gs.length ? soy.$$escapeHtml(q.gs[0].text) : 1 < q.gs.length ? '\x3cdiv class\x3d"select"\x3e' + aZ({
                options: q.gs
            }) + "\x3c/div\x3e" : "") + "\x3c/tr\x3e";
        n += '\x3c/table\x3e\x3c/section\x3e\x3csection class\x3d"total"\x3e\x3cp class\x3d"creditRemaining"\x3e' + soy.$$escapeHtml(d) + '\x3c/p\x3e\x3cp class\x3d"amount"\x3e\x3cspan class\x3d"totalCost"\x3e' + soy.$$escapeHtml(e) + '\x3c/span\x3e\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"creditPacks"\x3e\x3cform\x3e\x3cdiv class\x3d"prepay"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"purchaseCreditPack" value\x3d"yes"\x3e ' + soy.$$escapeHtml(m) + ':\x3c/label\x3e\x3cdiv class\x3d"creditPackOptions"\x3e' + aZ({
            options: u
        }) + '\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"prepay"\x3e\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"purchaseCreditPack" value\x3d"no" checked\x3d"checked"\x3e \x3cspan class\x3d"payOption"\x3e' + soy.$$escapeHtml(g) + '\x3c/span\x3e\x3c/label\x3e\x3c/div\x3e\x3c/form\x3e\x3c/section\x3e\x3csection class\x3d"simpleTotal"\x3e\x3cdiv class\x3d"simpleTotalPayOption"\x3e' + soy.$$escapeHtml(g) + '\x3c/div\x3e\x3c/section\x3e\x3cform class\x3d"publishPagePaymentForm"\x3e\x3cdiv class\x3d"creditCardContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"savedTeamCard"\x3e\x3c/div\x3e\x3cdiv class\x3d"actions"\x3e' + bZ({
            J: "paymentPageSubmitButton buttonSubmittable",
            type: "submit",
            text: p
        }) + "\x3c/div\x3e\x3c/div\x3e";
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml(n);
        b.innerHTML = c;
        this.Ad.refresh();
        this.$(".creditCardContainer").html(this.Qg.$el);
        this.sn = this.$(".publishPagePaymentForm");
        this.lP = this.sn.find("button[type\x3dsubmit]");
        return this
    };
    f.remove = function () {
        this.Ad.remove()
    };

    function K0(a, b) {
        a.trigger("creditPackSelect", $(b.target).val())
    }
    f.xM = function () {
        this.trigger("licensesMore")
    };

    function L0(a) {
        a.$(".creditPacks").hide();
        a.trigger("contentResize")
    }

    function M0(a) {
        a.$(".creditPacks").show();
        a.trigger("contentResize")
    }

    function N0(a) {
        a.$(".simpleTotal").hide();
        a.trigger("contentResize")
    }

    function O0(a) {
        a.$(".simpleTotal").show();
        a.trigger("contentResize")
    }

    function P0(a) {
        a.$(".creditCardContainer").hide();
        a.$(".publishPagePaymentForm").attr("novalidate", "");
        a.trigger("contentResize")
    }

    function Q0(a) {
        a.$(".creditCardContainer").show();
        a.$(".publishPagePaymentForm").removeAttr("novalidate");
        a.trigger("contentResize")
    }

    function R0(a) {
        a = a.$(".paymentRestrictedOverlay");
        return (new J0(a)).show()
    }
    f.SO = function (a) {
        var b = this.$(".licensesMore");
        a.ci(b)
    };

    function S0(a, b) {
        a.$(".totalCost").html(b)
    }

    function T0(a, b) {
        a.$(".payOption").text(b);
        a.$(".simpleTotalPayOption").text(b)
    }

    function U0(a, b) {
        a.$(".creditPackOptions option").each(function (a, d) {
            a = $(d);
            d = a.val();
            a.toggle(0 <= b.indexOf(d))
        })
    }

    function V0(a, b) {
        a.$(".creditPackOptions select").val(b)
    }

    function W0(a) {
        a.$("input[name\x3dpurchaseCreditPack][value\x3dyes]").prop("checked", !0)
    }

    function X0(a, b) {
        $('\x3cp class\x3d"errorMessage"\x3e').html(b).insertBefore(a.sn);
        a.trigger("contentResize")
    }

    function Y0(a, b) {
        a.$(".savedTeamCard").text(b).show();
        a.trigger("contentResize")
    }

    function Z0(a) {
        a.$(".savedTeamCard").hide();
        a.trigger("contentResize")
    }

    function $0(a) {
        a.sn.prev(".errorMessage").remove();
        a.trigger("contentResize")
    }
    f.Ao = function (a) {
        return x0(a).toString()
    };

    function a1(a) {
        var b = a.DX;
        soy.asserts.assertType(goog.isBoolean(b.ee) || 1 === b.ee || 0 === b.ee, "showOneTimeUse", b.ee, "boolean");
        soy.asserts.assertType(goog.isString(b.wd) || b.wd instanceof goog.soy.data.SanitizedContent, "oneTimeUse", b.wd, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(b.Vc) || b.Vc instanceof goog.soy.data.SanitizedContent, "oneTimeUseDescription", b.Vc, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(b.fe) || 1 === b.fe || 0 === b.fe, "showRoyaltyFree", b.fe, "boolean");
        soy.asserts.assertType(goog.isString(b.Pc) || b.Pc instanceof goog.soy.data.SanitizedContent, "royaltyFree", b.Pc, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(b.Xc) || b.Xc instanceof goog.soy.data.SanitizedContent, "royaltyFreeDescription", b.Xc, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(b.Eg) || 1 === b.Eg || 0 === b.Eg, "showExtended", b.Eg, "boolean");
        soy.asserts.assertType(goog.isString(b.Fd) || b.Fd instanceof goog.soy.data.SanitizedContent, "extended", b.Fd, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(b.Ud) || b.Ud instanceof goog.soy.data.SanitizedContent, "extendedDescription", b.Ud, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(b.Xd) || b.Xd instanceof goog.soy.data.SanitizedContent, "noLicenseOptionDescription", b.Xd, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(b.qj instanceof soydata.SanitizedHtml || b.qj instanceof soydata.UnsanitizedText || goog.isString(b.qj), "fullInformationHtml", b.qj, "soydata.SanitizedHtml");
        var c = b.qj,
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml(I0(b) + '\x3cp class\x3d"licensesDetails__fullInformation outro"\x3e' + soy.$$escapeHtml(c) + "\x3c/p\x3e"),
            b = $(b.toString());
        dy.call(this, {
            className: "licensesPopOver",
            content: b,
            Qe: a.DX.confirm,
            position: gp
        })
    }
    t(a1, dy);
    var b1 = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca href\x3d"https://about.canva.com/license-agreements/" target\x3d"_blank"\x3eabout.canva.com/license-agreements\x3c/a\x3e');

    function LT(a) {
        this.view = a.view;
        this.H = a.H;
        this.ya = a.ya;
        this.Ia = a.Ia;
        this.iR = null;
        this.ma = a.ma;
        this.ka = a.ka;
        this.Eb = a.Eb;
        this.jc = a.jc;
        this.Sx = [];
        this.Ja = Rc(a.u);
        this.ec = Zc(a.u);
        this.Ya = Tc(a.u);
        this.df = a.df;
        this.If = a.If;
        this.Bg = a.Bg;
        this.cc = a.cc;
        this.zb = a.zb || null;
        this.Xe = a.Xe;
        this.WA = null;
        this.sa = a.sa || null;
        this.np = !1
    }
    f = LT.prototype;
    f.init = function () {
        var a = this;
        this.view.on("creditPackChange", function (b, c) {
            a.WA = b ? c : null
        });
        this.view.on("creditPackSelect", function (b) {
            a.WA = b;
            W0(a.view)
        });
        this.view.on("priceChange", function (b, c) {
            a.cc.Vh[b].YA = c;
            c1(a)
        });
        this.view.on("licensesMore", function () {
            var b = {
                confirm: Re(a.Ja),
                ee: a.cc.Um("ONE_USE"),
                wd: a.Ya.wd(),
                Vc: a.Ya.Vc(),
                fe: a.cc.Um("ROYALTY_FREE"),
                Pc: a.Ya.Pc(),
                Xc: a.Ya.Xc(),
                Eg: a.cc.Um("EXTENDED"),
                Fd: a.Ya.Fd(),
                Ud: a.Ya.Ud(),
                Xd: a.Ya.Xd(),
                qj: Se(a.Ya, b1)
            };
            a.view.SO(new a1({
                DX: b
            }))
        });
        this.view.on("submitPayment", function () {
            return d1(a)
        });
        this.view.on("clickDraft", function () {
            a.trigger("clickDraft")
        });
        this.view.on("clickOverlayDraftButton", function () {
            a.H.Ga(X(X(X(new Hl("publish_restricted_download_draft"), "section", "editor"), "subsection", "publish_dialog"), "location", "payment_page"));
            a.trigger("clickDraft")
        });
        null != this.jc && QL(this.jc, "contextTipRoyaltyFreePaymentOption", function () {
            var b;
            a.cc.Um("ROYALTY_FREE") ? (b = a.view.$el.find(".license .select").first(),
                1 !== b.length ? b = null : (b = b.get(0).getBoundingClientRect(),
                    b = {
                        x: Number(b.right) + 10,
                        y: Number(b.top)
                    })) : b = null;
            return b
        });
        return this
    };
    f.cl = function () {
        return this.view
    };
    f.remove = function () {
        this.view.remove()
    };
    f.refresh = function () {
        var a = this,
            b = Hv(this.ka, this.ya),
            c = P.resolve([{
                Za: 10,
                Rq: 11,
                name: "PACK_10"
            }, {
                Za: 20,
                Rq: 22,
                name: "PACK_20"
            }, {
                Za: 50,
                Rq: 55,
                name: "PACK_50"
            }, {
                Za: 100,
                Rq: 110,
                name: "PACK_100"
            }]);
        return P.all([c, b]).then(function (b) {
            var c = ka(b);
            b = c.next().value;
            c = c.next().value;
            a.iR = c.TS()[a.Ia] || null;
            a.Sx = b;
            a.view.render(a.Jm());
            c1(a)
        })
    };
    f.Jm = function () {
        var a = this,
            b = null != this.sa && this.sa.Xu || 0,
            c = VS(this.cc),
            d = Math.max(c - b, 0),
            e = this.df ? Pe(this.Ja) + this.Ja.Ua("paymentPageLicensingIntroDraft") : Pe(this.Ja);
        return {
            fm: this.Ja.fm(b),
            KB: soydata.VERY_UNSAFE.ordainSanitizedHtml(this.Ja.total(c)),
            Pp: soydata.VERY_UNSAFE.ordainSanitizedHtml(this.Ja.Pp(d)),
            Hd: this.Ja.Hd(),
            hs: this.Ja.hs(),
            Pu: this.Ja.Pu(),
            SG: this.Ja.format("paymentPageSpecialOfferLabel"),
            rz: soydata.VERY_UNSAFE.ordainSanitizedHtml(e),
            If: this.If || this.Ja.If(),
            Vh: this.cc.Vh.map(function (b) {
                return e1(a, b)
            }),
            Sx: this.Sx.map(function (b) {
                return {
                    text: a.Ja.format("paymentPageCreditPackOffer", b.Za, b.Rq, parseInt(100 * (b.Rq / b.Za - 1), 10)),
                    value: b.name
                }
            }),
            En: this.Ja.En(),
            Bg: this.Bg || this.Ja.Bg(),
            Dn: this.Ja.Dn(),
            Cn: this.Ja.Cn(),
            df: this.df
        }
    };

    function e1(a, b) {
        return {
            Mm: b.Mm(),
            WE: b.WE(),
            Hu: b.Hu(),
            fg: b.Hm(),
            f7: b.HL() ? "cover" : "contain",
            title: b.Jb(),
            Pq: a.Ja.Pq(b.Ng),
            XF: f1(a, LS(b)),
            oy: g1(a, NS(b)),
            gs: KS(b).map(function (b) {
                var d = a.Ja.il(b.Za),
                    e = f1(a, b.Hj);
                return {
                    selected: b.zf,
                    text: e + " - " + d,
                    value: b.Hj
                }
            })
        }
    }

    function g1(a, b) {
        if (Infinity === b)
            return null;
        var c = moment.duration(b);
        b = Math.floor(c.asHours());
        c = c.minutes();
        return b ? a.Ja.format("paymentPageLicenseRemainingHours", b) : Qe(a.Ja, c)
    }

    function f1(a, b) {
        switch (b) {
            case "ONE_USE":
                return a.Ya.wd();
            case "ROYALTY_FREE":
                return a.Ya.Pc();
            case "EXTENDED":
                return a.Ya.Fd();
            default:
                return null
        }
    }

    function h1(a) {
        var b = null != a.sa && a.sa.MN;
        return b && 0 < b.length && !b.some(function (b) {
            return b === a.iR
        }) ? (a.H.Ga(X(X(X(new Hl("publish_download_restricted"), "section", "editor"), "subsection", "publish_dialog"), "location", "payment_page")),
            R0(a.view).then(function () {
                return !0
            })) : P.resolve(!1)
    }

    function c1(a) {
        var b = null != a.sa && a.sa.Xu || 0,
            c = VS(a.cc),
            b = Math.max(c - b, 0),
            d = i1(a, b);
        S0(a.view, a.Ja.total(c));
        T0(a.view, a.Ja.Pp(b));
        U0(a.view, d.map(function (a) {
            return a.name
        }));
        j1(a) ? (M0(a.view),
            N0(a.view),
            Q0(a.view),
            0 < d.length ? (d.some(function (b) {
                    return b.name === a.WA
                }) || V0(a.view, d[0].name),
                null != a.WA ? W0(a.view) : a.view.$("input[name\x3dpurchaseCreditPack][value\x3dno]").prop("checked", !0)) : (L0(a.view),
                O0(a.view)),
            k1(a) ? (a.view.Ad.Xv(!0),
                a.Xe ? Z0(a.view) : Y0(a.view, a.Ja.oO())) : (c = a.sa.Gh,
                null != c && a.view.Ad.Fl(c),
                a.Xe ? (a.view.Ad.Xv(!1),
                    Z0(a.view)) : (P0(a.view),
                    c = a.Ja.format("paymentPageSavedTeamCard", c.Dz),
                    Y0(a.view, c)))) : (L0(a.view),
            N0(a.view),
            P0(a.view),
            Z0(a.view))
    }

    function i1(a, b) {
        return a.Sx.filter(function (a) {
            return a.Rq >= b
        })
    }

    function l1(a) {
        return a.np || 0 < VS(a.cc) ? P.reject() : m1(a, !0)
    }

    function d1(a) {
        a.np || ($0(a.view),
            a.view.lP.addClass("submitting"),
            a.fM().then(function () {
                return m1(a, !1)
            }).catch(yS, function () {
                return a.bz()
            }).catch(nS, function (b) {
                return a.Lm(b)
            }).catch(function () {
                return a.bz()
            }).finally(function () {
                a.view.lP.removeClass("submitting")
            }))
    }

    function m1(a, b) {
        a.np = !0;
        return n1(a).then(function () {
            return b ? o1(a) : a.cE()
        }).then(function (b) {
            a.trigger("paymentComplete", b);
            return b
        }).finally(function () {
            a.np = !1
        })
    }
    f.fM = function () {
        return j1(this) && k1(this) ? this.view.Ny() : P.resolve()
    };

    function n1(a) {
        return XS(a.cc, a.Ia, a.zb, a.WA).reduce(function (b, c) {
            return b.then(function () {
                return a.ma.$C(c)
            }).then(function (b) {
                return a.bG(b.yf)
            })
        }, P.resolve())
    }
    f.bG = function (a) {
        return Si(this.ma, new Ph({
            yf: a,
            action: "PAY_SYNCHRONOUS"
        }))
    };
    f.cE = function () {
        var a = this,
            b = new vD({
                types: ["ONE_USE"],
                status: ["ACTIVATED"],
                Z: this.Ia,
                document: this.zb,
                media: US(this.cc).map(function (a) {
                    return a.Ky()
                })
            });
        return this.Eb.cE(b).then(function (b) {
            return o1(a, b.Kc.map(function (a) {
                return a.py
            }), b.Al)
        }).catch(function () {
            return o1(a)
        })
    };

    function o1(a, b, c) {
        b = void 0 === b ? [] : b;
        c = void 0 === c ? 0 : c;
        var d = [].concat(la(new Set(US(a.cc).map(function (a) {
            return a.YA
        }))));
        return {
            Ls: Math.min.apply(Math, [].concat(la([].concat([WS(a.cc)], la(b.map(function (a) {
                return (a || Infinity) - c
            })))))),
            Ye: d
        }
    }

    function k1(a) {
        if (!a.sa)
            return !0;
        a = a.sa.Gh;
        if (!a)
            return !0;
        var b = new Date,
            c = b.getUTCMonth() + 1,
            b = b.getUTCFullYear();
        return a.Yt < b || a.Yt == b && a.SD < c
    }

    function j1(a) {
        return !a.sa || VS(a.cc) > (a.sa.Xu || 0)
    }
    f.bz = function () {
        X0(this.view, Oe(this.Ja).toString())
    };
    f.Lm = function (a) {
        X0(this.view, AS(this.ec, a))
    };
    f.Im = function () {
        return {
            title: this.Ja.format("paymentPagePurchaseTitle")
        }
    };
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;

    function p1(a) {
        this.view = a.view;
        this.Pa = a.Pa;
        this.ZD = "EXPORTING";
        this.aa = a.aa;
        this.rB = 0;
        this.gP = -1
    }
    f = p1.prototype;
    f.cl = function () {
        return this.view
    };
    f.remove = function () {
        this.view.remove();
        this.aa.clearTimeout(this.gP)
    };
    f.refresh = function () {
        this.view.render();
        this.aa.clearTimeout(this.gP);
        this.rB = 0;
        var a = this.view,
            b = a.$(".progressValue");
        b.css("transition", "none");
        a.qq(0);
        b.width();
        b.css("transition", "");
        this.Av();
        return P.resolve()
    };
    f.Im = function () {
        switch (this.ZD) {
            case "EXPORTING":
                return {
                    title: this.Pa.format("publishViewTitlePreparingDesign")
                };
            case "SAVING":
                return {
                    title: this.Pa.format("publishViewSavingTitle")
                };
            default:
                throw Error("unexpected exporting state: " + this.ZD);
        }
    };
    f.Av = function () {
        var a = this;
        this.rB += 33 * (99 - this.rB) / 99;
        this.view.wW(this.rB);
        this.gP = this.aa.setTimeout(function () {
            return a.Av()
        }, 1.1 * 3E3)
    };

    function q1() {
        G0.call(this, {
            className: "exporting"
        })
    }
    t(q1, G0);
    q1.prototype.render = function () {
        this.el.innerHTML = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"progress"\x3e\x3cspan class\x3d"progressValue"\x3e\x3cspan class\x3d"text"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e');
        return this
    };
    q1.prototype.wW = function (a) {
        var b = this;
        this.$(".progressValue").delay().queue(function (c) {
            b.qq(a);
            c()
        })
    };
    q1.prototype.qq = function (a) {
        this.$(".progressValue").width(a + "%").children(".text").text(a + "%")
    };
    q1.prototype.Ao = function (a) {
        return x0(a).toString()
    };

    function r1(a) {
        this.quotes = [a.format("quoteAlbertEinstein"), a.format("quoteRobertGreene"), a.format("quoteHenriMatisse"), a.format("quoteSteveJobs"), a.format("quoteAndyWarhol"), a.format("quoteEleanorRoosevelt"), a.format("quoteAbrahamLincoln"), a.format("quoteThomasWatsonJr"), a.format("quotePaulRand"), a.format("quoteNelsonMandela"), a.format("quotePabloPicasso"), a.format("quoteMiltonGlaser"), a.format("quoteMaryLouCook"), a.format("quoteDrEdwinLand"), a.format("quoteAlexanderIsley"), a.format("quoteJoeMansueto"), a.format("quoteCharlesEames"), a.format("quoteMihnDTran"), a.format("quoteAntoineDeSaintExupery")]
    }
    r1.prototype.next = function () {
        var a = soydata.VERY_UNSAFE.ordainSanitizedHtml(this.quotes[Math.floor(Math.random() * this.quotes.length)]);
        soy.asserts.assertType(a instanceof soydata.SanitizedHtml || a instanceof soydata.UnsanitizedText || goog.isString(a), "quote", a, "soydata.SanitizedHtml");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"designQuote"\x3e' + soy.$$escapeHtml(a) + "\x3c/p\x3e").toString()
    };

    function bZ(a) {
        var b;
        soy.asserts.assertType(null == a.attributes || a.attributes instanceof soydata.SanitizedHtmlAttribute || a.attributes instanceof soydata.UnsanitizedText || goog.isString(a.attributes), "attributes", a.attributes, "?soydata.SanitizedHtmlAttribute|string|undefined");
        var c = a.attributes;
        soy.asserts.assertType(null == a.block || goog.isBoolean(a.block) || 1 === a.block || 0 === a.block, "block", a.block, "boolean|null|undefined");
        var d = a.block;
        soy.asserts.assertType(null == a.type || a.type instanceof goog.soy.data.SanitizedContent || goog.isString(a.type), "type", a.type, "null|string|undefined");
        var e = a.type;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var g = a.J;
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        var h = a.disabled;
        soy.asserts.assertType(null == a.href || a.href instanceof goog.soy.data.SanitizedContent || goog.isString(a.href), "href", a.href, "null|string|undefined");
        var k = a.href;
        soy.asserts.assertType(null == a.id || a.id instanceof goog.soy.data.SanitizedContent || goog.isString(a.id), "id", a.id, "null|string|undefined");
        var l = a.id;
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        var m = a.small;
        soy.asserts.assertType(null == a.tagName || a.tagName instanceof goog.soy.data.SanitizedContent || goog.isString(a.tagName), "tagName", a.tagName, "null|string|undefined");
        var n = a.tagName;
        soy.asserts.assertType(goog.isString(a.text) || a.text instanceof goog.soy.data.SanitizedContent, "text", a.text, "string|goog.soy.data.SanitizedContent");
        a = a.text;
        var p = null == (b = n) ? "button" : b,
            c = "" + ("\x3c" + soy.$$filterHtmlElementName(p) + " " + (c ? " " + soy.$$filterHtmlAttributes(c) : "") + ' type\x3d"' + soy.$$escapeHtmlAttribute(null == (b = e) ? "button" : b) + '" class\x3d"button' + (d ? " buttonBlock" : "") + (g ? " " + soy.$$escapeHtmlAttribute(g) : "") + (h && "a" == n ? " disabled" : "") + (m ? " buttonSmall" : "") + '"' + (k ? ' href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(k)) + '"' : "") + (l ? ' id\x3d"' + soy.$$escapeHtmlAttribute(l) + '"' : "") + (h && "a" != n ? " disabled" : "") + "\x3e" + soy.$$escapeHtml(a) + "\x3c/" + soy.$$filterHtmlElementName(p) + "\x3e");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(c)
    };

    function u0(a) {
        a = a || {};
        soy.asserts.assertType(null == a.attributes || a.attributes instanceof soydata.SanitizedHtmlAttribute || a.attributes instanceof soydata.UnsanitizedText || goog.isString(a.attributes), "attributes", a.attributes, "?soydata.SanitizedHtmlAttribute|string|undefined");
        soy.asserts.assertType(null == a.block || goog.isBoolean(a.block) || 1 === a.block || 0 === a.block, "block", a.block, "boolean|null|undefined");
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        soy.asserts.assertType(null == a.id || a.id instanceof goog.soy.data.SanitizedContent || goog.isString(a.id), "id", a.id, "null|string|undefined");
        soy.asserts.assertType(null == a.name || a.name instanceof goog.soy.data.SanitizedContent || goog.isString(a.name), "name", a.name, "null|string|undefined");
        soy.asserts.assertType(null == a.placeholder || a.placeholder instanceof goog.soy.data.SanitizedContent || goog.isString(a.placeholder), "placeholder", a.placeholder, "null|string|undefined");
        soy.asserts.assertType(null == a.tagName || a.tagName instanceof goog.soy.data.SanitizedContent || goog.isString(a.tagName), "tagName", a.tagName, "null|string|undefined");
        var b = a.tagName;
        soy.asserts.assertType(null == a.type || a.type instanceof goog.soy.data.SanitizedContent || goog.isString(a.type), "type", a.type, "null|string|undefined");
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        soy.asserts.assertType(null == a.value || a.value instanceof goog.soy.data.SanitizedContent || goog.isString(a.value), "value", a.value, "null|string|undefined");
        var c = a.value,
            b = null == b ? "input" : b;
        a = "" + ("textarea" == b ? "\x3ctextarea " + s1(a) + "\x3e" + (c ? soy.$$escapeHtmlRcdata(c) : "") + "\x3c/textarea\x3e" : "\x3c" + soy.$$filterHtmlElementName(b) + " " + s1(a) + "\x3e");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(a)
    }

    function s1(a) {
        a = a || {};
        soy.asserts.assertType(null == a.attributes || a.attributes instanceof soydata.SanitizedHtmlAttribute || a.attributes instanceof soydata.UnsanitizedText || goog.isString(a.attributes), "attributes", a.attributes, "?soydata.SanitizedHtmlAttribute|string|undefined");
        var b = a.attributes;
        soy.asserts.assertType(null == a.block || goog.isBoolean(a.block) || 1 === a.block || 0 === a.block, "block", a.block, "boolean|null|undefined");
        var c = a.block;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var d = a.J;
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        var e = a.disabled;
        soy.asserts.assertType(null == a.id || a.id instanceof goog.soy.data.SanitizedContent || goog.isString(a.id), "id", a.id, "null|string|undefined");
        var g = a.id;
        soy.asserts.assertType(null == a.name || a.name instanceof goog.soy.data.SanitizedContent || goog.isString(a.name), "name", a.name, "null|string|undefined");
        var h = a.name;
        soy.asserts.assertType(null == a.placeholder || a.placeholder instanceof goog.soy.data.SanitizedContent || goog.isString(a.placeholder), "placeholder", a.placeholder, "null|string|undefined");
        var k = a.placeholder;
        soy.asserts.assertType(null == a.tagName || a.tagName instanceof goog.soy.data.SanitizedContent || goog.isString(a.tagName), "tagName", a.tagName, "null|string|undefined");
        var l = a.tagName;
        soy.asserts.assertType(null == a.type || a.type instanceof goog.soy.data.SanitizedContent || goog.isString(a.type), "type", a.type, "null|string|undefined");
        var m = a.type;
        soy.asserts.assertType(null == a.small || goog.isBoolean(a.small) || 1 === a.small || 0 === a.small, "small", a.small, "boolean|null|undefined");
        var n = a.small;
        soy.asserts.assertType(null == a.value || a.value instanceof goog.soy.data.SanitizedContent || goog.isString(a.value), "value", a.value, "null|string|undefined");
        a = a.value;
        return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute((b ? " " + soy.$$filterHtmlAttributes(b) : "") + ' class\x3d"textInput' + (c ? " textInputBlock" : "") + (d ? " " + soy.$$escapeHtmlAttribute(d) : "") + (n ? " textInputSmall" : "") + '"' + (e ? " disabled" : "") + (g ? ' id\x3d"' + soy.$$escapeHtmlAttribute(g) + '"' : "") + (h ? ' name\x3d"' + soy.$$escapeHtmlAttribute(h) + '"' : "") + (k ? ' placeholder\x3d"' + soy.$$escapeHtmlAttribute(k) + '"' : "") + ("textarea" != l ? ' type\x3d"' + soy.$$escapeHtmlAttribute(null == m ? "text" : m) + '"' + (a ? ' value\x3d"' + soy.$$escapeHtmlAttribute(a) + '"' : "") : ""))
    };

    function t1(a) {
        this.ka = a.ka;
        this.view = a.view;
        this.xp = null;
        this.Z = a.Z;
        this.jF = a.jF || 4;
        this.Ap = !!a.Ap;
        this.RB = [];
        this.Wm = [];
        this.Ez = 0;
        this.sA = this.sp = null;
        this.xB = !!a.xB;
        this.listenTo(this.view, {
            requestAutocomplete: this.WU,
            select: this.U3
        })
    }

    function E_(a) {
        var b = a.Sk,
            b = new u1({
                el: $(v1({
                    inputPlaceholder: a.nh
                }))[0],
                Sk: b
            });
        return new t1({
            ka: a.ka,
            Z: a.Z,
            jF: a.jF,
            Ap: a.Ap,
            xB: a.xB,
            view: b
        })
    }
    f = t1.prototype;
    f.remove = function () {
        this.stopListening();
        this.view.remove()
    };
    f.xE = function () {
        var a = this;
        Da(this.Ap, "getUsers() only valid in multi user mode");
        return this.RB.filter(function (a) {
            return "" !== a
        }).map(function (b) {
            return w1(a, b)
        })
    };

    function x1(a) {
        var b = Nw(Mw((new Lw).Hg(a.Z.G()))).Ig(100);
        a.ka.zy(b).then(function (c) {
            a.xp = c.rE();
            if (c.dc())
                return a.ka.zy(b.aj(c.dc()))
        }).then(function (b) {
            b && a.xp.push.apply(a.xp, [].concat(la(b.rE())));
            b = a.sA;
            a.sA = null;
            a.WU(b.dX, b.pos)
        }).catch(function (b) {
            !a.xB && a.view.ef();
            throw b;
        })
    }
    f.WU = function (a, b) {
        this.trigger("input");
        if (this.sA)
            this.sA = {
                dX: a,
                pos: b
            };
        else if (null === this.xp)
            this.sA = {
                dX: a,
                pos: b
            },
            x1(this);
        else {
            var c = y1(this, a, b);
            "" === c ? z1(this.view) : (this.sp = this.xp.filter(function (a) {
                    return A1(c, a.Qa().rg()) || A1(c, a.Qa().Tb()) || A1(c, a.bh())
                }).slice(0, this.jF),
                this.Ap && 0 == this.sp.length ? z1(this.view) : B1(this.view, this.sp))
        }
    };

    function y1(a, b, c) {
        if (!a.Ap)
            return b;
        c = b.lastIndexOf(",", c - 1);
        c = 0 >= c ? 0 : c + 1;
        var d = b.indexOf(",", c),
            d = -1 == d ? b.length : d;
        a.Wm = [b.slice(0, c), b.slice(c, d), b.slice(d)];
        a.Ez = a.Wm[0].split(",").length - 1;
        a.RB[a.Ez] = a.Wm[1];
        b = a.RB.length - a.Ez - 1;
        c = a.Wm[2].split(",");
        d = c.length - 1;
        0 < d && !c[c.length - 1].trim() && d--;
        a.RB.splice(a.Ez + 1, b - d);
        return a.Wm[1]
    }

    function w1(a, b) {
        if (b instanceof Jw || !a.xp)
            return b;
        a = a.xp.filter(function (a) {
            return a.bh() === b.trim()
        });
        return a.length ? a[0] : b
    }

    function A1(a, b) {
        return !!b && -1 !== b.toLowerCase().replace(/ |@/g, "").indexOf(a.toLowerCase().replace(/ |@/g, ""))
    }
    f.U3 = function (a) {
        if (this.Ap) {
            this.RB[this.Ez] = this.sp[a];
            var b = this.view,
                c = this.Wm[0] + (this.Wm[0] ? " " : "");
            a = this.sp[a];
            a = a.bh() || a.Qa().Tb() || a.Qa().rg();
            c = c + a + (this.Wm[2] ? "" : ", ") + this.Wm[2];
            b.$("input").val(c)
        } else
            this.trigger("select", this.sp[a]),
            this.view.$("input").val("")
    };
    f.listenTo = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;

    function u1(a) {
        var b = this;
        Backbone.View.call(this, {
            el: a.el,
            events: {
                "input input": function (a) {
                    return C1(b, a)
                },
                "focus input": function (a) {
                    b.trigger("focus");
                    return C1(b, a)
                },
                "blur input": function () {
                    return b.Qr()
                }
            }
        });
        this.Sk = a.Sk;
        this.Oi = this.sp = null
    }
    t(u1, Backbone.View);

    function C1(a, b) {
        var c = $(b.target);
        b = c[0].selectionEnd;
        c = c.val();
        a.trigger("requestAutocomplete", c, b)
    }
    u1.prototype.Qr = function () {
        this.Oi && !this.Oi.view.$("li").hasClass("hovering") && z1(this)
    };

    function B1(a, b) {
        function c(a) {
            a = $(D1({
                lead: a.Qa().Tb(),
                desc: a.bh(),
                avatarURL: a.Qa().ju() && a.Qa().ju().sizes.get("50").Aa()
            }));
            return new vP(a, !0, !1)
        }
        var d = E1.bind(a, {
            message: a.Sk.format("findUserInputNoResults", bm())
        });
        a.sp = b;
        a.Oi && z1(a);
        a.Oi = zP({
            elements: b.length ? b.map(c) : [new vP($(d()), !1, !1)],
            Ot: b.length ? 0 : void 0
        });
        a.$el.append(a.Oi.view.$el);
        a.listenTo(a.Oi, {
            select: function (b) {
                a.trigger("select", b);
                z1(a)
            },
            cancel: function () {
                z1(a)
            }
        })
    }
    u1.prototype.ef = function () {
        this.Oi = zP({
            elements: [new vP($(E1({
                message: this.Sk.error()
            })), !1, !1)]
        });
        this.$el.append(this.Oi.view.$el)
    };

    function z1(a) {
        a.Oi && (a.stopListening(a.Oi),
            a.Oi.view.remove(),
            a.Oi = null)
    }
    u1.prototype.dg = function (a) {
        this.$("input").prop("disabled", !a)
    };
    var v1 = _.template('\n  \x3cspan class\x3d"findUserInput"\x3e\x3cinput type\x3d"text" class\x3d"textInput" placeholder\x3d"\x3c%- inputPlaceholder %\x3e" /\x3e\x3c/span\x3e\n'),
        D1 = _.template('\n  \x3cimg class\x3d"avatar" src\x3d"\x3c%- avatarURL %\x3e" /\x3e\n  \x3cdiv class\x3d"findUser__right"\x3e\n    \x3cspan class\x3d"lead"\x3e\x3c%- lead %\x3e\x3c/span\x3e\n    \x3cspan class\x3d"desc"\x3e\x3c%- desc %\x3e\x3c/span\x3e\n  \x3c/div\x3e\n'),
        E1 = _.template('\n  \x3cspan class\x3d"desc"\x3e\x3c%\x3d message %\x3e\x3c/span\x3e\n');

    function F1(a) {
        var b = this;
        L.call(this, a);
        this.$el.on("click", ".tagListInput__tagRemoveButton", function (a) {
            a = new G1($(a.target).closest(".tagListInput__tag"));
            b.trigger(H1, a)
        });
        this.$el.on("keydown", ".tagListInput__input", function (a) {
            return b.Mj(a)
        });
        this.$el.on("click", function () {
            return b.trigger(I1)
        });
        this.$el.on("blur", ".tagListInput__input", function () {
            return b.trigger(J1)
        })
    }
    t(F1, L);

    function C_(a) {
        var b = $,
            c;
        soy.asserts.assertType(goog.isString(a.placeholder) || a.placeholder instanceof goog.soy.data.SanitizedContent, "placeholder", a.placeholder, "string|goog.soy.data.SanitizedContent");
        c = a.placeholder;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        a = a.J;
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"tagListInput' + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e\x3cdiv class\x3d"tagListInput__inputContainer"\x3e\x3cinput type\x3d"text" class\x3d"tagListInput__input" placeholder\x3d"' + soy.$$escapeHtmlAttribute(c) + '" autocomplete\x3d"off" autocorrect\x3d"off" autocapitalize\x3d"off" spellcheck\x3d"false" /\x3e\x3c/div\x3e\x3c/div\x3e');
        b = b(c.toString());
        return new F1(b)
    }
    F1.prototype.Mj = function (a) {
        K1.has(a.which) ? (this.trigger(J1),
            a.preventDefault()) : 8 === a.which && this.trigger(L1)
    };
    F1.prototype.ep = function () {
        return String(this.$el.find(".tagListInput__input").val())
    };
    F1.prototype.wu = function () {
        return this.$el.find(".tagListInput__tag").toArray().map(function (a) {
            return new G1($(a))
        })
    };
    F1.prototype.focus = function () {
        this.$el.find(".tagListInput__input").focus()
    };

    function G1(a) {
        fc.apply(this, arguments)
    }
    t(G1, fc);
    G1.prototype.isValid = function () {
        return !this.$el.hasClass("tagListInput__tag--invalid")
    };
    G1.prototype.oc = function () {
        return String(this.$el.find(".tagListInput__tagText").text())
    };
    var H1 = "REMOVE_TAG",
        J1 = "SUBMIT",
        L1 = "BACKSPACE",
        I1 = "FOCUS",
        K1 = new Set([9, 32, 13, 188]);

    function M1(a, b) {
        var c = this;
        this.view = b;
        this.TP = a.TP;
        this.UM = null;
        this.view.on(J1, function () {
            return c.lv()
        });
        this.view.on(L1, function () {
            if (0 === c.view.ep().length) {
                var a = c.view.wu();
                0 < a.length && a[a.length - 1].remove();
                N1(c)
            }
        });
        this.view.on(H1, function (a) {
            a.remove();
            c.view.focus();
            N1(c)
        });
        this.view.on(I1, function () {
            c.view.focus();
            a.iv && a.iv()
        })
    }

    function D_(a, b) {
        return new M1(a, b)
    }
    M1.prototype.lv = function () {
        var a = this,
            b = this.view.ep();
        0 !== b.length && this.TP.validate(b, null).then(function (c) {
            var d = c.valid;
            c = a.view.$el.find(".tagListInput__inputContainer");
            var e = $;
            soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "text", b, "string|goog.soy.data.SanitizedContent");
            soy.asserts.assertType(goog.isBoolean(d) || 1 === d || 0 === d, "valid", d, "boolean");
            d = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"tagListInput__tag' + (d ? "" : " tagListInput__tag--invalid") + '"\x3e\x3cdiv class\x3d"tagListInput__tagText"\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"tagListInput__tagRemoveButton"\x3e\x3cdiv class\x3d"tagListInput__tagRemoveIcon"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');
            e = e(d.toString());
            e = new G1(e);
            d = c.find(".tagListInput__tag");
            0 < d.length && d.insertBefore(c);
            e.$el.insertBefore(c.find(".tagListInput__input"));
            a.view.$el.find(".tagListInput__input").val("");
            N1(a)
        })
    };

    function N1(a) {
        a.UM && a.UM(O1(a))
    }

    function P1(a, b) {
        a.UM = b
    }

    function O1(a) {
        return a.view.wu().filter(function (a) {
            return a.isValid()
        }).map(function (a) {
            return a.oc()
        })
    };

    function Q1(a) {
        this.view = a.view;
        this.Pa = Pc(a.u);
        this.Ya = Tc(a.u);
        this.mP = a.mP
    }
    f = Q1.prototype;
    f.init = function () {
        var a = this;
        this.view.on("remove", function () {
            a.trigger("complete")
        });
        this.view.on("clickConfirm", function () {
            a.view.$(".paymentOnboarding__button").addClass("disabled");
            a.view.remove()
        });
        return this
    };
    f.Um = function (a) {
        return 0 <= this.mP.indexOf(a)
    };
    f.show = function () {
        var a = this.Jm(),
            b = this.view,
            c = $,
            d;
        soy.asserts.assertType(goog.isString(a.before) || a.before instanceof goog.soy.data.SanitizedContent, "before", a.before, "string|goog.soy.data.SanitizedContent");
        d = a.before;
        soy.asserts.assertType(goog.isString(a.after) || a.after instanceof goog.soy.data.SanitizedContent, "after", a.after, "string|goog.soy.data.SanitizedContent");
        var e = a.after;
        soy.asserts.assertType(goog.isString(a.title) || a.title instanceof goog.soy.data.SanitizedContent, "title", a.title, "string|goog.soy.data.SanitizedContent");
        var g = a.title;
        soy.asserts.assertType(goog.isString(a.GE) || a.GE instanceof goog.soy.data.SanitizedContent, "headline", a.GE, "string|goog.soy.data.SanitizedContent");
        var h = a.GE;
        soy.asserts.assertType(goog.isBoolean(a.ee) || 1 === a.ee || 0 === a.ee, "showOneTimeUse", a.ee, "boolean");
        var k = !!a.ee;
        soy.asserts.assertType(goog.isString(a.wd) || a.wd instanceof goog.soy.data.SanitizedContent, "oneTimeUse", a.wd, "string|goog.soy.data.SanitizedContent");
        var l = a.wd;
        soy.asserts.assertType(goog.isString(a.Vc) || a.Vc instanceof goog.soy.data.SanitizedContent, "oneTimeUseDescription", a.Vc, "string|goog.soy.data.SanitizedContent");
        var m = a.Vc;
        soy.asserts.assertType(goog.isBoolean(a.fe) || 1 === a.fe || 0 === a.fe, "showRoyaltyFree", a.fe, "boolean");
        var n = !!a.fe;
        soy.asserts.assertType(goog.isString(a.Pc) || a.Pc instanceof goog.soy.data.SanitizedContent, "royaltyFree", a.Pc, "string|goog.soy.data.SanitizedContent");
        var p = a.Pc;
        soy.asserts.assertType(goog.isString(a.Xc) || a.Xc instanceof goog.soy.data.SanitizedContent, "royaltyFreeDescription", a.Xc, "string|goog.soy.data.SanitizedContent");
        var r = a.Xc;
        soy.asserts.assertType(goog.isString(a.Xd) || a.Xd instanceof goog.soy.data.SanitizedContent, "noLicenseOptionDescription", a.Xd, "string|goog.soy.data.SanitizedContent");
        var u = a.Xd;
        soy.asserts.assertType(goog.isString(a.pd) || a.pd instanceof goog.soy.data.SanitizedContent, "buttonText", a.pd, "string|goog.soy.data.SanitizedContent");
        a = a.pd;
        d = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"paymentOnboarding__header"\x3e\x3cdiv class\x3d"paymentOnboarding__headerState" data-title\x3d"' + soy.$$escapeHtmlAttribute(d) + '"\x3e\x3c/div\x3e\x3cdiv class\x3d"paymentOnboarding__headerState" data-title\x3d"' + soy.$$escapeHtmlAttribute(e) + '"\x3e\x3c/div\x3e\x3c/div\x3e\x3ch2 class\x3d"center"\x3e' + soy.$$escapeHtml(g) + '\x3c/h2\x3e\x3cp class\x3d"paymentOnboarding__headline"\x3e' + soy.$$escapeHtml(h) + "\x3c/p\x3e" + I0({
            ee: k,
            wd: l,
            Vc: m,
            fe: n,
            Pc: p,
            Xc: r,
            Eg: !1,
            Fd: null,
            Ud: null,
            Xd: u
        }) + '\x3cdiv class\x3d"paymentOnboarding__footer"\x3e' + bZ({
            J: "paymentOnboarding__button",
            text: a
        }) + "\x3c/div\x3e");
        b.content = c(d.toString());
        this.view.show()
    };
    f.remove = function () {
        this.view.remove()
    };
    f.Jm = function () {
        return {
            before: this.Pa.format("publishViewOnboardingBefore"),
            after: this.Pa.format("publishViewOnboardingAfter"),
            title: this.Pa.format("publishViewOnboardingTitle"),
            GE: this.Pa.format("publishViewOnboardingHeadline"),
            ee: this.Um("ONE_USE"),
            wd: this.Ya.wd(),
            Vc: this.Ya.Vc(),
            fe: this.Um("ROYALTY_FREE"),
            Pc: this.Ya.Pc(),
            Xc: this.Ya.Xc(),
            Xd: this.Ya.Xd(),
            pd: this.Pa.format("publishViewOnboardingConfirm")
        }
    };
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;

    function R1(a) {
        Uo.call(this, {
            className: "paymentOnboarding",
            aa: a.aa,
            cf: !1,
            Kq: !0,
            Je: !0
        })
    }
    t(R1, Uo);
    R1.prototype.events = function () {
        var a = this;
        return _.extend(Uo.prototype.events.call(this), {
            "click .paymentOnboarding__button": function () {
                a.trigger("clickConfirm")
            }
        })
    };
    R1.prototype.Xo = function () {
        return eW
    };
    R1.prototype.render = function () {
        Uo.prototype.render.call(this);
        this.$(".dialog .content").html(this.content);
        this.delegateEvents();
        return this
    };

    function S1(a) {
        this.view = a.view;
        this.OD = null;
        this.Pa = a.Pa;
        this.Bv = null
    }
    f = S1.prototype;
    f.init = function () {
        var a = this;
        this.view.on("done", function () {
            a.trigger("done")
        });
        this.view.on("retry", function () {
            a.view.$(".button").prop("disabled", !0);
            a.trigger("retry")
        });
        return this
    };
    f.cl = function () {
        return this.view
    };
    f.remove = function () {
        this.view.remove()
    };
    f.refresh = function () {
        w(this.Bv);
        this.view.render(this.Jm());
        this.view.delegateEvents();
        null != this.OD && this.view.vW(this.OD);
        return P.resolve()
    };
    f.Jm = function () {
        return {
            message: soydata.VERY_UNSAFE.ordainSanitizedHtml(this.Bv.message),
            ht: this.Pa.ht(),
            it: this.Pa.it(),
            ji: this.Bv.ji || !1,
            Ys: this.Bv.Ys || !1
        }
    };
    f.Im = function () {
        return {
            title: this.Bv.title
        }
    };
    f.vW = function (a) {
        this.OD = a
    };

    function T1(a, b) {
        switch (b) {
            case "EMPTY_DOC":
                return {
                    message: a.Pa.format("publishViewErrorEmptyDesign"),
                    title: a.Pa.format("publishViewErrorEmptyDesignTitle"),
                    ji: !0
                };
            case "SAVING":
                return {
                    message: a.Pa.format("publishViewErrorSavingDesign"),
                    title: a.Pa.format("publishViewErrorSavingDesignTitle"),
                    Ys: !0
                };
            case "VERSION_CONFLICT":
                return {
                    message: a.Pa.format("publishViewErrorVersionConflict"),
                    title: a.Pa.format("publishViewErrorVersionConflictTitle"),
                    ji: !0
                };
            case "UPLOADING":
                return {
                    message: a.Pa.format("publishViewErrorUploading"),
                    title: a.Pa.format("publishViewErrorUploadingTitle"),
                    ji: !0
                };
            case "EXPORTING":
            case "BACKGROUND_PAYMENT":
                return {
                    message: a.Pa.format("publishViewErrorPageHtml", "http://status.canva.com"),
                    title: a.Pa.format("publishViewTitleErrorPage"),
                    ji: !0
                };
            case "BACKGROUND":
                return {
                    message: a.Pa.format("publishViewErrorBackgroundTaskHtml", "http://status.canva.com"),
                    title: a.Pa.format("publishViewErrorBackgroundTaskTitle"),
                    ji: !0
                };
            case "LICENSE_NO_OPTIONS":
                return {
                    message: a.Pa.format("publishViewErrorLicenseNoOptionsHtml", "http://status.canva.com"),
                    title: a.Pa.format("publishViewErrorLicenseNoOptionsTitle"),
                    ji: !0
                };
            case "URL_MINTING":
                return {
                    message: a.Pa.format("publishViewErrorUrlMinting", "http://status.canva.com"),
                    title: a.Pa.format("publishViewErrorUrlMintingTitle"),
                    ji: !0
                };
            default:
                throw Error("unexpected publish error type: " + b);
        }
    }
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;

    function U1() {
        var a = this;
        G0.call(this, {
            className: "error",
            events: {
                "click .done": function () {
                    a.trigger("done")
                },
                "click .retry": function () {
                    return a.yM()
                }
            }
        })
    }
    t(U1, G0);
    U1.prototype.yM = function () {
        this.trigger("retry")
    };
    U1.prototype.vW = function (a) {
        $('\x3cp class\x3d"errorMessage"\x3e' + a + "\x3c/p\x3e").insertBefore(this.$(".buttonContainer"))
    };
    U1.prototype.render = function (a) {
        var b = this.el,
            c;
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        c = a.message;
        soy.asserts.assertType(goog.isBoolean(a.ji) || 1 === a.ji || 0 === a.ji, "useOK", a.ji, "boolean");
        var d = !!a.ji;
        soy.asserts.assertType(goog.isBoolean(a.Ys) || 1 === a.Ys || 0 === a.Ys, "useRetry", a.Ys, "boolean");
        var e = !!a.Ys;
        soy.asserts.assertType(goog.isString(a.ht) || a.ht instanceof goog.soy.data.SanitizedContent, "actionOK", a.ht, "string|goog.soy.data.SanitizedContent");
        var g = a.ht;
        soy.asserts.assertType(goog.isString(a.it) || a.it instanceof goog.soy.data.SanitizedContent, "actionRetry", a.it, "string|goog.soy.data.SanitizedContent");
        a = a.it;
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cp\x3e" + soy.$$escapeHtml(c) + '\x3c/p\x3e\x3cp class\x3d"buttonContainer"\x3e' + (d ? '\x3cbutton class\x3d"button done"\x3e' + soy.$$escapeHtml(g) + "\x3c/button\x3e" : "") + (e ? '\x3cbutton class\x3d"button retry"\x3e' + soy.$$escapeHtml(a) + "\x3c/button\x3e" : "") + "\x3c/p\x3e");
        b.innerHTML = c;
        return this
    };
    U1.prototype.Ao = function (a) {
        return x0(a).toString()
    };

    function V1(a) {
        soy.asserts.assertType(goog.isString(a.message) || a.message instanceof goog.soy.data.SanitizedContent, "message", a.message, "string|goog.soy.data.SanitizedContent");
        var b = a.message;
        soy.asserts.assertType(goog.isString(a.Jg) || a.Jg instanceof goog.soy.data.SanitizedContent, "actionClose", a.Jg, "string|goog.soy.data.SanitizedContent");
        a = a.Jg;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cp\x3e" + soy.$$escapeHtml(b) + '\x3c/p\x3e\x3cp class\x3d"useExportButton"\x3e\x3ca class\x3d"button" tabindex\x3d"0"\x3e' + soy.$$escapeHtml(a) + "\x3c/a\x3e\x3c/p\x3e")
    };

    function W1(a) {
        soy.asserts.assertType(a.Db instanceof soydata.SanitizedHtml || a.Db instanceof soydata.UnsanitizedText || goog.isString(a.Db), "headingHtml", a.Db, "soydata.SanitizedHtml");
        var b = a.Db;
        soy.asserts.assertType(goog.isString(a.Oj) || a.Oj instanceof goog.soy.data.SanitizedContent, "overviewSubheading", a.Oj, "string|goog.soy.data.SanitizedContent");
        var c = a.Oj;
        soy.asserts.assertType(goog.isString(a.Bj) || a.Bj instanceof goog.soy.data.SanitizedContent, "iphoneLabel", a.Bj, "string|goog.soy.data.SanitizedContent");
        var d = a.Bj;
        soy.asserts.assertType(goog.isString(a.ej) || a.ej instanceof goog.soy.data.SanitizedContent, "androidLabel", a.ej, "string|goog.soy.data.SanitizedContent");
        a = a.ej;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"experimentsPhoneDialog__heading"\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__content"\x3e' + soy.$$escapeHtml(c) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__options"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__optionsIphone"\x3e' + soy.$$escapeHtml(d) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__optionsAndroid"\x3e' + soy.$$escapeHtml(a) + "\x3c/div\x3e\x3c/div\x3e")
    }

    function X1(a) {
        soy.asserts.assertType(a.Db instanceof soydata.SanitizedHtml || a.Db instanceof soydata.UnsanitizedText || goog.isString(a.Db), "headingHtml", a.Db, "soydata.SanitizedHtml");
        var b = a.Db;
        soy.asserts.assertType(goog.isString(a.Gu) || a.Gu instanceof goog.soy.data.SanitizedContent, "iphoneSubheading", a.Gu, "string|goog.soy.data.SanitizedContent");
        var c = a.Gu;
        soy.asserts.assertType(goog.isString(a.Tv) || a.Tv instanceof goog.soy.data.SanitizedContent, "sendButtonLabel", a.Tv, "string|goog.soy.data.SanitizedContent");
        var d = a.Tv;
        soy.asserts.assertType(goog.isString(a.Ti) || a.Ti instanceof goog.soy.data.SanitizedContent, "phoneInputPlaceholder", a.Ti, "string|goog.soy.data.SanitizedContent");
        a = a.Ti;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"experimentsPhoneDialog__back"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__heading"\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__grid"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__coverIphone"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__aside"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__subheading"\x3e' + soy.$$escapeHtml(c) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__input"\x3e\x3cinput class\x3d"experimentsPhoneDialog__inputField experimentsPhoneDialog__inputField--iphone" type\x3d"text" placeholder\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__inputButton experimentsPhoneDialog__inputButton--iphone"\x3e' + soy.$$escapeHtml(d) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__inputError experimentsPhoneDialog__inputError--iphone"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')
    }

    function Y1(a) {
        soy.asserts.assertType(a.Db instanceof soydata.SanitizedHtml || a.Db instanceof soydata.UnsanitizedText || goog.isString(a.Db), "headingHtml", a.Db, "soydata.SanitizedHtml");
        var b = a.Db;
        soy.asserts.assertType(goog.isString(a.qt) || a.qt instanceof goog.soy.data.SanitizedContent, "androidSubheading", a.qt, "string|goog.soy.data.SanitizedContent");
        var c = a.qt;
        soy.asserts.assertType(goog.isString(a.Ev) || a.Ev instanceof goog.soy.data.SanitizedContent, "registerButtonLabel", a.Ev, "string|goog.soy.data.SanitizedContent");
        var d = a.Ev;
        soy.asserts.assertType(goog.isString(a.Ti) || a.Ti instanceof goog.soy.data.SanitizedContent, "phoneInputPlaceholder", a.Ti, "string|goog.soy.data.SanitizedContent");
        a = a.Ti;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"experimentsPhoneDialog__back"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__heading"\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__grid"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__coverAndroid"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__aside"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__subheading"\x3e' + soy.$$escapeHtml(c) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__input"\x3e\x3cinput class\x3d"experimentsPhoneDialog__inputField experimentsPhoneDialog__inputField--android" type\x3d"text" placeholder\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__inputButton experimentsPhoneDialog__inputButton--android"\x3e' + soy.$$escapeHtml(d) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__inputError experimentsPhoneDialog__inputError--android"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')
    };

    function Z1(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".experimentsPhoneDialog__back", function () {
            return b.trigger($1)
        });
        a.on("click", ".experimentsPhoneDialog__optionsIphone", function () {
            return b.trigger(a2)
        });
        a.on("click", ".experimentsPhoneDialog__optionsAndroid", function () {
            return b.trigger(b2)
        });
        a.on("click", ".experimentsPhoneDialog__inputButton--android", function () {
            return b.trigger(c2)
        });
        a.on("click", ".experimentsPhoneDialog__inputButton--iphone", function () {
            return b.trigger(d2)
        })
    }
    t(Z1, L);
    Z1.prototype.Kn = function (a) {
        return this.$el.find(".experimentsPhoneDialog__container").html(a)
    };

    function e2(a) {
        a = a.$el.find(".experimentsPhoneDialog__inputField");
        if (0 === a.size())
            throw Error("Input field could not be found");
        return a
    }

    function f2(a) {
        a = a.$el.find(".experimentsPhoneDialog__inputButton");
        if (0 === a.size())
            throw Error("Input button could not be found");
        return a
    }

    function g2(a, b) {
        a.$el.find(".experimentsPhoneDialog__inputError").text(b)
    }

    function h2(a) {
        i2(a);
        e2(a).addClass("experimentsPhoneDialog__inputField--loading");
        f2(a).addClass("experimentsPhoneDialog__inputButton--loading")
    }

    function j2(a, b) {
        i2(a);
        e2(a).addClass("experimentsPhoneDialog__inputField--error");
        f2(a).addClass("experimentsPhoneDialog__inputButton--error");
        g2(a, b)
    }

    function k2(a) {
        i2(a);
        e2(a).addClass("experimentsPhoneDialog__inputField--success");
        f2(a).addClass("experimentsPhoneDialog__inputButton--success");
        g2(a, "Success!")
    }

    function i2(a) {
        g2(a, "");
        e2(a).removeClass("experimentsPhoneDialog__inputField--error").removeClass("experimentsPhoneDialog__inputField--loading").removeClass("experimentsPhoneDialog__inputField--success");
        f2(a).removeClass("experimentsPhoneDialog__inputButton--error").removeClass("experimentsPhoneDialog__inputButton--loading").removeClass("experimentsPhoneDialog__inputButton--success")
    }
    var $1 = "BACK",
        c2 = "SEND_ANDROID",
        d2 = "SEND_IPHONE",
        b2 = "GOTO_ANDROID",
        a2 = "GOTO_IPHONE";

    function l2(a, b) {
        var c = this;
        this.view = b;
        this.H = a.H;
        this.zd = a.zd;
        this.u = a.u;
        this.view.on($1, function () {
            var a = {
                Db: soydata.VERY_UNSAFE.ordainSanitizedHtml(c.u.Db()),
                Oj: c.u.Oj(),
                Bj: c.u.Bj(),
                ej: c.u.ej()
            };
            c.view.Kn(W1(a).toString());
            c.H.Ga(m2())
        });
        this.view.on(d2, function () {
            return n2(c)
        });
        this.view.on(c2, function () {
            var a;
            a = e2(c.view).val().toString();
            /^(?=.*[0-9])[- +()0-9]+$/g.test(a) ? (c.H.Ga(o2(a, !0)),
                k2(c.view),
                a = void 0) : (c.H.Ga(o2(a, !1)),
                a = j2(c.view, uf(c.u)));
            return a
        });
        this.view.on(a2, function () {
            var a = {
                Db: soydata.VERY_UNSAFE.ordainSanitizedHtml(c.u.Db()),
                Gu: c.u.Gu(),
                Tv: c.u.Tv(),
                Ti: c.u.Ti()
            };
            c.view.Kn(X1(a).toString());
            c.H.Ga(m2())
        });
        this.view.on(b2, function () {
            var a = {
                Db: soydata.VERY_UNSAFE.ordainSanitizedHtml(c.u.Db()),
                qt: c.u.qt(),
                Ev: c.u.Ev(),
                Ti: c.u.Ti()
            };
            c.view.Kn(Y1(a).toString());
            c.H.Ga(X(X(new Hl("mobile_dialogue_click"), "type", "android"), "location", "publish_flow_complete"))
        })
    }
    l2.prototype.De = function () {
        this.H.Ga(X(new Hl("mobile_dialogue_loaded"), "location", "publish_flow_complete"))
    };
    l2.prototype.destroy = function () {
        this.view.remove()
    };

    function n2(a) {
        var b = e2(a.view).val().toString();
        if (!/^(?=.*[0-9])[- +()0-9]+$/g.test(b))
            return j2(a.view, uf(a.u));
        h2(a.view);
        a.zd.send(b, {
            feature: "TextMeTheApp",
            channel: "webapp",
            campaign: "publish_dialog"
        }).then(function () {
            k2(a.view);
            a.H.Ga(p2(b, !0))
        }).catch(function () {
            j2(a.view, a.u.format("downloadIphoneDialogSomethingWentWrong"));
            a.H.Ga(p2(b, !1))
        })
    }

    function o2(a, b) {
        b = b ? "success" : "fail";
        return X(X(X(X(new Hl("mobile_dialogue_submit"), "type", "android"), "location", "publish_flow_complete"), "value", a), "status", b)
    }

    function p2(a, b) {
        b = b ? "success" : "fail";
        return X(X(X(X(new Hl("mobile_dialogue_submit"), "type", "ios"), "location", "publish_flow_complete"), "value", a), "status", b)
    }

    function m2() {
        return X(X(new Hl("mobile_dialogue_click"), "type", "ios"), "location", "publish_flow_complete")
    };

    function q2(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".experimentsRecommendationsDialog__item", function (a) {
            return b.trigger(r2, $(a.target).data("type"))
        })
    }
    t(q2, L);
    var r2 = "SUGGESTION_CLICKED";

    function s2(a, b) {
        var c = this;
        this.H = a.H;
        this.view = b;
        b.on(r2, function (a) {
            c.H.Ga(X(X(new Hl("exp_recommendations_dialog_selected"), "type", a), "location", "publish_flow_complete"))
        })
    }
    s2.prototype.De = function () {
        this.H.Ga(X(new Hl("exp_recommendations_dialog_loaded"), "location", "publish_flow_complete"))
    };
    s2.prototype.destroy = function () {
        this.view.remove()
    };

    function t2(a) {
        var b = this;
        L.call(this, a);
        this.$el.on("click", ".experimentsPrintPublishDialog__printButton", function () {
            return b.trigger(u2)
        })
    }
    t(t2, L);
    var u2 = "PRINT_CLICK";

    function v2(a, b) {
        var c = this;
        this.view = b;
        this.RM = a.RM;
        this.H = a.H;
        this.view.on(u2, function () {
            return c.RM()
        })
    }

    function w2(a) {
        var b = $(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"experimentsPrintPublishDialog"\x3e\x3cdiv class\x3d"experimentsPrintPublishDialog__container"\x3e\x3cdiv class\x3d"experimentsPrintPublishDialog__printIcon"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPrintPublishDialog__title"\x3eDon\'t want the hassle of \x3cspan class\x3d"experimentsPrintPublishDialog__title--bold"\x3edealing with a printer\x3c/span\x3e?\x3c/div\x3e\x3cdiv class\x3d"experimentsPrintPublishDialog__subTitle"\x3eCanva offers professional printing that delivers the best quality prints right to your door.\x3c/div\x3e\x3cdiv class\x3d"experimentsPrintPublishDialog__printButtonContainer"\x3e\x3cbutton class\x3d"experimentsPrintPublishDialog__printButton"\x3ePrint now\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e').toString()),
            b = new t2(b);
        return {
            bc: new v2(a, b),
            view: b
        }
    }
    v2.prototype.De = function () {
        this.H.Ga(X(new Hl("exp_print_dialog_loaded"), "location", "publish_flow_complete"))
    };
    v2.prototype.destroy = function () {
        this.view.remove()
    };

    function x2(a, b) {
        L.call(this, a);
        this.rP = b
    }
    t(x2, L);

    function y2(a, b, c) {
        var d = this;
        this.view = b;
        this.CB = c;
        this.H = a.H;
        z2(this.CB, function (b) {
            b.forEach(function (a) {
                return d.H.Ga(Wl(a, "export_dialog"))
            });
            a.KM()
        })
    }

    function A2(a) {
        var b = {
                Ns: a.Ns,
                Vg: a.Vg,
                ET: B2(a.Mi),
                Xs: a.Xs,
                zq: a.zq
            },
            c = $,
            b = goog.asserts.assertObject(b, "expected parameter 'teamInviteSenderModel' of type [addAnotherButtonClasses: null|string, addAnotherButtonLabel: string, classes: null|string, emailInputPlaceholder: string, inputModel: list\x3c[modelId: float|int]\x3e, listItemClasses: null|string, submitButtonClasses: null|string, submitButtonLabel: string, upgradeMessage: string]."),
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"teamInviteDialog"\x3e\x3cdiv class\x3d"teamInviteDialog__header"\x3e\x3cdiv class\x3d"teamInviteDialog__title"\x3eDesigning is always better with friends\x3c/div\x3e\x3cdiv class\x3d"teamInviteDialog__subheading"\x3eInvite your team members and collaborate on future designs!\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"teamInviteDialog__wrapper"\x3e\x3cimg class\x3d"teamInviteDialog__pane teamInviteDialog__image" src\x3d"https://static.canva.com/static/images/experiments/publish_dialog_invite/team.png"\x3e\x3cdiv class\x3d"teamInviteDialog__pane teamInviteDialog__inviteForm"\x3e' + C2(soy.$$assignDefaults({
                vB: "teamInviteDialog__submitButton"
            }, b)) + "\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),
            c = c(b.toString()),
            b = new D2(c.find(".teamInviteSender")),
            c = new x2(c, b),
            b = a.g_(c.rP);
        a = new y2(a, c, b);
        return {
            view: c,
            bc: a
        }
    }
    y2.prototype.De = function () {
        this.H.Ga(X(new Hl("exp_invite_dialogue_loaded"), "location", "publish_flow_complete"));
        this.CB.De()
    };
    y2.prototype.destroy = function () {
        this.view.remove()
    };

    function v_(a) {
        this.Qz = a.Qz;
        this.ma = a.ma;
        this.tq = a.tq;
        this.kD = a.kD;
        this.ka = a.ka;
        this.rc = a.rc;
        this.zw = a.zw;
        this.Z = a.Z
    }

    function E2(a, b) {
        return 0 === b.length ? P.resolve() : a.IP().then(function () {
            return F2(a)
        }).then(function () {
            return G2(a, b)
        })
    }

    function G2(a, b) {
        b = b.map(function (b) {
            return Object.freeze(R(Dw, {
                email: b,
                role: a.kD
            }))
        });
        b = Fw(Gw((new Ew).Hg(a.Z.G()), "brand_page_Invite_Accept_Invitation"), b);
        return a.ka.rW(b)
    }
    v_.prototype.IP = function () {
        var a = this;
        if (!this.Z.Ph())
            return P.resolve();
        var b = yw(xw((new ww).io(this.Z.G()), H2(this)));
        return Lv(this.ka, b).then(function (b) {
            var d;
            try {
                d = b.Ro().Qo().sg
            } catch (e) {
                d = null
            }
            b = Nv({
                brandColor: d,
                brandname: b.HK(),
                contributor: b.JT(),
                displayName: b.Tb(),
                id: b.G(),
                layoutContributor: b.QT(),
                personal: b.Ph(),
                thirdParty: b.VT()
            });
            a.Z = b;
            gx(a.rc);
            hx(a.rc)
        })
    };

    function F2(a) {
        if (null == a.zw || "FREE" !== a.zw.plan.tier)
            return P.resolve();
        var b = ej(dj(cj((new bj).Hg(a.Z.G()), a.Qz.G()), Zi(a.Qz)));
        return Pi(a.ma, b).then(function (b) {
            return a.zw = b.getSubscription()
        })
    }

    function H2(a) {
        var b = a.Z.Tb();
        a.Z.Ph() && (b = b || a.tq + "s team");
        return b || ""
    };

    function u_(a, b) {
        var c = this;
        this.view = b;
        this.KD = a.KD;
        this.Gi = a.Gi;
        this.Vg = a.Vg;
        this.cH = a.cH;
        this.PG = void 0 === a.PG || a.PG;
        this.Mi = a.Mi;
        this.JM = null;
        this.view.on(I2, function (a) {
            return c.FM(a)
        });
        this.view.on(J2, function (a) {
            var b = K2(c.view),
                g;
            for (g = 0; g < b.length; g++) {
                var h = b[g];
                if (L2(a) === L2(h))
                    break
            }
            g + 1 < b.length && b[g + 1].focus()
        });
        this.view.on(M2, function (a) {
            return c.DM(a)
        });
        this.view.on(N2, function () {
            return O2(c)
        });
        this.view.on(P2, function () {
            K2(c.view).length < c.Mi.hF && (Q2(c.view, {
                    Cq: !0,
                    gl: c.Vg,
                    sF: R2++
                }),
                S2(c))
        })
    }
    f = u_.prototype;
    f.destroy = function () {
        this.view.remove()
    };
    f.De = function () {
        S2(this)
    };

    function z2(a, b) {
        a.JM = b
    }

    function S2(a) {
        var b = K2(a.view).length,
            c = b + a.Mi.kJ >= a.Mi.jl;
        b >= a.Mi.hF || c ? (T2(a.view, !1),
            c && a.PG && U2(a.view, !0)) : (U2(a.view, !1),
            T2(a.view, !0))
    }
    f.FM = function (a) {
        V2(a).tg()
    };
    f.DM = function (a) {
        var b = K2(this.view);
        L2(b[b.length - 1]) === L2(a) && W2(this.view, !0)
    };
    f.Ss = function (a) {
        this.view.Ss(a);
        X2(this.view, a);
        K2(this.view).forEach(function (b) {
            return b.Ss(a)
        })
    };

    function O2(a) {
        a.Ss(!0);
        var b = K2(a.view).filter(function (a) {
            return 0 < a.oc().length
        });
        Y2(Z2(a, b)).then(function (c) {
            c ? (c = b.map(function (a) {
                    return a.oc()
                }),
                $2(a, c).finally(function () {
                    return a.Ss(!1)
                })) : a.Ss(!1)
        })
    }

    function $2(a, b) {
        return E2(a.cH, b).then(function () {
            return a.JM && a.JM(b)
        })
    }

    function Z2(a, b) {
        return b.map(function (b) {
            return {
                Uo: function () {
                    return V2(b)
                },
                Vo: function () {
                    return b.oc()
                },
                vq: [a.KD]
            }
        })
    }
    f.reset = function () {
        var a = this;
        T2(this.view, !0);
        X2(this.view, !1);
        W2(this.view, !1);
        U2(this.view, !1);
        K2(this.view).forEach(function (b, c) {
            c < a3(a.Mi) ? b.ak("") : b.remove()
        })
    };

    function B2(a) {
        a = a3(a);
        return b3(a)
    }

    function a3(a) {
        Da(a.tJ <= a.hF);
        return Math.min(a.tJ, Math.max(a.jl - a.kJ, 0))
    }

    function b3(a) {
        return Array(Math.max(a, 0)).fill(null).map(function () {
            return {
                sF: R2++
            }
        })
    }
    var R2 = 1;

    function D2(a) {
        var b = this;
        L.call(this, a);
        this.$el.on("click", ".teamInviteSender__submitButton", function () {
            b.trigger(N2)
        });
        this.$el.on("input", ".teamInviteSender__textInput", function (a) {
            return b.FM(a)
        });
        this.$el.on("keyup", ".teamInviteSender__textInput", function (a) {
            13 === a.keyCode && (a = $(a.target).closest(".teamInviteSender__emailListItem"),
                b.trigger(J2, new c3(a)))
        });
        this.$el.on("focus", ".teamInviteSender__textInput", function (a) {
            return b.DM(a)
        });
        this.$el.on("click", ".teamInviteSender__addAnother", function () {
            return b.trigger(P2)
        })
    }
    t(D2, L);

    function Q2(a, b) {
        var c = d3(b);
        a.$el.find(".teamInviteSender__emailList").append(c.$el);
        b.Cq && Sk(function () {
            c.$el.addClass("teamInviteSender__emailListItem--visible");
            c.focus()
        })
    }

    function K2(a) {
        return a.$el.find(".teamInviteSender__emailListItem").toArray().map(function (a) {
            return new c3($(a))
        })
    }
    D2.prototype.Ss = function (a) {
        this.$el.find(".teamInviteSender__submitButton").toggleClass("teamInviteSender__submitButton--submitting", a)
    };

    function X2(a, b) {
        a.$el.find(".teamInviteSender__addAnother").toggleClass("teamInviteSender__addAnother--disabled", b)
    }

    function U2(a, b) {
        a.$el.find(".teamInviteSender__upgradeMessage").toggleClass("teamInviteSender__upgradeMessage--visible", b)
    }

    function T2(a, b) {
        a.$el.find(".teamInviteSender__addAnother").toggleClass("teamInviteSender__addAnother--hidden", !b)
    }

    function W2(a, b) {
        a.$el.find(".teamInviteSender__addAnother").toggleClass("teamInviteSender__addAnother--highlighted", b)
    }
    D2.prototype.FM = function (a) {
        a = $(a.target).closest(".teamInviteSender__emailListItem");
        this.trigger(I2, new c3(a))
    };
    D2.prototype.DM = function (a) {
        a = $(a.target).closest(".teamInviteSender__emailListItem");
        this.trigger(M2, new c3(a))
    };
    var I2 = "FIELD_INPUT",
        J2 = "FIELD_ENTER",
        M2 = "FIELD_FOCUS",
        N2 = "SUBMIT_CLICK",
        P2 = "ADD_ANOTHER";

    function c3(a) {
        fc.apply(this, arguments)
    }
    t(c3, fc);

    function d3(a) {
        a = $(e3(a).toString());
        return new c3(a)
    }
    c3.prototype.oc = function () {
        return String(this.$el.find(".teamInviteSender__textInput").val())
    };
    c3.prototype.ak = function (a) {
        this.$el.find(".teamInviteSender__textInput").val(a)
    };

    function V2(a) {
        return f3($(a.$el.find(".teamInviteSender__inputContainer")))
    }

    function L2(a) {
        return Number(a.$el.data("model-id"))
    }
    c3.prototype.Ss = function (a) {
        this.$el.find(".teamInviteSender__textInput").toggleClass("teamInviteSender__textInput--submitting", a)
    };
    c3.prototype.focus = function () {
        this.$el.find(".teamInviteSender__textInput").focus()
    };

    function C2(a) {
        soy.asserts.assertType(goog.isString(a.Vg) || a.Vg instanceof goog.soy.data.SanitizedContent, "emailInputPlaceholder", a.Vg, "string|goog.soy.data.SanitizedContent");
        var b = a.Vg;
        soy.asserts.assertType(goog.isString(a.Ns) || a.Ns instanceof goog.soy.data.SanitizedContent, "submitButtonLabel", a.Ns, "string|goog.soy.data.SanitizedContent");
        var c = a.Ns;
        soy.asserts.assertType(goog.isString(a.zq) || a.zq instanceof goog.soy.data.SanitizedContent, "addAnotherButtonLabel", a.zq, "string|goog.soy.data.SanitizedContent");
        var d = a.zq,
            e = goog.asserts.assertArray(a.ET, "expected parameter 'inputModel' of type list\x3c[modelId: float|int]\x3e.");
        soy.asserts.assertType(goog.isString(a.Xs) || a.Xs instanceof goog.soy.data.SanitizedContent, "upgradeMessage", a.Xs, "string|goog.soy.data.SanitizedContent");
        var g = a.Xs;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var h = a.J;
        soy.asserts.assertType(null == a.dF || a.dF instanceof goog.soy.data.SanitizedContent || goog.isString(a.dF), "listItemClasses", a.dF, "null|string|undefined");
        var k = a.dF;
        soy.asserts.assertType(null == a.vB || a.vB instanceof goog.soy.data.SanitizedContent || goog.isString(a.vB), "submitButtonClasses", a.vB, "null|string|undefined");
        var l = a.vB;
        soy.asserts.assertType(null == a.mC || a.mC instanceof goog.soy.data.SanitizedContent || goog.isString(a.mC), "addAnotherButtonClasses", a.mC, "null|string|undefined");
        a = a.mC;
        for (var h = '\x3cdiv class\x3d"teamInviteSender' + (h ? " " + soy.$$escapeHtmlAttribute(h) : "") + '"\x3e\x3cul class\x3d"teamInviteSender__emailList"\x3e', m = e.length, n = 0; n < m; n++)
            h += e3(soy.$$assignDefaults({
                J: k,
                gl: b
            }, e[n]));
        h += '\x3c/ul\x3e\x3cdiv class\x3d"teamInviteSender__infoContainer"\x3e\x3cbutton class\x3d"teamInviteSender__addAnother' + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e+ ' + soy.$$escapeHtml(d) + '\x3c/button\x3e\x3cdiv class\x3d"teamInviteSender__upgradeMessage"\x3e' + soy.$$escapeHtml(g) + '\x3c/div\x3e\x3c/div\x3e\x3cbutton type\x3d"submit" class\x3d"teamInviteSender__submitButton ' + (l ? soy.$$escapeHtmlAttribute(l) + " " : "") + '"\x3e' + soy.$$escapeHtml(c) + "\x3c/button\x3e\x3c/div\x3e";
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(h)
    }

    function e3(a) {
        soy.asserts.assertType(goog.isString(a.gl) || a.gl instanceof goog.soy.data.SanitizedContent, "inputPlaceholder", a.gl, "string|goog.soy.data.SanitizedContent");
        var b = a.gl;
        soy.asserts.assertType(goog.isNumber(a.sF), "modelId", a.sF, "number");
        var c = a.sF;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var d = a.J;
        soy.asserts.assertType(null == a.Cq || goog.isBoolean(a.Cq) || 1 === a.Cq || 0 === a.Cq, "animated", a.Cq, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cli class\x3d"teamInviteSender__emailListItem' + (a.Cq ? " teamInviteSender__emailListItem--animated" : "") + (d ? " " + soy.$$escapeHtmlAttribute(d) : "") + '" data-model-id\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e' + g3({
            J: "teamInviteSender__inputContainer",
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                placeholder: b,
                J: "teamInviteSender__textInput"
            }))
        }) + "\x3c/li\x3e")
    };

    function h3(a, b) {
        this.view = b;
        this.PC = a.PC;
        this.DI = a.DI
    }
    f = h3.prototype;
    f.cl = function () {
        return this.view
    };
    f.remove = function () {
        this.DI.destroy();
        this.view.remove()
    };
    f.Im = function () {
        return {
            title: ""
        }
    };
    f.refresh = function () {
        this.view.render();
        return P.resolve()
    };
    f.IO = function () {};
    f.KO = function () {};

    function i3(a) {
        G0.call(this, {
            className: "",
            events: {}
        });
        this.NC = a.NC
    }
    t(i3, G0);
    i3.prototype.render = function () {
        $(this.el).append(this.NC.$el);
        return this
    };
    i3.prototype.remove = function () {
        this.NC.remove();
        G0.prototype.remove.call(this)
    };

    function j3(a) {
        this.ba = a.ba;
        this.Ic = a.Ic;
        this.u = a.u;
        this.H = a.H;
        this.zd = a.zd
    }
    j3.prototype.VE = function () {
        return this.ba.get(k3) && this.zd ? this.Ic.getItem(l3).then(function (a) {
            return !a
        }) : P.resolve(!1)
    };
    j3.prototype.render = function () {
        var a = this.H,
            b = w(this.zd),
            c = this.u;
        c.MJ || (c.MJ = new tf(c.config));
        a = {
            H: a,
            zd: b,
            u: c.MJ
        };
        c = {
            Db: soydata.VERY_UNSAFE.ordainSanitizedHtml(a.u.Db()),
            Oj: a.u.Oj(),
            Bj: a.u.Bj(),
            ej: a.u.ej()
        };
        b = $;
        soy.asserts.assertType(c.Db instanceof soydata.SanitizedHtml || c.Db instanceof soydata.UnsanitizedText || goog.isString(c.Db), "headingHtml", c.Db, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(c.Oj) || c.Oj instanceof goog.soy.data.SanitizedContent, "overviewSubheading", c.Oj, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(c.Bj) || c.Bj instanceof goog.soy.data.SanitizedContent, "iphoneLabel", c.Bj, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(c.ej) || c.ej instanceof goog.soy.data.SanitizedContent, "androidLabel", c.ej, "string|goog.soy.data.SanitizedContent");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"experimentsPhoneDialog"\x3e\x3cdiv class\x3d"experimentsPhoneDialog__closeButton"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__container"\x3e' + W1(c) + '\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__iphonePage"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsPhoneDialog__androidPage"\x3e\x3c/div\x3e\x3c/div\x3e');
        b = b(c.toString());
        b = new Z1(b);
        return {
            bc: new l2(a, b),
            view: b
        }
    };
    j3.prototype.JF = function () {
        this.Ic.setItem(l3, !0)
    };
    j3.prototype.nE = function () {
        return "dialog--phoneExperiment"
    };
    var k3 = new yf("gu", !1);
    var l3 = "seenMobileExpDialog";

    function m3(a) {
        this.Mo = a
    }

    function n3(a) {
        var b = [],
            c = a.Ic;
        c && (b = [new j3({
            H: a.H,
            ba: a.ba,
            u: a.u,
            zd: a.zd,
            Ic: c
        }), new o3({
            H: a.H,
            document: a.document,
            ba: a.ba,
            Wa: a.Wa,
            Ic: c
        }), new p3({
            ma: a.ma,
            ba: a.ba,
            u: a.u,
            Od: a.Od,
            ka: a.ka,
            Ta: a.Ta,
            rc: a.rc,
            H: a.H,
            ja: a.ja,
            Ic: c
        }), new q3({
            H: a.H,
            document: a.document,
            ba: a.ba,
            Ic: c
        })]);
        return new m3(b)
    }

    function r3(a, b) {
        return s3(a).then(function (a) {
            a && a.JF();
            var d;
            if (a) {
                var e = a.render(b);
                d = e.bc;
                a = {
                    NC: e.view,
                    DI: d,
                    PC: a.nE()
                };
                e = new i3(a);
                a = new h3(a, e);
                d.De();
                d = a
            } else
                d = null;
            return d
        })
    }

    function s3(a) {
        return P.all(a.Mo.map(function (a) {
            return a.VE()
        })).then(function (b) {
            b = b.map(function (b, d) {
                return {
                    V_: b,
                    Mb: a.Mo[d]
                }
            }).filter(function (a) {
                return a.V_
            }).map(function (a) {
                return a.Mb
            });
            return 0 === b.length ? null : b[0]
        })
    };

    function o3(a) {
        this.ba = a.ba;
        this.document = a.document;
        this.H = a.H;
        this.Ic = a.Ic;
        this.Wa = a.Wa
    }
    o3.prototype.VE = function () {
        var a = this;
        return this.ba.get(t3) && 0 < $(".editorActionPrint").length ? this.Ic.getItem("spped").then(function (a) {
            return a && P.reject(new u3)
        }).then(function () {
            return v3(a, a.document)
        }).then(function (a) {
            return !a && P.reject(new u3)
        }).then(function () {
            return !0
        }).catch(u3, function () {
            return !1
        }) : P.resolve(!1)
    };

    function v3(a, b) {
        var c = w(b.pb().G());
        return w3(a).then(function (a) {
            return a ? null != x3(a.id, c) : !1
        })
    }

    function w3(a) {
        return y3(a.Wa).then(function (a) {
            return 0 < a.EA.length ? a.EA[0] : null
        })
    }
    o3.prototype.render = function (a) {
        return w2({
            RM: function () {
                U_().hh() || $(".editorActionPrint").click();
                a.WR()
            },
            H: this.H
        })
    };
    o3.prototype.JF = function () {
        this.Ic.setItem("spped", !0)
    };
    o3.prototype.nE = function () {
        return "dialog--printPublishExperiment"
    };
    var t3 = new yf("hi", !0);

    function u3() {}
    t(u3, Error);

    function q3(a) {
        this.H = a.H;
        this.document = a.document;
        this.Ic = a.Ic;
        this.ba = a.ba
    }
    q3.prototype.VE = function () {
        return !this.ba.get(z3) || "youtubeThumbnail" !== this.document.pb().G() && "tACZCnmCPGY" !== this.document.pb().nf ? P.resolve(!1) : this.Ic.getItem("seenRecommendationsExpDialog").then(function (a) {
            return !a
        })
    };
    q3.prototype.render = function () {
        var a = {
                H: this.H
            },
            b = $(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"experimentsRecommendationsDialog"\x3e\x3cdiv class\x3d"experimentsRecommendationsDialog__closeButton"\x3e\x3c/div\x3e\x3cdiv class\x3d"experimentsRecommendationsDialog__container"\x3e\x3cdiv class\x3d"experimentsRecommendationsDialog__title"\x3eNice work, your \x3cspan class\x3d"experimentsRecommendationsDialog__title--bold"\x3eYouTube thumbnail\x3c/span\x3e is ready!\x3c/div\x3e\x3cdiv class\x3d"experimentsRecommendationsDialog__subTitle"\x3eGrow your YouTube channels audience and get more views by creating one of these designs next.\x3c/div\x3e\x3cdiv class\x3d"experimentsRecommendationsDialog__items"\x3e\x3ca href\x3d"/design?create\x3dtrue\x26category\x3dtACZChShqI0" target\x3d"_blank" class\x3d"experimentsRecommendationsDialog__item experimentsRecommendationsDialog__item--youtube" data-type\x3d"youtube channel art"\x3eYoutube channel art\x3c/a\x3e\x3ca href\x3d"/design?create\x3dtrue\x26category\x3dtACFavw5Wlg" target\x3d"_blank" class\x3d"experimentsRecommendationsDialog__item experimentsRecommendationsDialog__item--facebook" data-type\x3d"facebook post"\x3eFacebook post\x3c/a\x3e\x3ca href\x3d"/design?create\x3dtrue\x26category\x3dtACFakxKulQ" target\x3d"_blank" class\x3d"experimentsRecommendationsDialog__item experimentsRecommendationsDialog__item--social" data-type\x3d"social graphic"\x3eSocial media graphics\x3c/a\x3e\x3ca href\x3d"/design?create\x3dtrue\x26category\x3dtACFajEYUAM" target\x3d"_blank" class\x3d"experimentsRecommendationsDialog__item experimentsRecommendationsDialog__item--instagram" data-type\x3d"instagram post"\x3eInstagram post\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e').toString()),
            b = new q2(b);
        return {
            bc: new s2(a, b),
            view: b
        }
    };
    q3.prototype.JF = function () {
        this.Ic.setItem("seenRecommendationsExpDialog", !0)
    };
    q3.prototype.nE = function () {
        return "dialog--recommendationsExperiment"
    };
    var z3 = new yf("he", !1);

    function p3(a) {
        this.Ic = a.Ic;
        this.ba = a.ba;
        this.u = a.u;
        this.Od = a.Od;
        this.Ta = a.Ta;
        this.ma = a.ma;
        this.rc = a.rc;
        this.ka = a.ka;
        this.H = a.H;
        this.ja = a.ja
    }
    p3.prototype.VE = function () {
        return !this.ba.get(A3) || B3(this) >= this.ja.ba.get(Of) ? P.resolve(!1) : this.Ic.getItem("seenInviteExpDialog").then(function (a) {
            return !a
        })
    };
    p3.prototype.render = function (a) {
        var b = Xc(this.u),
            c = new y_,
            d = new x_({
                Mh: b
            }),
            b = zd(this.u),
            e = new v_({
                Qz: w_(this.Od),
                zw: ax(this.Ta).getSubscription(),
                ma: this.ma,
                Z: ax(this.Ta).wa(),
                tq: bx(this.Ta).Tb(),
                kD: Xl,
                ka: this.ka,
                rc: this.rc
            }),
            g = {
                tJ: 3,
                hF: 3,
                jl: this.ja.ba.get(Of),
                kJ: B3(this)
            },
            h = b.dH();
        return A2({
            Ns: b.sP(),
            Vg: h,
            Xs: b.tP(),
            zq: b.format("onboardingWizardTeamInvitesAddAnotherButtonLabel"),
            H: this.H,
            Mi: g,
            KM: function () {
                return a.WR()
            },
            g_: function (a) {
                return new u_({
                    cH: e,
                    KD: d,
                    Gi: c,
                    Vg: h,
                    Mi: g
                }, a)
            }
        })
    };

    function B3(a) {
        a = ax(a.Ta);
        return cx(a) + dx(a)
    }
    p3.prototype.JF = function () {
        this.Ic.setItem("seenInviteExpDialog", !0)
    };
    p3.prototype.nE = function () {
        return "dialog--inviteExperiment"
    };
    var A3 = new yf("gx", !1);

    function C3() {
        window.hasOwnProperty("grecaptchaPromise") || (window.grecaptchaPromise = new P(function (a, b) {
            window.grecaptchaOnload = a;
            a = document.createElement("script");
            a.onerror = b;
            a.src = "https://www.google.com/recaptcha/api.js?onload\x3dgrecaptchaOnload\x26render\x3dexplicit";
            document.head.appendChild(a)
        }));
        return window.grecaptchaPromise
    };

    function D3(a, b) {
        L.call(this, a);
        this.UB = null;
        this.$O = b
    }
    t(D3, L);
    D3.prototype.De = function () {
        var a = this;
        this.UB = window.grecaptcha.render(this.$el[0], {
            callback: function () {
                return a.trigger(E3)
            },
            "expired-callback": function () {
                return a.trigger(F3)
            },
            sitekey: this.$O
        })
    };
    D3.prototype.reset = function () {
        Da(null != this.UB, "reCAPTCHA widgetId has not been set, has #onAttach been called?");
        window.grecaptcha.reset(this.UB)
    };

    function G3(a) {
        Da(null != a.UB, "reCAPTCHA widgetId has not been set, has #onAttach been called?");
        a = window.grecaptcha.getResponse(a.UB);
        Da(a.length, "No response token from reCAPTCHA widget, has it been completed (or has it expired)?");
        return a
    }
    var E3 = "COMPLETE",
        F3 = "EXPIRED";

    function H_(a) {
        return C3().then(function () {
            w(window.grecaptcha, "reCAPTCHA API is not available, make sure it has been loaded by calling RecaptchaLoader.load()");
            var b = $('\x3cdiv class\x3d"grecaptchaWidget"\x3e\x3c/div\x3e');
            return new D3(b, a)
        })
    };

    function H3(a, b) {
        var c = this;
        L.call(this, a);
        this.className = b.className;
        this.options = b.options;
        a.on("click", function () {
            return c.Bf()
        })
    }
    t(H3, L);

    function I3(a) {
        Ba(a.options.some(function (a) {
            return a.selected
        }), "options must have a selected element");
        var b = a.options.filter(function (a) {
                return a.selected
            })[0],
            b = $(J3({
                text: b.jB || b.text,
                disabled: a.disabled
            }).toString());
        return new H3(b, a)
    }
    H3.prototype.Bf = function () {
        var a = this,
            b = new K3({
                className: this.className,
                options: this.options
            });
        b.on(L3, function (b) {
            return a.TM(b)
        });
        b.ci(this.$el)
    };
    H3.prototype.TM = function (a) {
        this.options.filter(function (a) {
            return a.selected
        })[0].selected = !1;
        var b = this.options.filter(function (b) {
            return b.value === a
        })[0];
        b.selected = !0;
        this.$el.text(b.jB || b.text);
        this.trigger(M3, a)
    };
    var M3 = "SELECT";

    function J3(a) {
        soy.asserts.assertType(goog.isString(a.text) || a.text instanceof goog.soy.data.SanitizedContent, "text", a.text, "string|goog.soy.data.SanitizedContent");
        var b = a.text;
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cbutton type\x3d"button" class\x3d"selectView" ' + (a.disabled ? 'disabled\x3d"disabled"' : "") + "\x3e" + soy.$$escapeHtml(b) + "\x3c/button\x3e")
    };

    function K3(a) {
        dy.call(this, a)
    }
    t(K3, dy);
    f = K3.prototype;
    f.initialize = function (a) {
        this.options = a.options;
        dy.prototype.initialize.call(this, {
            content: this.$N(),
            lw: !1,
            nv: !0,
            Qn: !1
        })
    };
    f.events = function () {
        return {
            "click .selectView__option": this.TM
        }
    };
    f.Xo = function () {
        return eW
    };
    f.$N = function () {
        var a = $,
            b;
        b = '\x3cdiv class\x3d"selectView__menu"\x3e';
        for (var c = goog.asserts.assertArray(this.options, "expected parameter 'options' of type list\x3c[disabled: bool|null, selected: bool, text: string, value: string]\x3e."), d = c.length, e = 0; e < d; e++) {
            var g = c[e];
            b += '\x3cdiv class\x3d"selectView__option' + (g.selected ? " selected" : "") + (g.disabled ? " selectView__option--disabled" : "") + '" data-value\x3d"' + soy.$$escapeHtmlAttribute(g.value) + '"\x3e' + soy.$$escapeHtml(g.text) + "\x3c/div\x3e"
        }
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml(b + "\x3c/div\x3e");
        return a(b.toString())
    };
    f.TM = function (a) {
        a = $(a.target);
        a.hasClass("selectView__option--disabled") || (this.trigger(L3, a.data("value")),
            this.remove())
    };
    var L3 = "SELECT";

    function N3(a) {
        var b = this;
        this.zb = a.zb;
        this.lc = a.lc;
        this.ky = a.ky;
        this.yt = a.yt;
        this.ge = a.ge;
        this.Z = a.Z;
        this.H = a.H;
        this.Nn = a.Nn;
        this.u = a.u;
        this.nb = a.nb;
        this.ka = a.ka;
        this.sc = a.sc;
        this.hd = a.hd;
        this.rc = a.rc;
        this.jr = a.jr;
        this.WO = a.WO;
        this.jl = a.jl;
        this.eo = a.eo;
        this.cr = a.cr;
        this.hB = a.hB;
        this.bI = a.bI;
        this.Aq = a.Aq;
        this.He = a.He;
        this.gO = a.gO;
        this.Vi = a.Vi;
        this.bN = null;
        this.jJ = {};
        this.nU = a.Aq ? "EDITOR" : "VIEWER";
        this.PA = {};
        this.so = new Map;
        this.NB = a.NB;
        this.view = a.view;
        this.Cv = a.Cv;
        this.Lz = a.Lz;
        this.yn = null;
        this.ZL = a.ZL;
        this.ba = a.ba;
        this.Bt = a.Bt;
        this.Fa = a.Fa;
        this.LW = !1;
        this.Jo = null;
        this.dw = a.dw;
        this.kn = a.kn;
        this.Io = a.Io;
        this.ja = new Af(this.ba);
        this.dw.on(O3, function () {
            var a = b.view;
            a.Nd.show(a.$el);
            a.delegateEvents()
        });
        this.dw.on(P3, function () {
            return b.view.ok()
        });
        this.listenTo(this.view, {
            roleChange: this.S3,
            linkRoleChange: this.MM,
            linkCopy: this.s3,
            tabChanged: this.i4,
            embedCopy: this.n7,
            submit: this.lv,
            social: this.Y3,
            makePublic: this.t3,
            nativeShare: this.E3,
            nativeSharePlatform: this.UU,
            oauthResp: this.I3
        });
        this.jr && this.listenTo(this.jr, {
            input: function () {
                return Q3(b.view)
            }
        });
        this.Io && P1(this.Io, function () {
            return Q3(b.view)
        })
    }

    function G_(a) {
        var b = CU(a.zb, a.eo, "sharebutton", "link"),
            c;
        a.EX ? (c = a.zb,
            c = AU(c, "share") + "?role\x3dVIEWER\x26token\x3d" + encodeURIComponent(a.EX) + "\x26" + DU(c, "sharebutton", "link")) : c = null;
        var d;
        a.cr ? (d = a.zb,
            d = AU(d, "share") + "?role\x3dEDITOR\x26token\x3d" + encodeURIComponent(a.cr) + "\x26" + DU(d, "sharebutton", "link")) : d = null;
        var e = BU(a.zb, a.eo) + "?website",
            g = Nc(a.u),
            g = [g.format("shareDesignDialogTweet1"), g.format("shareDesignDialogTweet2"), g.format("shareDesignDialogTweet3"), g.format("shareDesignDialogTweet4")],
            h = bx(a.Ta),
            k = ax(a.Ta),
            l = cx(k) + dx(k),
            l = a.R0 && null === k.getSubscription() && l < a.jl,
            m = new r1(Vc(a.u)),
            m = R3({
                zb: a.zb,
                lc: a.lc,
                ya: h.G(),
                Z: k.wa(),
                H: a.H,
                ma: a.ma,
                ka: a.ka,
                sb: a.sb,
                sc: a.sc,
                Eb: a.Eb,
                u: a.u,
                aa: a.aa,
                Dd: a.Dd,
                js: m,
                oM: new S3,
                ba: a.ba
            });
        return new N3({
            zb: a.zb,
            lc: a.lc,
            ky: a.ky,
            ge: h,
            Z: k.wa(),
            H: a.H,
            nb: a.nb,
            ka: a.ka,
            sc: a.sc,
            hd: a.hd,
            rc: a.rc,
            jr: a.jr,
            yt: a.yt,
            Nn: a.Nn,
            WO: l,
            jl: a.jl,
            eo: a.eo,
            cr: a.cr,
            hB: b,
            bI: c,
            Aq: d,
            gO: e,
            He: a.He,
            Vi: a.Vi,
            NB: g,
            u: a.u,
            aa: a.aa,
            Bt: a.Bt,
            Fa: a.Fa,
            dw: m,
            view: a.view,
            Cv: a.Cv,
            Lz: a.Lz,
            ZL: T3,
            ba: a.ba,
            kn: a.kn,
            Io: a.Io
        })
    }
    f = N3.prototype;
    f.show = function () {
        this.view.show();
        var a = this.view,
            b = this.bI,
            c = !this.Aq;
        a.$(".shareDialog__hiddenViewLink").val(b);
        a.$(".shareDialog__linkRole select").prop("disabled", c);
        U3(this.view, this.Aq || this.hB);
        this.ba.get(V3) && !this.ge.MT() ? (W3(this.view, !1),
            a = this.view,
            b = a.la.Ua("shareDesignDialogUnverifiedEmailWarning", "/account"),
            a.ef(X3, BY, b)) : this.ky && (W3(this.view, !1),
            a = this.view,
            W3(a, !1),
            b = a.la.format("shareDesignDialogEmptyDesignWarning"),
            a.ef(Y3, BY, b));
        if (this.He) {
            var c = this.Vi.qs ? this.Vi.wH ? Nc(this.u).format("shareDesignDialogRenderWebsiteWarning") : Nc(this.u).format("shareDesignDialogRenderWebsiteBeta") : Nc(this.u).format("shareDesignDialogRenderWebsiteWarningUnrenderable"),
                a = this.view,
                d = this.gO,
                b = this.Vi.qs,
                e = a.la.format("shareDesignDialogRenderWebsiteInstruction"),
                g = a.Bp.dn();
            soy.asserts.assertType(goog.isString(g) || g instanceof goog.soy.data.SanitizedContent, "newLabel", g, "string|goog.soy.data.SanitizedContent");
            soy.asserts.assertType(goog.isString(e) || e instanceof goog.soy.data.SanitizedContent, "instruction", e, "string|goog.soy.data.SanitizedContent");
            soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "url", d, "string|goog.soy.data.SanitizedContent");
            soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "warning", c, "string|goog.soy.data.SanitizedContent");
            c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d"newFeatureLabel shareDialog__websiteAnnouncementNewLabel"\x3e' + soy.$$escapeHtml(g) + '\x3c/span\x3e\x3cdiv class\x3d"shareDialog__websiteAnnouncementInstruction"\x3e' + soy.$$escapeHtml(e) + '\x3c/div\x3e\x3ca class\x3d"shareDialog__websiteAnnouncementLink" target\x3d"_blank" href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(d)) + '"\x3e' + soy.$$escapeHtml(d) + '\x3c/a\x3e\x3cdiv class\x3d"shareDialog__websiteAnnouncementWarning"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e").toString();
            yY({
                type: b ? AY : BY,
                Hb: !1,
                small: !0,
                message: soydata.VERY_UNSAFE.ordainSanitizedHtml(c)
            }).$el.appendTo(a.$(".shareDialog__websiteAnnouncement"))
        }
        Z3(this);
        $3(this)
    };

    function $3(a) {
        cq(a.nb, a.zb).then(function (b) {
            var c = a4(b);
            a.bN = c.tj().Qa();
            a.yt && b4(a, b);
            if (c.tj().wa() === a.Z.G())
                return c4(a).then(function (c) {
                    if (1 != c)
                        return d4(a, b).then(function (c) {
                            return e4(a, c, b.Wf().Sy())
                        })
                })
        }).catch(function (b) {
            var c = a.view,
                d = c.la.format("shareDesignDialogLoadError");
            c.ef(f4, CY, d);
            throw b;
        })
    }

    function Z3(a) {
        sx(a.sc, new Rx({
            Uv: a.ge.G()
        })).then(function (b) {
            a.Jo = b.Jo
        })
    }

    function g4(a, b) {
        function c(a) {
            return {
                displayName: a.Tb() || a.rg(),
                username: a.rg()
            }
        }
        return b === a.ge.G() ? P.resolve(c(a.ge.JB())) : a.ka.Qa(b).then(function (a) {
            return c(a)
        })
    }

    function b4(a, b) {
        var c = b.Wf().Sy().some(function (a) {
            if ("DEFAULT" === a.Ab())
                return "NONE" !== a.Ii()
        });
        b = a.bN;
        w(b, "ownerId not found");
        g4(a, b).then(function (b) {
            b = a.yt(b.displayName, b.username);
            h4(a.view, c, b)
        })
    }

    function a4(a) {
        var b = null;
        a.Wf().Sy().some(function (a) {
            if ("OWNER" === a.Ii())
                return b = a, !0
        });
        w(b, "document acl must specify an owner");
        return b
    }

    function c4(a) {
        var b = Ow((new Lw).Hg(a.Z.G()));
        return a.ka.zy(b).then(function (a) {
            return a.getCount()
        })
    }

    function d4(a, b) {
        b = b.Wf().Sy().reduce(function (b, d) {
            "USER" !== d.Ab() || d.tj().wa() !== a.Z.G() || null != d.Ve() && "MANUAL" !== d.Ve().Ab() || b.push(d.tj().Qa());
            return b
        }, []);
        return 0 < b.length ? (b = Nw(Mw(Pw((new Lw).Hg(a.Z.G()), b.slice(0, 100)).Ig(100))),
            a.ka.zy(b).then(function (a) {
                return a.rE()
            })) : P.resolve([])
    }

    function e4(a, b, c) {
        var d, e = {},
            g = [],
            h = {};
        b.forEach(function (a) {
            return e[a.Qa().G()] = a
        });
        c.forEach(function (b) {
            b.Ve() && "FOLDER" === b.Ve().Ab() ? "NONE" !== b.Ii() && (h[b.Ve().G()] = !0) : "BRAND" === b.Ab() && b.tj().wa() == a.Z.G() ? (d = {
                    Z: a.Z,
                    xC: b
                },
                a.jJ[a.Z.G()] = b.Ii()) : "USER" === b.Ab() && e.hasOwnProperty(b.tj().Qa()) && (g.push({
                    Oz: e[b.tj().Qa()],
                    xC: b,
                    disabled: !i4(a, b)
                }),
                a.jJ[b.tj().Qa()] = b.Ii())
        });
        d || (d = {
            Z: a.Z,
            xC: Jq({
                role: "NONE"
            })
        });
        j4(a.view, d, g, Object.keys(h).length)
    }

    function i4(a, b) {
        return b.tj().Qa() != a.ge.G() && "OWNER" != b.Ii()
    }
    f.S3 = function (a, b) {
        this.PA[a] = b
    };
    f.MM = function (a) {
        "VIEWER" === a ? U3(this.view, this.hB) : "EDITOR" === a && this.Aq && U3(this.view, this.Aq);
        this.nU = a
    };
    f.s3 = function () {
        var a = X(X(X(new Hl("design_shared"), "location", "sharebutton"), "medium", "link"), "access_level", k4(this.nU));
        xl(this.H, a)
    };

    function k4(a) {
        return "OWNER" === a || "EDITOR" === a ? "edit" : "REMIXER" === a || "VIEWER" === a ? "view" : "none"
    }
    f.Y3 = function (a) {
        a === l4 ? (a = this.NB[Math.floor(Math.random() * this.NB.length)],
            a = "https://twitter.com/intent/tweet?url\x3d" + encodeURIComponent(CU(this.zb, this.eo, "sharebutton", "twitter")) + "\x26text\x3d" + encodeURIComponent(a),
            this.view.openWindow(a, 420, 550),
            this.view.ok(),
            xl(this.H, m4("TWITTER"))) : a === n4 && (a = "https://www.facebook.com/sharer/sharer.php?u\x3d" + encodeURIComponent(CU(this.zb, this.eo, "sharebutton", "facebook")),
            this.view.openWindow(a, 420, 550),
            this.view.ok(),
            xl(this.H, m4("FACEBOOK")));
        o4(this)
    };
    f.t3 = function () {
        var a = this;
        this.nb.es(this.zb).then(function () {
            h4(a.view, !0, null);
            a.Nn.trigger(X_)
        }).catch(function () {
            var b = a.view;
            b.$(".shareDialog__embedError").text(b.la.format("shareDesignDialogEmbedError"))
        })
    };
    f.E3 = function (a) {
        var b = [];
        this.so.forEach(function (a, d) {
            return a.enabled && b.push(d)
        });
        this.H.Ga(X(X(X(new Hl("social_share_flow_share_now"), "message", !!a), "facebook", -1 < b.indexOf("FACEBOOK")), "twitter", -1 < b.indexOf("TWITTER")));
        this.dw.show(a, b);
        this.view.hide()
    };

    function Q_(a) {
        if (!a.LW) {
            a.LW = !0;
            var b = ["FACEBOOK", "TWITTER"].map(function (b) {
                return a.Fa && mo(a.Fa, "CANVA_SD_NS_" + b) ? a.UU(b, !0).finally(function () {
                    return P.resolve()
                }) : P.resolve()
            });
            P.all([].concat([a.ZL()], la(b))).then(function () {
                a.view.$(".shareDialog__nativeSocialButton").prop("disabled", !1);
                a.view.tX = window.twttr.txt
            });
            p4(a.dw)
        }
    }
    f.UU = function (a, b) {
        var c = this;
        return this.so.has(a) ? (this.so.get(a).enabled = !this.so.get(a).enabled,
            q4(this, a),
            P.resolve()) : Tv(this.ka, new aw({
            user: this.ge.G(),
            platform: a
        })).then(function (d) {
            d.summary.valid && -1 < d.summary.permissions.indexOf("PUBLISH") ? (c.so.set(a, {
                    enabled: !0,
                    username: d.summary.username
                }),
                q4(c, a)) : b || (d = -1 < d.summary.Pt.indexOf("PUBLISH"),
                r4(c, a, d))
        }).catch(function () {
            return r4(c, a, !1)
        })
    };

    function r4(a, b, c) {
        var d = s4(a.view, b);
        t4(a.Bt, function () {
            var d = wv("platform", b),
                g = ["GET_BASIC_PROFILE", "PUBLISH"].map(yv.bind(null, "permission")),
                d = "/oauth/authorize/" + encodeURIComponent(d) + ("?permissions\x3d" + encodeURIComponent(g.join(","))) + (c ? "\x26reRequest\x3dtrue" : "");
            a.view.openWindow(d, 600, 550);
            a.H.Ga(X(new Hl("social_share_flow_load_authorisation_dialog"), "medium", b.toString().toLowerCase()))
        });
        u4(a.Bt, d)
    }
    f.I3 = function (a) {
        a.QP ? (this.so.delete(a.platform),
            this.H.Ga(X(new Hl("social_share_flow_load_authorise_cancel"), "medium", a.platform.toString().toLowerCase()))) : (this.so.set(a.platform, {
                enabled: !0,
                username: a.username
            }),
            this.H.Ga(X(new Hl("social_share_flow_load_authorise_confirm"), "medium", a.platform.toString().toLowerCase())));
        q4(this, a.platform)
    };

    function v4(a) {
        null !== a.yn ? (a.yn.reset(),
            P.resolve()) : a.Cv ? a.Lz(a.Cv).then(function (b) {
            w4(a.view).toggleClass("shareDialog__captchaContainer--hidden", !1);
            x4(a.view);
            a.yn = b;
            a.yn.on(E3, function () {
                W3(a.view, !0);
                a.view.tg(y4)
            });
            a.yn.on(F3, function () {
                W3(a.view, !1)
            });
            a.yn.$el.appendTo(w4(a.view));
            a.yn.De()
        }).catch(function (b) {
            W3(a.view, !1);
            z4(a.view);
            throw b;
        }) : (z4(a.view),
            P.reject(Error("reCAPTCHA requested but no siteKey provided")))
    }

    function q4(a, b) {
        var c = a.so.get(b),
            d = !(!c || !c.enabled),
            c = c ? c.username : null;
        if ("TWITTER" === b) {
            c && (c = "@" + c);
            var e = a.view;
            (e.DW = d) ? e.Mj(): e.$(".shareDialog__characterCount").empty()
        }
        d ? a.Fa && uo(a.Fa, "CANVA_SD_NS_" + b) : a.Fa && a.Fa.removeItem("CANVA_SD_NS_" + b);
        a = a.view;
        a.$(".shareDialog__" + b.toLowerCase()).toggleClass("shareDialog__nativeSocialButton--selected", d);
        e = 0 === a.$(".shareDialog__nativeSocialButton--selected").length;
        a.$(".shareDialog__shareButton").prop("disabled", e);
        b = a.$(".shareDialog__" + b.toLowerCase() + " .shareDialog__tooltip");
        d ? (w(c, "enabled platform must provide a tooltip"),
            b.text(c),
            a.Mj()) : b.text(b.data("tooltip"))
    }
    f.lv = function (a) {
        var b = this,
            c = [],
            d = [],
            e = [];
        (null != this.Io ? O1(this.Io) : this.jr.xE()).forEach(function (g) {
            if (g instanceof Jw) {
                var k = g.Qa().G();
                k != b.bN && k != b.ge.G() && c.push(Oq(k, b.Z.G(), a));
                g.bh() && d.push(g.bh())
            } else
                e.push.apply(e, [].concat(la(g.split(",").map(function (a) {
                    return a.trim()
                }).filter(function (a) {
                    return "" !== a
                }))))
        });
        var g;
        if (g = A4(this, e))
            this.view.tg(B4),
            null != this.Jo && e.length > this.Jo ? (aaa(this.view, this.Jo),
                g = !1) : g = !0;
        g ? (Object.keys(this.PA).forEach(function (a) {
                a === b.Z.G() ? c.push(Oq(null, a, b.PA[a])) : c.push(Oq(a, b.Z.G(), b.PA[a]));
                a = X(X(X(X(new Hl("access_level_change"), "location", "sharebutton"), "medium", "share_dialog"), "from_access_level", k4(b.jJ[a])), "to_access_level", k4(b.PA[a]));
                xl(b.H, a)
            }),
            P.all([baa(this, c), caa(this, d, e, a)]).then(function (a) {
                a = ka(a);
                a.next();
                if (a.next().value.some(function (a) {
                        return !!a.RN
                    }))
                    W3(b.view, !1),
                    C4(b.view),
                    v4(b);
                else if (0 < e.length && b.WO) {
                    a = daa(b.view, e, b.jl);
                    var c = X(X(new Hl("team_invites_shown"), "location", "sharebutton"), "medium", "share_dialog");
                    b.H.Ga(c);
                    eaa({
                        Z: b.Z,
                        H: b.H,
                        ka: b.ka,
                        rc: b.rc,
                        tq: b.ge.Tb(),
                        vF: e.length,
                        la: Nc(b.u),
                        kn: function () {
                            return b.kn()
                        }
                    }, a)
                } else
                    b.view.ok()
            }).catch(function (a) {
                C4(b.view);
                W3(b.view, !1);
                throw a;
            })) : C4(this.view)
    };

    function A4(a, b) {
        a.view.tg(D4);
        b = b.filter(function (a) {
            return !cH(a)
        });
        return b.length ? (C4(a.view),
            faa(a.view, b), !1) : !0
    }

    function baa(a, b) {
        if (0 === b.length)
            return P.resolve();
        b = xq(wq(a.zb), b);
        return fq(a.nb, b).catch(function (b) {
            E4(a.view);
            throw b;
        })
    }
    f.i4 = function (a) {
        ul(this.H, a, "share_dialog");
        "socialTab" === a && (xl(this.H, new Hl("social_share_flow_start")),
            Q_(this))
    };
    f.n7 = function () {
        tl(this.H, "embed_copy", null, null, "share_dialog")
    };

    function caa(a, b, c, d) {
        var e = [],
            g = a.yn && G3(a.yn);
        0 < b.length && e.push(px(a.sc, new Px({
            sG: g,
            zb: a.zb,
            Ia: a.Z.G(),
            mode: "VIEWER" === d ? "viewer" : "editor",
            dr: b,
            SB: "sharebutton"
        })));
        0 < c.length && e.push(px(a.sc, new Px({
            sG: g,
            zb: a.zb,
            mode: "VIEWER" === d ? "default" : "editor",
            Zg: "VIEWER" === d ? a.eo : a.cr,
            dr: c,
            SB: "shareButton"
        })));
        var h = k4(d);
        b.forEach(function () {
            return F4(a, h, !0)
        });
        c.forEach(function () {
            return F4(a, h, !1)
        });
        return P.all(e).then(function (b) {
            b.length && o4(a);
            return b
        }).catch(function (b) {
            g ? z4(a.view) : E4(a.view);
            throw b;
        })
    }

    function F4(a, b, c) {
        b = X(X(X(X(new Hl("design_shared"), "location", "sharebutton"), "medium", "share_dialog"), "access_level", b), "on_team", c);
        xl(a.H, b)
    }

    function o4(a) {
        sv(a.hd, new Ou({
            Dq: !0,
            Di: a.zb,
            ay: -1,
            kind: "IMAGESETS",
            mG: "MEDIUM",
            us: "web-1"
        }))
    }
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    var V3 = new yf("fm", !1);

    function gaa(a) {
        soy.asserts.assertType(goog.isString(a.cG) || a.cG instanceof goog.soy.data.SanitizedContent, "peopleTabLabel", a.cG, "string|goog.soy.data.SanitizedContent");
        var b = a.cG;
        soy.asserts.assertType(goog.isString(a.QG) || a.QG instanceof goog.soy.data.SanitizedContent, "socialTabLabel", a.QG, "string|goog.soy.data.SanitizedContent");
        var c = a.QG;
        soy.asserts.assertType(goog.isString(a.bF) || a.bF instanceof goog.soy.data.SanitizedContent, "linkTabLabel", a.bF, "string|goog.soy.data.SanitizedContent");
        var d = a.bF;
        soy.asserts.assertType(goog.isString(a.LD) || a.LD instanceof goog.soy.data.SanitizedContent, "embedTabLabel", a.LD, "string|goog.soy.data.SanitizedContent");
        var e = a.LD;
        soy.asserts.assertType(a.nj instanceof soydata.SanitizedHtml || a.nj instanceof soydata.UnsanitizedText || goog.isString(a.nj), "embedDescription", a.nj, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(a.rm) || a.rm instanceof goog.soy.data.SanitizedContent, "embedLabelHTML", a.rm, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.sm) || a.sm instanceof goog.soy.data.SanitizedContent, "embedLabeloEmbed", a.sm, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.qm) || 1 === a.qm || 0 === a.qm, "embedEnabled", a.qm, "boolean");
        var g = !!a.qm;
        soy.asserts.assertType(null == a.Wg || a.Wg instanceof goog.soy.data.SanitizedContent || goog.isString(a.Wg), "embedCode", a.Wg, "null|string|undefined");
        soy.asserts.assertType(goog.isString(a.um) || a.um instanceof goog.soy.data.SanitizedContent, "embedPublic", a.um, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.tm) || a.tm instanceof goog.soy.data.SanitizedContent, "embedMakePublic", a.tm, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Rm) || a.Rm instanceof goog.soy.data.SanitizedContent, "inviteLabel", a.Rm, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Qm) || a.Qm instanceof goog.soy.data.SanitizedContent, "inviteButton", a.Qm, "string|goog.soy.data.SanitizedContent");
        goog.asserts.assertObject(a.rw, "expected parameter 'socialButtons' of type map\x3cstring,string\x3e.");
        soy.asserts.assertType(goog.isBoolean(a.Jl) || 1 === a.Jl || 0 === a.Jl, "socialTabEnabled", a.Jl, "boolean");
        var h = !!a.Jl;
        soy.asserts.assertType(goog.isString(a.On) || a.On instanceof goog.soy.data.SanitizedContent, "shareLabel", a.On, "string|goog.soy.data.SanitizedContent");
        goog.asserts.assertObject(a.dv, "expected parameter 'nativeSocialButtons' of type map\x3cstring,string\x3e.");
        soy.asserts.assertType(goog.isString(a.cn) || a.cn instanceof goog.soy.data.SanitizedContent, "messagePlaceholder", a.cn, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Mn) || a.Mn instanceof goog.soy.data.SanitizedContent, "shareButton", a.Mn, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Ym) || a.Ym instanceof goog.soy.data.SanitizedContent, "linkLabel", a.Ym, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Og) || a.Og instanceof goog.soy.data.SanitizedContent, "copyButton", a.Og, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.He) || 1 === a.He || 0 === a.He, "renderAccessModeEnabled", a.He, "boolean");
        var k = !!a.He;
        soy.asserts.assertType(goog.isString(a.dn) || a.dn instanceof goog.soy.data.SanitizedContent, "newLabel", a.dn, "string|goog.soy.data.SanitizedContent");
        var l = a.dn;
        soy.asserts.assertType(null == a.zc || a.zc instanceof goog.soy.data.SanitizedContent || goog.isString(a.zc), "initialTab", a.zc, "null|string|undefined");
        var m = a.zc,
            n = goog.asserts.assertObject(a.b7, "expected parameter 'tabs' of type [EMBED: string, LINK: string, PEOPLE: string, SOCIAL: string].");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"shareDialog__tabWrapper"\x3e\x3cdiv class\x3d"shareDialog__tab' + (m && m != n.SH ? "" : " shareDialog__tab--on") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(n.SH) + '"\x3e' + soy.$$escapeHtml(b) + "\x3c/div\x3e" + (h ? '\x3cdiv class\x3d"shareDialog__tab' + (m == n.VH ? " shareDialog__tab--on" : "") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(n.VH) + '"\x3e' + soy.$$escapeHtml(c) + '\x3cspan class\x3d"newFeatureLabel"\x3e' + soy.$$escapeHtml(l) + "\x3c/span\x3e\x3c/div\x3e" : "") + '\x3cdiv class\x3d"shareDialog__tab' + (m == n.LINK ? " shareDialog__tab--on" : "") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(n.LINK) + '"\x3e' + soy.$$escapeHtml(d) + (k ? '\x3cspan class\x3d"newFeatureLabel"\x3e' + soy.$$escapeHtml(l) + "\x3c/span\x3e" : "") + "\x3c/div\x3e" + (g ? '\x3cdiv class\x3d"shareDialog__tab' + (m == n.EMBED ? " shareDialog__tab--on" : "") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(n.EMBED) + '"\x3e' + soy.$$escapeHtml(e) + "\x3c/div\x3e" : "") + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__tabContainer"\x3e' + haa(soy.$$assignDefaults({
            Ke: n.SH
        }, a)) + (h ? iaa(soy.$$assignDefaults({
            Ke: n.VH
        }, a)) : "") + jaa(soy.$$assignDefaults({
            Ke: n.LINK
        }, a)) + (g ? kaa(soy.$$assignDefaults({
            Ke: n.EMBED
        }, a)) : "") + "\x3c/div\x3e")
    }

    function haa(a) {
        soy.asserts.assertType(goog.isString(a.Rm) || a.Rm instanceof goog.soy.data.SanitizedContent, "inviteLabel", a.Rm, "string|goog.soy.data.SanitizedContent");
        var b = a.Rm;
        soy.asserts.assertType(goog.isString(a.Qm) || a.Qm instanceof goog.soy.data.SanitizedContent, "inviteButton", a.Qm, "string|goog.soy.data.SanitizedContent");
        var c = a.Qm;
        soy.asserts.assertType(goog.isBoolean(a.Jl) || 1 === a.Jl || 0 === a.Jl, "socialTabEnabled", a.Jl, "boolean");
        var d = !!a.Jl,
            e = goog.asserts.assertObject(a.rw, "expected parameter 'socialButtons' of type map\x3cstring,string\x3e.");
        soy.asserts.assertType(null == a.zc || a.zc instanceof goog.soy.data.SanitizedContent || goog.isString(a.zc), "initialTab", a.zc, "null|string|undefined");
        var g = a.zc;
        soy.asserts.assertType(goog.isString(a.Ke) || a.Ke instanceof goog.soy.data.SanitizedContent, "tabId", a.Ke, "string|goog.soy.data.SanitizedContent");
        a = a.Ke;
        b = '\x3cdiv class\x3d"shareDialog__tabContent' + (g && g != a ? "" : " shareDialog__tabContent--on") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv class\x3d"shareDialog__acl"\x3e\x3c/div\x3e\x3cdiv\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__members"\x3e\x3cdiv class\x3d"shareDialog__inviteRole"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__folders"\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__error"\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__captchaContainer shareDialog__captchaContainer--hidden"\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__buttons"\x3e' + bZ({
            J: "shareDialog__inviteButton buttonSubmittable",
            text: c
        });
        if (!d) {
            b += '\x3cspan class\x3d"shareDialog__socialButtons"\x3e';
            d = soy.$$getMapKeys(e);
            c = d.length;
            for (g = 0; g < c; g++)
                a = d[g],
                b += bZ({
                    J: a,
                    text: e[a]
                });
            b += "\x3c/span\x3e"
        }
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b + "\x3c/div\x3e\x3c/div\x3e")
    }

    function G4(a) {
        var b;
        a = a || {};
        soy.asserts.assertType(null == a.email || a.email instanceof goog.soy.data.SanitizedContent || goog.isString(a.email), "email", a.email, "null|string|undefined");
        var c = a.email;
        soy.asserts.assertType(null == a.name || a.name instanceof goog.soy.data.SanitizedContent || goog.isString(a.name), "name", a.name, "null|string|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"shareDialog__aclMember"\x3e\x3cdiv class\x3d"shareDialog__aclMemberAvatar"\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__aclMemberNameEmail"\x3e\x3cspan class\x3d"shareDialog__aclMemberName"\x3e' + soy.$$escapeHtml(null == (b = a.name) ? "" : b) + '\x3c/span\x3e\x3cspan class\x3d"shareDialog__aclMemberEmail"\x3e' + soy.$$escapeHtml(null == (b = c) ? "" : b) + '\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__aclMemberRole"\x3e\x3c/div\x3e\x3c/div\x3e')
    }

    function jaa(a) {
        soy.asserts.assertType(goog.isString(a.Ym) || a.Ym instanceof goog.soy.data.SanitizedContent, "linkLabel", a.Ym, "string|goog.soy.data.SanitizedContent");
        var b = a.Ym;
        soy.asserts.assertType(goog.isString(a.Og) || a.Og instanceof goog.soy.data.SanitizedContent, "copyButton", a.Og, "string|goog.soy.data.SanitizedContent");
        var c = a.Og;
        soy.asserts.assertType(null == a.zc || a.zc instanceof goog.soy.data.SanitizedContent || goog.isString(a.zc), "initialTab", a.zc, "null|string|undefined");
        var d = a.zc;
        soy.asserts.assertType(goog.isString(a.Ke) || a.Ke instanceof goog.soy.data.SanitizedContent, "tabId", a.Ke, "string|goog.soy.data.SanitizedContent");
        a = a.Ke;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"shareDialog__tabContent' + (d == a ? " shareDialog__tabContent--on" : "") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__linkInputContainer"\x3e' + u0({
            J: "shareDialog__link",
            id: "shareDialog__shareLink",
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks("readonly")
        }) + u0({
            J: "shareDialog__hiddenViewLink",
            type: "hidden",
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('readonly tabindex\x3d"-1"')
        }) + '\x3cdiv class\x3d"shareDialog__linkRole"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__buttons"\x3e' + bZ({
            J: "shareDialog__copyButton shareDialog__linkCopy",
            text: c,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-clipboard-target\x3d"shareDialog__shareLink" data-event\x3d"linkCopy"')
        }) + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__websiteAnnouncement"\x3e\x3c/div\x3e\x3c/div\x3e')
    }

    function kaa(a) {
        soy.asserts.assertType(a.nj instanceof soydata.SanitizedHtml || a.nj instanceof soydata.UnsanitizedText || goog.isString(a.nj), "embedDescription", a.nj, "soydata.SanitizedHtml");
        var b = a.nj;
        soy.asserts.assertType(goog.isString(a.Og) || a.Og instanceof goog.soy.data.SanitizedContent, "copyButton", a.Og, "string|goog.soy.data.SanitizedContent");
        var c = a.Og;
        soy.asserts.assertType(null == a.Wg || a.Wg instanceof goog.soy.data.SanitizedContent || goog.isString(a.Wg), "embedCode", a.Wg, "null|string|undefined");
        var d = a.Wg;
        soy.asserts.assertType(goog.isString(a.rl) || a.rl instanceof goog.soy.data.SanitizedContent, "oEmbedCode", a.rl, "string|goog.soy.data.SanitizedContent");
        var e = a.rl;
        soy.asserts.assertType(goog.isString(a.um) || a.um instanceof goog.soy.data.SanitizedContent, "embedPublic", a.um, "string|goog.soy.data.SanitizedContent");
        var g = a.um;
        soy.asserts.assertType(goog.isString(a.tm) || a.tm instanceof goog.soy.data.SanitizedContent, "embedMakePublic", a.tm, "string|goog.soy.data.SanitizedContent");
        var h = a.tm;
        soy.asserts.assertType(goog.isString(a.rm) || a.rm instanceof goog.soy.data.SanitizedContent, "embedLabelHTML", a.rm, "string|goog.soy.data.SanitizedContent");
        var k = a.rm;
        soy.asserts.assertType(goog.isString(a.sm) || a.sm instanceof goog.soy.data.SanitizedContent, "embedLabeloEmbed", a.sm, "string|goog.soy.data.SanitizedContent");
        var l = a.sm;
        soy.asserts.assertType(null == a.zc || a.zc instanceof goog.soy.data.SanitizedContent || goog.isString(a.zc), "initialTab", a.zc, "null|string|undefined");
        var m = a.zc;
        soy.asserts.assertType(goog.isString(a.Ke) || a.Ke instanceof goog.soy.data.SanitizedContent, "tabId", a.Ke, "string|goog.soy.data.SanitizedContent");
        a = a.Ke;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"shareDialog__tabContent' + (m == a ? " shareDialog__tabContent--on" : "") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv class\x3d"shareDialog__embeddable"\x3e' + soy.$$escapeHtml(b) + '\x3cdiv class\x3d"shareDialog__embedOverlayContainer"\x3e\x3cp\x3e' + soy.$$escapeHtml(k) + '\x3c/p\x3e\x3cdiv class\x3d"shareDialog__comboRow"\x3e\x3cinput type\x3d"text" id\x3d"shareDialog__shareEmbed" class\x3d"shareDialog__shareEmbed" value\x3d"' + soy.$$escapeHtmlAttribute(null == d ? "" : d) + '"\x3e' + bZ({
            J: "shareDialog__copyButton shareDialog__copyButton--embed",
            text: c,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-clipboard-target\x3d"shareDialog__shareEmbed"')
        }) + "\x3c/div\x3e\x3cp\x3e" + soy.$$escapeHtml(l) + '\x3c/p\x3e\x3cdiv class\x3d"shareDialog__comboRow"\x3e\x3cinput type\x3d"text" id\x3d"shareDialog__shareOEmbed" class\x3d"shareDialog__shareOEmbed" value\x3d"' + soy.$$escapeHtmlAttribute(e) + '"\x3e' + bZ({
            J: "shareDialog__copyButton shareDialog__copyButton--embed",
            text: c,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-clipboard-target\x3d"shareDialog__shareOEmbed"')
        }) + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__embedOverlay"\x3e\x3cp\x3e' + soy.$$escapeHtml(g) + "\x3c/p\x3e" + bZ({
            J: "shareDialog__publicButton",
            text: h
        }) + '\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"shareDialog__embedError"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')
    }

    function iaa(a) {
        soy.asserts.assertType(goog.isString(a.On) || a.On instanceof goog.soy.data.SanitizedContent, "shareLabel", a.On, "string|goog.soy.data.SanitizedContent");
        var b = a.On,
            c = goog.asserts.assertObject(a.dv, "expected parameter 'nativeSocialButtons' of type map\x3cstring,string\x3e.");
        soy.asserts.assertType(goog.isString(a.cn) || a.cn instanceof goog.soy.data.SanitizedContent, "messagePlaceholder", a.cn, "string|goog.soy.data.SanitizedContent");
        var d = a.cn;
        soy.asserts.assertType(goog.isString(a.Mn) || a.Mn instanceof goog.soy.data.SanitizedContent, "shareButton", a.Mn, "string|goog.soy.data.SanitizedContent");
        var e = a.Mn;
        soy.asserts.assertType(null == a.zc || a.zc instanceof goog.soy.data.SanitizedContent || goog.isString(a.zc), "initialTab", a.zc, "null|string|undefined");
        var g = a.zc;
        soy.asserts.assertType(goog.isString(a.Ke) || a.Ke instanceof goog.soy.data.SanitizedContent, "tabId", a.Ke, "string|goog.soy.data.SanitizedContent");
        a = a.Ke;
        b = '\x3cdiv class\x3d"shareDialog__tabContent' + (g == a ? " shareDialog__tabContent--on" : "") + '" data-id\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv\x3e\x3cdiv class\x3d"shareDialog__social"\x3e\x3cspan class\x3d"shareDialog__shareLabel"\x3e' + soy.$$escapeHtml(b) + "\x3c/span\x3e";
        g = soy.$$getMapKeys(c);
        a = g.length;
        for (var h = 0; h < a; h++)
            var k = g[h],
                b = b + ('\x3cbutton class\x3d"shareDialog__nativeSocialButton ' + soy.$$escapeHtmlAttribute(k) + '" disabled\x3e\x3cspan class\x3d"shareDialog__tooltip" data-tooltip\x3d"' + soy.$$escapeHtmlAttribute(c[k]) + '"\x3e' + soy.$$escapeHtml(c[k]) + "\x3c/span\x3e\x3c/button\x3e");
        b += '\x3c/div\x3e\x3ctextarea class\x3d"shareDialog__shareMessage" placeholder\x3d"' + soy.$$escapeHtmlAttribute(d) + '"\x3e\x3c/textarea\x3e\x3cdiv class\x3d"shareDialog__socialFooter"\x3e\x3cdiv class\x3d"shareDialog__buttons"\x3e' + bZ({
            J: "shareDialog__shareButton",
            text: e,
            disabled: !0
        }) + '\x3c/div\x3e\x3cspan class\x3d"shareDialog__characterCount"\x3e\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e';
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)
    };

    function H4(a) {
        Uo.call(this, {
            className: "shareDialog",
            aa: a.aa,
            title: a.la.title()
        });
        this.aH = "https://support.canva.com/troubleshooting/sharing-your-design/";
        this.ym = a.ym;
        this.Vt = a.Vt;
        this.qm = a.qm;
        this.Wg = a.Wg;
        this.rl = a.rl;
        this.cP = a.cP;
        this.He = a.He;
        this.la = a.la;
        this.Ct = a.Ct;
        this.Bp = a.Bp;
        this.BU = !1;
        this.HT = "EDITOR";
        this.DW = !1;
        this.rw = {};
        this.rw[l4] = this.la.format("shareDesignDialogTwitterLabel");
        this.rw[n4] = this.la.format("shareDesignDialogFacebookLabel");
        this.dv = {};
        this.dv.shareDialog__twitter = this.la.format("shareDesignDialogTwitterTooltip");
        this.dv.shareDialog__facebook = this.la.format("shareDesignDialogFacebookTooltip");
        this.tX = null;
        this.W5 = [{
            value: "EDITOR",
            text: Je(this.la),
            jB: Ke(this.la),
            selected: !0
        }, {
            value: "VIEWER",
            text: Le(this.la),
            jB: Me(this.la),
            selected: !1
        }];
        this.e1 = [{
            value: "EDITOR",
            text: Je(this.la),
            jB: Ke(this.la),
            selected: !0
        }, {
            value: "VIEWER",
            text: Le(this.la),
            jB: Me(this.la),
            selected: !1
        }];
        this.zc = a.zc;
        this.aV = this.A0.bind(this)
    }
    t(H4, Uo);

    function F_(a) {
        return new H4({
            aa: a.aa,
            ym: a.ym,
            Vt: a.Vt,
            Ct: a.Ct,
            qm: a.ja.ba.get(Wf),
            Wg: a.Wg,
            rl: a.rl,
            cP: a.ja.ba.get(bg),
            He: a.ja.He(),
            la: Nc(a.u),
            Bp: od(a.u),
            zc: a.zc
        })
    }
    f = H4.prototype;
    f.events = function () {
        var a = this;
        return _.extend(Uo.prototype.events.call(this), {
            "click .shareDialog__tab": this.j4,
            "click .shareDialog__inviteButton": this.h3,
            "click .shareDialog__link": function (a) {
                return $(a.target).select()
            },
            "click .shareDialog__publicButton": function () {
                return a.trigger("makePublic")
            },
            "click .shareDialog__copyButton--embed": function () {
                return a.trigger("embedCopy")
            },
            "copy #shareDialog__shareEmbed": function () {
                return a.trigger("embedCopy")
            },
            "cut #shareDialog__shareEmbed": function () {
                return a.trigger("embedCopy")
            },
            "click #shareDialog__shareEmbed": function (a) {
                return $(a.target).select()
            },
            "click .shareDialog__shareButton": function () {
                return a.trigger("nativeShare", a.$(".shareDialog__shareMessage").val())
            },
            "click .buttonTwitter": function () {
                return a.trigger("social", l4)
            },
            "click .buttonFacebook": function () {
                return a.trigger("social", n4)
            },
            "click .shareDialog__twitter": function () {
                return a.trigger("nativeSharePlatform", "TWITTER")
            },
            "click .shareDialog__facebook": function () {
                return a.trigger("nativeSharePlatform", "FACEBOOK")
            },
            "input .shareDialog__shareMessage": this.Mj
        })
    };
    f.j4 = function (a) {
        var b = this.$(".dialog");
        b.css("top", b.offset().top + "px");
        b.addClass("shareDialog--fixed");
        this.$(".shareDialog__tab").removeClass("shareDialog__tab--on");
        a = $(a.target);
        a.addClass("shareDialog__tab--on");
        this.$(".shareDialog__tabContent").removeClass("shareDialog__tabContent--on").find(".selectView, input:not(:hidden), button").prop("tabIndex", -1);
        a = a.data("id");
        this.$('.shareDialog__tabContent[data-id\x3d"' + a + '"]').addClass("shareDialog__tabContent--on").find(".selectView, input:not(:hidden), button").prop("tabIndex", 0);
        this.trigger("tabChanged", a)
    };

    function U3(a, b) {
        a.$(".shareDialog__link").val(b)
    }

    function I4(a, b, c) {
        a.$(".shareDialog__inviteButton").text(a.la.format("shareDesignDialogSaveChanges"));
        a.BU = !0;
        a.trigger("roleChange", b, c)
    }
    f.MM = function (a) {
        this.trigger("linkRoleChange", a);
        this.$(".shareDialog__tabContent--on").find(".textInput").focus().select();
        this.$(".shareDialog__linkCopy").text(this.la.Og())
    };
    f.h3 = function (a) {
        $(a.target).toggleClass("submitting", !0);
        this.trigger("submit", this.HT)
    };
    f.openWindow = function (a, b, c) {
        window.open(a, "", "scrollbars\x3dyes,resizable\x3dyes,toolbar\x3dno,location\x3dyes,width\x3d" + b + ",height\x3d" + c + ",left\x3d445,top\x3d240")
    };

    function laa(a) {
        var b = document.queryCommandSupported("copy");
        if (b)
            try {
                document.execCommand("copy")
            } catch (c) {
                b = !1
            }
        a.$(".shareDialog__copyButton").each(function (c, d) {
            if (b)
                $(d).on("click", function (b) {
                    try {
                        document.execCommand("copy", !1, a.$("#" + $(b.target).attr("data-clipboard-target")).select()),
                            J4(a, b)
                    } catch (c) {}
                });
            else
                new ZeroClipboard(d),
                $(d).on("click", function (b) {
                    return J4(a, b)
                })
        })
    }

    function J4(a, b) {
        b = $(b.target);
        b.text(a.la.format("shareDesignDialogCopiedButton"));
        (b = b.data("event")) && a.trigger(b)
    }
    f.Mj = function () {
        if (this.DW) {
            var a = this.$(".shareDialog__shareMessage").val(),
                a = a ? this.tX.getTweetLength(a) : 0;
            this.$(".shareDialog__characterCount").text(this.la.format("shareDesignDialogCharacterCount", a));
            a = 140 < a;
            this.$el.toggleClass("shareDialog--withTwitterWarning", a);
            this.$(".shareDialog__shareButton").prop("disabled", a)
        }
    };
    f.render = function () {
        var a = this;
        Uo.prototype.render.call(this);
        this.$(".content").html(gaa({
            cG: this.la.format("shareDesignDialogPeople"),
            QG: this.la.I6(),
            bF: this.la.link(),
            LD: this.la.format("shareDesignDialogEmbed"),
            nj: this.la.nj(),
            Wg: this.Wg,
            rl: this.rl,
            qm: this.qm,
            um: this.la.um(),
            tm: this.la.tm(),
            rm: this.la.rm(),
            sm: this.la.sm(),
            Rm: this.la.Rm(),
            Qm: this.la.Qm(),
            rw: this.rw,
            Jl: this.cP,
            On: this.la.On(),
            dv: this.dv,
            cn: this.la.cn(),
            Mn: this.la.Mn(),
            Ym: this.la.Ym(),
            Og: this.la.Og(),
            He: this.He,
            dn: this.Bp.dn(),
            zc: this.zc,
            b7: maa
        }).toString());
        var b = I3({
            className: "shareDialog",
            options: this.W5
        });
        b.on(M3, function (b) {
            a.HT = b;
            a.$(".shareDialog__tabContent--on").find(".textInput").focus();
            a.ym && z1(a.ym)
        });
        var c = this.$(".shareDialog__inviteRole");
        c.append(b.$el);
        null != this.Vt ? c.before(this.Vt.$el) : c.before(this.ym.$el);
        b = I3({
            className: "shareDialog",
            options: this.e1
        });
        b.on(M3, function (b) {
            return a.MM(b)
        });
        this.$(".shareDialog__linkRole").append(b.$el);
        this.$(".shareDialog__tabContent").not("[data-id\x3dpeopleTab]").find("select, input, button").prop("tabIndex", -1);
        laa(this);
        return this
    };
    f.show = function () {
        window.addEventListener("message", this.aV);
        this.Ct.$el.appendTo($("body"));
        return Uo.prototype.show.call(this)
    };
    f.remove = function () {
        window.removeEventListener("message", this.aV);
        this.Ct.remove();
        Uo.prototype.remove.call(this)
    };
    f.hide = function () {
        this.Nd.hide()
    };
    f.A0 = function (a) {
        var b = a.data && void 0 !== a.data.oauthResp;
        a.origin && a.origin === window.location.origin && b && (a = Na(Dv, "oauthResp", a.data),
            this.trigger("oauthResp", a))
    };

    function W3(a, b) {
        a.$(".shareDialog__inviteButton").prop("disabled", !b);
        a.ym && a.ym.dg(b);
        a.$(".shareDialog__inviteRole \x3e button").prop("disabled", !b)
    }

    function w4(a) {
        return a.$(".shareDialog__captchaContainer")
    }

    function x4(a) {
        var b = a.la.format("shareDesignDialogCaptchaMessage");
        a.ef(y4, BY, b)
    }

    function z4(a) {
        var b = a.la.Ua("shareDesignDialogCaptchaFailure", a.aH);
        a.ef(naa, CY, b)
    }

    function aaa(a, b) {
        b = 0 === b ? a.la.Ua("shareDesignDialogEmailQuotaReached", a.aH) : a.la.Ua("shareDesignDialogEmailQuotaLimited", b, a.aH);
        a.ef(B4, CY, b)
    }

    function j4(a, b, c, d) {
        var e = a.$(".shareDialog__acl"),
            g = $(G4({
                email: a.la.format("shareDesignDialogAllMembers"),
                name: b.Z.Tb() || a.la.format("shareDesignDialogDefaultBrandName")
            }).toString()),
            h = K4({
                Z: b.Z,
                size: 40
            });
        g.find(".shareDialog__aclMemberAvatar").append(h.render().$el);
        h = I3({
            className: "shareDialog",
            options: L4(a, b.xC.Ii())
        });
        h.on(M3, function (c) {
            return I4(a, b.Z.G(), c)
        });
        g.find(".shareDialog__aclMemberRole").append(h.$el);
        e.append(g);
        c.forEach(function (b) {
            var c = $(G4({
                    email: b.Oz.bh(),
                    name: b.Oz.Qa().Tb() || b.Oz.Qa().rg()
                }).toString()),
                d = M4({
                    user: b.Oz.Qa(),
                    size: 40
                });
            c.find(".shareDialog__aclMemberAvatar").append(d.render().$el);
            d = I3({
                className: "shareDialog",
                options: L4(a, b.xC.Ii()),
                disabled: b.disabled
            });
            d.on(M3, function (c) {
                return I4(a, b.Oz.Qa().G(), c)
            });
            c.find(".shareDialog__aclMemberRole").append(d.$el);
            e.append(c)
        });
        0 < d && a.$(".shareDialog__folders").text(a.la.ld(d))
    }

    function h4(a, b, c) {
        null != c && a.$(".shareDialog__shareEmbed").val(c);
        b ? a.$(".shareDialog__embedOverlay").removeClass("shareDialog__embedOverlay--visible") : a.$(".shareDialog__embedOverlay").addClass("shareDialog__embedOverlay--visible")
    }

    function Q3(a) {
        a.BU || a.$(".shareDialog__inviteButton").text(a.la.format("shareDesignDialogSendInvites"))
    }

    function daa(a, b, c) {
        Uo.prototype.u6.call(a, a.la.format("shareDesignDialogInviteMembersTitle"));
        b = oaa({
            Br: soydata.VERY_UNSAFE.ordainSanitizedHtml(a.la.Br(c, bm())),
            Eu: a.la.Eu(),
            Fu: a.la.Fu(),
            gj: Cw.sizes.get("50").Aa(),
            dr: b
        });
        b.on(N4, function () {
            return a.ok()
        });
        a.$(".content").html(b.$el);
        return b
    }

    function E4(a) {
        var b = a.la.format("shareDesignDialogUpdateError");
        a.ef(paa, CY, b)
    }

    function s4(a, b) {
        var c = ".shareDialog__" + b.toLowerCase(),
            d = a.$el.find(c);
        w(d, "{}'s button isn't present", b);
        a = a.$el.find(c).offset();
        return {
            x: a.left,
            y: a.top
        }
    }

    function faa(a, b) {
        var c = b.join(", ");
        b = a.la.format("shareDesignDialogValidateEmailError", b.length, c);
        a.ef(D4, CY, b)
    }

    function C4(a) {
        a.$(".buttonSubmittable").toggleClass("submitting", !1)
    }

    function L4(a, b) {
        return "OWNER" === b ? [{
            value: "OWNER",
            text: a.la.format("shareDesignDialogOwnerRole"),
            selected: !0
        }] : [{
            value: "EDITOR",
            text: Je(a.la),
            selected: "EDITOR" === b
        }, {
            value: "VIEWER",
            text: Le(a.la),
            selected: Rq[b] >= Rq.VIEWER && Rq[b] < Rq.EDITOR
        }, {
            value: "NONE",
            text: a.la.format("shareDesignDialogNoneRole"),
            selected: "NONE" === b
        }]
    }
    f.ef = function (a, b, c) {
        this.tg(a);
        yY({
            message: c,
            type: b,
            J: a.Ma,
            Hb: !1
        }).$el.prependTo(this.$(".shareDialog__error"))
    };
    f.tg = function (a) {
        a = this.$("." + a.Ma);
        a.length && zY(a).remove()
    };
    var Y3 = {
            Ma: "shareDialog__emptyDesignError"
        },
        y4 = {
            Ma: "shareDialog__captchaMessageWarning"
        },
        naa = {
            Ma: "shareDialog__captchaFailError"
        },
        X3 = {
            Ma: "shareDialog__emailInvalidError"
        },
        D4 = {
            Ma: "shareDialog__emailInvalidError"
        },
        B4 = {
            Ma: "shareDialog__emailQuotaError"
        },
        f4 = {
            Ma: "shareDialog__loadError"
        },
        paa = {
            Ma: "shareDialog__updateError"
        },
        l4 = "buttonTwitter",
        n4 = "buttonFacebook",
        P_ = "socialTab",
        maa = {
            SH: "peopleTab",
            VH: P_,
            LINK: "linkTab",
            EMBED: "embedTab"
        };

    function O4() {}
    f = O4.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    var X_ = "UPDATE_PUBLIC_PERMISSIONS";

    function m4(a) {
        return X(X(X(new Hl("design_shared"), "location", "sharebutton"), "access_level", "view"), "medium", a.toString().toLowerCase())
    }

    function P4(a) {
        return X(new Hl("social_share_flow_view_social_media"), "medium", a.toString().toLowerCase())
    };

    function Q4(a, b) {
        this.ya = a.ya;
        this.Z = a.Z;
        this.u = a.u;
        this.ma = a.ma;
        this.ka = a.ka;
        this.sb = a.sb;
        this.sc = a.sc;
        this.Eb = a.Eb;
        this.H = a.H;
        this.aa = a.aa;
        this.js = a.js;
        this.Pa = Pc(a.u);
        this.cc = new RS;
        this.Dd = a.Dd;
        this.Sj = this.ew = null;
        this.fJ = b;
        this.wK = this.ia = null;
        this.oM = a.oM;
        this.nM = null;
        this.BX = a.ba.get(qaa);
        this.ja = new Af(a.ba);
        this.view = null
    }
    f = Q4.prototype;
    f.vI = function () {
        var a = this,
            b = this.fJ();
        b.on("ok", function () {
            return a.hv()
        });
        b.on("cancel", function () {
            return a.hv()
        });
        return b
    };

    function raa(a) {
        var b = JT({
                Z: a.Z.G(),
                Zl: a.ma,
                Kf: a.sb,
                Re: !1,
                ec: Zc(a.u)
            }),
            c = Nc(a.u),
            b = {
                zg: (new LT({
                    H: a.H,
                    ya: a.ya,
                    Ia: a.Z.G(),
                    ma: a.ma,
                    ka: a.ka,
                    Eb: a.Eb,
                    u: a.u,
                    df: !1,
                    If: c.If(),
                    Bg: c.Bg(),
                    view: new KT({
                        Ad: b.bc,
                        Qg: b.view
                    }),
                    cc: a.cc,
                    zb: R4(a.Dd).zb,
                    Xe: a.Z.Ph()
                })).init(),
                w6: new S4({
                    aa: a.aa,
                    Pa: Pc(a.u),
                    la: c,
                    view: new q1
                }),
                complete: saa({
                    H: a.H,
                    la: c
                }),
                error: taa({
                    H: a.H,
                    la: c
                })
            };
        b.error.on("back", function () {
            a.trigger(O3);
            a.remove()
        });
        b.zg.on("paymentComplete", function () {
            return T4(a)
        });
        b.zg.on("paymentError", function () {
            return W4(a, X4)
        });
        return b
    }

    function R3(a) {
        return uaa(a, function () {
            return new z0({
                Nd: new Tx({
                    style: Ux,
                    aa: a.aa
                }),
                aa: a.aa,
                id: "exportDialog"
            })
        })
    }

    function uaa(a, b) {
        return new Q4(a, b)
    }
    f.show = function (a, b) {
        this.ew = a;
        this.Sj = b;
        this.ia = raa(this);
        this.view = this.vI();
        vaa(this);
        this.view.render({
            lo: this.Pa.lo(),
            Jg: this.Pa.Jg()
        })
    };

    function vaa(a) {
        var b = ["ONE_USE", "ROYALTY_FREE", "EXTENDED"];
        waa(a, b).then(function () {
            var c = a.ma.Ey(a.Z.G()).catch(wk, function () {
                    return null
                }).catch(function () {
                    throw Y4;
                }),
                d = R4(a.Dd),
                d = Li(a.ma, new lj({
                    document: d.zb,
                    lc: d.lc,
                    ia: [1],
                    NE: !0,
                    PE: !0
                })).catch(function (a) {
                    if (a instanceof xk)
                        throw Z4;
                    throw Y4;
                });
            P.all([c, d]).spread(function (c, d) {
                a.ia.zg.sa = c;
                d.NA && SS(a.cc, {
                    items: d.items,
                    Ye: b,
                    Su: d.Al,
                    Ol: !!a.ja.ba.get(hg)
                });
                xaa(a, d.NA)
            }).catch(function (b) {
                W4(a, b)
            })
        }).catch(function () {
            return W4(a, $4)
        })
    }

    function p4(a) {
        if (a.BX) {
            var b = new Nx({
                user: a.ya,
                Z: a.Z.G(),
                limit: Object.keys(vv).length
            });
            a.wK = nx(a.sc, b).then(function (a) {
                return a.Os
            });
            a.nM = a.oM.load()
        }
    }

    function yaa(a, b) {
        w(a.nM, "MomentTimezone must've been loaded");
        return a.nM.then(function () {
            var c = moment.tz.guess();
            w(c, "failed to guess timezone");
            return kx(a.sc, new Lx({
                user: a.ya,
                Z: a.Z.G(),
                platform: b,
                hf: "DEFAULT",
                timeZone: c
            })).then(function (a) {
                return a.Cw
            })
        })
    }

    function zaa(a, b) {
        w(a.wK, "target queues must've been fetched on init");
        return a.wK.then(function (c) {
            var d = c.map(function (a) {
                    return a.platform
                }),
                e = b.filter(function (a) {
                    return !d.some(function (b) {
                        return b === a
                    })
                }).map(function (b) {
                    return yaa(a, b)
                });
            return P.all(e).then(function (a) {
                return a.concat(c)
            })
        })
    }

    function waa(a, b) {
        return a5(a.Dd, b).then(function () {
            return oZ(a.Dd)
        })
    }

    function xaa(a, b) {
        Aaa(a, b).then(function () {
            return T4(a)
        })
    }

    function Aaa(a, b) {
        return b ? (0 < VS(a.cc) ? (B0(a.view, a.ia.zg).then(function () {
                    return h1(a.ia.zg)
                }),
                a.H.Ga(X(new Hl("social_share_flow_payment"), "amount", VS(a.cc)))) : l1(a.ia.zg),
            P.reject()) : P.resolve()
    }

    function T4(a) {
        w(a.ew, "shareMessage must be defined when sharing");
        w(a.Sj, "platforms must be defined when sharing");
        B0(a.view, a.ia.w6);
        D0(a.view, a.js.next());
        a.view.mw();
        var b = R4(a.Dd);
        (a.BX ? zaa(a, a.Sj).then(function (c) {
            return new Fx({
                user: a.ya,
                Z: a.Z.G(),
                document: b.zb,
                lc: b.lc,
                message: "" === a.ew ? null : a.ew,
                action: "UPLOAD_NOW",
                Os: c.map(function (a) {
                    return a.id
                })
            })
        }) : P.resolve(new Fx({
            user: a.ya,
            Z: a.Z.G(),
            document: b.zb,
            lc: b.lc,
            message: "" === a.ew ? null : a.ew,
            action: "UPLOAD_NOW",
            uJ: a.Sj.map(function (a) {
                return new xx({
                    platform: a,
                    hf: "DEFAULT"
                })
            })
        }))).then(function (b) {
            var d = a.sc;
            return Qi(d.fa, d.url, Gx(b)).get(0).then(Ja).then(Ix)
        }).then(function (b) {
            return b5(a, b.id, 1E3)
        }).then(function (b) {
            if (b.length === a.Sj.length)
                a.onComplete(b);
            else if (b.length) {
                var d = a.Sj.filter(function (a) {
                    return !b.some(function (b) {
                        return b.platform === a
                    })
                });
                W4(a, c5, d, b)
            } else
                W4(a, $4)
        }).catch(function () {
            return W4(a, $4)
        })
    }

    function b5(a, b, c) {
        var d = new Jx({
            id: b,
            Y8: !1
        });
        return P.delay(c).then(function () {
            return a.sc.bT(d)
        }).then(function (d) {
            var g = !0,
                h = [];
            d.cw.Nw.forEach(function (a) {
                "NEW" === a.status || "IN_PROGRESS" === a.status ? g = !1 : "SUCCESS" === a.status && h.push({
                    platform: a.platform,
                    url: a.url
                })
            });
            return g ? P.resolve(h) : b5(a, b, Math.min(1.6 * c, 3E4))
        })
    }
    f.onComplete = function (a) {
        var b = this;
        this.ia.complete.Sj = a;
        B0(this.view, this.ia.complete);
        this.H.Ga(new Hl("social_share_flow_complete"));
        a.forEach(function (a) {
            return xl(b.H, m4(a.platform))
        })
    };

    function W4(a, b, c, d) {
        w(a.Sj);
        Baa(a.ia.error, b, c || a.Sj, d);
        B0(a.view, a.ia.error);
        a.view.iz();
        a.H.Ga(new Hl("social_share_flow_error"))
    }
    f.hv = function () {
        this.trigger(P3);
        this.remove();
        this.H.Ga(new Hl("social_share_flow_close"))
    };
    f.remove = function () {
        var a = this;
        this.view.remove().then(function () {
            _.values(a.ia).forEach(function (a) {
                return a.remove()
            })
        })
    };
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;
    var O3 = "BACK",
        P3 = "CLOSE",
        qaa = new yf("gl", !1);

    function S3() {}
    S3.prototype.load = function () {
        return window.hasOwnProperty("moment") && window.moment.tz ? P.resolve() : P.resolve($.ajax({
            dataType: "script",
            cache: !0,
            url: "https://static.canva.com/static/lib/moment-timezone-with-data-0.5.13.min.js"
        })).return()
    };

    function d5(a, b) {
        var c = this;
        this.Sj = [];
        this.H = a.H;
        this.la = a.la;
        this.view = b;
        this.view.on("viewSocialMedia", function (a) {
            return c.H.Ga(P4(a))
        })
    }

    function saa(a) {
        var b = new e5;
        return new d5(a, b)
    }
    d5.prototype.cl = function () {
        return this.view
    };
    d5.prototype.remove = function () {
        this.view.remove()
    };
    d5.prototype.refresh = function () {
        var a = this;
        this.view.render({
            buttons: this.Sj.map(function (b) {
                switch (b.platform) {
                    case "FACEBOOK":
                        return {
                            J: "buttonFacebook",
                            text: Ee(a.la),
                            url: b.url
                        };
                    case "TWITTER":
                        return {
                            J: "buttonTwitter",
                            text: Fe(a.la),
                            url: b.url
                        }
                }
            })
        });
        return P.resolve()
    };
    d5.prototype.Im = function () {
        return {
            title: this.la.format("shareDesignDialogCompleteTitle")
        }
    };

    function e5() {
        var a = this;
        G0.call(this, {
            className: "shareDialog",
            events: {
                "click .buttonFacebook": function () {
                    return a.trigger("viewSocialMedia", "FACEBOOK")
                },
                "click .buttonTwitter": function () {
                    return a.trigger("viewSocialMedia", "TWITTER")
                }
            }
        })
    }
    t(e5, G0);
    e5.prototype.render = function (a) {
        var b = this.el,
            c;
        c = '\x3cdiv class\x3d"shareDialog__socialCompleteButtons"\x3e';
        a = goog.asserts.assertArray(a.buttons, "expected parameter 'buttons' of type list\x3c[classes: string, text: string, url: string]\x3e.");
        for (var d = a.length, e = 0; e < d; e++) {
            var g = a[e];
            c += bZ({
                tagName: "a",
                attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('target\x3d"_blank"'),
                J: g.J,
                text: g.text,
                href: g.url
            })
        }
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml(c + "\x3c/div\x3e");
        b.innerHTML = c;
        return this
    };
    e5.prototype.Ao = function (a) {
        return x0(a).toString()
    };
    var X4 = "PAYMENT",
        $4 = "SHARING",
        c5 = "PLATFORM",
        Z4 = "VERSION_CONFLICT",
        Y4 = "UNKNOWN";

    function f5(a, b) {
        var c = this;
        this.H = a.H;
        this.la = a.la;
        this.model = null;
        this.view = b;
        this.view.on("back", function () {
            return c.trigger("back")
        });
        this.view.on("viewSocialMedia", function (a) {
            return c.H.Ga(P4(a))
        })
    }

    function taa(a) {
        var b = new g5;
        return new f5(a, b)
    }
    f = f5.prototype;
    f.cl = function () {
        return this.view
    };
    f.remove = function () {
        this.view.remove()
    };

    function Baa(a, b, c, d) {
        c = h5(c);
        switch (b) {
            case X4:
                a.model = {
                    title: a.la.format("shareDesignDialogPaymentErrorTitle"),
                    message: a.la.format("shareDesignDialogPaymentError"),
                    pd: a.la.Gp(),
                    Lg: "shareDialog__doneButton"
                };
                break;
            case $4:
                a.model = {
                    title: Ge(a.la),
                    message: soydata.VERY_UNSAFE.ordainSanitizedHtml(He(a.la, c)),
                    pd: Ie(a.la),
                    Lg: "shareDialog__backButton"
                };
                break;
            case c5:
                w(d);
                b = h5(d.map(function (a) {
                    return a.platform
                }));
                a.model = {
                    title: Ge(a.la),
                    message: soydata.VERY_UNSAFE.ordainSanitizedHtml(He(a.la, c)),
                    wB: a.la.format("shareDesignDialogPlatformSuccess", b),
                    pd: Ie(a.la),
                    Lg: "shareDialog__backButton buttonSecondary",
                    $G: d.map(function (b) {
                        switch (b.platform) {
                            case "FACEBOOK":
                                return {
                                    J: "buttonFacebook",
                                    text: Ee(a.la),
                                    url: b.url
                                };
                            case "TWITTER":
                                return {
                                    J: "buttonTwitter",
                                    text: Fe(a.la),
                                    url: b.url
                                }
                        }
                    })
                };
                break;
            case Z4:
                a.model = {
                    title: Ge(a.la),
                    message: a.la.format("shareDesignDialogVersionConflictError"),
                    pd: a.la.Gp(),
                    Lg: "shareDialog__doneButton"
                };
                break;
            case Y4:
                a.model = {
                    title: Ge(a.la),
                    message: soydata.VERY_UNSAFE.ordainSanitizedHtml(He(a.la, c)),
                    pd: a.la.Gp(),
                    Lg: "shareDialog__doneButton"
                };
                break;
            default:
                throw new TypeError("unexpected SocialErrorType: " + b);
        }
    }

    function h5(a) {
        return a.map(function (a) {
            a: switch (a) {
                case "FACEBOOK":
                    a = "Facebook";
                    break a;
                case "TWITTER":
                    a = "Twitter";
                    break a;
                default:
                    throw new TypeError("unexpected Platform: " + a);
            }
            return a
        }).join(", ")
    }
    f.refresh = function () {
        w(this.model);
        this.view.render(this.model);
        return P.resolve()
    };
    f.Im = function () {
        return {
            title: this.model.title
        }
    };
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.trigger = Backbone.Events.trigger;

    function g5() {
        var a = this;
        G0.call(this, {
            className: "shareDialog error",
            events: {
                "click .shareDialog__doneButton": function () {
                    return a.trigger("done")
                },
                "click .shareDialog__backButton": function () {
                    return a.trigger("back")
                },
                "click .buttonFacebook": function () {
                    return a.trigger("viewSocialMedia", "FACEBOOK")
                },
                "click .buttonTwitter": function () {
                    return a.trigger("viewSocialMedia", "TWITTER")
                }
            }
        })
    }
    t(g5, G0);
    g5.prototype.render = function (a) {
        var b = this.el;
        soy.asserts.assertType(a.message instanceof soydata.SanitizedHtml || a.message instanceof soydata.UnsanitizedText || goog.isString(a.message), "message", a.message, "soydata.SanitizedHtml");
        var c = a.message;
        soy.asserts.assertType(null == a.wB || a.wB instanceof goog.soy.data.SanitizedContent || goog.isString(a.wB), "successMessage", a.wB, "null|string|undefined");
        var d = a.wB;
        soy.asserts.assertType(goog.isString(a.pd) || a.pd instanceof goog.soy.data.SanitizedContent, "buttonText", a.pd, "string|goog.soy.data.SanitizedContent");
        var e = a.pd;
        soy.asserts.assertType(goog.isString(a.Lg) || a.Lg instanceof goog.soy.data.SanitizedContent, "buttonClasses", a.Lg, "string|goog.soy.data.SanitizedContent");
        var g = a.Lg;
        soy.asserts.assertType(null == a.$G || goog.isArray(a.$G), "successButtons", a.$G, "?Array\x3c{classes: string, text: string, url: string}\x3e|undefined");
        a = a.$G;
        c = "\x3cp" + (d ? ' class\x3d"shareDialog__socialError"' : "") + "\x3e" + soy.$$escapeHtml(c) + "\x3c/p\x3e" + (d ? "\x3cp\x3e" + soy.$$escapeHtml(d) + "\x3c/p\x3e" : "") + '\x3cdiv class\x3d"shareDialog__socialCompleteButtons"\x3e' + bZ({
            J: g,
            text: e
        });
        if (a)
            for (d = a.length,
                e = 0; e < d; e++)
                g = a[e],
                c += bZ({
                    tagName: "a",
                    attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('target\x3d"_blank"'),
                    J: g.J,
                    text: g.text,
                    href: g.url
                });
        a = soydata.VERY_UNSAFE.ordainSanitizedHtml(c + "\x3c/div\x3e");
        b.innerHTML = a;
        return this
    };
    g5.prototype.Ao = function (a) {
        return x0(a).toString()
    };

    function S4(a) {
        p1.call(this, a);
        this.la = a.la
    }
    t(S4, p1);
    S4.prototype.Im = function () {
        return {
            title: this.la.format("shareDesignDialogSharingTitle")
        }
    };

    function i5(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".shareDialog__inviteMemberButton", function (a) {
            a = $(a.target).closest(".shareDialog__inviteMemberContainer");
            a = (new j5(a)).bh();
            b.trigger(k5, a)
        })
    }
    t(i5, L);

    function oaa(a) {
        var b = $,
            c;
        soy.asserts.assertType(a.Br instanceof soydata.SanitizedHtml || a.Br instanceof soydata.UnsanitizedText || goog.isString(a.Br), "inviteMembersHtml", a.Br, "soydata.SanitizedHtml");
        var d = a.Br;
        soy.asserts.assertType(goog.isString(a.Eu) || a.Eu instanceof goog.soy.data.SanitizedContent, "inviteMemberButton", a.Eu, "string|goog.soy.data.SanitizedContent");
        c = a.Eu;
        soy.asserts.assertType(goog.isString(a.Fu) || a.Fu instanceof goog.soy.data.SanitizedContent, "inviteMemberError", a.Fu, "string|goog.soy.data.SanitizedContent");
        var e = a.Fu;
        soy.asserts.assertType(goog.isString(a.gj) || a.gj instanceof goog.soy.data.SanitizedContent, "avatarUrl", a.gj, "string|goog.soy.data.SanitizedContent");
        var g = a.gj;
        a = goog.asserts.assertArray(a.dr, "expected parameter 'emails' of type list\x3cstring\x3e.");
        for (var d = '\x3cdiv class\x3d"shareDialog__inviteMembersView"\x3e\x3cdiv class\x3d"shareDialog__inviteMembersLabel"\x3e' + soy.$$escapeHtml(d) + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__inviteMembers"\x3e', h = a.length, k = 0; k < h; k++)
            var l = a[k],
                d = d + ('\x3cdiv class\x3d"shareDialog__inviteMemberContainer" data-email\x3d"' + soy.$$escapeHtmlAttribute(l) + '"\x3e\x3cdiv class\x3d"shareDialog__inviteMember"\x3e\x3cimg class\x3d"avatar" src\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(g)) + '"/\x3e\x3cspan class\x3d"shareDialog__inviteMemberEmail"\x3e' + soy.$$escapeHtml(l) + "\x3c/span\x3e" + bZ({
                    J: "shareDialog__inviteMemberButton buttonSubmittable",
                    text: c
                }) + '\x3c/div\x3e\x3cdiv class\x3d"shareDialog__inviteMemberError" data-error\x3d' + soy.$$escapeHtmlAttributeNospace(e) + "\x3e\x3c/div\x3e\x3c/div\x3e");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml(d + "\x3c/div\x3e\x3c/div\x3e");
        b = b(c.toString());
        return new i5(b)
    }

    function Caa(a, b, c) {
        a = l5(a, b);
        a.IH.empty();
        a.Ds(!0, c);
        a.$B.prop("disabled", !0)
    }

    function Daa(a, b, c, d) {
        l5(a, b).Ds(!1, c);
        d && window.setTimeout(function () {
            return a.trigger(N4)
        }, 1E3)
    }

    function l5(a, b) {
        a = a.$el.find('.shareDialog__inviteMemberContainer[data-email\x3d"' + b + '"]');
        return new j5(a)
    }
    var k5 = "INVITE_MEMBER",
        N4 = "OK";

    function j5(a) {
        this.$el = a;
        this.$B = a.find(".shareDialog__inviteMemberButton");
        this.IH = a.find(".shareDialog__inviteMemberError")
    }
    t(j5, fc);
    j5.prototype.bh = function () {
        return this.$el.data("email")
    };
    j5.prototype.Ds = function (a, b) {
        b && this.$B.text(b);
        this.$B.toggleClass("submitting", a)
    };
    j5.prototype.ef = function () {
        this.IH.text(this.IH.data("error").toString())
    };

    function m5(a, b) {
        var c = this;
        this.Z = a.Z;
        this.H = a.H;
        this.ka = a.ka;
        this.rc = a.rc;
        this.tq = a.tq;
        this.la = a.la;
        this.vF = a.vF;
        this.kn = a.kn;
        this.view = b;
        this.view.on(k5, function (a) {
            return Eaa(c, a)
        })
    }

    function eaa(a, b) {
        new m5(a, b)
    }

    function Eaa(a, b) {
        Caa(a.view, b, a.la.format("shareDesignDialogiInviteMemberInvitingButton"));
        a.IP().then(function () {
            var c = Fw(Gw((new Ew).Hg(a.Z.G()), "Shared_Design_Invite_Accept_Invitation"), [Object.freeze(R(Dw, {
                email: b,
                role: Xl
            }))]);
            c.resend = !0;
            return a.ka.rW(c)
        }).tap(function () {
            a.H.Ga(Wl(b, "design_shared_dialog"))
        }).then(function () {
            a.vF--;
            Daa(a.view, b, a.la.format("shareDesignDialogInviteMemberSentButton"), 0 === a.vF);
            a.kn()
        }).catch(function () {
            var c = l5(a.view, b);
            c.ef();
            c.Ds(!1);
            c.$B.prop("disabled", !1)
        })
    }
    m5.prototype.IP = function () {
        var a = this;
        if (!this.Z.Ph())
            return P.resolve();
        var b = yw((new ww).io(this.Z.G()));
        this.Z.Tb() || xw(b, this.tq + "s team");
        return Lv(this.ka, b).tap(function () {
            return gx(a.rc)
        }).tap(function () {
            return hx(a.rc)
        })
    };

    function T3() {
        return window.twttr && window.twttr.txt ? P.resolve() : P.resolve($.ajax({
            dataType: "script",
            cache: !0,
            url: "https://static.canva.com/static/lib/twitter-text-1.9.4.min.js"
        }))
    };

    function n5(a) {
        this.$el = a
    }
    t(n5, fc);

    function o5(a) {
        Ba(a.hasClass("mask2"), '$el must have "mask2" in its classList');
        return new n5(a)
    }
    n5.prototype.show = function () {
        this.Fs(!0);
        this.$el.hasClass("mask2--blur") && p5(this, !0)
    };
    n5.prototype.hide = function () {
        this.Fs(!1);
        this.$el.hasClass("mask2--blur") && p5(this, !1);
        return wf(this.$el[0])
    };
    n5.prototype.Fs = function (a) {
        this.$el.toggleClass("mask2--visible", a);
        $("body").toggleClass("mask2Visible", a)
    };
    n5.prototype.hh = function () {
        return this.$el.hasClass("mask2--visible")
    };

    function p5(a, b) {
        a.$el.siblings(".mask2Background").toggleClass("mask2Background--blurred", b)
    };

    function JY(a, b) {
        var c = this;
        L.call(this, a);
        this.aC = b;
        this.OU = this.R2.bind(this);
        this.$el.on("click", function (a) {
            return c.Bf(a)
        });
        this.aC.on("keyup", this.OU)
    }
    t(JY, L);
    f = JY.prototype;
    f.remove = function () {
        L.prototype.remove.call(this);
        this.aC.off("keyup", this.OU)
    };
    f.show = function () {
        var a = this;
        Sk(function () {
            return o5(a.$el).show()
        })
    };
    f.hide = function () {
        return o5(this.$el).hide()
    };
    f.hh = function () {
        return o5(this.$el).hh()
    };
    f.Bf = function (a) {
        !$(a.target).closest(".dialog2__content").length && q5(this) && this.trigger(RY)
    };
    f.R2 = function (a) {
        27 === a.keyCode && q5(this) && this.trigger(RY)
    };

    function q5(a) {
        return !!a.$el.find(".dialog2__closeButton").length
    }
    var RY = "CLOSE";

    function r5(a) {
        var b;
        soy.asserts.assertType(a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "soydata.SanitizedHtml");
        var c = a.content;
        soy.asserts.assertType(null == a.visible || goog.isBoolean(a.visible) || 1 === a.visible || 0 === a.visible, "visible", a.visible, "boolean|null|undefined");
        var d = a.visible;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var e = a.J;
        soy.asserts.assertType(null == a.mm || goog.isBoolean(a.mm) || 1 === a.mm || 0 === a.mm, "dark", a.mm, "boolean|null|undefined");
        var g = a.mm;
        soy.asserts.assertType(null == a.blur || goog.isBoolean(a.blur) || 1 === a.blur || 0 === a.blur, "blur", a.blur, "boolean|null|undefined");
        a = a.blur;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"mask2' + (d ? " mask2--visible" : "") + (null == (b = g) || b ? " mask2--dark" : "") + (null == (b = a) || b ? " mask2--blur" : "") + (e ? " " + soy.$$escapeHtmlAttribute(e) : "") + '"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e")
    }

    function IY(a) {
        var b;
        a = a || {};
        soy.asserts.assertType(null == a.content || a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "?soydata.SanitizedHtml|string|undefined");
        var c = a.content;
        soy.asserts.assertType(null == a.visible || goog.isBoolean(a.visible) || 1 === a.visible || 0 === a.visible, "visible", a.visible, "boolean|null|undefined");
        var d = a.visible;
        soy.asserts.assertType(null == a.ZB || goog.isBoolean(a.ZB) || 1 === a.ZB || 0 === a.ZB, "withShadow", a.ZB, "boolean|null|undefined");
        var e = a.ZB;
        soy.asserts.assertType(null == a.YB || goog.isBoolean(a.YB) || 1 === a.YB || 0 === a.YB, "withRoundedCorners", a.YB, "boolean|null|undefined");
        var g = a.YB;
        soy.asserts.assertType(null == a.WB || goog.isBoolean(a.WB) || 1 === a.WB || 0 === a.WB, "withCloseButton", a.WB, "boolean|null|undefined");
        var h = a.WB;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var k = a.J;
        soy.asserts.assertType(null == a.UC || a.UC instanceof goog.soy.data.SanitizedContent || goog.isString(a.UC), "contentClasses", a.UC, "null|string|undefined");
        a = a.UC;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(r5({
            visible: d,
            J: soydata.$$markUnsanitizedTextForInternalBlocks("dialog2" + (k ? " " + k : "")),
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cdiv class\x3d"dialog2__container"\x3e\x3cdiv class\x3d"dialog2__box' + (null == (b = e) || b ? " dialog2__box--withShadow" : "") + (null == (b = g) || b ? " dialog2__box--withRoundedBorders" : "") + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e' + (null == (b = h) || b ? '\x3cbutton class\x3d"dialog2__closeButton"\x3e' + soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csvg viewBox\x3d"0 0 24 24" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3cg fill\x3d"none" fill-rule\x3d"evenodd"\x3e\x3crect fill-opacity\x3d".2" fill\x3d"#000" width\x3d"24" height\x3d"24" rx\x3d"12"/\x3e\x3cpath d\x3d"M4 4h16v16H4"/\x3e\x3cpath fill\x3d"#FFF" d\x3d"M16.5 8.406l-.906-.906L12 11.094 8.406 7.5l-.906.906L11.094 12 7.5 15.594l.906.906L12 12.906l3.594 3.594.906-.906L12.906 12"/\x3e\x3c/g\x3e\x3c/svg\x3e') + "\x3c/button\x3e" : "") + '\x3cdiv class\x3d"dialog2__content"\x3e' + soy.$$escapeHtml(null == (b = c) ? "" : b) + "\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")
        }))
    };

    function s5(a) {
        var b = this;
        this.view = a;
        this.view.on(RY, function () {
            return b.hv()
        })
    }
    s5.prototype.hv = function () {
        var a = this;
        this.view.hide().then(function () {
            return a.view.remove()
        })
    };

    function t5(a) {
        this.user = a.user;
        this.profiles = a.profiles;
        this.Fa = a.Fa;
        this.vo = this.user.Wy()
    }
    t5.prototype.getItem = function (a) {
        var b = this;
        return this.vo && this.vo[a] ? P.resolve(this.vo[a]) : this.Wy().then(function (c) {
            var d = null;
            c[a] || (d = b.Fa && b.Fa.getItem(b.user.G() + "_" + a));
            return c[a] || d && JSON.parse(d) || null
        })
    };
    t5.prototype.setItem = function (a, b) {
        this.Fa && this.Fa.setItem(this.user.G() + "_" + a, b);
        this.vo && (this.vo[a] = b);
        return Kv(this.profiles, a, b)
    };
    t5.prototype.removeItem = function (a) {
        this.Fa && this.Fa.removeItem(this.user.G() + "_" + a);
        this.vo && delete this.vo[a];
        return Kv(this.profiles, a, null)
    };
    t5.prototype.Wy = function () {
        var a = this;
        return Jv(this.profiles).then(function (b) {
            return a.vo = b
        })
    };

    function Faa(a) {
        var b = this;
        this.view = a;
        this.RI = null;
        a.on(u5, function () {
            Da(null != b.RI, "A callback must be provided");
            b.RI();
            b.view.hide()
        });
        a.on(v5, function () {
            return a.hide()
        })
    }

    function B_(a) {
        var b = a.u.format("shareDesignDialogConnectYourAccount"),
            c = a.u.format("shareDesignDialogConnectYourAccountButton");
        a = $;
        soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "connectAccountMessage", b, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "connectButtonLabel", c, "string|goog.soy.data.SanitizedContent");
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml(r5({
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cdiv class\x3d"connectAccountPopup"\x3e' + soy.$$escapeHtml(b) + bZ({
                text: c,
                J: "connectAccountPopup__connectButton",
                block: !0
            }) + "\x3c/div\x3e"),
            mm: !1
        }));
        b = a(b.toString());
        b = new w5(b);
        return {
            bc: new Faa(b),
            view: b
        }
    }

    function u4(a, b) {
        a.view.setPosition(b);
        a.view.show()
    }

    function t4(a, b) {
        a.RI = b
    };

    function w5(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".connectAccountPopup__connectButton", function () {
            return b.trigger(u5)
        });
        a.on("click", function (a) {
            return b.Bf(a)
        })
    }
    t(w5, L);
    w5.prototype.setPosition = function (a) {
        this.$el.find(".connectAccountPopup").css({
            left: a.x,
            top: a.y
        })
    };
    w5.prototype.show = function () {
        o5(this.$el).show()
    };
    w5.prototype.hide = function () {
        o5(this.$el).hide()
    };
    w5.prototype.Bf = function (a) {
        !$(a.target).closest(".connectAccountPopup").length && this.trigger(v5)
    };
    var u5 = "CONNECT",
        v5 = "CLOSE";

    function x5(a, b, c) {
        L.call(this, a);
        this.Dk = b;
        this.rP = c
    }
    t(x5, L);

    function y5(a, b, c, d) {
        var e = this;
        this.view = b;
        this.Mb = c;
        this.CB = d;
        this.H = a.H;
        z2(this.CB, function (a) {
            return e.KM(a)
        })
    }

    function z_(a) {
        var b = a.la,
            c = b.bX(),
            d = {
                Vg: b.dH(),
                Ns: b.sP(),
                Xs: b.tP(),
                ET: B2(a.Mi),
                zq: b.format("shareDesignDialogTeamInvitesAddAnotherLabel")
            },
            b = $;
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "title", c, "string|goog.soy.data.SanitizedContent");
        d = goog.asserts.assertObject(d, "expected parameter 'teamInviteSenderModel' of type [addAnotherButtonLabel: string, emailInputPlaceholder: string, inputModel: list\x3c[modelId: float|int]\x3e, submitButtonLabel: string, upgradeMessage: string].");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml(IY({
            J: "shareTeamInvitesDialog",
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cdiv class\x3d"shareTeamInvitesDialog__content"\x3e\x3cdiv class\x3d"shareTeamInvitesDialog__title"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e" + C2(d) + "\x3c/div\x3e")
        }));
        c = b(c.toString());
        b = new JY(c, $(document));
        d = new D2(c.find(".teamInviteSender"));
        c = new x5(c, b, d);
        b = new s5(c.Dk);
        d = a.f_(c.rP);
        a = new y5(a, c, b, d);
        return {
            view: c,
            bc: a
        }
    }
    y5.prototype.show = function () {
        this.H.Ga(new Hl("team_invites_dialog_freeform_shown"));
        this.view.Dk.show()
    };
    y5.prototype.De = function () {
        this.CB.De()
    };
    y5.prototype.KM = function (a) {
        var b = this;
        a.forEach(function (a) {
            return b.H.Ga(Wl(a, "design_shared_dialog_freeform"))
        });
        this.view.Dk.hide().then(function () {
            return b.view.Dk.remove()
        })
    };

    function z5(a) {
        this.bo = a.bo;
        this.jp = !1
    }
    z5.prototype.send = function (a, b) {
        return this.init().then(function (c) {
            return new P(function (d, e) {
                c.sendSMS(a, b, {}, function (a) {
                    if (a)
                        return e(a instanceof Error ? a : Error(a));
                    d()
                })
            })
        })
    };
    z5.prototype.init = function () {
        var a = this;
        return this.jp ? P.resolve(A5()) : Gaa().then(function (b) {
            return new P(function (c, d) {
                b.init(a.bo, {}, function (e) {
                    if (e)
                        return d(e instanceof Error ? e : Error(e));
                    a.jp = !0;
                    c(b)
                })
            })
        })
    };

    function Gaa() {
        return document.getElementById("branch_snippet") ? P.resolve(A5()) : new P(function (a, b) {
            var c = document.createElement("script");
            c.id = "branch_snippet";
            c.src = "https://cdn.branch.io/branch-latest.min.js";
            c.async = !0;
            c.onload = function () {
                return a(A5())
            };
            c.onerror = function () {
                b(Error("Unable to load the branch API"))
            };
            document.body.appendChild(c)
        })
    }

    function A5() {
        Da("undefined" !== typeof window.branch);
        return window.branch
    };

    function Haa(a) {
        this.document = a.document;
        this.Qb = a.Qb;
        this.dQ = a.dQ
    }

    function I_(a) {
        return new Haa({
            document: a.document,
            Qb: a.Qb,
            dQ: Uy
        })
    }

    function a5(a, b) {
        var c;
        a.document.isEmpty() ? c = "EMPTY_DOC" : a.Qb.Nu() ? Mp(a.document) ? c = "UPLOADING" : 0 === b.length && (c = "LICENSE_NO_OPTIONS") : c = "SAVING";
        return c ? P.reject(c) : P.resolve()
    }

    function oZ(a) {
        if (!a.Qb.Ji())
            return P.resolve();
        a.Qb.save();
        return a.dQ(J.bx).bind(a).catch(function () {
            throw this.Qb.Nu() ? "SAVING" : "VERSION_CONFLICT";
        })
    }

    function R4(a) {
        return {
            zb: a.Qb.Fc(),
            lc: a.Qb.be()
        }
    };

    function B5(a) {
        this.view = a.view;
        this.aa = a.aa;
        this.VL = a.VL;
        this.Pa = Pc(a.u);
        this.js = a.js;
        this.rF = P.resolve();
        this.jc = a.jc;
        this.wN = a.wN;
        this.de = a.de || !1;
        this.Ta = a.Ta;
        this.Fa = a.Fa;
        this.document = a.document;
        this.Qb = a.Qb;
        this.cc = a.cc;
        this.Ls = Infinity;
        this.Gr = this.Hr = !1;
        this.je = a.je;
        this.hd = a.hd;
        this.H = a.H;
        this.JN = a.JN;
        this.zl = null;
        this.ka = a.ka;
        this.ma = a.ma;
        this.Ye = a.Ye;
        this.pt = a.pt;
        this.Dd = a.Dd;
        this.ia = {
            error: a.ia.error,
            zg: a.ia.zg,
            No: a.ia.No,
            $_: null
        };
        this.pK = a.pK;
        this.NI = this.pj = this.qy = null;
        this.ja = a.ja;
        this.ba = a.ba;
        this.zd = a.zd;
        this.view.on("cancel", this.cancel.bind(this));
        this.view.on("ok", this.ok.bind(this));
        this.view.on("retry", this.AT.bind(this))
    }

    function rZ(a) {
        var b = Pc(a.u),
            c = Zc(a.u),
            d = (new z0({
                Nd: new Tx({
                    style: Ux,
                    aa: a.aa
                }),
                aa: a.aa,
                id: "exportDialog"
            })).render({
                lo: b.lo(),
                Jg: b.Jg()
            }),
            e = ["ONE_USE", "ROYALTY_FREE", "EXTENDED"],
            g = ax(a.Ta).wa().G(),
            h = new RS,
            c = JT({
                Z: g,
                Zl: a.ma,
                Re: !1,
                Kf: a.sb,
                ec: c
            }),
            g = {
                error: (new S1({
                    Pa: b,
                    view: new U1
                })).init(),
                zg: (new LT({
                    H: a.H,
                    ma: a.ma,
                    ka: a.ka,
                    Eb: a.Eb,
                    jc: a.jc,
                    u: a.u,
                    ya: bx(a.Ta).G(),
                    Ia: g,
                    df: !0,
                    view: new KT({
                        Ad: c.bc,
                        Qg: c.view
                    }),
                    cc: h,
                    zb: a.Qb.Fc(),
                    Xe: ax(a.Ta).wa().Ph(),
                    ba: a.ba,
                    zd: a.zd
                })).init(),
                No: new p1({
                    aa: a.aa,
                    Pa: b,
                    view: new q1
                })
            },
            k = n3(a);
        return new B5({
            view: d,
            u: a.u,
            H: a.H,
            Qb: a.Qb,
            document: a.document,
            Ta: a.Ta,
            sc: a.sc,
            hd: a.hd,
            ma: a.ma,
            ka: a.ka,
            sb: a.sb,
            Eb: a.Eb,
            aa: a.aa,
            Fa: a.Fa,
            de: a.de,
            VL: function () {
                return new Q1({
                    u: a.u,
                    view: new R1({
                        aa: a.aa
                    }),
                    mP: e
                })
            },
            jc: a.jc,
            JN: function (b) {
                return new H0({
                    H: a.H,
                    sK: b
                })
            },
            Ye: e,
            js: new r1(Vc(a.u)),
            je: a.je,
            cc: h,
            Dd: a.Dd,
            ia: g,
            pK: function (c) {
                return a.NT ? P.resolve(new C5({
                    BL: "PDF" === a.je.format,
                    Pa: b
                })) : r3(k, {
                    WR: function () {
                        c.ok()
                    }
                }).then(function (b) {
                    return b || new D5({
                        sc: a.sc,
                        ba: a.ba,
                        H: a.H,
                        Qb: a.Qb,
                        u: a.u,
                        de: !!a.de,
                        tl: a.tl,
                        aa: a.aa,
                        ja: a.ja
                    })
                })
            },
            S2: a.S2,
            wN: !!a.NT,
            pt: a.pt,
            ja: a.ja,
            ba: a.ba,
            zd: a.zd
        })
    }
    f = B5.prototype;
    f.remove = function () {
        this.qy && this.qy.cancel();
        this.view.remove().bind(this).then(function () {
            _.values(this.ia).forEach(function (a) {
                a && a.remove()
            })
        })
    };
    f.AP = function (a) {
        this.wN || (1 > $("#canvaDownloadIframe").length && $("\x3ciframe /\x3e", {
                id: "canvaDownloadIframe"
            }).appendTo("body"),
            $("#canvaDownloadIframe").attr("src", a),
            this.de && yl(this.H, "download", "export_dialog", "first_time_publish"))
    };
    f.mw = function () {
        var a;
        if (Infinity > this.Ls) {
            var b = moment.duration(this.Ls);
            a = Math.floor(b.asHours());
            b = b.minutes();
            a = 0 < a ? this.Pa.format("publishViewExportingHoursRemainingLicenseHeader", a, b) : this.Pa.format("publishViewExportingMinutesRemainingLicenseHeader", b);
            b = this.Pa.format("publishViewExportingLicensePurchaseDetails");
            soy.asserts.assertType(goog.isString(a) || a instanceof goog.soy.data.SanitizedContent, "title", a, "string|goog.soy.data.SanitizedContent");
            soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "message", b, "string|goog.soy.data.SanitizedContent");
            a = soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3ch3\x3e" + soy.$$escapeHtml(a) + "\x3c/h3\x3e\x3cp\x3e" + soy.$$escapeHtml(b) + "\x3c/p\x3e").toString()
        } else
            a = this.js.next();
        D0(this.view, a);
        this.rF.then(this.view.mw.bind(this.view))
    };
    f.iz = function () {
        this.rF.then(this.view.iz.bind(this.view))
    };
    f.start = function () {
        return new P(function (a) {
                this.pj = null;
                this.NI = a;
                this.zl = this.JN(this.je.format);
                this.rF = new P(function (a) {
                        this.aa.setTimeout(a, 650)
                    }
                    .bind(this));
                this.AT()
            }
            .bind(this))
    };
    f.AT = function () {
        a5(this.Dd, this.Ye).bind(this).then(this.y0).then(this.P0).then(this.hZ).then(this.t0).then(this.QW.bind(this, "PRINT")).catch(this.RO)
    };
    f.y0 = function () {
        if (!this.Qb.Ji())
            return P.resolve();
        this.ia.No.ZD = "SAVING";
        B0(this.view, this.ia.No);
        this.zl.track("save");
        return oZ(this.Dd)
    };
    f.P0 = function () {
        this.ia.No.ZD = "EXPORTING";
        B0(this.view, this.ia.No);
        this.zl.track("prepare")
    };
    f.RO = function (a) {
        this.iz();
        var b = this.ia.error;
        b.Bv = T1(b, a);
        B0(this.view, this.ia.error);
        this.zl.track("error", {
            errorType: a
        })
    };
    f.xZ = function () {
        this.Ls = Infinity;
        this.mw();
        B0(this.view, this.ia.No);
        this.QW("SCREEN").bind(this).catch(this.RO)
    };
    f.hZ = function () {
        var a = this.Qb.be(),
            b = new lj({
                document: this.Qb.Fc(),
                lc: a,
                ia: this.je.ia,
                NE: !0,
                PE: !0
            }),
            c = ax(this.Ta).wa().G(),
            b = Li(this.ma, b).catch(function (a) {
                if (a instanceof xk)
                    throw "VERSION_CONFLICT";
                throw "BACKGROUND";
            }),
            c = Ki(this.ma, new Xh({
                $l: [c],
                na: null,
                limit: 1
            })).catch(function () {
                throw "BACKGROUND";
            });
        return P.all([b, c]).bind(this).spread(function (b, c) {
            if (b.lc !== a)
                throw "VERSION_CONFLICT";
            SS(this.cc, {
                items: b.items,
                Ye: this.Ye,
                Su: b.Al,
                Ol: !!this.ja.ba.get(hg)
            });
            this.Ls = WS(this.cc);
            this.ia.zg.sa = 0 < c.gt.length ? c.gt[0] : null;
            return b.NA
        })
    };
    f.t0 = function (a) {
        return a ? (0 < VS(this.cc) ? Iaa(this) : Jaa(this)).bind(this).then(function (a) {
            this.Hr = 0 <= a.Ye.indexOf("ROYALTY_FREE");
            this.Gr = 0 <= a.Ye.indexOf("EXTENDED");
            this.Ls = a.Ls
        }).then(this.C6) : (this.mw(),
            P.resolve())
    };

    function Jaa(a) {
        Da(0 === VS(a.cc), "cannot purchase premium elements in background");
        return l1(a.ia.zg).bind(a).catch(function () {
            this.RO("BACKGROUND_PAYMENT")
        })
    }

    function Iaa(a) {
        return new P(function (a) {
                VX(this.jc, "contextTipRoyaltyFreePaymentOption");
                this.iz();
                Kaa(this).bind(this).then(function () {
                    B0(this.view, this.ia.zg).bind(this).then(function () {
                        return h1(this.ia.zg)
                    }).then(function (a) {
                        a || SX(this.jc, "contextTipRoyaltyFreePaymentOption")
                    });
                    this.zl.track("payment");
                    this.ia.zg.once("clickDraft", this.xZ.bind(this));
                    this.ia.zg.once("paymentComplete", a)
                })
            }
            .bind(a))
    }
    f.C6 = function () {
        this.mw();
        B0(this.view, this.ia.No)
    };

    function Kaa(a) {
        return Laa(a).bind(a).then(function (a) {
            if (a)
                return Maa(this).bind(this).then(this.h1)
        })
    }

    function E5(a) {
        return "hasSeenPublishPaymentLicensesOnboarding:" + bx(a.Ta).G()
    }

    function Laa(a) {
        var b = E5(a),
            c = !!bx(a.Ta).Wy().hasSeenPublishPaymentLicensesOnboarding,
            b = a.Fa && !!mo(a.Fa, b);
        return P.resolve(!c && !b && 0 < VS(a.cc))
    }
    f.h1 = function () {
        var a = E5(this);
        this.Fa && uo(this.Fa, a);
        Kv(this.ka, "hasSeenPublishPaymentLicensesOnboarding", !0)
    };

    function Maa(a) {
        return new P(function (a) {
                this.zl.track("onboard_licenses");
                this.rF.bind(this).then(function () {
                    var c = this.VL().init();
                    c.show();
                    c.on("complete", a)
                })
            }
            .bind(a))
    }
    f.QW = function (a) {
        var b = this.Qb.Fc(),
            c = this.Qb.be();
        this.zl.track("export", {
            exportType: a
        });
        var d = this.je.format,
            e = this.je.Jr,
            g;
        a: switch (a) {
            case "SCREEN":
            case "CUSTOM":
                g = "SCREEN";
                break a;
            case "PRINT":
                g = "PRINT";
                break a;
            default:
                throw Error("unknown export type: " + a);
        }
        var h = new bv({
                type: a,
                format: d,
                Jr: e,
                Nz: g,
                wt: !!this.je.wt,
                Tq: !!this.je.Tq,
                ns: !!this.je.ns,
                Bw: this.je.Bw,
                ia: this.je.ia
            }),
            k = h.Nz === Fg;
        a = new Ou({
            Di: b,
            ay: c,
            dP: h,
            us: "web-1"
        });
        Da(null == this.qy);
        return this.qy = this.hd.Ox(a).bind(this).tap(function (a) {
            0 < a.jA.XD.length && (this.pj = a.jA.XD[0].url,
                this.pK(this).bind(this).then(function (a) {
                    a.IO(this.pj);
                    a.KO(this.Hr, this.Gr);
                    B0(this.view, a);
                    if (a.PC) {
                        var b = a.PC;
                        this.view.$(".dialog").addClass(b)
                    }
                    this.zl.track("complete");
                    this.AP(this.pj);
                    b = this.H;
                    b.track("design_publish", {
                        format: h.format,
                        watermark: k,
                        destination: "download",
                        design: b.xe,
                        template: b.Ci,
                        transparent_background: h.ns,
                        crop_marks: h.Tq,
                        page_count: h.ia.length,
                        is_print_pdf: this.pt.UT
                    });
                    this.ia.$_ = a
                }))
        }).catch(P.CancellationError, function () {}).finally(function () {
            this.qy = null
        }).catch(function () {
            return P.reject("EXPORTING")
        })
    };
    f.OG = function () {
        (this.Hr || this.Gr) && UX(this.jc)
    };
    f.cancel = function () {
        this.zl.LB("cancel");
        this.finally()
    };
    f.ok = function () {
        this.zl.LB("ok");
        this.finally()
    };
    f.finally = function () {
        Da(null != this.NI);
        this.NI(this.pj);
        this.OG();
        this.remove()
    };

    function D5() {}
    D5 = G0.extend({
        className: "exporting complete"
    });
    f = D5.prototype;
    f.events = function () {
        return {
            "click .openUploadsTab": this.w2,
            "click .button--homepageHint": this.q2
        }
    };
    f.initialize = function (a) {
        this.sc = a.sc;
        this.ba = a.ba;
        this.u = a.u;
        this.Pa = Pc(a.u);
        this.Ya = Tc(a.u);
        this.H = a.H;
        this.Gr = this.Hr = !1;
        this.pj = null;
        this.de = a.de;
        this.tl = a.tl;
        this.aa = a.aa;
        this.ja = a.ja;
        var b = AZ,
            c = a.Qb;
        a = a.u;
        a.Jf || (a.Jf = new Be(a.config));
        this.OO = new b({
            location: "publish",
            Qb: c,
            Jf: a.Jf
        });
        this.listenTo(this.OO, {
            shareClicked: this.NO,
            emailSend: this.R_,
            shareViewResize: this.Dt
        })
    };
    f.refresh = function () {
        this.render();
        return P.resolve()
    };
    f.render = function () {
        var a = this.el,
            b, c = this.Jm();
        soy.asserts.assertType(c.ey instanceof soydata.SanitizedHtml || c.ey instanceof soydata.UnsanitizedText || goog.isString(c.ey), "downloadStartedHtml", c.ey, "soydata.SanitizedHtml");
        b = c.ey;
        soy.asserts.assertType(goog.isBoolean(c.kB) || 1 === c.kB || 0 === c.kB, "showLicenseHint", c.kB, "boolean");
        var d = !!c.kB;
        soy.asserts.assertType(c.Iz instanceof soydata.SanitizedHtml || c.Iz instanceof soydata.UnsanitizedText || goog.isString(c.Iz), "licenseHint", c.Iz, "soydata.SanitizedHtml");
        var e = c.Iz;
        soy.asserts.assertType(goog.isBoolean(c.de) || 1 === c.de || 0 === c.de, "showHomepageHints", c.de, "boolean");
        var g = !!c.de;
        soy.asserts.assertType(goog.isString(c.Au) || c.Au instanceof goog.soy.data.SanitizedContent, "hintSeeAllDesigns", c.Au, "string|goog.soy.data.SanitizedContent");
        c = c.Au;
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"intro"\x3e' + soy.$$escapeHtml(b) + "\x3c/p\x3e" + (g ? "" : '\x3cdiv class\x3d"socialShare"\x3e\x3c/div\x3e') + (d ? '\x3cp class\x3d"feedback feedback--success"\x3e' + soy.$$escapeHtml(e) + "\x3c/p\x3e" : "") + (g ? bZ({
            tagName: "a",
            href: "/",
            J: "button--homepageHint",
            text: c
        }) : ""));
        a.innerHTML = b;
        this.$(".socialShare").html(this.OO.render().el);
        return this
    };
    f.IO = function (a) {
        this.pj = a
    };
    f.KO = function (a, b) {
        this.Hr = a;
        this.Gr = b
    };
    f.w2 = function () {
        AL.call($("#objectPanel .uploads a"), this.u);
        this.close()
    };
    f.q2 = function () {
        yl(this.H, "see_your_designs", "export_complete_dialog", "first_time_publish")
    };
    f.Dt = function () {
        this.trigger("contentResize")
    };
    f.close = function () {
        this.trigger("done");
        this.de && zl(this.H, "export_complete", "export_dialog", "first_time_publish")
    };
    f.NO = function () {
        Da(null != this.tl);
        this.close();
        this.aa.setTimeout(this.tl, 300)
    };
    f.R_ = function (a) {
        var b = this;
        this.$(".shareViaEmailForm button").addClass("sending");
        wl(this.H);
        px(this.sc, new Px({
            zb: ub.Fc(),
            mode: a.mode,
            Zg: a.Zg,
            dr: a.Q_,
            SB: "publish"
        })).bind(this).finally(function () {
            this.$(".shareViaEmailForm button").removeClass("sending")
        }).then(function () {
            this.$(".shareViaEmailForm button").addClass("sent");
            this.aa.setTimeout(this.trigger.bind(this, "done"), 600)
        }).catch(function () {
            this.OO.trigger("emailSendingError", b.Pa.format("publishViewEmailSendingError"))
        })
    };
    f.Ao = function (a) {
        return x0(a).toString()
    };
    f.Im = function () {
        return {
            title: this.Pa.format("publishViewDesignReady")
        }
    };
    f.Jm = function () {
        if (null == this.pj)
            throw Error("export url must be set");
        var a = "";
        if (this.Hr && this.Gr)
            var a = this.Ya.Fd(),
                b = this.Ya.Pc(),
                a = this.Pa.format("publishViewUnlimitedUseCombinedHint", a, b);
        else
            this.Hr ? a = Ne(this.Pa, this.Ya.Pc()) : this.Gr && (a = Ne(this.Pa, this.Ya.Fd()));
        return {
            ey: soydata.VERY_UNSAFE.ordainSanitizedHtml(this.Pa.format("publishViewDownloadStarted", this.pj)),
            kB: !!a,
            Iz: soydata.VERY_UNSAFE.ordainSanitizedHtml(a),
            de: this.de,
            Au: this.Pa.Au()
        }
    };

    function C5() {}
    C5 = G0.extend({
        className: "exporting complete"
    });
    f = C5.prototype;
    f.initialize = function (a) {
        this.Pa = a.Pa;
        this.pj = null;
        this.BL = a.BL
    };
    f.IO = function (a) {
        this.pj = a
    };
    f.KO = function () {};
    f.refresh = function () {
        this.render();
        return P.resolve()
    };
    f.render = function () {
        this.el.innerHTML = V1(this.Jm());
        window.setTimeout(function () {
                this.trigger("done")
            }
            .bind(this), 1E3);
        return this
    };
    f.events = function () {
        return {
            "click .useExportButton": function () {
                this.trigger("done")
            }
        }
    };
    f.Jm = function () {
        return {
            message: this.Pa.format("publishViewExportCompleteEmbedded"),
            Jg: this.Pa.Jg()
        }
    };
    f.Ao = function (a) {
        return x0(a).toString()
    };
    f.Im = function () {
        return {
            title: this.BL ? this.Pa.format("publishViewExportCompletePdf") : this.Pa.format("publishViewExportCompleteImage")
        }
    };

    function aW(a, b) {
        this.dN = a.dN;
        this.ka = a.ka;
        this.u = a.u;
        this.view = b
    }
    aW.prototype.confirm = function () {
        var a = this;
        return new P(function (b, c) {
            if (!a.dN)
                return b(!0);
            Jv(a.ka).then(function (d) {
                if (d.neverShowReplacePageContentWarning)
                    return b(!0);
                Xo(a.view).then(function (c) {
                    if (a.view.tF) {
                        Kv(a.ka, "neverShowReplacePageContentWarning", !0);
                        var d = $("#documentFileMenuUndoButton"),
                            h = d.offset();
                        (new PX({
                            We: $(document),
                            Le: $("body"),
                            Mx: a.u.format("editorReplaceContentContextTipText"),
                            pd: a.u.format("editorReplaceContentContextTipButtonText"),
                            width: 265,
                            style: "contextTipOnboarding topArrow"
                        })).iw(h.left - 4, h.top + +d.height() + 4, !1)
                    }
                    b(2 === c)
                }).catch(function (a) {
                    return c(a)
                })
            })
        })
    };

    function $V(a) {
        Uo.call(this, {
            className: "replaceContentDialog",
            aa: a.aa,
            cf: !1,
            title: a.bQ
        });
        this.tF = !1;
        var b = $,
            c;
        c = a.z_;
        var d = a.E1,
            e = a.J5;
        a = a.aQ;
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "doNotReplaceButton", c, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "neverShowAgainLabel", d, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(e) || e instanceof goog.soy.data.SanitizedContent, "replaceButton", e, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a) || a instanceof goog.soy.data.SanitizedContent, "warningText", a, "string|goog.soy.data.SanitizedContent");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cp\x3e" + soy.$$escapeHtml(a) + "\x3c/p\x3e" + bZ({
            J: "replaceContentDialog__cancelButton buttonSecondary",
            text: c
        }) + bZ({
            J: "replaceContentDialog__replaceButton",
            text: e
        }) + '\x3cdiv\x3e\x3clabel\x3e\x3cinput type\x3d"checkbox" /\x3e' + soy.$$escapeHtml(d) + "\x3c/label\x3e\x3c/div\x3e");
        this.content = b(c.toString())
    }
    t($V, Uo);
    $V.prototype.events = function () {
        return _.extend(Uo.prototype.events.call(this), {
            "click .replaceContentDialog__replaceButton": this.ok,
            "click .replaceContentDialog__cancelButton": this.cancel,
            'click input[type\x3d"checkbox"]': this.j7
        })
    };
    $V.prototype.render = function () {
        Uo.prototype.render.call(this);
        return this
    };
    $V.prototype.j7 = function (a) {
        this.tF = a.target.checked
    };

    function f0() {}
    f0 = Backbone.View.extend({
        className: "linearProgress"
    });
    f = f0.prototype;
    f.vI = function (a) {
        this.OW = (100 / a.length).toFixed(4) + "%";
        return $("\x3cul\x3e" + a.map(function (a) {
            return '\x3cli class\x3d"stage ' + a.J.join(" ") + '"\x3e\x3cspan class\x3d"label"\x3e\x3cspan class\x3d"text"\x3e' + a.label + '\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"wipe"\x3e\x3cspan class\x3d"inner"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"bar"\x3e\x3c/span\x3e\x3cspan class\x3d"light"\x3e\x3c/span\x3e\x3c/li\x3e'
        }).join("") + "\x3c/ul\x3e")
    };
    f.initialize = function (a) {
        this.OW = "0%";
        this.$el.html(this.vI(a.O6))
    };
    f.render = function (a) {
        if ("error" === a)
            return this.$el.addClass("out"),
                this.$el.addClass("error"),
                this;
        var b = this.$el.find(".stage." + a);
        if (b.hasClass("active"))
            return this;
        b.addClass("preparing");
        window.setTimeout(function () {
            b.addClass("active").removeClass("preparing")
        }, 800);
        b.prevAll().addClass("past").removeClass("active");
        return this
    };
    f.show = function (a) {
        a.append(this.$el);
        var b = this;
        this.$(".stage:first-child").addClass("appear").addClass("preparing");
        window.setTimeout(function () {
            b.$(".stage:first-child").addClass("active").removeClass("preparing")
        }, 1E3);
        this.$(".stage:not(:first-child)").each(function (a) {
            var d = $(this);
            d.css("width", b.OW);
            window.setTimeout(function () {
                d.addClass("appear")
            }, 100 * a)
        })
    };
    f.remove = function () {};

    function jR() {}
    jR = Backbone.View.extend({
        tagName: "div",
        className: "fxPanel"
    });
    f = jR.prototype;
    f.events = function () {
        var a = {};
        a["click .preset"] = this.FZ;
        a["click .presets .scrollLeft"] = this.b6;
        a["click .presets .scrollRight"] = this.c6;
        a["input .range .trackContainer \x3e input[type\x3drange]"] = this.RU;
        a["change .range .trackContainer \x3e input[type\x3drange]"] = this.RU;
        a["click .hex"] = this.zZ;
        a["click .toggleAdvanced"] = this.i7;
        return a
    };
    f.initialize = function (a) {
        this.tN = a.tN;
        this.kC = this.model.filter.name;
        this.wG = null;
        this.wL = !1;
        this.FV = {};
        this.eQ = this.xn = 0;
        this.sf = a.sf;
        this.listenTo(this.model, "change", this.refresh);
        this.listenTo(I, "beforeOperationStackPop", this.FA);
        this.listenTo(S, "hideContextualControlsRequested", this.remove);
        this.render()
    };
    f.render = function () {
        var a = this;
        $("#editorLogo").addClass("noAnimate");
        $(".imageToolbarCrop").removeClass("enabled").addClass("disabled");
        this.$el.html(this.template({
            advancedOptionsMsg: $d(this.sf),
            filterCodeMsg: this.sf.format("editorToolbarFilterCode")
        }));
        this.$el.addClass("toolbar--fx");
        TH(this.model);
        window.setTimeout(function () {
            Naa(a);
            Oaa(a);
            F5(a);
            a.refresh()
        }, 300);
        this.wG = this.model.bP;
        return this
    };
    f.remove = function () {
        $("#editorLogo").removeClass("noAnimate");
        this.FA();
        $(".imageToolbarCrop").removeClass("disabled").addClass("enabled");
        this.model && eC(this.model);
        Backbone.View.prototype.remove.call(this)
    };

    function kR(a, b) {
        a.$el.css("top", b.bottom + 23).css("left", b.left)
    }
    f.refresh = function () {
        this.kC = this.model.filter.name;
        this.I8 || Paa(this);
        Qaa(this);
        G5(this);
        var a = "Normal" == this.model.filter.name,
            b = !this.model.CL();
        this.$el.toggleClass("hideIntensity", a);
        this.$el.toggleClass("disableIntensity", b);
        this.$el.find(".range_intensity .sliderInput").prop("disabled", b || a);
        F5(this)
    };

    function H5() {
        return "intensity brightness contrast saturation tint blur x-process vignette".split(" ")
    }

    function Naa(a) {
        var b = a.$el.find(".presets .presetsButtons");
        b.empty();
        $("#editorLogo").addClass("noAnimate");
        var c = a.model.Uc();
        if (c) {
            var c = c[aC].Aa(),
                d = $(_.template('\x3cli class\x3d"preset preset_Normal"\x3e\x3cdiv class\x3d"image"\x3e\x3cdiv class\x3d"inner"\x3e\x3cimg\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan class\x3d"title"\x3e\x3c%- label %\x3e\x3c/span\x3e\x3c/li\x3e')({
                    label: ae(a.sf, "Normal")
                })),
                e = d.find("img");
            e.css("opacity", 0);
            e.one("load", function () {
                var a = $(e).get(0).naturalWidth,
                    b = $(e).get(0).naturalHeight,
                    a = new U(0, 0, a, b);
                pm(a, new U(0, 0, 60, 60));
                e.css(a.serialize());
                e.css("opacity", 1)
            });
            OB(PB, e, c);
            b.append(d);
            b.find("." + I5(a.kC)).addClass("active")
        }
        a.tN.sort(function (b, c) {
            b = ae(a.sf, b.name);
            c = ae(a.sf, c.name);
            return b < c ? -1 : 1
        }).forEach(function (c, d) {
            var e = $('\x3cli class\x3d"preset ' + Raa(a, c) + '"\x3e\x3c/li\x3e');
            b.append(e);
            window.setTimeout(function () {
                Saa(a, e, c)
            }, 300 * d)
        })
    }

    function Saa(a, b, c) {
        a.model.RJ(c, !0, function (d) {
            var e = $('\x3cimg src\x3d"' + d.src + '" /\x3e');
            e.css("opacity", 0);
            e.one("load", function () {
                var a = $(e).get(0).naturalWidth,
                    b = $(e).get(0).naturalHeight,
                    a = new U(0, 0, a, b);
                pm(a, new U(0, 0, 60, 60));
                e.css(a.serialize());
                e.css("opacity", 1)
            });
            var g = $('\x3cdiv class\x3d"inner"\x3e\x3c/div\x3e'),
                h = $('\x3cdiv class\x3d"vignette"\x3e\x3c/div\x3e'),
                k = $('\x3cdiv class\x3d"image"\x3e\x3c/div\x3e');
            h.css("background-image", "radial-gradient(" + d.J7 + ")");
            k.append(g);
            g.append(e);
            g.append(h);
            b.append(k);
            b.append($('\x3cspan class\x3d"title"\x3e\x3c/span\x3e').text(ae(a.sf, c.name)));
            c.name === a.kC && b.addClass("active")
        })
    }

    function G5(a) {
        var b = a.$el.find(".presets .presetsButtons");
        b.find(".preset").removeClass("active");
        b.find("." + I5(a.kC)).addClass("active");
        0 === a.xn ? a.$el.find(".scrollLeft").addClass("disabled") : a.$el.find(".scrollLeft").removeClass("disabled");
        a.xn === a.$el.find(".preset").length - 5 ? a.$el.find(".scrollRight").addClass("disabled") : a.$el.find(".scrollRight").removeClass("disabled")
    }

    function Oaa(a) {
        function b(a) {
            var b = 0,
                c = 100;
            "vignette" !== a && "intensity" !== a && (b = -100,
                c = 100);
            return $('\x3cinput class\x3d"sliderInput" type\x3d"range" step\x3d"1" min\x3d"' + b + '" max\x3d"' + c + '" value\x3d"0" /\x3e')
        }
        var c = a.$el.find(".ranges");
        c.empty();
        H5().forEach(function (d) {
            var e = be(a.sf, d),
                e = $(_.template('\x3cli class\x3d"range \x3c%- rangeClass %\x3e"\x3e\x3clabel\x3e\x3c%- rangeName %\x3e\x3c/label\x3e\x3c/li\x3e')({
                    rangeClass: J5(d),
                    rangeName: e
                })),
                g = b(d),
                h = $("\x3cspan\x3e").addClass("rangeTrack"),
                k = $('\x3cspan class\x3d"valueDisplay"\x3e0\x3c/span\x3e'),
                l = $('\x3cdiv class\x3d"trackContainer"\x3e\x3c/div\x3e');
            l.append(g);
            l.append(h);
            ("vignette" != d ? [0] : []).forEach(function (a) {
                var b = $('\x3cspan class\x3d"snapGuide"\x3e\x3c/span\x3e');
                b.css("margin-left", a);
                l.append(b)
            });
            e.append(l);
            e.append(k);
            c.append(e)
        })
    }

    function Paa(a) {
        var b = a.$el.find(".ranges");
        H5().forEach(function (c) {
            b.find("." + J5(c) + " input").val(a.model.getByName(c.replace(/[^a-z]/gi, "")) || 0)
        })
    }

    function Qaa(a) {
        var b = a.$el.find(".ranges");
        H5().forEach(function (c) {
            var d = b.find("." + J5(c) + " .valueDisplay");
            c = parseInt(a.model.getByName(c.replace(/[^a-z]/gi, "")), 10);
            isNaN(c) && (c = 0);
            d.html(0 < c ? "+" + c : "" + c)
        })
    }

    function F5(a) {
        a.$el.find("input.hex").val(a.model.filter.Ca())
    }

    function Raa(a, b) {
        var c = I5(b.name);
        a.FV[c] = b;
        return c
    }

    function I5(a) {
        return "preset_" + a.replace(/[^a-z0-9]/gi, "")
    }

    function J5(a) {
        return "range_" + a.replace(/[^a-z0-9]/gi, "")
    }
    f.FZ = function (a) {
        var b = this,
            c = $(a.target);
        c.hasClass("preset") || (c = c.parents(".preset").first());
        c.hasClass("active") || (c.addClass("transitioning"),
            window.setTimeout(function () {
                c.removeClass("transitioning").addClass("active")
            }, 50));
        a = c.attr("class").split(/\s+/).filter(function (a) {
            return /preset_[a-z0-9]+/gi.test(a)
        });
        if (1 === a.length) {
            a = a[0];
            if ("preset_Normal" == a)
                XH(this.model);
            else {
                var d = this.FV[a];
                window.setTimeout(function () {
                    WH(b.model, d)
                }, 150)
            }
            window.clearTimeout(this.eQ)
        }
    };
    f.RU = function (a) {
        function b() {
            $.data(d, "FxPanelView:snapRange", 0);
            $.data(d, "FxPanelView:snapReset", 0)
        }
        var c = this,
            d = a.target;
        a = d.valueAsNumber;
        var e = /(?:^|\s)range_(\S+)/.exec(d.parentNode.parentNode.className),
            g = $.data(d, "FxPanelView:snapRange") || 0,
            h = $.data(d, "FxPanelView:snapReset") || 0;
        0 < a * g && 14 >= a * g ? (a = 0,
            d.value = a,
            0 == h && (h = window.setTimeout(b, 750),
                $.data(d, "FxPanelView:snapReset", h))) : 0 != a && $.data(d, "FxPanelView:snapRange", 0 > a ? 1 : -1);
        e && (this.model.IG(e[1], a),
            window.clearTimeout(this.eQ),
            this.eQ = window.setTimeout(function () {
                c.model.update(!0)
            }, 400))
    };
    f.zZ = function () {
        function a() {
            d.off("blur");
            d.off("keypress");
            var a = d.val().replace(/[^a-z0-9]/gi, "");
            d.val(a).blur();
            var b = c.model,
                a = HH(a);
            isNaN(a.blur * a.brightness * a.contrast * a.saturation * a.jf * a.vignette * a.Qf) || (b.filter = a,
                b.mj = !0,
                b.update(!0));
            c.wL = !1
        }

        function b(b) {
            13 == b.which && a()
        }
        if (!this.wL) {
            this.wL = !0;
            var c = this,
                d = this.$el.find("input.hex");
            d.val(this.model.Ca()).select().focus();
            d.on("blur", a);
            d.on("keypress", b)
        }
    };
    f.b6 = function () {
        0 !== this.xn && (this.xn -= 3,
            K5(this))
    };
    f.c6 = function () {
        var a = parseInt($(".preset").length, 10);
        this.xn < a - 5 && (this.xn += 3,
            K5(this))
    };

    function K5(a) {
        var b = -72 * a.xn;
        a.$el.find(".preset").css("-webkit-transform", "translateX(" + b + "px)").css("transform", "translateX(" + b + "px)");
        G5(a)
    }
    f.i7 = function () {
        var a = this;
        this.$el.hasClass("showAdvanced") ? (this.$el.find(".toggleAdvanced .text").text($d(this.sf)),
            this.$el.find(".filterCode").removeClass("big").addClass("compact"),
            this.$el.removeClass("in").removeClass("showAdvanced")) : (this.$el.find(".toggleAdvanced .text").text(this.sf.format("editorToolbarFilterOptionSimpler")),
            this.$el.addClass("showAdvanced"),
            P.delay(300).then(function () {
                a.$el.addClass("in")
            }),
            this.$el.find(".filterCode").removeClass("compact").addClass("big"))
    };
    f.FA = function () {
        var a = G.Oa().hb()[0],
            b = this.model.bP,
            c = !a,
            d = _.isEqual(b, this.wG);
        c || d || (a = {
                placeholderIndex: a.Tc(),
                elementIndex: a.ea(),
                pageIndex: Mo(G, a.ha()),
                "new": {
                    filter: b
                },
                old: {
                    filter: this.wG
                }
            },
            I.register(new Y(11, a)),
            this.wG = b)
    };
    f.template = _.template('\x3cul class\x3d"presets"\x3e\x3cli class\x3d"scrollLeft"\x3e\x26#xe000;\x3c/li\x3e\x3cli class\x3d"presets_container"\x3e\x3cul class\x3d"presetsButtons"\x3e\x3c/ul\x3e\x3c/li\x3e\x3cli class\x3d"scrollRight"\x3e\x26#xe000;\x3c/li\x3e\x3c/ul\x3e\x3cdiv class\x3d"rangesContainer"\x3e\x3cul class\x3d"ranges"\x3e\x3c/ul\x3e\x3cdiv\x3e\x3cdiv class\x3d"toggleAdvanced"\x3e\x3cspan class\x3d"text"\x3e\x3c%- advancedOptionsMsg %\x3e\x3c/span\x3e \x3cspan class\x3d"arrow"\x3e\x26#xe000;\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"filterCode compact"\x3e\x3cspan class\x3d"text"\x3e\x3c%- filterCodeMsg %\x3e #\x3c/span\x3e\x3cinput name\x3d"hex" class\x3d"hex" maxlength\x3d"16"/\x3e\x3c/div\x3e');

    function Taa() {
        this.Od = window.pricingPlans
    }

    function w_(a) {
        return Object.freeze(R(Yi, a.Od.paidMonthly))
    }

    function O_(a) {
        return [w_(a), Object.freeze(R(Yi, a.Od.paidYearly))]
    };

    function Uaa(a) {
        this.plan = a.b5;
        this.title = a.title;
        this.pricePerMonthText = a.n5;
        this.summaryText = a.V6;
        this.billingCycleText = a.XY
    }

    function Vaa(a, b) {
        function c(a, c) {
            if ("MONTHLY" === c)
                return b.format("canvaForWorkUpgradePlanSummaryMonthlyPerUser", a);
            if ("YEARLY" === c)
                return b.format("canvaForWorkUpgradePlanSummaryYearlyPerUser", a);
            throw Error("unrecognised BillingInterval");
        }
        var d = a.slice(0).sort(function (a, b) {
            return aj(b) - aj(a)
        })[0];
        return a.map(function (a) {
            var g;
            if ("MONTHLY" === $i(a))
                g = b.format("canvaForWorkUpgradePlanMonthly");
            else if ("YEARLY" === $i(a))
                g = b.format("canvaForWorkUpgradePlanYearly");
            else
                throw Error("unrecognised plan billing interval");
            var h = c(Math.round(a.ur() / ("YEARLY" === $i(a) ? 12 : 1) * 100) / 100, "MONTHLY"),
                k;
            k = "YEARLY" === $i(a) ? b.format("canvaForWorkUpgradePlanPercentSaving", ((aj(d) - aj(a)) / aj(d) * 100).toFixed(0) / 100) : c(aj(a), "YEARLY");
            return new Uaa({
                b5: a,
                title: g,
                n5: h,
                V6: k,
                XY: "YEARLY" === $i(a) ? b.format("canvaForWorkUpgradePlanBilledYearly", a.ur()) : ""
            })
        })
    };

    function L5() {}
    L5 = Backbone.View.extend({
        tagName: "ul",
        className: "textIconList"
    });
    L5.prototype.initialize = function (a) {
        this.items = a.items
    };
    L5.prototype.render = function () {
        this.$el.html(this.items.map(this.ML).join(""));
        return this
    };
    L5.prototype.ML = _.template('\x3cli class\x3d"textIconItem"\x3c% if (icon) { %\x3e data-icon\x3d"\x3c%- icon %\x3e"\x3c% } %\x3e\x3e\x3ch3\x3e\x3c%- title %\x3e\x3c/h3\x3e\x3c% if (isHtml) { %\x3e\x3c%\x3d content %\x3e\x3c% } else { %\x3e\x3cp\x3e\x3c%- content %\x3e\x3c/p\x3e\x3c% } %\x3e\x3c/li\x3e');
    L5.c_ = function (a) {
        return new L5({
            items: [{
                title: re(a),
                content: a.format("canvaForWorkUpgradeTeamBrandKitsDescription"),
                icon: "teamBrandKits",
                isHtml: !1
            }, {
                title: te(a),
                content: a.format("canvaForWorkUpgradeMagicallyResizeDescription"),
                icon: "magicResize",
                isHtml: !1
            }, {
                title: se(a),
                content: a.format("canvaForWorkUpgradeLayoutCreatorsDescription"),
                icon: "layoutCreators",
                isHtml: !1
            }, {
                title: ue(a),
                content: a.format("canvaForWorkUpgradePhotoFoldersDescription"),
                icon: "photoFolders",
                isHtml: !1
            }]
        })
    };
    L5.C8 = function (a) {
        return new L5({
            items: [{
                title: re(a),
                content: a.format("canvaForWorkUpgradeTeamBrandKitsShortDescription"),
                icon: "teamBrandKits",
                isHtml: !1
            }, {
                title: te(a),
                content: a.format("canvaForWorkUpgradeMagicallyResizeShortDescription"),
                icon: "magicResize",
                isHtml: !1
            }, {
                title: se(a),
                content: a.format("canvaForWorkUpgradeLayoutCreatorsShortDescription"),
                icon: "layoutCreators",
                isHtml: !1
            }, {
                title: ue(a),
                content: a.format("canvaForWorkUpgradePhotoFoldersShortDescription"),
                icon: "photoFolders",
                isHtml: !1
            }]
        })
    };

    function M5() {}
    M5 = Backbone.View.extend({
        className: "priceOptions",
        tagName: "ul"
    });
    f = M5.prototype;
    f.initialize = function (a) {
        this.Ff = a.Ff
    };
    f.events = function () {
        return {
            click: this.AZ
        }
    };
    f.render = function () {
        this.$el.html(this.Ff.map(this.o5).join(""));
        return this
    };
    f.AZ = function (a) {
        a = $(a.target).closest("li");
        N5(this, a.index())
    };

    function N5(a, b) {
        a.$(".priceOption--selected").removeClass("priceOption--selected");
        0 <= b && b < a.Ff.length && (a.$("li").eq(b).addClass("priceOption--selected"),
            a.$("li").eq(b).find("input").prop("checked", !0),
            a.trigger("selectPlan", a.Ff[b].plan))
    }
    f.vO = function () {
        function a(a) {
            switch ($i(a)) {
                case "MONTHLY":
                    return a.ur();
                case "YEARLY":
                    return aj(a);
                default:
                    throw Error("unknown billing interval");
            }
        }
        var b = [].concat(this.Ff).sort(function (b, d) {
                return a(b.plan) - a(d.plan)
            }),
            b = this.Ff.indexOf(b[0]);
        N5(this, b)
    };
    f.o5 = _.template('\x3cli class\x3d"priceOption"\x3e\x3cinput name\x3d"priceOptionPlan" type\x3d"radio"\x3e\x3cspan class\x3d"priceOptionTitle"\x3e\x3c%- title %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionPricePerMonth"\x3e\x3c%- pricePerMonthText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionSummary"\x3e\x3c%- summaryText %\x3e\x3c/span\x3e\x3cspan class\x3d"priceOptionBillingCycle"\x3e\x3c%- billingCycleText %\x3e\x3c/span\x3e\x3c/li\x3e');

    function O5(a) {
        this.k0 = a.j0;
        this.a1 = a.$0;
        this.nq = a.PW.map(function (a) {
            return new P5(a)
        });
        this.nq.forEach(function (a) {
            this.listenTo(a, {
                willAdvance: this.pT,
                advance: this.a4,
                finish: this.c4,
                reset: this.d4,
                die: this.b4
            })
        }, this);
        this.oN = a.oN.map(function (a) {
            return _.defaults({}, a, {
                position: "leftTop",
                Sh: 0
            })
        });
        this.NV = !1;
        this.TG = new Q5({
            uM: a.PW.length,
            re: a.re
        })
    }
    f = O5.prototype;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    f.listenTo = Backbone.Events.listenTo;
    f.listenToOnce = Backbone.Events.listenToOnce;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;

    function kp(a) {
        var b = [],
            c = [],
            d = a.re;
        b.push([{
            he: "#documentFileMenuButton",
            Kg: 10
        }, {
            he: ".dropdownMenuPopoverContainer .documentResizePaneButton",
            VR: !0,
            Sh: 500,
            Xl: 305,
            Kg: 18
        }]);
        c.push({
            he: ".documentResizeButton",
            pC: -170,
            Sh: 500,
            text: d.format("starOnboardingStepResizingText"),
            title: d.format("starOnboardingStepResizingTitle"),
            Qe: df(d)
        });
        b.push([{
            he: "#objectPanel menu .uploads a",
            Eq: "#objectPanel.stage6",
            Xl: 15,
            Kg: 15
        }, {
            he: "#resultsUpload .newUploadsFolder",
            zr: "#objectPanel:not(.stage6)",
            uN: function () {
                $("#objectPanel").find(".uploadsFolder[data-system-folder\x3dUNFOLDERED].uploadsFolderOpen .uploadsFolderThumbnail").first().click()
            },
            Sh: 500
        }]);
        c.push({
            he: "#resultsUpload .newUploadsFolderThumbnail",
            Sh: 500,
            text: d.format("starOnboardingStepPhotoFoldersText"),
            title: d.format("starOnboardingStepPhotoFoldersTitle"),
            Qe: df(d)
        });
        a.Zx && (b.push([{
                he: "#objectPanel menu .layout a",
                Eq: "#objectPanel.stage2",
                Xl: 15,
                Kg: 15
            }, {
                he: "#resultsLayout .layoutsControls .tabDropdown",
                Kg: 10,
                zr: "#objectPanel:not(.stage2)",
                Sh: 500
            }, {
                he: ".layoutsTabMenu__item--teamTemplates",
                zr: "#objectPanel:not(.stage2)",
                Xl: 22,
                Kg: 16,
                Sh: 100
            }]),
            c.push({
                he: ".layoutsTabMenu__item--teamTemplates",
                p9: 100,
                text: d.format("starOnboardingStepTeamTemplatesText"),
                title: d.format("starOnboardingStepTeamTemplatesTitle"),
                Qe: df(d)
            }));
        b.push([{
            he: "#objectPanel menu .backgrounds a",
            Eq: "#objectPanel.stage5",
            Xl: 15,
            Kg: 15
        }, {
            he: "#resultsBackground .pinnedPalette .colorPaletteEntry:eq(0)",
            CK: !0,
            zr: "#objectPanel:not(.stage5)",
            YL: !0,
            Sh: 500
        }]);
        c.push({
            he: "#resultsBackground .pinnedPalette .colorPaletteEntry",
            text: d.format("starOnboardingStepBrandKitText"),
            title: d.format("starOnboardingStepBrandKitTitle"),
            Qe: df(d)
        });
        b.push([{
            he: "#objectPanel menu .uploads a",
            Eq: "#objectPanel.stage6",
            Xl: 15,
            Kg: 15
        }, {
            he: "#resultsUpload .uploadsFolder[data-system-folder\x3dLOGOS] .uploadsFolderThumbnail",
            zr: "#objectPanel:not(.stage6)",
            uN: function () {
                $("#objectPanel").find(".uploadsFolder[data-system-folder\x3dUNFOLDERED].uploadsFolderOpen .uploadsFolderThumbnail").first().click()
            },
            Sh: 500
        }]);
        c.push({
            he: "#resultsUpload .uploadsFolder[data-system-folder\x3dLOGOS] .uploadsFolderThumbnail",
            Sh: 500,
            text: d.format("starOnboardingStepLogoText"),
            title: d.format("starOnboardingStepLogoTitle"),
            Qe: df(d)
        });
        a.v5 && (b.push([{
                he: ".publishToStreamSwitch",
                Xl: 5,
                Kg: 5,
                CK: !0
            }, {
                he: ".switchPublishTemplate",
                Sh: 500
            }]),
            c.push({
                he: ".docPublisherPopOver .switchPublishTemplate",
                position: "rightTop",
                text: d.format("starOnboardingStepTemplatifyText"),
                title: d.format("starOnboardingStepTemplatifyTitle"),
                Qe: df(d)
            }));
        var e = "C4W_UPGRADED_USER" === a.kh;
        a = e ? [d.format("starOnboardingActionSetupTeam"), cf(d)] : [d.format("starOnboardingActionGotoTeamSpace"), cf(d)];
        b = new O5({
            j0: {
                lR: [d.format("starOnboardingActionFindTheStars")],
                Xn: d.format("starOnboardingFirstScreenSubtitle"),
                title: d.format("starOnboardingFirstScreenTitle"),
                pO: "",
                re: d
            },
            $0: {
                lR: a,
                Xn: d.format("starOnboardingLastScreenSubtitle"),
                title: d.format("starOnboardingLastScreenTitle"),
                pO: e ? "starFinderSplashScreenNewUser" : void 0,
                re: d
            },
            PW: b,
            oN: c,
            re: d
        });
        b.once("finish", function (a) {
            "solo" === a ? (null != T && T.track("upgrade_onboarding_finish_solo"),
                window.location = "/brand/create/featuredoc") : "team" === a ? (null != T && T.track("upgrade_onboarding_finish_team"),
                window.location = bm()) : "stream" === a ? (null != T && T.track("upgrade_onboarding_finish_invited"),
                window.location = "/team-stream") : "play" === a && null != T && T.track("upgrade_onboarding_finish_invited")
        });
        return b
    }
    f.start = function () {
        var a = this;
        Waa(this).then(function () {
            a.TG.render().$el.appendTo(document.body);
            Xaa(a)
        })
    };
    f.remove = function () {
        this.stopListening();
        this.TG.remove();
        this.nq.forEach(function (a) {
            a.remove()
        })
    };
    f.pT = function (a) {
        this.nq.forEach(function (b) {
            b !== a && b.toggle(!1)
        })
    };
    f.a4 = function (a) {
        this.pT(a);
        this.NV || (this.NV = !0,
            R5(a.Sg))
    };
    f.c4 = function (a) {
        function b() {
            a.toggle(!1);
            S5(d.TG)
        }

        function c() {
            T5(d)
        }
        var d = this,
            e = this.nq.indexOf(a),
            g = this.oN[e];
        P.delay(g.Sh).then(function () {
            var a = new U5(g);
            a.ci($(g.he));
            d.listenToOnce(a, "hide", b);
            d.listenToOnce(a, "remove", c)
        });
        V5(this)
    };

    function T5(a) {
        a.nq.every(function (a) {
            return W5(a)
        }) ? Yaa(a).then(a.remove.bind(a)) : X5(a)
    }
    f.d4 = function () {
        X5(this)
    };
    f.b4 = function () {
        S5(this.TG);
        T5(this)
    };

    function X5(a) {
        a.nq.forEach(function (a) {
            W5(a) || a.toggle(!0)
        })
    }

    function V5(a) {
        a.nq.filter(function (a) {
            return !W5(a)
        }).forEach(function (a, c) {
            a.eB(2 * c + 1)
        })
    }

    function Xaa(a) {
        V5(a);
        a.nq.forEach(function (a) {
            a.start()
        })
    }

    function Waa(a) {
        var b = new Y5(a.k0);
        b.render().show();
        a.listenToOnce(b, "next", function () {
            b.remove()
        });
        return new P(function (c) {
            a.listenToOnce(b, "remove", function () {
                null != T && T.track("upgrade_onboarding_start_stars");
                c()
            })
        })
    }

    function Yaa(a) {
        var b, c = new Y5(a.a1);
        c.render().show();
        a.listenToOnce(c, "next", function (a) {
            b = a;
            c.remove()
        });
        return new P(function (d) {
            a.listenToOnce(c, "remove", function () {
                a.trigger("finish", b);
                d()
            })
        })
    };

    function U5() {}
    U5 = dy.extend({
        className: "starFinderPopOver"
    });
    U5.prototype.initialize = function (a) {
        a = _.defaults({}, a, {
            pC: 0,
            Xl: 0,
            Qe: a.Qe
        });
        dy.prototype.initialize.call(this, a);
        this.options = a
    };
    U5.prototype.Xo = function () {
        return eW
    };
    U5.prototype.render = function () {
        dy.prototype.render.call(this);
        this.$(".buttonContainer .buttonBlock").removeClass("buttonBlock");
        this.$(".content").prepend($("\x3cp\x3e").text(this.options.text));
        return this
    };
    U5.prototype.Nl = function () {
        dy.prototype.Nl.call(this);
        var a = this.$(".dialog");
        a.css("left", parseInt(a.css("left"), 10) + this.options.pC).css("top", parseInt(a.css("top"), 10) + this.options.Kg);
        return this
    };

    function Q5() {}
    Q5 = Backbone.View.extend({
        className: "starFinderProgress"
    });
    Q5.prototype.initialize = function (a) {
        this.uM = a.uM;
        this.re = a.re
    };
    Q5.prototype.render = function () {
        this.$el.html(this.template({
            progressTitle: this.re.q5()
        }));
        for (var a = 0; a < this.uM; a++)
            this.$(".starFinderProgressList").append(this.ML());
        return this
    };

    function S5(a) {
        a.$("li:not(.starFinderProgressItemOn)").first().addClass("starFinderProgressItemOn")
    }
    Q5.prototype.ML = _.template('\x3cli class\x3d"starFinderProgressItem"\x3e\x26starf;\x3c/li\x3e');
    Q5.prototype.template = _.template('\x3ch2 class\x3d"starFinderProgressTitle"\x3e\x3c%- progressTitle %\x3e\x3c/h2\x3e\x3col class\x3d"starFinderProgressList"\x3e\x3c/ol\x3e');

    function Y5() {}
    Y5 = Backbone.View.extend({
        className: "starFinderSplashScreen"
    });
    f = Y5.prototype;
    f.events = function () {
        return {
            "click .buttonNext": this.u2
        }
    };
    f.initialize = function (a) {
        this.aa = Rk;
        this.options = a;
        this.Nd = new Tx({
            aa: this.aa,
            style: Ux
        });
        this.Xn = a.Xn;
        this.title = a.title;
        this.re = a.re
    };
    f.render = function () {
        var a = $(this.QY());
        this.$el.html(this.template(this.Zh()));
        this.$(".starFinderAstronautPlaceholder").replaceWith(a);
        this.options.lR.forEach(function (a, c) {
            a = $(this.aZ({
                text: a
            }));
            a.toggleClass("buttonSecondary", 0 < c);
            this.$(".starFinderButtonWrapper").append(a)
        }, this);
        this.options.pO && this.$el.addClass(this.options.pO);
        return this
    };
    f.show = function () {
        var a = this,
            b = dC(PB, this.$(".starFinderStarImage img").prop("src")),
            c = dC(PB, this.$(".starFinderAstronaut img").prop("src"));
        this.Nd.show(this.$el);
        P.all([b, c]).then(function () {
            a.$(".starFinderStarAndAstronaut").addClass("loaded")
        })
    };
    f.remove = function () {
        var a = this;
        this.$el.addClass("starFinderSplashScreenDisappearing");
        this.Nd.hide();
        this.aa.setTimeout(function () {
            a.trigger("remove");
            Backbone.View.prototype.remove.call(a)
        }, 300)
    };
    f.Zh = function () {
        return {
            subtitle: this.options.Xn,
            title: this.options.title,
            specialInstructionsTitle: this.re.L6(),
            specialInstructionsHtml: this.re.J6(),
            specialInstructionsQuestionText: this.re.K6(),
            responseSolo: this.re.format("starOnboardingSpecialInstructionsResponseSolo"),
            responseTeam: this.re.format("starOnboardingSpecialInstructionsResponseTeam"),
            brandMembersPath: bm()
        }
    };
    f.u2 = function (a) {
        var b = $(a.target),
            c;
        b.hasClass("starFinderSplashScreenButton") && b.hasClass("buttonSecondary") ? c = "play" : b.hasClass("starFinderSplashScreenButton") ? c = "stream" : b.hasClass("starOnboardingUserSoloButton") ? c = "solo" : b.hasClass("starOnboardingUserTeamButton") && (c = "team");
        this.trigger("next", c);
        a.preventDefault()
    };
    f.QY = _.template('\x3cdiv class\x3d"starFinderStarAndAstronaut"\x3e\x3cdiv class\x3d"starFinderStarOuter"\x3e\x3cdiv class\x3d"starFinderStarInner"\x3e\x3cdiv class\x3d"sparkle"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"sparkle"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"sparkle"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"sparkle"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"sparkle"\x3e\x3cspan\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"starFinderStarImage"\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding/star.png"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"starFinderAstronaut"\x3e\x3cimg src\x3d"https://static.canva.com/static/images/onboarding/astronaut.png"\x3e\x3c/div\x3e\x3c/div\x3e');
    f.aZ = _.template('\x3cbutton class\x3d"button buttonNext starFinderSplashScreenButton"\x3e\x3c%- text %\x3e\x3c/button\x3e');
    f.template = _.template('\x3cdiv class\x3d"starFinderBackground"\x3e\x3c/div\x3e\x3cdiv class\x3d"starFinderContent"\x3e\x3cdiv class\x3d"starFinderAstronautPlaceholder"\x3e\x3c/div\x3e\x3ch2 class\x3d"starFinderTitle"\x3e\x3c%- title %\x3e\x3c/h2\x3e\x3cp class\x3d"starFinderSubtitle"\x3e\x3c%- subtitle %\x3e\x3c/p\x3e\x3cdiv class\x3d"starFinderButtonWrapper"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"starFinderSpecialInstructions"\x3e\x3ch2\x3e\x3c%- specialInstructionsTitle %\x3e\x3c/h2\x3e\x3cp\x3e\x3c%\x3d specialInstructionsHtml %\x3e\x3c/p\x3e\x3cdiv class\x3d"starFinderSpecialInstructionsUserSelect"\x3e\x3ch3\x3e\x3c%- specialInstructionsQuestionText %\x3e\x3c/h3\x3e\x3cul\x3e\x3cli class\x3d"starOnboardingUserSolo"\x3e\x3ca href\x3d"/brand/create/featuredoc" class\x3d"button buttonNext starOnboardingUserSoloButton"\x3e\x3c%- responseSolo %\x3e\x3c/a\x3e\x3c/li\x3e\x3cli class\x3d"starOnboardingUserTeam"\x3e\x3ca href\x3d"\x3c%- brandMembersPath %\x3e" class\x3d"button buttonNext starOnboardingUserTeamButton"\x3e\x3c%- responseTeam %\x3e\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e');

    function P5(a) {
        this.active = !1;
        this.im = 0;
        this.Sg = new Z5(a[0]);
        $5(this);
        this.LN = 0;
        this.sB = a;
        this.Kk = new gO({
            attributes: !0,
            attributeFilter: ["class", "style"],
            childList: !0,
            characterData: !1,
            subtree: !0
        });
        a = _.throttle(this.J2.bind(this), 100, {
            trailing: !1
        });
        this.Kk.on("attrModified", a);
        this.Kk.on("subtreeModified", a)
    }
    f = P5.prototype;
    f.on = Backbone.Events.on;
    f.off = Backbone.Events.off;
    f.listenTo = Backbone.Events.listenTo;
    f.listenToOnce = Backbone.Events.listenTo;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.start = function () {
        this.Sg.show();
        this.active = !0
    };
    f.remove = function () {
        this.stopListening();
        iO(this.Kk);
        this.Sg.remove();
        this.active = !1
    };

    function W5(a) {
        return a.im === a.sB.length
    }
    f.eB = function (a) {
        this.LN = a;
        0 === this.im && this.Sg.eB(a)
    };

    function $5(a) {
        a.listenTo(a.Sg, "advance", a.Z3);
        a.listenTo(a.Sg, "die", a.e4)
    }
    f.toggle = function (a) {
        W5(this) || (this.active = a,
            this.Sg.toggle(a))
    };
    f.Z3 = function () {
        function a() {
            c.Kk.observe(document.body)
        }

        function b() {
            c.active ? c.trigger("advance", c) : c.reset(!0)
        }
        if (this.active) {
            var c = this;
            iO(this.Kk);
            this.im++;
            this.Sg.remove();
            W5(this) ? this.trigger("finish", this) : (this.trigger("willAdvance", this),
                a6(this).then(b).then(a).catch(function () {}))
        }
    };
    f.e4 = function () {
        this.active && (iO(this.Kk),
            this.Sg.remove(),
            this.toggle(!1),
            this.im = this.sB.length,
            this.trigger("die", this))
    };
    f.J2 = function () {
        var a;
        if (a = this.active && 0 < this.im) {
            var b = b6(this.Sg);
            if (W5(this) || !b.is(":visible"))
                a = !1;
            else if (a = this.sB[this.im].zr)
                a = 0 < $(a).length ? !1 : !0;
            else {
                a = b.get(0);
                var b = b.offset(),
                    b = document.elementFromPoint(b.left, b.top),
                    c = this.Sg.el;
                a = a === b || c === b || b && $.contains(a, b) || b && $.contains(c, b)
            }
            a = !a
        }
        a && this.reset()
    };
    f.reset = function (a) {
        iO(this.Kk);
        this.im = 0;
        this.Sg.remove();
        a6(this);
        a || this.trigger("reset", this)
    };

    function a6(a) {
        var b = _.extend({}, a.sB[a.im], {
            filled: a.im === a.sB.length - 1
        });
        a.Sg = new Z5(b);
        $5(a);
        a.LN && a.eB(a.LN);
        return a.Sg.show()
    };

    function Z5() {}
    Z5 = Backbone.View.extend({
        className: "starFinderStarContainer starFinderStarHidden starFinderStarInactive"
    });
    Z5.prototype.events = function () {
        return {
            "click .starFinderStar": this.Bf
        }
    };
    Z5.prototype.initialize = function (a) {
        a = _.defaults({}, a, {
            pC: 0,
            Xl: 0,
            Kg: 0,
            VR: !1,
            filled: !1,
            CK: !1,
            YL: !1,
            position: 3,
            Sh: 0
        });
        this.EL = !1;
        this.options = a;
        this.oG = 0;
        this.Pr = this.Pr.bind(this);
        this.Uz = this.Uz.bind(this);
        this.kv = _.throttle(this.kv.bind(this), 100);
        $(document).on("click", this.kv);
        $(window).on("resize", this.kv)
    };
    Z5.BQ = 1600;
    Z5.WH = 500;
    f = Z5.prototype;
    f.render = function () {
        this.$el.toggleClass("starFinderStarInert", this.options.VR);
        this.$el.toggleClass("starFinderStarFilled", this.options.filled);
        this.$el.html(this.template({
            filled: this.options.filled
        }));
        return this
    };
    f.dW = function () {
        function a() {
            var a = d.outerWidth();
            if (-1 < [2, 0].indexOf(c.options.position))
                return Math.round(e.left - a + c.options.pC);
            if (-1 < [3, 1].indexOf(c.options.position))
                return Math.round(e.left + d.outerWidth() - c.options.Xl)
        }

        function b() {
            var a = d.outerHeight();
            if (-1 < [2, 3].indexOf(c.options.position))
                return Math.round(e.top + c.options.Kg);
            if (-1 < [0, 1].indexOf(c.options.position))
                return Math.round(e.top + a / 2 + c.options.Kg)
        }
        var c = this,
            d = b6(this),
            e = d.offset();
        0 < d.length && this.$(".starFinderStar").css("left", a()).css("top", b())
    };
    f.remove = function () {
        $(document).off("click", this.kv);
        $(window).off("resize", this.kv);
        b6(this).off("click", this.Pr).off("mousedown", this.Uz);
        window.clearInterval(this.oG);
        Backbone.View.prototype.remove.call(this)
    };
    f.show = function () {
        this.render().$el.appendTo(document.body);
        if (this.options.zr && 0 < $(this.options.zr).length)
            return P.resolve();
        this.$el.toggleClass("starFinderStarInactive", !1);
        return P.delay(this.options.Sh).then(function () {
                this.options.uN && this.options.uN();
                if (0 === b6(this).length)
                    return this.trigger("die", this),
                        P.reject();
                c6(this, !0);
                this.dW();
                if (this.options.YL)
                    b6(this).off("mousedown", this.Uz).on("mousedown", this.Uz);
                else
                    b6(this).off("click", this.Pr).on("click", this.Pr);
                this.options.Eq && 0 < $(this.options.Eq).length && this.trigger("advance", this)
            }
            .bind(this))
    };
    f.eB = function (a, b) {
        function c() {
            R5(e)
        }

        function d() {
            R5(e);
            e.eB(a, e.EL)
        }
        var e = this,
            g = 0 !== this.oG,
            h = 1E3 * a;
        this.EL = !!b;
        window.clearInterval(this.oG);
        this.oG = g ? window.setInterval(c, h + (Z5.BQ + (b ? 2 * Z5.WH : 0))) : window.setTimeout(d, h)
    };

    function R5(a) {
        function b() {
            d.$el.addClass("starFinderPulsate");
            return P.delay(Z5.BQ).then(function () {
                d.$el.removeClass("starFinderPulsate")
            })
        }

        function c() {
            c6(d, !1);
            return P.delay(Z5.WH)
        }
        var d = a;
        a.EL ? (c6(d, !0),
            P.delay(Z5.WH).then(b).then(c)) : b()
    }
    f.toggle = function (a) {
        this.$el.toggleClass("starFinderStarInactive", !a);
        c6(this, a);
        this.options.Eq && 0 < $(this.options.Eq).length && this.trigger("advance", this)
    };

    function b6(a) {
        return $(a.options.he)
    }

    function c6(a, b) {
        a.$el.toggleClass("starFinderStarHidden", !b)
    }
    f.Pr = function () {
        this.trigger("advance", this)
    };
    f.Uz = function () {
        var a = this;
        b6(this).one("mouseup", function () {
            a.Pr()
        })
    };
    f.Bf = function () {
        function a(a) {
            var d = b6(b).offset();
            a = new jQuery.Event(a);
            a.clientX = d.left;
            a.clientY = d.top;
            return a
        }
        var b = this;
        this.options.CK ? (b6(b).trigger(a("mousedown")).trigger(a("mouseup")),
            b.options.YL || b.Pr()) : b6(this).click()
    };
    f.kv = function () {
        P.delay(300).bind(this).then(this.dW)
    };
    f.template = _.template('\x3cdiv class\x3d"starFinderStar"\x3e\x3c%\x3d filled ? "\x26starf;" : "\x26star;" %\x3e\x3c/div\x3e');

    function d6() {}
    d6 = Backbone.View.extend({
        className: "teamBillingSignup"
    });
    f = d6.prototype;
    f.events = function () {
        return {
            "click .teamBillingCreditCardRevert": this.trigger.bind(this, "revert"),
            "click .teamBillingCreditCardSubmit": this.trigger.bind(this, "submit"),
            "click .teamBillingRetryButton": this.trigger.bind(this, "retry")
        }
    };
    f.initialize = function (a) {
        this.compact = a.compact;
        this.Qg = a.Qg;
        this.xA = a.xA;
        this.listenTo(this.xA, "selectPlan", this.trigger.bind(this, "selectPlan"));
        this.r5 = L5.c_(Hc(a.u));
        this.Zi = a.Zi;
        this.u = a.u;
        this.Yi = ad(a.u)
    };
    f.render = function () {
        var a = moment().add(this.Zi, "days").format("LL"),
            b;
        b = this.u;
        b.ek || (b.ek = new Ze(b.config));
        b = b.ek;
        this.$el.html(this.template({
            compact: this.compact,
            claimHtml: this.Yi.oH(this.Zi),
            createTrialPeriodPoint1Html: $e(b),
            createTrialPeriodPoint2Html: af(b, a),
            createTrialPeriodPoint3Html: bf(b),
            encryption: this.Yi.U_(),
            itemsTitle: this.Yi.W0(),
            revertCard: this.Yi.U5(),
            startTrial: this.Yi.Q6()
        }));
        this.compact || this.r5.render().$el.appendTo(this.$(".teamBillingPromoItems"));
        this.xA.render().$el.appendTo(this.$(".teamBillingPriceOptions"));
        this.Qg.render();
        this.$(".teamBillingCreditCardContainer").prepend(this.Qg.$el);
        return this
    };
    f.vO = function () {
        this.xA.vO()
    };
    f.ef = function (a) {
        this.$(".teamBillingCreditCardSubmit").removeClass("buttonSpinner");
        alert(a)
    };
    f.ow = function (a) {
        a = void 0 === a ? "" : a;
        this.$(".teamBillingTotalText").html(a)
    };

    function e6(a, b) {
        a = a.$(".teamBillingCreditCardRevert");
        b ? a.show() : a.hide()
    }
    f.dg = function (a) {
        this.$el.toggleClass("enabled", a)
    };
    f.template = _.template('\x3cdiv class\x3d"teamBillingOptionsContainer"\x3e\x3cdiv class\x3d"teamBillingOptions"\x3e\x3cdiv class\x3d"teamBillingInformation"\x3e\x3ch2\x3e\x3c%\x3d claimHtml %\x3e\x3c/h2\x3e\x3cul\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint1Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint2Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint3Html %\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"teamBillingPriceOptions"\x3e\x3c/div\x3e\x3cform class\x3d"teamBillingForm"\x3e\x3cdiv class\x3d"teamBillingCreditCardContainer"\x3e\x3cdiv class\x3d"teamBillingTotalText"\x3e\x3c/div\x3e\x3cbutton type\x3d"button" class\x3d"button buttonBlock teamBillingCreditCardSubmit"\x3e\x3cspan class\x3d"spinner"\x3e\x3c/span\x3e\x3c%- startTrial %\x3e\x3c/button\x3e\x3cbutton type\x3d"button" class\x3d"button buttonBlock buttonPlain teamBillingCreditCardRevert"\x3e\x3c%- revertCard %\x3e\x3c/button\x3e\x3c/div\x3e\x3c/form\x3e\x3c/div\x3e\x3cp class\x3d"teamBillingSecurityMessage"\x3e\x3c%- encryption %\x3e\x3c/p\x3e\x3c/div\x3e\x3c% if (!compact) { %\x3e\x3cdiv class\x3d"teamBillingPromoItems"\x3e\x3ch4\x3e\x3c%- itemsTitle %\x3e\x3c/h4\x3e\x3c/div\x3e\x3c% } %\x3e');
    f.S5 = _.template('\x3cp class\x3d"teamBillingRetry"\x3e\x3c%- billingError %\x3e\x3cbr/\x3e\x3cbutton type\x3d"button" class\x3d"button teamBillingRetryButton"\x3e\x3c%- tryAgain %\x3e\x3c/button\x3e\x3c/p\x3e');

    function f6(a) {
        this.H = a.H;
        this.ma = a.ma;
        this.ka = a.ka;
        this.Z = a.Z;
        this.Pz = null;
        this.AU = !1;
        this.ie = null;
        this.Ad = a.Ad;
        this.listenTo(this.Ad, {
            input: this.F2,
            requestSubmit: this.lv
        });
        this.Bo = a.Bo;
        this.Sv = null;
        this.qw = a.qw;
        this.sa = a.sa || null;
        this.u = a.u;
        this.view = a.view;
        this.listenTo(this.view, {
            selectPlan: this.B7,
            retry: this.P3,
            revert: this.R3,
            submit: this.lv
        })
    }
    f = f6.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;

    function Zaa(a) {
        var b = a.sv.slice(0).sort(function (a, b) {
                return aj(b) - aj(a)
            }),
            b = new M5({
                Ff: Vaa(b, Hc(a.u))
            });
        return new d6({
            compact: a.compact,
            Qg: a.Qg,
            xA: b,
            u: a.u,
            Zi: a.Zi || 0 < a.sv.length && Zi(a.sv[0]) || 30
        })
    }
    f.appendTo = function (a) {
        this.view.render();
        a.append(this.view.$el);
        this.view.vO();
        e6(this.view, !1);
        this.Ad.refresh()
    };
    f.remove = function () {
        this.stopListening();
        this.Ad.remove();
        this.view.remove()
    };
    f.dg = function (a) {
        this.view.dg(a)
    };

    function g6(a) {
        var b = a.Z.G();
        a.dg(!1);
        (function () {
            return a.sa ? P.resolve(a.sa) : a.ma.Ey(b).catch(wk, function () {
                return null
            })
        })().bind(a).then(function (a) {
            a && a.Gh && (this.ie = a.Gh,
                this.Ad.Xv(this.Bo).Fl(this.ie))
        }).catch(function () {
            var a = this.view;
            a.$el.html(a.S5({
                billingError: a.Yi.YY(),
                tryAgain: a.Yi.r7()
            }))
        }).finally(function () {
            this.dg(!0)
        })
    }

    function $aa(a) {
        var b = Ow(new Lw).Hg(a.Z.G());
        a.ka.zy(b).bind(a).then(function (a) {
            this.Pz = a.getCount();
            this.ow()
        }).catch(function () {
            this.AU = !0;
            this.ow()
        })
    }
    f.ow = function () {
        Da(null != this.Sv, "A plan must be selected");
        var a = ad(this.u);
        if (this.AU)
            a = this.view,
            a.$(".teamBillingTotalText").text(a.Yi.format("teamBillingSignupTotalPriceError"));
        else if (null !== this.Pz)
            if (1 === this.Pz)
                this.view.ow();
            else {
                var b = this.Sv.ur() * this.Pz;
                if ("YEARLY" === $i(this.Sv))
                    b = a.format("teamBillingSignupPerYear", b);
                else if ("MONTHLY" === $i(this.Sv))
                    b = a.format("teamBillingSignupPerMonth", b);
                else
                    throw Error("unrecognised billing interval");
                a = a.Ml(this.Pz, b);
                this.view.ow(a)
            }
    };
    f.F2 = function (a) {
        this.ie && e6(this.view, a)
    };
    f.P3 = function () {
        g6(this)
    };
    f.R3 = function () {
        this.ie && (this.Ad.Fl(this.ie),
            e6(this.view, !1))
    };
    f.lv = function () {
        this.dg(!1);
        this.view.$(".teamBillingCreditCardSubmit").toggleClass("buttonSpinner", !0);
        this.Ad.Ny().bind(this).then(function () {
            if (!this.qw) {
                var a = cj((new bj).Hg(this.Z.G()), this.Sv.G());
                return Pi(this.ma, a)
            }
        }).then(function (a) {
            this.trigger("signup", a)
        }).catch(nS, function (a) {
            this.H.track("upgrade_onboarding_card_error", {
                message: a.message
            });
            a = AS(Zc(this.u), a);
            this.view.ef(a)
        }).catch(function () {
            this.view.ef("An error occured while trying to subscribe")
        }).finally(function () {
            this.dg(!0)
        });
        this.H.track("upgrade_onboarding_card_submit")
    };
    f.B7 = function (a) {
        this.Sv = a;
        this.ow()
    };

    function h6() {}
    h6 = Backbone.View.extend({
        className: "promotion"
    });
    h6.prototype.initialize = function (a) {
        this.model = a.model
    };
    h6.prototype.events = function () {
        var a = this;
        return {
            "click .upgradeDialogFeaturePromo__button": function () {
                a.trigger("next")
            }
        }
    };
    h6.prototype.render = function () {
        var a = this.model;
        soy.asserts.assertType(a.Db instanceof soydata.SanitizedHtml || a.Db instanceof soydata.UnsanitizedText || goog.isString(a.Db), "headingHtml", a.Db, "soydata.SanitizedHtml");
        var b = a.Db;
        soy.asserts.assertType(goog.isString(a.Ae) || a.Ae instanceof goog.soy.data.SanitizedContent, "imageUrl", a.Ae, "string|goog.soy.data.SanitizedContent");
        var c = a.Ae;
        soy.asserts.assertType(goog.isString(a.kj) || a.kj instanceof goog.soy.data.SanitizedContent, "buttonLabel", a.kj, "string|goog.soy.data.SanitizedContent");
        var d = a.kj;
        soy.asserts.assertType(null == a.body || a.body instanceof goog.soy.data.SanitizedContent || goog.isString(a.body), "body", a.body, "null|string|undefined");
        var e = a.body;
        soy.asserts.assertType(null == a.ME || a.ME instanceof goog.soy.data.SanitizedContent || goog.isString(a.ME), "imageAlt", a.ME, "null|string|undefined");
        var g = a.ME;
        soy.asserts.assertType(null == a.ti || goog.isArray(a.ti), "benefitList", a.ti, "?Array\x3cstring\x3e|undefined");
        var h = a.ti,
            a = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"upgradeDialogFeaturePromo promoBody"\x3e\x3cdiv class\x3d"upgradeDialogFeaturePromo__content"\x3e\x3ch2 class\x3d"upgradeDialogFeaturePromo__heading"\x3e' + soy.$$escapeHtml(b) + "\x3c/h2\x3e" + (e ? '\x3cp class\x3d"upgradeDialogFeaturePromo__body"\x3e' + soy.$$escapeHtml(e) + "\x3c/p\x3e" : "") + (h ? aba(a) : "") + '\x3cdiv class\x3d"upgradeDialogFeaturePromo__footer"\x3e' + bZ({
                J: "upgradeDialogFeaturePromo__button",
                text: d
            }) + '\x3c/div\x3e\x3c/div\x3e\x3cimg class\x3d"upgradeDialogFeaturePromo__image" src\x3d' + soy.$$escapeHtmlAttributeNospace(soy.$$filterNormalizeMediaUri(c)) + " " + (g ? "alt\x3d" + soy.$$escapeHtmlAttributeNospace(g) : "") + " /\x3e\x3c/div\x3e").toString();
        this.$el.html(a);
        return this
    };

    function i6(a) {
        this.Is = a.Is;
        this.Mb = null;
        this.Zi = a.Zi || 0;
        this.yi = void 0 === a.yi || a.yi;
        this.Lq = void 0 === a.Lq || a.Lq;
        this.Je = void 0 === a.Je || a.Je;
        this.H = a.H;
        this.W_ = _.once(function () {
            g6(a.Is);
            $aa(a.Is)
        });
        this.Is.once("signup", this.X3.bind(this));
        this.Ka = a.Bx;
        this.rk = a.rk;
        this.dG = a.dG
    }
    var BQ = 0,
        iX = 1,
        to = 2,
        tZ = 3,
        dW = 4,
        ro = 8,
        rL = 9;

    function N_(a) {
        var b = JT({
                Zl: a.ma,
                Z: a.Z.G(),
                Kf: a.sb,
                Re: !0,
                ec: Zc(a.u)
            }),
            b = new f6({
                H: a.H,
                ma: a.ma,
                ka: a.ka,
                Z: a.Z,
                Ad: b.bc,
                Bo: a.Bo,
                qw: a.qw,
                u: a.u,
                view: Zaa({
                    compact: !0,
                    Qg: b.view,
                    u: a.u,
                    sv: a.sv,
                    Zi: a.Zi
                })
            }),
            c = a.Ta,
            d = a.ba.get(go),
            c = "en" === bx(c).qg();
        return new i6({
            dG: (new oo({
                gI: d && c
            })).gI ? "/?appcue\x3d-KXri-8b4SDLGhLkiLih" : "/brand/onboarding/upgrader",
            H: a.H,
            Lq: a.Lq,
            yi: a.yi,
            Bx: Hc(a.u),
            Je: a.Je,
            Zi: a.Zi,
            Is: b,
            rk: a.rk
        })
    }
    f = i6.prototype;
    f.listenTo = Backbone.Events.listenTo;
    f.listenToOnce = Backbone.Events.listenToOnce;
    f.on = Backbone.Events.on;
    f.once = Backbone.Events.once;
    f.off = Backbone.Events.off;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;
    f.remove = function () {
        this.Mb && this.Mb.remove()
    };
    f.show = function (a) {
        var b = this;
        if (this.rk) {
            a = new h6({
                model: bba(this, a || 7)
            });
            a.on("next", function () {
                var a = /\/design\//.test(location.pathname) ? Ul("editor") : Ul("homepage");
                b.H.Ga(a)
            });
            var c = new Backbone.View({
                className: "upgradeDialogSignup"
            });
            this.Mb = new Yx({
                $D: ["upgradeDialog"],
                yi: this.yi,
                Je: this.Je,
                ia: [a, c]
            });
            this.Mb.on("hide", function () {
                b.Mb.remove();
                b.Mb = null;
                b.Is.remove();
                b.trigger("hide")
            });
            this.W_();
            this.Mb.show();
            j6(this);
            this.Is.appendTo(c.$el);
            c.$el.append(cba({
                nF: this.Ka.format("canvaForWorkUpgradeQuoteMeganKelleyContent"),
                mF: this.Ka.format("canvaForWorkUpgradeQuoteMeganKelleyCite"),
                vD: this.Ka.format("canvaForWorkUpgradeQuoteDonnaMoritzContent"),
                uD: this.Ka.format("canvaForWorkUpgradeQuoteDonnaMoritzCite"),
                iH: this.Ka.format("canvaForWorkUpgradeQuoteTravisBernardContent"),
                hH: this.Ka.format("canvaForWorkUpgradeQuoteTravisBernardCite")
            }).toString())
        } else
            dba(this)
    };

    function dba(a) {
        var b = new k6({
            Ka: a.Ka
        });
        a.Mb = new Yx({
            $D: ["upgradeDialog"],
            yi: a.yi,
            Je: a.Je,
            ia: [b]
        });
        a.Mb.on("hide", function () {
            a.Mb.remove();
            a.Mb = null;
            a.trigger("hide")
        });
        a.Mb.show();
        j6(a)
    }
    f.X3 = function () {
        this.Lq && this.Mb && this.Mb.remove();
        this.trigger("signup")
    };

    function j6(a) {
        /\/design\//.test(location.pathname) ? a.H && a.H.Ga(Vl("editor", a.rk)) : a.H && a.H.Ga(Vl("homepage", a.rk))
    }

    function bba(a, b) {
        var c = a.Ka.format("canvaForWorkFeatureUpgradeButtonLabel");
        switch (b) {
            case 5:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeUnlimitedFoldersHeadingHtml"),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_folders.png",
                    ti: [Ae(a.Ka), ze(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            case to:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeResizeHeadingHtml"),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_resize.png",
                    ti: [Ae(a.Ka), ze(a.Ka), we(a.Ka), ye(a.Ka)]
                };
            case dW:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeTemplatesHeadingHtml"),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_templates.png",
                    ti: [Ae(a.Ka), ze(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            case tZ:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeTransparentBackgroundsHeadingHtml"),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_transparent_bg.png",
                    ti: [Ae(a.Ka), ze(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            case 6:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeCollaborateHeadingHtml"),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_teams.png",
                    ti: [Ae(a.Ka), ze(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            case ro:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeExclusiveMediaHeadingHtml"),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_exclusive_media.png",
                    ti: [Ae(a.Ka), ze(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            case rL:
                return {
                    kj: c,
                    Db: Ae(a.Ka),
                    body: ve(a.Ka),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_exclusive_media.png",
                    ti: [ze(a.Ka), we(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            case BQ:
            case iX:
            case 7:
                return {
                    kj: c,
                    Db: a.Ka.Ua("canvaForWorkFeatureUpgradeGeneralHeadingHtml"),
                    body: a.Ka.format("canvaForWorkFeatureUpgradeIncreaseProductivity"),
                    Ae: "https://static.canva.com/static/images/upgrade_dialog_feature_general.png",
                    ti: [Ae(a.Ka), ze(a.Ka), xe(a.Ka), ye(a.Ka)]
                };
            default:
                throw Error("Not a recognised feature: " + b);
        }
    };

    function k6(a) {
        Backbone.View.call(this, {
            className: "upgradeDialogMember"
        });
        this.Ka = a.Ka
    }
    t(k6, Backbone.View);
    k6.prototype.events = function () {
        return {
            "click .upgradeDialogMember__button": this.trigger.bind(this, "next")
        }
    };
    k6.prototype.render = function () {
        this.$el.html(eba({
            IB: soydata.VERY_UNSAFE.ordainSanitizedHtml(this.Ka.format("canvaForWorkUpgradeMemberTitleHtml")),
            Zu: this.Ka.Zu(),
            Gp: this.Ka.format("canvaForWorkUpgradeMemberOkButton")
        }).toString());
        return this
    };

    function eba(a) {
        soy.asserts.assertType(a.IB instanceof soydata.SanitizedHtml || a.IB instanceof soydata.UnsanitizedText || goog.isString(a.IB), "titleHtml", a.IB, "soydata.SanitizedHtml");
        var b = a.IB;
        soy.asserts.assertType(goog.isString(a.Zu) || a.Zu instanceof goog.soy.data.SanitizedContent, "memberLabel", a.Zu, "string|goog.soy.data.SanitizedContent");
        var c = a.Zu;
        soy.asserts.assertType(goog.isString(a.Gp) || a.Gp instanceof goog.soy.data.SanitizedContent, "okButton", a.Gp, "string|goog.soy.data.SanitizedContent");
        a = a.Gp;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3ch2\x3e" + soy.$$escapeHtml(b) + '\x3c/h2\x3e\x3cp class\x3d"upgradeDialogMember__label"\x3e' + soy.$$escapeHtml(c) + "\x3c/p\x3e" + bZ({
            J: "upgradeDialogMember__button",
            text: a
        }))
    }

    function aba(a) {
        a = goog.asserts.assertArray(a.ti, "expected parameter 'benefitList' of type list\x3cstring\x3e.");
        var b = "";
        if (0 < a.length) {
            for (var b = b + '\x3cul class\x3d"upgradeDialogFeaturePromo__benefitList"\x3e', c = a.length, d = 0; d < c; d++)
                var e = a[d],
                    b = b + ('\x3cli class\x3d"upgradeDialogFeaturePromoBenefit"\x3e' + uW({
                        Ma: "upgradeDialogFeaturePromoBenefit__icon"
                    }) + '\x3cspan class\x3d"upgradeDialogFeaturePromoBenefit__text"\x3e' + soy.$$escapeHtml(e) + "\x3c/span\x3e\x3c/li\x3e");
            b += "\x3c/ul\x3e"
        }
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)
    }

    function cba(a) {
        soy.asserts.assertType(goog.isString(a.nF) || a.nF instanceof goog.soy.data.SanitizedContent, "meganKelleyQuote", a.nF, "string|goog.soy.data.SanitizedContent");
        var b = a.nF;
        soy.asserts.assertType(goog.isString(a.mF) || a.mF instanceof goog.soy.data.SanitizedContent, "meganKelleyCite", a.mF, "string|goog.soy.data.SanitizedContent");
        var c = a.mF;
        soy.asserts.assertType(goog.isString(a.vD) || a.vD instanceof goog.soy.data.SanitizedContent, "donnaMoritzQuote", a.vD, "string|goog.soy.data.SanitizedContent");
        var d = a.vD;
        soy.asserts.assertType(goog.isString(a.uD) || a.uD instanceof goog.soy.data.SanitizedContent, "donnaMoritzCite", a.uD, "string|goog.soy.data.SanitizedContent");
        var e = a.uD;
        soy.asserts.assertType(goog.isString(a.iH) || a.iH instanceof goog.soy.data.SanitizedContent, "travisBernardQuote", a.iH, "string|goog.soy.data.SanitizedContent");
        var g = a.iH;
        soy.asserts.assertType(goog.isString(a.hH) || a.hH instanceof goog.soy.data.SanitizedContent, "travisBernardCite", a.hH, "string|goog.soy.data.SanitizedContent");
        a = a.hH;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"upgradeDialogQuotes"\x3e\x3cblockquote\x3e' + soy.$$escapeHtml(b) + "\x3ccite\x3e" + soy.$$escapeHtml(c) + "\x3c/cite\x3e\x3c/blockquote\x3e\x3cblockquote\x3e" + soy.$$escapeHtml(d) + "\x3ccite\x3e" + soy.$$escapeHtml(e) + "\x3c/cite\x3e\x3c/blockquote\x3e\x3cblockquote\x3e" + soy.$$escapeHtml(g) + "\x3ccite\x3e" + soy.$$escapeHtml(a) + "\x3c/cite\x3e\x3c/blockquote\x3e\x3c/div\x3e")
    };

    function fba() {}

    function pL(a) {
        return Object.freeze(R(fba, a))
    }

    function wM(a) {
        if (a.magic)
            return Object.freeze(R(l6, a.magic))
    }

    function l6() {}
    l6.prototype.$b = function () {
        return this.color
    };
    l6.prototype.Vd = function () {
        return this.thumbnail
    };

    function iV(a, b, c) {
        function d() {
            return b.map(function (b) {
                return iV(a, b, c)
            })
        }

        function e() {
            return Object.keys(b).reduce(function (a, d) {
                a[d] = iV(d, b[d], c);
                return a
            }, {})
        }
        return Array.isArray(b) ? d() : "object" === typeof b && null !== b ? e() : a && -1 < a.toLowerCase().indexOf("color") && "string" === typeof b ? c[b] || b : b
    };

    function tU(a, b) {
        (b = b.serialize()) && m6(a, b)
    }

    function m6(a, b) {
        _.each(a, function (a) {
            "object" === typeof a && null !== a && m6(a, b)
        });
        "mediaId" in a && "mediaVersion" in a && (a.origin = b)
    };

    function n6() {}
    n6 = Uo.extend({
        className: "createTeamDialog"
    });
    n6.prototype.events = function () {
        return _.extend(Uo.prototype.events.call(this), {
            "click .createTeamDialogCreate": this.trigger.bind(this, "createTeam")
        })
    };
    n6.prototype.initialize = function (a) {
        this.Od = a.Od;
        this.kQ = Object.freeze(R(Yi, this.Od.Od.paidYearly));
        this.ek = a.ek;
        Uo.prototype.initialize.call(this, {
            aa: Rk,
            cf: !0,
            Kq: !0,
            Je: !0
        })
    };
    n6.prototype.render = function () {
        Uo.prototype.render.call(this);
        var a = moment().add(Zi(this.kQ), "days").format("LL"),
            b = (aj(this.kQ) / 12).toFixed(2),
            c = Zi(this.kQ);
        this.$(".dialog").html(this.TI({
            createTeamWelcomeDescription: this.ek.h_(b),
            createTeamWelcomeTitleHtml: this.ek.i_(c),
            createTrialPeriodPoint1Html: $e(this.ek),
            createTrialPeriodPoint2Html: af(this.ek, a),
            createTrialPeriodPoint3Html: bf(this.ek),
            createYourTeam: this.ek.j_()
        }));
        return this
    };
    n6.prototype.TI = _.template('\x3cdiv class\x3d"createTeamContent"\x3e\x3ch2\x3e\x3c%\x3d createTeamWelcomeTitleHtml %\x3e\x3c/h2\x3e\x3cp\x3e\x3c%- createTeamWelcomeDescription %\x3e\x3c/p\x3e\x3cul\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint1Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%- createTrialPeriodPoint2Html %\x3e\x3c/li\x3e\x3cli\x3e\x3c%\x3d createTrialPeriodPoint3Html %\x3e\x3c/li\x3e\x3c/ul\x3e\x3c/div\x3e\x3cdiv class\x3d"createTeamActions"\x3e\x3cbutton class\x3d"button createTeamDialogCreate"\x3e\x3c%- createYourTeam %\x3e\x3c/button\x3e\x3c/div\x3e');

    function o6(a) {
        Ba(0 < a.size, "invalid avatar size {}", a.size);
        Backbone.View.call(this, {
            className: "avatar"
        });
        this.gj = a.gj || null;
        this.Fr = a.Fr || null;
        this.Yb = a.Yb || null;
        this.size = a.size;
        this.hp = !!a.hp;
        this.Qp = !!a.Qp;
        this.fo = !!a.fo;
        this.Do = !!a.Do
    }
    t(o6, Backbone.View);
    o6.prototype.render = function () {
        var a = this.gj && this.Fr,
            b = !!this.Fr;
        this.$el.css({
            width: this.size + "px",
            height: this.size + "px",
            lineHeight: this.size / 2 + "px"
        });
        this.gj && this.$el.css("backgroundImage", "url(" + this.gj + ")");
        a ? (this.$el.addClass("avatar--composite"),
            this.$el.css("fontSize", this.size / 4 + "px")) : b && (this.$el.addClass("avatar--brand"),
            this.$el.css("fontSize", this.size / 2 + "px"));
        this.Fr && this.$el.attr("data-letter", this.Fr);
        this.Yb && (this.$el.css("backgroundColor", this.Yb.Ca()),
            208 < this.Yb.ku() && this.$el.addClass("avatar--light"));
        this.$el.toggleClass("avatar--whiteBorder", this.fo);
        this.$el.toggleClass("avatar--darkBorder", this.Do);
        this.$el.toggleClass("avatar--glow", this.hp);
        this.$el.toggleClass("avatar--pointer", this.Qp);
        return this
    };

    function p6(a) {
        return (a.Tb() || "Brand").toUpperCase().trim().replace(/^THE\s+/, "").charAt(0)
    }

    function q6(a) {
        a = a.Qo();
        return fn(a ? "#" + a : "#b0b0b0")
    }

    function r6(a, b) {
        a = a.ju().sizes;
        Da(0 < a.size, "avatar bundle is empty");
        var c = b * (window.devicePixelRatio || 1);
        return _.chain([].concat(la(a.values()))).sortBy(function (a) {
            return Math.abs(a.cp() - c)
        }).sortBy(function (a) {
            return a.cp() < c
        }).first().value().Aa()
    }

    function M4(a) {
        var b = r6(a.user, a.size);
        a = new o6({
            gj: b,
            size: a.size,
            hp: a.hp,
            Qp: a.Qp,
            fo: a.fo,
            Do: a.Do
        });
        a.render();
        return a
    }

    function K4(a) {
        var b = p6(a.Z),
            c = q6(a.Z);
        a = new o6({
            Fr: b,
            Yb: c,
            size: a.size,
            hp: a.hp,
            Qp: a.Qp,
            fo: a.fo,
            Do: a.Do
        });
        a.render();
        return a
    };

    function s6(a) {
        this.KE = a.KE;
        this.ka = a.ka;
        this.gK = a.gK
    }
    s6.prototype.create = function (a) {
        return Qi(this.KE, "/teams", {
            displayName: a
        }).spread(function (a) {
            return Nv(a.brand)
        })
    };

    function t6(a) {
        Backbone.View.call(this, {
            className: "active brand"
        });
        this.Qd = a.Qd;
        var b;
        b = {
            Z: a.Z,
            user: a.user,
            size: 60,
            fo: !0
        };
        if (b.Z.Ph())
            b = M4(b);
        else {
            var c = r6(b.user, b.size),
                d = p6(b.Z),
                e = q6(b.Z);
            b = new o6({
                gj: c,
                Fr: d,
                Yb: e,
                size: b.size,
                hp: b.hp,
                Qp: b.Qp,
                fo: b.fo,
                Do: b.Do
            });
            b.render()
        }
        this.kI = b;
        this.Z = a.Z;
        this.user = a.user;
        this.NF = !!a.NF
    }
    t(t6, Backbone.View);
    t6.prototype.render = function () {
        var a = this.el,
            b;
        b = this.Z.Tb() || this.Qd.tA();
        var c = this.user.Tb(),
            d = "/" + this.user.rg(),
            e = this.Qd.C9(),
            g = this.Qd.U9(),
            h = this.NF;
        soy.asserts.assertType(null == d || d instanceof goog.soy.data.SanitizedContent || goog.isString(d), "profilePageUrl", d, "null|string|undefined");
        soy.asserts.assertType(null == c || c instanceof goog.soy.data.SanitizedContent || goog.isString(c), "displayName", c, "null|string|undefined");
        soy.asserts.assertType(null == b || b instanceof goog.soy.data.SanitizedContent || goog.isString(b), "brandName", b, "null|string|undefined");
        soy.asserts.assertType(goog.isString(e) || e instanceof goog.soy.data.SanitizedContent, "settings", e, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(g) || g instanceof goog.soy.data.SanitizedContent, "viewProfile", g, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(h) || 1 === h || 0 === h, "openInNewTab", h, "boolean");
        h = !!h;
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"activeUser"\x3e\x3cdiv class\x3d"userDisplayName"\x3e' + soy.$$escapeHtml(c) + '\x3c/div\x3e\x3cdiv class\x3d"teamDisplayName"\x3e' + soy.$$escapeHtml(b) + '\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"userMenuBrandActions"\x3e\x3ca href\x3d"/account"' + (h ? ' target\x3d"_blank"' : "") + "\x3e" + soy.$$escapeHtml(e) + "\x3c/a\x3e" + (d ? '\x3ca href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(d)) + '"' + (h ? ' target\x3d"_blank"' : "") + "\x3e" + soy.$$escapeHtml(g) + "\x3c/a\x3e" : "") + "\x3c/div\x3e");
        a.innerHTML = b;
        this.$el.children().first().append(this.kI.$el);
        return this
    };

    function u6() {}
    u6 = Backbone.View.extend({
        tagName: "li",
        className: "brand"
    });
    u6.prototype.initialize = function (a) {
        this.kI = a.Gq.Z.Ph() ? M4({
            user: a.user,
            size: 36
        }) : K4({
            Z: a.Gq.Z,
            size: 36
        });
        this.Gq = a.Gq;
        this.Qd = a.Qd
    };
    u6.prototype.render = function () {
        this.$el.html(this.template({
            personal: this.Gq.Z.Ph(),
            personalLabel: this.Qd.n9(),
            displayName: this.Gq.Z.Tb(),
            url: this.Gq.url
        }));
        this.$(".left").append(this.kI.$el);
        return this
    };
    u6.prototype.template = _.template('\x3ca href\x3d"\x3c%- url %\x3e"\x3e\x3cdiv class\x3d"left"\x3e\x3c/div\x3e\x3cdiv class\x3d"right"\x3e\x3c% if (personal) { %\x3e\x3c%- personalLabel %\x3e\x3c% } else { %\x3e\x3c%- displayName %\x3e\x3c% } %\x3e\x3c/div\x3e\x3c/a\x3e');

    function v6() {}
    v6 = Backbone.View.extend({
        className: "brandListWrapper"
    });
    v6.prototype.initialize = function (a) {
        this.$l = a.$l;
        this.user = a.user;
        this.Qd = a.Qd
    };
    v6.prototype.render = function () {
        var a = $('\x3cul class\x3d"brandList"\x3e');
        this.$el.html(a);
        this.$l.forEach(function (b) {
                (new u6({
                    Gq: b,
                    user: this.user,
                    Qd: this.Qd
                })).render().$el.appendTo(a)
            }
            .bind(this));
        return this
    };

    function w6() {}
    w6 = Backbone.View.extend({
        className: "actions",
        tagName: "ul"
    });
    w6.prototype.initialize = function (a) {
        this.Qd = a.Qd;
        this.mB = !!a.mB
    };
    w6.prototype.render = function () {
        this.$el.toggleClass("singleAction", !this.mB);
        this.$el.html(this.template({
            showUpgradeButton: this.mB,
            upgrade: this.Qd.oH(),
            signOut: this.Qd.signOut()
        }));
        return this
    };
    w6.prototype.events = function () {
        return {
            "click #upgrade": this.trigger.bind(this, "upgrade")
        }
    };
    w6.prototype.template = _.template('\x3c% if (showUpgradeButton) { %\x3e\x3ca class\x3d"button buttonSmall" id\x3d"upgrade"\x3e\x3c%- upgrade %\x3e\x3c/a\x3e\x3c% } %\x3e\x3ca class\x3d"button buttonLink" href\x3d"/logout"\x3e\x3c%- signOut %\x3e\x3c/a\x3e');

    function x6() {}
    x6 = dy.extend({
        className: "userMenuContainer"
    });
    x6.prototype.initialize = function (a) {
        this.Dh = a.Dh;
        this.user = a.user;
        this.Qd = a.Qd;
        this.OQ = a.OQ;
        this.BW = a.BW;
        this.IY = new t6({
            Qd: a.Qd,
            Z: this.OQ.Z,
            user: a.user,
            NF: a.NF
        });
        this.fR = null;
        var b = $("\x3cdiv\x3e\x3c/div\x3e");
        b.append(this.IY.render().$el);
        var c = new w6({
            Qd: a.Qd,
            mB: a.mB
        });
        this.listenTo(c, {
            remove: this.remove,
            upgrade: this.trigger.bind(this, "upgrade")
        });
        this.BW && (this.fR = $('\x3cspan class\x3d"brandListLoadingSpinner"\x3e'),
            b.append(this.fR));
        b.append(c.render().$el);
        dy.prototype.initialize.call(this, {
            content: b,
            position: ["leftTop", gp],
            Ef: a.Ef
        })
    };
    x6.prototype.show = function () {
        this.Dh.now();
        return dy.prototype.show.call(this)
    };

    function y6(a, b) {
        this.N4 = (this.cR = "PUBLIC" !== a) ? a : "*";
        this.c7 = b
    }
    y6.prototype.init = function (a) {
        window.addEventListener("message", function (b) {
            b = b.data;
            b.isCanvaApi && (a[b.type] || $.noop)(b)
        }, !1);
        this.sendMessage({
            type: "Init",
            authenticated: this.cR
        })
    };
    y6.prototype.sendMessage = function (a) {
        a.isCanvaApi = !0;
        this.c7.postMessage(a, this.N4)
    };

    function gba(a, b, c, d, e, g, h) {
        function k(a) {
            a.preventDefault();
            V ? (M.sendMessage({
                    type: "PublishRequested",
                    designId: ub.Fc(),
                    untouched: r()
                }),
                u()) : (bh(),
                p())
        }
        var l = window.CANVA_EMBED,
            m = Ib,
            n = Kb;

        function p() {
            var a = !1,
                b = new Uo({
                    aa: Rk,
                    Kq: !1,
                    content: $('\x3cdiv class\x3d"progress"\x3e\x3cspan class\x3d"progressValue autoIncrement"\x3e\x3cspan class\x3d"text"\x3e5%\x3c/span\x3e\x3cspan class\x3d"inner"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e'),
                    cf: !1,
                    Je: !1,
                    title: "Saving your design..."
                });
            !V && ub.Ji() && (b.show(),
                a = !0);
            Uy(2E4).then(function () {
                a && b.remove();
                M.sendMessage({
                    type: "Close",
                    designId: ub.Fc(),
                    untouched: r()
                })
            }, function () {
                var c = new Uo({
                    aa: Rk,
                    title: "Saving failed",
                    content: $('\x3cp\x3eSorry, but we had some trouble saving your design. You may still be in the middle of uploading some images, someone else might be editing your design at the moment, or our servers might be having issues. Please try again.\x3c/p\x3e\x3cp class\x3d"buttonContainer"\x3e\x3cbutton class\x3d"button done"\x3eOk\x3c/button\x3e\x3c/p\x3e')
                });
                a && b.remove();
                c.show()
            })
        }

        function r() {
            return 1 === ub.be() && G.isEmpty()
        }

        function u() {
            $(document.body).addClass("modalContentVisible modalContentBlurAndDarkenVisible")
        }

        function v() {
            $(document.body).removeClass("modalContentVisible modalContentBlurAndDarkenVisible")
        }

        function y(a) {
            var c = a.layout;
            return c ? b.pb(new Du({
                id: c,
                ip: !1
            })).then(function (a) {
                return a.Cc
            }, function () {
                return q(a)
            }) : q(a)
        }

        function q(a) {
            a = a.pages && a.pages[0];
            return gu(a ? a.width : 0, a ? a.height : 0, "PIXELS")
        }

        function x(a) {
            return new P(function (b) {
                var c = (Array.isArray(a) && a || []).map(Ja).map(Gm),
                    c = IK(Gb, c);
                lK(vb, c, !1, b)
            })
        }

        function E() {
            var k = new s6({
                KE: Hb,
                ka: Cb,
                gK: Ib.ba.get(Kf)
            });
            return r_(a, {
                config: a,
                zk: Lb,
                ja: Ib,
                H: T,
                document: G,
                getSession: function () {
                    return ub
                },
                Ta: C,
                yc: $b,
                hd: Ab,
                ma: zb,
                ka: Cb,
                nb: yb,
                Tg: b,
                Wa: c,
                rc: Fb,
                sc: d,
                Eb: e,
                Ze: vb,
                sb: N,
                u: Kb,
                aa: Rk,
                Od: g,
                d7: k,
                Fa: K,
                jc: Ka,
                vt: ra,
                Nn: new O4,
                ba: h,
                zd: null,
                Ic: null
            })
        }

        function B() {
            var a = {
                ia: _.range(1, G.wc() + 1),
                format: ca ? "PDF" : "PNG",
                Jr: 96
            };
            rZ({
                u: n,
                ja: Ib,
                H: T,
                Qb: ub,
                document: G,
                Ta: C,
                sc: d,
                hd: Ab,
                ma: zb,
                ka: Cb,
                rc: Fb,
                sb: N,
                Eb: e,
                Od: g,
                aa: Rk,
                Fa: K,
                jc: Ka,
                je: a,
                NT: !0,
                Dd: I_({
                    document: G,
                    Qb: ub
                }),
                ba: h,
                pt: {
                    UT: !1
                },
                zd: null,
                Ic: null,
                Wa: c
            }).start().then(function (a) {
                null != a && M.sendMessage({
                    type: "Published",
                    designId: ub.Fc(),
                    exportUrl: a,
                    untouched: r()
                })
            })
        }
        var K = null;
        try {
            K = jo()
        } catch (ma) {}
        var C = Yw(),
            N = BS(),
            Q = a.Ey(),
            M = new y6(l.embedDomain, window.parent),
            ca = !1,
            V = !0,
            ra = window.availableLocales || {};
        M.init({
            setDoneButtonText: function (a) {
                var b = $(".editorActionExport");
                0 !== b.length && b.text(a.text)
            },
            blur: u,
            close: p,
            focus: v,
            publish: function () {
                try {
                    B()
                } catch (a) {
                    v()
                }
            },
            loadDocumentFromJson: function (b) {
                var c;
                try {
                    c = JSON.parse(b.text)
                } catch (d) {
                    return
                }
                var g = "object" === typeof c && c || {},
                    k = Bo(),
                    l = new Fv(Hb);
                P.all([y(g), x(g.media)]).spread(function (c) {
                    var d = bx(C).JB();
                    (new bp({
                        Ho: k,
                        gd: Lb,
                        jc: Ka,
                        ka: l,
                        ja: m,
                        ba: h,
                        u: n,
                        H: T,
                        Ge: S,
                        Fa: K,
                        Bk: d,
                        Ht: ly,
                        Eb: e,
                        sb: N,
                        Ta: C,
                        sa: Q
                    })).go(g, c, a, null, E, null);
                    !0 === b.killInterface && (Qy = !0,
                        $("#objectPanel").css("display", "none"),
                        $("#editorControls").css("display", "none"),
                        $("#canvaDocument").css("left", "0"))
                })
            },
            setExportEnabled: function (a) {
                V = !!a.enabled
            },
            setMultipagePdf: function (a) {
                a.enabled ? ca = !0 : (BZ.v_(),
                    AT.u_())
            },
            setStaticTitle: function (a) {
                NN.t6(a.title)
            },
            upload: function (a) {
                AL.call($("#objectPanel .uploads a"), n);
                BK(new xK({
                    source: "third_party_editor",
                    da: jc(n),
                    KF: function (a) {
                        var d = G.Oa().D(),
                            e = G.Oa().F(),
                            g = b,
                            h = c,
                            k = g / h;
                        e < h && (h = e,
                            g *= k);
                        d < g && (g = d,
                            h *= k);
                        a = {
                            type: "image",
                            isBackground: !1,
                            isRecolorable: !1,
                            mediaId: a.G(),
                            mediaVersion: a.Va().getVersion(),
                            isCutout: !1,
                            width: g,
                            height: h
                        };
                        tg(a).Lk(G.Oa());
                        M.sendMessage({
                            type: "Upload",
                            status: "done"
                        })
                    },
                    progress: (new tK).io("third_party_editor")
                }), a.dataUri);
                var b = a.width,
                    c = a.height
            }
        });
        ub ? M.sendMessage({
            type: "Editor",
            designId: ub.Fc()
        }) : M.sendMessage({
            type: "Editor"
        });
        $(".homeLink").click(function (a) {
            a.preventDefault();
            p()
        });
        $("#editorLogo").click(function (a) {
            window.open("https://www.canva.com/about");
            a.preventDefault();
            a.stopPropagation();
            return !1
        });
        NN.UR();
        NN.w_();
        $("#documentMenuUpgrade").remove();
        var Ka = function () {
            return new RX({
                ka: Cb,
                u: n,
                wk: ["contextTipRoyaltyFreePaymentOption"],
                YC: function (a) {
                    return QX({
                        key: a,
                        u: kd(n),
                        We: $(document),
                        Le: $("body")
                    })
                },
                root: $("body")
            })
        }();
        s_.EXPORT = function () {
            var a = new Backbone.View({
                tagName: "button",
                className: "button editorActionExport",
                events: {
                    click: k
                }
            });
            a.$el.text("Publish");
            return a
        }
    };

    function hba(a) {
        soy.asserts.assertType(goog.isString(a.uH) || a.uH instanceof goog.soy.data.SanitizedContent, "videoId", a.uH, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca class\x3d"presentationLightbox__close" title\x3d"Close" alt\x3d"Close"\x3eClose\x3c/a\x3e\x3ciframe class\x3d"presentationLightbox__video" src\x3d"//www.youtube.com/embed/' + soy.$$escapeHtmlAttribute(a.uH) + '?rel\x3d0\x26autoplay\x3d1\x26modestbranding\x3d1\x26fs\x3d0\x26showinfo\x3d0" frameborder\x3d"0"\x3e\x3c/iframe\x3e')
    }

    function iba(a) {
        soy.asserts.assertType(goog.isString(a.wn) || a.wn instanceof goog.soy.data.SanitizedContent, "postUrl", a.wn, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca class\x3d"presentationLightbox__close" title\x3d"Close" alt\x3d"Close"\x3eClose\x3c/a\x3e\x3cdiv class\x3d"presentationLightbox__facebookPost presentationLightbox__social"\x3e\x3cdiv class\x3d"presentationLightbox__inner"\x3e\x3cdiv class\x3d"fb-post" data-href\x3d"' + soy.$$escapeHtmlAttribute(a.wn) + '"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e')
    }

    function jba(a) {
        var b;
        b = b || {};
        soy.asserts.assertType(goog.isString(a.wn) || a.wn instanceof goog.soy.data.SanitizedContent, "postUrl", a.wn, "string|goog.soy.data.SanitizedContent");
        var c = a.wn;
        soy.asserts.assertType(goog.isNumber(a.width), "width", a.width, "number");
        a = a.width;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca class\x3d"presentationLightbox__close" title\x3d"Close" alt\x3d"Close"\x3eClose\x3c/a\x3e\x3ciframe class\x3d"presentationLightbox__video" src\x3d"https://www.facebook.com/plugins/video.php?href\x3d' + soy.$$escapeUri(c) + "\x26show_text\x3d0\x26width\x3d" + soy.$$escapeUri(a) + '" style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + 'border:none;overflow:hidden" scrolling\x3d"yes" frameborder\x3d"0" allowTransparency\x3d"true"\x3e\x3c/iframe\x3e')
    };

    function z6(a, b) {
        b = void 0 === b ? $("body") : b;
        Backbone.View.call(this, {
            className: "presentationLightbox"
        });
        this.Ne = b;
        this.aa = a
    }
    t(z6, Backbone.View);
    f = z6.prototype;
    f.events = function () {
        return {
            "click .presentationLightbox__close": this.II
        }
    };
    f.show = function () {
        var a = this;
        this.trigger("show");
        this.Ne.addClass("modalContentVisible modalContentBlurAndDarkenVisible");
        this.CE = this.CE.bind(this);
        this.Ne.on("keyup", this.CE);
        this.$el.appendTo(this.Ne);
        this.aa.requestAnimationFrame(function () {
            $("\x3e .mask", a.Ne).addClass("on").on("click", function () {
                return a.II()
            });
            a.$el.addClass("playing")
        })
    };
    f.CE = function (a) {
        27 === a.which && (a.stopPropagation(),
            a.preventDefault(),
            this.Ne.off("keyup", this.CE),
            this.II())
    };
    f.II = function () {
        var a = this;
        this.trigger("close");
        var b = $("\x3e .mask", this.Ne);
        this.$el.addClass("disappearing");
        this.aa.setTimeout(function () {
            a.$el.remove()
        }, 500);
        this.Ne.removeClass("modalContentVisible modalContentBlurAndDarkenVisible");
        b.addClass("off");
        this.aa.setTimeout(function () {
            b.removeClass("on off white")
        }, 500);
        b.off("click")
    };
    f.cf = function () {
        this.$el.find(".presentationLightbox__close").addClass("presentationLightbox__close--fadeIn")
    };
    f.render = function (a, b) {
        var c = this,
            d, e = 500;
        switch (a) {
            case "video":
                this.el.innerHTML = hba({
                    uH: b
                });
                this.aa.setTimeout(function () {
                    return c.cf()
                }, e);
                break;
            case "facebookPost":
                this.el.innerHTML = iba({
                    wn: b
                });
                d = Date.now();
                FB.XFBML.parse(this.el, function () {
                    var a = c.$el.find(".presentationLightbox__social");
                    e = Math.max(d + 2E3 - Date.now(), 0);
                    c.aa.setTimeout(function () {
                        a.addClass("presentationLightbox__social--loaded");
                        c.cf()
                    }, e)
                });
                break;
            case "facebookVideo":
                a = parseInt(.7 * $(window).outerWidth(), 10);
                this.el.innerHTML = jba({
                    wn: b,
                    width: a
                });
                this.aa.setTimeout(function () {
                    return c.cf()
                }, e);
                break;
            case "tweet":
                this.el.innerHTML = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca class\x3d"presentationLightbox__close" title\x3d"Close" alt\x3d"Close"\x3eClose\x3c/a\x3e\x3cdiv class\x3d"presentationLightbox__tweet presentationLightbox__social"\x3e\x3cdiv class\x3d"presentationLightbox__inner"\x3e\x3c/div\x3e\x3c/div\x3e');
                var g = this.$el.find(".presentationLightbox__social");
                d = Date.now();
                twttr.ready(function (a) {
                    function b() {
                        e = Math.max(d + 2E3 - Date.now(), 0);
                        c.aa.setTimeout(function () {
                            g.addClass("presentationLightbox__social--loaded");
                            c.cf()
                        }, e);
                        a.events.unbind("rendered", b)
                    }
                    a.events.bind("rendered", b)
                });
                $.ajax({
                    url: "https://publish.twitter.com/oembed?url\x3d" + b + "\x26maxwidth\x3d500",
                    dataType: "jsonp",
                    success: function (a) {
                        a.html && g.find(".presentationLightbox__inner").html(a.html)
                    }
                })
        }
        return this
    };
    var kB = {
        et: /^#(video-)([a-z0-9-]+)$/,
        k8: /^(?:https?:\/\/)?support\.canva\.com\/.+/,
        KQ: /(?:https?:\/\/)?(?:www\.)?youtu(?:be\.com\/watch\?(?:.*?&)?v=|\.be\/)([\w\-]+)(?:&?[\w\?=]*)?/,
        sQ: /^(?:https?:\/\/)?www\.facebook\.com\/.+/,
        gY: /^(?:https?:\/\/)?www\.facebook\.com\/.+\/videos\/.+/,
        HQ: /^(?:https?:\/\/)?(?:www\.)?twitter\.com\/.+/,
        URL: /^(?:https?:\/\/|[\-0-9a-z]+\.)\S+$/i
    };

    function A6(a) {
        this.wS = this.sX = !1;
        this.fK = !!a;
        this.yu = this.yu.bind(this)
    }
    f = A6.prototype;
    f.toggle = function (a, b) {
        var c = this;
        b.filter(this.C0).forEach(function (b) {
            a ? (B6(c, b),
                b.O().on("mousedown", c.yu).on("touchstart", c.yu).on("mouseenter", c.kS).on("mouseleave", c.lS).attr("data-has-link", "true")) : B6(c, b)
        })
    };

    function B6(a, b) {
        b.O().off("mousedown", a.yu).off("touchstart", a.yu).off("mouseenter", a.kS).off("mouseleave", a.lS).attr("data-has-link", "")
    }
    f.C0 = function (a) {
        a = a.Fm();
        return kB.et.test(a) || kB.URL.test(a)
    };
    f.yu = function (a) {
        a.stopPropagation();
        a.preventDefault();
        a = $(a.currentTarget).data("canvaElement").Fm();
        if (kB.HQ.test(a) && !this.sX) {
            if (!window.twttr) {
                var b = document.createElement("script");
                b.innerHTML = 'window.twttr \x3d (function(d, s, id) {\n          var js, fjs \x3d d.getElementsByTagName(s)[0],\n            t \x3d window.twttr || {};\n          if (d.getElementById(id)) return t;\n          js \x3d d.createElement(s);\n          js.id \x3d id;\n          js.src \x3d "https://platform.twitter.com/widgets.js";\n          fjs.parentNode.insertBefore(js, fjs);\n         \n          t._e \x3d [];\n          t.ready \x3d function(f) {\n            t._e.push(f);\n          };\n         \n          return t;\n        }(document, "script", "twitter-wjs"));';
                document.body.appendChild(b)
            }
            this.sX = !0
        } else
            kB.sQ.test(a) && !this.wS && (window.FB || (0 === $("#fb-root").length && $("body").append($('\x3cdiv id\x3d"fb-root"\x3e\x3c/div\x3e')),
                    b = document.createElement("script"),
                    b.innerHTML = "(function(d, s, id) {\n        var js, fjs \x3d d.getElementsByTagName(s)[0];\n        if (d.getElementById(id)) return;\n        js \x3d d.createElement(s); js.id \x3d id;\n        js.src \x3d \"//connect.facebook.net/en_US/sdk.js#xfbml\x3d1\x26amp;version\x3dv2.5\";\n        fjs.parentNode.insertBefore(js, fjs);\n      }(document, 'script', 'facebook-jssdk'));",
                    document.body.appendChild(b)),
                this.wS = !0);
        switch (!0) {
            case kB.KQ.test(a):
            case kB.et.test(a):
                kba(this, a);
                break;
            case kB.gY.test(a) && this.fK:
                C6(this, "facebookVideo", a);
                break;
            case kB.sQ.test(a) && this.fK:
                C6(this, "facebookPost", a);
                break;
            case kB.HQ.test(a) && this.fK:
                C6(this, "tweet", a);
                break;
            default:
                this.trigger("open"),
                    window.open(a, "_blank")
        }
    };
    f.kS = function () {
        var a = $(this);
        if (!a.hasClass("linkHoverAnimation")) {
            var b = a.data("initialTransform");
            b || (b = a.css("transform"),
                a.data("initialTransform", b));
            a.addClass("linkHoverAnimation").css("transform", b + "scale(1.1)")
        }
    };
    f.lS = function () {
        var a = $(this),
            b = a.data("initialTransform");
        b && (a.css("transform", b),
            P.delay(300).then(function () {
                a.is(":hover") || (a.removeData("initialTransform"),
                    a.removeClass("linkHoverAnimation"))
            }))
    };

    function kba(a, b) {
        var c = {
            "video-tut2-tip1": "Yy9P90W987c",
            "video-tut2-tip2": "ALLmXFaYzbo",
            "video-tut2-tip3": "JziV33Lgq8c",
            "video-tut2-tip4": "XTTtTbVdjU0"
        };
        if ("#" === b.charAt(0)) {
            b = b.substring(1);
            if (!c.hasOwnProperty(b))
                return;
            c = c[b]
        } else
            c = b.match(kB.KQ)[1];
        b = new z6(Rk);
        b.render("video", c);
        b.on("show", function () {
            return a.trigger("open")
        });
        b.on("close", function () {
            return a.trigger("close")
        });
        b.show()
    }

    function C6(a, b, c) {
        var d = new z6(Rk);
        d.render(b, c);
        d.on("show", function () {
            return a.trigger("open")
        });
        d.on("close", function () {
            return a.trigger("close")
        });
        d.show()
    }
    f.listenTo = Backbone.Events.listenTo;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.stopListening = Backbone.Events.stopListening;
    f.trigger = Backbone.Events.trigger;

    function D6(a) {
        this.type = a
    }
    f = D6.prototype;
    f.vC = function () {
        throw Error("not implemented");
    };
    f.wC = function () {
        throw Error("not implemented");
    };
    f.tt = function () {
        throw Error("not implemented");
    };
    f.equals = function () {
        throw Error("not implemented");
    };
    f.matches = function (a) {
        return null != a && this.tt().equals(a.tt())
    };

    function E6(a, b, c) {
        Ba(0 <= a && 255 >= a && 0 == a % 1);
        Ba(0 <= b && 255 >= b && 0 == b % 1);
        Ba(0 <= c && 255 >= c && 0 == c % 1);
        this.type = 1;
        this.r = a;
        this.Tk = b;
        this.b = c
    }
    t(E6, D6);
    f = E6.prototype;
    f.vC = function () {
        var a = this.r,
            b = this.Tk,
            c = this.b,
            a = a / 255,
            b = b / 255,
            c = c / 255,
            d = Math.max(a, b, c),
            e = Math.min(a, b, c),
            g = (d + e) / 2;
        if (d == e)
            a = e = 0;
        else {
            var h = d - e,
                e = .5 < g ? h / (2 - d - e) : h / (d + e);
            switch (d) {
                case a:
                    a = (b - c) / h + (b < c ? 6 : 0);
                    break;
                case b:
                    a = (c - a) / h + 2;
                    break;
                case c:
                    a = (a - b) / h + 4;
                    break;
                default:
                    throw Error();
            }
            a /= 6
        }
        return new F6(360 * a, 100 * e, 100 * g)
    };
    f.wC = function () {
        var a = this.r,
            b = this.Tk,
            c = this.b,
            a = a / 255,
            b = b / 255,
            c = c / 255,
            d = Math.max(a, b, c),
            e = Math.min(a, b, c);
        if (d == e)
            a = e = 0;
        else {
            var g = d - e,
                e = g / d;
            switch (d) {
                case a:
                    a = (b - c) / g + (b < c ? 6 : 0);
                    break;
                case b:
                    a = (c - a) / g + 2;
                    break;
                case c:
                    a = (a - b) / g + 4;
                    break;
                default:
                    throw Error();
            }
            a /= 6
        }
        return new G6(360 * a, 100 * e, 100 * d)
    };
    f.tt = function () {
        return this
    };
    f.equals = function (a) {
        if (1 != a.type)
            return !1;
        a = a.tt();
        return this.r == a.r && this.Tk == a.Tk && this.b == a.b
    };
    f.toString = function () {
        return "rgb(" + this.r + ", " + this.Tk + ", " + this.b + ")"
    };
    f.Ca = function () {
        return "#" + (256 + this.r).toString(16).slice(-2) + (256 + this.Tk).toString(16).slice(-2) + (256 + this.b).toString(16).slice(-2)
    };

    function F6(a, b, c) {
        Ba(0 <= a && 360 > a, "invalid h: {}", a);
        Ba(0 <= b && 100 >= b, "invalid s: {}", b);
        Ba(0 <= c && 100 >= c, "invalid l: {}", c);
        this.type = 2;
        this.h = a;
        this.s = b;
        this.hl = c
    }
    t(F6, D6);
    f = F6.prototype;
    f.vC = function () {
        return this
    };
    f.wC = function () {
        var a = this.s,
            b = this.hl,
            a = a / 100,
            b = b / 100,
            c = a * (.5 > b ? b : 1 - b),
            d = b + c;
        return new G6(this.h, 100 * (0 < b ? 2 * c / d : a), 100 * d)
    };
    f.tt = function () {
        var a = this.h,
            b = this.s,
            c = this.hl,
            a = a / 360,
            b = b / 100,
            c = c / 100;
        if (0 == b)
            c = b = a = c;
        else
            var d = .5 > c ? c * (1 + b) : c + b - c * b,
                e = 2 * c - d,
                c = H6(e, d, a + 1 / 3),
                b = H6(e, d, a),
                a = H6(e, d, a - 1 / 3);
        return new E6(Math.round(255 * c), Math.round(255 * b), Math.round(255 * a))
    };
    f.equals = function (a) {
        if (2 != a.type)
            return !1;
        a = a.vC();
        return this.h == a.h && this.s == a.s && this.hl == a.hl
    };
    f.toString = function () {
        return "hsl(" + this.h.toFixed(3) + ", " + this.s.toFixed(3) + "%, " + this.hl.toFixed(3) + "%)"
    };

    function G6(a, b, c) {
        Ba(0 <= a && 360 > a, "invalid h: {}", a);
        Ba(0 <= b && 100 >= b, "invalid s: {}", b);
        Ba(0 <= c && 100 >= c, "invalid l: {}", c);
        this.type = 3;
        this.h = a;
        this.s = b;
        this.uq = c
    }
    t(G6, D6);
    f = G6.prototype;
    f.vC = function () {
        var a = this.s,
            b = this.uq,
            a = a / 100,
            b = b / 100,
            c = (2 - a) * b / 2;
        return new F6(this.h, 100 * (c && 1 > c ? a * b / (.5 > c ? 2 * c : 2 - 2 * c) : a), 100 * c)
    };
    f.wC = function () {
        return this
    };
    f.tt = function () {
        var a = this.h,
            b = this.s,
            c = this.uq,
            a = a / 60,
            b = b / 100,
            c = c / 100,
            d = Math.floor(a),
            e = a - d,
            a = c * (1 - b),
            g = c * (1 - e * b),
            b = c * (1 - (1 - e) * b),
            d = d % 6;
        return new E6(Math.round(255 * [c, g, a, a, b, c][d]), Math.round(255 * [b, c, c, g, a, a][d]), Math.round(255 * [a, a, b, c, c, g][d]))
    };
    f.equals = function (a) {
        if (3 != a.type)
            return !1;
        a = a.wC();
        return this.h == a.h && this.s == a.s && this.uq == a.uq
    };
    f.toString = function () {
        return "hsv(" + this.h.toFixed(3) + ", " + this.s.toFixed(3) + "%, " + this.uq.toFixed(3) + "%)"
    };
    new E6(0, 0, 0);
    new E6(255, 255, 255);
    var lba = /^hsl\((\d*(?:\.\d+)?),\s*(\d*(?:\.\d+)?)%,\s*(\d*(?:\.\d+)?)%\)$/,
        mba = /^hsv\((\d*(?:\.\d+)?),\s*(\d*(?:\.\d+)?)%,\s*(\d*(?:\.\d+)?)%\)$/,
        nba = /^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/,
        oba = /^#([a-f\d])([a-f\d])([a-f\d])$/i,
        pba = /^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;

    function H6(a, b, c) {
        0 > c && (c += 1);
        1 < c && --c;
        return c < 1 / 6 ? a + 6 * (b - a) * c : .5 > c ? b : c < 2 / 3 ? a + (b - a) * (2 / 3 - c) * 6 : a
    };
    var qba = [{
        family: "Aileron Thin",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-LightItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-LightItalic.otf"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Light.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Light.otf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-ThinItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-ThinItalic.otf"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Thin.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Thin.otf"
            }
        }
    }, {
        family: "Aileron Regular",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-BoldItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-BoldItalic.otf"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Bold.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Bold.otf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Italic.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Italic.otf"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Regular.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Regular.otf"
            }
        }
    }, {
        family: "Aileron Heavy",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-BlackItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-BlackItalic.otf"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Black.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Black.otf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-HeavyItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-HeavyItalic.otf"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Aileron-Heavy.ttf",
                ca: "https://static.canva.com/static/webfonts/Aileron-Heavy.otf"
            }
        }
    }, {
        family: "Aleo Light",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/Aleo-LightItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Aleo-LightItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Aleo-Light.ttf",
                j: "https://static.canva.com/static/webfonts/Aleo-Light.woff"
            }
        }
    }, {
        family: "Aleo",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Aleo-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Aleo-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Aleo-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Aleo-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Aleo-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Aleo-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Aleo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Aleo-Regular.woff"
            }
        }
    }, {
        family: "Allerta Stencil",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/AllertaStencil-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/AllertaStencil-Regular.woff"
            }
        }
    }, {
        family: "Antic",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Antic-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Antic-Regular.woff"
            }
        }
    }, {
        family: "Aqua",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/aqua.ttf",
                j: "https://static.canva.com/static/webfonts/aqua.woff"
            }
        }
    }, {
        family: "Arialle",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-Bold.woff"
            }
        }
    }, {
        family: "Archivo Narrow",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/ArchivoNarrow-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/ArchivoNarrow-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/ArchivoNarrow-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/ArchivoNarrow-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/ArchivoNarrow-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/ArchivoNarrow-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/ArchivoNarrow-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/ArchivoNarrow-Bold.woff"
            }
        }
    }, {
        family: "Archivo Black",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/ArchivoBlack.ttf",
                j: "https://static.canva.com/static/webfonts/ArchivoBlack.woff"
            }
        }
    }, {
        family: "Code",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CodeLight.ttf",
                j: "https://static.canva.com/static/webfonts/CodeLight.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/CodeBold.ttf",
                j: "https://static.canva.com/static/webfonts/CodeBold.woff"
            }
        }
    }, {
        family: "Carter One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CarterOne.ttf",
                j: "https://static.canva.com/static/webfonts/CarterOne.woff"
            }
        }
    }, {
        family: "Cooper Hewitt",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-Book.ttf",
                ca: "https://static.canva.com/static/webfonts/CooperHewitt-Book.otf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-BookItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/CooperHewitt-BookItalic.otf"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-BoldItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/CooperHewitt-BoldItalic.otf"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-Bold.ttf",
                ca: "https://static.canva.com/static/webfonts/CooperHewitt-Bold.otf"
            }
        }
    }, {
        family: "Cooper Hewitt Thin",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-Thin.ttf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-ThinItalic.ttf"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-LightItalic.ttf"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-Light.ttf"
            }
        }
    }, {
        family: "Cooper Hewitt Heavy",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-Heavy.ttf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/CooperHewitt-HeavyItalic.ttf"
            }
        }
    }, {
        family: "Fredoka One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/FredokaOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/FredokaOne-Regular.woff"
            }
        }
    }, {
        family: "Hammersmith One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/HammersmithOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/HammersmithOne.woff"
            }
        }
    }, {
        family: "Helveticish",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-Bold.woff"
            }
        }
    }, {
        family: "Josefin Sans",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSans-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSans.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSans-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSans-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSans-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSans-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSans-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSans-Bold.woff"
            }
        }
    }, {
        family: "Josefin Slab",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSlab-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSlab.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSlab-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSlab-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSlab-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSlab-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/JosefinSlab-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/JosefinSlab-Bold.woff"
            }
        }
    }, {
        family: "Lato",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Lato-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Regular.woff"
            }
        }
    }, {
        family: "Lato Hairline",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Lato-ThinItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-ThinItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Thin.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Thin.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Lato-HairlineItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-HairlineItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Hairline.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Hairline.woff"
            }
        }
    }, {
        family: "Lato Heavy",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Lato-BlackItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-BlackItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Black.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Black.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Lato-HeavyItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-HeavyItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Lato-Heavy.ttf",
                j: "https://static.canva.com/static/webfonts/Lato-Heavy.woff"
            }
        }
    }, {
        family: "League Gothic",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/LeagueGothic-Regular.ttf",
                ca: "https://static.canva.com/static/webfonts/LeagueGothic-Regular.otf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/LeagueGothic-Italic.ttf",
                ca: "https://static.canva.com/static/webfonts/LeagueGothic-Italic.otf"
            }
        }
    }, {
        family: "League Spartan",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/LeagueSpartan-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/LeagueSpartan-Bold.woff"
            }
        }
    }, {
        family: "Limelight",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Limelight-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Limelight.woff"
            }
        }
    }, {
        family: "Montserrat Hairline",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Montserrat-Hairline.ttf",
                j: "https://static.canva.com/static/webfonts/Montserrat-Hairline.woff"
            }
        }
    }, {
        family: "Montserrat Light",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Montserrat-Light.ttf",
                j: "https://static.canva.com/static/webfonts/Montserrat-Light.woff"
            }
        }
    }, {
        family: "Montserrat",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Montserrat-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Montserrat-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Montserrat-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Montserrat-Regular.woff"
            }
        }
    }, {
        family: "Oswald",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Oswald-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Oswald-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Oswald-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Oswald-Bold.woff"
            }
        }
    }, {
        family: "Peace Sans",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Peace-Sans.ttf",
                j: "https://static.canva.com/static/webfonts/Peace-Sans.woff"
            }
        }
    }, {
        family: "Pirou",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Pirou-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Pirou-Regular.woff"
            }
        }
    }, {
        family: "PT Sans",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/PT_Sans-Web-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/PTSans-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/PT_Sans-Web-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/PTSans-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/PT_Sans-Web-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/PTSans-Regular.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/PT_Sans-Web-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/PTSans-BoldItalic.woff"
            }
        }
    }, {
        family: "Quicksand",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Quicksand-Bold.ttf",
                ca: "https://static.canva.com/static/webfonts/Quicksand-Bold.otf"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Quicksand-BoldItalic.ttf",
                ca: "https://static.canva.com/static/webfonts/Quicksand-BoldItalic.otf"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Quicksand-Italic.ttf",
                ca: "https://static.canva.com/static/webfonts/Quicksand-Italic.otf"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Quicksand-Regular.ttf",
                ca: "https://static.canva.com/static/webfonts/Quicksand-Regular.otf"
            }
        }
    }, {
        family: "Noto Sans Devanagari",
        vP: "",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/NotoSansDevanagari-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/NotoSansDevanagari-Regular.woff"
            }
        }
    }, {
        family: "Nunito Light",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Nunito-Light.ttf",
                j: "https://static.canva.com/static/webfonts/Nunito-Light.woff"
            }
        }
    }, {
        family: "Nunito",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Nunito-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Nunito-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Nunito-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Nunito-Bold.woff"
            }
        }
    }, {
        family: "Norwester",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Norwester.ttf",
                j: "https://static.canva.com/static/webfonts/Norwester.woff"
            }
        }
    }, {
        family: "Raleway",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Raleway-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Raleway.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Raleway-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Raleway-Bold.woff"
            }
        }
    }, {
        family: "Raleway Thin",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Raleway-Thin.ttf",
                j: "https://static.canva.com/static/webfonts/Raleway-Thin.woff"
            }
        }
    }, {
        family: "Raleway Heavy",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Raleway-Heavy.ttf",
                j: "https://static.canva.com/static/webfonts/Raleway-Heavy.woff"
            }
        }
    }, {
        family: "Roboto Condensed",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/RobotoCondensed-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/RobotoCondensed-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/RobotoCondensed-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/RobotoCondensed-Bold.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/RobotoCondensed-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/RobotoCondensed-BoldItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/RobotoCondensed-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/RobotoCondensed-Regular.woff"
            }
        }
    }, {
        family: "Rosario",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Rosario-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Rosario-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Rosario-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Rosario-Bold.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Rosario-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Rosario-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Rosario-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Rosario-Italic.woff"
            }
        }
    }, {
        family: "Rubik One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/RubikOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Rubik-One.woff"
            }
        }
    }, {
        family: "Rubik Mono",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/RubikMonoOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Rubik-Mono-One.woff"
            }
        }
    }, {
        family: "Amaranth",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Amaranth-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Amaranth-BoldItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Amaranth-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Amaranth.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Amaranth-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Amaranth-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Amaranth-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Amaranth-Italic.woff"
            }
        }
    }, {
        family: "Anton",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Anton.ttf",
                j: "https://static.canva.com/static/webfonts/Anton.woff"
            }
        }
    }, {
        family: "Arimo",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Arimo-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Arimo-Bold.woff"
            }
        }
    }, {
        family: "Crushed",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Crushed.ttf",
                j: "https://static.canva.com/static/webfonts/Crushed-Regular.woff"
            }
        }
    }, {
        family: "Economica",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/Economica-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Economica-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Economica-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Economica-BoldItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Economica-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Economica-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Economica-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Economica-Bold.woff"
            }
        }
    }, {
        family: "Exo",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Exo-2-700-italic.ttf",
                j: "https://static.canva.com/static/webfonts/Exo2-BoldItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Exo-2-regular.ttf",
                j: "https://static.canva.com/static/webfonts/Exo2-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Exo-2-italic.ttf",
                j: "https://static.canva.com/static/webfonts/Exo2-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Exo-2-700.ttf",
                j: "https://static.canva.com/static/webfonts/Exo2-Bold.woff"
            }
        }
    }, {
        family: "Exo Thin",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Exo-2-100.ttf",
                j: "https://static.canva.com/static/webfonts/Exo2-Thin.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Exo-2-100-italic.ttf",
                j: "https://static.canva.com/static/webfonts/Exo2-ThinItalic.woff"
            }
        }
    }, {
        family: "Gruppo",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Gruppo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Gruppo.woff"
            }
        }
    }, {
        family: "Glacial Indifference",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/GlacialIndifference-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/GlacialIndifference-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/GlacialIndifference-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/GlacialIndifference-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/GlacialIndifference-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/GlacialIndifference-Bold.woff"
            }
        }
    }, {
        family: "Gidole",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Gidole-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Gidole-Regular.woff"
            }
        }
    }, {
        family: "Julius Sans One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/JuliusSansOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/JuliusSansOne-Regular.woff"
            }
        }
    }, {
        family: "Kite One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/KiteOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/KiteOne-Regular.woff"
            }
        }
    }, {
        family: "Kollektif",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Kollektif.ttf",
                j: "https://static.canva.com/static/webfonts/Kollektif.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Kollektif-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Kollektif-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Kollektif-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Kollektif-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Kollektif-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Kollektif-BoldItalic.woff"
            }
        }
    }, {
        family: "Lilita One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/LilitaOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/LilitaOne.woff"
            }
        }
    }, {
        family: "Open Sans Light",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-LightItalic.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-LightItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-Light.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-Light.woff"
            }
        }
    }, {
        family: "Open Sans",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans.woff"
            }
        }
    }, {
        family: "Open Sans Extra Bold",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-ExtraBoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-ExtraBoldItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/OpenSans-ExtraBold.ttf",
                j: "https://static.canva.com/static/webfonts/OpenSans-ExtraBold.woff"
            }
        }
    }, {
        family: "Racing Sans One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/RacingSansOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/RacingSansOne-Regular.woff"
            }
        }
    }, {
        family: "Roboto",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Roboto-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Roboto-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Roboto-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Roboto-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Roboto-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Roboto-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Roboto-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Roboto-Regular.woff"
            }
        }
    }, {
        family: "Ubuntu",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Ubuntu-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Ubuntu.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Ubuntu-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Ubuntu-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Ubuntu-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Ubuntu-Bold.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Ubuntu-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Ubuntu-BoldItalic.woff"
            }
        }
    }, {
        family: "Unity Display",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/UnityDisplay-Bold.ttf"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/UnityDisplay-Roman.ttf"
            }
        }
    }, {
        family: "Unity Text",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/UnityText-Bold.ttf"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/UnityText-Roman.ttf"
            }
        }
    }, {
        family: "Six Caps",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/SixCaps.ttf",
                j: "https://static.canva.com/static/webfonts/SixCaps.woff"
            }
        }
    }, {
        family: "Sifonn",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sifonn-Basic.ttf",
                j: "https://static.canva.com/static/webfonts/Sifonn-Basic.woff"
            }
        }
    }, {
        family: "Sifonn Outline",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sifonn-Basic-Outline.ttf",
                j: "https://static.canva.com/static/webfonts/Sifonn-Basic-Outline.woff"
            }
        }
    }, {
        family: "Signika",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Signika-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Signika-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Signika-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Signika-Regular.woff"
            }
        }
    }, {
        family: "Source Sans Pro",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/SourceSansPro-BoldIt.ttf",
                j: "https://static.canva.com/static/webfonts/SourceSansPro-BoldIt.otf.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/SourceSansPro-It.ttf",
                j: "https://static.canva.com/static/webfonts/SourceSansPro-It.otf.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/SourceSansPro-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/SourceSansPro-Regular.otf.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/SourceSansPro-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/SourceSansPro-Bold.otf.woff"
            }
        }
    }, {
        family: "Text Me One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/TextMeOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/TextMeOne-Regular.woff"
            }
        }
    }, {
        family: "Tenor Sans",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/TenorSans.ttf",
                j: "https://static.canva.com/static/webfonts/TenorSans.woff"
            }
        }
    }, {
        family: "Abril Fatface",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/AbrilFatface-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/AbrilFatface-Regular.woff"
            }
        }
    }, {
        family: "Alegreya SC",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/AlegreyaSC-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/AlegreyaSC-Regular.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/AlegreyaSC-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/AlegreyaSC-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/AlegreyaSC-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/AlegreyaSC-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/AlegreyaSC-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/AlegreyaSC-Italic.woff"
            }
        }
    }, {
        family: "Alfa Slab One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/AlfaSlabOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/AlfaSlabOne-Regular.woff"
            }
        }
    }, {
        family: "Alike",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Alike-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Alike-Regular.woff"
            }
        }
    }, {
        family: "Anonymous Pro",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/AnonymousPro-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/AnonymousPro-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/AnonymousPro-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/AnonymousPro.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/AnonymousPro-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/AnonymousPro-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/AnonymousPro-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/AnonymousPro-BoldItalic.woff"
            }
        }
    }, {
        family: "Arvo",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Arvo-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Arvo-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Arvo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Arvo.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Arvo-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Arvo-Italic.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Arvo-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Arvo-BoldItalic.woff"
            }
        }
    }, {
        family: "Bebas Neue",
        o: {
            bold: {
                i: "https://static.canva.com/static/truetypefonts/BebasNeueBold.ttf",
                j: "https://static.canva.com/static/webfonts/BebasNeueBold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/BebasNeueRegular.ttf",
                j: "https://static.canva.com/static/webfonts/BebasNeueRegular.woff"
            }
        }
    }, {
        family: "Bodoni FLF",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/BodoniFLF-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/BodoniFLF-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/BodoniFLF-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/BodoniFLF-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/BodoniFLF-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/BodoniFLF-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/BodoniFLF-Roman.ttf",
                j: "https://static.canva.com/static/webfonts/BodoniFLF-Roman.woff"
            }
        }
    }, {
        family: "Cinzel",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Cinzel-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Cinzel-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Cinzel-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Cinzel-Bold.woff"
            }
        }
    }, {
        family: "Droid Serif",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/DroidSerif.ttf",
                j: "https://static.canva.com/static/webfonts/DroidSerif.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/DroidSerif-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/DroidSerif-Bold.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/DroidSerif-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/DroidSerif-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/DroidSerif-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/DroidSerif-Italic.woff"
            }
        }
    }, {
        family: "Forum",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Forum-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Forum-Regular.woff"
            }
        }
    }, {
        family: "Granaina",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Granaina-Limpia.ttf",
                j: "https://static.canva.com/static/webfonts/Granaina-Limpia.woff"
            }
        }
    }, {
        family: "Glegoo",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Glegoo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Glegoo-Regular.woff"
            }
        }
    }, {
        family: "IM Fell English SC",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/IMFeENsc28P.ttf",
                j: "https://static.canva.com/static/webfonts/IM_FELL_English_SC.woff"
            }
        }
    }, {
        family: "IM Fell Double Pica",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/IMFeDPit28P.ttf",
                j: "https://static.canva.com/static/webfonts/IM-Fell-Double-Pica-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/IMFeDPrm28P.ttf",
                j: "https://static.canva.com/static/webfonts/IM-Fell-Double-Pica-Roman.woff"
            }
        }
    }, {
        family: "Libre Baskerville",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/LibreBaskerville-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/LibreBaskerville-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/LibreBaskerville-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/LibreBaskerville-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/LibreBaskerville-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/LibreBaskerville-Bold.woff"
            }
        }
    }, {
        family: "Lora",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/Lora-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Lora-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Lora-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Lora-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Lora-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Lora.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Lora-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Lora-BoldItalic.woff"
            }
        }
    }, {
        family: "Lustria",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Lustria-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Lustria-Regular.woff"
            }
        }
    }, {
        family: "Luthier",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Luthier-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Luthier-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Luthier-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Luthier-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Luthier-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Luthier-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Luthier-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Luthier-Regular.woff"
            }
        }
    }, {
        family: "Nixie One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/NixieOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/NixieOne-Regular.woff"
            }
        }
    }, {
        family: "Playfair Display",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplay-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplay-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplay-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplay-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplay-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplay-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplay-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplay-Italic.woff"
            }
        }
    }, {
        family: "Playfair Display Black",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplay-BlackItalic.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplay-BlackItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplay-Black.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplay-Black.woff"
            }
        }
    }, {
        family: "Playfair Display SC",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplaySC-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplaySC-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplaySC-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplaySC-Regular.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplaySC-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplaySC-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/PlayfairDisplaySC-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/PlayfairDisplaySC-Bold.woff"
            }
        }
    }, {
        family: "Prata",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Prata-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Prata-Regular.woff"
            }
        }
    }, {
        family: "PT Serif",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/PT_Serif-Web-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/PTSerif-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/PT_Serif-Web-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/PTSerif-Italic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/PT_Serif-Web-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/PTSerif-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/PT_Serif-Web-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/PTSerif-Regular.woff"
            }
        }
    }, {
        family: "Quando",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Quando-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Quando-Regular.woff"
            }
        }
    }, {
        family: "Quattrocento",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Quattrocento-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Quattrocento.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Quattrocento-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Quattrocento-Bold.woff"
            }
        }
    }, {
        family: "Sanchez",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/Sanchez-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Sanchez-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sanchez-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Sanchez-Regular.woff"
            }
        }
    }, {
        family: "Source Serif Pro",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/SourceSerifPro-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/SourceSerifPro-Regular.otf.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/SourceSerifPro-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/SourceSerifPro-Bold.otf.woff"
            }
        }
    }, {
        family: "Old Standard",
        o: {
            v: {
                i: "https://static.canva.com/static/truetypefonts/OldStandard-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/OldStandardTT-Italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/OldStandard-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/OldStandardTT-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/OldStandard-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/OldStandardTT-Bold.woff"
            }
        }
    }, {
        family: "Times Neue Roman",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/texgyretermes-bolditalic.ttf",
                j: "https://static.canva.com/static/webfonts/texgyretermes-bolditalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/texgyretermes-italic.ttf",
                j: "https://static.canva.com/static/webfonts/texgyretermes-italic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/texgyretermes-regular.ttf",
                j: "https://static.canva.com/static/webfonts/texgyretermes-regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/texgyretermes-bold.ttf",
                j: "https://static.canva.com/static/webfonts/texgyretermes-bold.woff"
            }
        }
    }, {
        family: "Trocchi",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Trocchi-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Trocchi.woff"
            }
        }
    }, {
        family: "Ultra",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Ultra.ttf",
                j: "https://static.canva.com/static/webfonts/Ultra.woff"
            }
        }
    }, {
        family: "Vidaloka",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Vidaloka-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Vidaloka-Regular.woff"
            }
        }
    }, {
        family: "Voga",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Voga-Medium.ttf",
                j: "https://static.canva.com/static/webfonts/Voga-Medium.woff"
            }
        }
    }, {
        family: "Vollkorn",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/Vollkorn-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Vollkorn-BoldItalic.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Vollkorn-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Vollkorn-Bold.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/Vollkorn-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Vollkorn-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Vollkorn-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Vollkorn-Italic.woff"
            }
        }
    }, {
        family: "Cantora One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CantoraOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/CantoraOne-Regular.woff"
            }
        }
    }, {
        family: "Coustard",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Coustard-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Coustard.woff"
            }
        }
    }, {
        family: "Emilys Candy",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/EmilysCandy-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/EmilysCandy-Regular.woff"
            }
        }
    }, {
        family: "Glass Antiqua",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/GlassAntiqua-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/GlassAntiqua-Regular.woff"
            }
        }
    }, {
        family: "Graduate",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Graduate-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Graduate-Regular.woff"
            }
        }
    }, {
        family: "Ribeye",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Ribeye-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Ribeye-Regular.woff"
            }
        }
    }, {
        family: "Vast Shadow",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/VastShadow-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/VastShadow-Regular.woff"
            }
        }
    }, {
        family: "Gochi Hand",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/GochiHand-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/GochiHand-Regular.woff"
            }
        }
    }, {
        family: "Over The Rainbow",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/OvertheRainbow.ttf",
                j: "https://static.canva.com/static/webfonts/OvertheRainbow.woff"
            }
        }
    }, {
        family: "Permanent Marker",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/PermanentMarker.ttf",
                j: "https://static.canva.com/static/webfonts/PermanentMarker.woff"
            }
        }
    }, {
        family: "Sacramento",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sacramento-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Sacramento-Regular.woff"
            }
        }
    }, {
        family: "Schoolbell",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Schoolbell.ttf",
                j: "https://static.canva.com/static/webfonts/Schoolbell.woff"
            }
        }
    }, {
        family: "Shadows Into Light Two",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/ShadowsIntoLight.ttf",
                j: "https://static.canva.com/static/webfonts/ShadowsIntoLightTwo-Regular.woff"
            }
        }
    }, {
        family: "Amatic SC",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/AmaticSC-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/AmaticSC-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/AmaticSC-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/AmaticSC-Bold.woff"
            }
        }
    }, {
        family: "Architects Daughter",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/ArchitectsDaughter.ttf",
                j: "https://static.canva.com/static/webfonts/ArchitectsDaughter.woff"
            }
        }
    }, {
        family: "Cabin Sketch",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CabinSketch-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/CabinSketch-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/CabinSketch-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/CabinSketch-Bold.woff"
            }
        }
    }, {
        family: "Coming Soon",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/ComingSoon.ttf",
                j: "https://static.canva.com/static/webfonts/ComingSoon.woff"
            }
        }
    }, {
        family: "Allura",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Allura-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Allura-Regular.woff"
            }
        }
    }, {
        family: "Clicker Script",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/ClickerScript-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/ClickerScript-Regular.woff"
            }
        }
    }, {
        family: "Courgette",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Courgette-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Courgette-Regular.woff"
            }
        }
    }, {
        family: "Dear Joe",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/DearJoe5.ttf",
                j: "https://static.canva.com/static/webfonts/DearJoe5.woff"
            }
        }
    }, {
        family: "Engagement",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Engagement-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Engagement-Regular.woff"
            }
        }
    }, {
        family: "Euphoria Script",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/EuphoriaScript-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/EuphoriaScript-Regular.woff"
            }
        }
    }, {
        family: "Great Vibes",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/GreatVibes-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/GreatVibes-Regular.woff"
            }
        }
    }, {
        family: "Kaushan Script",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/KaushanScript-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/KaushanScript-Regular.woff"
            }
        }
    }, {
        family: "Marta",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Marta-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Marta-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Marta-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Marta-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Marta-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Marta-Italic.woff"
            }
        }
    }, {
        family: "Merriweather",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Merriweather-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Merriweather.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/Merriweather-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/Merriweather-Bold.woff"
            },
            w: {
                i: "https://static.canva.com/static/truetypefonts/Merriweather-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/Merriweather-BoldItalic.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Merriweather-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Merriweather-Italic.woff"
            }
        }
    }, {
        family: "Mr Dafoe",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/MrDafoe-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/MrDafoe-Regular.woff"
            }
        }
    }, {
        family: "Niconne",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Niconne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Niconne-Regular.woff"
            }
        }
    }, {
        family: "Parisienne",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Parisienne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Parisienne-Regular.woff"
            }
        }
    }, {
        family: "Pinyon Script",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/PinyonScript-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/PinyonScript.woff"
            }
        }
    }, {
        family: "Dr Sugiyama",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/DrSugiyama-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/DrSugiyama-Regular.woff"
            }
        }
    }, {
        family: "Grand Hotel",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/GrandHotel-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/GrandHotel-Regular.woff"
            }
        }
    }, {
        family: "Knewave",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Knewave-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Knewave-Regular.woff"
            }
        }
    }, {
        family: "Pacifico",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Pacifico.ttf",
                j: "https://static.canva.com/static/webfonts/Pacifico-Regular.woff"
            }
        }
    }, {
        family: "Princess Sofia",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/PrincessSofia-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/PrincessSofia.woff"
            }
        }
    }, {
        family: "Satisfy",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Satisfy-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Satisfy.woff"
            }
        }
    }, {
        family: "Streamster",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Streamster.ttf",
                j: "https://static.canva.com/static/webfonts/Streamster.woff"
            }
        }
    }, {
        family: "Yellowtail",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Yellowtail-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Yellowtail.woff"
            }
        }
    }, {
        family: "Berkshire Swash",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/BerkshireSwash-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/BerkshireSwash-Regular.woff"
            }
        }
    }, {
        family: "Black Ops One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/BlackOpsOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/BlackOpsOne-Regular.woff"
            }
        }
    }, {
        family: "Chewy",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Chewy.ttf",
                j: "https://static.canva.com/static/webfonts/Chewy.woff"
            }
        }
    }, {
        family: "Creepster",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Creepster-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Creepster-Regular.woff"
            }
        }
    }, {
        family: "Diplomata SC",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/DiplomataSC-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/DiplomataSC-Regular.woff"
            }
        }
    }, {
        family: "Germania One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/GermaniaOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/GermaniaOne-Regular.woff"
            }
        }
    }, {
        family: "Megrim",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Megrim.ttf",
                j: "https://static.canva.com/static/webfonts/Megrim.woff"
            }
        }
    }, {
        family: "Rye",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Rye-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Rye-Regular.woff"
            }
        }
    }, {
        family: "UnifrakturMaguntia",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/UnifrakturMaguntia-Book.ttf",
                j: "https://static.canva.com/static/webfonts/UnifrakturMaguntia.woff"
            }
        }
    }, {
        family: "Codystar",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Codystar-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Codystar.woff"
            }
        }
    }, {
        family: "Crafty Girls",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/CraftyGirls.ttf",
                j: "https://static.canva.com/static/webfonts/CraftyGirls.woff"
            }
        }
    }, {
        family: "Hitchcut",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Hitchcut.ttf",
                j: "https://static.canva.com/static/webfonts/Hitchcut.woff"
            }
        }
    }, {
        family: "Lobster",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Lobster.ttf",
                j: "https://static.canva.com/static/webfonts/Lobster.woff"
            }
        }
    }, {
        family: "Lobster Two",
        o: {
            w: {
                i: "https://static.canva.com/static/truetypefonts/LobsterTwo-BoldItalic.ttf",
                j: "https://static.canva.com/static/webfonts/LobsterTwo-BoldItalic.woff"
            },
            l: {
                i: "https://static.canva.com/static/truetypefonts/LobsterTwo-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/LobsterTwo-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/LobsterTwo-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/LobsterTwo-Bold.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/LobsterTwo-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/LobsterTwo-Italic.woff"
            }
        }
    }, {
        family: "Oleo Script",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/OleoScript-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/OleoScript-Regular.woff"
            },
            bold: {
                i: "https://static.canva.com/static/truetypefonts/OleoScript-Bold.ttf",
                j: "https://static.canva.com/static/webfonts/OleoScript-Bold.woff"
            }
        }
    }, {
        family: "Londrina Shadow",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/LondrinaShadow-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/LondrinaShadow-Regular.woff"
            }
        }
    }, {
        family: "Londrina Sketch",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/LondrinaSketch-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/LondrinaSketch-Regular.woff"
            }
        }
    }, {
        family: "Oregano",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Oregano-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Oregano-Regular.woff"
            },
            v: {
                i: "https://static.canva.com/static/truetypefonts/Oregano-Italic.ttf",
                j: "https://static.canva.com/static/webfonts/Oregano-Italic.woff"
            }
        }
    }, {
        family: "Sniglet",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sniglet-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Sniglet.woff"
            }
        }
    }, {
        family: "Special Elite",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/SpecialElite.ttf",
                j: "https://static.canva.com/static/webfonts/SpecialElite-Regular.woff"
            }
        }
    }, {
        family: "Sunday",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sunday.ttf",
                j: "https://static.canva.com/static/webfonts/Sunday.woff"
            }
        }
    }, {
        family: "Vampiro One",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/VampiroOne-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/VampiroOne-Regular.woff"
            }
        }
    }, {
        family: "VT323",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/VT323-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/VT323-Regular.woff"
            }
        }
    }, {
        family: "Waterlily",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Waterlily.ttf",
                j: "https://static.canva.com/static/webfonts/Waterlily.woff"
            }
        }
    }, {
        family: "Brusher",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Brusher-Regular.ttf",
                j: "https://static.canva.com/static/webfonts/Brusher-Regular.woff"
            }
        }
    }, {
        family: "Playlist Script",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Playlist-Script.ttf",
                j: "https://static.canva.com/static/webfonts/Playlist-Script.woff"
            }
        }
    }, {
        family: "Selima",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Selima.ttf",
                j: "https://static.canva.com/static/webfonts/Selima.woff"
            }
        }
    }, {
        family: "Sensei",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Sensei-Medium.ttf",
                j: "https://static.canva.com/static/webfonts/Sensei-Medium.woff"
            }
        }
    }, {
        family: "Edo",
        o: {
            l: {
                i: "https://static.canva.com/static/truetypefonts/Edo.ttf",
                j: "https://static.canva.com/static/webfonts/Edo.woff"
            }
        }
    }, {
        family: "M Plus Thin",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusThin/mplus-1p-thin.woff",
                i: "https://static.canva.com/static/fonts/MPlusThin/mplus-1p-thin.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/MPlusThin/mplus-1p-light.woff",
                i: "https://static.canva.com/static/fonts/MPlusThin/mplus-1p-light.ttf"
            }
        }
    }, {
        family: "M Plus Regular",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusRegular/mplus-1p-regular.woff",
                i: "https://static.canva.com/static/fonts/MPlusRegular/mplus-1p-regular.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/MPlusRegular/mplus-1p-medium.woff",
                i: "https://static.canva.com/static/fonts/MPlusRegular/mplus-1p-medium.ttf"
            }
        }
    }, {
        family: "M Plus Black",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusBlack/mplus-1p-bold.woff",
                i: "https://static.canva.com/static/fonts/MPlusBlack/mplus-1p-bold.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/MPlusBlack/mplus-1p-black.woff",
                i: "https://static.canva.com/static/fonts/MPlusBlack/mplus-1p-black.ttf"
            }
        }
    }, {
        family: "M Plus Heavy",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusHeavy/mplus-1p-heavy.woff",
                i: "https://static.canva.com/static/fonts/MPlusHeavy/mplus-1p-heavy.ttf"
            }
        }
    }, {
        family: "Noto Sans Thin",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/NotoSansThin/NotoSansJP-Thin.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansThin/NotoSansJP-Thin.otf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/NotoSansThin/NotoSansJP-Light.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansThin/NotoSansJP-Light.otf"
            }
        }
    }, {
        family: "Noto Sans Light",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/NotoSansLight/NotoSansJP-DemiLight.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansLight/NotoSansJP-DemiLight.otf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/NotoSansLight/NotoSansJP-Regular.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansLight/NotoSansJP-Regular.otf"
            }
        }
    }, {
        family: "Noto Sans Regular",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/NotoSansRegular/NotoSansJP-Medium.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansRegular/NotoSansJP-Medium.otf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/NotoSansRegular/NotoSansJP-Bold.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansRegular/NotoSansJP-Bold.otf"
            }
        }
    }, {
        family: "Noto Sans Black",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/NotoSansBlack/NotoSansJP-Black.woff",
                ca: "https://static.canva.com/static/fonts/NotoSansBlack/NotoSansJP-Black.otf"
            }
        }
    }, {
        family: "Kodomo Rounded Gothic Light",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/KodomoRoundedGothicLight/KodomoRounded-Light.woff",
                ca: "https://static.canva.com/static/fonts/KodomoRoundedGothicLight/KodomoRounded-Light.otf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/KodomoRoundedGothicLight/KodomoRounded.woff",
                ca: "https://static.canva.com/static/fonts/KodomoRoundedGothicLight/KodomoRounded.otf"
            }
        }
    }, {
        family: "Bokutachi Gothic Regular",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/BokutachiGothicRegular/BokutachinoGothic2Regular.woff",
                ca: "https://static.canva.com/static/fonts/BokutachiGothicRegular/Boku2-Regular.otf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/BokutachiGothicRegular/BokutachinoGothic2Bold.woff",
                ca: "https://static.canva.com/static/fonts/BokutachiGothicRegular/Boku2-Bold.otf"
            }
        }
    }, {
        family: "Yasashisa Gothic",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/YasashisaGothic/YasashisaGothic.woff",
                ca: "https://static.canva.com/static/fonts/YasashisaGothic/YasashisaGothic.otf"
            }
        }
    }, {
        family: "Logo Type Gothic",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/LogoTypeGothic/07LogoTypeGothic7.woff",
                i: "https://static.canva.com/static/fonts/LogoTypeGothic/07LogoTypeGothic7.ttf"
            }
        }
    }, {
        family: "Genjyuu Gothic Thin",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicThin/GenJyuuGothic-ExtraLight.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicThin/GenJyuuGothic-ExtraLight.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicThin/GenJyuuGothic-Light.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicThin/GenJyuuGothic-Light.ttf"
            }
        }
    }, {
        family: "Genjyuu Gothic Light",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicLight/GenJyuuGothic-Normal.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicLight/GenJyuuGothic-Normal.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicLight/GenJyuuGothic-Regular.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicLight/GenJyuuGothic-Regular.ttf"
            }
        }
    }, {
        family: "Genjyuu Gothic Black",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicBlack/GenJyuuGothic-Medium.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicBlack/GenJyuuGothic-Medium.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicBlack/GenJyuuGothic-Bold.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicBlack/GenJyuuGothic-Bold.ttf"
            }
        }
    }, {
        family: "Genjyuu Gothic Heavy",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/GenjyuuGothicHeavy/GenJyuuGothic-Heavy.woff",
                i: "https://static.canva.com/static/fonts/GenjyuuGothicHeavy/GenJyuuGothic-Heavy.ttf"
            }
        }
    }, {
        family: "M Plus Rounded Thin",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedThin/rounded-mplus-1p-thin.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedThin/rounded-mplus-1p-thin.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedThin/rounded-mplus-1p-light.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedThin/rounded-mplus-1p-light.ttf"
            }
        }
    }, {
        family: "M Plus Rounded Regular",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedRegular/rounded-mplus-1p-regular.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedRegular/rounded-mplus-1p-regular.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedRegular/rounded-mplus-1p-medium.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedRegular/rounded-mplus-1p-medium.ttf"
            }
        }
    }, {
        family: "M Plus Rounded Black",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedBlack/rounded-mplus-1p-bold.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedBlack/rounded-mplus-1p-bold.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedBlack/rounded-mplus-1p-black.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedBlack/rounded-mplus-1p-black.ttf"
            }
        }
    }, {
        family: "M Plus Rounded Heavy",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/MPlusRoundedHeavy/rounded-mplus-1p-heavy.woff",
                i: "https://static.canva.com/static/fonts/MPlusRoundedHeavy/rounded-mplus-1p-heavy.ttf"
            }
        }
    }, {
        family: "Ipaex Mincho",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/IpaexMincho/ipaexm.woff",
                i: "https://static.canva.com/static/fonts/IpaexMincho/Ipaexm.ttf"
            }
        }
    }, {
        family: "Aozora Mincho Regular",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/AozoraMinchoRegular/AozoraMinchoRegular.woff",
                i: "https://static.canva.com/static/fonts/AozoraMinchoRegular/AozoraMinchoRegular.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/AozoraMinchoRegular/AozoraMinchoMedium.woff",
                i: "https://static.canva.com/static/fonts/AozoraMinchoRegular/AozoraMinchoMedium.ttf"
            }
        }
    }, {
        family: "Aozora Mincho Heavy",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/AozoraMinchoHeavy/AozoraMincho-bold.woff",
                i: "https://static.canva.com/static/fonts/AozoraMinchoHeavy/AozoraMincho-bold.ttf"
            },
            bold: {
                j: "https://static.canva.com/static/fonts/AozoraMinchoHeavy/AozoraMinchoHeavy.woff",
                i: "https://static.canva.com/static/fonts/AozoraMinchoHeavy/AozoraMinchoHeavy.ttf"
            }
        }
    }, {
        family: "Kokoro Minchoutai",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/KokoroMinchoutai/Kokoro.woff",
                ca: "https://static.canva.com/static/fonts/KokoroMinchoutai/Kokoro.otf"
            }
        }
    }, {
        family: "Hannari Mincho",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/HannariMincho/HannariMincho.woff",
                ca: "https://static.canva.com/static/fonts/HannariMincho/Hannari.otf"
            }
        }
    }, {
        family: "Yasashisa Antique",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/YasashisaAntique/07YasashisaAntique.woff",
                ca: "https://static.canva.com/static/fonts/YasashisaAntique/07YasashisaAntique.otf"
            }
        }
    }, {
        family: "Dejima Mincho",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/DejimaMincho/dejima-mincho-r227.woff",
                i: "https://static.canva.com/static/fonts/DejimaMincho/dejima-mincho-r227.ttf"
            }
        }
    }, {
        family: "Koku Maru Mincho",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/KokuMaruMincho/KokuMaruMinchoKana-Regular.woff",
                ca: "https://static.canva.com/static/fonts/KokuMaruMincho/KokuMaruMinchoKana-Regular.otf"
            }
        }
    }, {
        family: "Koku Mincho Regular",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/KokuMinchoRegular/font_1_kokumr_1.00_rls.woff",
                i: "https://static.canva.com/static/fonts/KokuMinchoRegular/font_1_kokumr_1.00_rls.ttf"
            }
        }
    }, {
        family: "Hanazono Mincho",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/HanazonoMincho/HanaMinA.woff",
                i: "https://static.canva.com/static/fonts/HanazonoMincho/HanaMinA.ttf"
            }
        }
    }, {
        family: "Checkpoint",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Checkpoint/CPFont.woff",
                ca: "https://static.canva.com/static/fonts/Checkpoint/CPFont.otf"
            }
        }
    }, {
        family: "Nicomoji Plus",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/NicomojiPlus/nicomoji-plus_1.11.woff",
                i: "https://static.canva.com/static/fonts/NicomojiPlus/nicomoji-plus_1.11.ttf"
            }
        }
    }, {
        family: "Light Novel Pop",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/LightNovelPop/LightNovelPop.woff",
                ca: "https://static.canva.com/static/fonts/LightNovelPop/LightNovelPop.otf"
            }
        }
    }, {
        family: "Uzura",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Uzura/uzura.woff",
                i: "https://static.canva.com/static/fonts/Uzura/uzura.ttf"
            }
        }
    }, {
        family: "Cinecaption",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Cinecaption/cinecaption227.woff",
                i: "https://static.canva.com/static/fonts/Cinecaption/cinecaption227.TTF"
            }
        }
    }, {
        family: "Jiyucho",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Jiyucho/Jiyucho.woff",
                ca: "https://static.canva.com/static/fonts/Jiyucho/Jiyucho.otf"
            }
        }
    }, {
        family: "Tanuki",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Tanuki/TanukiMagic.woff",
                i: "https://static.canva.com/static/fonts/Tanuki/TanukiMagic.ttf"
            }
        }
    }, {
        family: "Hanazome",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Hanazome/HanazomeFont.woff",
                i: "https://static.canva.com/static/fonts/Hanazome/HanazomeFont.ttf"
            }
        }
    }, {
        family: "Fuiji",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Fuiji/HuiFontP.woff",
                i: "https://static.canva.com/static/fonts/Fuiji/HuiFontP29.ttf"
            }
        }
    }, {
        family: "Nagayama Kai",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/NagayamaKai/nagayama_kai08.woff",
                ca: "https://static.canva.com/static/fonts/NagayamaKai/nagayama_kai08.otf"
            }
        }
    }, {
        family: "Kouzan",
        o: {
            l: {
                j: "https://static.canva.com/static/fonts/Kouzan/KouzanGyoushoOTF.woff",
                ca: "https://static.canva.com/static/fonts/Kouzan/KouzanBrushFontGyousyoOTF.otf"
            }
        }
    }];
    var L_ = "WARNING",
        K_ = "ERROR";

    function I6(a) {
        this.page = a.page;
        this.element = a.element;
        this.content = a.content;
        this.xy = a.xy
    }
    I6.prototype.ha = function () {
        return this.page
    };
    I6.prototype.getElement = function () {
        return this.element
    };
    I6.prototype.getContent = function () {
        return this.content
    };

    function rba(a) {
        var b, c, d, e;
        a.forEach(function (a) {
            null != a.page && (Ba(null == b),
                b = a.page);
            null != a.element && (Ba(null == c),
                c = a.element);
            null != a.content && (Ba(null == d),
                d = a.content);
            null != a.xy && (Ba(null == e),
                e = a.xy)
        });
        return new I6({
            page: b,
            element: c,
            content: d,
            xy: e
        })
    }

    function J6(a) {
        this.context = a.context;
        this.type = a.type;
        this.level = a.level
    }
    J6.prototype.getContext = function () {
        return this.context
    };
    J6.prototype.Ab = function () {
        return this.type
    };

    function K6(a, b) {
        this.context = [];
        this.Kv = [];
        this.media = b;
        this.W6 = a
    }

    function J_(a, b) {
        var c = new Set;
        qba.forEach(function (a) {
            return c.add(a.family)
        });
        b = new K6(c, b);
        sba(b, a);
        return b.Kv
    }

    function sba(a, b) {
        b.ia.forEach(function (b, d) {
            L6(a, new I6({
                page: d
            }), function () {
                tba(a, b)
            })
        })
    }

    function tba(a, b) {
        b.elements.forEach(function (b, d) {
            L6(a, new I6({
                element: d
            }), function () {
                switch (b.type) {
                    case "text":
                        M6(a, b);
                        break;
                    case "image":
                        N6(a, b);
                        a.check(0 === d || !b.Ac, "IS_BACKGROUND_REQUIRES_FIRST_ELEMENT", K_);
                        break;
                    case "svg":
                        uba(a, b);
                        break;
                    case "grid":
                        vba(a, b);
                        break;
                    case "graphic":
                        a.error("GRAPHIC_ELEMENT_NOT_HANDLED");
                        break;
                    case "shape":
                        break;
                    case "group":
                        break;
                    default:
                        a.error("UNKNOWN_ELEMENT_TYPE")
                }
            })
        })
    }

    function M6(a, b) {
        a.check(0 < b.Uu.length, "LINE_LENGTHS_REQUIRED", K_);
        if (b.color)
            try {
                var c = b.color;
                if ("#" === c.slice(0, 1)) {
                    var d;
                    if (d = oba.exec(c))
                        new E6(17 * parseInt(d[1], 16), 17 * parseInt(d[2], 16), 17 * parseInt(d[3], 16));
                    else if (d = pba.exec(c))
                        new E6(parseInt(d[1], 16), parseInt(d[2], 16), parseInt(d[3], 16));
                    else
                        throw Error("not a hexadecimal color: " + c);
                } else
                    switch (c.slice(0, 4)) {
                        case "hsl(":
                            var e = lba.exec(c);
                            Ba(!!e, "Invalid HSL color: {}", c);
                            new F6(+e[1], +e[2], +e[3]);
                            break;
                        case "hsv(":
                            var g = mba.exec(c);
                            Ba(!!g, "Invalid HSV color: {}", c);
                            new G6(+g[1], +g[2], +g[3]);
                            break;
                        case "rgb(":
                            var h = nba.exec(c);
                            Ba(!!h, "Invalid RGB color: {}", c);
                            new E6(+h[1], +h[2], +h[3]);
                            break;
                        default:
                            throw Error("cannot parse color: " + c);
                    }
            } catch (k) {
                a.error("COLOR_NOT_CONVERTIBLE_TO_RGB")
            }
        null != b.eu || null == b.fontFamily || a.W6.has(b.fontFamily) || a.error("FONT_NOT_SUPPORTED")
    }

    function N6(a, b) {
        !1 !== b.Hc && null != b.ua && null != b.va && O6(a, b.ua, b.va);
        a.check(!b.filter, "HAS_FILTER", L_)
    }

    function uba(a, b) {
        O6(a, b.ua, b.va);
        a.check(b.dk, "SVG_METADATA_REQUIRED", K_);
        b.wm.forEach(function (b) {
            L6(a, new I6({
                xy: b.index
            }), function () {
                a.check("inherit" !== b.color, "FILL_COLOR_INHERIT", K_)
            })
        });
        b.contents.forEach(function (b, d) {
            L6(a, new I6({
                content: d
            }), function () {
                switch (b.type) {
                    case "text":
                        a.check(null != b.top, "TOP_REQUIRED", K_);
                        a.check(null != b.left, "LEFT_REQUIRED", K_);
                        a.check(null != b.lineHeight, "LINE_HEIGHT_REQUIRED", K_);
                        M6(a, b);
                        break;
                    case "image":
                        N6(a, b)
                }
            })
        })
    }

    function vba(a, b) {
        b.contents.forEach(function (b, d) {
            L6(a, new I6({
                content: d
            }), function () {
                null != b.ua && null != b.va && O6(a, b.ua, b.va);
                a.check(!b.filter, "HAS_FILTER", L_)
            })
        })
    }

    function O6(a, b, c) {
        null != b && null != c && a.media.find(function (a) {
            return a.id === b && a.version === c
        }) || a.error("MEDIA_NOT_RESOLVED")
    }

    function L6(a, b, c) {
        a.context.push(b);
        c();
        a.context.pop()
    }
    K6.prototype.error = function (a) {
        P6(this, a, K_)
    };

    function P6(a, b, c) {
        a.Kv.push(new J6({
            context: rba(a.context),
            level: c,
            type: b
        }))
    }
    K6.prototype.check = function (a, b, c) {
        if (a)
            return !0;
        P6(this, b, c);
        return !1
    };
    $(function (a, b) {
        function c() {
            G && ub ? (ub.Yu(G.serialize()),
                setInterval(function () {
                    G && ub && it(ub, G.serialize()) && G.trigger("change")
                }, 3E5)) : setTimeout(c, 15E3)
        }

        function d() {
            var a = new O4,
                b = l.hg.get("branchToken", null),
                c = null;
            b && (c = new z5({
                bo: b
            }));
            b = new t5({
                user: bx(m),
                profiles: Cb,
                Fa: M
            });
            return r_(l, {
                config: l,
                zk: Lb,
                ja: Ib,
                H: T,
                document: G,
                getSession: function () {
                    return ub
                },
                Ta: m,
                yc: $b,
                ma: zb,
                hd: Ab,
                sb: ca,
                ka: Cb,
                nb: yb,
                Tg: Q,
                G9: Eb,
                rc: Fb,
                sc: K,
                Eb: C,
                Wa: N,
                Ze: vb,
                u: Kb,
                aa: Rk,
                Od: ra,
                d7: Ka,
                Fa: M,
                jc: V,
                vt: k,
                rk: q,
                Bo: x,
                Nn: a,
                ba: u,
                zd: c,
                Ic: b
            })
        }

        function e(a) {
            var b = a.font;
            return b && (a = Bz(Jb, b.family || "")) ? {
                fontFamily: a.family,
                fontSize: b.cp(),
                bold: b.bold,
                italic: b.v
            } : null
        }

        function g(a) {
            return function (b) {
                return b.getName() === a
            }
        }

        function h() {
            var a = G,
                b = xb.id,
                c, d;
            try {
                d = a.serialize()
            } catch (e) {
                B.log("Failed DocumentContent serialization", {
                    error: e
                });
                return
            }
            try {
                c = er(d)
            } catch (e) {
                T && Fl(b, !1, !1, "DESERIALIZATION_FAILED");
                B.log("Failed DocumentContentProto deserialization", {
                    error: e
                });
                return
            }
            try {
                var g = [],
                    h = window.mediaMap;
                Object.keys(h).forEach(function (a) {
                    Object.keys(h[a]).forEach(function (b) {
                        g.push({
                            id: a,
                            version: Number(b)
                        })
                    })
                });
                var k = J_(c, g),
                    l = k.some(function (a) {
                        return a.level === K_
                    }),
                    m = k.some(function (a) {
                        return a.level === L_
                    });
                l ? T && Fl(b, !1, m, "DOCUMENT_CHECK_FAILED") : T && Fl(b, !0, m)
            } catch (e) {
                T && Fl(b, !1, !1, "UNKNOWN_EXCEPTION_THROWN"),
                    B.log("Failed document check", {
                        error: e
                    })
            }
        }
        var k = window.availableLocales || {},
            l = new dh(b || window.viewConfig),
            m = Yw(),
            n = bx(m).JB(),
            p = ax(m).Ro(),
            r = l.Ey();
        $("body").toggleClass("highDpi", J.uQ);
        if (!window.cmsg)
            throw Error("window['cmsg'] isn't defined");
        Kb = new ic;
        var u = new zf(Ja(window.cflags));
        Ib = new Af(u);
        FM && $("html").addClass("touch");
        wba();
        xba();
        b = window.csrfTokens;
        var v = new lk(window.httpServiceConfig);
        Hb = v;
        var y = Yk(new Ek(v));
        a = new Tk("canva.editor.load", y.Dh, y, y.E4);
        a.Ga("init-start");
        qg = new iH({
            config: new uH,
            fa: Hb,
            rU: new dH
        });
        qg.init().then(function () {
            $("#objectPanel .content .buttonFacebook").prop("disabled", !1)
        });
        T = Rl();
        var q = !(!window.paymentAccountConfig || !window.paymentAccountConfig.canUpgrade),
            x = !(!window.paymentAccountConfig || !window.paymentAccountConfig.canEditCreditCard),
            E = io({
                ba: u,
                Bk: n
            });
        Lb = new po({
            H: T,
            ja: Ib,
            Fa: xo(n),
            mg: E,
            eJ: function () {
                var a = O_(ra),
                    b = ax(m).wa();
                return N_({
                    ma: zb,
                    ka: Cb,
                    H: T,
                    Z: b,
                    sv: a,
                    sb: ca,
                    qw: !1,
                    Zi: Zi(a[0]),
                    Lq: !1,
                    rk: q,
                    Bo: x,
                    u: Kb,
                    ba: u,
                    Ta: m,
                    ja: Ib
                })
            }
        });
        var B = ZC();
        yb = Vp(B);
        Ab = new rv(Hb);
        zb = new Fi(Hb);
        $b = new RI;
        Eb = new Tw(Hb);
        Fb = new ex;
        Bb = new zD(Hb);
        vb = new jK(window.mediaMap, Bb);
        wb = new jK(window.fontMediaMap, Bb);
        Gb = new HK(Hb, Bb, $b, vb, new QK, new FK(2), y, Pk);
        Cb = new Fv(Hb);
        var K = new ix(Hb),
            C = new sD(Hb),
            N = new Q6(Hb),
            Q = new At(v),
            M = null;
        try {
            M = jo()
        } catch (Nb) {}
        var ca = BS(),
            V = new RX({
                ka: Cb,
                u: Kb,
                wk: [RL, "contextTipRoyaltyFreePaymentOption"],
                YC: function (a) {
                    return QX({
                        key: a,
                        u: kd(Kb),
                        We: $(document),
                        Le: $("body")
                    })
                },
                root: $("body")
            }),
            ra = new Taa,
            Ka = new s6({
                KE: Hb,
                ka: Cb,
                gK: Ib.ba.get(Kf)
            });
        bc = window.localStorage ? new Mn(window.localStorage, bx(m).G()) : new Mn;
        Jb = new qI(oI, {
            pc: Bb,
            xH: window.WebFont,
            Ze: wb,
            aa: Rk,
            locale: window.cmsg.localePrecedence[0] || window.cmsg.fallback
        });
        Jb.on("fontLoadFailed", function (a) {
            a && T.track("font_load_failed", {
                fontName: a
            })
        });
        Jb.on("fontLoadStart", function (a) {
            a && T.track("font_load_start", {
                fontName: a
            })
        });
        Ib.ba.get(If) && vI();
        window.scrollTo(0, 0);
        var ma = function () {
                var a = ax(m).Ro();
                return (a = a && a.EB) && a[0] ? a[0].GB || [] : []
            }(),
            aa = {};
        HI(Jb, ma, function () {
            var a = yba(ma);
            Ib.ba.get(If) && 0 < a.length && (Jb.EN = a,
                aa = {
                    title: ma.filter(g("title")).map(e)[0],
                    subtitle: ma.filter(g("subtitle")).map(e)[0],
                    body: ma.filter(g("body")).map(e)[0]
                },
                Object.keys(aa).forEach(function (a) {
                    aa[a] || delete aa[a]
                }))
        });
        var Oa = window.csession,
            xb = window.cdoc,
            v = qq(window.cdocType);
        if (xb) {
            (new bp({
                Ho: Bo(),
                gd: Lb,
                mg: E,
                jc: V,
                ka: Cb,
                ja: Ib,
                ba: u,
                u: Kb,
                H: T,
                Ge: S,
                Fa: M,
                Bk: n,
                Ht: ly,
                Eb: C,
                sb: ca,
                Ta: m,
                sa: r
            })).go(xb, v, l, p, d, a);
            window.history.replaceState("", document.title, window.location.pathname + window.location.search);
            var Db = HN(Oa, xb, T);
            setTimeout(c, 15E3);
            var qc = xb.id,
                ie = Date.now(),
                n = window.CANVA_EMBED,
                yd = b.session;
            b = !!navigator.sendBeacon;
            p = new Vy({
                fa: Hb,
                WM: ie,
                xe: qc,
                La: Db,
                aK: n,
                uP: Gb,
                oI: b,
                UJ: yd
            });
            $(window).resize(Ly).on("beforeunload", p.mO.bind(p)).on("offline", zba).on("online", Aba);
            if (!n && b) {
                var ef = location.protocol + "//" + location.hostname + (location.port ? ":" + location.port : "");
                $(window).on("unload", function () {
                    var a = Math.floor((Date.now() - ie) / 1E3) + "",
                        a = JSON.stringify({
                            docId: qc,
                            session: Oa,
                            durationSecs: a,
                            syncMetrics: Db.aX.serialize(),
                            csrfToken: yd
                        });
                    navigator.sendBeacon(ef + "/session/editor/" + encodeURIComponent(qc) + "?close", a)
                })
            }
        }
        Ly();
        window.CANVA_EMBED && gba(l, Q, N, K, C, ra, u);
        cc = new Dn($("#canvaDocument"));
        cc.render();
        T && xb && vl(xb.id, xb.designType);
        if (T && .1 > Math.random())
            S.on("documentRendered", function () {
                h()
            });
        a.Ga("init-end")
    });

    function yba(a) {
        return a.sort(function (a) {
            for (var c = {}, d = 0; d < a.length; d++)
                c[a[d]] = d;
            return function (a, b) {
                a = a.getName();
                b = b.getName();
                return c[a] - c[b] || a.localeCompare(b)
            }
        }(["title", "subtitle", "body"])).map(function (a) {
            var c;
            a.font && (c = a.font.family);
            return Bz(Jb, c || "")
        }).filter(Boolean)
    }

    function xba() {
        $(document).on("mouseover", "a", function () {
            "#" == $(this).attr("href") && $(this).removeAttr("href")
        })
    }

    function Hy(a) {
        Mb || (Mb = new A6(Ib.ba.get(Uf)),
            Mb.on("open", function () {
                S.trigger("pausePresentationOnExit", !0)
            }),
            Mb.on("close", function () {
                S.trigger("pausePresentationOnExit", !1)
            }));
        Mb.toggle(a, G.xa())
    }

    function wba() {
        function a(a) {
            a.stopPropagation();
            a.preventDefault();
            b();
            $("#touchDevice").addClass("on");
            QM();
            T && Gl(T, "touch_device_notice")
        }

        function b() {
            document.removeEventListener("touchstart", a, !0);
            document.removeEventListener("mousedown", b)
        }
        FM && (document.addEventListener("touchstart", a, !0),
            document.addEventListener("mousedown", b))
    }
    var R6 = 0;

    function zba() {
        Tb && Z_();
        clearTimeout(R6);
        R6 = setTimeout(function () {
            TM("S6")
        }, 12E4)
    }

    function Aba() {
        if (Tb) {
            var a = Tb;
            a.AL = !1;
            xU(a, a.St)
        }
        clearTimeout(R6);
        ub.Ji() || SM()
    };
    $(document).on("wheel", ".disableAncestorScroll", function (a) {
        var b = a.originalEvent && a.originalEvent.deltaY,
            c = a.currentTarget,
            d = 0 > b && 0 === c.scrollTop,
            b = 0 < b && Math.ceil(c.scrollTop + c.getBoundingClientRect().height) === c.scrollHeight;
        (d || b) && a.preventDefault()
    });

    function Tx(a) {
        this.aa = a.aa;
        this.element = $(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"modalContent"\x3e\x3cdiv class\x3d"modalContentMask"\x3e\x3c/div\x3e\x3c/div\x3e').toString());
        this.element.addClass(S6(a.style));
        this.element.on("click", ".modalContentMask", function (a) {
                this.trigger("maskClick", a)
            }
            .bind(this));
        this.style = a.style;
        this.oC = ""
    }
    f = Tx.prototype;
    f.off = Backbone.Events.off;
    f.on = Backbone.Events.on;
    f.trigger = Backbone.Events.trigger;

    function S6(a) {
        switch (a) {
            case Ux:
                return "modalContentBlurAndDarken";
            case ey:
                return "modalContentDarken";
            case eW:
                return "modalContentClear";
            case RZ:
                return "modalContentNone";
            default:
                throw Error();
        }
    }
    f.hide = function () {
        $("body").removeClass(this.oC).attr("data-modal-levels", $("body").attr("data-modal-levels") - 1);
        "0" === $("body").attr("data-modal-levels") && $("body").css("margin-right", "");
        this.element.removeClass("modalContentOn");
        this.aa.setTimeout(function () {
                this.element.detach()
            }
            .bind(this), 300)
    };
    f.show = function (a) {
        this.element.children(":not(.modalContentMask)").remove();
        this.element.append(a).appendTo("body");
        Sk(function () {
                var a = this,
                    c = parseInt($("body").attr("data-modal-levels"), 10) || 0,
                    d = window.innerWidth - $(window).width();
                $("body").attr("data-modal-levels", c + 1);
                0 === c && $("body").css("margin-right", d);
                this.element.addClass("modalContentOn");
                ["modalContentVisible", S6(this.style) + "Visible"].forEach(function (c) {
                    $("body").hasClass(c) || (a.oC += c + " ")
                });
                $("body").addClass(this.oC)
            }
            .bind(this))
    };
    var Ux = "BLUR_AND_DARKEN",
        ey = "DARKEN",
        eW = "CLEAR",
        RZ = "NONE";

    function ZC() {
        return "undefined" !== typeof Rollbar ? new T6 : new U6
    }

    function T6() {}
    T6.prototype.log = function (a, b) {
        b = void 0 === b ? {} : b;
        Rollbar.log(a, b.error, b.data)
    };

    function U6() {}
    U6.prototype.log = function (a, b) {
        b = void 0 === b ? {} : b;
        var c = b.error;
        console[c instanceof Error ? "error" : "log"](a, c, b.data)
    };

    function wV(a) {
        soy.asserts.assertType(goog.isString(a.Hs) || a.Hs instanceof goog.soy.data.SanitizedContent, "showMoreInfo", a.Hs, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.Nf) || 1 === a.Nf || 0 === a.Nf, "unlistedPrice", a.Nf, "boolean");
        var b = !!a.Nf;
        soy.asserts.assertType(null == a.qf || goog.isBoolean(a.qf) || 1 === a.qf || 0 === a.qf, "crownTag", a.qf, "boolean|null|undefined");
        var c = a.qf;
        soy.asserts.assertType(null == a.Za || a.Za instanceof goog.soy.data.SanitizedContent || goog.isString(a.Za), "price", a.Za, "null|string|undefined");
        var d = a.Za;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml((d ? V6({
            nw: !0,
            Nf: b,
            qf: c,
            Za: d
        }) : "") + Bba(a))
    }

    function Bba(a) {
        soy.asserts.assertType(goog.isString(a.Hs) || a.Hs instanceof goog.soy.data.SanitizedContent, "showMoreInfo", a.Hs, "string|goog.soy.data.SanitizedContent");
        var b = a.Hs;
        soy.asserts.assertType(goog.isBoolean(a.Nf) || 1 === a.Nf || 0 === a.Nf, "unlistedPrice", a.Nf, "boolean");
        var c = !!a.Nf;
        soy.asserts.assertType(null == a.Za || a.Za instanceof goog.soy.data.SanitizedContent || goog.isString(a.Za), "price", a.Za, "null|string|undefined");
        a = a.Za;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d"searchResultItem__info info"\x3e' + (a ? V6({
            nw: !1,
            Nf: c,
            Za: a
        }) : "") + '\x3cspan class\x3d"moreInfo" title\x3d"' + soy.$$escapeHtmlAttribute(b) + '"\x3ei\x3c/span\x3e\x3c/span\x3e')
    }

    function V6(a) {
        soy.asserts.assertType(goog.isBoolean(a.Nf) || 1 === a.Nf || 0 === a.Nf, "unlistedPrice", a.Nf, "boolean");
        var b = !!a.Nf;
        soy.asserts.assertType(goog.isBoolean(a.nw) || 1 === a.nw || 0 === a.nw, "showFreeClass", a.nw, "boolean");
        var c = !!a.nw;
        soy.asserts.assertType(null == a.qf || goog.isBoolean(a.qf) || 1 === a.qf || 0 === a.qf, "crownTag", a.qf, "boolean|null|undefined");
        var d = a.qf;
        soy.asserts.assertType(goog.isString(a.Za) || a.Za instanceof goog.soy.data.SanitizedContent, "price", a.Za, "string|goog.soy.data.SanitizedContent");
        a = a.Za;
        c = c ? "price free" : "price";
        b = "" + (b ? '\x3cspan class\x3d"price poa"\x3e\x3cspan class\x3d"inner"\x3e' + soy.$$escapeHtml(a) + "\x3c/span\x3e\x3c/span\x3e" : d ? NX({
            label: a,
            Ma: c
        }) : '\x3cspan class\x3d"' + soy.$$escapeHtmlAttribute(c) + '"\x3e' + soy.$$escapeHtml(a) + "\x3c/span\x3e");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(b)
    }

    function NX(a) {
        soy.asserts.assertType(null == a.Ma || a.Ma instanceof goog.soy.data.SanitizedContent || goog.isString(a.Ma), "cssClass", a.Ma, "null|string|undefined");
        var b = a.Ma;
        soy.asserts.assertType(goog.isString(a.label) || a.label instanceof goog.soy.data.SanitizedContent, "label", a.label, "string|goog.soy.data.SanitizedContent");
        a = a.label;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"crownTag' + (b ? " " + soy.$$escapeHtmlAttribute(b) : "") + '"\x3e\x3cdiv class\x3d"crownTag__content"\x3e' + ap({
            Ma: "crownTag__icon",
            color: "#F3B600"
        }) + '\x3cspan class\x3d"crownTag__label"\x3e' + soy.$$escapeHtml(a) + "\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e")
    };

    function W6(a, b) {
        this.$el = a;
        this.className = b
    }
    t(W6, fc);

    function sy() {
        var a = $("body");
        return new W6(a, "enterFullscreen")
    }
    W6.prototype.Ko = function () {
        this.$el.addClass(this.className);
        var a = this.$el.get(0),
            b = a.webkitRequestFullScreen || a.mozRequestFullScreen || a.msRequestFullscreen || a.requestFullscreen;
        w(b, "browser doesn't implement Element::requestFullscreen");
        b.call(a)
    };
    W6.prototype.exitFullscreen = function () {
        this.$el.removeClass(this.className);
        var a = document.webkitExitFullscreen || document.mozCancelFullScreen || document.msExitFullscreen || document.exitFullscreen;
        w(a, "browser doesn't implement Document::exitFullscreen");
        a && a.call(document)
    };

    function oy() {
        return !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement)
    };

    function X6(a, b) {
        switch (b) {
            case "PENDING":
                return "PENDING";
            case "FAILED":
                return "FAILED";
            case "EXPORTED":
                return "EXPORTED";
            default:
                throw new TypeError('expected PrintExportStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Y6(a) {
        this.li = a.li;
        this.Ki = a.Ki
    }

    function Cba(a) {
        return new Y6({
            li: z("widthMicrons", a),
            Ki: z("heightMicrons", a)
        })
    }

    function Z6(a) {
        this.oB = a.oB;
        this.type = a.type;
        this.Mc = a.Mc;
        this.Si = a.Si;
        this.finish = a.finish;
        this.dM = a.dM;
        this.RR = a.RR
    }
    Z6.prototype.Ab = function () {
        return this.type
    };
    Z6.prototype.tr = function () {
        return this.Mc
    };
    Z6.prototype.uu = function () {
        return this.Si
    };

    function $6(a) {
        return new Z6({
            oB: D("sku", a),
            type: Ra(Dba, "type", a),
            Mc: Na(Cba, "paperSize", a),
            Si: Ra(Eba, "paperType", a),
            finish: Ra(Fba, "finish", a),
            dM: z("maxPages", a),
            RR: La("dimensionFlippable", a)
        })
    }

    function Fba(a, b) {
        switch (b) {
            case "GLOSS":
                return "GLOSS";
            case "SILK":
                return "SILK";
            case "UNCOATED":
                return "UNCOATED";
            default:
                throw new TypeError('expected PaperFinish for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Eba(a, b) {
        switch (b) {
            case "STANDARD":
                return "STANDARD";
            case "PREMIUM":
                return "PREMIUM";
            case "ECO_FRIENDLY":
                return "ECO_FRIENDLY";
            default:
                throw new TypeError('expected PaperType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Dba(a, b) {
        switch (b) {
            case "POSTER":
                return "POSTER";
            case "BUSINESS_CARD":
                return "BUSINESS_CARD";
            case "POSTCARD":
                return "POSTCARD";
            case "LETTERHEAD":
                return "LETTERHEAD";
            case "FLYER":
                return "FLYER";
            case "INVITATION":
                return "INVITATION";
            default:
                throw new TypeError('expected PrintProductType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function a7(a) {
        this.$c = a.$c;
        this.Up = a.Up;
        this.currency = a.currency
    }
    a7.prototype.vj = function () {
        return this.$c
    };

    function Gba(a) {
        return new a7({
            $c: Ra(b7, "shippingMethod", a),
            Up: z("priceCents", a),
            currency: D("currency", a)
        })
    }

    function Hba(a) {
        this.qF = a.qF;
        this.iF = a.iF;
        this.kH = a.kH;
        this.currency = a.currency
    }

    function Iba(a) {
        return new Hba({
            qF: z("minQuantity", a),
            iF: z("maxQuantity", a),
            kH: z("unitPriceCents", a),
            currency: D("currency", a)
        })
    }

    function c7(a) {
        this.product = a.product;
        this.Ff = a.Ff || []
    }
    c7.prototype.YS = function () {
        return this.Ff
    };

    function Jba(a) {
        return new c7({
            product: Na($6, "product", a),
            Ff: Qa(Iba, "prices", a)
        })
    }

    function T_(a) {
        this.id = a.id;
        this.version = a.version
    }
    T_.prototype.G = function () {
        return this.id
    };
    T_.prototype.getVersion = function () {
        return this.version
    };

    function Kba(a) {
        return {
            id: hb("id", a.id),
            version: db("version", a.version)
        }
    }

    function Lba(a) {
        return new T_({
            id: D("id", a),
            version: z("version", a)
        })
    }

    function d7(a) {
        this.DS = a.DS;
        this.url = a.url
    }
    d7.prototype.Aa = function () {
        return this.url
    };

    function Mba(a) {
        return new d7({
            DS: Ra(Nba, "fileRole", a),
            url: D("url", a)
        })
    }

    function Oba(a, b) {
        switch (b) {
            case "PROOF":
                return "PROOF";
            case "PRINT":
                return "PRINT";
            case "PREPRESS":
                return "PREPRESS";
            case "THUMBNAIL":
                return "THUMBNAIL";
            default:
                throw new TypeError('expected FileRole for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Nba(a, b) {
        switch (b) {
            case "PROOF":
                return "PROOF";
            case "PRINT":
                return "PRINT";
            case "PREPRESS":
                return "PREPRESS";
            case "THUMBNAIL":
                return "THUMBNAIL";
            default:
                throw new TypeError('expected FileRole for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function e7(a) {
        this.id = a.id;
        this.version = a.version;
        this.Z = a.Z;
        this.user = a.user;
        this.Vj = a.Vj;
        this.af = a.af;
        this.product = a.product;
        this.Oe = a.Oe;
        this.pf = a.pf;
        this.Up = a.Up;
        this.zA = a.zA;
        this.iB = a.iB;
        this.currency = a.currency;
        this.status = a.status;
        this.Yr = a.Yr;
        this.tV = a.tV;
        this.YD = a.YD;
        this.oV = a.oV;
        this.OA = a.OA;
        this.SR = a.SR;
        this.Bd = a.Bd;
        this.document = a.document;
        this.PO = a.PO;
        this.files = a.files || [];
        this.yf = a.yf;
        this.nV = a.nV;
        this.eW = a.eW;
        this.fW = a.fW;
        this.xm = a.xm
    }
    f = e7.prototype;
    f.G = function () {
        return this.id
    };
    f.getVersion = function () {
        return this.version
    };
    f.wa = function () {
        return this.Z
    };
    f.Qa = function () {
        return this.user
    };
    f.$o = function () {
        return this.af
    };
    f.Oh = function () {
        return this.status
    };
    f.wc = function () {
        return this.Bd
    };
    f.getDocument = function () {
        return this.document
    };
    f.Dc = function () {
        return this.files
    };

    function f7(a) {
        return new e7({
            id: D("id", a),
            version: z("version", a),
            Z: D("brand", a),
            user: D("user", a),
            Vj: D("region", a),
            af: D("productSku", a),
            product: Pa($6, "product", a),
            Oe: z("copies", a),
            pf: z("creationDate", a),
            Up: z("priceCents", a),
            zA: z("productPriceCents", a),
            iB: z("shippingPriceCents", a),
            currency: D("currency", a),
            status: Ra(Pba, "status", a),
            Yr: La("paid", a),
            tV: Ra(Qba, "paymentStatus", a),
            YD: Ra(X6, "exportStatus", a),
            oV: Sa(Rba, "partnerStatus", a),
            OA: Sa(Sba, "reviewStatus", a),
            SR: La("dimensionsFlipped", a),
            Bd: z("pageCount", a),
            document: Na(Lba, "document", a),
            PO: Pa(Tba, "shippingDetails", a),
            files: Qa(Mba, "files", a),
            yf: F("invoice", a),
            nV: F("partner", a),
            eW: F("reprintParent", a),
            fW: Sa(Uba, "reprintType", a),
            xm: La("finalized", a)
        })
    }

    function Pba(a, b) {
        switch (b) {
            case "CREATED":
                return "CREATED";
            case "PROCESSING":
                return "PROCESSING";
            case "FAILED":
                return "FAILED";
            case "SHIPPED":
                return "SHIPPED";
            case "CANCELLED":
                return "CANCELLED";
            default:
                throw new TypeError('expected PrintOrderStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Uba(a, b) {
        switch (b) {
            case "UNCHARGED":
                return "UNCHARGED";
            case "CHARGED":
                return "CHARGED";
            default:
                throw new TypeError('expected ReprintType for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Vba(a, b) {
        switch (b) {
            case "PENDING":
                return "PENDING";
            case "SUSPENDED":
                return "SUSPENDED";
            case "APPROVED":
                return "APPROVED";
            default:
                throw new TypeError('expected PrintReviewStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Sba(a, b) {
        switch (b) {
            case "PENDING":
                return "PENDING";
            case "SUSPENDED":
                return "SUSPENDED";
            case "APPROVED":
                return "APPROVED";
            default:
                throw new TypeError('expected PrintReviewStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Qba(a, b) {
        switch (b) {
            case "PENDING":
                return "PENDING";
            case "PAID":
                return "PAID";
            case "EXEMPT":
                return "EXEMPT";
            default:
                throw new TypeError('expected PrintPaymentStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function Rba(a, b) {
        switch (b) {
            case "RECEIVED":
                return "RECEIVED";
            case "ERRORS":
                return "ERRORS";
            case "IN_PRINTING":
                return "IN_PRINTING";
            case "IN_BINDERY":
                return "IN_BINDERY";
            case "PACKAGING":
                return "PACKAGING";
            case "SHIPPING":
                return "SHIPPING";
            case "SHIPPED":
                return "SHIPPED";
            case "HOLD":
                return "HOLD";
            case "CANCELLED":
                return "CANCELLED";
            default:
                throw new TypeError('expected PartnerStatus for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function g7(a) {
        this.Td = a.Td;
        this.$c = a.$c;
        this.pR = a.pR;
        this.oX = a.oX
    }
    g7.prototype.vj = function () {
        return this.$c
    };

    function Tba(a) {
        return new g7({
            Td: Pa(h7, "address", a),
            $c: Ra(b7, "shippingMethod", a),
            pR: F("carrier", a),
            oX: F("trackingNumber", a)
        })
    }

    function i7(a, b) {
        switch (b) {
            case "STANDARD":
                return "STANDARD";
            case "EXPRESS":
                return "EXPRESS";
            default:
                throw new TypeError('expected ShippingMethod for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function b7(a, b) {
        switch (b) {
            case "STANDARD":
                return "STANDARD";
            case "EXPRESS":
                return "EXPRESS";
            default:
                throw new TypeError('expected ShippingMethod for property "' + a + '", found: ' + JSON.stringify(b));
        }
    }

    function j7(a) {
        this.name = a.name;
        this.bk = a.bk;
        this.Xi = a.Xi;
        this.Sf = a.Sf;
        this.Ms = a.Ms;
        this.Sc = a.Sc;
        this.bj = a.bj;
        this.Rj = a.Rj
    }
    f = j7.prototype;
    f.getName = function () {
        return this.name
    };
    f.VK = function () {
        return this.bk
    };
    f.WK = function () {
        return this.Xi
    };
    f.lu = function () {
        return this.Sf
    };
    f.lr = function () {
        return this.Sc
    };
    f.YK = function () {
        return this.bj
    };
    f.UK = function () {
        return this.Rj
    };

    function k7(a) {
        return {
            name: hb("name", a.name),
            street1: hb("street1", a.bk),
            street2: ib("street2", a.Xi),
            city: hb("city", a.Sf),
            subdivision: ib("subdivision", a.Ms),
            countryCode: hb("countryCode", a.Sc),
            zipCode: hb("zipCode", a.bj),
            phone: hb("phone", a.Rj)
        }
    }

    function h7(a) {
        return new j7({
            name: D("name", a),
            bk: D("street1", a),
            Xi: F("street2", a),
            Sf: D("city", a),
            Ms: F("subdivision", a),
            Sc: D("countryCode", a),
            bj: D("zipCode", a),
            Rj: D("phone", a)
        })
    }

    function l7(a) {
        this.document = a.document;
        this.af = a.af;
        this.Oe = a.Oe;
        this.Bd = a.Bd;
        this.$c = a.$c;
        this.tc = a.tc;
        this.Vj = a.Vj;
        this.currency = a.currency
    }
    f = l7.prototype;
    f.getDocument = function () {
        return this.document
    };
    f.$o = function () {
        return this.af
    };
    f.wc = function () {
        return this.Bd
    };
    f.vj = function () {
        return this.$c
    };
    f.vu = function () {
        return this.tc
    };

    function Wba(a) {
        return {
            document: cb.required("document", Kba(a.document)),
            productSku: hb("productSku", a.af),
            copies: db("copies", a.Oe),
            pageCount: eb("pageCount", a.Bd),
            shippingMethod: lb(i7, "shippingMethod", a.$c),
            shippingAddress: jb(k7, "shippingAddress", a.tc),
            region: hb("region", a.Vj),
            currency: ib("currency", a.currency)
        }
    }

    function m7(a) {
        this.order = a.order
    }
    m7.prototype.Yo = function () {
        return this.order
    };

    function Xba(a) {
        return new m7({
            order: Na(f7, "order", a)
        })
    }

    function Yba(a) {
        return {
            bucket: hb("bucket", a.bucket),
            key: hb("key", a.key)
        }
    }

    function n7(a) {
        this.id = a.id;
        this.version = a.version;
        this.Yr = a.Yr;
        this.yf = a.yf;
        this.currency = a.currency;
        this.Zb = a.Zb;
        this.$c = a.$c;
        this.tc = a.tc;
        this.af = a.af;
        this.Oe = a.Oe;
        this.xm = a.xm;
        this.OA = a.OA;
        this.EV = a.EV;
        this.pV = a.pV
    }
    f = n7.prototype;
    f.G = function () {
        return this.id
    };
    f.getVersion = function () {
        return this.version
    };
    f.vj = function () {
        return this.$c
    };
    f.vu = function () {
        return this.tc
    };
    f.$o = function () {
        return this.af
    };

    function Zba(a) {
        return {
            id: hb("id", a.id),
            version: eb("version", a.version),
            paid: gb("paid", a.Yr),
            invoice: ib("invoice", a.yf),
            currency: ib("currency", a.currency),
            cancelled: gb("cancelled", a.Zb),
            shippingMethod: mb(i7, "shippingMethod", a.$c),
            shippingAddress: jb(k7, "shippingAddress", a.tc),
            productSku: ib("productSku", a.af),
            copies: eb("copies", a.Oe),
            finalized: gb("finalized", a.xm),
            reviewStatus: mb(Vba, "reviewStatus", a.OA),
            prepressFile: jb(Yba, "prepressFile", a.EV),
            partnerSubmit: gb("partnerSubmit", a.pV)
        }
    }

    function o7(a) {
        this.order = a.order
    }
    o7.prototype.Yo = function () {
        return this.order
    };

    function $ba(a) {
        return new o7({
            order: Na(f7, "order", a)
        })
    }

    function p7(a) {
        this.Hf = a.Hf;
        this.currency = a.currency;
        this.ig = a.ig
    }
    p7.prototype.oE = function () {
        return this.ig
    };

    function aca(a) {
        this.jb = a.jb || [];
        this.hc = a.hc || [];
        this.Vj = a.Vj
    }

    function bca(a) {
        return new aca({
            jb: Qa(Jba, "productPrices", a),
            hc: Qa(Gba, "shippingPrices", a),
            Vj: D("region", a)
        })
    }

    function q7(a) {
        this.id = a.id;
        this.HN = a.HN || [];
        this.tK = a.tK || []
    }
    q7.prototype.G = function () {
        return this.id
    };

    function r7(a) {
        this.order = a.order
    }
    r7.prototype.Yo = function () {
        return this.order
    };

    function cca(a) {
        return new r7({
            order: Na(f7, "order", a)
        })
    }

    function s7(a) {
        this.id = a.id;
        this.Z = a.Z;
        this.Td = a.Td
    }
    s7.prototype.G = function () {
        return this.id
    };
    s7.prototype.wa = function () {
        return this.Z
    };

    function u7(a) {
        return new s7({
            id: D("id", a),
            Z: D("brand", a),
            Td: Na(h7, "address", a)
        })
    }

    function v7(a) {
        this.Z = a.Z;
        this.user = a.user
    }
    v7.prototype.wa = function () {
        return this.Z
    };
    v7.prototype.Qa = function () {
        return this.user
    };

    function dca(a) {
        this.cI = a.cI || []
    }

    function eca(a) {
        return new dca({
            cI: Qa(u7, "addresses", a)
        })
    }

    function w7(a) {
        this.id = a.id;
        this.Z = a.Z;
        this.user = a.user;
        this.Td = a.Td
    }
    w7.prototype.G = function () {
        return this.id
    };
    w7.prototype.wa = function () {
        return this.Z
    };
    w7.prototype.Qa = function () {
        return this.user
    };

    function fca(a) {
        this.kW = a.kW;
        this.Td = a.Td
    }

    function gca(a) {
        return new fca({
            kW: Na(u7, "savedAddress", a),
            Td: Na(h7, "address", a)
        })
    }

    function x7(a) {
        this.order = a.order;
        this.Fn = a.Fn
    }
    x7.prototype.Yo = function () {
        return this.order
    };
    x7.prototype.Ii = function () {
        return this.Fn
    };

    function hca(a) {
        return {
            order: hb("order", a.order),
            role: lb(Oba, "role", a.Fn)
        }
    }

    function ica(a) {
        this.Dr = a.Dr
    }

    function jca(a) {
        return new ica({
            Dr: z("jobId", a)
        })
    }

    function y7(a) {
        this.order = a.order;
        this.Dr = a.Dr
    }
    y7.prototype.Yo = function () {
        return this.order
    };

    function z7(a) {
        this.status = a.status;
        this.url = a.url
    }
    z7.prototype.Oh = function () {
        return this.status
    };
    z7.prototype.Aa = function () {
        return this.url
    };

    function kca(a) {
        return new z7({
            status: Ra(X6, "status", a),
            url: F("url", a)
        })
    }

    function A7(a) {
        this.id = a.id;
        this.Fh = a.Fh || []
    }
    A7.prototype.G = function () {
        return this.id
    };

    function lca(a) {
        return new A7({
            id: D("id", a),
            Fh: Fa.$d("countries", a)
        })
    }

    function B7(a) {
        this.ig = a.ig
    }
    B7.prototype.oE = function () {
        return this.ig
    };

    function mca(a) {
        this.EA = a.EA || []
    }

    function nca(a) {
        return new mca({
            EA: Qa(lca, "regions", a)
        })
    };

    function C7(a) {
        var b = a.hc.find(function (b) {
            return b.$c === a.$c
        });
        w(b, "ShippingPrice not available for the ShippingMethod: {}", a.$c);
        var c = D7(a.FN.Ff, a.Oe);
        return {
            iB: b.Up,
            zA: c * a.Oe
        }
    }

    function D7(a, b) {
        a = a.find(function (a) {
            return a.qF <= b && b <= a.iF
        });
        w(a, "No QuantityPrice available for the specified copies '{}'", b);
        return a.kH
    };

    function Q6(a) {
        this.fa = a;
        this.path = "/print"
    }
    Q6.prototype.YS = function (a) {
        return Ii(this.fa, this.path + "/prices?" + ["productType\x3d" + a.Hf, null != a.ig ? "country\x3d" + encodeURIComponent(a.ig) : null, "currency\x3d" + encodeURIComponent(a.currency)].filter(function (a) {
            return !!a
        }).join("\x26")).catch(Ji).get(0).then(Ja).then(bca)
    };
    Q6.prototype.aD = function (a) {
        return Qi(this.fa, this.path + "/orders", Wba(a)).catch(Ji).get(0).then(Ja).then(Xba)
    };
    Q6.prototype.nH = function (a) {
        return Qi(this.fa, this.path + "/orders/" + a.id, Zba(a)).catch(Ji).get(0).then(Ja).then($ba)
    };
    Q6.prototype.Yo = function (a) {
        var b = this.path + "/orders/" + a.id,
            c = [];
        0 < a.HN.length && c.push("projection\x3d" + encodeURIComponent(a.HN.toString()));
        0 < a.tK.length && c.push("fileRoles\x3d" + encodeURIComponent(a.tK.toString()));
        a = 0 < c.length ? b + "?" + c.join("\x26") : b;
        return Ii(this.fa, a).catch(Ji).get(0).then(Ja).then(cca)
    };

    function oca(a, b) {
        var c = a.path + "/addresses";
        b = ["brand\x3d" + encodeURIComponent(b.Z), "user\x3d" + encodeURIComponent(b.user)].join("\x26");
        return Ii(a.fa, c + "?" + b).catch(Ji).get(0).then(Ja).then(eca)
    }

    function pca(a, b) {
        return Qi(a.fa, a.path + "/orders/" + b.order + "/fileimports", hca(b)).catch(Ji).get(0).then(Ja).then(jca)
    }

    function qca(a, b) {
        return Ii(a.fa, a.path + "/orders/" + b.order + "/fileimports/" + b.Dr).catch(Ji).get(0).then(Ja).then(kca)
    }

    function y3(a) {
        var b = new B7({
                ig: null
            }),
            b = [a.path + "/regions?", b.ig ? "country\x3d" + encodeURIComponent(b.ig) : ""].join("");
        return Ii(a.fa, b).catch(Ji).get(0).then(Ja).then(nca)
    };

    function E7(a, b) {
        b = b || {};
        soy.asserts.assertType(goog.isNumber(a.progress), "progress", a.progress, "number");
        var c = a.progress;
        soy.asserts.assertType(null == a.AA || a.AA instanceof goog.soy.data.SanitizedContent || goog.isString(a.AA), "progressSpeed", a.AA, "null|string|undefined");
        var d = a.AA;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        a = a.J;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"loadingBar' + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e\x3cspan class\x3d"loadingBar__value" data-progress\x3d"' + soy.$$escapeHtmlAttribute(c) + '"' + (d ? ' data-progress-speed\x3d"' + soy.$$escapeHtmlAttribute(d) + '"' : "") + ' style\x3d"' + (b.kc ? "/*" + b.kc + "*/" : "") + "transform: translateX(" + soy.$$escapeHtmlAttribute(soy.$$filterCssValue(100 * c)) + '%)"\x3e\x3c/span\x3e\x3c/div\x3e')
    };

    function F7(a) {
        this.$el = a;
        this.value = a.find(".loadingBar__value")
    }
    t(F7, fc);

    function G7(a) {
        var b = new F7(a);
        Sk(function () {
            b.Av()
        });
        return b
    }
    F7.prototype.remove = function () {
        H7(this);
        fc.prototype.remove.call(this)
    };
    F7.prototype.wW = function (a) {
        a = Math.max(Math.min(a, 1), 0);
        H7(this);
        this.value.css("transition", "none");
        this.qq(a);
        this.Av()
    };
    F7.prototype.qq = function (a) {
        this.value.attr("data-progress", a).css("transform", "translateX(" + 100 * a + "%)")
    };
    F7.prototype.Av = function () {
        var a = this;
        Sk(function () {
            a.value.css("transition", "");
            var b = parseFloat(a.value.attr("data-progress")),
                c = .33 * (.99 - Math.min(.99, parseFloat(a.value.attr("data-progress"))));
            a.qq(b + c);
            rca(a)
        })
    };

    function sca(a) {
        a = a.value.attr("data-progress-speed") || I7;
        switch (a) {
            case J7:
                return 5E3;
            case I7:
                return 3E3;
            case tca:
                return 1E3;
            default:
                throw Error("Expected LoadingBarView.ProgressSpeed, found " + a);
        }
    }

    function rca(a) {
        var b = window.setTimeout(function () {
            return a.Av()
        }, 1.1 * sca(a));
        a.value.attr("data-timeout-id", b)
    }

    function H7(a) {
        a = parseInt(a.value.attr("data-timeout-id"), 10);
        window.clearTimeout(a)
    }
    var J7 = "SLOW",
        I7 = "NORMAL",
        tca = "FAST";

    function K7(a) {
        var b;
        soy.asserts.assertType(a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "soydata.SanitizedHtml");
        var c = a.content;
        soy.asserts.assertType(goog.isString(a.heading) || a.heading instanceof goog.soy.data.SanitizedContent, "heading", a.heading, "string|goog.soy.data.SanitizedContent");
        var d = a.heading;
        soy.asserts.assertType(null == a.caption || a.caption instanceof goog.soy.data.SanitizedContent || goog.isString(a.caption), "caption", a.caption, "null|string|undefined");
        var e = a.caption;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csection class\x3d"settingsGroup ' + soy.$$escapeHtmlAttribute(null == (b = a.J) ? "" : b) + '"\x3e\x3ch2 class\x3d"settingsGroup__heading"\x3e' + soy.$$escapeHtml(d) + "\x3c/h2\x3e" + (e ? '\x3cdiv class\x3d"settingsGroup__caption"\x3e' + soy.$$escapeHtml(e) + "\x3c/div\x3e" : "") + '\x3cdiv class\x3d"settingsGroup__content"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e\x3c/section\x3e")
    }

    function L7(a) {
        soy.asserts.assertType(a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "soydata.SanitizedHtml");
        var b = a.content;
        soy.asserts.assertType(null == a.attributes || a.attributes instanceof soydata.SanitizedHtmlAttribute || a.attributes instanceof soydata.UnsanitizedText || goog.isString(a.attributes), "attributes", a.attributes, "?soydata.SanitizedHtmlAttribute|string|undefined");
        var c = a.attributes;
        soy.asserts.assertType(null == a.caption || a.caption instanceof goog.soy.data.SanitizedContent || a.caption instanceof soydata.SanitizedHtml || a.caption instanceof soydata.UnsanitizedText || goog.isString(a.caption), "caption", a.caption, "?soydata.SanitizedHtml|string|undefined");
        var d = a.caption;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var e = a.J;
        soy.asserts.assertType(null == a.fb || goog.isBoolean(a.fb) || 1 === a.fb || 0 === a.fb, "column", a.fb, "boolean|null|undefined");
        var g = a.fb;
        soy.asserts.assertType(null == a.error || a.error instanceof goog.soy.data.SanitizedContent || a.error instanceof soydata.SanitizedHtml || a.error instanceof soydata.UnsanitizedText || goog.isString(a.error), "error", a.error, "?soydata.SanitizedHtml|string|undefined");
        var h = a.error;
        soy.asserts.assertType(null == a.label || a.label instanceof goog.soy.data.SanitizedContent || goog.isString(a.label), "label", a.label, "null|string|undefined");
        var k = a.label;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3csection class\x3d"settingContainer' + (g ? " settingContainer--column" : "") + (e ? " " + soy.$$escapeHtmlAttribute(e) : "") + (h ? " settingContainer--error" : "") + '"' + (c ? " " + soy.$$filterHtmlAttributes(c) : "") + '\x3e\x3cdiv class\x3d"settingContainer__settingInfo"\x3e' + (k ? '\x3ch3 class\x3d"settingContainer__settingLabel"\x3e' + soy.$$escapeHtml(k) + "\x3c/h3\x3e" : "") + (d ? '\x3cdiv class\x3d"settingContainer__settingCaption"\x3e' + soy.$$escapeHtml(d) + "\x3c/div\x3e" : "") + '\x3cdiv class\x3d"settingContainer__errorContainer"\x3e' + (h ? uca(a) : "") + '\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"settingContainer__settings"\x3e' + soy.$$escapeHtml(b) + "\x3c/div\x3e\x3c/section\x3e")
    }

    function uca(a) {
        soy.asserts.assertType(a.error instanceof goog.soy.data.SanitizedContent || a.error instanceof soydata.SanitizedHtml || a.error instanceof soydata.UnsanitizedText || goog.isString(a.error), "error", a.error, "!soydata.SanitizedHtml|string");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d"settingContainer__error"\x3e' + soy.$$escapeHtml(a.error) + "\x3c/span\x3e")
    }

    function g3(a) {
        soy.asserts.assertType(a.input instanceof soydata.SanitizedHtml || a.input instanceof soydata.UnsanitizedText || goog.isString(a.input), "input", a.input, "soydata.SanitizedHtml");
        var b = a.input;
        soy.asserts.assertType(null == a.error || a.error instanceof goog.soy.data.SanitizedContent || a.error instanceof soydata.SanitizedHtml || a.error instanceof soydata.UnsanitizedText || goog.isString(a.error), "error", a.error, "?soydata.SanitizedHtml|string|undefined");
        var c = a.error;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var d = a.J;
        soy.asserts.assertType(null == a.gz || a.gz instanceof soydata.SanitizedHtml || a.gz instanceof soydata.UnsanitizedText || goog.isString(a.gz), "help", a.gz, "?soydata.SanitizedHtml|string|undefined");
        var e = a.gz;
        soy.asserts.assertType(null == a.info || a.info instanceof goog.soy.data.SanitizedContent || a.info instanceof soydata.SanitizedHtml || a.info instanceof soydata.UnsanitizedText || goog.isString(a.info), "info", a.info, "?soydata.SanitizedHtml|string|undefined");
        var g = a.info;
        soy.asserts.assertType(null == a.label || a.label instanceof goog.soy.data.SanitizedContent || goog.isString(a.label), "label", a.label, "null|string|undefined");
        var h = a.label;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"settingContainer__input ' + soy.$$escapeHtmlAttribute(null == d ? "" : d) + '"\x3e' + (h || e ? '\x3cdiv class\x3d"settingContainer__inputAbove"\x3e' + (h ? '\x3clabel class\x3d"settingContainer__inputLabel"\x3e' + soy.$$escapeHtml(h) + "\x3c/label\x3e" : "") + (e ? '\x3cspan class\x3d"settingContainer__inputHelp"\x3e' + soy.$$escapeHtml(e) + "\x3c/span\x3e" : "") + "\x3c/div\x3e" : "") + soy.$$escapeHtml(b) + '\x3cdiv class\x3d"settingContainer__inputBelow"\x3e\x3cdiv class\x3d"settingContainer__inputErrorContainer"\x3e' + (c ? M7(a) : "") + "\x3c/div\x3e" + (g ? '\x3cspan class\x3d"settingContainer__inputInfo"\x3e' + soy.$$escapeHtml(g) + "\x3c/span\x3e" : "") + "\x3c/div\x3e\x3c/div\x3e")
    }

    function M7(a) {
        soy.asserts.assertType(a.error instanceof goog.soy.data.SanitizedContent || a.error instanceof soydata.SanitizedHtml || a.error instanceof soydata.UnsanitizedText || goog.isString(a.error), "error", a.error, "!soydata.SanitizedHtml|string");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d"settingContainer__inputError"\x3e' + soy.$$escapeHtml(a.error) + "\x3c/span\x3e")
    }

    function N7(a) {
        var b;
        soy.asserts.assertType(a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "soydata.SanitizedHtml");
        var c = a.content;
        soy.asserts.assertType(null == a.visible || goog.isBoolean(a.visible) || 1 === a.visible || 0 === a.visible, "visible", a.visible, "boolean|null|undefined");
        var d = a.visible;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"settingContainer__hiddenInputs' + (d ? " settingContainer__hiddenInputs--visible" : "") + " " + soy.$$escapeHtmlAttribute(null == (b = a.J) ? "" : b) + '"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e")
    }

    function O7(a) {
        soy.asserts.assertType(a.buttons instanceof soydata.SanitizedHtml || a.buttons instanceof soydata.UnsanitizedText || goog.isString(a.buttons), "buttons", a.buttons, "soydata.SanitizedHtml");
        var b = a.buttons;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var c = a.J;
        soy.asserts.assertType(null == a.fb || goog.isBoolean(a.fb) || 1 === a.fb || 0 === a.fb, "column", a.fb, "boolean|null|undefined");
        var d = a.fb;
        soy.asserts.assertType(null == a.error || a.error instanceof goog.soy.data.SanitizedContent || a.error instanceof soydata.SanitizedHtml || a.error instanceof soydata.UnsanitizedText || goog.isString(a.error), "error", a.error, "?soydata.SanitizedHtml|string|undefined");
        var e = a.error;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"settingsFormActions ' + (d ? " settingsFormActions--column" : "") + " " + soy.$$escapeHtmlAttribute(null == c ? "" : c) + '"\x3e\x3cdiv class\x3d"settingsFormActions__errorContainer"\x3e' + (e ? P7(a) : "") + '\x3c/div\x3e\x3cdiv class\x3d"settingsFormActions__buttons"\x3e' + soy.$$escapeHtml(b) + "\x3c/div\x3e\x3c/div\x3e")
    }

    function P7(a) {
        soy.asserts.assertType(a.error instanceof goog.soy.data.SanitizedContent || a.error instanceof soydata.SanitizedHtml || a.error instanceof soydata.UnsanitizedText || goog.isString(a.error), "error", a.error, "!soydata.SanitizedHtml|string");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cspan class\x3d"settingsFormActions__error"\x3e' + soy.$$escapeHtml(a.error) + "\x3c/span\x3e")
    };

    function Q7(a) {
        fc.apply(this, arguments)
    }
    t(Q7, fc);

    function f3(a) {
        Ba(a.hasClass("settingContainer__input"), "the given element {} is not an input container", a.get(0));
        return new Q7(a)
    }
    Q7.prototype.Yj = function (a) {
        this.$el.addClass("settingContainer__input--error");
        var b = this.$el.find(".settingContainer__inputError");
        0 < b.length ? (b.removeClass("settingContainer__inputError--hidden"),
            b.html(a.toString())) : (b = this.$el.find(".settingContainer__inputErrorContainer"),
            a = M7({
                error: a
            }).toString(),
            b.html(a))
    };
    Q7.prototype.tg = function () {
        this.$el.removeClass("settingContainer__input--error");
        var a = this.$el.find(".settingContainer__inputErrorContainer").find(".settingContainer__inputError");
        0 < a.length && (a.addClass("settingContainer__inputError--hidden"),
            wf(a[0]).then(function () {
                a.hasClass("settingContainer__inputError--hidden") && a.remove()
            }))
    };

    function R7(a) {
        fc.apply(this, arguments)
    }
    t(R7, fc);
    R7.prototype.Yj = function (a) {
        a = P7({
            error: a
        }).toString();
        return this.$el.find(".settingsFormActions__errorContainer").html(a)
    };
    R7.prototype.tg = function () {
        this.$el.find(".settingsFormActions__errorContainer").find(".settingsFormActions__error").addClass("settingsFormActions__error--hidden")
    };

    function S7(a, b) {
        a = a.$el.find(".settingsFormActions__buttons");
        a.empty();
        a.append(b)
    };

    function T7() {
        return new Map([
            ["AD", "Andorra"],
            ["AE", "United Arab Emirates"],
            ["AF", "Afghanistan"],
            ["AG", "Antigua and Barbuda"],
            ["AI", "Anguilla"],
            ["AL", "Albania"],
            ["AM", "Armenia"],
            ["AO", "Angola"],
            ["AQ", "Antarctica"],
            ["AR", "Argentina"],
            ["AS", "American Samoa"],
            ["AT", "Austria"],
            ["AU", "Australia"],
            ["AW", "Aruba"],
            ["AX", "land Islands"],
            ["AZ", "Azerbaijan"],
            ["BA", "Bosnia and Herzegovina"],
            ["BB", "Barbados"],
            ["BD", "Bangladesh"],
            ["BE", "Belgium"],
            ["BF", "Burkina Faso"],
            ["BG", "Bulgaria"],
            ["BH", "Bahrain"],
            ["BI", "Burundi"],
            ["BJ", "Benin"],
            ["BL", "Saint Barthlemy"],
            ["BM", "Bermuda"],
            ["BN", "Brunei Darussalam"],
            ["BO", "Bolivia, Plurinational State of"],
            ["BQ", "Bonaire, Sint Eustatius and Saba"],
            ["BR", "Brazil"],
            ["BS", "Bahamas"],
            ["BT", "Bhutan"],
            ["BV", "Bouvet Island"],
            ["BW", "Botswana"],
            ["BY", "Belarus"],
            ["BZ", "Belize"],
            ["CA", "Canada"],
            ["CC", "Cocos (Keeling) Islands"],
            ["CD", "Congo, the Democratic Republic of the"],
            ["CF", "Central African Republic"],
            ["CG", "Congo"],
            ["CH", "Switzerland"],
            ["CI", "Cte d'Ivoire"],
            ["CK", "Cook Islands"],
            ["CL", "Chile"],
            ["CM", "Cameroon"],
            ["CN", "China"],
            ["CO", "Colombia"],
            ["CR", "Costa Rica"],
            ["CU", "Cuba"],
            ["CV", "Cape Verde"],
            ["CW", "Curaao"],
            ["CX", "Christmas Island"],
            ["CY", "Cyprus"],
            ["CZ", "Czech Republic"],
            ["DE", "Germany"],
            ["DJ", "Djibouti"],
            ["DK", "Denmark"],
            ["DM", "Dominica"],
            ["DO", "Dominican Republic"],
            ["DZ", "Algeria"],
            ["EC", "Ecuador"],
            ["EE", "Estonia"],
            ["EG", "Egypt"],
            ["EH", "Western Sahara"],
            ["ER", "Eritrea"],
            ["ES", "Spain"],
            ["ET", "Ethiopia"],
            ["FI", "Finland"],
            ["FJ", "Fiji"],
            ["FK", "Falkland Islands (Malvinas)"],
            ["FM", "Micronesia, Federated States of"],
            ["FO", "Faroe Islands"],
            ["FR", "France"],
            ["GA", "Gabon"],
            ["GB", "United Kingdom"],
            ["GD", "Grenada"],
            ["GE", "Georgia"],
            ["GF", "French Guiana"],
            ["GG", "Guernsey"],
            ["GH", "Ghana"],
            ["GI", "Gibraltar"],
            ["GL", "Greenland"],
            ["GM", "Gambia"],
            ["GN", "Guinea"],
            ["GP", "Guadeloupe"],
            ["GQ", "Equatorial Guinea"],
            ["GR", "Greece"],
            ["GS", "South Georgia and the South Sandwich Islands"],
            ["GT", "Guatemala"],
            ["GU", "Guam"],
            ["GW", "Guinea-Bissau"],
            ["GY", "Guyana"],
            ["HK", "Hong Kong"],
            ["HM", "Heard Island and McDonald Islands"],
            ["HN", "Honduras"],
            ["HR", "Croatia"],
            ["HT", "Haiti"],
            ["HU", "Hungary"],
            ["ID", "Indonesia"],
            ["IE", "Ireland"],
            ["IL", "Israel"],
            ["IM", "Isle of Man"],
            ["IN", "India"],
            ["IO", "British Indian Ocean Territory"],
            ["IQ", "Iraq"],
            ["IR", "Iran, Islamic Republic of"],
            ["IS", "Iceland"],
            ["IT", "Italy"],
            ["JE", "Jersey"],
            ["JM", "Jamaica"],
            ["JO", "Jordan"],
            ["JP", "Japan"],
            ["KE", "Kenya"],
            ["KG", "Kyrgyzstan"],
            ["KH", "Cambodia"],
            ["KI", "Kiribati"],
            ["KM", "Comoros"],
            ["KN", "Saint Kitts and Nevis"],
            ["KP", "Korea, Democratic People's Republic of"],
            ["KR", "Korea, Republic of"],
            ["KW", "Kuwait"],
            ["KY", "Cayman Islands"],
            ["KZ", "Kazakhstan"],
            ["LA", "Lao People's Democratic Republic"],
            ["LB", "Lebanon"],
            ["LC", "Saint Lucia"],
            ["LI", "Liechtenstein"],
            ["LK", "Sri Lanka"],
            ["LR", "Liberia"],
            ["LS", "Lesotho"],
            ["LT", "Lithuania"],
            ["LU", "Luxembourg"],
            ["LV", "Latvia"],
            ["LY", "Libya"],
            ["MA", "Morocco"],
            ["MC", "Monaco"],
            ["MD", "Moldova, Republic of"],
            ["ME", "Montenegro"],
            ["MF", "Saint Martin (French part)"],
            ["MG", "Madagascar"],
            ["MH", "Marshall Islands"],
            ["MK", "Macedonia, the former Yugoslav Republic of"],
            ["ML", "Mali"],
            ["MM", "Myanmar"],
            ["MN", "Mongolia"],
            ["MO", "Macao"],
            ["MP", "Northern Mariana Islands"],
            ["MQ", "Martinique"],
            ["MR", "Mauritania"],
            ["MS", "Montserrat"],
            ["MT", "Malta"],
            ["MU", "Mauritius"],
            ["MV", "Maldives"],
            ["MW", "Malawi"],
            ["MX", "Mexico"],
            ["MY", "Malaysia"],
            ["MZ", "Mozambique"],
            ["NA", "Namibia"],
            ["NC", "New Caledonia"],
            ["NE", "Niger"],
            ["NF", "Norfolk Island"],
            ["NG", "Nigeria"],
            ["NI", "Nicaragua"],
            ["NL", "Netherlands"],
            ["NO", "Norway"],
            ["NP", "Nepal"],
            ["NR", "Nauru"],
            ["NU", "Niue"],
            ["NZ", "New Zealand"],
            ["OM", "Oman"],
            ["PA", "Panama"],
            ["PE", "Peru"],
            ["PF", "French Polynesia"],
            ["PG", "Papua New Guinea"],
            ["PH", "Philippines"],
            ["PK", "Pakistan"],
            ["PL", "Poland"],
            ["PM", "Saint Pierre and Miquelon"],
            ["PN", "Pitcairn"],
            ["PR", "Puerto Rico"],
            ["PS", "Palestinian Territory, Occupied"],
            ["PT", "Portugal"],
            ["PW", "Palau"],
            ["PY", "Paraguay"],
            ["QA", "Qatar"],
            ["RE", "Runion"],
            ["RO", "Romania"],
            ["RS", "Serbia"],
            ["RU", "Russian Federation"],
            ["RW", "Rwanda"],
            ["SA", "Saudi Arabia"],
            ["SB", "Solomon Islands"],
            ["SC", "Seychelles"],
            ["SD", "Sudan"],
            ["SE", "Sweden"],
            ["SG", "Singapore"],
            ["SH", "Saint Helena, Ascension and Tristan da Cunha"],
            ["SI", "Slovenia"],
            ["SJ", "Svalbard and Jan Mayen"],
            ["SK", "Slovakia"],
            ["SL", "Sierra Leone"],
            ["SM", "San Marino"],
            ["SN", "Senegal"],
            ["SO", "Somalia"],
            ["SR", "Suriname"],
            ["SS", "South Sudan"],
            ["ST", "Sao Tome and Principe"],
            ["SV", "El Salvador"],
            ["SX", "Sint Maarten (Dutch part)"],
            ["SY", "Syrian Arab Republic"],
            ["SZ", "Swaziland"],
            ["TC", "Turks and Caicos Islands"],
            ["TD", "Chad"],
            ["TF", "French Southern Territories"],
            ["TG", "Togo"],
            ["TH", "Thailand"],
            ["TJ", "Tajikistan"],
            ["TK", "Tokelau"],
            ["TL", "Timor-Leste"],
            ["TM", "Turkmenistan"],
            ["TN", "Tunisia"],
            ["TO", "Tonga"],
            ["TR", "Turkey"],
            ["TT", "Trinidad and Tobago"],
            ["TV", "Tuvalu"],
            ["TW", "Taiwan, Province of China"],
            ["TZ", "Tanzania, United Republic of"],
            ["UA", "Ukraine"],
            ["UG", "Uganda"],
            ["UM", "United States Minor Outlying Islands"],
            ["US", "United States"],
            ["UY", "Uruguay"],
            ["UZ", "Uzbekistan"],
            ["VA", "Holy See (Vatican City State)"],
            ["VC", "Saint Vincent and the Grenadines"],
            ["VE", "Venezuela, Bolivarian Republic of"],
            ["VG", "Virgin Islands, British"],
            ["VI", "Virgin Islands, U.S."],
            ["VN", "Viet Nam"],
            ["VU", "Vanuatu"],
            ["WF", "Wallis and Futuna"],
            ["WS", "Samoa"],
            ["YE", "Yemen"],
            ["YT", "Mayotte"],
            ["ZA", "South Africa"],
            ["ZM", "Zambia"],
            ["ZW", "Zimbabwe"]
        ])
    };

    function U7(a) {
        switch (a) {
            case "US":
                return new Map(vca);
            case "AU":
                return new Map(wca);
            case "MX":
                return new Map(xca);
            default:
                throw Error("Cannot get principal subdivisions for country '" + a + "'");
        }
    }
    var vca = new Map([
            ["US-AK", "Alaska"],
            ["US-AL", "Alabama"],
            ["US-AR", "Arkansas"],
            ["US-AS", "American Samoa"],
            ["US-AZ", "Arizona"],
            ["US-CA", "California"],
            ["US-CO", "Colorado"],
            ["US-CT", "Connecticut"],
            ["US-DC", "District of Columbia"],
            ["US-DE", "Delaware"],
            ["US-FL", "Florida"],
            ["US-GA", "Georgia"],
            ["US-GU", "Guam"],
            ["US-HI", "Hawaii"],
            ["US-IA", "Iowa"],
            ["US-ID", "Idaho"],
            ["US-IL", "Illinois"],
            ["US-IN", "Indiana"],
            ["US-KS", "Kansas"],
            ["US-KY", "Kentucky"],
            ["US-LA", "Louisiana"],
            ["US-MA", "Massachusetts"],
            ["US-MD", "Maryland"],
            ["US-ME", "Maine"],
            ["US-MI", "Michigan"],
            ["US-MN", "Minnesota"],
            ["US-MO", "Missouri"],
            ["US-MP", "Northern Mariana Islands"],
            ["US-MS", "Mississippi"],
            ["US-MT", "Montana"],
            ["US-NC", "North Carolina"],
            ["US-ND", "North Dakota"],
            ["US-NE", "Nebraska"],
            ["US-NH", "New Hampshire"],
            ["US-NJ", "New Jersey"],
            ["US-NM", "New Mexico"],
            ["US-NV", "Nevada"],
            ["US-NY", "New York"],
            ["US-OH", "Ohio"],
            ["US-OK", "Oklahoma"],
            ["US-OR", "Oregon"],
            ["US-PA", "Pennsylvania"],
            ["US-PR", "Puerto Rico"],
            ["US-RI", "Rhode Island"],
            ["US-SC", "South Carolina"],
            ["US-SD", "South Dakota"],
            ["US-TN", "Tennessee"],
            ["US-TX", "Texas"],
            ["US-UM", "United States Minor Outlying Islands"],
            ["US-UT", "Utah"],
            ["US-VA", "Virginia"],
            ["US-VI", "Virgin Islands, U.S."],
            ["US-VT", "Vermont"],
            ["US-WA", "Washington"],
            ["US-WI", "Wisconsin"],
            ["US-WV", "West Virginia"],
            ["US-WY", "Wyoming"]
        ]),
        wca = new Map([
            ["AU-NSW", "New South Wales"],
            ["AU-QLD", "Queensland"],
            ["AU-SA", "South Australia"],
            ["AU-TAS", "Tasmania"],
            ["AU-VIC", "Victoria"],
            ["AU-WA", "Western Australia"],
            ["AU-ACT", "Australian Capital Territory"],
            ["AU-NT", "Northern Territory"]
        ]),
        xca = new Map([
            ["MX-CMX", "Mexican Federal"],
            ["MX-AGU", "Aguascalientes"],
            ["MX-BCN", "Baja California"],
            ["MX-BCS", "Baja California Sur"],
            ["MX-CAM", "Campeche"],
            ["MX-COA", "Coahuila"],
            ["MX-COL", "Colima"],
            ["MX-CHP", "Chiapas"],
            ["MX-CHH", "Chihuahua"],
            ["MX-DUR", "Durango"],
            ["MX-GUA", "Guanajuato"],
            ["MX-GRO", "Guerrero"],
            ["MX-HID", "Hidalgo"],
            ["MX-JAL", "Jalisco"],
            ["MX-MEX", "Mxico"],
            ["MX-MIC", "Michoacn"],
            ["MX-MOR", "Morelos"],
            ["MX-NAY", "Nayarit"],
            ["MX-NLE", "Nuevo Len"],
            ["MX-OAX", "Oaxaca"],
            ["MX-PUE", "Puebla"],
            ["MX-QUE", "Quertaro"],
            ["MX-ROO", "Quintana Roo"],
            ["MX-SLP", "San Luis Potos"],
            ["MX-SIN", "Sinaloa"],
            ["MX-SON", "Sonora"],
            ["MX-TAB", "Tabasco"],
            ["MX-TAM", "Tamaulipas"],
            ["MX-TLA", "Tlaxcala"],
            ["MX-VER", "Veracruz"],
            ["MX-YUC", "Yucatn"],
            ["MX-ZAC", "Zacatecas"]
        ]);

    function V7(a, b) {
        a = [].concat(la(a.entries())).sort(function (a, b) {
            return a[1].localeCompare(b[1])
        }).map(function (a) {
            return {
                selected: a[0] === b.zO,
                text: a[1],
                value: a[0]
            }
        });
        return null != b.nh ? [].concat([{
            selected: !b.zO,
            text: b.nh,
            value: b.jN
        }], la(a)) : a
    }

    function yca(a) {
        var b = T7();
        a.Fh && (b = Array.from(b.entries()).filter(function (b) {
                b = ka(b).next().value;
                return a.Fh.has(b)
            }),
            b = new Map(b));
        return V7(b, {
            nh: a.nh,
            jN: "ZZ",
            zO: a.k6
        })
    }

    function W7(a) {
        var b = U7(a.Sc);
        Ba(!a.GG || b.has(a.GG), '"{}" is not a valid subdivision code of the country "{}".', a.GG, a.Sc);
        return V7(b, {
            nh: a.nh,
            jN: a.jN,
            zO: a.GG
        })
    };

    function y_() {}

    function Y2(a) {
        a = a.map(function (a) {
            return zca(a)
        });
        return P.all(a).then(function (a) {
            return a.every(function (a) {
                return a
            })
        })
    }

    function zca(a) {
        var b = a.Vo(),
            c = a.vq.map(function (a) {
                return a.validate(b, void 0)
            });
        return P.all(c).then(function (b) {
            var c = a.Uo();
            b = ka(b);
            for (var g = b.next(); !g.done; g = b.next())
                if (g = g.value, !g.valid)
                    return c.Yj(g.message), !1;
            c.tg();
            return !0
        })
    };

    function x_(a) {
        this.Mh = a.Mh
    }
    x_.prototype.validate = function (a) {
        var b = null;
        255 <= a.length ? b = this.Mh.format("formValidatorInvalidEmailTooLong") : 1 > a.length ? b = this.Mh.format("formValidatorInvalidEmailTooShort") : /^(([^<>()[\]\\.,;:\s@\']+(\.[^<>()[\]\\.,;:\s@\']+)*)|(\'.+\'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a) || (b = this.Mh.format("formValidatorInvalidEmailSyntax"));
        return new P(function (a) {
            return a({
                valid: null == b,
                message: b
            })
        })
    };

    function X7(a) {
        this.sL = a.sL
    }
    X7.prototype.validate = function (a) {
        var b = null !== a && void 0 !== a && ("number" !== typeof a || !isNaN(a)) && ("string" !== typeof a || /\S+/.test(a)),
            c = b ? null : this.sL;
        return new P(function (a) {
            return a({
                valid: b,
                message: c
            })
        })
    };

    function V_(a, b, c) {
        function d(a) {
            var b = new Set;
            a.xa().forEach(function (a) {
                if (100 !== a.Ob && !(a instanceof iB)) {
                    var c = a.Ba();
                    if (a.constructor === eB)
                        for (var d = a.Zf(), e = 0; e < d; e++) {
                            var g = a.Gm(e).clone().translate(c.Y(), c.N());
                            b.add(g)
                        }
                    else if (c) {
                        if (a = xB(a))
                            if (c.translate(a.Y(), a.N()),
                                100 === a.Ob)
                                return;
                        b.add(c)
                    }
                }
            });
            return b
        }
        var e = a.pb();
        a = function (a, b) {
            return b.map(function (b) {
                b = w(a.ia[b], "Cannot get bounding boxes for invalid page index {}.", b);
                return d(b)
            })
        }(a, b);
        var g = {
            I4: Lg(e.tb).width,
            B4: Lg(e.tb).height,
            Fq: function (a, b) {
                return Lg(a.tb).width * (BZ.MH / b.li)
            }(e, c)
        };
        return a.every(function (a) {
            return Aca(a, g)
        })
    }

    function Aca(a, b) {
        function c(b, c) {
            var d = {
                origin: b,
                direction: [c[0] - b[0], c[1] - b[1]]
            };
            b = Array.from(a).map(function (a) {
                return Bca(d, a)
            }).filter(function (a) {
                return 2 === a.length
            }).map(function (a) {
                var b = a[0],
                    c = a[1];
                a = (b + c) / 2;
                b = 1.04 * (c - b) / 2;
                return [a - b, a + b]
            });
            return Cca(new Set(b))
        }
        var d = -b.Fq,
            e = b.I4 + b.Fq,
            g = b.B4 + b.Fq;
        b = -b.Fq;
        return c([b, d], [e, d]) && c([e, d], [e, g]) && c([b, g], [e, g]) && c([b, d], [b, g])
    }

    function Bca(a, b) {
        var c = a.origin;
        a = a.direction;
        Ba(0 === a[0] !== (0 === a[1]), "axisAlignedRay must be an axis-aligned ray, but its direction vector is {}", a);
        if (0 !== a[0]) {
            if (c[1] < b.N() || c[1] > b.Ha())
                return [];
            var d = (b.Y() - c[0]) / a[0];
            b = (b.kb() - c[0]) / a[0];
            return d < b ? [d, b] : [b, d]
        }
        if (c[0] < b.Y() || c[0] > b.kb())
            return [];
        d = (b.N() - c[1]) / a[1];
        b = (b.Ha() - c[1]) / a[1];
        return d < b ? [d, b] : [b, d]
    }

    function Cca(a) {
        var b = [0, 1];
        a = Array.from(a);
        a.sort(function (a, b) {
            return a[0] - b[0]
        });
        for (var c = b[0], d = 0; d < a.length; d++) {
            var e = a[d];
            if (!(e[1] < c)) {
                if (e[0] > c)
                    break;
                c = e[1];
                if (c >= b[1])
                    return !0
            }
        }
        return !1
    };

    function Y7(a) {
        this.Ax = a.Ax
    }
    Y7.prototype.validate = function (a) {
        var b = null;
        [/P\.?\s*O(\.|\s)\s*BOX/i, /POST\s+OFFICE\s+BOX/i].some(function (b) {
            return b.test(a)
        }) && (b = this.Ax);
        return new P(function (a) {
            return a({
                valid: null == b,
                message: b
            })
        })
    };

    function Z7(a, b, c) {
        var d = this;
        L.call(this, a);
        this.Dk = b;
        this.z7 = c;
        b.on(RY, function () {
            return d.trigger($7)
        })
    }
    t(Z7, L);
    Z7.prototype.show = function () {
        this.Dk.show()
    };
    Z7.prototype.hide = function () {
        var a = this;
        this.Dk.hide().then(function () {
            return a.remove()
        })
    };
    var $7 = "CANCEL";

    function a8(a, b) {
        var c = this;
        this.view = a;
        this.BM = function () {};
        Dca(b, function () {
            return c.Rr()
        });
        Eca(b, function () {
            c.view.hide();
            c.BM(!0)
        });
        a.on($7, function () {
            return c.Rr()
        })
    }
    a8.prototype.Rr = function () {
        this.view.hide();
        this.BM(!1)
    };

    function b8(a) {
        soy.asserts.assertType(goog.isString(a.Bh) || a.Bh instanceof goog.soy.data.SanitizedContent, "cancelButtonText", a.Bh, "string|goog.soy.data.SanitizedContent");
        var b = a.Bh;
        soy.asserts.assertType(goog.isString(a.vk) || a.vk instanceof goog.soy.data.SanitizedContent, "confirmButtonText", a.vk, "string|goog.soy.data.SanitizedContent");
        var c = a.vk;
        soy.asserts.assertType(goog.isString(a.message) || a.message instanceof goog.soy.data.SanitizedContent, "message", a.message, "string|goog.soy.data.SanitizedContent");
        var d = a.message;
        soy.asserts.assertType(goog.isString(a.Lj) || a.Lj instanceof goog.soy.data.SanitizedContent, "moreInfoLinkText", a.Lj, "string|goog.soy.data.SanitizedContent");
        var e = a.Lj;
        soy.asserts.assertType(goog.isString(a.yp) || a.yp instanceof goog.soy.data.SanitizedContent, "moreInfoLinkUrl", a.yp, "string|goog.soy.data.SanitizedContent");
        var g = a.yp;
        soy.asserts.assertType(a.Bl instanceof soydata.SanitizedHtml || a.Bl instanceof soydata.UnsanitizedText || goog.isString(a.Bl), "saveACopyMessage", a.Bl, "soydata.SanitizedHtml");
        var h = a.Bl;
        soy.asserts.assertType(goog.isBoolean(a.jq) || 1 === a.jq || 0 === a.jq, "showCancelButton", a.jq, "boolean");
        var k = !!a.jq;
        soy.asserts.assertType(goog.isBoolean(a.kq) || 1 === a.kq || 0 === a.kq, "showResizeForPrintIllustration", a.kq, "boolean");
        var l = !!a.kq;
        soy.asserts.assertType(goog.isString(a.title) || a.title instanceof goog.soy.data.SanitizedContent, "title", a.title, "string|goog.soy.data.SanitizedContent");
        var m = a.title;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var n = a.J;
        soy.asserts.assertType(null == a.lG || goog.isArray(a.lG), "printableDoctypeOptions", a.lG, "?Array\x3c{disabled: (boolean|null|undefined), selected: (boolean|null|undefined), text: string, value: string}\x3e|undefined");
        a = a.lG;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"updateDoctype' + (n ? " " + soy.$$escapeHtmlAttribute(n) : "") + '"\x3e' + (l ? '\x3cdiv class\x3d"updateDoctype__image"\x3e\x3c/div\x3e' : "") + "\x3ch2 class\x3d'updateDoctype__title'\x3e" + soy.$$escapeHtml(m) + "\x3c/h2\x3e\x3cp class\x3d'updateDoctype__message'\x3e\x3cstrong\x3e" + soy.$$escapeHtml(d) + "\x3c/strong\x3e\x3c/p\x3e" + (a ? aZ({
            J: "updateDoctype__doctypeIdSelect",
            options: a
        }) : "") + "\x3cp class\x3d'updateDoctype__error'\x3e\x3c/p\x3e\x3cdiv class\x3d\"updateDoctype__buttons\"\x3e" + (k ? bZ({
            J: "updateDoctype__buttonCancel buttonSecondary",
            text: b
        }) : "") + bZ({
            J: "updateDoctype__buttonConfirm buttonSubmittable",
            text: c
        }) + '\x3c/div\x3e\x3cp class\x3d"updateDoctype__saveNote"\x3e' + soy.$$escapeHtml(h) + ' \x3ca target\x3d"_blank" href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(g)) + '" class\x3d"updateDoctype__moreInfoLink"\x3e' + soy.$$escapeHtml(e) + "\x3c/a\x3e\x3c/p\x3e\x3c/div\x3e")
    };

    function c8(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".updateDoctype__buttonConfirm", function () {
            b.trigger(d8)
        });
        a.on("click", ".updateDoctype__buttonCancel", function () {
            b.trigger(e8)
        })
    }
    t(c8, L);

    function Fca(a) {
        a = $(b8(a).toString());
        return new c8(a)
    }

    function f8(a, b) {
        a.$el.find(".updateDoctype__buttonConfirm").toggleClass("submitting", b)
    }
    c8.prototype.Yj = function (a) {
        var b = this.$el.find(".updateDoctype__error");
        b.html(a.toString());
        Sk(function () {
            b.addClass("updateDoctype__error--visible")
        })
    };
    c8.prototype.tg = function () {
        this.$el.find(".updateDoctype__error").removeClass("updateDoctype__error--visible")
    };
    var e8 = "CANCEL",
        d8 = "CONFIRM";

    function g8(a, b) {
        var c = this;
        this.view = b;
        this.H = a.H;
        this.mf = a.mf;
        this.hm = a.hm;
        this.nb = a.nb;
        this.Rt = a.Rt;
        this.om = a.om;
        this.u = a.u;
        this.yA = a.yA;
        this.Ag = a.Ag;
        this.Yn = a.Yn;
        this.ZU = function () {};
        this.$U = function () {};
        b.on(e8, function () {
            return c.Rr()
        });
        b.on(d8, function () {
            return Gca(c)
        })
    }

    function Hca(a) {
        var b = a.zv ? a.zv.map(function (b, c) {
                return {
                    text: "realEstateFlyer" === b.G() ? a.u.format("updateDoctypeFlyerName") : "TACRsbXUzY8" === b.G() ? a.u.format("updateDoctypeBusinessCardName") : "TACjUzwty98" === b.G() ? a.u.format("updateDoctypePostcardName") : w(b.getName(), "doctype must have a name"),
                    value: b.G(),
                    selected: 0 === c,
                    disabled: !1
                }
            }) : null,
            b = Fca({
                Bh: a.u.Bh(),
                vk: a.u.format("updateDoctypeUpdateFormatButtonText"),
                lG: b,
                message: a.u.format("updateDoctypeWhatToPrintMessage"),
                Lj: a.u.Lj(),
                yp: "https://support.canva.com/canva-print/preparing-your-design-for-print/resizing-for-print/",
                Bl: sf(a.u),
                jq: a.jq,
                kq: a.kq,
                title: a.u.title()
            }),
            c = a.zv ? new Map(a.zv.map(function (a) {
                return [a.G(), a]
            })) : null;
        return {
            bc: h8({
                H: a.H,
                mf: a.mf,
                hm: a.hm,
                Rt: a.Rt,
                nb: a.nb,
                om: a.om,
                u: a.u,
                yA: c,
                Ag: a.Ag,
                Yn: a.Yn
            }, b),
            view: b
        }
    }

    function h8(a, b) {
        Ba(!!a.Yn !== !!a.yA, "Must specify exactly one of targetDoctype, and printableDoctypes.");
        return new g8(a, b)
    }
    g8.prototype.Rr = function () {
        var a = this.hm,
            b = this.mf,
            a = X(X(X(new Hl("print_resize_cancelled"), "section", "editor"), "location", b), "template", a);
        this.H.Ga(a);
        this.ZU()
    };

    function Gca(a) {
        var b = Ica(a),
            c = w(b.id, "targetDoctype must have an id");
        a.view.tg();
        f8(a.view, !0);
        Jca(a, c);
        return Kca(a).then(function () {
            return a.Ag(b)
        }).then(function () {
            var b = a.hm,
                e = a.mf,
                b = X(X(X(X(new Hl("print_resize_succeeded"), "section", "editor"), "location", e), "template", b), "target_template", c);
            a.H.Ga(b)
        }).then(function () {
            return a.$U()
        }).catch(function () {
            a.view.Yj(a.u.Ua("updateDoctypeBackupErrorHtml", "https://support.canva.com/troubleshooting"))
        }).catch(function () {
            var b = a.hm,
                e = a.mf,
                b = X(X(X(X(new Hl("print_resize_failed"), "section", "editor"), "location", e), "template", b), "target_template", c);
            a.H.Ga(b);
            a.view.Yj(a.u.Ua("updateDoctypeResizeErrorHtml", "https://support.canva.com/troubleshooting"))
        }).finally(function () {
            return f8(a.view, !1)
        })
    }

    function Ica(a) {
        if (a.yA) {
            var b = a.view.$el.find(".updateDoctype__doctypeIdSelect select").val().toString();
            a = a.yA.get(b)
        } else
            a = a.Yn;
        return w(a, "targetDoctype must exist")
    }

    function Kca(a) {
        var b = a.u.format("updateDoctypeOriginalSizeDesignName", a.om).substr(0, 255),
            b = new As({
                id: a.Rt.G(),
                title: b
            });
        return a.nb.duplicate(b).catch(function () {
            throw new i8;
        })
    }

    function Dca(a, b) {
        a.ZU = b
    }

    function Eca(a, b) {
        a.$U = b
    }

    function Jca(a, b) {
        var c = a.hm,
            d = a.mf;
        b = X(X(X(X(new Hl("print_resize_button_clicked"), "section", "editor"), "location", d), "template", c), "target_template", b);
        a.H.Ga(b)
    }

    function i8() {}
    t(i8, Error);

    function x3(a, b) {
        switch (a) {
            case "US":
                return Lca.get(b);
            case "AU":
                return Mca.get(b);
            case "EU":
                return Nca.get(b);
            case "MX":
                return Oca.get(b);
            default:
                throw Error("Unknown print region '" + a + "'.");
        }
    }
    var Lca = new Map([
            ["posterUS", "POSTER"],
            ["TABQqupS2LE", "LETTERHEAD"],
            ["resume", "LETTERHEAD"],
            ["usLetter", "LETTERHEAD"],
            ["foodDrinkMenu", "FLYER"],
            ["realEstateFlyer", "FLYER"],
            ["certificate", "FLYER"],
            ["TACC4LJ8cp8", "INVITATION"],
            ["TABQqppdmyw", "INVITATION"],
            ["TABQqqo4v1s", "INVITATION"],
            ["TACiv026174", "INVITATION"],
            ["TABQqu1V70w", "INVITATION"],
            ["TACjUwMYSIM", "INVITATION"],
            ["TACRzIDOAWk", "INVITATION"],
            ["TACRzD6R1Mo", "BUSINESS_CARD"],
            ["TACRsbXUzY8", "BUSINESS_CARD"],
            ["TACRsibVUu4", "POSTCARD"],
            ["TACRzKTiVOc", "POSTCARD"],
            ["TACRsaKlUIo", "POSTCARD"],
            ["TACRzCdizdA", "POSTCARD"],
            ["TACRsgErAyo", "POSTCARD"]
        ]),
        Mca = new Map([
            ["TACixUyoqp0", "FLYER"],
            ["poster", "POSTER"],
            ["TABQqtmBi1w", "LETTERHEAD"],
            ["a4", "LETTERHEAD"],
            ["TABQqqo4v1s", "INVITATION"],
            ["TACiv026174", "INVITATION"],
            ["TABQqu1V70w", "INVITATION"],
            ["TACC4LJ8cp8", "INVITATION"],
            ["TABQqppdmyw", "INVITATION"],
            ["TACjUwMYSIM", "INVITATION"],
            ["businessCard", "BUSINESS_CARD"],
            ["TABQqt5Z4RU", "POSTCARD"],
            ["TACjUzwty98", "POSTCARD"]
        ]),
        Nca = new Map([
            ["poster", "POSTER"],
            ["TACRzD6R1Mo", "BUSINESS_CARD"],
            ["TACRsbXUzY8", "BUSINESS_CARD"],
            ["TABQqtmBi1w", "LETTERHEAD"],
            ["a4", "LETTERHEAD"],
            ["TACiRRRQ1rQ", "FLYER"],
            ["TACixUyoqp0", "FLYER"],
            ["TACiRn71mUI", "INVITATION"],
            ["TACixRR28vY", "INVITATION"],
            ["card", "INVITATION"],
            ["TABQqt5Z4RU", "POSTCARD"],
            ["TACjUzwty98", "POSTCARD"]
        ]),
        Oca = new Map([
            ["posterUS", "POSTER"],
            ["TABQqupS2LE", "LETTERHEAD"],
            ["resume", "LETTERHEAD"],
            ["usLetter", "LETTERHEAD"],
            ["foodDrinkMenu", "FLYER"],
            ["realEstateFlyer", "FLYER"],
            ["certificate", "FLYER"],
            ["TACC4LJ8cp8", "INVITATION"],
            ["TABQqppdmyw", "INVITATION"],
            ["TABQqqo4v1s", "INVITATION"],
            ["TACiv026174", "INVITATION"],
            ["TABQqu1V70w", "INVITATION"],
            ["TACjUwMYSIM", "INVITATION"],
            ["TACRzIDOAWk", "INVITATION"],
            ["TACRzD6R1Mo", "BUSINESS_CARD"],
            ["TACRsbXUzY8", "BUSINESS_CARD"],
            ["TACRsibVUu4", "POSTCARD"],
            ["TACRzKTiVOc", "POSTCARD"],
            ["TACRsaKlUIo", "POSTCARD"],
            ["TACRzCdizdA", "POSTCARD"],
            ["TACRsgErAyo", "POSTCARD"]
        ]);

    function Pca(a, b) {
        return x3(a, b) ? b : (b = Qca(a, b)) && j8(a, b)
    }

    function Qca(a, b) {
        switch (a) {
            case "US":
                return Rca.get(b);
            case "AU":
                return Sca.get(b);
            case "EU":
                return Tca.get(b);
            case "MX":
                return Uca.get(b);
            default:
                throw Error("Unknown print region '" + a + "'.");
        }
    }

    function j8(a, b) {
        switch (a) {
            case "US":
                return Vca.get(b);
            case "AU":
                return Wca.get(b);
            case "EU":
                return Xca.get(b);
            case "MX":
                return Yca.get(b);
            default:
                throw Error("Unknown print region '" + a + "'.");
        }
    }
    var Vca = new Map([
            ["BUSINESS_CARD", "TACRsbXUzY8"],
            ["FLYER", "realEstateFlyer"],
            ["INVITATION", "TABQqqo4v1s"],
            ["LETTERHEAD", "TABQqupS2LE"],
            ["POSTCARD", "TACRsgErAyo"],
            ["POSTER", "posterUS"]
        ]),
        Wca = new Map([
            ["BUSINESS_CARD", "businessCard"],
            ["INVITATION", "TABQqqo4v1s"],
            ["LETTERHEAD", "a4"],
            ["POSTCARD", "TABQqt5Z4RU"],
            ["POSTER", "poster"]
        ]),
        Xca = new Map([
            ["BUSINESS_CARD", "TACRsbXUzY8"],
            ["FLYER", "TACixUyoqp0"],
            ["INVITATION", "TACixRR28vY"],
            ["LETTERHEAD", "a4"],
            ["POSTCARD", "TACjUzwty98"],
            ["POSTER", "poster"]
        ]),
        Yca = new Map([
            ["BUSINESS_CARD", "TACRsbXUzY8"],
            ["FLYER", "realEstateFlyer"],
            ["INVITATION", "TABQqqo4v1s"],
            ["LETTERHEAD", "TABQqupS2LE"],
            ["POSTCARD", "TACRsgErAyo"],
            ["POSTER", "posterUS"]
        ]),
        Rca = new Map([
            ["a4", "LETTERHEAD"],
            ["businessCard", "BUSINESS_CARD"],
            ["card", "POSTCARD"],
            ["poster", "POSTER"],
            ["TABQqt5Z4RU", "POSTCARD"],
            ["TABQqtk2ELE", "BUSINESS_CARD"],
            ["TABQqtmBi1w", "LETTERHEAD"]
        ]),
        Sca = new Map([]),
        Tca = new Map([]),
        Uca = new Map([]);

    function k8(a, b, c) {
        return "US" === b ? a.Ua("printOrderPaperDimensionsInchesHtml", Number((c.li / 25400).toFixed(2)), Number((c.Ki / 25400).toFixed(2))) : a.Ua("printOrderPaperDimensionsCentimetresHtml", Number((c.li / 1E4).toFixed(2)), Number((c.Ki / 1E4).toFixed(2)))
    };

    function l8(a) {
        soy.asserts.assertType(null == a.attributes || a.attributes instanceof soydata.SanitizedHtmlAttribute || a.attributes instanceof soydata.UnsanitizedText || goog.isString(a.attributes), "attributes", a.attributes, "?soydata.SanitizedHtmlAttribute|string|undefined");
        var b = a.attributes;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var c = a.J;
        soy.asserts.assertType(null == a.description || a.description instanceof goog.soy.data.SanitizedContent || a.description instanceof soydata.SanitizedHtml || a.description instanceof soydata.UnsanitizedText || goog.isString(a.description), "description", a.description, "?soydata.SanitizedHtml|string|undefined");
        var d = a.description;
        soy.asserts.assertType(a.label instanceof goog.soy.data.SanitizedContent || a.label instanceof soydata.SanitizedHtml || a.label instanceof soydata.UnsanitizedText || goog.isString(a.label), "label", a.label, "!soydata.SanitizedHtml|string");
        var e = a.label;
        soy.asserts.assertType(null == a.selected || goog.isBoolean(a.selected) || 1 === a.selected || 0 === a.selected, "selected", a.selected, "boolean|null|undefined");
        var g = a.selected;
        soy.asserts.assertType(goog.isString(a.value) || a.value instanceof goog.soy.data.SanitizedContent, "value", a.value, "string|goog.soy.data.SanitizedContent");
        a = a.value;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"listbox__option orderSummaryOption' + (c ? " " + soy.$$escapeHtmlAttribute(c) : "") + (g ? " listbox__option--selected" : "") + '"' + (b ? " " + soy.$$filterHtmlAttributes(b) : "") + ' data-value\x3d"' + soy.$$escapeHtmlAttribute(a) + '"\x3e\x3cdiv class\x3d"orderSummaryOption__content"\x3e\x3cdiv class\x3d"orderSummaryOption__label"\x3e' + soy.$$escapeHtml(e) + "\x3c/div\x3e" + (d ? '\x3cdiv class\x3d"orderSummaryOption__description"\x3e' + soy.$$escapeHtml(d) + "\x3c/div\x3e" : "") + "\x3c/div\x3e\x3c/div\x3e")
    };

    function m8(a) {
        SR.apply(this, arguments)
    }
    t(m8, SR);

    function n8(a) {
        return new m8(a)
    }
    m8.prototype.uj = function () {
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(this.$el.find(".paperSizeOption__label").prop("outerHTML"))
    };

    function o8(a) {
        SR.apply(this, arguments)
    }
    t(o8, SR);

    function p8(a) {
        var b = $;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var c = a.J;
        soy.asserts.assertType(a.Wr instanceof goog.soy.data.SanitizedContent || a.Wr instanceof soydata.SanitizedHtml || a.Wr instanceof soydata.UnsanitizedText || goog.isString(a.Wr), "pageCountDescription", a.Wr, "!soydata.SanitizedHtml|string");
        var d = a.Wr;
        soy.asserts.assertType(goog.isString(a.lA) || a.lA instanceof goog.soy.data.SanitizedContent, "pageCountLabel", a.lA, "string|goog.soy.data.SanitizedContent");
        var e = a.lA;
        soy.asserts.assertType(null == a.selected || goog.isBoolean(a.selected) || 1 === a.selected || 0 === a.selected, "selected", a.selected, "boolean|null|undefined");
        var g = a.selected;
        soy.asserts.assertType(goog.isString(a.value) || a.value instanceof goog.soy.data.SanitizedContent, "value", a.value, "string|goog.soy.data.SanitizedContent");
        a = soydata.VERY_UNSAFE.ordainSanitizedHtml(l8({
            label: e,
            value: a.value,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-page-count-label\x3d"' + soy.$$escapeHtmlAttribute(e) + '"'),
            J: c,
            description: d,
            selected: g
        }));
        b = b(a.toString());
        return q8(b)
    }

    function q8(a) {
        return new o8(a)
    }
    o8.prototype.uj = function () {
        return this.$el.attr("data-page-count-label").toString()
    };

    function r8(a) {
        SR.apply(this, arguments)
    }
    t(r8, SR);

    function s8(a) {
        var b = $,
            c;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        c = a.J;
        soy.asserts.assertType(null == a.ab || a.ab instanceof goog.soy.data.SanitizedContent || goog.isString(a.ab), "discount", a.ab, "null|string|undefined");
        var d = a.ab;
        soy.asserts.assertType(goog.isString(a.fv) || a.fv instanceof goog.soy.data.SanitizedContent, "numberOfCopies", a.fv, "string|goog.soy.data.SanitizedContent");
        var e = a.fv;
        soy.asserts.assertType(goog.isString(a.Za) || a.Za instanceof goog.soy.data.SanitizedContent, "price", a.Za, "string|goog.soy.data.SanitizedContent");
        var g = a.Za;
        soy.asserts.assertType(null == a.selected || goog.isBoolean(a.selected) || 1 === a.selected || 0 === a.selected, "selected", a.selected, "boolean|null|undefined");
        var h = a.selected;
        soy.asserts.assertType(goog.isString(a.value) || a.value instanceof goog.soy.data.SanitizedContent, "value", a.value, "string|goog.soy.data.SanitizedContent");
        a = a.value;
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml(l8({
            label: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cdiv class\x3d"orderQuantityOption__label"\x3e\x3cspan class\x3d"orderQuantityOption__copies"\x3e' + soy.$$escapeHtml(a) + '\x3c/span\x3e\x3cspan class\x3d"orderQuantityOption__price"\x3e' + soy.$$escapeHtml(g) + "\x3c/span\x3e\x3c/div\x3e"),
            value: a,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-copies\x3d"' + soy.$$escapeHtmlAttribute(e) + '" data-price\x3d"' + soy.$$escapeHtmlAttribute(g) + '"'),
            J: c + " orderQuantityOption",
            description: d,
            selected: h
        }));
        b = b(c.toString());
        return t8(b)
    }

    function t8(a) {
        return new r8(a)
    }
    r8.prototype.uj = function () {
        var a = this.$el.attr("data-copies").toString(),
            b = this.$el.attr("data-price").toString();
        soy.asserts.assertType(goog.isString(a) || a instanceof goog.soy.data.SanitizedContent, "copies", a, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(null == b || b instanceof goog.soy.data.SanitizedContent || goog.isString(b), "price", b, "null|string|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"orderQuantitySelectionLabel"\x3e\x3cspan class\x3d"orderQuantitySelectionLabel__copies"\x3e' + soy.$$escapeHtml(a) + "\x3c/span\x3e" + (b ? '\x3cspan class\x3d"orderQuantitySelectionLabel__price"\x3e' + soy.$$escapeHtml(b) + "\x3c/span\x3e" : "") + "\x3c/div\x3e")
    };

    function u8(a) {
        SR.apply(this, arguments)
    }
    t(u8, SR);

    function v8(a) {
        return new u8(a)
    }
    u8.prototype.uj = function () {
        return this.$el.attr("data-type-of-paper").toString()
    };

    function w8(a) {
        SR.apply(this, arguments)
    }
    t(w8, SR);

    function x8(a) {
        return new w8(a)
    }
    w8.prototype.uj = function () {
        return this.$el.attr("data-type-of-finish").toString()
    };

    function y8(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".licensesMore", function () {
            return b.trigger(z8)
        });
        a.on("change", ".mediaLicenses__licenseSelect", function () {
            return b.trigger(A8)
        })
    }
    t(y8, L);
    y8.prototype.SO = function (a) {
        var b = $(".licensesMore");
        a.ci(b)
    };
    var z8 = "CLICK_LICENSES_MORE",
        A8 = "LICENSE_SELECT";

    function B8(a) {
        soy.asserts.assertType(goog.isBoolean(a.ee) || 1 === a.ee || 0 === a.ee, "showOneTimeUse", a.ee, "boolean");
        soy.asserts.assertType(goog.isString(a.wd) || a.wd instanceof goog.soy.data.SanitizedContent, "oneTimeUse", a.wd, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Vc) || a.Vc instanceof goog.soy.data.SanitizedContent, "oneTimeUseDescription", a.Vc, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.fe) || 1 === a.fe || 0 === a.fe, "showRoyaltyFree", a.fe, "boolean");
        soy.asserts.assertType(goog.isString(a.Pc) || a.Pc instanceof goog.soy.data.SanitizedContent, "royaltyFree", a.Pc, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Xc) || a.Xc instanceof goog.soy.data.SanitizedContent, "royaltyFreeDescription", a.Xc, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isBoolean(a.Eg) || 1 === a.Eg || 0 === a.Eg, "showExtended", a.Eg, "boolean");
        soy.asserts.assertType(goog.isString(a.Fd) || a.Fd instanceof goog.soy.data.SanitizedContent, "extended", a.Fd, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Ud) || a.Ud instanceof goog.soy.data.SanitizedContent, "extendedDescription", a.Ud, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Xd) || a.Xd instanceof goog.soy.data.SanitizedContent, "noLicenseOptionDescription", a.Xd, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(a.qj instanceof soydata.SanitizedHtml || a.qj instanceof soydata.UnsanitizedText || goog.isString(a.qj), "fullInformationHtml", a.qj, "soydata.SanitizedHtml");
        var b = a.qj,
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml(I0(a) + '\x3cp class\x3d"licensesDetails__fullInformation outro"\x3e' + soy.$$escapeHtml(b) + "\x3c/p\x3e"),
            b = $(b.toString());
        dy.call(this, {
            className: "licensesPopOver",
            content: b,
            Qe: a.confirm,
            position: gp
        })
    }
    t(B8, dy);

    function C8(a, b) {
        var c = this;
        this.view = b;
        this.Kb = a.Kb;
        this.Ja = a.Ja;
        this.Ya = a.Ya;
        this.Bb = new Map([].concat(la(new Map([
            ["a", "a"],
            ["b", "b"]
        ]))));
        this.view.on(z8, function () {
            return c.xM()
        });
        this.view.on(A8, function () {
            throw Error("License selection not yet implemented.");
        })
    }

    function Zca(a) {
        return {
            Jz: Pe(a.Ja),
            Vh: a.Kb.map(function (b) {
                return $ca({
                    media: b,
                    Ja: a.Ja,
                    Ya: a.Ya,
                    Bb: a.Bb
                })
            })
        }
    }
    C8.prototype.xM = function () {
        function a(a) {
            return c.Kb.some(function (c) {
                return b(c, a)
            })
        }

        function b(a, b) {
            return a.xv.some(function (a) {
                return a.type == b
            })
        }
        var c = this,
            d = {
                confirm: Re(this.Ja),
                ee: a("ONE_USE"),
                wd: this.Ya.wd(),
                Vc: this.Ya.Vc(),
                fe: a("ROYALTY_FREE"),
                Pc: this.Ya.Pc(),
                Xc: this.Ya.Xc(),
                Eg: a("EXTENDED"),
                Fd: this.Ya.Fd(),
                Ud: this.Ya.Ud(),
                Xd: this.Ya.Xd(),
                qj: Se(this.Ya, ada)
            };
        this.view.SO(new B8(d))
    };

    function $ca(a) {
        var b = 0 < a.media.Kc.length,
            c = b ? a.media.Kc[0].type : null;
        return {
            w5: a.Ja.hs(),
            fg: a.media.fg,
            HL: !/\.png$/.test(a.media.fg),
            title: a.media.hM,
            Pq: a.Ja.Pq(a.media.Ng),
            XF: c ? D8(c, a.Ya) : null,
            oy: b ? bda(a.media.Kc[0].lM, a.Ja) : null,
            gs: b ? null : a.media.xv.map(function (b) {
                var c = a.Ja,
                    g = a.Ya,
                    h = a.Bb.get(a.media.ua),
                    c = c.il(b.Za),
                    g = b.type ? D8(b.type, g) : null;
                return {
                    selected: b.type === h,
                    text: g + " - " + c,
                    value: b.type
                }
            })
        }
    }

    function D8(a, b) {
        switch (a) {
            case "ONE_USE":
                return b.wd();
            case "ROYALTY_FREE":
                return b.Pc();
            case "EXTENDED":
                return b.Fd();
            default:
                throw Error("Unknown LicenseType '" + a + "'.");
        }
    }

    function bda(a, b) {
        if (null == a || Infinity === a)
            return null;
        var c = moment.duration(a, "minutes");
        a = Math.floor(c.asHours());
        c = c.minutes();
        return a ? b.format("paymentPageLicenseRemainingHours", a) : Qe(b, c)
    }
    C8.prototype.destroy = function () {
        this.view.remove()
    };
    var ada = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3ca href\x3d"https://about.canva.com/license-agreements/" target\x3d"_blank"\x3eabout.canva.com/license-agreements\x3c/a\x3e');

    function cda(a, b) {
        var c = this;
        this.Mb = a;
        this.zU = b;
        this.Mb.once("remove", function () {
            return c.zU.destroy()
        })
    }

    function dda(a) {
        return Xo(a.Mb).then(function () {
            return a.zU.Bb
        })
    };

    function E8(a, b) {
        var c = this;
        this.view = b;
        this.sa = a.sa || null;
        this.ma = a.ma;
        this.ab = a.ab;
        this.vc = a.vc;
        this.Yg = a.Yg;
        this.Bb = a.Bb;
        this.Kb = a.Kb;
        this.Ea = a.Ea;
        this.Zd = a.Zd;
        this.wO = a.wO;
        this.kV = [];
        this.wF = null;
        this.view.on(F8, function () {
            return eda(c)
        });
        this.view.on(G8, function () {
            c.Hv();
            null != c.wF && c.wF()
        })
    }

    function fda(a) {
        var b = H8(a),
            c = 0 < b.Pn ? a.Ea.Za(b.Pn) : a.Ea.format("printOrderSummaryPriceFree");
        return {
            lj: a.Ea.lj(b.lj),
            fD: lf(a.Ea, b.fm),
            uv: a.Ea.uv(),
            fG: a.Ea.Za(b.lF),
            Gv: a.Ea.Gv(),
            Pn: c,
            hw: a.Ea.hw(),
            Us: a.Ea.Us(),
            Ml: a.Ea.Za(b.Ml)
        }
    }

    function gda(a, b) {
        return a.reduce(function (a, d) {
            return a + (0 < d.Kc.length ? 0 : I8(d, b).Za)
        }, 0)
    }

    function I8(a, b) {
        var c = b.get(a.ua) || "ONE_USE";
        b = a.xv.find(function (a) {
            return a.type === c
        });
        return w(b || a.xv[0], 'No pricing options found for media "{}"', a.ua)
    }

    function hda(a, b) {
        return new E8(a, b)
    }
    E8.prototype.destroy = function () {
        this.view.remove()
    };

    function ida(a, b) {
        a = a.Kb.filter(function (a) {
                return 0 === a.Kc.length
            }
            .bind(a)).map(function (a) {
                var b = I8(a, this.Bb);
                return new Oh({
                    vp: new Hh({
                        media: a.ua,
                        version: a.va,
                        document: this.vc().id,
                        Hj: b.type
                    })
                })
            }
            .bind(a));
        return [].concat([new Oh({
            BN: new Kh({
                order: b
            })
        }), new Oh({
            DN: new Mh({
                order: b
            })
        })], la(a))
    }

    function J8(a, b) {
        function c(a, e) {
            var g = this,
                h = this.vc();
            return Ni(this.ma, new li({
                mode: "DESIGN",
                xe: new ki({
                    document: h.id,
                    lc: h.version,
                    ia: b,
                    Hf: "MEDIA"
                }),
                na: a,
                limit: 50
            })).then(function (a) {
                if (!a.na)
                    return a.nG;
                var b = Math.min(2 * e, 1E3);
                return P.delay(e).then(function () {
                    return c.call(g, a.na, b)
                }).then(function (b) {
                    return [].concat(la(a.nG), la(b))
                })
            })
        }
        return c.call(a, null, 50).then(function (a) {
            return a.map(function (a) {
                return a.media
            })
        })
    }
    E8.prototype.su = function () {
        return this.Kb
    };

    function jda(a, b, c) {
        a.kV = b;
        a.Zd = c;
        kda(a.view);
        return a.Yg().then(function () {
            return J8(a, b)
        }).then(function (b) {
            a.Kb = b;
            K8(a, H8({
                sa: a.sa,
                ab: a.ab,
                Bb: a.Bb,
                Kb: a.Kb,
                Zd: a.Zd
            }))
        })
    }
    E8.prototype.IC = function (a) {
        return H8({
            sa: this.sa,
            Bb: this.Bb,
            Kb: this.Kb,
            Zd: a
        }).Ml
    };

    function H8(a) {
        var b = a.Zd.CN + a.Zd.jG,
            c = a.sa && a.sa.Xu || 0,
            d = gda(a.Kb, a.Bb),
            e = Math.min(d, c),
            g = a.ab ? lda({
                ab: a.ab,
                Zd: a.Zd
            }) : 0;
        return {
            fm: c,
            lj: e,
            lF: d,
            Ml: Number((d - e + b - g).toFixed(2)),
            sD: a.ab ? {
                OY: g,
                ab: a.ab
            } : null,
            Pn: a.Zd.jG
        }
    }

    function lda(a) {
        var b = [].concat(la(new Set(a.ab.sC))).reduce(function (b, c) {
            switch (c) {
                case "PRINT_PRODUCT":
                    return b + a.Zd.CN;
                case "PRINT_SHIPPING":
                    return b + a.Zd.jG;
                default:
                    throw Error("Cannot process discount of type '" + c + "'");
            }
        }, 0);
        switch (a.ab.type) {
            case "AMOUNT":
                var c = w(a.ab.po, "AMOUNT discount must have an amount.");
                return Math.min(b, c.value);
            case "PERCENTAGE":
                return c = w(a.ab.mh, "PERCENTAGE discount must have a percentage.") / 100,
                    Number(Math.min(b, c * b).toFixed(2));
            default:
                throw Error("Unknown discount type '" + a.ab.type + "'.");
        }
    }

    function K8(a, b) {
        var c = a.Ea.lj(b.lj);
        a.view.$el.find(".printOrderSummary__creditUsed").empty().append(c);
        c = lf(a.Ea, b.fm);
        a.view.$el.find(".printOrderSummary__creditUsedLabel").empty().append(c);
        var c = a.view,
            d = a.Ea.Za(b.lF);
        0 !== b.lF ? c.$el.find(".printOrderSummary__premiumImagesLink").show() : c.$el.find(".printOrderSummary__premiumImagesLink").hide();
        c.$el.find(".printOrderSummary__premiumImagesTotalPrice").empty().append(d);
        c = a.Ea.Za(b.Ml);
        a.view.$el.find(".printOrderSummary__orderTotalPrice").empty().append(c);
        c = 0 < b.Pn ? a.Ea.Za(b.Pn) : a.Ea.format("printOrderSummaryPriceFree");
        a.view.$el.find(".printOrderSummary__shippingPrice").empty().append(c);
        c = !!b.sD;
        a.view.$el.find(".printOrderSummary__couponDiscountInfo").toggleClass("printOrderSummary__info--hidden", !c);
        if (b.sD) {
            c = a.view;
            a: {
                var e = b.sD.ab,
                    d = a.Ea,
                    g = e.Pg,
                    h = new Set(e.sC),
                    h = 1 === h.size && h.has("PRINT_SHIPPING") ? d.format("printOrderSummaryDiscountShipping") : 1 === h.size && h.has("PRINT_PRODUCT") ? d.format("printOrderSummaryDiscountPrints") : d.format("printOrderSummaryDiscountOrder");
                switch (e.type) {
                    case "PERCENTAGE":
                        e = w(e.mh, "PERCENTAGE discount must have a percentage.");
                        d = d.format("printOrderSummaryPercentageCouponDiscountLabel", g, e, h);
                        break a;
                    case "AMOUNT":
                        e = w(e.po, "AMOUNT discount must have an amount.");
                        d = d.format("printOrderSummaryAmountCouponDiscountLabel", g, e.value, h);
                        break a;
                    default:
                        throw Error("Unknown discount type " + e.type + ".");
                }
            }
            c.$el.find(".printOrderSummary__couponDiscountLabel").empty().append(d);
            c = a.Ea.Za(b.sD.OY);
            a.view.$el.find(".printOrderSummary__couponDiscountAmount").empty().append(c)
        }
        c = a.view;
        0 < b.lF ? c.slideDown(c.$el.find(".printOrderSummary__premiumImagesInfo")) : c.slideUp(c.$el.find(".printOrderSummary__premiumImagesInfo"));
        a = a.view;
        b.lj ? a.slideDown(a.$el.find(".printOrderSummary__creditInfo")) : a.slideUp(a.$el.find(".printOrderSummary__creditInfo"))
    }

    function eda(a) {
        L8(a.view, !0);
        J8(a, a.kV).then(function (b) {
            a.wO({
                Kb: b,
                Bb: new Map
            })
        }).finally(function () {
            return L8(a.view, !1)
        })
    }
    E8.prototype.Hv = function () {
        this.ab = null;
        K8(this, H8({
            sa: this.sa,
            ab: this.ab,
            Bb: this.Bb,
            Kb: this.Kb,
            Zd: this.Zd
        }))
    };

    function mda(a, b) {
        Ba(!a.wF, "onDiscountRemoved: listener already registered");
        a.wF = b
    };

    function M8(a) {
        var b = this;
        L.call(this, a);
        this.$el.on("click", ".printOrderSummary__premiumImagesLink", function (a) {
            a.preventDefault();
            $(a.currentTarget).hasClass("printOrderSummary__premiumImagesLink--loading") || b.trigger(F8)
        });
        this.$el.on("click", ".printOrderSummary__removeCouponLink", function (a) {
            a.preventDefault();
            b.trigger(G8)
        })
    }
    t(M8, L);

    function L8(a, b) {
        a.$el.find(".printOrderSummary__premiumImagesLink").toggleClass("printOrderSummary__premiumImagesLink--loading", b)
    }
    M8.prototype.slideDown = function (a) {
        a.hasClass("printOrderSummary__info--hidden") && (a.css("display", "none"),
            a.removeClass("printOrderSummary__info--hidden"),
            a.slideDown())
    };
    M8.prototype.slideUp = function (a) {
        a.slideUp(function () {
            a.addClass("printOrderSummary__info--hidden");
            a.css("display", "")
        })
    };

    function kda(a) {
        var b = $(soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cimage src\x3d"https://static.canva.com/static/images/loading_spinner_dark.png" /\x3e').toString());
        a.$el.find(".printOrderSummary__premiumImagesTotalPrice").empty().append(b)
    }
    var F8 = "CLICK_PREMIUM_IMAGES_LINK",
        G8 = "REMOVE_COUPON";

    function nda(a) {
        soy.asserts.assertType(goog.isString(a.pd) || a.pd instanceof goog.soy.data.SanitizedContent, "buttonText", a.pd, "string|goog.soy.data.SanitizedContent");
        var b = a.pd;
        soy.asserts.assertType(goog.isString(a.gl) || a.gl instanceof goog.soy.data.SanitizedContent, "inputPlaceholder", a.gl, "string|goog.soy.data.SanitizedContent");
        var c = a.gl;
        soy.asserts.assertType(null == a.Lg || a.Lg instanceof goog.soy.data.SanitizedContent || goog.isString(a.Lg), "buttonClasses", a.Lg, "null|string|undefined");
        var d = a.Lg;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var e = a.J;
        soy.asserts.assertType(null == a.disabled || goog.isBoolean(a.disabled) || 1 === a.disabled || 0 === a.disabled, "disabled", a.disabled, "boolean|null|undefined");
        var g = a.disabled;
        soy.asserts.assertType(null == a.pz || a.pz instanceof goog.soy.data.SanitizedContent || goog.isString(a.pz), "inputClasses", a.pz, "null|string|undefined");
        var h = a.pz;
        soy.asserts.assertType(null == a.SE || a.SE instanceof goog.soy.data.SanitizedContent || goog.isString(a.SE), "inputValue", a.SE, "null|string|undefined");
        a = a.SE;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"inputWithButton' + (e ? " " + soy.$$escapeHtmlAttribute(e) : "") + '"\x3e' + u0({
            J: "inputWithButton__input " + h,
            disabled: g,
            placeholder: c,
            value: a
        }) + bZ({
            J: "inputWithButton__button buttonSecondary " + d,
            disabled: g,
            text: b
        }) + "\x3c/div\x3e")
    };

    function N8(a, b) {
        var c = this;
        L.call(this, a);
        this.Qg = b;
        a.on("click", ".paymentForm__applyCouponButton", function () {
            c.trigger(O8)
        })
    }
    t(N8, L);

    function P8(a, b) {
        f3(a.$el.find(".paymentForm__cardInputContainer")).Yj(b)
    }

    function Q8(a, b) {
        f3(a.$el.find(".paymentForm__couponInputContainer")).Yj(b)
    }

    function R8(a) {
        f3(a.$el.find(".paymentForm__couponInputContainer")).tg()
    }
    N8.prototype.Hy = function () {
        return this.$el.find(".paymentForm__couponCodeInput").val().toString().trim()
    };

    function S8(a, b) {
        a.$el.find(".paymentForm__applyCouponButton").toggleClass("submitting", b)
    }
    var O8 = "APPLY_COUPON";

    function T8(a, b, c) {
        var d = this;
        this.view = b;
        this.Ad = c;
        this.sa = a.sa;
        this.ab = null;
        this.ma = a.ma;
        this.Ia = a.Ia;
        this.ya = a.ya;
        this.ec = a.ec;
        this.np = !1;
        this.Ja = a.Ja;
        this.cg = a.cg;
        mda(this.cg, function () {
            return d.Hv()
        });
        this.view.on(O8, function () {
            return oda(d)
        })
    }
    f = T8.prototype;
    f.destroy = function () {
        this.Ad.remove();
        this.view.remove()
    };
    f.Fl = function (a) {
        this.Ad.Fl(a)
    };
    f.BA = function (a) {
        var b = this;
        return P.resolve().then(function () {
            Da(!b.np, "Cannot pay invoice while processing a payment");
            b.np = !0;
            var c = !1;
            f3(b.view.$el.find(".paymentForm__cardInputContainer")).tg();
            R8(b.view);
            return b.fM().then(function () {
                return b.$C(a)
            }).then(function (a) {
                return pda(b, a.yf)
            }).then(function (a) {
                return b.bG(a)
            }).then(function () {
                c = !0
            }).catch(U8, function () {
                var a = b.Ja.Ua("paymentPageDiscountErrorHtml", "https://support.canva.com/troubleshooting");
                Q8(b.view, a)
            }).catch(yS, function () {
                return b.bz()
            }).catch(nS, function (a) {
                return b.Lm(a)
            }).catch(function () {
                return b.bz()
            }).then(function () {
                return c
            }).finally(function () {
                b.np = !1
            })
        })
    };
    f.$C = function (a) {
        a = new zh({
            Z: this.Ia,
            items: ida(this.cg, a),
            currency: "USD"
        });
        return this.ma.$C(a)
    };

    function pda(a, b) {
        return a.ab ? Si(a.ma, new Ph({
            yf: b,
            ab: a.ab.id
        })).catch(function () {
            throw new U8;
        }).then(function () {
            return b
        }) : P.resolve(b)
    }
    f.bG = function (a) {
        return Si(this.ma, new Ph({
            yf: a,
            action: "PAY_SYNCHRONOUS"
        }))
    };
    f.fM = function () {
        var a = this;
        return P.resolve().then(function () {
            if (V8(a.sa ? a.sa.Gh : null))
                return a.Ad.Ny()
        })
    };

    function V8(a) {
        if (!a)
            return !0;
        var b = new Date,
            c = b.getUTCMonth() + 1,
            b = b.getUTCFullYear();
        return a.Yt < b || a.Yt === b && a.SD < c
    }
    f.bz = function () {
        var a = Oe(this.Ja);
        P8(this.view, a)
    };
    f.Lm = function (a) {
        a = AS(this.ec, a);
        P8(this.view, a)
    };

    function oda(a) {
        function b() {
            var a = new ti({
                Z: this.Ia,
                user: this.ya,
                Pg: this.view.Hy()
            });
            return Qi(this.ma.fa, "/billing/discounts", {
                brand: hb("brand", a.Z),
                user: hb("user", a.user),
                couponCode: hb("couponCode", a.Pg)
            }).catch(Ji).get(0).then(Ja).then(vi).then(function (a) {
                return a.ab
            })
        }
        R8(a.view);
        S8(a.view, !0);
        (function () {
            var a = new wi({
                Z: this.Ia,
                user: this.ya,
                Pg: this.view.Hy(),
                limit: 1
            });
            return Ui(this.ma, a).then(function (a) {
                return a.xJ[0]
            })
        }).call(a).then(function (c) {
            return c || b.call(a)
        }).then(function (b) {
            a.ab = b;
            var d = a.cg;
            d.ab = b;
            K8(d, H8({
                sa: d.sa,
                ab: d.ab,
                Bb: d.Bb,
                Kb: d.Kb,
                Zd: d.Zd
            }));
            a.view.$el.find(".paymentForm__couponCodeInput").val("")
        }).catch(function () {
            var b = a.Ja.format("paymentPageCouponError");
            Q8(a.view, b)
        }).finally(function () {
            return S8(a.view, !1)
        })
    }
    f.Hv = function () {
        this.ab = null
    };

    function U8() {}
    t(U8, Error);

    function qda(a) {
        switch (a) {
            case "POSTER":
                return [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
            case "BUSINESS_CARD":
                return [50, 100, 150, 200, 250, 500, 1E3, 1500, 2E3, 2500];
            case "POSTCARD":
            case "LETTERHEAD":
            case "FLYER":
            case "INVITATION":
                return [25, 50, 100, 150, 200, 250, 500, 750, 1E3];
            default:
                throw Error("Expected PrintProductType, found " + a);
        }
    };

    function S_(a) {
        fc.apply(this, arguments)
    }
    t(S_, fc);

    function W8(a) {
        return a.$el.find(".page--printMarkingsEnabled").toArray().map(function (a) {
            return new X8($(a))
        })
    }
    S_.prototype.Bs = function (a) {
        W8(this).forEach(function (b) {
            return b.Bs(a)
        })
    };
    S_.prototype.fB = function (a) {
        W8(this).forEach(function (b) {
            return b.fB(a)
        })
    };

    function X8(a) {
        fc.apply(this, arguments)
    }
    t(X8, fc);
    X8.prototype.Bs = function (a) {
        this.$el.find(".page__bleedAreaLine").toggleClass("page__printLine--highlight", a)
    };
    X8.prototype.fB = function (a) {
        this.$el.find(".page__safeAreaLine").toggleClass("page__printLine--highlight", a)
    };

    function Y8(a) {
        fc.apply(this, arguments)
    }
    t(Y8, fc);

    function Z8(a, b, c) {
        Ba(!$8(a, b), "Cannot add page with name {}. A page with that name already exists.", b);
        b = $(a9({
            name: b
        }).toString());
        b = new b9(b);
        b.Kn(c);
        a.$el.append(b.$el)
    }

    function c9(a, b) {
        return new P(function (c) {
            var d = rda(a),
                e = a.ha(b);
            w(e, "No page with name the name '{}' exists.", b);
            var g = d.F();
            a.oa(g);
            Sk(function () {
                a.Es(!0);
                e.Es(!0);
                d.Es(!0);
                var b = e.F(),
                    b = b === g ? P.resolve() : sda(a, b);
                d.Fs(!1);
                e.Fs(!0);
                b = b.then(function () {
                    d.Es(!1);
                    e.Es(!1);
                    a.Es(!1);
                    a.$el.height("")
                });
                c(b)
            })
        })
    }

    function $8(a, b) {
        return 0 < a.$el.children('[data-page-name\x3d"' + b + '"]').length
    }
    Y8.prototype.ha = function (a) {
        var b = this.$el.children('[data-page-name\x3d"' + a + '"]');
        Ba(2 > b.length, "Must contain at most one page with name '{}', but contains {}", a, b.length);
        return 1 === b.length ? new b9(b) : null
    };
    Y8.prototype.Rb = function () {
        return this.$el.children(".pagesPanel__page").toArray().map(function (a) {
            return new b9($(a))
        })
    };

    function rda(a) {
        a = a.$el.children(".pagesPanel__page--visible");
        Ba(1 === a.length, "There must be exactly one current page, but there are {}", a.length);
        return new b9(a)
    }
    Y8.prototype.oa = function (a) {
        this.$el.height(a)
    };
    Y8.prototype.Es = function (a) {
        this.$el.toggleClass("pagesPanel--swapping", a)
    };

    function sda(a, b) {
        var c = wf(a.$el[0]);
        a.oa(b);
        return c
    }

    function b9(a) {
        fc.apply(this, arguments)
    }
    t(b9, fc);
    f = b9.prototype;
    f.getName = function () {
        return this.$el.attr("data-page-name").toString()
    };
    f.Kn = function (a) {
        this.$el.empty();
        this.$el.append(a)
    };
    f.hh = function () {
        return this.$el.hasClass("pagesPanel__page--visible")
    };
    f.Fs = function (a) {
        this.$el.toggleClass("pagesPanel__page--visible", a)
    };
    f.Es = function (a) {
        this.$el.toggleClass("pagesPanel__page--swapping", a)
    };
    f.F = function () {
        return this.$el.outerHeight()
    };

    function d9(a) {
        soy.asserts.assertType(a.ia instanceof soydata.SanitizedHtml || a.ia instanceof soydata.UnsanitizedText || goog.isString(a.ia), "pages", a.ia, "soydata.SanitizedHtml");
        var b = a.ia;
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        var c = a.J;
        soy.asserts.assertType(null == a.Bu || goog.isBoolean(a.Bu) || 1 === a.Bu || 0 === a.Bu, "horizontal", a.Bu, "boolean|null|undefined");
        a = a.Bu;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"pagesPanel' + (c ? " " + soy.$$escapeHtmlAttribute(c) : "") + (a ? " pagesPanel--horizontal" : "") + '"\x3e' + soy.$$escapeHtml(b) + "\x3c/div\x3e")
    }

    function a9(a) {
        soy.asserts.assertType(goog.isString(a.name) || a.name instanceof goog.soy.data.SanitizedContent, "name", a.name, "string|goog.soy.data.SanitizedContent");
        var b = a.name;
        soy.asserts.assertType(null == a.content || a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "?soydata.SanitizedHtml|string|undefined");
        var c = a.content;
        soy.asserts.assertType(null == a.visible || goog.isBoolean(a.visible) || 1 === a.visible || 0 === a.visible, "visible", a.visible, "boolean|null|undefined");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"pagesPanel__page' + (a.visible ? " pagesPanel__page--visible" : "") + '" data-page-name\x3d"' + soy.$$escapeHtmlAttribute(b) + '"\x3e' + (c ? soy.$$escapeHtml(c) : "") + "\x3c/div\x3e")
    };

    function e9(a) {
        fc.apply(this, arguments)
    }
    t(e9, fc);

    function U_() {
        var a = $(".editorSideDrawer");
        return new e9(a)
    }
    e9.prototype.Fs = function (a) {
        if (a === this.hh())
            return P.resolve();
        this.$el.toggleClass("editorSideDrawer--hidden", !a);
        return wf(this.$el[0])
    };
    e9.prototype.Kn = function (a) {
        this.$el.find(".editorSideDrawer__content").empty().append(a)
    };
    e9.prototype.hh = function () {
        return !this.$el.hasClass("editorSideDrawer--hidden")
    };
    e9.prototype.Bq = function (a) {
        return a(this.$el.find(".editorSideDrawer__content"))
    };

    function f9(a, b) {
        a.$el.find(".editorSideDrawer__loadingSpinnerContainer").toggleClass("editorSideDrawer__loadingSpinnerContainer--loading", b)
    };

    function tda(a) {
        var b = goog.asserts.assertObject(a.u, "expected parameter 'messages' of type [addAdditionalAddressFieldButtonText: string, cityLabel: string, contactNumberLabel: string, countryLabel: string, fullNameLabel: string, stateLabel: string, streetAddressLabel: string, zipcodeLabel: string].");
        soy.asserts.assertType(null == a.Td || goog.isObject(a.Td), "address", a.Td, "null|undefined|{city: string, countryCode: string, name: string, phone: string, street1: string, street2: (null|string|undefined), subdivisionCode: (null|string|undefined), zipCode: string}");
        var c = a.Td,
            d = goog.asserts.assertArray(a.b_, "expected parameter 'countryOptions' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");
        soy.asserts.assertType(null == a.YG || goog.isArray(a.YG), "subdivisionOptions", a.YG, "?Array\x3c{disabled: (boolean|null|undefined), selected: (boolean|null|undefined), text: string, value: (null|string|undefined)}\x3e|undefined");
        a = a.YG;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"addressDetails__address addressDetails__shippingAddress"\x3e\x3cdiv class\x3d"addressDetails__inputRow"\x3e' + g3({
            J: "addressDetailsAddress__nameInput",
            label: b.DK,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                value: null == c ? null : c.name
            }))
        }) + g3({
            J: "addressDetailsAddress__phoneInput",
            label: b.SI,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                value: null == c ? null : c.Rj
            }))
        }) + "\x3c/div\x3e" + g3({
            J: "addressDetailsAddress__street1Input",
            label: b.kP,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                value: null == c ? null : c.bk
            }))
        }) + N7({
            J: "addressDetailsAddress__hiddenAddressInput",
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + g3({
                J: "addressDetailsAddress__street2Input",
                input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                    value: null == c ? null : c.Xi
                }))
            }))
        }) + N7({
            J: "addressDetailsAddress__street2ButtonContainer",
            visible: !0,
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + g3({
                input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cbutton class\x3d"button buttonLink addressDetailsAddress__expandAddressButton"\x3e' + xW() + soy.$$escapeHtml(b.aI) + "\x3c/button\x3e")
            }))
        }) + '\x3cdiv class\x3d"addressDetails__inputRow"\x3e' + g3({
            J: "addressDetailsAddress__cityInput",
            label: b.FI,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                value: null == c ? null : c.Sf
            }))
        }) + g3({
            J: "addressDetailsAddress__country",
            label: b.XI,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + aZ({
                options: d,
                disabled: 1 >= d.length
            }))
        }) + '\x3c/div\x3e\x3cdiv class\x3d"addressDetails__inputRow"\x3e' + (a ? g3({
            J: "addressDetailsAddress__subdivision",
            label: b.iP,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + aZ({
                J: "addressDetailsAddress__subdivisionSelect",
                options: a
            }))
        }) : "") + g3({
            J: "addressDetailsAddress__zipCodeInput",
            label: b.lQ,
            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + u0({
                value: null == c ? null : c.bj
            }))
        }) + "\x3c/div\x3e\x3c/div\x3e")
    }

    function g9(a) {
        var b = goog.asserts.assertObject(a.Td, "expected parameter 'address' of type [city: string, countryName: string, name: string, phone: string, street1: string, street2: null|string, subdivisionName: null|string, zipCode: string].");
        soy.asserts.assertType(null == a.J || a.J instanceof goog.soy.data.SanitizedContent || goog.isString(a.J), "classes", a.J, "null|string|undefined");
        a = a.J;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"addressSummary' + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e\x3cdiv class\x3d"addressSummary__column"\x3e\x3cdiv\x3e' + soy.$$escapeHtml(b.name) + "\x3c/div\x3e\x3cdiv\x3e" + soy.$$escapeHtml(b.Rj) + '\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"addressSummary__column"\x3e\x3cdiv\x3e' + soy.$$escapeHtml(b.bk) + "\x3c/div\x3e" + (b.Xi ? "\x3cdiv\x3e" + soy.$$escapeHtml(b.Xi) + "\x3c/div\x3e" : "") + "\x3cdiv\x3e" + soy.$$escapeHtml(b.Sf) + "\x3c/div\x3e" + (b.YW ? "\x3cdiv\x3e" + soy.$$escapeHtml(b.YW) + "\x3c/div\x3e" : "") + "\x3cdiv\x3e" + soy.$$escapeHtml(b.bj) + "\x3c/div\x3e\x3cdiv\x3e" + soy.$$escapeHtml(b.a_) + "\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e")
    };

    function h9(a) {
        var b = this;
        L.call(this, a);
        a.on("click", ".addressDetailsAddress__expandAddressButton", function (a) {
            a = new i9($(a.target).closest(".addressDetails__address"));
            b.trigger(j9, a)
        });
        a.on("change", ".addressDetailsAddress__country select", function (a) {
            a = new i9($(a.target).closest(".addressDetails__address"));
            b.trigger(k9, a.lr())
        })
    }
    t(h9, L);

    function l9(a) {
        return new i9(a.$el.find(".addressDetails__shippingAddress"))
    }
    var j9 = "CLICK_ADD_APARTMENT",
        k9 = "CHANGE_COUNTRY";

    function i9(a) {
        fc.apply(this, arguments)
    }
    t(i9, fc);
    f = i9.prototype;
    f.lu = function () {
        return this.$el.find(".addressDetailsAddress__cityInput .textInput").val().toString().trim()
    };
    f.getName = function () {
        return this.$el.find(".addressDetailsAddress__nameInput .textInput").val().toString().trim()
    };
    f.UK = function () {
        return this.$el.find(".addressDetailsAddress__phoneInput .textInput").val().toString().trim()
    };
    f.VK = function () {
        return this.$el.find(".addressDetailsAddress__street1Input .textInput").val().toString().trim()
    };
    f.WK = function () {
        return this.$el.find(".addressDetailsAddress__street2Input .textInput").val().toString().trim()
    };

    function m9(a) {
        a = a.$el.find(".addressDetailsAddress__subdivision select");
        return a.find("option").filter(":selected").is("[value]") ? a.val().toString() : null
    }
    f.YK = function () {
        return this.$el.find(".addressDetailsAddress__zipCodeInput .textInput").val().toString().trim()
    };
    f.lr = function () {
        return this.$el.find(".addressDetailsAddress__country select").val()
    };

    function n9(a, b) {
        var c = this;
        this.view = b;
        this.Ia = a.Ia;
        this.Uf = a.Uf;
        this.Gi = a.Gi;
        this.zj = a.zj;
        this.ql = a.ql;
        this.Qv = a.Qv;
        this.ya = a.ya;
        this.Wa = a.Wa;
        this.I7 = uda(this, {
            Uf: a.Uf,
            zj: a.zj,
            ql: a.ql
        });
        this.view.on(j9, function (a) {
            a.$el.find(".addressDetailsAddress__hiddenAddressInput").addClass("settingContainer__hiddenInputs--visible");
            a.$el.find(".addressDetailsAddress__street2ButtonContainer").removeClass("settingContainer__hiddenInputs--visible")
        });
        this.view.on(k9, function (a) {
            if (!c.zj) {
                var b = W7({
                    Sc: a,
                    nh: c.Qv
                });
                a = c.view;
                b = $(aZ({
                    options: b,
                    J: "addressDetailsAddress__subdivisionSelect"
                }).toString());
                a.$el.find(".addressDetailsAddress__subdivisionSelect").replaceWith(b)
            }
        })
    }

    function vda(a) {
        var b = null != a.tc ? Xv("countryCode", a.tc.Sc) : null,
            c = b && a.Fh.has(b) ? {
                Sf: a.tc.Sf,
                Sc: a.tc.Sc,
                name: a.tc.name,
                Rj: a.tc.Rj,
                bk: a.tc.bk,
                Xi: a.tc.Xi,
                R6: a.tc.Ms,
                bj: a.tc.bj
            } : null,
            d = b && a.Fh.has(b) ? b : Array.from(a.Fh)[0],
            b = yca({
                Fh: a.Fh,
                k6: d
            }),
            e;
        a.zj || (e = W7({
            Sc: d,
            nh: a.nd.Qv(),
            GG: c && c.R6
        }));
        var g = {
                MY: {
                    aI: a.nd.aI(),
                    FI: a.nd.FI(),
                    SI: a.nd.SI(),
                    XI: a.nd.XI(),
                    DK: a.nd.DK(),
                    iP: a.nd.iP(),
                    kP: a.nd.kP(),
                    lQ: a.Fh.has("US") ? a.nd.lQ() : a.nd.format("addressDetailsPostcodeLabel")
                },
                LY: a.nd.heading(),
                nO: a.nd.nO(),
                gw: a.Oc.gw()
            },
            d = a.Fe.Wb(4, 5),
            h = e;
        e = $;
        g = goog.asserts.assertObject(g, "expected parameter 'messages' of type [addressDetailsHeading: string, addressMessages: [addAdditionalAddressFieldButtonText: string, cityLabel: string, contactNumberLabel: string, countryLabel: string, fullNameLabel: string, stateLabel: string, streetAddressLabel: string, zipcodeLabel: string], saveAddressLabel: string, shippingAddressHeading: string].");
        soy.asserts.assertType(null == c || goog.isObject(c), "shippingAddress", c, "null|undefined|{city: string, countryCode: string, name: string, phone: string, street1: string, street2: (null|string|undefined), subdivisionCode: (null|string|undefined), zipCode: string}");
        soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "pageNumberOfTotal", d, "string|goog.soy.data.SanitizedContent");
        b = goog.asserts.assertArray(b, "expected parameter 'countryOptions' of type list\x3c[disabled: bool|null, selected: bool|null, text: string, value: null|string]\x3e.");
        soy.asserts.assertType(null == h || goog.isArray(h), "subdivisionOptions", h, "?Array\x3c{disabled: (boolean|null|undefined), selected: (boolean|null|undefined), text: string, value: (null|string|undefined)}\x3e|undefined");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"addressDetails"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e\x3cspan class\x3d"printFlowStepNumberBadge"\x3e' + soy.$$escapeHtml(d) + '\x3c/span\x3e\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(g.LY) + "\x3c/h1\x3e\x3c/div\x3e" + K7({
            heading: g.gw,
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + L7({
                fb: !0,
                content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + tda({
                    u: g.MY,
                    Td: c,
                    b_: b,
                    YG: h
                }) + g3({
                    input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3clabel\x3e\x3cinput type\x3d"checkbox" class\x3d"addressDetails__saveAddressCheckbox"/\x3e' + soy.$$escapeHtml(g.nO) + "\x3clabel\x3e")
                }))
            }))
        }) + "\x3c/div\x3e");
        c = e(c.toString());
        c = new h9(c);
        a = {
            Ia: a.Ia,
            Uf: a.Uf,
            Gi: a.Gi,
            zj: a.zj,
            ql: a.ql,
            Wa: a.Wa,
            Qv: a.nd.Qv(),
            ya: a.ya
        };
        return {
            bc: new n9(a, c),
            view: c
        }
    }

    function uda(a, b) {
        var c = {
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__subdivision"))
            },
            Vo: function () {
                return m9(l9(a.view))
            },
            vq: [b.Uf]
        };
        return [].concat([{
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__cityInput"))
            },
            Vo: function () {
                return l9(a.view).lu()
            },
            vq: [b.Uf]
        }, {
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__nameInput"))
            },
            Vo: function () {
                return l9(a.view).getName()
            },
            vq: [b.Uf]
        }, {
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__phoneInput"))
            },
            Vo: function () {
                return l9(a.view).UK()
            },
            vq: [b.Uf]
        }, {
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__street1Input"))
            },
            Vo: function () {
                return l9(a.view).VK()
            },
            vq: [b.Uf, b.ql]
        }, {
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__street2Input"))
            },
            Vo: function () {
                return l9(a.view).WK()
            },
            vq: [b.ql]
        }], la(b.zj ? [] : [c]), [{
            Uo: function () {
                return f3(l9(a.view).$el.find(".addressDetailsAddress__zipCodeInput"))
            },
            Vo: function () {
                return l9(a.view).YK()
            },
            vq: [b.Uf]
        }])
    }
    n9.prototype.vu = function () {
        var a = l9(this.view),
            b;
        this.zj || (b = w(m9(a), "subdivision must be present"));
        return new j7({
            Sf: a.lu(),
            Sc: a.lr(),
            name: a.getName(),
            Rj: a.UK(),
            bk: a.VK(),
            Xi: a.WK(),
            Ms: b,
            bj: a.YK()
        })
    };

    function wda(a) {
        if (!a.view.$el.find(".addressDetails__saveAddressCheckbox")[0].checked)
            return P.resolve();
        var b = new w7({
            Z: a.Ia,
            user: a.ya,
            Td: a.vu()
        });
        a = a.Wa;
        return Qi(a.fa, a.path + "/addresses/" + b.Z, {
            id: ib("id", b.id),
            brand: ib("brand", b.Z),
            user: ib("user", b.user),
            address: cb.required("address", k7(b.Td))
        }).catch(Ji).get(0).then(Ja).then(gca)
    }
    n9.prototype.destroy = function () {
        this.view.remove()
    };

    function o9(a) {
        soy.asserts.assertType(a.Xq instanceof goog.soy.data.SanitizedContent || a.Xq instanceof soydata.SanitizedHtml || a.Xq instanceof soydata.UnsanitizedText || goog.isString(a.Xq), "desc", a.Xq, "!soydata.SanitizedHtml|string");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3clabel class\x3d"designProofReview__checkboxLabel"\x3e\x3cinput type\x3d"checkbox" class\x3d"designProofReview__checkbox" /\x3e\x3cspan class\x3d"designProofReview__checkboxDescription"\x3e' + soy.$$escapeHtml(a.Xq) + "\x3c/span\x3e\x3c/label\x3e")
    };

    function p9(a) {
        var b = this;
        L.call(this, a);
        this.$el.on("change", ".designProofReview__checkbox", function () {
            b.trigger(q9)
        });
        this.$el.on("click", ".designProofReview__checkoutButton", function () {
            b.trigger(r9)
        });
        this.$el.on("click", ".designProofReview__supportLink", function () {
            b.trigger(s9)
        })
    }
    t(p9, L);

    function xda(a) {
        var b = $(E7({
                J: "designProofReview__progressbar",
                progress: 0,
                AA: J7
            }).toString()),
            b = G7(b);
        a.$el.find(".designProofReview__progressbarContainer").prepend(b.$el)
    }
    p9.prototype.AP = function (a) {
        var b = this.$el.find(".designProofReview__autoDownloadIframe");
        1 > b.length && (b = $("\x3ciframe /\x3e", {
                "class": "designProofReview__autoDownloadIframe"
            }),
            this.$el.append(b));
        b.attr("src", a)
    };

    function yda(a) {
        return a.$el.find(".designProofReview__checkbox").toArray().map(function (a) {
            return a.checked
        })
    }
    var q9 = "CHANGE_REVIEW_ITEM",
        s9 = "CLICK_SUPPORT_LINK",
        r9 = "CONTINUE_TO_CHECKOUT";

    function t9(a, b) {
        var c = this;
        this.view = b;
        this.H = a.H;
        this.u = a.u;
        this.Wa = a.Wa;
        this.qK = a.qK;
        this.iA = a.iA;
        this.gN = null;
        this.zM = a.zM;
        b.on(q9, function () {
            return zda(c)
        });
        b.on(r9, function () {
            return c.zM()
        });
        b.on(s9, function () {
            c.H.Ga(new Hl("print_review_support"))
        })
    }

    function Ada(a) {
        var b = a.Bi;
        return {
            zt: b.zt(),
            Iq: b.Iq(Bda),
            Et: b.Et(),
            description: b.description(),
            oD: "https://support.canva.com/troubleshooting/downloading/",
            iu: b.iu(),
            heading: b.heading(),
            Wb: a.Fe.Wb(3, 5),
            Pv: b.Pv()
        }
    }

    function Cda(a, b) {
        return new t9(a, b)
    }

    function Dda(a, b) {
        return a.qK.UG(function (a) {
                var d = this;
                return qca(this.Wa, new y7({
                    order: this.iA,
                    Dr: b
                })).then(function (e) {
                    if ("FAILED" === e.status)
                        throw Error("export with jobId '" + b + "' failed for proof of order '" + d.iA + "'");
                    "EXPORTED" === e.status && a(e)
                })
            }
            .bind(a))
    }

    function Eda(a) {
        var b = new x7({
            order: a.iA,
            Fn: "PROOF"
        });
        xda(a.view);
        a.gN = pca(a.Wa, b).cancellable().then(function (b) {
            return Dda(a, b.Dr)
        }).then(function (b) {
            b = b.url;
            var d = a.u.Ua("designProofReviewManualDownloadInfoHtml", b, "designProofReview__manualDownloadLink"),
                e = a.view;
            (new F7(e.$el.find(".designProofReview__progressbar"))).remove();
            e.$el.find(".designProofReview__progressbarContainer").addClass("designProofReview__progressbarContainer--hidden");
            e = a.view;
            e.$el.find(".designProofReview__manualDownload").empty().append(d.getContent()).removeClass("designProofReview__manualDownload--hidden");
            e.$el.find(".designProofReview__manualDownloadLink").attr("download", "download").attr("target", "_blank");
            e.$el.find(".designProofReview__actionButtons").removeClass("designProofReview__actionButtons--hidden");
            e.$el.find(".designProofReview__checklist").removeClass("designProofReview__checklist--hidden");
            a.view.AP(b)
        }).catch(P.CancellationError, $.noop)
    }

    function zda(a) {
        yda(a.view).every(function (a) {
            return a
        }) ? a.view.$el.find(".designProofReview__checkoutButton").prop("disabled", !1) : a.view.$el.find(".designProofReview__checkoutButton").prop("disabled", !0)
    }
    t9.prototype.destroy = function () {
        null != this.gN && this.gN.cancel();
        this.view.remove()
    };
    var Bda = "https://about.canva.com/terms-of-use/";

    function Fda(a) {
        soy.asserts.assertType(goog.isString(a.Wj) || a.Wj instanceof goog.soy.data.SanitizedContent, "selectYourPrintOptions", a.Wj, "string|goog.soy.data.SanitizedContent");
        var b = a.Wj;
        soy.asserts.assertType(a.qn instanceof soydata.SanitizedHtml || a.qn instanceof soydata.UnsanitizedText || goog.isString(a.qn), "paperSizeListboxHtml", a.qn, "soydata.SanitizedHtml");
        var c = a.qn;
        soy.asserts.assertType(null == a.Qj || a.Qj instanceof soydata.SanitizedHtml || a.Qj instanceof soydata.UnsanitizedText || goog.isString(a.Qj), "pageCountListboxHtml", a.Qj, "?soydata.SanitizedHtml|string|undefined");
        var d = a.Qj;
        soy.asserts.assertType(a.rn instanceof soydata.SanitizedHtml || a.rn instanceof soydata.UnsanitizedText || goog.isString(a.rn), "paperTypeListboxHtml", a.rn, "soydata.SanitizedHtml");
        var e = a.rn;
        soy.asserts.assertType(a.pn instanceof soydata.SanitizedHtml || a.pn instanceof soydata.UnsanitizedText || goog.isString(a.pn), "paperFinishListboxHtml", a.pn, "soydata.SanitizedHtml");
        var g = a.pn;
        soy.asserts.assertType(a.ln instanceof soydata.SanitizedHtml || a.ln instanceof soydata.UnsanitizedText || goog.isString(a.ln), "orderQuantityListboxHtml", a.ln, "soydata.SanitizedHtml");
        a = a.ln;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printOrderSummary__selectPrintOptions"\x3e' + soy.$$escapeHtml(b) + "\x3c/div\x3e" + soy.$$escapeHtml(c) + (d ? soy.$$escapeHtml(d) : "") + soy.$$escapeHtml(e) + soy.$$escapeHtml(g) + soy.$$escapeHtml(a))
    };

    function u9(a, b, c) {
        L.call(this, a);
        this.cg = b;
        this.Rh = c.Rh;
        this.Df = c.Df;
        this.lh = c.lh;
        this.Ee = c.Ee;
        this.Cf = c.Cf
    }
    t(u9, L);

    function v9(a) {
        var b = a.heading,
            c = w9(a.v4),
            d = a.hV && w9(a.hV),
            e = w9(a.K4),
            g = w9(a.L4),
            h = w9(a.M4),
            k = a.ds,
            l, m = a.R4,
            n;
        soy.asserts.assertType(null == m.WC || m.WC instanceof goog.soy.data.SanitizedContent || goog.isString(m.WC), "couponDiscountAmount", m.WC, "null|string|undefined");
        l = m.WC;
        soy.asserts.assertType(null == m.XC || m.XC instanceof goog.soy.data.SanitizedContent || goog.isString(m.XC), "couponDiscountLabel", m.XC, "null|string|undefined");
        var p = m.XC;
        soy.asserts.assertType(goog.isString(m.lj) || m.lj instanceof goog.soy.data.SanitizedContent, "creditUsed", m.lj, "string|goog.soy.data.SanitizedContent");
        var r = m.lj;
        soy.asserts.assertType(goog.isString(m.fD) || m.fD instanceof goog.soy.data.SanitizedContent, "creditUsedLabel", m.fD, "string|goog.soy.data.SanitizedContent");
        var u = m.fD;
        soy.asserts.assertType(goog.isString(m.uv) || m.uv instanceof goog.soy.data.SanitizedContent, "premiumImagesPriceLabel", m.uv, "string|goog.soy.data.SanitizedContent");
        var v = m.uv;
        soy.asserts.assertType(goog.isString(m.fG) || m.fG instanceof goog.soy.data.SanitizedContent, "premiumImagesTotalPrice", m.fG, "string|goog.soy.data.SanitizedContent");
        var y = m.fG;
        soy.asserts.assertType(goog.isString(m.Gv) || m.Gv instanceof goog.soy.data.SanitizedContent, "removeCouponText", m.Gv, "string|goog.soy.data.SanitizedContent");
        var q = m.Gv;
        soy.asserts.assertType(goog.isString(m.Pn) || m.Pn instanceof goog.soy.data.SanitizedContent, "shippingPrice", m.Pn, "string|goog.soy.data.SanitizedContent");
        var x = m.Pn;
        soy.asserts.assertType(goog.isString(m.hw) || m.hw instanceof goog.soy.data.SanitizedContent, "shippingPriceLabel", m.hw, "string|goog.soy.data.SanitizedContent");
        var E = m.hw;
        soy.asserts.assertType(m.Us instanceof soydata.SanitizedHtml || m.Us instanceof soydata.UnsanitizedText || goog.isString(m.Us), "totalLabelHtml", m.Us, "soydata.SanitizedHtml");
        var B = m.Us;
        soy.asserts.assertType(goog.isString(m.Ml) || m.Ml instanceof goog.soy.data.SanitizedContent, "totalPrice", m.Ml, "string|goog.soy.data.SanitizedContent");
        m = m.Ml;
        l = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printOrderSummary__paymentSummary"\x3e\x3cdiv class\x3d"printOrderSummary__info"\x3e\x3cspan\x3e' + soy.$$escapeHtml(E) + '\x3c/span\x3e\x3cspan class\x3d"printOrderSummary__shippingPrice"\x3e' + soy.$$escapeHtml(x) + '\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__info printOrderSummary__premiumImagesInfo printOrderSummary__info--hidden"\x3e\x3cspan\x3e' + soy.$$escapeHtml(v) + '\x3c/span\x3e\x3ca class\x3d"printOrderSummary__premiumImagesLink" href\x3d"#"\x3e\x3cimg src\x3d"https://static.canva.com/static/images/icon-info.svg" /\x3e\x3c/a\x3e\x3cspan class\x3d"printOrderSummary__premiumImagesTotalPrice"\x3e' + soy.$$escapeHtml(y) + '\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__info printOrderSummary__creditInfo printOrderSummary__info--hidden"\x3e\x3cspan class\x3d"printOrderSummary__creditUsedLabel"\x3e' + soy.$$escapeHtml(u) + '\x3c/span\x3e\x3cspan class\x3d"printOrderSummary__creditUsed"\x3e' + soy.$$escapeHtml(r) + '\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__info printOrderSummary__couponDiscountInfo' + (p && l ? "" : " printOrderSummary__info--hidden") + '"\x3e\x3cdiv\x3e\x3cspan class\x3d"printOrderSummary__couponDiscountLabel"\x3e' + soy.$$escapeHtml(null == (n = p) ? "" : n) + '\x3c/span\x3e\x3cdiv class\x3d"printOrderSummary__removeCouponLinkContainer"\x3e\x3ca href\x3d"#" class\x3d"printOrderSummary__removeCouponLink"\x3e' + soy.$$escapeHtml(q) + '\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cspan\x3e-\x3cspan class\x3d"printOrderSummary__couponDiscountAmount"\x3e' + soy.$$escapeHtml(null == (n = l) ? "" : n) + '\x3c/span\x3e\x3c/span\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__info"\x3e\x3cspan\x3e' + soy.$$escapeHtml(B) + '\x3c/span\x3e\x3cstrong class\x3d"printOrderSummary__orderTotalPrice"\x3e' + soy.$$escapeHtml(m) + "\x3c/strong\x3e\x3c/div\x3e\x3c/div\x3e");
        a = {
            heading: b,
            ln: c,
            Qj: d,
            pn: e,
            qn: g,
            rn: h,
            ds: k,
            qA: l,
            Wj: a.Wj,
            QF: x9,
            RF: y9
        };
        soy.asserts.assertType(goog.isString(a.heading) || a.heading instanceof goog.soy.data.SanitizedContent, "heading", a.heading, "string|goog.soy.data.SanitizedContent");
        b = a.heading;
        soy.asserts.assertType(a.ln instanceof soydata.SanitizedHtml || a.ln instanceof soydata.UnsanitizedText || goog.isString(a.ln), "orderQuantityListboxHtml", a.ln, "soydata.SanitizedHtml");
        soy.asserts.assertType(null == a.Qj || a.Qj instanceof soydata.SanitizedHtml || a.Qj instanceof soydata.UnsanitizedText || goog.isString(a.Qj), "pageCountListboxHtml", a.Qj, "?soydata.SanitizedHtml|string|undefined");
        soy.asserts.assertType(a.pn instanceof soydata.SanitizedHtml || a.pn instanceof soydata.UnsanitizedText || goog.isString(a.pn), "paperFinishListboxHtml", a.pn, "soydata.SanitizedHtml");
        soy.asserts.assertType(a.qn instanceof soydata.SanitizedHtml || a.qn instanceof soydata.UnsanitizedText || goog.isString(a.qn), "paperSizeListboxHtml", a.qn, "soydata.SanitizedHtml");
        soy.asserts.assertType(a.rn instanceof soydata.SanitizedHtml || a.rn instanceof soydata.UnsanitizedText || goog.isString(a.rn), "paperTypeListboxHtml", a.rn, "soydata.SanitizedHtml");
        soy.asserts.assertType(a.qA instanceof soydata.SanitizedHtml || a.qA instanceof soydata.UnsanitizedText || goog.isString(a.qA), "paymentSummaryHtml", a.qA, "soydata.SanitizedHtml");
        c = a.qA;
        soy.asserts.assertType(a.ds instanceof soydata.SanitizedHtml || a.ds instanceof soydata.UnsanitizedText || goog.isString(a.ds), "productDescriptionHtml", a.ds, "soydata.SanitizedHtml");
        d = a.ds;
        soy.asserts.assertType(goog.isString(a.Wj) || a.Wj instanceof goog.soy.data.SanitizedContent, "selectYourPrintOptions", a.Wj, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.QF) || a.QF instanceof goog.soy.data.SanitizedContent, "orderFormListboxesPanelPageName", a.QF, "string|goog.soy.data.SanitizedContent");
        e = a.QF;
        soy.asserts.assertType(goog.isString(a.RF) || a.RF instanceof goog.soy.data.SanitizedContent, "orderFormReviewPanelPageName", a.RF, "string|goog.soy.data.SanitizedContent");
        g = a.RF;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printOrderSummary"\x3e\x3cdiv class\x3d"printOrderSummary__header"\x3e\x3ch1 class\x3d"printOrderSummary__heading"\x3e' + soy.$$escapeHtml(b) + '\x3c/h1\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__content"\x3e\x3cdiv class\x3d"printOrderSummary__info"\x3e\x3cdiv class\x3d"printOrderSummary__orderPreview"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__productDescription"\x3e' + soy.$$escapeHtml(d) + "\x3c/div\x3e" + d9({
            J: "printOrderSummary__pagesPanel",
            ia: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + a9({
                J: "printOrderSummary__listboxesPagesPanel",
                content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + Fda(a)),
                name: e,
                visible: !0
            }) + a9({
                J: "printOrderSummary__orderFormReviewPanel",
                name: g,
                visible: !1
            }))
        }) + '\x3c/div\x3e\x3cdiv class\x3d"printOrderSummary__footer"\x3e' + soy.$$escapeHtml(c) + "\x3c/div\x3e\x3c/div\x3e")
    }

    function w9(a) {
        return CR({
            J: a.J + " printOrderSummary__listbox",
            disabled: a.disabled,
            options: a.options.map(function (a) {
                return soydata.VERY_UNSAFE.ordainSanitizedHtml(a.$el.prop("outerHTML"))
            }),
            zs: a.zs
        })
    }

    function z9(a) {
        var b = new M8(a.find(".printOrderSummary__paymentSummary")),
            c = IR(a.find(".printOrderSummary__paperSizeListbox"), {
                dj: n8
            }),
            d = IR(a.find(".printOrderSummary__paperFinishListbox"), {
                dj: x8
            }),
            e = IR(a.find(".printOrderSummary__orderQuantityListbox"), {
                dj: t8
            }),
            g = IR(a.find(".printOrderSummary__paperTypeListbox"), {
                dj: v8
            }),
            h = 0 < a.find(".printOrderSummary__pageCountListbox").length ? IR(a.find(".printOrderSummary__pageCountListbox"), {
                dj: q8
            }) : null;
        return new u9(a, b, {
            Rh: c,
            Df: d,
            Ee: e,
            lh: g,
            Cf: h
        })
    }
    u9.prototype.Yf = function () {
        var a = this.$el.find(".printOrderSummary__pagesPanel");
        return new Y8(a)
    };
    u9.prototype.VN = function (a) {
        var b = $,
            c = {
                Lp: a.Lp,
                Mp: a.Mp,
                Np: a.Np,
                Op: a.Op,
                Kp: a.Kp
            },
            c = c || {};
        soy.asserts.assertType(null == c.Op || c.Op instanceof soydata.SanitizedHtml || c.Op instanceof soydata.UnsanitizedText || goog.isString(c.Op), "paperTypeHtml", c.Op, "?soydata.SanitizedHtml|string|undefined");
        a = c.Op;
        soy.asserts.assertType(null == c.Mp || c.Mp instanceof soydata.SanitizedHtml || c.Mp instanceof soydata.UnsanitizedText || goog.isString(c.Mp), "paperFinishHtml", c.Mp, "?soydata.SanitizedHtml|string|undefined");
        var d = c.Mp;
        soy.asserts.assertType(null == c.Np || c.Np instanceof soydata.SanitizedHtml || c.Np instanceof soydata.UnsanitizedText || goog.isString(c.Np), "paperSizeHtml", c.Np, "?soydata.SanitizedHtml|string|undefined");
        var e = c.Np;
        soy.asserts.assertType(null == c.Lp || c.Lp instanceof soydata.SanitizedHtml || c.Lp instanceof soydata.UnsanitizedText || goog.isString(c.Lp), "pageCountHtml", c.Lp, "?soydata.SanitizedHtml|string|undefined");
        var g = c.Lp;
        soy.asserts.assertType(null == c.Kp || c.Kp instanceof soydata.SanitizedHtml || c.Kp instanceof soydata.UnsanitizedText || goog.isString(c.Kp), "orderQuantityHtml", c.Kp, "?soydata.SanitizedHtml|string|undefined");
        c = c.Kp;
        a = soydata.VERY_UNSAFE.ordainSanitizedHtml("\x3cdiv class\x3d'printOrderSummary__orderFormReview'\x3e" + (e ? "\x3cdiv\x3e" + soy.$$escapeHtml(e) + "\x3c/div\x3e" : "") + (a ? "\x3cdiv\x3e" + soy.$$escapeHtml(a) + "\x3c/div\x3e" : "") + (d ? "\x3cdiv\x3e" + soy.$$escapeHtml(d) + "\x3c/div\x3e" : "") + (g ? "\x3cdiv\x3e" + soy.$$escapeHtml(g) + "\x3c/div\x3e" : "") + (c ? "\x3cdiv\x3e" + soy.$$escapeHtml(c) + "\x3c/div\x3e" : "") + "\x3c/div\x3e");
        b = b(a.toString());
        this.Yf().ha(y9).Kn(b)
    };
    u9.prototype.pP = function () {
        c9(this.Yf(), y9)
    };
    u9.prototype.oP = function () {
        c9(this.Yf(), x9)
    };

    function A9(a) {
        return !!a && !a.$el.hasClass("printOrderSummary__listbox--hidden")
    }
    var y9 = "ORDER_REVIEW",
        x9 = "LISTBOXES";

    function B9(a, b, c, d) {
        var e = this;
        this.view = b;
        this.Am = a.Am;
        this.zm = a.zm;
        this.cg = c;
        this.Rh = d.Rh;
        this.Df = d.Df;
        this.lh = d.lh;
        this.Ee = d.Ee;
        this.Cf = d.Cf;
        this.Ec = a.Ec;
        this.Ea = a.Ea;
        this.jb = a.jb;
        this.Xj = a.Xj;
        this.jn = a.jn;
        this.hc = a.hc;
        this.fd = a.fd;
        this.vG = P.resolve();
        null != this.Cf && XR(this.Cf, function () {
            e.jn(e.wc());
            C9(e)
        });
        XR(this.Rh, function () {
            e.Xj(e.tr());
            var a = D9({
                pJ: e.uu(),
                u: e.Ec,
                Mc: e.tr(),
                Ea: e.Ea,
                jb: e.jb
            });
            e.lh.cB(a);
            E9(e)
        });
        XR(this.Df, function () {
            F9(e);
            G9(e)
        });
        XR(this.lh, function () {
            return E9(e)
        });
        XR(this.Ee, function () {
            return G9(e)
        });
        this.view.on("CHANGE_SHIPPING_METHOD", function () {
            return G9(e)
        })
    }

    function H9(a, b) {
        var c = new UR(b.Rh),
            d = new UR(b.Df),
            e = new UR(b.lh),
            g = new UR(b.Ee),
            h = b.Cf,
            h = h && new UR(h),
            k = C7({
                hc: a.hc,
                $c: "STANDARD",
                Oe: I9(g),
                FN: J9(a.jb, c, d, e)
            }),
            k = hda({
                sa: a.sa,
                ma: a.ma,
                Yg: a.Yg,
                vc: a.vc,
                Bb: a.Bb,
                Kb: a.Kb,
                Ea: a.Ea,
                Zd: {
                    CN: k.zA / 100,
                    jG: k.iB / 100
                },
                wO: function (b) {
                    var c;
                    c = a.Ya;
                    b = {
                        Ja: a.Ja,
                        Ya: c,
                        Kb: b.Kb,
                        Bb: b.Bb
                    };
                    var d = Zca(b),
                        e = $,
                        g;
                    g = g || {};
                    soy.asserts.assertType(d.Jz instanceof soydata.SanitizedHtml || d.Jz instanceof soydata.UnsanitizedText || goog.isString(d.Jz), "licensingOptionsText", d.Jz, "soydata.SanitizedHtml");
                    for (var h = d.Jz, d = goog.asserts.assertArray(d.Vh, "expected parameter 'purchaseLicenses' of type list\x3c[contributedBy: null|string, expirationLabel: null|string, isThumbnailCover: bool, paidLicenseTypeLabel: null|string, purchaseOptions: list\x3c[disabled: null, selected: bool, text: string, value: string]\x3e|null, purchasedText: string, thumbnailUrl: null|string, title: null|string]\x3e."), h = '\x3csection class\x3d"mediaLicenses__info"\x3e\x3cp class\x3d"intro"\x3e' + soy.$$escapeHtml(h) + '\x3c/p\x3e\x3c/section\x3e\x3csection class\x3d"mediaLicenses__itemList"\x3e\x3cdiv class\x3d"mediaLicenses__items"\x3e', k = d.length, y = 0; y < k; y++)
                        var q = d[y],
                            h = h + ('\x3cdiv class\x3d"mediaLicenses__license"\x3e\x3cdiv class\x3d"mediaLicenses__licenseThumbnail"\x3e\x3cdiv class\x3d"mediaLicenses__licenseThumbnailInner ' + (q.HL ? "mediaLicenses__licenseThumbnail--cover" : "mediaLicenses__licenseThumbnail--contain") + '"' + (q.fg ? 'style\x3d"' + (g.kc ? "/*" + g.kc + "*//*" + g.kc + "*/" : "") + "background-image: url('" + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(q.fg)) + "');\"" : "") + '\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"mediaLicenses__licenseInfo"\x3e' + (q.title ? '\x3cdiv class\x3d"mediaLicenses__licenseTitle"\x3e' + soy.$$escapeHtml(q.title) + "\x3c/div\x3e" : "") + (q.Pq ? '\x3cdiv class\x3d"mediaLicenses__licenseContributor"\x3e' + soy.$$escapeHtml(q.Pq) + "\x3c/div\x3e" : "") + '\x3c/div\x3e\x3cdiv class\x3d"mediaLicenses__licensePrice"\x3e' + (q.gs ? soy.$$escapeHtml(q.gs[0].text) : '\x3cdiv class\x3d"mediaLicenses__licenseState"\x3e' + soy.$$escapeHtml(q.w5) + "\x3c/div\x3e" + (q.XF ? '\x3cdiv class\x3d"mediaLicenses__licenseType"\x3e' + soy.$$escapeHtml(q.XF) + (q.oy ? " - " + soy.$$escapeHtml(q.oy) : "") + "\x3c/div\x3e" : "")) + "\x3c/div\x3e\x3c/div\x3e");
                    g = soydata.VERY_UNSAFE.ordainSanitizedHtml(h + "\x3c/div\x3e\x3c/section\x3e");
                    e = e(g.toString());
                    e = new y8(e);
                    b = new C8(b, e);
                    c = new Uo({
                        className: "mediaLicenses__dialog",
                        content: e.$el,
                        aa: Rk,
                        title: c.format("licenseDialogTitle")
                    });
                    c = new cda(c, b);
                    return dda(c)
                }
            }, b.cg);
        return new B9({
            zm: a.zm,
            Am: a.Am,
            fd: a.fd,
            Ec: a.Ec,
            Ea: a.Ea,
            jb: a.jb,
            Xj: a.Xj,
            jn: a.jn,
            hc: a.hc
        }, b, k, {
            Ee: g,
            Cf: h,
            Df: d,
            Rh: c,
            lh: e
        })
    }
    f = B9.prototype;
    f.De = function () {
        this.Xj(this.tr());
        this.jn(this.wc());
        C9(this)
    };

    function K9(a) {
        var b = Gda(a.jb),
            c = _.min(a.hc, function (a) {
                return a.Up
            }),
            d = a.xO ? a.jb.find(function (b) {
                return b.product.oB === a.xO
            }) : Hda(a.jb);
        w(d, 'PrintProductPrice not found for "{}"', a.xO);
        c = a.yO ? a.hc.find(function (b) {
            return b.$c === a.yO
        }) : c;
        w(c, 'ShippingPrice not found for "${}"', a.yO);
        var e = c.$c,
            g = L9(d, a.fd),
            h = null != a.Rv ? g.find(function (b) {
                return b === a.Rv
            }) : g[0];
        w(h, 'order quantity "{}" is invalid', a.Rv);
        var k = d.product,
            b = b ? Ida({
                u: a.Ea,
                Yx: a.oW || 1
            }) : null,
            c = Jda({
                u: a.Ec,
                jb: a.jb,
                Xh: a.Xh,
                pW: k.Mc
            }),
            l = D9({
                pJ: k.Si,
                u: a.Ec,
                Mc: k.Mc,
                Ea: a.Ea,
                jb: a.jb
            }),
            k = M9({
                oJ: k.finish,
                u: a.Ec,
                Mc: k.Mc,
                Si: k.Si,
                Ea: a.Ea,
                jb: a.jb
            }),
            g = N9({
                u: a.Ea,
                fd: g,
                ON: d.Ff,
                KA: a.KA,
                Rv: h
            }),
            d = O9({
                hc: a.hc,
                $c: e,
                Oe: h,
                FN: d
            }),
            d = fda({
                sa: a.sa,
                Bb: a.Bb,
                Kb: a.Kb,
                Ea: a.Ea,
                Zd: d
            });
        return {
            heading: a.Ea.heading(),
            v4: P9({
                J: "printOrderSummary__orderQuantityListbox",
                options: g
            }),
            hV: b && P9({
                J: "printOrderSummary__pageCountListbox",
                options: b,
                disabled: a.zm
            }),
            K4: P9({
                J: "printOrderSummary__paperFinishListbox",
                options: k
            }),
            L4: P9({
                J: "printOrderSummary__paperSizeListbox",
                options: c,
                disabled: a.Am
            }),
            M4: P9({
                J: "printOrderSummary__paperTypeListbox",
                options: l
            }),
            ds: Kda({
                Ec: a.Ec,
                Ea: a.Ea,
                jb: a.jb,
                Hf: a.Hf,
                Xh: a.Xh
            }),
            R4: d,
            Wj: a.Ea.Wj()
        }
    }

    function P9(a) {
        var b = a.J,
            c = a.disabled;
        a = a.options;
        1 === a.length && (b += " printOrderSummary__listbox--hidden");
        return {
            J: b,
            disabled: c,
            options: a,
            zs: WR(a)
        }
    }

    function E9(a) {
        var b = M9({
            oJ: a.Df.oc(),
            u: a.Ec,
            Mc: a.tr(),
            Si: a.uu(),
            Ea: a.Ea,
            jb: a.jb
        });
        a.Df.cB(b);
        F9(a);
        G9(a)
    }

    function C9(a) {
        var b = _.range(1, a.wc() + 1),
            c = Q9(a);
        a.vG = jda(a.cg, b, c);
        return a.vG
    }

    function F9(a) {
        var b = R9(a),
            c = L9(b, a.fd),
            d = I9(a.Ee),
            d = -1 < c.indexOf(d) ? d : c[0],
            b = N9({
                u: a.Ea,
                fd: c,
                ON: b.Ff,
                KA: function (a) {
                    return s8(a)
                },
                Rv: d
            });
        a.Ee.cB(b)
    }

    function G9(a) {
        var b = a.cg;
        a = Q9(a);
        b.Zd = a;
        K8(b, H8({
            sa: b.sa,
            ab: b.ab,
            Bb: b.Bb,
            Kb: b.Kb,
            Zd: b.Zd
        }))
    }

    function R9(a) {
        return J9(a.jb, a.Rh, a.Df, a.lh)
    }
    f.VN = function () {
        this.view.VN({
            Lp: A9(this.view.Cf) ? YR(this.Cf).uj() : null,
            Mp: A9(this.view.Df) ? YR(this.Df).uj() : null,
            Np: A9(this.view.Rh) ? YR(this.Rh).uj() : null,
            Op: A9(this.view.lh) ? YR(this.lh).uj() : null,
            Kp: A9(this.view.Ee) ? YR(this.Ee).uj() : null
        })
    };
    f.pP = function () {
        this.VN();
        this.view.pP()
    };
    f.oP = function () {
        this.view.oP()
    };

    function J9(a, b, c, d) {
        var e = S9(b),
            g = c.oc(),
            h = d.oc();
        a = a.find(function (a) {
            return a.product.Si === h && a.product.finish === g && a.product.Mc.li === e.li && a.product.Mc.Ki === e.Ki
        });
        return w(a, 'PrintProductPrice not found for PaperType "{}", PaperFinish "{}" \x26 PaperSize "{}x{}"', h, g, e.li, e.Ki)
    }

    function S9(a) {
        var b = ka(a.oc().split("x").map(Number));
        a = b.next().value;
        b = b.next().value;
        return new Y6({
            li: a,
            Ki: b
        })
    }

    function I9(a) {
        var b = parseInt(a.oc(), 10);
        Da(!isNaN(b), 'Expected a number but got "{}"', a.oc());
        return b
    }
    f.tr = function () {
        return S9(this.Rh)
    };
    f.uu = function () {
        return this.lh.oc()
    };
    f.$o = function () {
        return R9(this).product.oB
    };
    f.wc = function () {
        if (null == this.Cf)
            return 1;
        var a = parseInt(this.Cf.oc(), 10);
        Da(!isNaN(a), 'Expected a number but got "{}"', this.Cf.oc());
        return a
    };
    f.vj = function () {
        return "STANDARD"
    };
    f.su = function () {
        return this.cg.su()
    };
    f.IC = function () {
        var a = Q9(this);
        return this.cg.IC(a)
    };

    function Q9(a) {
        return O9({
            hc: a.hc,
            $c: a.vj(),
            Oe: I9(a.Ee),
            FN: R9(a)
        })
    }

    function T9(a, b) {
        a.Rh.dg(!a.Am && !b);
        a.Df.dg(!b);
        a.Ee.dg(!b);
        a.lh.dg(!b);
        null != a.Cf && a.Cf.dg(!a.zm && !b)
    }
    f.destroy = function () {
        this.view.remove();
        this.cg.destroy();
        this.lh.destroy();
        this.Rh.destroy();
        this.Df.destroy();
        this.Ee.destroy();
        null != this.Cf && this.Cf.destroy()
    };

    function M9(a) {
        var b = a.jb.map(function (a) {
                return a.product
            }).filter(function (b) {
                return _.isEqual(b.Mc, a.Mc) && b.Si === a.Si
            }),
            c = new Set(b.map(function (a) {
                return a.finish
            }));
        Da(0 < b.length, 'Could not find any products for PaperSize: "{}x{}" \x26 PaperType: "{}"', a.Mc.li, a.Mc.Ki, a.Si);
        var d = c.has(a.oJ) ? a.oJ : b[0].finish;
        return Array.from(c).map(function (b) {
            var c;
            a: switch (c = a.u,
                b) {
                case "GLOSS":
                    c = c.format("printOrderPaperFinishGloss");
                    break a;
                case "SILK":
                    c = c.format("printOrderPaperFinishSilk");
                    break a;
                case "UNCOATED":
                    c = c.format("printOrderPaperFinishUncoated");
                    break a;
                default:
                    throw Error("Expected a PaperFinish, but got '" + b + "'");
            }
            var h;
            a: switch (h = a.Ea,
                b) {
                case "GLOSS":
                    h = h.format("printOrderSummaryFinishGlossDescription");
                    break a;
                case "SILK":
                    h = h.format("printOrderSummaryFinishMatteDescription");
                    break a;
                case "UNCOATED":
                    h = h.Ua("printOrderSummaryFinishUncoatedDescriptionHtml");
                    break a;
                default:
                    throw Error("Expected a PaperFinish, but got '" + b + "'");
            }
            c = {
                ov: h,
                YF: c,
                selected: b === d,
                Jw: a.Ea.Jw(c),
                value: b
            };
            b = $;
            soy.asserts.assertType(null == c.J || c.J instanceof goog.soy.data.SanitizedContent || goog.isString(c.J), "classes", c.J, "null|string|undefined");
            h = c.J;
            soy.asserts.assertType(c.ov instanceof goog.soy.data.SanitizedContent || c.ov instanceof soydata.SanitizedHtml || c.ov instanceof soydata.UnsanitizedText || goog.isString(c.ov), "paperFinishDescription", c.ov, "!soydata.SanitizedHtml|string");
            var k = c.ov;
            soy.asserts.assertType(goog.isString(c.YF) || c.YF instanceof goog.soy.data.SanitizedContent, "paperFinishLabel", c.YF, "string|goog.soy.data.SanitizedContent");
            var l = c.YF;
            soy.asserts.assertType(null == c.selected || goog.isBoolean(c.selected) || 1 === c.selected || 0 === c.selected, "selected", c.selected, "boolean|null|undefined");
            var m = c.selected;
            soy.asserts.assertType(goog.isString(c.Jw) || c.Jw instanceof goog.soy.data.SanitizedContent, "typeOfFinish", c.Jw, "string|goog.soy.data.SanitizedContent");
            var n = c.Jw;
            soy.asserts.assertType(goog.isString(c.value) || c.value instanceof goog.soy.data.SanitizedContent, "value", c.value, "string|goog.soy.data.SanitizedContent");
            c = soydata.VERY_UNSAFE.ordainSanitizedHtml(l8({
                label: l,
                value: c.value,
                attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-type-of-finish\x3d"' + soy.$$escapeHtmlAttribute(n) + '"'),
                J: h,
                description: k,
                selected: m
            }));
            b = b(c.toString());
            return x8(b)
        })
    }

    function Kda(a) {
        var b = _.uniq(a.jb.map(function (a) {
                return a.product.finish
            })),
            b = 1 === b.length ? b[0] : null,
            c = a.jb.map(function (a) {
                return a.product.Mc
            }),
            c = _.uniq(c, !1, function (a) {
                return U9(a)
            }),
            d = 1 === c.length ? c[0] : null,
            c = moment().add(7, "days").format("LL");
        return "GLOSS" === b ? a.Ea.Ua("printOrderSummaryGlossyPosterDescriptionWithDeliveryDateHtml", c) : "UNCOATED" === b && null != d ? (b = k8(a.Ec, a.Xh, d),
            a.Ea.Ua("printOrderSummaryUncoatedLetterheadDescriptionWithDeliveryDateHtml", b, c)) : null != d ? (b = k8(a.Ec, a.Xh, d),
            a.Ea.Ua("printOrderSummaryProductDescriptionWithDimensionsAndDeliveryDateHtml", b, c)) : a.Ea.Ua("printOrderSummaryProductDescriptionWithDeliveryDateHtml", c)
    }

    function Ida(a) {
        Da(1 === a.Yx || 2 === a.Yx, 'defaultPageCount can be either 1 or 2, but found "{}"', a.Yx);
        return [p8({
            lA: a.u.format("printOrderSummarySingleSidedPrint"),
            Wr: a.u.format("printOrderSummarySingleSidedPrintDescription"),
            selected: 1 === a.Yx,
            value: "1"
        }), p8({
            lA: a.u.format("printOrderSummaryDoubleSidedPrint"),
            Wr: a.u.format("printOrderSummaryDoubleSidedPrintDescription"),
            selected: 2 === a.Yx,
            value: "2"
        })]
    }

    function O9(a) {
        a = C7(a);
        return {
            CN: a.zA / 100,
            jG: a.iB / 100
        }
    }

    function L9(a, b) {
        return b.filter(function (b) {
            return -1 < a.Ff.findIndex(function (a) {
                return a.qF <= b && b <= a.iF
            })
        })
    }

    function Hda(a) {
        function b(a) {
            return Math.min.apply(Math, [].concat(la(a.map(function (a) {
                return a.kH
            }))))
        }
        return _.sortBy(a, function (a) {
            return b(a.Ff)
        })[0]
    }

    function D9(a) {
        var b = new Set(a.jb.filter(function (b) {
            return _.isEqual(b.product.Mc, a.Mc)
        }).map(function (a) {
            return a.product.Si
        }));
        Da(0 < b.size, "At least one PaperType should be applicable for the PaperSize: {}", a.Mc);
        var c = b.has(a.pJ) ? a.pJ : Array.from(b)[0],
            d = new Map([
                ["STANDARD", 1],
                ["PREMIUM", 2],
                ["ECO_FRIENDLY", 3]
            ]);
        return Array.from(b).sort(function (a, b) {
            return d.get(a) - d.get(b)
        }).map(function (b) {
            var d;
            a: switch (d = a.u,
                b) {
                case "STANDARD":
                    d = d.format("printOrderPaperTypeStandard");
                    break a;
                case "PREMIUM":
                    d = d.format("printOrderPaperTypePremium");
                    break a;
                case "ECO_FRIENDLY":
                    d = d.format("printOrderPaperTypeEcoFriendly");
                    break a;
                default:
                    throw Error("Expected a PaperType, but got '" + b + "'");
            }
            var h = d,
                k = a.Ea.Kw(h),
                l;
            a: switch (d = a.Ea,
                b) {
                case "STANDARD":
                    l = d.format("printOrderSummaryStandardPaperDescription");
                    break a;
                case "PREMIUM":
                    l = d.format("printOrderSummaryPremiumPaperDescription");
                    break a;
                case "ECO_FRIENDLY":
                    l = d.format("printOrderSummaryEcoFriendlyPaperDescription");
                    break a;
                default:
                    throw Error("Expected a PaperType, but got '" + b + "'");
            }
            d = $;
            b = {
                $F: h,
                Kw: k,
                selected: b === c,
                ZF: l,
                value: b
            };
            soy.asserts.assertType(null == b.J || b.J instanceof goog.soy.data.SanitizedContent || goog.isString(b.J), "classes", b.J, "null|string|undefined");
            h = b.J;
            soy.asserts.assertType(goog.isString(b.ZF) || b.ZF instanceof goog.soy.data.SanitizedContent, "paperTypeDescription", b.ZF, "string|goog.soy.data.SanitizedContent");
            k = b.ZF;
            soy.asserts.assertType(goog.isString(b.$F) || b.$F instanceof goog.soy.data.SanitizedContent, "paperTypeLabel", b.$F, "string|goog.soy.data.SanitizedContent");
            l = b.$F;
            soy.asserts.assertType(null == b.selected || goog.isBoolean(b.selected) || 1 === b.selected || 0 === b.selected, "selected", b.selected, "boolean|null|undefined");
            var m = b.selected;
            soy.asserts.assertType(goog.isString(b.Kw) || b.Kw instanceof goog.soy.data.SanitizedContent, "typeOfPaper", b.Kw, "string|goog.soy.data.SanitizedContent");
            var n = b.Kw;
            soy.asserts.assertType(goog.isString(b.value) || b.value instanceof goog.soy.data.SanitizedContent, "value", b.value, "string|goog.soy.data.SanitizedContent");
            b = soydata.VERY_UNSAFE.ordainSanitizedHtml(l8({
                label: l,
                value: b.value,
                attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('data-type-of-paper\x3d"' + soy.$$escapeHtmlAttribute(n) + '"'),
                J: h,
                description: k,
                selected: m
            }));
            d = d(b.toString());
            return v8(d)
        })
    }

    function N9(a) {
        var b = D7(a.ON, a.fd[0]);
        return a.fd.map(function (c) {
            var d = D7(a.ON, c);
            Da(0 < b, "price must be a positive number");
            var e = d > b ? 0 : 100 * (b - d) / b,
                d = d * c / 100;
            return a.KA({
                fv: a.u.fv(c),
                Za: a.u.Za(d),
                ab: 0 !== e ? a.u.ab(e) : null,
                selected: c === a.Rv,
                value: c.toString()
            })
        })
    }

    function U9(a) {
        return a.li + "x" + a.Ki
    }

    function Jda(a) {
        var b = function (a) {
            a = a.map(function (a) {
                return a.Mc
            });
            return new Map(a.map(function (a) {
                return [U9(a), a]
            }))
        }(a.jb.map(function (a) {
            return a.product
        }));
        Da(b.has(U9(a.pW)), 'None of the given products support the selected paper size: "{}".');
        return _.sortBy(Array.from(b), function (a) {
            a = ka(a);
            a.next();
            return a.next().value.li
        }).map(function (b) {
            var d = ka(b);
            b = d.next().value;
            var d = d.next().value,
                e = {
                    oA: k8(a.u, a.Xh, d),
                    selected: _.isEqual(d, a.pW),
                    value: b
                };
            b = $;
            soy.asserts.assertType(null == e.J || e.J instanceof goog.soy.data.SanitizedContent || goog.isString(e.J), "classes", e.J, "null|string|undefined");
            d = e.J;
            soy.asserts.assertType(e.oA instanceof soydata.SanitizedHtml || e.oA instanceof soydata.UnsanitizedText || goog.isString(e.oA), "paperSizeLabelHtml", e.oA, "soydata.SanitizedHtml");
            var g = e.oA;
            soy.asserts.assertType(null == e.selected || goog.isBoolean(e.selected) || 1 === e.selected || 0 === e.selected, "selected", e.selected, "boolean|null|undefined");
            var h = e.selected;
            soy.asserts.assertType(goog.isString(e.value) || e.value instanceof goog.soy.data.SanitizedContent, "value", e.value, "string|goog.soy.data.SanitizedContent");
            e = e.value;
            d = soydata.VERY_UNSAFE.ordainSanitizedHtml(l8({
                J: d + " paperSizeOption",
                label: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cspan class\x3d"paperSizeOption__label"\x3e' + soy.$$escapeHtml(g) + "\x3c/span\x3e"),
                value: e,
                selected: h
            }));
            b = b(d.toString());
            return n8(b)
        })
    }

    function Gda(a) {
        Da(0 < a.length, "Please specify at least one PrintProductPrice");
        a = a.map(function (a) {
            return a.product.dM
        });
        a = _.uniq(a);
        Da(1 === a.length, 'All products must have same value for the property "maxPages", found "{}"', a);
        return 2 === a[0]
    };

    function V9(a) {
        fc.apply(this, arguments)
    }
    t(V9, fc);

    function W9(a, b) {
        L.call(this, a);
        this.sn = b
    }
    t(W9, L);
    W9.prototype.LO = function (a) {
        a = $(g9({
            Td: a,
            J: "printPaymentAndConfirmation__shippingAddress"
        }).toString());
        this.$el.find(".printPaymentAndConfirmation__shippingAddress").replaceWith(a)
    };

    function X9(a, b) {
        this.view = a;
        this.sn = b
    }
    X9.prototype.LO = function (a) {
        this.view.LO(Y9(a))
    };

    function Y9(a) {
        var b = T7().get(a.Sc),
            c;
        a.Ms && (c = Xv("countryCode", a.Sc),
            c = U7(c).get(a.Ms));
        return {
            Sf: a.Sf,
            a_: b,
            name: a.name,
            Rj: a.Rj,
            bk: a.bk,
            Xi: a.Xi,
            YW: c,
            bj: a.bj
        }
    }
    X9.prototype.BA = function (a) {
        return this.sn.BA(a)
    };
    X9.prototype.destroy = function () {
        this.sn.destroy();
        this.view.remove()
    };

    function Z9(a) {
        fc.apply(this, arguments)
    }
    t(Z9, fc);

    function $9(a) {
        fc.apply(this, arguments)
    }
    t($9, fc);

    function a$(a) {
        soy.asserts.assertType(goog.isString(a.od) || a.od instanceof goog.soy.data.SanitizedContent, "backButtonText", a.od, "string|goog.soy.data.SanitizedContent");
        var b = a.od;
        soy.asserts.assertType(goog.isString(a.Ai) || a.Ai instanceof goog.soy.data.SanitizedContent, "continueButtonText", a.Ai, "string|goog.soy.data.SanitizedContent");
        a = a.Ai;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(bZ({
            J: "printOrderForm__addressDetailsBackButton settingsFormActions__button buttonSecondary",
            text: b
        }) + bZ({
            J: "printOrderForm__addressDetailsContinueButton settingsFormActions__button buttonSubmittable",
            text: a
        }))
    };

    function b$(a, b, c) {
        var d = this;
        L.call(this, a);
        this.nD = b;
        this.Sa = c;
        a.on("click", ".printOrderForm__addressDetailsBackButton", function () {
            d.trigger(c$)
        });
        a.on("click", ".printOrderForm__addressDetailsContinueButton", function () {
            d.trigger(d$)
        });
        a.on("click", ".printOrderForm__paymentAndConfirmationBackButton", function () {
            d.trigger(e$)
        });
        a.on("click", ".printOrderForm__paymentAndConfirmationPayNowButton", function () {
            d.trigger(f$)
        });
        a.on("click", ".printOrderReceived__viewHomepageButton, .printOrderError__viewDesignButton", function () {
            d.trigger(g$)
        })
    }
    t(b$, L);

    function Lda(a) {
        var b = a$({
                od: a.od,
                Ai: a.Ai
            }),
            c = a.p_;
        soy.asserts.assertType(goog.isString(c.zt) || c.zt instanceof goog.soy.data.SanitizedContent, "checkImagesAndText", c.zt, "string|goog.soy.data.SanitizedContent");
        var d = c.zt;
        soy.asserts.assertType(c.Iq instanceof soydata.SanitizedHtml || c.Iq instanceof soydata.UnsanitizedText || goog.isString(c.Iq), "checkTermsOfUseHtml", c.Iq, "soydata.SanitizedHtml");
        var e = c.Iq;
        soy.asserts.assertType(goog.isString(c.Et) || c.Et instanceof goog.soy.data.SanitizedContent, "continueToCheckoutButtonText", c.Et, "string|goog.soy.data.SanitizedContent");
        var g = c.Et;
        soy.asserts.assertType(goog.isString(c.description) || c.description instanceof goog.soy.data.SanitizedContent, "description", c.description, "string|goog.soy.data.SanitizedContent");
        var h = c.description;
        soy.asserts.assertType(goog.isString(c.oD) || c.oD instanceof goog.soy.data.SanitizedContent, "designReviewSupportUrl", c.oD, "string|goog.soy.data.SanitizedContent");
        var k = c.oD;
        soy.asserts.assertType(goog.isString(c.iu) || c.iu instanceof goog.soy.data.SanitizedContent, "generatingPdfText", c.iu, "string|goog.soy.data.SanitizedContent");
        var l = c.iu;
        soy.asserts.assertType(goog.isString(c.heading) || c.heading instanceof goog.soy.data.SanitizedContent, "heading", c.heading, "string|goog.soy.data.SanitizedContent");
        var m = c.heading;
        soy.asserts.assertType(goog.isString(c.Wb) || c.Wb instanceof goog.soy.data.SanitizedContent, "pageNumberOfTotal", c.Wb, "string|goog.soy.data.SanitizedContent");
        var n = c.Wb;
        soy.asserts.assertType(goog.isString(c.Pv) || c.Pv instanceof goog.soy.data.SanitizedContent, "seeUnfixableProblemButtonText", c.Pv, "string|goog.soy.data.SanitizedContent");
        c = c.Pv;
        e = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"designProofReview"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e\x3cspan class\x3d"printFlowStepNumberBadge"\x3e' + soy.$$escapeHtml(n) + '\x3c/span\x3e\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(m) + '\x3c/h1\x3e\x3c/div\x3e\x3cp class\x3d"designProofReview__description"\x3e' + soy.$$escapeHtml(h) + '\x3c/p\x3e\x3cdiv class\x3d"designProofReview__manualDownload designProofReview__manualDownload--hidden"\x3e\x3c/div\x3e\x3cdiv class\x3d"designProofReview__checklist designProofReview__checklist--hidden"\x3e' + o9({
            Xq: d
        }) + o9({
            Xq: e
        }) + '\x3c/div\x3e\x3cdiv class\x3d"designProofReview__progressbarContainer"\x3e\x3cp class\x3d"designProofReview__generatingPdf"\x3e' + soy.$$escapeHtml(l) + '\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"designProofReview__actionButtons designProofReview__actionButtons--hidden"\x3e' + bZ({
            tagName: "a",
            href: k,
            attributes: soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks('target\x3d"_blank"'),
            J: "designProofReview__actionButton buttonSecondary designProofReview__supportLink",
            text: c
        }) + bZ({
            J: "designProofReview__actionButton designProofReview__checkoutButton",
            text: g,
            disabled: !0
        }) + "\x3c/div\x3e\x3c/div\x3e");
        d = $;
        g = h$;
        a = v9(a.ZM);
        soy.asserts.assertType(b instanceof soydata.SanitizedHtml || b instanceof soydata.UnsanitizedText || goog.isString(b), "actionButtonsHtml", b, "soydata.SanitizedHtml");
        soy.asserts.assertType(e instanceof soydata.SanitizedHtml || e instanceof soydata.UnsanitizedText || goog.isString(e), "designProofReviewHtml", e, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(g) || g instanceof goog.soy.data.SanitizedContent, "designProofReviewPageName", g, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(a instanceof soydata.SanitizedHtml || a instanceof soydata.UnsanitizedText || goog.isString(a), "orderSummaryHtml", a, "soydata.SanitizedHtml");
        b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printOrderForm"\x3e\x3cdiv class\x3d"contentPanel printOrderForm__mainContentPanel"\x3e' + d9({
            J: "printOrderForm__pagesPanel",
            ia: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + a9({
                content: e,
                name: g,
                visible: !0
            }))
        }) + '\x3c/div\x3e\x3cdiv class\x3d"printOrderForm__hiddenSidePanel"\x3e\x3cdiv class\x3d"contentPanel"\x3e\x3cdiv class\x3d"printOrderForm__orderSummaryContainer"\x3e' + soy.$$escapeHtml(a) + "\x3c/div\x3e" + O7({
            J: "printOrderForm__formActions",
            buttons: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + soy.$$escapeHtml(b))
        }) + "\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");
        b = d(b.toString());
        a = new p9(b.find(".designProofReview"));
        d = z9(b.find(".printOrderSummary"));
        return new b$(b, a, d)
    }
    b$.prototype.Yf = function () {
        var a = this.$el.find(".printOrderForm__pagesPanel");
        return new Y8(a)
    };

    function i$(a) {
        a = a.$el.find(".printOrderForm__formActions");
        Ba(a.hasClass("settingsFormActions"), "the given element {} is not an FormActionsView", a.get(0));
        return new R7(a)
    }

    function j$(a, b) {
        var c = a.$el.find(".printOrderForm__hiddenSidePanel");
        if (b === c.hasClass("printOrderForm__hiddenSidePanel--visible"))
            return P.resolve();
        c.toggleClass("printOrderForm__hiddenSidePanel--visible", b);
        return P.all([wf(c[0]), k$(a)])
    }

    function k$(a) {
        var b = a.$el.find(".printOrderForm__hiddenSidePanel").hasClass("printOrderForm__hiddenSidePanel--visible"),
            c = a.$el.find(".printOrderForm__mainContentPanel");
        a = b ? 0 : (a.$el.width() - c.width()) / 2;
        c.css("transform", "translate3d(" + a + "px, 0, 0)");
        return wf(c[0])
    }

    function l$(a, b) {
        a.$el.find(".printOrderForm__addressDetailsContinueButton").toggleClass("submitting", b)
    }

    function m$(a, b) {
        a.$el.find(".printOrderForm__paymentAndConfirmationPayNowButton").toggleClass("submitting", b)
    }

    function n$(a, b) {
        a.$el.find(".printOrderForm__paymentAndConfirmationBackButton").prop("disabled", !b)
    }
    var h$ = "DESIGN_PROOF_REVIEW",
        e$ = "BACK_TO_ADDRESS_DETAILS",
        g$ = "BACK_TO_DESIGN",
        c$ = "BACK_TO_PROOFING",
        d$ = "CONTINUE_TO_PAYMENT",
        f$ = "SUBMIT_ORDER";

    function o$(a, b, c, d) {
        var e = this;
        this.view = b;
        this.mk = null;
        this.nD = c;
        this.Sa = d;
        this.pA = null;
        this.H = a.H;
        this.Ia = a.Ia;
        this.ma = a.ma;
        this.kg = a.kg;
        this.vc = a.vc;
        this.order = a.order;
        this.Oc = a.Oc;
        this.Wa = a.Wa;
        this.ZN = a.ZN;
        this.eO = a.eO;
        this.cO = a.cO;
        this.dO = a.dO;
        this.fO = a.fO;
        this.hn = a.hn;
        this.Yz = a.Yz;
        this.hA = a.hA;
        this.ya = a.ya;
        this.view.on(c$, function () {
            return Mda(e)
        });
        this.view.on(d$, function () {
            return Nda(e)
        });
        this.view.on(e$, function () {
            c9(e.view.Yf(), "ADDRESS_DETAILS");
            e.Sa.oP();
            var a = e.view,
                b = {
                    od: e.Oc.od(),
                    Ai: e.Oc.Ai()
                },
                b = $(a$(b).toString());
            S7(i$(a), b);
            T9(e.Sa, !1)
        });
        this.view.on(f$, function () {
            return Oda(e)
        });
        this.view.on(g$, function () {
            return e.Yz()
        })
    }

    function Pda(a) {
        var b = a.jb.find(function (b) {
                return b.product.oB === a.order.af
            }),
            b = w(b, "product price not found for sku {}", a.order.af),
            b = Lda({
                p_: Ada({
                    Bi: a.Bi,
                    Fe: a.Fe
                }),
                od: a.Oc.od(),
                Ai: a.Oc.Ai(),
                ZM: K9({
                    sa: a.sa,
                    zm: !0,
                    Am: !0,
                    vc: a.vc,
                    Bb: a.Bb,
                    Kb: a.Kb,
                    fd: a.fd,
                    Ec: a.Ec,
                    Ea: a.Ea,
                    jb: a.jb,
                    Hf: b.product.type,
                    Xh: a.Uh.id,
                    KA: function (a) {
                        return s8(a)
                    },
                    Rv: a.order.Oe,
                    oW: a.order.Bd,
                    xO: a.order.af,
                    yO: a.order.PO.$c,
                    hc: a.hc
                })
            });
        return {
            bc: Qda({
                sa: a.sa,
                nd: a.nd,
                H: a.H,
                ma: a.ma,
                Ia: a.Ia,
                Bi: a.Bi,
                kg: a.kg,
                Uf: a.Uf,
                Gi: a.Gi,
                vc: a.vc,
                Ya: a.Ya,
                Bb: a.Bb,
                Kb: a.Kb,
                Yz: a.Yz,
                hn: a.hn,
                order: a.order,
                hA: a.hA,
                fd: a.fd,
                Ja: a.Ja,
                Oc: a.Oc,
                Ec: a.Ec,
                Ea: a.Ea,
                Wa: a.Wa,
                jb: a.jb,
                ZN: function () {
                    return vda({
                        nd: a.nd,
                        Ia: a.Ia,
                        Fh: new Set(a.Uh.Fh.map(function (a) {
                            return Xv("printRegion.countries", a)
                        })),
                        Uf: a.Uf,
                        Gi: a.Gi,
                        zj: "EU" === a.Uh.id,
                        ql: a.ql,
                        Fe: a.Fe,
                        Oc: a.Oc,
                        Wa: a.Wa,
                        tc: a.tc,
                        ya: a.ya
                    })
                },
                cO: function (b) {
                    var d = {
                            YM: a.Oc.YM()
                        },
                        e = $,
                        d = goog.asserts.assertObject(d, "expected parameter 'messages' of type [orderErrorHeading: string].");
                    soy.asserts.assertType(b instanceof soydata.SanitizedHtml || b instanceof soydata.UnsanitizedText || goog.isString(b), "errorMessageHtml", b, "soydata.SanitizedHtml");
                    b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printOrderError"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e' + tW() + '\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(d.YM) + '\x3c/h1\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderError__content"\x3e\x3cp class\x3d"printOrderError__confirmationEmailMessage"\x3e' + soy.$$escapeHtml(b) + "\x3c/p\x3e\x3c/div\x3e\x3c/div\x3e");
                    e = e(b.toString());
                    return new Z9(e)
                },
                dO: function (b) {
                    var d = a.SP,
                        e = a.cs,
                        g = b.u4;
                    b = {
                        w4: e.heading(),
                        YP: e.YP(),
                        XP: e.XP()
                    };
                    d = e.WZ(d);
                    g = e.x4(g);
                    e = $;
                    b = goog.asserts.assertObject(b, "expected parameter 'messages' of type [orderReceivedHeading: string, viewHomepageButtonText: string, viewPrintOrdersButtonText: string].");
                    soy.asserts.assertType(d instanceof soydata.SanitizedHtml || d instanceof soydata.UnsanitizedText || goog.isString(d), "confirmationEmailMessageHtml", d, "soydata.SanitizedHtml");
                    soy.asserts.assertType(g instanceof soydata.SanitizedHtml || g instanceof soydata.UnsanitizedText || goog.isString(g), "orderReceivedMessageHtml", g, "soydata.SanitizedHtml");
                    soy.asserts.assertType(goog.isString("/account#print-orders") || !1, "printOrdersUrl", "/account#print-orders", "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(goog.isString("/") || !1, "homepageUrl", "/", "string|goog.soy.data.SanitizedContent");
                    b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printOrderReceived"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e' + uW({
                        Ma: "printOrderReceived__headerIcon"
                    }) + '\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(b.w4) + '\x3c/h1\x3e\x3c/div\x3e\x3cdiv class\x3d"printOrderReceived__content"\x3e\x3cp class\x3d"printOrderReceived__confirmationEmailMessage"\x3e' + soy.$$escapeHtml(d) + "\x3c/p\x3e" + sY({
                        J: "printOrderReceived__supportInfoMessage",
                        message: g
                    }) + "\x3c/div\x3e" + O7({
                        buttons: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + bZ({
                            tagName: "a",
                            href: "/account#print-orders",
                            J: "printOrderReceived__viewPrintOrdersButton buttonSecondary settingsFormActions__button",
                            text: b.YP
                        }) + bZ({
                            tagName: "a",
                            href: "/",
                            J: "printOrderReceived__viewHomepageButton buttonSubmittable settingsFormActions__button",
                            text: b.XP
                        }))
                    }) + "\x3c/div\x3e");
                    b = e(b.toString());
                    return new $9(b)
                },
                eO: function (b) {
                    b = {
                        sa: a.sa,
                        ma: a.ma,
                        Ia: a.Ia,
                        It: a.It,
                        ec: a.ec,
                        Xe: a.Xe,
                        Ja: Rc(a.u),
                        cg: b.cg,
                        Fe: a.Fe,
                        Oc: a.Oc,
                        Th: a.Th,
                        tc: b.tc,
                        sb: a.sb,
                        ya: a.ya
                    };
                    var d = b.sa,
                        e = b.Th.format("printPaymentAndConfirmationCreditCardDetailsLabel"),
                        g = b.Th.Gt(),
                        h = b.ec,
                        k = b.Xe,
                        l = b.Ja,
                        m = !!d && !V8(d.Gh),
                        d = m ? l.format("paymentPageSavedTeamCard", d.Gh.Dz) : l.oO(),
                        n = {
                            rt: l.rt(),
                            Ft: l.Ft(),
                            Gt: g,
                            eD: e,
                            ec: h,
                            iy: m,
                            BB: k ? null : d
                        },
                        e = b.ec,
                        l = {
                            Q4: b.Th.heading(),
                            fN: b.Th.fN(),
                            gw: b.Oc.gw()
                        },
                        h = b.Fe.Wb(5, 5),
                        k = Y9(b.tc),
                        g = $;
                    soy.asserts.assertType(goog.isString(n.rt) || n.rt instanceof goog.soy.data.SanitizedContent, "applyCouponButtonText", n.rt, "string|goog.soy.data.SanitizedContent");
                    m = n.rt;
                    soy.asserts.assertType(goog.isString(n.Ft) || n.Ft instanceof goog.soy.data.SanitizedContent, "couponCodeInputPlaceholder", n.Ft, "string|goog.soy.data.SanitizedContent");
                    d = n.Ft;
                    soy.asserts.assertType(goog.isString(n.Gt) || n.Gt instanceof goog.soy.data.SanitizedContent, "couponCodeLabel", n.Gt, "string|goog.soy.data.SanitizedContent");
                    var p = n.Gt;
                    soy.asserts.assertType(goog.isString(n.eD) || n.eD instanceof goog.soy.data.SanitizedContent, "creditCardLabel", n.eD, "string|goog.soy.data.SanitizedContent");
                    var r = n.eD;
                    soy.asserts.assertType(goog.isBoolean(n.iy) || 1 === n.iy || 0 === n.iy, "editingDisabled", n.iy, "boolean");
                    var u = !!n.iy;
                    soy.asserts.assertType(null == n.J || n.J instanceof goog.soy.data.SanitizedContent || goog.isString(n.J), "classes", n.J, "null|string|undefined");
                    var v = n.J;
                    soy.asserts.assertType(null == n.BB || n.BB instanceof goog.soy.data.SanitizedContent || goog.isString(n.BB), "teamCardMessage", n.BB, "null|string|undefined");
                    n = n.BB;
                    m = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"paymentForm' + (v ? " " + soy.$$escapeHtmlAttribute(v) : "") + '"\x3e' + L7({
                        fb: !0,
                        content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + g3({
                            label: r,
                            J: "paymentForm__cardInputContainer",
                            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('\x3cdiv class\x3d"paymentForm__creditCardEditView' + (u ? " paymentForm__creditCardEditView--disabled" : "") + '" \x3e\x3c/div\x3e' + (n ? '\x3cdiv class\x3d"paymentForm__teamCardMessage"\x3e' + soy.$$escapeHtml(n) + "\x3c/div\x3e" : ""))
                        }) + g3({
                            label: p,
                            J: "paymentForm__couponInputContainer",
                            input: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + nda({
                                Lg: "paymentForm__applyCouponButton buttonSubmittable",
                                pd: m,
                                J: "paymentForm__couponCode",
                                pz: "paymentForm__couponCodeInput",
                                gl: d
                            }))
                        }))
                    }) + "\x3c/div\x3e");
                    l = goog.asserts.assertObject(l, "expected parameter 'messages' of type [paymentAndConfirmationHeading: string, paymentDetailsHeading: string, shippingAddressHeading: string].");
                    soy.asserts.assertType(m instanceof soydata.SanitizedHtml || m instanceof soydata.UnsanitizedText || goog.isString(m), "paymentFormHtml", m, "soydata.SanitizedHtml");
                    k = goog.asserts.assertObject(k, "expected parameter 'shippingAddressSummary' of type [city: string, countryName: string, name: string, phone: string, street1: string, street2: null|string, subdivisionName: null|string, zipCode: string].");
                    soy.asserts.assertType(goog.isString(h) || h instanceof goog.soy.data.SanitizedContent, "pageNumberOfTotal", h, "string|goog.soy.data.SanitizedContent");
                    h = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printPaymentAndConfirmation"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e\x3cspan class\x3d"printFlowStepNumberBadge"\x3e' + soy.$$escapeHtml(h) + '\x3c/span\x3e\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(l.Q4) + "\x3c/h1\x3e\x3c/div\x3e" + K7({
                        heading: l.fN,
                        content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + soy.$$escapeHtml(m))
                    }) + K7({
                        heading: l.gw,
                        content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + L7({
                            fb: !0,
                            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + g9({
                                Td: k,
                                J: "printPaymentAndConfirmation__shippingAddress"
                            }))
                        }))
                    }) + "\x3c/div\x3e");
                    g = g(h.toString());
                    h = g.find(".paymentForm");
                    e = (new q0({
                        ux: !1,
                        ec: e
                    })).render();
                    h.find(".paymentForm__creditCardEditView").empty().append(e.$el);
                    e = new N8(h, e);
                    e = new W9(g, e);
                    g = e.sn;
                    h = g.$el.find(".paymentForm__creditCardEditView").hasClass("paymentForm__creditCardEditView--disabled");
                    h = new p0({
                        Zl: b.ma,
                        Z: b.Ia,
                        ie: !b.sa || V8(b.sa.Gh) ? null : b.sa.Gh,
                        Re: !h,
                        Kf: b.sb,
                        view: g.Qg
                    });
                    h.refresh();
                    b = new T8(b, g, h);
                    return {
                        bc: new X9(e, b),
                        view: e
                    }
                },
                fO: function () {
                    var b = a.Th.format("printPaymentAndConfirmationProcessingPayment"),
                        d = $;
                    soy.asserts.assertType(goog.isString(b) || b instanceof goog.soy.data.SanitizedContent, "heading", b, "string|goog.soy.data.SanitizedContent");
                    b = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printPaymentProgress"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(b) + '\x3c/h1\x3e\x3c/div\x3e\x3cdiv class\x3d"printPaymentProgress__content"\x3e' + E7({
                        J: "printPaymentProgress__loadingBar",
                        progress: 0
                    }, void 0) + "\x3c/div\x3e\x3c/div\x3e");
                    d = d(b.toString());
                    G7(d.find(".printPaymentProgress__loadingBar"));
                    return new V9(d)
                },
                tc: a.tc,
                hc: a.hc,
                ya: a.ya
            }, b),
            view: b
        }
    }

    function Qda(a, b) {
        var c = Cda({
                H: a.H,
                qK: am(),
                u: a.Bi,
                zM: function () {
                    Rda(e)
                },
                iA: a.order.id,
                Wa: a.Wa
            }, b.nD),
            d = H9({
                sa: a.sa,
                ma: a.ma,
                Yg: function () {
                    return P.resolve()
                },
                zm: !0,
                Am: !0,
                vc: a.vc,
                Ya: a.Ya,
                Bb: a.Bb,
                Kb: a.Kb,
                jn: function () {},
                fd: a.fd,
                Ja: a.Ja,
                Ec: a.Ec,
                Ea: a.Ea,
                jb: a.jb,
                Xj: function () {},
                hc: a.hc,
                ya: a.ya
            }, b.Sa),
            e = new o$(a, b, c, d);
        return e
    }
    o$.prototype.De = function () {
        var a = this;
        k$(this.view).then(function () {
            return Eda(a.nD)
        });
        this.Sa.De()
    };

    function Rda(a) {
        var b = a.view.Yf();
        if (!$8(b, "ADDRESS_DETAILS")) {
            var c = a.ZN(),
                d = c.view;
            a.mk = c.bc;
            Z8(b, "ADDRESS_DETAILS", d.$el)
        }
        c9(b, "ADDRESS_DETAILS").then(function () {
            a.mk.view.$el.find(".addressDetailsAddress__nameInput input").focus();
            j$(a.view, !0)
        });
        b = X(X(new Hl("print_review_continue_to_checkout"), "section", "editor"), "location", "print_review");
        a.H.Ga(b)
    }

    function Mda(a) {
        j$(a.view, !1).then(function () {
            return c9(a.view.Yf(), h$)
        })
    }

    function Nda(a) {
        Y2(a.mk.I7).then(function (b) {
            if (b) {
                var c = a.view.Yf(),
                    d = a.mk.vu();
                if ($8(c, "PAYMENT_AND_CONFIRMATION"))
                    a.pA.LO(d);
                else {
                    b = a.eO({
                        cg: a.Sa.cg,
                        tc: d
                    });
                    var e = b.view;
                    a.pA = b.bc;
                    Z8(c, "PAYMENT_AND_CONFIRMATION", e.$el)
                }
                b = P.all([a.Sa.vG, wda(a.mk), a.order.xm ? Sda(a) : a.nH()]);
                T9(a.Sa, !0);
                l$(a.view, !0);
                i$(a.view).tg();
                b.then(function () {
                    c9(c, "PAYMENT_AND_CONFIRMATION");
                    a.Sa.pP();
                    var b = a.view,
                        d = a.Oc.od(),
                        e = a.Oc.P4(),
                        l = $;
                    soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "backButtonText", d, "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(goog.isString(e) || e instanceof goog.soy.data.SanitizedContent, "payNowButtonText", e, "string|goog.soy.data.SanitizedContent");
                    d = soydata.VERY_UNSAFE.ordainSanitizedHtml(bZ({
                        J: "printOrderForm__paymentAndConfirmationBackButton settingsFormActions__button buttonSecondary",
                        text: d
                    }) + bZ({
                        J: "printOrderForm__paymentAndConfirmationPayNowButton settingsFormActions__button buttonSubmittable",
                        text: e
                    }));
                    l = l(d.toString());
                    S7(i$(b), l)
                }).then(function () {
                    var b = X(new Hl("print_checkout_address"), "order_id", a.order.id);
                    a.H.Ga(b)
                }).catch(function (a) {
                    return !!a && a instanceof Hi && 403 === tk(a) && !!a.message && ["shippingAddress.zipCode", "address.zipCode"].includes(a.message.errorKey)
                }, function () {
                    var b = a.view,
                        c = a.Oc,
                        e = d.bj,
                        l;
                    var m = a.mk;
                    l = l9(m.view).lr();
                    m.zj ? l = T7().get(l) : (m = w(m9(l9(m.view)), "subdivision must be present"),
                        l = U7(l).get(m));
                    c = c.Ua("printOrderFormUpdateOrderinvalidZipcodeForSubdivisionHtml", e, l);
                    i$(b).Yj(c);
                    T9(a.Sa, !1)
                }).catch(function (a) {
                    return !!a && a instanceof Hi && 403 === tk(a) && !!a.message && ["shippingAddress.phone", "address.phone"].includes(a.message.errorKey)
                }, function () {
                    var b = a.Oc.format("printOrderFormUpdateOrderInvalidContactNumber");
                    i$(a.view).Yj(b);
                    T9(a.Sa, !1)
                }).catch(function () {
                    var b = a.view,
                        c = a.Oc.Ua("printOrderFormUpdateOrderErrorHtml", "https://support.canva.com/troubleshooting/canva-print");
                    i$(b).Yj(c);
                    T9(a.Sa, !1)
                }).finally(function () {
                    return l$(a.view, !1)
                })
            }
        })
    }

    function Sda(a) {
        Da(a.order.xm, 'Order "{}" is already mutable', a.order.id);
        var b = new l7({
            Oe: I9(a.Sa.Ee),
            document: a.order.document,
            Bd: a.order.Bd,
            Vj: a.order.Vj,
            af: a.Sa.$o(),
            tc: a.mk.vu(),
            $c: a.Sa.vj()
        });
        return a.Wa.aD(b).then(function (b) {
            return a.order = b.order
        }).then(function () {
            return C9(a.Sa)
        })
    }
    o$.prototype.nH = function () {
        var a = new n7({
            Oe: I9(this.Sa.Ee),
            id: this.order.id,
            af: this.Sa.$o(),
            tc: this.mk.vu(),
            $c: this.Sa.vj()
        });
        return this.Wa.nH(a)
    };
    o$.prototype.BA = function (a) {
        var b = this;
        return this.pA.BA(a).then(function (c) {
            c || p$(b, "payment", a);
            return c
        })
    };

    function Oda(a) {
        var b = a.order,
            c = X(new Hl("print_checkout_payment"), "order_id", a.order.id);
        a.H.Ga(c);
        m$(a.view, !0);
        n$(a.view, !1);
        Tda(a).then(function () {
            return a.BA(a.order.id)
        }).then(function (c) {
            if (c) {
                var e = a.view.Yf();
                $8(e, "PAYMENT_PROGRESS") || (c = a.fO(),
                    Z8(e, "PAYMENT_PROGRESS", c.$el));
                return j$(a.view, !1).then(function () {
                    return c9(e, "PAYMENT_PROGRESS")
                }).then(function () {
                    return Uda(a, a.order.id)
                }).then(function () {
                    var c = a.view.Yf(),
                        d = a.dO({
                            u4: b.id
                        });
                    Z8(c, "ORDER_RECEIVED", d.$el);
                    c9(c, "ORDER_RECEIVED");
                    var c = a.kg,
                        d = a.Sa.Df.oc(),
                        e = 0 < a.Sa.su().length,
                        l = b.id,
                        m = a.Sa.uu(),
                        n = b.af,
                        p = b.Oe,
                        r = a.Sa.vj(),
                        u = b.Up / 100,
                        c = X(X(X(X(X(X(X(X(X(new Hl("print_checkout_success"), "template", c), "finish", d), "has_premium_images", e), "order_id", l), "paper", m), "product_sku", n), "quantity", p), "shipping", r), "total_order_price", u);
                    a.H.Ga(c);
                    a.hn()
                })
            }
        }).catch(q$, function () {
            var b = a.view,
                c = a.Oc.Ua("printOrderFormFinalizeOrderFailureHtml", "https://support.canva.com/troubleshooting/canva-print");
            i$(b).Yj(c)
        }).catch(function () {
            j$(a.view, !1).then(function () {
                var b = a.view.Yf();
                if (!$8(b, "ORDER_ERROR")) {
                    var c = a.cO(a.Oc.format("printOrderFormSubmitOrderFailureText"));
                    Z8(b, "ORDER_ERROR", c.$el)
                }
                c9(b, "ORDER_ERROR")
            })
        }).finally(function () {
            m$(a.view, !1);
            n$(a.view, !0)
        })
    }

    function Tda(a) {
        return a.order.xm ? P.resolve() : a.Wa.nH(new n7({
            id: a.order.id,
            xm: !0
        })).then(function (b) {
            return a.order = b.order
        }).catch(function () {
            p$(a, "finalize_order", a.order.id);
            throw new q$;
        })
    }

    function Uda(a, b) {
        return a.hA.UG(function (a) {
                var d = this;
                return this.Wa.Yo(new q7({
                    id: b
                })).then(function (e) {
                    if ("FAILED" === e.order.YD)
                        throw p$(d, "pdf_export", b),
                            Error("Export failed for order " + b);
                    "EXPORTED" === e.order.YD && a(e.order)
                })
            }
            .bind(a))
    }

    function p$(a, b, c) {
        var d = a.kg,
            e = a.Sa.Df.oc(),
            g = 0 < a.Sa.su().length,
            h = a.Sa.uu(),
            k = a.Sa.$o(),
            l = I9(a.Sa.Ee),
            m = a.Sa.vj(),
            n = a.Sa.IC();
        b = X(X(X(X(X(X(X(X(X(X(new Hl("print_checkout_fail"), "template", d), "failure_reason", b), "finish", e), "has_premium_images", g), "order_id", c), "paper", h), "product_sku", k), "quantity", l), "shipping", m), "total_order_price", n);
        a.H.Ga(b)
    }
    o$.prototype.destroy = function () {
        this.nD.destroy();
        this.Sa.destroy();
        this.mk && this.mk.destroy();
        this.pA && this.pA.destroy();
        this.view.remove()
    };

    function q$() {}
    t(q$, Error);

    function r$(a, b) {
        var c = this;
        this.Mb = a;
        this.hG = b;
        this.Mb.once("remove", function () {
            return c.hG.destroy()
        })
    }

    function Vda(a) {
        var b = new Y7({
                Ax: a.nd.Ax()
            }),
            c = am(),
            b = Pda({
                sa: a.sa,
                nd: a.nd,
                H: a.H,
                ma: a.ma,
                Ia: a.Ia,
                It: a.It,
                ec: a.ec,
                Bi: a.Bi,
                kg: a.kg,
                Uf: new X7({
                    sL: a.Mh.format("formValidatorInvalidEmpty")
                }),
                Gi: new y_,
                vc: a.vc,
                Xe: a.Xe,
                Ya: a.Ya,
                Bb: a.Bb,
                Kb: a.Kb,
                u: a.u,
                ql: b,
                Yz: function () {
                    d.close()
                },
                hn: a.hn,
                order: a.order,
                hA: c,
                fd: a.fd,
                Ja: a.Ja,
                Fe: a.Fe,
                Oc: a.Oc,
                Ec: a.Ec,
                cs: a.cs,
                Ea: a.Ea,
                Th: a.Th,
                Uh: a.Uh,
                Wa: a.Wa,
                jb: a.jb,
                tc: a.tc,
                hc: a.hc,
                sb: a.sb,
                SP: a.SP,
                ya: a.ya
            });
        a = b.bc;
        var b = new s$({
                hG: b.view,
                aa: Rk
            }),
            d = new r$(b, a);
        return d
    }
    r$.prototype.show = function () {
        this.Mb.show();
        this.hG.De()
    };
    r$.prototype.close = function () {
        this.Mb.ok()
    };

    function s$(a) {
        Uo.call(this, {
            className: "printOrderFormDialog",
            content: a.hG.$el,
            aa: a.aa,
            Qn: !1,
            Je: !0,
            cf: !1
        })
    }
    t(s$, Uo);

    function t$(a) {
        var b;
        b = b || {};
        var c = "";
        a = goog.asserts.assertArray(a.images, "expected parameter 'images' of type list\x3cstring\x3e.");
        for (var d = a.length, e = 0; e < d; e++)
            c += '\x3cdiv class\x3d"printProofingPage__resolutionThumbnailWrapper"\x3e\x3cdiv class\x3d"printProofingPage__resolutionThumbnailContainer" style\x3d"' + (b.kc ? "/*" + b.kc + "*//*" + b.kc + "*/" : "") + "background-image: url('" + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeMediaUri(a[e])) + "')\"\x3e\x3c/div\x3e\x3c/div\x3e";
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(c)
    }

    function u$(a) {
        soy.asserts.assertType(a.content instanceof soydata.SanitizedHtml || a.content instanceof soydata.UnsanitizedText || goog.isString(a.content), "content", a.content, "soydata.SanitizedHtml");
        var b = a.content;
        soy.asserts.assertType(goog.isString(a.Wd) || a.Wd instanceof goog.soy.data.SanitizedContent, "headingText", a.Wd, "string|goog.soy.data.SanitizedContent");
        var c = a.Wd;
        soy.asserts.assertType(goog.isString(a.Wb) || a.Wb instanceof goog.soy.data.SanitizedContent, "pageNumberOfTotal", a.Wb, "string|goog.soy.data.SanitizedContent");
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printProofingPage"\x3e\x3cdiv class\x3d"printFlowPage__header"\x3e\x3cspan class\x3d"printFlowStepNumberBadge"\x3e' + soy.$$escapeHtml(a.Wb) + '\x3c/span\x3e\x3ch1 class\x3d"printFlowPage__heading"\x3e' + soy.$$escapeHtml(c) + "\x3c/h1\x3e\x3c/div\x3e" + soy.$$escapeHtml(b) + "\x3c/div\x3e")
    }

    function v$(a) {
        soy.asserts.assertType(a.description instanceof goog.soy.data.SanitizedContent || a.description instanceof soydata.SanitizedHtml || a.description instanceof soydata.UnsanitizedText || goog.isString(a.description), "description", a.description, "!soydata.SanitizedHtml|string");
        var b = a.description;
        soy.asserts.assertType(goog.isString(a.yj) || a.yj instanceof goog.soy.data.SanitizedContent, "helpLinkUrl", a.yj, "string|goog.soy.data.SanitizedContent");
        var c = a.yj;
        soy.asserts.assertType(goog.isString(a.lz) || a.lz instanceof goog.soy.data.SanitizedContent, "imageClass", a.lz, "string|goog.soy.data.SanitizedContent");
        var d = a.lz;
        soy.asserts.assertType(goog.isString(a.th) || a.th instanceof goog.soy.data.SanitizedContent, "whyIsThisImportant", a.th, "string|goog.soy.data.SanitizedContent");
        var e = a.th;
        soy.asserts.assertType(null == a.lD || a.lD instanceof goog.soy.data.SanitizedContent || goog.isString(a.lD), "descriptionClasses", a.lD, "null|string|undefined");
        a = a.lD;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cp class\x3d"printProofingPage__description' + (a ? " " + soy.$$escapeHtmlAttribute(a) : "") + '"\x3e' + soy.$$escapeHtml(b) + '\x3c/p\x3e\x3cdiv class\x3d"printProofingPage__examplesContainer"\x3e\x3cspan class\x3d"printProofingPage__exampleImage ' + soy.$$escapeHtmlAttribute(d) + '"\x3e\x3c/span\x3e\x3c/div\x3e\x3cp class\x3d"printProofingPage__helpLink"\x3e\x3ca href\x3d"' + soy.$$escapeHtmlAttribute(soy.$$filterNormalizeUri(c)) + '" target\x3d"_blank"\x3e' + soy.$$escapeHtml(e) + "\x3c/a\x3e\x3c/p\x3e")
    };

    function w$(a) {
        soy.asserts.assertType(goog.isString(a.od) || a.od instanceof goog.soy.data.SanitizedContent, "backButtonText", a.od, "string|goog.soy.data.SanitizedContent");
        var b = a.od;
        soy.asserts.assertType(goog.isString(a.Pi) || a.Pi instanceof goog.soy.data.SanitizedContent, "nextButtonText", a.Pi, "string|goog.soy.data.SanitizedContent");
        var c = a.Pi;
        soy.asserts.assertType(goog.isString(a.uo) || a.uo instanceof goog.soy.data.SanitizedContent, "backButtonClasses", a.uo, "string|goog.soy.data.SanitizedContent");
        var d = a.uo;
        soy.asserts.assertType(goog.isString(a.Ep) || a.Ep instanceof goog.soy.data.SanitizedContent, "nextButtonClasses", a.Ep, "string|goog.soy.data.SanitizedContent");
        a = a.Ep;
        return soydata.VERY_UNSAFE.ordainSanitizedHtml(bZ({
            J: d + " buttonSecondary printEditorForm__button printEditorForm__backButton",
            text: b
        }) + bZ({
            J: a + " printEditorForm__button printEditorForm__nextButton",
            text: c
        }))
    };

    function x$(a, b) {
        var c = this;
        L.call(this, a);
        this.Sa = b;
        a.on("click", ".printEditorForm__orderSummaryBeginOrderButton", function () {
            return c.trigger(y$)
        });
        a.on("click", ".printEditorForm__orderSummaryCancelOrderButton", function () {
            c.trigger(z$)
        });
        a.on("click", ".printEditorForm__imageResolutionProofBackButton", function () {
            c.trigger(A$)
        });
        a.on("click", ".printEditorForm__imageResolutionProofContinueButton", function () {
            c.trigger(B$)
        });
        a.on("click", ".printEditorForm__bleedAreaProofBackButton", function () {
            c.trigger(C$)
        });
        a.on("click", ".printEditorForm__bleedAreaProofNextButton", function () {
            c.trigger(D$)
        });
        a.on("click", ".printEditorForm__safeAreaProofBackButton", function () {
            c.trigger(E$)
        });
        a.on("click", ".printEditorForm__safeAreaProofNextButton", function () {
            c.trigger(F$)
        })
    }
    t(x$, L);

    function Wda(a) {
        var b = $,
            c;
        c = a.BC;
        var d = a.MC,
            e;
        e = a.$Y;
        soy.asserts.assertType(goog.isString(e.description) || e.description instanceof goog.soy.data.SanitizedContent, "description", e.description, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(e.Wd) || e.Wd instanceof goog.soy.data.SanitizedContent, "headingText", e.Wd, "string|goog.soy.data.SanitizedContent");
        var g = e.Wd;
        soy.asserts.assertType(goog.isString(e.yj) || e.yj instanceof goog.soy.data.SanitizedContent, "helpLinkUrl", e.yj, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(e.Wb instanceof soydata.SanitizedHtml || e.Wb instanceof soydata.UnsanitizedText || goog.isString(e.Wb), "pageNumberOfTotal", e.Wb, "soydata.SanitizedHtml");
        var h = e.Wb;
        soy.asserts.assertType(goog.isString(e.th) || e.th instanceof goog.soy.data.SanitizedContent, "whyIsThisImportant", e.th, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(e.Nx instanceof soydata.SanitizedHtml || e.Nx instanceof soydata.UnsanitizedText || goog.isString(e.Nx), "coverageAlertMessageHtml", e.Nx, "soydata.SanitizedHtml");
        var k = e.Nx;
        e = soydata.VERY_UNSAFE.ordainSanitizedHtml(u$({
            Wd: g,
            Wb: h,
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + v$(soy.$$assignDefaults({
                lz: "printProofingPage__exampleImage--bleedImage"
            }, e)) + wY({
                message: k,
                J: "printProofingPage__feedbackAlert printProofingPage__feedbackAlert--hidden printProofingPage__feedbackAlert--bleedCoverage",
                Hb: !1
            }))
        }));
        g = G$;
        h = a.K0;
        soy.asserts.assertType(h.kx instanceof soydata.SanitizedHtml || h.kx instanceof soydata.UnsanitizedText || goog.isString(h.kx), "alertHighRes", h.kx, "soydata.SanitizedHtml");
        k = h.kx;
        soy.asserts.assertType(h.mx instanceof soydata.SanitizedHtml || h.mx instanceof soydata.UnsanitizedText || goog.isString(h.mx), "alertMediumRes", h.mx, "soydata.SanitizedHtml");
        var l = h.mx;
        soy.asserts.assertType(h.lx instanceof soydata.SanitizedHtml || h.lx instanceof soydata.UnsanitizedText || goog.isString(h.lx), "alertLowRes", h.lx, "soydata.SanitizedHtml");
        var m = h.lx;
        soy.asserts.assertType(goog.isString(h.Wd) || h.Wd instanceof goog.soy.data.SanitizedContent, "headingText", h.Wd, "string|goog.soy.data.SanitizedContent");
        var n = h.Wd;
        soy.asserts.assertType(h.Wb instanceof soydata.SanitizedHtml || h.Wb instanceof soydata.UnsanitizedText || goog.isString(h.Wb), "pageNumberOfTotal", h.Wb, "soydata.SanitizedHtml");
        h = soydata.VERY_UNSAFE.ordainSanitizedHtml(u$({
            Wd: n,
            Wb: h.Wb,
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + qY({
                message: k,
                J: "printProofingPage__feedbackAlert printProofingPage__feedbackAlert--highRes",
                Hb: !1
            }) + wY({
                message: m,
                J: "printProofingPage__feedbackAlert printProofingPage__feedbackAlert--lowRes",
                Hb: !1
            }) + '\x3cdiv class\x3d"printProofingPage__imageResolutionThumbnails printProofingPage__images--lowRes"\x3e\x3c/div\x3e' + uY({
                message: l,
                J: "printProofingPage__feedbackAlert printProofingPage__feedbackAlert--mediumRes",
                Hb: !1
            }) + '\x3cdiv class\x3d"printProofingPage__imageResolutionThumbnails printProofingPage__images--mediumRes"\x3e\x3c/div\x3e')
        }));
        k = H$;
        l = v9(a.ZM);
        m = I$;
        a = a.Y5;
        soy.asserts.assertType(goog.isString(a.description) || a.description instanceof goog.soy.data.SanitizedContent, "description", a.description, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(a.Wd) || a.Wd instanceof goog.soy.data.SanitizedContent, "headingText", a.Wd, "string|goog.soy.data.SanitizedContent");
        n = a.Wd;
        soy.asserts.assertType(goog.isString(a.yj) || a.yj instanceof goog.soy.data.SanitizedContent, "helpLinkUrl", a.yj, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(a.Wb instanceof soydata.SanitizedHtml || a.Wb instanceof soydata.UnsanitizedText || goog.isString(a.Wb), "pageNumberOfTotal", a.Wb, "soydata.SanitizedHtml");
        var p = a.Wb;
        soy.asserts.assertType(goog.isString(a.th) || a.th instanceof goog.soy.data.SanitizedContent, "whyIsThisImportant", a.th, "string|goog.soy.data.SanitizedContent");
        a = soydata.VERY_UNSAFE.ordainSanitizedHtml(u$({
            Wd: n,
            Wb: p,
            content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + v$(soy.$$assignDefaults({
                lz: "printProofingPage__exampleImage--safeArea"
            }, a)))
        }));
        n = J$;
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "beginOrderButtonText", c, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(goog.isString(d) || d instanceof goog.soy.data.SanitizedContent, "cancelOrderButtonText", d, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(e instanceof soydata.SanitizedHtml || e instanceof soydata.UnsanitizedText || goog.isString(e), "bleedAreaProofPageHtml", e, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(g) || g instanceof goog.soy.data.SanitizedContent, "bleedAreaProofPageName", g, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(h instanceof soydata.SanitizedHtml || h instanceof soydata.UnsanitizedText || goog.isString(h), "imageResolutionProofHtml", h, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(k) || k instanceof goog.soy.data.SanitizedContent, "imageResolutionProofPageName", k, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(l instanceof soydata.SanitizedHtml || l instanceof soydata.UnsanitizedText || goog.isString(l), "orderSummaryHtml", l, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(m) || m instanceof goog.soy.data.SanitizedContent, "orderSummaryPageName", m, "string|goog.soy.data.SanitizedContent");
        soy.asserts.assertType(a instanceof soydata.SanitizedHtml || a instanceof soydata.UnsanitizedText || goog.isString(a), "safeAreaProofPageHtml", a, "soydata.SanitizedHtml");
        soy.asserts.assertType(goog.isString(n) || n instanceof goog.soy.data.SanitizedContent, "safeAreaProofPageName", n, "string|goog.soy.data.SanitizedContent");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml('\x3cdiv class\x3d"printEditorForm"\x3e\x3cdiv class\x3d"printEditorForm__content"\x3e' + d9({
            J: "printEditorForm__pagesPanel",
            Bu: !0,
            ia: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + a9({
                content: l,
                name: m,
                visible: !0
            }) + a9({
                content: h,
                name: k
            }) + a9({
                content: e,
                name: g
            }) + a9({
                content: a,
                name: n
            }))
        }) + '\x3c/div\x3e\x3cdiv class\x3d"printEditorForm__footer"\x3e' + w$({
            Pi: c,
            Ep: "printEditorForm__orderSummaryBeginOrderButton",
            od: d,
            uo: "printEditorForm__orderSummaryCancelOrderButton"
        }) + "\x3c/div\x3e\x3c/div\x3e");
        b = b(c.toString());
        c = z9(b.find(".printOrderSummary"));
        return new x$(b, c)
    }
    x$.prototype.Yf = function () {
        var a = this.$el.find(".printEditorForm__pagesPanel");
        return new Y8(a)
    };

    function K$(a, b) {
        a.$el.find(".printEditorForm__safeAreaProofNextButton").toggleClass("submitting", b)
    }

    function Xda(a) {
        var b = a.$el.find(".printProofingPage__feedbackAlert--highRes"),
            c = a.$el.find(".printProofingPage__feedbackAlert--lowRes"),
            d = a.$el.find(".printProofingPage__feedbackAlert--mediumRes");
        b.addClass("printProofingPage__feedbackAlert--hidden");
        c.addClass("printProofingPage__feedbackAlert--hidden");
        d.addClass("printProofingPage__feedbackAlert--hidden");
        a.$el.find(".printProofingPage__images--lowRes").empty();
        a.$el.find(".printProofingPage__images--mediumRes").empty()
    }

    function Yda(a, b) {
        a.$el.find(".printProofingPage__feedbackAlert--mediumRes").removeClass("printProofingPage__feedbackAlert--hidden");
        a.$el.find(".printProofingPage__images--mediumRes").append(t$({
            images: b
        }).toString())
    }

    function Zda(a, b) {
        a.$el.find(".printProofingPage__feedbackAlert--lowRes").removeClass("printProofingPage__feedbackAlert--hidden");
        a.$el.find(".printProofingPage__images--lowRes").append(t$({
            images: b
        }).toString())
    }

    function L$(a, b) {
        a.$el.find(".printEditorForm__footer").empty().append(b)
    }
    var y$ = "CLICK_BEGIN_ORDER",
        z$ = "CLICK_CANCEL_ORDER",
        A$ = "CLICK_IMAGE_RESOLUTION_PROOF_BACK",
        B$ = "CLICK_IMAGE_RESOLUTION_PROOF_CONTINUE",
        C$ = "CLICK_BLEED_AREA_PROOF_BACK",
        D$ = "CLICK_BLEED_AREA_PROOF_NEXT",
        E$ = "CLICK_SAFE_AREA_PROOF_BACK",
        F$ = "CLICK_SAFE_AREA_PROOF_NEXT",
        I$ = "ORDER_SUMMARY",
        H$ = "IMAGE_RESOLUTION_PROOF",
        G$ = "BLEED_AREA_PROOF",
        J$ = "SAFE_AREA_PROOF";

    function M$() {}
    t(M$, Error);

    function N$(a, b, c) {
        var d = this;
        this.view = b;
        this.Sa = c;
        this.H = a.H;
        this.kg = a.kg;
        this.Xh = a.Xh;
        this.vc = a.vc;
        this.mu = a.mu;
        this.ma = a.ma;
        this.Ia = a.Ia;
        this.dJ = a.dJ;
        this.HJ = a.HJ;
        this.IJ = a.IJ;
        this.Yg = a.Yg;
        this.Dm = a.Dm;
        this.qu = a.qu;
        this.nL = null;
        this.$e = a.$e;
        this.Gf = a.Gf;
        this.Wa = a.Wa;
        this.QO = a.QO;
        this.Ol = a.Ol;
        this.ya = a.ya;
        this.eA = a.eA;
        this.dA = a.dA;
        this.Vz = a.Vz;
        this.sz = a.sz;
        b.on(y$, function () {
            return $da(d)
        });
        b.on(z$, function () {
            d.Vz()
        });
        b.on(A$, function () {
            O$(d)
        });
        b.on(B$, function () {
            P$(d);
            d.Dm().Bs(!0);
            d.H.Ga(new Hl("print_proof_resolution"))
        });
        b.on(C$, function () {
            aea(d)
        });
        b.on(D$, function () {
            c9(d.view.Yf(), J$);
            var a = d.view,
                b = d.$e.od(),
                c = d.$e.Pi(),
                b = $(w$({
                    uo: "printEditorForm__safeAreaProofBackButton",
                    od: b,
                    Ep: "printEditorForm__safeAreaProofNextButton buttonSubmittable",
                    Pi: c
                }).toString());
            L$(a, b);
            a = d.Dm();
            a.Bs(!1);
            a.fB(!0);
            d.H.Ga(new Hl("print_proof_bleed"))
        });
        b.on(E$, function () {
            P$(d);
            var a = d.Dm();
            a.fB(!1);
            a.Bs(!0)
        });
        b.on(F$, function () {
            bea(d)
        })
    }

    function cea(a) {
        var b = Wda({
            BC: a.$e.BC(),
            MC: a.$e.MC(),
            $Y: {
                Nx: a.Gf.Ua("printProofingBleedAreaNotCoveredHtml"),
                description: a.Gf.format("printProofingBleedAreaProofDescription"),
                Wd: a.Gf.format("printProofingCheckBleedAreaHeading"),
                yj: "https://support.canva.com/canva-print/preparing-your-design-for-print/pink-bleed-line/",
                Wb: a.Fe.Wb(2, 5),
                th: a.Gf.th()
            },
            K0: {
                kx: a.Gf.format("printProofingImagesAreHighResolutionMessage"),
                mx: a.Gf.Ua("printProofingImagesAreMediumResolutionMessageHtml", "https://support.canva.com/canva-print/design-quality-check/"),
                lx: a.Gf.Ua("printProofingImagesAreLowResolutionMessageHtml", "https://support.canva.com/canva-print/design-quality-check/"),
                Wd: a.Gf.format("printProofingCheckResolutionHeading"),
                Wb: a.Fe.Wb(1, 5)
            },
            ZM: K9({
                sa: a.sa,
                zm: !1,
                Am: !1,
                Bb: a.Bb,
                Kb: [],
                fd: a.fd,
                Ja: a.Ja,
                Ec: a.Ec,
                Ea: a.Ea,
                jb: a.jb,
                Hf: a.Hf,
                Xh: a.Xh,
                KA: function (a) {
                    return s8(a)
                },
                oW: 1 < a.mu() ? 2 : 1,
                hc: a.hc
            }),
            Y5: {
                description: a.Gf.format("printProofingSafeAreaProofDescription"),
                Wd: a.Gf.format("printProofingCheckSafeAreaHeading"),
                yj: "https://support.canva.com/canva-print/pink-safe-area/",
                Wb: a.Fe.Wb(3, 5),
                th: a.Gf.th()
            }
        });
        return {
            bc: dea(a, b),
            view: b
        }
    }

    function dea(a, b) {
        var c = H9({
            sa: a.sa,
            ma: a.ma,
            Yg: a.Yg,
            zm: !1,
            Am: !1,
            vc: a.vc,
            Ya: a.Ya,
            Bb: a.Bb,
            Kb: [],
            jn: a.jn,
            fd: a.fd,
            Ja: a.Ja,
            Ec: a.Ec,
            Ea: a.Ea,
            Wa: a.Wa,
            jb: a.jb,
            Xj: a.Xj,
            hc: a.hc
        }, b.Sa);
        return new N$(a, b, c)
    }
    f = N$.prototype;
    f.De = function () {
        this.Sa.De()
    };

    function O$(a) {
        c9(a.view.Yf(), I$);
        var b = a.view,
            c = a.$e.BC();
        a = a.$e.MC();
        c = $(w$({
            uo: "printEditorForm__orderSummaryCancelOrderButton",
            od: a,
            Ep: "printEditorForm__orderSummaryBeginOrderButton",
            Pi: c
        }).toString());
        L$(b, c)
    }
    f.vK = function () {
        return Ki(this.ma, new Xh({
            $l: [this.Ia],
            limit: 1
        })).then(function (a) {
            return ka(a.gt).next().value
        })
    };

    function eea(a) {
        return oca(a.Wa, new v7({
            Z: a.Ia,
            user: a.ya
        })).then(function (a) {
            return (a = ka(a.cI).next().value) && a.Td
        })
    }
    f.aD = function () {
        var a = new l7({
            Oe: I9(this.Sa.Ee),
            document: this.vc(),
            Bd: this.Sa.wc(),
            af: this.Sa.$o(),
            Vj: this.Xh,
            $c: this.Sa.vj()
        });
        return this.Wa.aD(a).then(function (a) {
            return a.order
        })
    };

    function Q$(a) {
        var b = a.view.Yf();
        return a.qu().then(function (b) {
            return R$(a, S$(a, b))
        }).finally(function () {
            c9(b, H$);
            var c = a.view,
                d = a.$e.od(),
                e = a.$e.Ai(),
                d = $(w$({
                    uo: "printEditorForm__imageResolutionProofBackButton",
                    od: d,
                    Ep: "printEditorForm__imageResolutionProofContinueButton",
                    Pi: e
                }).toString());
            L$(c, d);
            a.eA()
        })
    }

    function P$(a) {
        c9(a.view.Yf(), G$);
        var b = a.view,
            c = a.$e.od(),
            d = a.$e.Pi(),
            c = $(w$({
                uo: "printEditorForm__bleedAreaProofBackButton",
                od: c,
                Ep: "printEditorForm__bleedAreaProofNextButton",
                Pi: d
            }).toString());
        L$(b, c);
        T$(a);
        a.dA()
    }

    function T$(a) {
        var b = a.Sa.tr(),
            c = a.Sa.wc(),
            c = _.range(0, c),
            c = (b = a.sz(c, b)) ? a.$e.Pi() : a.$e.format("printEditorFormContinueAnywayButtonText");
        a.view.$el.find(".printEditorForm__bleedAreaProofNextButton").empty().append(c);
        a.view.$el.find(".printProofingPage__feedbackAlert--bleedCoverage").toggleClass("printProofingPage__feedbackAlert--hidden", b)
    }
    f.QM = function () {
        C9(this.Sa)
    };
    f.IM = function () {
        var a = this,
            b = this.nL;
        b && b.cancel();
        this.nL = this.Yg().cancellable().then(this.qu).then(function (b) {
            return R$(a, S$(a, b))
        }).catch(P.CancellationError, $.noop).finally(function () {
            return a.nL = null
        })
    };
    f.AM = function () {
        T$(this)
    };

    function $da(a) {
        1 < a.Sa.wc() && 1 === a.mu() ? (new by({
            content: $('\x3cp\x3eYour design has only one page. Please add another page or select "Single sided" printing to proceed.\x3c/p\x3e'),
            title: "Cannot print on two sides"
        })).show() : Q$(a).then(function () {
            return a.Sa.vG
        }).then(function () {
            var b = a.kg,
                c = a.Sa.Df.oc(),
                d = 0 < a.Sa.su().length,
                e = a.Sa.uu(),
                g = a.Sa.$o(),
                h = I9(a.Sa.Ee),
                k = a.Sa.vj(),
                l = a.Sa.IC(),
                b = X(X(X(X(X(X(X(X(new Hl("print_start_order"), "template", b), "finish", c), "has_premium_images", d), "paper", e), "product_sku", g), "quantity", h), "shipping", k), "total_order_price", l);
            a.H.Ga(b)
        })
    }

    function aea(a) {
        Q$(a).then(function () {
            a.Dm().Bs(!1)
        })
    }

    function bea(a) {
        K$(a.view, !0);
        a.Yg().catch(function () {
            throw new M$;
        }).then(function () {
            return P.all([a.vK(), eea(a), a.aD()])
        }).then(function (b) {
            var c = ka(b);
            b = c.next().value;
            var d = c.next().value,
                c = c.next().value;
            a.dJ({
                sa: b,
                It: b && b.Gh,
                Bb: new Map,
                Kb: a.Sa.su(),
                order: c,
                tc: d
            }).show()
        }).catch(M$, function () {
            (new by({
                content: $("\x3cp\x3ePlease try again after the error is resolved\x3c/p\x3e"),
                title: "Design changes failed to save"
            })).show()
        }).catch(Hi, function (b) {
            409 === b.VG && a.QO()
        }).finally(function () {
            return K$(a.view, !1)
        });
        a.H.Ga(new Hl("print_proof_safe_area"))
    }
    f.destroy = function () {
        this.view.remove()
    };

    function S$(a, b) {
        var c = a.HJ,
            d = a.IJ,
            e = a.Sa.tr(),
            g = a.Sa.wc();
        return b.filter(function (a) {
            return a.kF
        }).filter(function (a) {
            return a.Xr < g
        }).map(function (a) {
            var b = a.kF.AQ.F(),
                g = a.Ra.F(),
                b = b / g * (c / e.Ki) * 25400,
                g = a.kF.AQ.D(),
                m = a.Ra.D(),
                b = Math.min(b, g / m * (d / e.li) * 25400);
            return {
                kO: 120 > b ? "LOW" : 150 > b ? "MEDIUM" : "HIGH",
                bd: a.kF.ex.url
            }
        }).filter(function (a) {
            return "HIGH" !== a.kO
        })
    }

    function R$(a, b) {
        Xda(a.view);
        if (0 === b.length)
            a.view.$el.find(".printProofingPage__feedbackAlert--highRes").removeClass("printProofingPage__feedbackAlert--hidden");
        else {
            var c = b.filter(function (a) {
                return "LOW" === a.kO
            });
            b = b.filter(function (a) {
                return "MEDIUM" === a.kO
            });
            0 !== c.length && Zda(a.view, c.map(function (a) {
                return a.bd
            }));
            0 !== b.length && Yda(a.view, b.map(function (a) {
                return a.bd
            }))
        }
    }
    f.wc = function () {
        return this.Sa.wc()
    };

    function U$(a) {
        var b = this;
        L.call(this, a);
        a.on("click", function () {
            return b.trigger(V$)
        })
    }
    t(U$, L);
    U$.prototype.Ds = function (a) {
        this.$el.toggleClass("submitting", a)
    };
    var V$ = "CLICK_SEND_TO_PRINT";

    function W$(a, b) {
        var c = this;
        this.view = b;
        this.Ia = a.Ia;
        this.Pe = a.Pe;
        this.H = a.H;
        this.Tg = a.Tg;
        this.gu = a.gu;
        this.kr = a.kr;
        this.OT = !1;
        this.bp = a.bp;
        this.vc = a.vc;
        this.SK = a.SK;
        this.hz = a.hz;
        this.cA = a.cA;
        this.kG = a.kG;
        this.sN = a.sN;
        this.iG = a.iG;
        this.bO = a.bO;
        this.aO = a.aO;
        this.bi = a.bi;
        this.kw = a.kw;
        this.lB = a.lB;
        this.XO = a.XO;
        this.Uh = this.ye = null;
        this.Wa = a.Wa;
        this.ma = a.ma;
        this.Bq = a.Bq;
        this.ZO = null;
        this.ge = a.ge;
        b.on(V$, function () {
            return fea(c)
        })
    }

    function R_(a) {
        var b = $,
            c;
        c = a.l6;
        soy.asserts.assertType(goog.isString(c) || c instanceof goog.soy.data.SanitizedContent, "sendToPrintButtonText", c, "string|goog.soy.data.SanitizedContent");
        c = soydata.VERY_UNSAFE.ordainSanitizedHtml(bZ({
            J: "editorActionPrint buttonSubmittable",
            text: c
        }));
        b = b(c.toString());
        b = new U$(b);
        return {
            bc: gea(a, b),
            view: b
        }
    }

    function gea(a, b) {
        function c() {
            (new by({
                content: $("\x3cp\x3eYour version of this design has become out of sync with the server. Usually this means someone else has started editing it. Reload the page and try again\x3c/p\x3e"),
                title: "Design out of sync"
            })).show()
        }
        var d = ud(a.u);
        return new W$({
            Bq: a.Bq,
            H: a.H,
            ma: a.ma,
            Ia: a.Ia,
            Pe: a.Pe,
            Tg: a.Tg,
            gu: a.gu,
            kr: a.kr,
            vc: a.vc,
            bp: a.bp,
            hz: a.hz,
            cA: a.cA,
            Wa: a.Wa,
            aO: function (b) {
                return Hca({
                    H: a.H,
                    mf: "publish_print",
                    hm: w(b.hJ.G(), "The doctype must have an id"),
                    nb: a.nb,
                    Rt: a.vc(),
                    om: a.LK() || "",
                    u: Fd(a.u),
                    zv: b.zv,
                    Ag: a.Ag,
                    jq: !1,
                    kq: !1,
                    Yn: null
                }).view
            },
            bO: function (b) {
                return cea({
                    sa: b.sa,
                    H: a.H,
                    ma: a.ma,
                    Ia: a.Ia,
                    dJ: function (c) {
                        var d = c.sa,
                            k = a.H,
                            l;
                        l = a.u;
                        l.nd || (l.nd = new nf(l.config));
                        l = l.nd;
                        var m = a.ma,
                            n = a.Ia,
                            p = c.It,
                            r = Zc(a.u),
                            u;
                        u = a.u;
                        u.Bi || (u.Bi = new pf(u.config));
                        u = u.Bi;
                        var v = b.kg,
                            y = Xc(a.u),
                            q = a.vc,
                            x = a.Xe,
                            E = Tc(a.u),
                            B = c.Bb,
                            K = c.Kb,
                            C = a.u,
                            N = c.order,
                            Q = b.fd,
                            M = Rc(a.u),
                            ca = qd(a.u),
                            V;
                        V = a.u;
                        V.Oc || (V.Oc = new rf(V.config));
                        V = V.Oc;
                        var ra = Bd(a.u),
                            Ka;
                        Ka = a.u;
                        Ka.cs || (Ka.cs = new mf(Ka.config));
                        Ka = Ka.cs;
                        var ma = sd(a.u),
                            aa = a.u;
                        aa.Th || (aa.Th = new qf(aa.config));
                        return Vda({
                            sa: d,
                            H: k,
                            nd: l,
                            ma: m,
                            Ia: n,
                            It: p,
                            ec: r,
                            Bi: u,
                            kg: v,
                            Mh: y,
                            vc: q,
                            Xe: x,
                            Ya: E,
                            Bb: B,
                            Kb: K,
                            u: C,
                            order: N,
                            fd: Q,
                            Ja: M,
                            Fe: ca,
                            Oc: V,
                            Ec: ra,
                            cs: Ka,
                            Ea: ma,
                            Th: aa.Th,
                            Uh: b.Uh,
                            Wa: a.Wa,
                            jb: b.jb,
                            Hf: b.Hf,
                            tc: c.tc,
                            hc: b.hc,
                            sb: a.sb,
                            SP: a.ge.bh(),
                            ya: a.ge.G(),
                            hn: b.hn
                        })
                    },
                    kg: b.kg,
                    Yg: a.Yg,
                    mu: a.mu,
                    Dm: a.Dm,
                    vc: a.vc,
                    sz: a.sz,
                    Ya: Tc(a.u),
                    Bb: new Map,
                    fd: b.fd,
                    Ja: Rc(a.u),
                    $e: d,
                    Fe: qd(a.u),
                    Ec: Bd(a.u),
                    Ea: sd(a.u),
                    Gf: wd(a.u),
                    Xh: b.Uh.id,
                    Wa: a.Wa,
                    jb: b.jb,
                    Hf: b.Hf,
                    Xj: a.Xj,
                    jn: a.kw,
                    hc: b.hc,
                    QO: c,
                    Ol: a.Ol,
                    ya: a.ge.G(),
                    qu: a.qu,
                    IJ: Lg(a.Pe.tb).width,
                    HJ: Lg(a.Pe.tb).height,
                    dA: b.dA,
                    eA: b.eA,
                    Vz: b.Vz
                })
            },
            bi: a.bi,
            kw: a.kw,
            lB: function () {
                (new by({
                    content: $("\x3cp\x3e" + d.Ua("printEditorFormErrorStateMessageHtml", hea).toString() + "\x3c/p\x3e"),
                    title: d.format("printEditorFormErrorStateHeading")
                })).show()
            },
            XO: function (b) {
                return new P(function (c) {
                    var d = a.H,
                        k = b.hJ,
                        l = a.Ag,
                        m = a.nb,
                        n = a.vc(),
                        p = a.LK(),
                        r = Fd(a.u),
                        u = b.Yn,
                        v = k.Yh || k.getName(),
                        y = r.Bh(),
                        q = r.format("updateDoctypeConfirmUpdateButtonText"),
                        v = w(v, "The doctype must have a name"),
                        v = r.Ua("updateDoctypeUpdateDimensionsMessageHtml", v),
                        q = {
                            Bh: y,
                            vk: q,
                            message: v,
                            Lj: r.Lj(),
                            yp: "https://support.canva.com/canva-print/preparing-your-design-for-print/resizing-for-print/",
                            Bl: sf(r),
                            title: r.title()
                        },
                        y = $;
                    soy.asserts.assertType(goog.isString(q.Bh) || q.Bh instanceof goog.soy.data.SanitizedContent, "cancelButtonText", q.Bh, "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(goog.isString(q.vk) || q.vk instanceof goog.soy.data.SanitizedContent, "confirmButtonText", q.vk, "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(q.message instanceof soydata.SanitizedHtml || q.message instanceof soydata.UnsanitizedText || goog.isString(q.message), "message", q.message, "soydata.SanitizedHtml");
                    soy.asserts.assertType(goog.isString(q.Lj) || q.Lj instanceof goog.soy.data.SanitizedContent, "moreInfoLinkText", q.Lj, "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(goog.isString(q.yp) || q.yp instanceof goog.soy.data.SanitizedContent, "moreInfoLinkUrl", q.yp, "string|goog.soy.data.SanitizedContent");
                    soy.asserts.assertType(q.Bl instanceof soydata.SanitizedHtml || q.Bl instanceof soydata.UnsanitizedText || goog.isString(q.Bl), "saveACopyMessage", q.Bl, "soydata.SanitizedHtml");
                    soy.asserts.assertType(goog.isString(q.title) || q.title instanceof goog.soy.data.SanitizedContent, "title", q.title, "string|goog.soy.data.SanitizedContent");
                    q = soydata.VERY_UNSAFE.ordainSanitizedHtml(IY({
                        J: "updateDoctypeDialog",
                        content: soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks("" + b8(soy.$$assignDefaults({
                            J: "updateDoctypeDialog__updateDoctype",
                            jq: !0,
                            kq: !0
                        }, q)))
                    }));
                    y = y(q.toString());
                    q = new JY(y, $(document));
                    v = new c8(y.find(".updateDoctype"));
                    y = new Z7(y, q, v);
                    d = {
                        H: d,
                        mf: "print_resize_dialog",
                        hm: w(k.G(), "The doctype must have an id"),
                        Rt: n,
                        nb: m,
                        om: p,
                        u: r,
                        Ag: l,
                        Yn: u
                    };
                    d = h8(d, y.z7);
                    d = new a8(y, d);
                    y.$el.appendTo("body");
                    y.show();
                    d.BM = c
                })
            },
            ge: a.ge,
            SK: qda,
            sN: j8,
            kG: Pca,
            iG: x3
        }, b)
    }

    function X$(a) {
        Y$(a, !1).then(function () {
            null != a.ye && O$(a.ye)
        })
    }
    f = W$.prototype;
    f.QM = function () {
        null != this.ye && this.ye.QM()
    };

    function W_(a, b) {
        var c = w(b.G(), "The doctype must have an id");
        if (a.Pe.G() !== c) {
            a.Pe = b;
            var d = a.bp();
            a.bi(!1);
            a.ye && (a.ye.destroy(),
                a.ye = null);
            d.hh() && (d.$el.find(".editorSideDrawer__content").empty(),
                f9(d, !0),
                Z$(a).then(function (b) {
                    var d = a.iG(b.id, c),
                        h = a.kG(b.id, c);
                    return $$(a, b, d, h)
                }).catch(function () {
                    return a.lB()
                }).finally(function () {
                    return f9(d, !1)
                }))
        }
    }
    f.IM = function () {
        null != this.ye && this.ye.IM()
    };
    f.AM = function () {
        null != this.ye && this.ye.AM()
    };

    function fea(a) {
        a.view.Ds(!0);
        var b = a.bp(),
            c = w(a.Pe.G(), "The doctype must have an id"),
            d = b.hh();
        return Z$(a).then(function (b) {
            var g = a.iG(b.id, c),
                h = a.kG(b.id, c),
                k = !!g,
                l = k || !h;
            iea(a, {
                Cc: c,
                s4: l && !d,
                p5: k,
                k7: l
            });
            return d ? X$(a) : $$(a, b, g, h).then(function () {
                l && Y$(a, !0)
            })
        }).catch(function () {
            return a.lB()
        }).finally(function () {
            return a.view.Ds(!1)
        })
    }

    function Z$(a) {
        return a.Uh ? P.resolve(a.Uh) : y3(a.Wa).then(function (b) {
            a.Uh = w(b.EA[0], "Current country must have a print region.");
            return a.Uh
        })
    }

    function $$(a, b, c, d) {
        var e = a.bp();
        jea(a);
        return c ? a.ye ? P.resolve() : kea(a, b, c, e) : null == d ? lea(a, b, e) : mea(a, d)
    }

    function lea(a, b, c) {
        var d = "BUSINESS_CARD FLYER INVITATION LETTERHEAD POSTCARD POSTER".split(" ").map(function (c) {
            return a.sN(b.id, c)
        }).filter(function (a) {
            return null != a
        });
        return Et(a.Tg, new Fu({
            Aj: d,
            limit: d.length
        })).then(function (b) {
            b = a.aO({
                hJ: a.Pe,
                zv: b.$q
            });
            c.Kn(b.$el)
        })
    }

    function mea(a, b) {
        var c = new Du({
            id: b,
            ip: !1
        });
        a.view.Ds(!0);
        return a.Tg.pb(c).then(function (b) {
            return a.XO({
                hJ: a.Pe,
                Yn: b.Cc
            })
        }).then(function () {
            var c = X(new Hl("print_resize_dialog_opened"), "template", b);
            a.H.Ga(c)
        }).catch(function () {
            return a.lB()
        })
    }

    function kea(a, b, c, d) {
        return P.all([a.Wa.YS(new p7({
            ig: b.Fh[0],
            currency: "USD",
            Hf: c
        })), a.vK()]).then(function (e) {
            var g = ka(e);
            e = g.next().value;
            g = g.next().value;
            e = a.bO({
                sa: g,
                kg: w(a.Pe.G(), "documentType must have an id"),
                fd: a.SK(c),
                jb: e.jb,
                Hf: c,
                hc: e.hc,
                Uh: b,
                dA: function () {
                    return a.bi(!0)
                },
                eA: function () {
                    return a.bi(!1)
                },
                Vz: function () {
                    return X$(a)
                },
                hn: function () {
                    return X$(a)
                }
            });
            g = e.bc;
            d.Kn(e.view.$el);
            g.De();
            a.ZO = d.Bq(a.Bq);
            a.ye = g
        })
    }

    function iea(a, b) {
        b = X(X(X(X(X(X(new Hl("print_button_click"), "section", "editor"), "location", "menu_bar"), "template", b.Cc), "toggled", b.k7), "side_drawer_opened", b.s4), "print_supported_doc_type", b.p5);
        a.H.Ga(b)
    }

    function jea(a) {
        a.kr && a.gu.load().then(function () {
            a.OT || (a.OT = !0,
                a.gu.identify(a.ge.G(), {
                    displayName: a.ge.Tb(),
                    email: a.ge.bh()
                }))
        })
    }

    function Y$(a, b) {
        return a.bp().Fs(b).then(function () {
            if (b)
                a.ye && a.kw(a.ye.wc());
            else {
                if (a.ye) {
                    var c = a.ye.Dm();
                    c.Bs(!1);
                    c.fB(!1)
                }
                a.bi(!1);
                a.hz()
            }
        }).then(function () {
            return a.cA()
        })
    }
    f.vK = function () {
        return Ki(this.ma, new Xh({
            $l: [this.Ia],
            limit: 1
        })).then(function (a) {
            return ka(a.gt).next().value
        })
    };
    f.destroy = function () {
        this.view.remove();
        this.ZO && this.ZO.remove();
        this.ye && this.ye.destroy()
    };
    var hea = "https://support.canva.com/canva-print/";
